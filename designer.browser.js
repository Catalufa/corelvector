/*! For license information please see designer.browser.js.LICENSE.txt */
var GravitDesigner=function(e){function t(t){for(var o,r,s=t[0],l=t[1],c=t[2],u=0,p=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(d&&d(t);p.length;)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(o=!1)}o&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},i={2:0},a=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,o){n=i[e]=[t,o]}));t.push(n[2]=o);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.src=function(e){return r.p+"chunk."+({12:"vendors~heic2any",13:"vendors~pdfjsWorker"}[e]||e)+".js"}(e);var l=new Error;a=function(t){s.onerror=s.onload=null,clearTimeout(c);var n=i[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",l.name="ChunkLoadError",l.type=o,l.request=a,n[1](l)}i[e]=void 0}};var c=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(t)},r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var s=this.webpackJsonpGravitDesigner=this.webpackJsonpGravitDesigner||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;return a.push([1348,0]),n()}([,,,function(e,t,n){"use strict";var o=n(186).PROPER,i=n(72),a=n(49),r=n(56),s=n(20),l=n(444),c=RegExp.prototype,d=c.toString,u=s((function(){return"/a/b"!==d.call({source:"a",flags:"b"})})),p=o&&"toString"!==d.name;(u||p)&&i(c,"toString",(function(){var e=a(this);return"/"+r(e.source)+"/"+r(l(e))}),{unsafe:!0})},,,,function(e,t,n){"use strict";n(600),n(610),n(611),n(612),n(613),n(614)},,function(e,t,n){"use strict";var o=n(13);const i=n(503),a=n(504),r=n(217);i.GoogleTagManagerSettings=n(799),i.AUTO_SAVE_ENABLED=o.GPlatform.webBrowser!==o.GPlatform.constructor.WebBrowser.Safari,i.DOMAIN="corelvector.com",i.GA={customDimensions:["EWOSU","token","template","preset"]},i.PURCHASE={URL_TO_PRODUCT:{purchase_flow:214093,purchase_flow_new:220444}},i.LEGACY_SHARE_DIALOG=!1,i.ENABLE_COLLABORATION=!0,i.FILE_REVIEW_ENABLED=!0,i.ENABLE_REQUEST_ACCESS=!0,i.ENABLE_GUEST_ACCESS=!0,i.IN_APP_PURCHASE.WINDOWS.production="ESDWINGRAVIT",i.IN_APP_PURCHASE.WINDOWS.beta="ESDWINGRAVIT",i.IN_APP_PURCHASE.WINDOWS.lts="ESDWINGRAVIT",i.IN_APP_PURCHASE.WINDOWS.rc="GravitDesignerSubscription-rc",i.IN_APP_PURCHASE.WINDOWS.trunk="GravitDesignerSubscription-trunk",i.IN_APP_PURCHASE.CLEVERBRIDGE.openCartInAPopup=!0,i.websocketURL="wss://ws.corelvector.com",i.trunkWebsocketURL="wss://ws-trunk.corelvector.com",i.rcWebsocketURL="wss://ws-staging.corelvector.com",i.betaWebsocketURL="wss://ws-preview.corelvector.com",i.cloudURL=window.location.href+"responses",i.cloudTrunkURL="https://cloud-trunk.corelvector.com",i.cloudBetaURL="https://cloud-preview.corelvector.com",i.cloudRCURL="https://cloud-staging.corelvector.com",i.trunkURL="https://app-trunk.corelvector.com",i.betaURL="https://app-preview.corelvector.com",i.ltsURL="https://app-lts.corelvector.com",i.rcURL="https://app-staging.corelvector.com",i.prodURL="https://app.corelvector.com",i.domain="corelvector.com",i.gApi=n(402),i.DateAPI=n(195).DateAPI,i.GLocaleFactory=n(195).GLocale,i.defaultUserSettings=n(236),i.i18n={trunk:"https://d2mocl49mz6ak6.cloudfront.net/trunk/locale",staging:"https://d2mocl49mz6ak6.cloudfront.net/staging/locale",preview:"https://d2mocl49mz6ak6.cloudfront.net/preview/locale",production:"https://d2mocl49mz6ak6.cloudfront.net/production/locale"},i.SharePermissions=n(337),i.ShareRoles=n(273),i.Share=n(558),i.Lock=n(561),i.FileExtended=n(557),i.FileTypes=n(804),i.MicrosoftB2BKeyType=n(805),i.PaymentProviders=n(559),i.PurchaseStatus=n(806),i.SubscriptionStatus=n(807),i.PasswordlessAuthenticationActions=n(562),i.PasswordRules=n(563),i.License=n(808),i.LicenseType=n(415),i.Runtime=n(564),i.User=n(809),i.CloudUtils=n(237),i.UTM=n(339),r.IS_WEB_WORKER||(i.GLoginDialog=n(254).GLoginDialog,i.GReminderDialogFactory=n(254).GReminderDialogFactory,i.GReminderDialog=n(254).GReminderDialog,i.GPaywallDialog=n(254).GPaywallDialog),i.PRESET_LIMIT=20,i.CATEGORIES=n(810),i.ELEMENTS=n(811),i.GooglePickerBuilder=n(812),i.HAS_ANNOTATIONS=!0,i.ANNOTATION_PERMANENT_LINK=!0,i.ANONYMOUS_SESSION_ENABLED=!0,i.USE_EXTENSION_IN_FILENAME=!1,i.ALWAYS_SHOW_ACCOUNT_SETTING_DIALOG=!1,i.Notification=n(813),i.NotificationConstants=n(567),i.FileStatus=n(568),i.FileReviewStatusAvailable=[i.FileStatus.IN_REVIEW,i.FileStatus.REOPENED,i.FileStatus.AWAITING_APPROVAL,i.FileStatus.APPROVED],i.GFileReviewFlow=n(814),i.GFileReviewActions=n(815);const s=n(565);i.NOTIFICATION_USER_MENTION_REGEX=s.NOTIFICATION.USER_MENTION,i.HTTP_STATUS_CODES=n(560),i.CloudIntegration={cloudOptions:[{name:"Google Drive",type:"googledrive",className:"google-drive",pro:!0,default:!1}],nativeOption:{type:"native",name:"Corel Vector",deletable:!1,pro:!1,id:a.Provider.CloudNative,default:!0}},i.PAGE_CLIP_DEFAULT=!0,i.msTeamsMode=!1,i.thirdPartyCookieWarningLink="https://support.corelvector.com/hc/en-us/articles/1500005394122",i.LINKS.BLENDING_MODES_DOCUMENTATION_URL="https://documentation.corelvector.com/colors-gradients-textures/blending-modes",i.AmplitudeHelper=n(566),i.AmplitudeData=n(416),e.exports=i},,,,,function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},,function(e,t,n){"use strict";var o=n(1);function i(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;this.label=o.GLocale.get(e),this.visible=t,this.icon=n,this.parent=null}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>null;var r=new i;return Object.defineProperties(r,{label:{get:()=>o.GLocale.get(new o.GLocaleKey(e[0],e[1]))},visible:{get:n},icon:{get:a},parent:{get:()=>t}}),r}o.GObject.inherit(i,o.GObject),i.prototype.label=null,i.prototype.visible=!0,i.prototype.icon=null,i.CATEGORY_FILE=a(["GCategory","category.file"]),i.CATEGORY_FILE_SHARE=a(["GCategory","category.file.share"],i.CATEGORY_FILE),i.CATEGORY_FILE_OPEN_RECENT=a(["GCategory","category.file.open-recent"],i.CATEGORY_FILE),i.CATEGORY_FILE_SAVE_AS=a(["GCategory","category.file.save-as"],i.CATEGORY_FILE),i.CATEGORY_FILE_GRAVIT_CLOUD=a(["GCategory","category.file.gravit-cloud"],i.CATEGORY_FILE),i.CATEGORY_FILE_IMPORT=a(["GCategory","category.file.import"],i.CATEGORY_FILE),i.CATEGORY_FILE_IMPORT_IMAGE=a(["GCategory","category.file.import.image"],i.CATEGORY_FILE_IMPORT),i.CATEGORY_FILE_EXPORT=a(["GCategory","category.file.export"],i.CATEGORY_FILE,()=>!0,()=>gDesigner.isTouchEnabled()?"gravit-icon-export":null),i.CATEGORY_FILE_EXPORT_PDF=a(["GCategory","category.file.export.pdf"],i.CATEGORY_FILE_EXPORT),i.CATEGORY_EDIT=a(["GCategory","category.edit"]),i.CATEGORY_EDIT_PASTE=a(["GCategory","category.edit.paste"],i.CATEGORY_EDIT,()=>!0,()=>gDesigner.isTouchEnabled()?"gravit-icon-paste":null),i.CATEGORY_EDIT_SELECT_SAME=a(["GCategory","category.edit.select-same"],i.CATEGORY_EDIT),i.CATEGORY_MODIFY=a(["GCategory","category.modify"]),i.CATEGORY_MODIFY_COMBINE=a(["GCategory","category.modify.combine"],i.CATEGORY_MODIFY),i.CATEGORY_MODIFY_ARRANGE=a(["GCategory","category.modify.arrange"],i.CATEGORY_MODIFY,()=>!0,()=>gDesigner.isTouchEnabled()?"gravit-icon-arrange":null),i.CATEGORY_MODIFY_ALIGN=a(["GCategory","category.modify.align"],i.CATEGORY_MODIFY,()=>!0,()=>gDesigner.isTouchEnabled()?"gravit-icon-align":null),i.CATEGORY_MODIFY_TRANSFORM=a(["GCategory","category.modify.transform"],i.CATEGORY_MODIFY,()=>!0,()=>gDesigner.isTouchEnabled()?"gravit-icon-transform":null),i.CATEGORY_MODIFY_PATH=a(["GCategory","category.modify.path"],i.CATEGORY_MODIFY),i.CATEGORY_MODIFY_SYMBOL=a(["GCategory","category.modify.symbol"],i.CATEGORY_MODIFY,()=>!0,()=>gDesigner.isTouchEnabled()?"gravit-icon-symbol":null),i.CATEGORY_VIEW=a(["GCategory","category.view"],null,()=>!0,()=>gDesigner.isTouchEnabled()?"gravit-icon-no-icon":null),i.CATEGORY_VIEW_CANVAS=a(["GCategory","category.view.canvas"],i.CATEGORY_VIEW),i.CATEGORY_VIEW_SNAP=a(["GCategory","category.view.snap"],i.CATEGORY_VIEW,()=>!0,()=>gDesigner.isTouchEnabled()?"gravit-icon-snap":null),i.CATEGORY_VIEW_MAGNIFICATION=a(["GCategory","category.view.magnification"],i.CATEGORY_VIEW,()=>!0,()=>gDesigner.isTouchEnabled()?"gravit-icon-zoom-in":null),i.CATEGORY_HELP=a(["GCategory","category.help"]),i.CATEGORY_HELP_SUPPORT=a(["GCategory","category.help.support"],i.CATEGORY_HELP),i.CATEGORY_HELP_BETA_FEEDBACK=a(["GCategory","category.help.beta_feedback"],i.CATEGORY_HELP),i.CATEGORY_HELP_LEARN=a(["GCategory","category.help.learn"],i.CATEGORY_HELP),i.CATEGORY_HELP_LANGUAGE=a(["GCategory","category.help.language"],i.CATEGORY_HELP),i.CATEGORY_HELP_SWITCHWEBCDR=a(["GCategory","category.help.switchwebcdr"],i.CATEGORY_HELP),i.CATEGORY_ACCOUNT=a(["GCategory","category.account"],null,()=>gDesigner.isTouchEnabled(),()=>{const e=gDesigner.getSyncUser();if(e){if(e.hasOwnPictureAvatar())return $("<div/>").addClass("avatar").css("background-image",'url("'.concat(e.avatar,'")'));const t=e.getUserColor();return $("<div/>").addClass("avatar").css("background-color",t).css("border-color",t).append($("<span/>").text(e.getUserNameInitials()))}return null}),e.exports=i},function(e,t,n){"use strict";var o=n(172),i=n(345),a=n(190),r=n(79),s=n(81).f,l=n(403),c=n(309),d=n(85),u=n(48),p=r.set,g=r.getterFor("Array Iterator");e.exports=l(Array,"Array",(function(e,t){p(this,{type:"Array Iterator",target:o(e),index:0,kind:t})}),(function(){var e=g(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=void 0,c(void 0,!0);switch(e.kind){case"keys":return c(n,!1);case"values":return c(t[n],!1)}return c([n,t[n]],!1)}),"values");var h=a.Arguments=a.Array;if(i("keys"),i("values"),i("entries"),!d&&u&&"values"!==h.name)try{s(h,"name",{value:"values"})}catch(e){}},function(e,t,n){"use strict";var o=n(30),i=n(293);o({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},,function(e,t,n){"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},,function(e,t,n){"use strict";var o=n(23),i=n(406),a=n(407),r=n(17),s=n(102),l=n(126),c=n(41)("iterator"),d=r.values,u=function(e,t){if(e){if(e[c]!==d)try{s(e,c,d)}catch(t){e[c]=d}if(l(e,t,!0),i[t])for(var n in r)if(e[n]!==r[n])try{s(e,n,r[n])}catch(t){e[n]=r[n]}}};for(var p in i)u(o[p]&&o[p].prototype,p);u(a,"DOMTokenList")},function(e,t,n){"use strict";(function(t){var n=function(e){return e&&e.Math===Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||n("object"==typeof this&&this)||function(){return this}()||Function("return this")()}).call(this,n(101))},,function(e,t,n){"use strict";var o=n(224),i=Function.prototype,a=i.call,r=o&&i.bind.bind(a,a);e.exports=o?r:function(e){return function(){return a.apply(e,arguments)}}},function(e,t,n){"use strict";var o=n(30),i=n(400);o({target:"Object",stat:!0,arity:2,forced:Object.assign!==i},{assign:i})},function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=n(13),r=o(n(823));function s(){}i.GObject.inherit(s,i.GObject),s.SHORTCUT_DELAY=500,s.getActionShortcutHint=function(e,t){return e?a.GKey.shortcutToString(e,t):null},s.prototype.getId=function(){throw new Error("Not Supported")},s.prototype.getTitle=function(){throw new Error("Not Supported")},s.prototype.getFullTitle=function(){return this.getTitle()},s.prototype.getInfo=function(){return null},s.prototype.getIcon=function(){return r.default[this.getId()]||null},s.prototype.getCategory=function(){return null},s.prototype.getGroup=function(){return null},s.prototype.getGroupIcon=function(){return null},s.prototype.getShortcut=function(){return null},s.prototype.getShortcutHint=function(e){return s.getActionShortcutHint(this.getShortcut(),e)},s.prototype.isShortcutGlobal=function(){return!1},s.prototype.isRegisterShortcut=function(){return null},s.prototype.getAdditionalShortcuts=function(){return null},s.prototype.isEnabled=function(){return!0},s.prototype.isKeyBoardEventRequiredToExecute=function(){return!1},s.prototype.isCheckable=function(){return!1},s.prototype.isChecked=function(){return!1},s.prototype.isAvailable=function(e){return!0},s.prototype.execute=function(){throw new Error("Not Supported")},s.prototype.executeFromShortcut=function(e){return this.execute.apply(this,arguments)},s.prototype.isPro=function(){return!1},s.prototype.getTooltipArea=function(){return null},s.prototype.getTooltipConfig=function(e){return null},s.prototype.isVisible=function(){return!0},s.prototype.noHover=function(){return!1},s.prototype.getStyleClass=function(){return null},s.prototype.statsValue=function(){return null},s.prototype.toString=function(){return"[Object GAction]"},e.exports=s},function(e,t,n){"use strict";var o=n(23),i=n(406),a=n(407),r=n(652),s=n(102),l=function(e){if(e&&e.forEach!==r)try{s(e,"forEach",r)}catch(t){e.forEach=r}};for(var c in i)i[c]&&l(o[c]&&o[c].prototype);l(a)},function(e,t,n){"use strict";var o=n(229),i=n(35),a=n(25),r=n(263),s=n(20),l=n(49),c=n(31),d=n(112),u=n(120),p=n(109),g=n(56),h=n(98),f=n(295),m=n(152),y=n(651),v=n(264),_=n(41)("replace"),b=Math.max,w=Math.min,C=a([].concat),x=a([].push),S=a("".indexOf),E=a("".slice),A="$0"==="a".replace(/./,"$0"),T=!!/./[_]&&""===/./[_]("a","$0");r("replace",(function(e,t,n){var a=T?"$":"$0";return[function(e,n){var o=h(this),a=d(e)?void 0:m(e,_);return a?i(a,e,o,n):i(t,g(o),e,n)},function(e,i){var r=l(this),s=g(e);if("string"==typeof i&&-1===S(i,a)&&-1===S(i,"$<")){var d=n(t,r,s,i);if(d.done)return d.value}var h=c(i);h||(i=g(i));var m,_=r.global;_&&(m=r.unicode,r.lastIndex=0);for(var A,T=[];null!==(A=v(r,s))&&(x(T,A),_);){""===g(A[0])&&(r.lastIndex=f(s,p(r.lastIndex),m))}for(var G,P="",D=0,L=0;L<T.length;L++){for(var I,k=g((A=T[L])[0]),O=b(w(u(A.index),s.length),0),F=[],R=1;R<A.length;R++)x(F,void 0===(G=A[R])?G:String(G));var M=A.groups;if(h){var N=C([k],F,O,s);void 0!==M&&x(N,M),I=g(o(i,void 0,N))}else I=y(k,s,O,F,M,i);O>=D&&(P+=E(s,D,O)+I,D=O+k.length)}return P+E(s,D)}]}),!!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!A||T)},function(e,t,n){"use strict";var o=n(23),i=n(208).f,a=n(102),r=n(72),s=n(284),l=n(327),c=n(261);e.exports=function(e,t){var n,d,u,p,g,h=e.target,f=e.global,m=e.stat;if(n=f?o:m?o[h]||s(h,{}):o[h]&&o[h].prototype)for(d in t){if(p=t[d],u=e.dontCallGetSet?(g=i(n,d))&&g.value:n[d],!c(f?d:h+(m?".":"#")+d,e.forced)&&void 0!==u){if(typeof p==typeof u)continue;l(p,u)}(e.sham||u&&u.sham)&&a(p,"sham",!0),r(n,d,p,e)}}},function(e,t,n){"use strict";var o="object"==typeof document&&document.all;e.exports=void 0===o&&void 0!==o?function(e){return"function"==typeof e||e===o}:function(e){return"function"==typeof e}},,,function(e,t,n){"use strict";n(84),n(821);var o=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t._cloneChildrenIntoReceiver=E,t._mergeChildren=x,t._mergePath=C,t._mergeProperties=b,t._mergeStyle=w,t._removeDeletedChildren=S,t._tryAndCatch=void 0,t._updateCommonChildren=A,t.areNodePropertiesDifferent=y,t.base64StringToString=function(e){let t;try{t=f(l.toByteArray(e))}catch(e){t=""}return t},t.base64URLSafeEncode=function(e){return(0,r.trim)((0,r.encode)(e))},t.blockChanges=function(e,t,n,o){n&&n.startBlockReferenceChanges();o&&o.beginUpdate();e&&e._beginSelectionUpdate();t&&t.forEach(e=>{e.beginUpdate()})},t.buildDialogDocumentHasUpdates=function(e,t,n,o){return c.custom({subtitle:i.GLocale.get(new i.GLocaleKey("GSaveAction","has-new-version-when-save-message")),className:"g-has-updates-warning-dialog",icon:"info",closeable:!1,buttons:[{label:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.cancel")),closeOnClick:!0,shortcut:c.Shortcut.Esc,position:"left",onclick:()=>{o&&o.call(this,e)}},{label:i.GLocale.get(new i.GLocaleKey("GSaveAction","has-new-version-when-save-reload")),closeOnClick:!0,onclick:()=>{gDesigner.getToolbar()._updateActions(),t.call(this,e)}},{label:i.GLocale.get(new i.GLocaleKey("GSaveAction","has-new-version-when-save-save")),className:"primary",closeOnClick:!0,shortcut:c.Shortcut.Enter,onclick:()=>{n.call(this,e)}}]})},t.chaining=void 0,t.debounce=function(e,t){let n;return function(){const o=arguments;let i=()=>{n=0,e.apply(this,o)};n&&clearTimeout(n),n=setTimeout(i,t)}},t.decodeFromUTF8=f,t.decodeHTML=function(e){return $("<textarea/>").html(e).text()},t.decrypt=function(e){try{var t=e.split(":"),n=t.shift(),o=s.enc.Hex.parse(n),i=t.join(":");return s.AES.decrypt(i,g,{iv:o,format:s.format.OpenSSL,mode:s.mode.CBC}).toString(s.enc.Utf8)}catch(e){return}},t.encodeToUTF8=m,t.encrypt=function(e){try{var t=s.lib.WordArray.random(32),n=s.AES.encrypt(e,g,{iv:t,format:s.format.OpenSSL,mode:s.mode.CBC});return t.toString(s.enc.Hex)+":"+n.toString()}catch(e){return}},t.fakeFunction=function(){},t.getAnnotationType=function(e){let t=e.toString().match(/\[G((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)Annotation\]/);return t&&t[1]||null},t.getExtensionFromString=function(e,t){var n=new RegExp("\\b"+t.join("|")+"\\b","gim"),o=e.match(n);return o?o[0]:null},t.getFileNameWithoutExtension=function(e,t){e.toLowerCase().endsWith(".".concat(t).toLowerCase())&&(e=e.substr(0,e.lastIndexOf(".")));return e},t.getFileSHA256Digest=async function(e){e instanceof Blob?e=await e.arrayBuffer():"string"==typeof e&&(e=m(e));return s.SHA256(function(e){for(var t=new Uint8Array(e),n=[],o=0;o<t.length;o+=4)n.push(t[o]<<24|t[o+1]<<16|t[o+2]<<8|t[o+3]);return s.lib.WordArray.create(n,t.length)}(e)).toString()},t.getFileStateAndRole=function(e,t){let n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=t.getPrivateShareList();i.forEach(t=>{const{id:i,copy:a,inspect:r,comment:s,owner:l,access:c,edit:p}=t;e.getUID()===i?(n=d.makeFromShare(t),l?Object.assign(o,{owner:!0,edit:!0,inspect:!0,copy:!0,comment:!!u,share:!0}):Object.assign(o,{owner:!1,share:!1,edit:p,copy:a,inspect:r,comment:!!u&&s,sharing:c})):c&&Object.assign(o,{sharing:!0})});const a=i.find(e=>e.owner);if(a){const t=e.getUID()===a.id;o.owner=t,o.share=t}const r=t.getPublicShare();r&&r.access&&(o.isPrivate=!1,o.sharing=!0);return Object.assign(o,{isPrivate:i&&i.filter(e=>!e.owner).length>0}),{state:o,role:n,publicShare:r}},t.getSizeInfo=function(e){var t=e;const n=1e6,o=1e3*n;var i={gb:0,mb:0,kb:0},a=Math.floor(t/o);a&&(i.gb=a,t-=a*o);var r=Math.floor(t/n);r&&(i.mb=r,t-=r*n);var s=Math.floor(t/1e3);s&&(i.kb=s,t-=1e3*s);return i},t.getVersionFromString=function(e,t,n){var o=e.match(t.join("|"));return o?o[0]:n},t.isDifferent=v,t.isFunction=function(e){if(void 0===e)return!1;var t=Object.prototype.toString.call(e);return["[object Function]","[object AsyncFunction]","[object GeneratorFunction]","[object Proxy]"].indexOf(t)>=0},t.isPassiveSupported=function(){if(void 0===T){T=!1;try{const e={get passive(){return T=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){T=!1}}return T},t.isSupportedScreenSize=function(e){if(!e&&i.GSystem.hardware===i.GSystem.Hardware.Tablet){return(window.screen.height>window.screen.width?window.screen.height:window.screen.width)>=p}return(e||window.screen.availWidth)>=p},t.isSymbol=h,t.isSymbolInstance=void 0,t.iterateAroundIndex=function(e,t,n){var o=0,i=0,a=e.length;for(;o<a;){var r=t+i;n(e[r],r),o++,i>0&&t-i>=0?i=-i:i>0?i++:t-i+1<a?i=1-i:i--}},t.iterateEqualStyleLayers=function(e,t,n,o){var a=[];if(n.length>1){for(var r=0;r<n.length;r++){var s=n[r],l=[];if("fill"===e)l=s.getPaintLayers().getFillLayers();else if("border"===e)l=s.getPaintLayers().getBorderLayers();else if("effect"===e)for(var c=s.getEffects().getFirstChild();null!==c;c=c.getNext())l.push(c);for(var d=0;d<l.length;d++){var u=l[d];("fill"===e&&i.GStylable.FillPaintLayer.equals(u,t)||"border"===e&&i.GStylable.BorderPaintLayer.equals(u,t)||"effect"===e&&i.GUtil.equals(u,t))&&a.push(u)}}a.forEach((function(e){o(e)}))}else o(t)},t.mergeNode=_,t.releaseChanges=function(e,t,n){t&&t.forEach(e=>{e.endUpdate()});e&&e._finishSelectionUpdate();for(var o=arguments.length,i=new Array(o>3?o-3:0),a=3;a<o;a++)i[a-3]=arguments[a];i&&i.forEach(e=>{e.endUpdate()});n&&n.endBlockReferenceChanges()},t.removeAllSuffixWhichLikeExtension=function(e,t){const n=".".concat(t).toLowerCase();for(;e.toLowerCase().endsWith(n);)e=e.substr(0,e.lastIndexOf("."));return e},t.resolveDocumentImages=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(async(o,a)=>{const r=e=>e===i.GImage.ImageStatus.Loaded||e===i.GImage.ImageStatus.Error;let s=0;if(e.accept(e=>{e instanceof i.GImage&&!r(e.getStatus())&&s++}),s>0){let l=setTimeout(()=>{(s>0||n.cancelled)&&(e.removeEventListener(i.GImage.StatusEvent,c),a())},t);const c=t=>{let{status:d}=t;r(d)&&--s<=0&&(l&&(clearTimeout(l),l=null),e.removeEventListener(i.GImage.StatusEvent,c),o(!0)),n.cancelled&&(l&&(clearTimeout(l),l=null),e.removeEventListener(i.GImage.StatusEvent,c),a())};e.addEventListener(i.GImage.StatusEvent,c)}else o(!0)})},t.saveBBoxes=function(e){var t=[];e.accept((function(e){if(e instanceof i.GElement){var n=e.getPaintBBox(!1,null,!0);t.push(n)}}));for(var n=new Float64Array(4*t.length),o=0;o<t.length;++o)for(var a=i.GRect.serialize(t[o]),r=0;r<4;++r)n[4*o+r]=a[r];s="Test_invisible-.dat",l=n,navigator.webkitTemporaryStorage.requestQuota(1e3,(function(e){var t=e;console.log("Requested bytes:",1e3,"Granted bytes:",t),window.webkitRequestFileSystem(window.TEMPORARY,t,(function(e){const t=e.root.toURL();window.webkitResolveLocalFileSystemURL(t,(function(e){e.getFile(s,{create:!0},(function(e){e.createWriter((function(e){e.onwriteend=function(){console.log("Write completed.")},e.onerror=function(e){console.log("Write failed: "+e.toString())},e.seek(0);var t=new Blob([l.buffer],{type:"application/octet-stream"});e.write(t)}),(function(e){console.log(e)}))}))}),(function(e){console.log(e)}))}),(function(e){console.log(e)}))}));var s,l},t.sleep=function(e){return new Promise(t=>setTimeout(t,e))},t.stringToBase64String=function(e){return l.fromByteArray(m(e))},t.throttle=function(e,t){let n;return function(){const o=arguments;n||(e.apply(this,o),n=!0,setTimeout(()=>n=!1,t))}},t.toCapitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.toMD5=function(e){return s.MD5(e).toString()},t.trimStart=function(e,t){if(!t||!t.length)return e;if(!e||!e.startsWith(t))return e;return e.substring(t.length)},t.watchDog=void 0,n(52),n(17),n(169),n(26),n(7),n(341),n(18),n(3),n(255),n(62),n(138),n(124),n(1018),n(204),n(177),n(178),n(179),n(180),n(28);var i=n(1),a=o(n(76)),r=n(1019);const s=n(1020);var l=n(234),c=n(37);const d=n(418),{HAS_ANNOTATIONS:u,MIN_SUPPORTED_SCREEN_SIZE:p}=n(9);t.watchDog={trap:(e,t,n,o)=>i=>((e,t,n,o,i)=>gDesigner.isEnabledProFeatures(i)||n&&n(e)?t?t(e):void 0:(o&&o(e),e.stopImmediatePropagation(),e.preventDefault(),gDesigner.handlePROFeatureInterruption(),!1))(i,e,t,n,o),check:(e,t)=>gDesigner.isEnabledProFeatures()?e:t};t._tryAndCatch=async e=>{try{await e()}catch(e){console.log(e)}};const g=s.enc.Latin1.parse(s.enc.Latin1.stringify(s.SHA256("#a09j!@10jas-109827s*%#1098XAapoc-9908#!123")));function h(e,t){const n=e=>e&&e instanceof i.GSymbol&&(!t||!e.isMaster());return!!n(e)||!!e.findParent(n)}function f(e){return new TextDecoder("utf-8").decode(e)}function m(e){return new TextEncoder("utf-8").encode(e)}t.isSymbolInstance=e=>h(e,!0);function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const o=e=>Object.keys(e).filter(e=>(e.startsWith("$")||e.startsWith("@"))&&!n.includes(e)).map(e=>e.slice(1)),a=o(e),r=o(t);return!i.GUtil.equals(a,r)||!e.arePropertiesEqual(t,a)}function v(e,t,n){if(n||(n=["$lmd","$storedUrl","$__ids"]),!(e instanceof t.constructor))return!0;if(e.hasMixin(i.GNode.Properties)!==t.hasMixin(i.GNode.Properties))return!0;if(e.hasMixin(i.GNode.Properties)&&y(e,t,n))return!0;if(e.hasMixin(i.GElement.Stylable)!==t.hasMixin(i.GElement.Stylable))return!0;if(e.hasMixin(i.GElement.Stylable)){const o=e.getEffects(),i=t.getEffects();if(Boolean(o)!==Boolean(i))return!0;if(o&&v(o,i,n))return!0;const a=e.getPaintLayers(),r=t.getPaintLayers();if(Boolean(a)!==Boolean(r))return!0;if(a&&v(a,r,n))return!0}if(e.hasMixin(i.GNode.Container)!==t.hasMixin(i.GNode.Container))return!0;if(e instanceof i.GPathBase!=t instanceof i.GPathBase)return!0;if(e instanceof i.GPathBase){var o=e.getAnchorPoints(),a=o.getChildren(),r=t.getAnchorPoints(),s=r.getChildren();if(a.length!==s.length)return!0;for(var l=0;l<a.length;l++){var c=o.getChildByIndex(l),d=r.getChildByIndex(l);if(c^d)return!0;if(y(c,d,n))return!0}}if(e.hasMixin(i.GNode.Container)){const o=e.getChildren(),i=t.getChildren();if(o.length!==i.length)return!0;for(let e=0;e<o.length;e++)if(v(o[e],i[e],n))return!0}return!1}function _(e,t){try{w(e,t),C(e,t),x(e,t),b(e,t)}catch(e){console.log(e,e&&e.stack)}}function b(e,t){const n=function(e){const t=[];return Object.keys(e).filter(e=>e.startsWith("$")&&!t.includes(e)).map(e=>e.slice(1))}(t);e.setProperties(n,t.getProperties(n))}function w(e,t){if(e.hasMixin(i.GElement.Stylable)){var n=e.getPaintLayers(),o=t.getPaintLayers(),r=n.getBorderLayers(),s=o.getBorderLayers(),l=n.getFillLayers(),c=o.getFillLayers();e.hasMixin(a.default)?(s.length&&r.length&&r[0].assignFrom(s[0]),c.length&&l.length&&l[0].assignFrom(c[0])):(r.forEach(e=>{var t=s.find(t=>t.getId()===e.getId());t&&e.assignFrom(t)}),l.forEach(e=>{var t=c.find(t=>t.getId()===e.getId());t&&e.assignFrom(t)}))}}function C(e,t){if(e instanceof i.GPathBase){var n=e.getAnchorPoints();n.beginUpdate(),n.clearChildren(),n.deserialize(t.getAnchorPoints().serialize()),n.endUpdate()}}function x(e,t){if(!e.hasMixin(i.GNode.Container))return;let n=e.getChildren(),o=t.getChildren();S(e,t),E(e,t),A(n,o)}function S(e,t){let n=e.getChildren(),o=t.getChildren();n.forEach(t=>{o.some(e=>e.getId()===t.getId())||e.removeChild(t)})}function E(e,t){for(var n=t.getLastChild();null!==n;n=n.getPrevious()){if(e.getChildren().some(e=>e.getId()===n.getId()))continue;let t=n.getNext(),o=t&&e.getChildren().find(e=>e.getId()===t.getId());e.insertChild(n.clone(),o)}}function A(e,t){e.forEach(e=>{let n=t.find(t=>t.getId()===e.getId());n&&v(e,n)&&_(e,n)})}let T;t.chaining=(e,t)=>()=>e()&&t()},function(e,t,n){"use strict";var o=n(224),i=Function.prototype.call;e.exports=o?i.bind(i):function(){return i.apply(i,arguments)}},,function(e,t,n){"use strict";n(17),n(26),n(51),n(7),n(18),n(29),n(28),n(22);var o=n(1),i=n(13);class a{static error(e){let{showTitle:t=!0,closeCallback:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.custom({title:t?o.GLocale.get(new o.GLocaleKey("GCommonNames","text.something-wrong")):"",subtitle:gApi.formatError(e),closeCallback:n})}static externalFileError(e){let t=e?o.GLocale.get(new o.GLocaleKey("GContainer","text.load-failed-from-recent")):o.GLocale.get(new o.GLocaleKey("GContainer","text.load-failed-from-link"));return a.custom({subtitle:t,icon:"error"})}static splashScreenError(e,t,n){var o=$("<div></div>").append($("<div></div>").addClass("message").html(e));const i=[];return n&&i.push($("<button></button>").text(t).on("click",e=>{n&&n(e),o.gDialog("close")})),o.gDialog({releaseOnClose:!0,className:"g-system-dialog g-splash-screen-error-dialog",buttons:i}),o.gDialog("open",!1),o}static async confirm(e,t,n,a,r,s,l,c){if(c){let e=()=>{try{return gContainer.getProperty(c)}catch(e){return!1}};if(await e())return}var d=$("<div></div>").append($("<div></div>").addClass("message").html(e));let u;const p=e=>{u&&document.removeEventListener("keydown",u,!0),d.gDialog("close"),t&&t(e)};(s||l)&&(u=e=>{s&&i.GKey.translateKey(e.keyCode)===i.GKey.Constant.ENTER?d.gDialog("isOpen")&&(e.preventDefault(),e.stopImmediatePropagation(),p(!0)):l&&i.GKey.translateKey(e.keyCode)===i.GKey.Constant.ESC&&d.gDialog("isOpen")&&(e.preventDefault(),e.stopImmediatePropagation(),p(!1))},document.addEventListener("keydown",u,!0));const g=e=>e&&"object"==typeof e?e.text:e,h=e=>!!e&&"object"==typeof e&&!!e.pro,f=!!(m=a)&&"object"==typeof m&&!!m.disabled;var m;d.gDialog({releaseOnClose:!0,className:"g-system-dialog g-confirm-dialog"+(c?" g-onetime-dialog":""),buttons:[$("<button></button>").text(g(n)||o.GLocale.get(new o.GLocaleKey("GLocale","cancel"))).gPro({pro:h(n)}).on("click",()=>{p(!1)}),$("<button></button>").addClass("primary").toggleClass("g-disabled",f).text(g(a)||o.GLocale.get(new o.GLocaleKey("GLocale","ok"))).gPro({pro:h(a)}).on("click",()=>{f||p(!0)})]}),c&&d.closest(".g-dialog").find(".g-dialog-footer").prepend($("<label></label>").append([$("<input>").attr("type","checkbox").on("change",(function(){this.checked?gContainer.setProperty(c,!0):gContainer.setProperty(c,!1)})),$("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.do-not-show-again")))])),null===r&&(r=!1),d.gDialog("open",r)}static prompt(e,t,n,i,a,r){var s=n&&"string"!=typeof n,l=s?n:$("<input/>").addClass("max-width").attr("type","text").val(n||"").on("keypress",e=>{13===e.keyCode||"Enter"===e.key?(c.gDialog("close"),t&&t(!!s||l.val())):27!==e.keyCode&&"Escape"!==e.key||(c.gDialog("close"),t&&t())}),c=$("<div></div>").append($("<div></div>").addClass("message").html(e)).append($("<div></div>").addClass("input").append(l));c.gDialog({releaseOnClose:!0,className:"g-system-dialog g-prompt-dialog "+r,buttons:[$("<button></button>").text(i||o.GLocale.get(new o.GLocaleKey("GLocale","cancel"))).on("click",()=>{c.gDialog("close"),t&&t()}),$("<button></button>").addClass("primary").text(a||o.GLocale.get(new o.GLocaleKey("GLocale","ok"))).on("click",()=>{t&&(t(!!s||l.val()),c.gDialog("close"))})]}),c.gDialog("open",!0),c.find("input:first-child").focus().select()}static alert(e,t){let{closeByEnter:n=!0,className:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r,s=$("<div></div>").append($("<div></div>").addClass("message").html(e));const l=()=>{n&&document.removeEventListener("keypress",r,!0),s.gDialog("close"),t&&t()};return r=e=>{i.GKey.translateKey(e.keyCode)===i.GKey.Constant.ENTER&&s.gDialog("isOpen")&&(e.preventDefault(),e.stopImmediatePropagation(),l())},s.gDialog({releaseOnClose:!0,className:"g-system-dialog g-alert-dialog"+(a?" "+a:""),buttons:[$("<button></button>").addClass("primary").text(o.GLocale.get(new o.GLocaleKey("GLocale","ok"))).on("click",()=>l())]}),s.gDialog("open",!1),n&&document.addEventListener("keypress",r,!0),s}static showOneTimeDialog(e,t){return gContainer.getProperty(t).then(n=>{if(!n){var i=$("<div></div>").append($("<div></div>").addClass("message").html(e));return i.gDialog({releaseOnClose:!0,className:"g-system-dialog g-onetime-dialog",buttons:[$("<button></button>").addClass("primary").text(o.GLocale.get(new o.GLocaleKey("GLocale","ok"))).on("click",()=>{i.gDialog("close")})]}),i.closest(".g-dialog").find(".g-dialog-footer").prepend($("<label></label>").append([$("<input>").attr("type","checkbox").on("change",(function(){this.checked?gContainer.setProperty(t,!0):gContainer.setProperty(t,!1)})),$("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.do-not-show-again")))])),i.gDialog("open",!1),i}})}static showCDRWarning(){return gDesigner.getSetting("disable_cdr_warning",!1)?Promise.resolve():this.info({className:"g-cdr-warning",setting:"disable_cdr_warning",title:o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.cdr-warning-title")),label:o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.cdr-warning-label")),message:o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.cdr-warning-message"))})}static showCDRUnsupportedObjectWarning(e){if(!this.isDialogOpen(".g-system-dialog.g-dialog-v1")&&!gDesigner.getSetting("disable_cdr_unsupported_effect",!1)){const t=e instanceof o.GStylable.Effect?o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.cdr-unsupported-object-warning-effect-name")).replace("%name",e.getNodeNameTranslated()):o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.cdr-unsupported-object-warning-generic-name"));return this.info({setting:"disable_cdr_unsupported_effect",title:o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.cdr-warning-title")),label:o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.cdr-unsupported-objects-warning-label")),message:o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.cdr-unsupported-object-warning-message")).replace("%name",t)})}return Promise.resolve()}static showCDRUnsupportedObjectsWarning(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return gDesigner.getSetting("disable_cdr_unsupported_effects",!1)?Promise.resolve(gDesigner.getSetting("default_cdr_unsupported_effects",1)):(gDesigner.stats("unsupported-dialog_open"),this.warning({setting:"disable_cdr_unsupported_effects",title:o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.cdr-unsupported-objects-warning-title")),label:o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.cdr-unsupported-objects-warning-label")),message:o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.cdr-unsupported-objects-warning-message")),options:{setting:"default_cdr_unsupported_effects",values:[o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.cdr-unsupported-objects-warning-option-0")),o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.cdr-unsupported-objects-warning-option-1")),o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.cdr-unsupported-objects-warning-option-2")),o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.cdr-unsupported-objects-warning-option-3"))],tooltips:[o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.cdr-unsupported-objects-warning-option-0-tooltip")),o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.cdr-unsupported-objects-warning-option-1-tooltip")),"",o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.cdr-unsupported-objects-warning-option-3-tooltip"))],onClick:()=>{gDesigner.stats("unsupported-dialog_click_option")}},details:{label:o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.cdr-unsupported-objects-warning-details-label")),onClick:()=>{gDesigner.stats("unsupported-dialog_click_details")},items:e},onCancel:()=>{gDesigner.stats("unsupported-dialog_click_cancel")},onSubmit:()=>{gDesigner.stats("unsupported-dialog_click_submit")}}).then(e=>(gDesigner.setSetting("default_cdr_unsupported_effects",e),e)))}static warning(e){return this._dialogV1(Object.assign({icon:"assets/icon/dialog/warning.svg",buttons:[$("<button/>").text(o.GLocale.get(new o.GLocaleKey("GLocale","cancel"))).attr("data-title",o.GLocale.get(new o.GLocaleKey("GFilesPanel","action.cancel-tooltip"))).on("click",t=>{e.onCancel&&e.onCancel.call(this),$(t.target).closest(".g-dialog-content").gDialog("close",!0)}),$("<button/>").addClass("primary").text(o.GLocale.get(new o.GLocaleKey("GLocale","ok"))).on("click",t=>{e.onSubmit&&e.onSubmit.call(this),$(t.target).closest(".g-dialog-content").gDialog("close")})]},e||{}))}static info(e){return this._dialogV1(Object.assign({icon:"assets/icon/dialog/info.svg",buttons:[$("<button/>").addClass("primary").text(o.GLocale.get(new o.GLocaleKey("GLocale","ok"))).on("click",e=>$(e.target).closest(".g-dialog-content").gDialog("close"))]},e||{}))}static isDialogOpen(e){return $(e).length>0}static _dialogV1(){let{title:e="",label:t="",message:n="",icon:i="assets/icon/dialog/info.svg",closeable:a=!0,buttons:r=[],details:s,options:l,setting:c,className:d=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const u={},p=new Promise((e,t)=>Object.assign(u,{resolve:e,reject:t})),g=$("<div></div>").gDialog({releaseOnClose:!0,className:"g-system-dialog g-dialog-v1 "+d,closeCallback:e=>{e?u.reject():(c&&gDesigner.setSetting(c,g.find('input[data-property="'.concat(c,'"]')).is(":checked")),l?u.resolve(parseInt(g.find('input[name="options"]:checked').val())||0):u.resolve())}}),h=$("<header></header>").append($("<span/>").addClass("title").text(e)).appendTo(g);return a&&h.append($("<div></div>").addClass("g-btn-close").append($("<span></span>").addClass("gravit-icon-close")).on("click",()=>g.gDialog("close",!0))),$("<main></main>").append($("<img/>").attr("src",i).css("display",i?"":"none")).append($("<div/>").addClass("container").append($("<div/>").addClass("content").append($("<span/>").addClass("label").text(t)).append($("<pre/>").addClass("message").text(n)).append(s?$("<div/>").addClass("details").append($("<label/>").append($("<span/>").text(s.label)).append($("<span/>").addClass("gravit-icon-down icon")).on("click",e=>{s.onClick&&s.onClick.call(this);const t=$(e.target).closest(".details");t.find(".panel").toggleClass("collapsed"),t.find(".icon").toggleClass("gravit-icon-down gravit-icon-up")})).append($("<div/>").addClass("panel collapsed").append($("<ul/>").append(s.items.map(e=>$("<li/>").append($("<span/>").text(e)))))):"").append(l?$("<div/>").addClass("options").append(l.values.map((e,t)=>{let n=$("<label/>").append($("<input/>").attr("type","radio").attr("name","options").attr("value",t).prop("checked",e=>e===(l.setting?gDesigner.getSetting(l.setting,0):0)).on("change",()=>{l.onClick&&l.onClick.call(this)})).append($("<span/>").text(e));return l.tooltips&&l.tooltips[t]&&n.append($("<span/>").addClass("tooltip").text("?").attr("data-title",l.tooltips[t])),n})):"")).append($("<footer/>").append(c?$("<label/>").append($("<input>").attr("type","checkbox").attr("data-property",c)).append($("<span/>").text(o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.do-not-show-again")))):"").append(r.length?$("<div/>").addClass("buttons").append(r):""))).appendTo(g),g.gDialog("open",a),p}static messageWithInfo(e){let{mainMessage:t,infoMessage:n}=e;const i=$("<div />").gDialog({releaseOnClose:!0,className:"g-system-dialog g-message-with-info-dialog",buttons:[$("<button/>").addClass("primary").text(o.GLocale.get(new o.GLocaleKey("GLocale","ok"))).on("click",()=>i.gDialog("close"))]}),a=$("<div />").addClass("content").appendTo(i);return t&&a.append($("<div />").addClass("main-message").html(t)),n&&a.append($("<div />").addClass("info-message").append($("<div />").addClass("info-message-icon").append($("<img/>").attr("src","assets/icon/dialog/info.svg"))).append($("<div />").addClass("info-message-content").html(n))),i.gDialog("open",!0)}static custom(e){let{title:t="",subtitle:n="",styles:i={},footer:a,icon:r,buttons:s=[],openCallback:l,closeCallback:c,closeable:d=!0,className:u="",dontShowAgainCb:p}=e;var g=[];const h=$("<div></div>").gDialog({releaseOnClose:!0,className:"g-system-dialog g-custom-dialog ".concat(u),closeCallback:e=>{g.length&&(g.forEach(e=>Mousetrap.unbind(e)),g=[]),c&&c(e)},openCallback:l});i.dialog&&h.css(i.dialog),d&&$("<div></div>").addClass("g-btn-close").append($("<span></span>").addClass("gravit-icon-close")).on("click",()=>h.gDialog("close")).appendTo(h),r&&$("<div></div>").addClass("icon").append($("<div></div>").addClass(r)).appendTo(h);let f=$("<div></div>").addClass("content").append($("<span></span>").addClass("title").html(t)).append($("<span></span>").addClass("subtitle").html(n)).appendTo(h);if(a&&f.append($("<span></span>").addClass("footer").html(a)),s&&s.length){var m=$("<div></div>").addClass("buttons");p&&m.prepend($("<label></label>").append([$("<input>").attr("type","checkbox").on("change",(function(){p(this.checked)})),$("<span></span>").addClass("dont-show-this-again-message").text(o.GLocale.get(new o.GLocaleKey("GSystemDialog","text.do-not-show-again")))])),m.append(s.map(e=>{let{label:t,onclick:n,highlighted:o,className:i,position:a,shortcut:r,closeOnClick:s=!1}=e;var l=!1,c=()=>{l||(l=!0,r&&(Mousetrap.unbind(r),g.splice(g.indexOf(r),1)),g.length&&(g.forEach(e=>Mousetrap.unbind(e)),g=[]),s&&h.gDialog("close"),n&&n(h))},d=$("<button></button>").append($("<span></span>").text(t)).addClass("g-pro-button "+(o?"highlighted":"")).on("click",()=>c());return r&&(Mousetrap.bind(r,c),g.push(r)),i&&(i=i instanceof Array?i:[i],i.forEach(e=>d.addClass(e))),a&&d.css("float",a),d})),i.buttons&&m.css(i.buttons),m.appendTo(f)}return h.gDialog("open",d),h}static advanced(e){let{title:t="",buttons:n=[],closeCallback:o,closeable:i=!0}=e;var a=[],r=$("<div></div>").append($("<div></div>").addClass("message").html(t));return r.gDialog({releaseOnClose:!0,className:"g-system-dialog g-advanced-dialog",closeCallback:e=>{a.length&&(a.forEach(e=>Mousetrap.unbind(e)),a=[]),o&&o(e)},buttons:n.map(e=>{let{label:t,onclick:n,highlighted:o,className:i,position:s,shortcut:l,closeOnClick:c=!1}=e;var d=!1,u=()=>{d||(d=!0,l&&(Mousetrap.unbind(l),a.splice(a.indexOf(l),1)),a.length&&(a.forEach(e=>Mousetrap.unbind(e)),a=[]),n(r),c&&r.gDialog("close",!1))},p=$("<button></button>").append($("<span></span>").text(t)).addClass(o?"primary":"").on("click",()=>u());return l&&(Mousetrap.bind(l,u),a.push(l)),i&&(i=i instanceof Array?i:[i],i.forEach(e=>p.addClass(e))),s&&p.css("float",s),p})}),r.gDialog("open",i),r}toString(){return"[Object GSystemDialog]"}}a.Shortcut={Esc:"esc",Enter:"enter"},e.exports=a},,,,function(e,t,n){"use strict";var o=n(23),i=n(282),a=n(58),r=n(241),s=n(281),l=n(382),c=o.Symbol,d=i("wks"),u=l?c.for||c:c&&c.withoutSetter||r;e.exports=function(e){return a(d,e)||(d[e]=s&&a(c,e)?c[e]:u("Symbol."+e)),d[e]}},,,,,,function(e,t,n){var o;e.exports=(o=o||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),o={},i=o.lib={},a=i.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=i.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,o=this.sigBytes,i=e.sigBytes;if(this.clamp(),o%4)for(var a=0;a<i;a++){var r=n[a>>>2]>>>24-a%4*8&255;t[o+a>>>2]|=r<<24-(o+a)%4*8}else for(a=0;a<i;a+=4)t[o+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,o=[],i=function(t){t=t;var n=987654321,o=4294967295;return function(){var i=((n=36969*(65535&n)+(n>>16)&o)<<16)+(t=18e3*(65535&t)+(t>>16)&o)&o;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}},a=0;a<t;a+=4){var s=i(4294967296*(n||e.random()));n=987654071*s(),o.push(4294967296*s()|0)}return new r.init(o,t)}}),s=o.enc={},l=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],i=0;i<n;i++){var a=t[i>>>2]>>>24-i%4*8&255;o.push((a>>>4).toString(16)),o.push((15&a).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o+=2)n[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new r.init(n,t/2)}},c=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],i=0;i<n;i++){var a=t[i>>>2]>>>24-i%4*8&255;o.push(String.fromCharCode(a))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new r.init(n,t)}},d=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},u=i.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,o=n.words,i=n.sigBytes,a=this.blockSize,s=i/(4*a),l=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,c=e.min(4*l,i);if(l){for(var d=0;d<l;d+=a)this._doProcessBlock(o,d);var u=o.splice(0,l);n.sigBytes-=c}return new r.init(u,c)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p=(i.Hasher=u.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}}),o.algo={});return o}(Math),o)},function(e,t,n){"use strict";var o=n(20);e.exports=!o((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){"use strict";var o=n(55),i=String,a=TypeError;e.exports=function(e){if(o(e))return e;throw new a(i(e)+" is not an object")}},,function(e,t,n){"use strict";var o=n(30),i=n(660);o({global:!0,forced:parseInt!==i},{parseInt:i})},function(e,t,n){"use strict";var o=n(30),i=n(387).includes,a=n(20),r=n(345);o({target:"Array",proto:!0,forced:a((function(){return!Array(1).includes()}))},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r("includes")},,,function(e,t,n){"use strict";var o=n(31);e.exports=function(e){return"object"==typeof e?null!==e:o(e)}},function(e,t,n){"use strict";var o=n(121),i=String;e.exports=function(e){if("Symbol"===o(e))throw new TypeError("Cannot convert a Symbol value to a string");return i(e)}},,function(e,t,n){"use strict";var o=n(25),i=n(86),a=o({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return a(i(e),t)}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TOOLTIP_AREA=t.GRichTooltipConfig=void 0,n(276),n(3);const o=t.GRichTooltipConfig=function(e){let{title:t,description:n,video:o,pic:i,isPro:a,middle:r,shortcut:s,videoTimeout:l,marginLeft:c,side:d,learnMore:u,upgradeToProStatsValue:p,forceShow:g,flipHorizontal:h}=e;if(!t)throw new Error("");this._title=t,this._description=n,this._video=o,this._pic=i,this._isPro=a,this._middle=r,this._marginLeft=c,this._shortcut=s,this._videoTimeout=l,this._side=d,this._learnMore=u,this._upgradeToProStatsValue=p,this._forceShow=g,this._flipHorizontal=h};o.from=function(e){return new o(e)},o.prototype._title=null,o.prototype._description=null,o.prototype._video=null,o.prototype._pic=null,o.prototype._isPro=null,o.prototype._middle=null,o.prototype._marginLeft=null,o.prototype._shortcut=null,o.prototype._videoTimeout=null,o.prototype._side=null,o.prototype._learnMore=null,o.prototype._upgradeToProStatsValue=null,o.prototype._forceShow=!1,o.prototype._flipHorizontal=!1,o.prototype.setConfig=function(e){let{title:t,description:n,video:o,pic:i,isPro:a,middle:r,shortcut:s,videoTimeout:l,marginLeft:c,side:d,learnMore:u,upgradeToProStatsValue:p}=e;if(void 0!==t&&(this._title=t),!this._title)throw new Error("");return void 0!==n&&(this._description=n),void 0!==o&&(this._video=o),void 0!==i&&(this._pic=i),void 0!==a&&(this._isPro=a),void 0!==r&&(this._middle=r),void 0!==s&&(this._shortcut=s),void 0!==l&&(this._videoTimeout=l),void 0!==c&&(this._marginLeft=c),void 0!==d&&(this._side=d),void 0!==u&&(this._learnMore=u),void 0!==p&&(this._upgradeToProStatsValue=p),this},o.prototype.getConfig=function(){return{title:this._title,description:this._description,video:this._video,pic:this._pic,isPro:this._isPro,middle:this._middle,marginLeft:this._marginLeft,shortcut:this._shortcut,videoTimeout:this._videoTimeout,side:this._side,learnMore:this._learnMore,upgradeToProStatsValue:this._upgradeToProStatsValue,forceShow:this._forceShow,flipHorizontal:this._flipHorizontal}},o.prototype.toString=function(){return"[Object GRichTooltipConfig]"};t.TOOLTIP_AREA={TOOLBAR:"TOOLBAR",SIDEBAR:"SIDEBAR",MAIN_MENU:{TRY_PRO_COMMON:"TRY_PRO_COMMON",TRY_EXP_PDF_ADVANCED_SETTING:"TRY_EXP_PDF_ADVANCED_SETTING"}};t.default=o},function(e,t,n){"use strict";var o=n(30),i=n(25),a=n(346),r=n(98),s=n(56),l=n(347),c=i("".indexOf);o({target:"String",proto:!0,forced:!l("includes")},{includes:function(e){return!!~c(s(r(this)),s(a(e)),arguments.length>1?arguments[1]:void 0)}})},,,,,,,,,function(e,t,n){"use strict";n(3);var o=n(1);function i(e,t,n){this.type=e,this.document=t,n&&(this.data=n)}o.GObject.inherit(i,o.GEvent),i.Type={Added:0,Removed:1,Opened:2,Deactivated:10,Activated:11,StorageItemUpdated:12,Saving:20,Modified:23,SynchronismUpdated:30,SynchronismUpdateFailed:31,OwnerUpdated:40,CloudSynchronismUpdated:50,UpdateAvailable:60,BeforeReload:70,AutoSaveSynchronizing:80,AutoSaveSynchronized:81,AutoSaveSynchronizationFailed:82,ContextMenuOpened:90},i.prototype.type=null,i.prototype.document=null,i.prototype.toString=function(){return"[Object GDocumentEvent]"},e.exports=i},function(e,t,n){"use strict";var o=n(31),i=n(81),a=n(385),r=n(284);e.exports=function(e,t,n,s){s||(s={});var l=s.enumerable,c=void 0!==s.name?s.name:t;if(o(n)&&a(n,c,s),s.global)l?e[t]=n:r(t,n);else{try{s.unsafe?e[t]&&(l=!0):delete e[t]}catch(e){}l?e[t]=n:i.f(e,t,{value:n,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},,,,,function(e,t,n){"use strict";var o=n(14);n(52),n(17),n(158),n(89),n(7),n(3),n(62),n(22),n(117),n(106);var i=n(1),a=n(1013),r=n(9),s=o(n(713)),l=(o(n(340)),o(n(1014))),c=n(238),d=n(572),u=n(16),p=n(822),g=n(240),h=n(205),f=n(37),m=n(71);function y(){}i.GObject.inherit(y,i.GEventTarget),y.OpenFileRequest=function(e,t){this._type=e,this._content=t},y.OpenFileRequest.prototype.getType=function(){return this._type},y.OpenFileRequest.prototype.getContent=function(){return this._content},y.OpenFileRequest.Type={Document:"document",Token:"token",DocumentOrToken:"documentOrToken",StoreContent:"storeContent",ExternalAsset:"externalAsset",Template:"template",Preset:"preset",MSTeamsDeepLink:"msteamsdeeplink"},y.DeepLinking={ProCoupon:"procoupon",PurchaseFlow:"purchase_flow",PurchaseFlowNew:"purchase_flow_new",Purchase:"purchase",ResetPassword:r.PasswordlessAuthenticationActions.ResetPassword,SetPassword:r.PasswordlessAuthenticationActions.SetPassword,PasswordlessToken:r.PasswordlessAuthenticationActions.PasswordlessToken,ConfirmEmail:"confirm_email",Account:"account",Purchases:"purchases",EnterpriseLogIn:"enterprise",DirectLink:"directlink",ResetTrial:"reset_trial",PWADialog:"pwainstall",FocusAnnot:"annot",CreateShare:"create_share",ActivateTrial:"activate_trial"},y.Runtime={Browser:"browser",Chrome:"chrome",WebWorker:"webworker",Phonegap:"phonegap",Electron:"electron",PWA:"pwa",IPad:"ipad"},y.GravitLanguages=[...i.GLocale.getAvailableLanguages()],y.prototype._recentDocuments=null,y.prototype._deepLinking=null,y.prototype.getRuntime=function(){throw new Error("Not implemented.")},y.prototype.getStorage=function(){throw new Error("Not implemented.")},y.prototype.getRootPath=function(){return""},y.prototype.registerFontProviders=function(){c.registerProvider(d)},y.prototype.getSystemFontsProvider=function(){return null},y.prototype.supportsLocalFonts=function(){return!1},y.prototype.getProperty=function(e){return new Promise(t=>{var n=window.localStorage.getItem(e)||null;t(n?JSON.parse(n):null)})},y.prototype.setProperty=function(e,t){window.localStorage.setItem(e,JSON.stringify(t))},y.prototype.removeProperty=function(e){window.localStorage.removeItem(e)},y.prototype.getPropertyKeyByIndex=function(e){return window.localStorage.key(e)},y.prototype.getStorageLength=function(){return window.localStorage.length},y.prototype.setCookie=function(e){let{name:t,value:n}=e;return navigator.cookieEnabled?(document.cookie="".concat(t,"=").concat(n,"; path=/"),document.cookie="".concat(t,"=").concat(n,"; path=/; domain=").concat(r.DOMAIN),Promise.resolve()):Promise.reject()},y.prototype.handleDeepLinking=function(e){const t=new URL(e||window.location.href).searchParams,n=Object.keys(y.DeepLinking).find(e=>t.has(y.DeepLinking[e]));if(n){const e={link:y.DeepLinking[n],options:Array.from(t.entries()).reduce((e,t)=>(e[t[0]]=t[1],e),{})};return this._deepLinking=e,this._deepLinking}return null},y.prototype.shouldBypassEmailVerification=function(){return this._deepLinking&&this._deepLinking.link===y.DeepLinking.DirectLink},y.prototype.init=function(e){return window.gDesigner&&gDesigner.addEventListener(m,this._documentEvent,this),e(this)},y.prototype._documentEvent=function(e){e.type!==m.Type.Activated&&e.type!==m.Type.StorageItemUpdated||this._updateClientAPI(e.document)},y.prototype._updateClientAPI=function(e){const t=e&&e.getToken();if(t){const n=gDesigner.getActiveDocument();(!n||e===n)&&r.gApi.setToken({token:t})}},y.prototype.start=function(){},y.prototype.preLogin=async function(){},y.prototype.signWithMagicLink=function(e,t,n){return r.gApi.magicLink.authenticate(e,t,n)},y.prototype.canUnload=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var o=!e&&!t;return n?Promise.resolve(o):o},y.prototype.openExternalLink=function(){},y.prototype.copyToClipboard=function(){return Promise.resolve()},y.prototype.initLanguage=function(e,t){const n=()=>this.getProperty("designer.settings").then(async e=>{if(e&&e.hasOwnProperty("language")){const t=e.language;if(y.GravitLanguages.indexOf(t)>=0)await l.default.setLanguage(t);else{let e=i.GSystem.language&&i.GLocale.lookupLanguage(i.GSystem.language);e&&y.GravitLanguages.includes(e)?await l.default.setLanguage(e):await l.default.setLanguage(i.GLocaleLanguage.English)}}});if(t)return new Promise(async i=>{try{await o(t),e&&e(),i()}catch(t){await n(),e&&e(),i()}});async function o(e){const t=i.GLocale.lookupLanguage(e);null!==t&&(y.GravitLanguages.indexOf(t)>=0?("undefined"!=typeof gDesigner&&gDesigner.setSetting("language",t),await l.default.setLanguage(t)):await l.default.setLanguage(i.GLocaleLanguage.English))}r.gApi.getUser().then(async t=>{t&&!t.anonymous?await o(t.locale):await n(),e&&e()}).catch(async()=>{await n(),e&&e()})},y.prototype.newDocumentActionPerformed=function(e){e&&e()},y.prototype.getRecentDocuments=function(){return this._recentDocuments||[]},y.prototype.isRecentDocument=function(e){return!!(e&&this._recentDocuments&&this._recentDocuments.length)&&!!this._recentDocuments.find(t=>t._id===e._id)},y.prototype.updateRecentDocumentsAction=function(e){var t;this._recentDocuments=e;const n=gDesigner.getMainMenu();if(n){const e=t=n.findItem(i.GLocale.get(u.CATEGORY_FILE.label));if(e&&e.getMenu()){const n=e.getMenu().findItem(i.GLocale.get(u.CATEGORY_FILE_OPEN_RECENT.label).split("/")[1]);n&&(t=n.getMenu())}}if(t)if(t.clearItems(),e.length>0)for(var o=e[0]instanceof this._storage.constructor.Item,a=0;a<e.length;++a){let n=e[a];n instanceof this._storage.constructor.Item||!o||(gDesigner.addMenuSeparator(t),o=!1);const i=this.getRecentDocumentIconClass(n),r=n.getName()+"."+n.getExtension().toLowerCase();gDesigner.addMenuItem(t,r,i,null,null,(function(){try{gDesigner.openDocument(n)}catch(e){if(!(e instanceof s.default))throw e;f.externalFileError(!0)}}))}else{var r=gDesigner.addMenuItem(t);gDesigner.updateMenuItem(r,i.GLocale.get(p.TITLE),!1,!1)}},y.prototype.getRecentDocumentIconClass=function(e){return e instanceof this._storage.constructor.Item?null:"[Object GGoogleDriveStorage.Item]"===e.toString()?"gravit-icon-googledrive-logo":"[Object GSharePointStorage.Item]"===e.toString()?"gravit-icon-sharepoint-logo":"[Object GOneDriveBusinessStorage.Item]"===e.toString()?"gravit-icon-onedrivebusiness-logo":g["gravit-icon-cloud-logo"]},y.prototype.triggerClose=function(){},y.prototype.getGoogleAPI=function(){return a.GDefaultGoogleAPI},y.prototype.signWithOAuth=function(e){return new Promise((t,n)=>{r.gApi.popup("/auth/"+e).then(e=>{e?t(e):n()}).catch(e=>{let t;"string"==typeof e&&(t=e),!t&&e&&e.message&&(t=e.message),!t&&e&&e.errors&&(t=e.errors.toString()),!t&&e&&(t=e),n(t)})})},y.prototype.isMemoryInfoAvailable=function(){return!1},y.prototype.getMemoryInfo=function(){return null},y.prototype._getJsHeapLimitSize=function(){return window.performance.memory?window.performance.memory.jsHeapSizeLimit:r.JS_HEAP_SIZE_LIMIT_POYFILL},y.prototype._estimatingMemoryUsage=function(){return gDesigner.getDocuments().reduce((e,t)=>e+(t&&t.getStorageItem())?t.getStorageItem().documentRealFileSize:0,0)*r.FILE_SIZE_TO_RAM_COEFFCIENT+r.MIN_JS_HEAP_SIZE},y.prototype.verifyEnoughMemoryToSave=function(e){try{if(e&&e.getStorageItem()){var t=this._estimatingMemoryUsage(),n=this._getJsHeapLimitSize()-(t+=e.getStorageItem().documentRealFileSize*r.FILE_SIZE_TO_SAVING_RAM_COEFFCIENT);if(2*e.getStorageItem().documentRealFileSize>n){var o=i.GLocale.get(new i.GLocaleKey("GContainer","text.not-memary-enough"));new h(o).open()}}}catch(e){console.error(e)}},y.prototype.minimizeWindow=function(){},y.prototype.maximizeWindow=function(){},y.prototype.closeWindow=function(){},y.prototype.getStorageDestinations=function(){return[]},y.prototype.getDefaultStorageDestination=function(e){const t=this.getStorageDestinations();return t?t.find(t=>t.isSupported(e)):null},y.prototype.getSharepointAuthenticator=function(){return null},y.prototype.toString=function(){return"[Object GContainer]"},y.prototype.nativeShareLink=function(e,t,n){return this._getNativeShareLinkInstance().share(e,t,n)},y.prototype.isNativeShareLinkSupported=function(){return!!this._getNativeShareLinkInstance()&&this._getNativeShareLinkInstance().isSupported()},y.prototype._getNativeShareLinkInstance=function(){return null},e.exports=y},function(e,t,n){"use strict";e.exports={Init:0,Ready:1,Loading:10,LoadFailed:11,Loaded:12,LoadCancelled:13,Saving:20,SaveFailed:21,Saved:22,Syncing:30,SyncFailed:31,SaveCancelled:32,Downloading:40,DownloadFailed:41,Downloaded:42,DownloadCancelled:43,Locked:50,Unlocked:51}},function(e,t,n){"use strict";var o,i,a,r=n(437),s=n(23),l=n(55),c=n(102),d=n(58),u=n(283),p=n(286),g=n(242),h=s.TypeError,f=s.WeakMap;if(r||u.state){var m=u.state||(u.state=new f);m.get=m.get,m.has=m.has,m.set=m.set,o=function(e,t){if(m.has(e))throw new h("Object already initialized");return t.facade=e,m.set(e,t),t},i=function(e){return m.get(e)||{}},a=function(e){return m.has(e)}}else{var y=p("state");g[y]=!0,o=function(e,t){if(d(e,y))throw new h("Object already initialized");return t.facade=e,c(e,y,t),t},i=function(e){return d(e,y)?e[y]:{}},a=function(e){return d(e,y)}}e.exports={set:o,get:i,has:a,enforce:function(e){return a(e)?i(e):o(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=i(t)).type!==e)throw new h("Incompatible receiver, "+e+" required");return n}}}},,function(e,t,n){"use strict";var o=n(48),i=n(383),a=n(384),r=n(49),s=n(280),l=TypeError,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor;t.f=o?a?function(e,t,n){if(r(e),t=s(t),r(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable){var o=d(e,t);o&&o.writable&&(e[t]=n.value,n={configurable:"configurable"in n?n.configurable:o.configurable,enumerable:"enumerable"in n?n.enumerable:o.enumerable,writable:!1})}return c(e,t,n)}:c:function(e,t,n){if(r(e),t=s(t),r(n),i)try{return c(e,t,n)}catch(e){}if("get"in n||"set"in n)throw new l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},,,function(e,t,n){"use strict";var o=n(30),i=n(246).trim;o({target:"String",proto:!0,forced:n(445)("trim")},{trim:function(){return i(this)}})},function(e,t,n){"use strict";e.exports=!1},function(e,t,n){"use strict";var o=n(98),i=Object;e.exports=function(e){return i(o(e))}},function(e,t,n){"use strict";var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var o in n)i(n,o)&&(e[o]=n[o])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,n,o,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+o),i);else for(var a=0;a<o;a++)e[i+a]=t[n+a]},flattenChunks:function(e){var t,n,o,i,a,r;for(o=0,t=0,n=e.length;t<n;t++)o+=e[t].length;for(r=new Uint8Array(o),i=0,t=0,n=e.length;t<n;t++)a=e[t],r.set(a,i),i+=a.length;return r}},r={arraySet:function(e,t,n,o,i){for(var a=0;a<o;a++)e[i+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,r))},t.setTyped(o)},,function(e,t,n){"use strict";var o=n(30),i=n(113),a=n(229),r=n(35),s=n(25),l=n(20),c=n(31),d=n(226),u=n(145),p=n(650),g=n(281),h=String,f=i("JSON","stringify"),m=s(/./.exec),y=s("".charAt),v=s("".charCodeAt),_=s("".replace),b=s(1..toString),w=/[\uD800-\uDFFF]/g,C=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,S=!g||l((function(){var e=i("Symbol")("stringify detection");return"[null]"!==f([e])||"{}"!==f({a:e})||"{}"!==f(Object(e))})),E=l((function(){return'"\\udf06\\ud834"'!==f("\udf06\ud834")||'"\\udead"'!==f("\udead")})),A=function(e,t){var n=u(arguments),o=p(t);if(c(o)||void 0!==e&&!d(e))return n[1]=function(e,t){if(c(o)&&(t=r(o,this,h(e),t)),!d(t))return t},a(f,null,n)},T=function(e,t,n){var o=y(n,t-1),i=y(n,t+1);return m(C,e)&&!m(x,i)||m(x,e)&&!m(C,o)?"\\u"+b(v(e,0),16):e};f&&o({target:"JSON",stat:!0,arity:3,forced:S||E},{stringify:function(e,t,n){var o=u(arguments),i=a(S?A:f,null,o);return E&&"string"==typeof i?_(i,w,T):i}})},function(e,t,n){var o,i,a,r,s,l,c,d,u,p,g,h,f,m,y,v,_,b,w;e.exports=(o=n(47),n(219),void(o.lib.Cipher||(i=o,a=i.lib,r=a.Base,s=a.WordArray,l=a.BufferedBlockAlgorithm,c=i.enc,c.Utf8,d=c.Base64,u=i.algo.EvpKDF,p=a.Cipher=l.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?w:_}return function(t){return{encrypt:function(n,o,i){return e(o).encrypt(t,n,o,i)},decrypt:function(n,o,i){return e(o).decrypt(t,n,o,i)}}}}()}),a.StreamCipher=p.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),g=i.mode={},h=a.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=g.CBC=function(){var e=h.extend();function t(e,t,n){var o=this._iv;if(o){var i=o;this._iv=void 0}else i=this._prevBlock;for(var a=0;a<n;a++)e[t+a]^=i[a]}return e.Encryptor=e.extend({processBlock:function(e,n){var o=this._cipher,i=o.blockSize;t.call(this,e,n,i),o.encryptBlock(e,n),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var o=this._cipher,i=o.blockSize,a=e.slice(n,n+i);o.decryptBlock(e,n),t.call(this,e,n,i),this._prevBlock=a}}),e}(),m=(i.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,o=n-e.sigBytes%n,i=o<<24|o<<16|o<<8|o,a=[],r=0;r<o;r+=4)a.push(i);var l=s.create(a,o);e.concat(l)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},a.BlockCipher=p.extend({cfg:p.cfg.extend({mode:f,padding:m}),reset:function(){p.reset.call(this);var e=this.cfg,t=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var o=n.createEncryptor;else o=n.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==o?this._mode.init(this,t&&t.words):(this._mode=o.call(n,this,t&&t.words),this._mode.__creator=o)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),y=a.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),v=(i.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;if(n)var o=s.create([1398893684,1701076831]).concat(n).concat(t);else o=t;return o.toString(d)},parse:function(e){var t=d.parse(e),n=t.words;if(1398893684==n[0]&&1701076831==n[1]){var o=s.create(n.slice(2,4));n.splice(0,4),t.sigBytes-=16}return y.create({ciphertext:t,salt:o})}},_=a.SerializableCipher=r.extend({cfg:r.extend({format:v}),encrypt:function(e,t,n,o){o=this.cfg.extend(o);var i=e.createEncryptor(n,o),a=i.finalize(t),r=i.cfg;return y.create({ciphertext:a,key:n,iv:r.iv,algorithm:e,mode:r.mode,padding:r.padding,blockSize:e.blockSize,formatter:o.format})},decrypt:function(e,t,n,o){return o=this.cfg.extend(o),t=this._parse(t,o.format),e.createDecryptor(n,o).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),b=(i.kdf={}).OpenSSL={execute:function(e,t,n,o){o||(o=s.random(8));var i=u.create({keySize:t+n}).compute(e,o),a=s.create(i.words.slice(t),4*n);return i.sigBytes=4*t,y.create({key:i,iv:a,salt:o})}},w=a.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:b}),encrypt:function(e,t,n,o){var i=(o=this.cfg.extend(o)).kdf.execute(n,e.keySize,e.ivSize);o.iv=i.iv;var a=_.encrypt.call(this,e,t,i.key,o);return a.mixIn(i),a},decrypt:function(e,t,n,o){o=this.cfg.extend(o),t=this._parse(t,o.format);var i=o.kdf.execute(n,e.keySize,e.ivSize,t.salt);return o.iv=i.iv,_.decrypt.call(this,e,t,i.key,o)}}))))},,function(e,t,n){"use strict";var o=n(31),i=n(173),a=TypeError;e.exports=function(e){if(o(e))return e;throw new a(i(e)+" is not a function")}},function(e,t,n){"use strict";var o=n(109);e.exports=function(e){return o(e.length)}},,,,function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=o(n(27)),r=o(n(550)),s=o(n(9));function l(){}i.GObject.inherit(l,a.default),l.prototype.isEnabled=function(){return!s.default||gDesigner.getRightSidebars().getActiveSidebar()!==r.default.ID},l.prototype.toString=function(){return"[Object GElementAction]"},e.exports=l},function(e,t,n){"use strict";var o=n(112),i=TypeError;e.exports=function(e){if(o(e))throw new i("Can't call method on "+e);return e}},function(e,t,n){"use strict";n(18);var o,i,a=n(30),r=n(35),s=n(31),l=n(49),c=n(56),d=(o=!1,(i=/[ac]/).exec=function(){return o=!0,/./.exec.apply(this,arguments)},!0===i.test("abc")&&o),u=/./.test;a({target:"RegExp",proto:!0,forced:!d},{test:function(e){var t=l(this),n=c(e),o=t.exec;if(!s(o))return r(u,t,n);var i=r(o,t,n);return null!==i&&(l(i),!0)}})},,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var o=n(48),i=n(81),a=n(163);e.exports=o?function(e,t,n){return i.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},,,,function(e,t,n){"use strict";n(409)},,function(e,t,n){"use strict";var o=n(25),i=o({}.toString),a=o("".slice);e.exports=function(e){return a(i(e),8,-1)}},function(e,t,n){"use strict";var o=n(120),i=Math.min;e.exports=function(e){var t=o(e);return t>0?i(t,9007199254740991):0}},,function(e,t,n){"use strict";n(17),n(169),n(7),n(18),n(99),n(29),n(124),n(204),n(177),n(178),n(179),n(180),n(22),n(117),n(106);var o=n(9),i=n(1),a=n(13),r=n(34),s=n(824);const l=n(1069);var c=n(71),d=n(37);const u=n(1070);var p=n(77),g=n(205),h=n(343);const f=n(78),m=(n(143),n(239)),y=n(323),v=n(420),_=n(155);var b=o.FILE_FORMATS.find(e=>e.default),w=o.FILE_FORMATS.filter(e=>e.secondary),C=o.FOLDER_FORMAT;const x=n(538),S=10,E=80,A=90,T=100;class G{static convertToCloudItem(e){const t=e=>l.createFrom(e);return e instanceof Array?e.map(t):t(e)}static _getAuthorizationToken(){return null}static syncCloudImages(e,t,n,a){return new Promise((l,c)=>{try{var d=e.getScene(),u=d.getDictionary().getEntries(),p=[];d.acceptChildren(e=>{e instanceof i.GImage&&p.push({name:e.getProperty("name"),url:e.getProperty("url")})});const h=G._getAuthorizationToken();var g=o.gApi.url;(0,s.syncImagesToCloud)(e=>(0,s.listFilesFn)(e,h,g),i.GLocale.get(new i.GLocaleKey("GCommonNames","text.untitled-image")),p,u,async(e,t)=>(0,s.createFileAndGetSignedPutUrlsFn)(e,t,g,h),async(e,t,n)=>(0,s.updateFileFn)(e,t,n,g,h,o.COMPUTE_SHA256_FOR_FILES,r.getFileSHA256Digest),e=>{try{var t=d.getDictionary().merge(e);try{var o=i.GNode.serialize(d,i.GUtil.extend({save:!0},n))}finally{d.getDictionary().merge(t)}l([o])}catch(e){c(e)}},t,a)}catch(e){c(e)}})}static resolveImage(e,t){function n(e,t){let n=e.url,o=e.scene;if(o&&o.isReleased())return!1;let r=o&&o.getDictionary()&&o.getDictionary().getEntry(n);return!r||!/^data:.{0,255};base64,/i.exec(r.value)||(r.value.length>a.GPlatform.maxImgDataUrlLength&&new g(i.GLocale.get(new i.GLocaleKey("GDocument","text.image-in-design-too-big"))).open(),e.resolved(r.value),!1)}!async function(){let r=e.url,s=e.scene&&e.scene.getDictionary()&&e.scene.getDictionary().getEntry(r);if(n(e))if("string"==typeof r&&r.startsWith("123rf://")){var l=r.slice(8),c="ec23d185aa5ffb6495e02635803bb081";(function(e){var t="https://www.123rfapis.com/?method=download&id="+e;t+="&dl_type=png";const n=Math.floor(Date.now()/1e3);t+="&current_time="+n;var o=function(e,t,n){return v(c+"759561ac90761219f6415da66f18a154"+e+t+n)}(e,"png",n);return t+="&sign="+o,t+="&api_key="+c,new Promise((e,n)=>{var o=new XMLHttpRequest;o.open("GET",t),o.onload=function(){if(this.status>=200&&this.status<300){var t=JSON.parse(this.response);e(t.download_url)}else n()},o.send()})})(l).then(n=>{if(n){var o=new XMLHttpRequest;o.open("GET",n),o.responseType="arraybuffer",o.onload=function(){if(this.status<200||this.status>=400)alert("There was a problem downloading requested image");else{var n=new Blob([this.response],{type:"image"});if(n.size>a.GPlatform.maxPngDataSize)new g(i.GLocale.get(new i.GLocaleKey("GDocument","text.image-in-design-too-big"))).open();else{var o=new FileReader;o.onload=function(){if(this.result.length>a.GPlatform.maxImgDataUrlLength)return void new g(i.GLocale.get(new i.GLocaleKey("GDocument","text.image-in-design-too-big"))).open();let n=e.scene&&e.scene.getDictionary()&&e.scene.getDictionary().getEntry(e.url);n&&t&&(n.cloud=n.value,n.value=this.result),e.resolved(this.result)},o.onerror=function(){new g(i.GLocale.get(new i.GLocaleKey("GDocument","text.image-in-design-too-big"))).open()},o.readAsDataURL(n)}}},o.send()}else alert("There was a problem downloading the image selected")},()=>{alert("There was a problem downloading requested image")})}else if(/^(dictionary|gravit|document|asset|magenta)/.test(r)&&(r.startsWith(i.GDictionary.PROTOCOL)&&(r=e.scene&&e.scene.getDictionary()?e.scene.getDictionary().getValue(e.url):null,"string"==typeof r&&r.startsWith(i.GDictionary.CLOUD_PROTOCOL)&&(s=e.scene&&e.scene.getDictionary()&&e.scene.getDictionary().getEntry(e.url))),"string"==typeof r)){const n=await gDesigner.getUser(),i=r.startsWith("magenta"),a=e.scene&&t.getScene()!==e.scene?t.getTempCloudStorageItem():t.getStorageItem();var d=a&&a.getId();if(!n.isAnonymous()&&!d&&t){d=(await o.gApi.createFile({trashed:null})).id,t.setReservedId(d)}const l=r.slice(r.indexOf("://")+3),c=new URLSearchParams(l);let p,g,h=l;if(c.has("id"))h=c.get("id"),p=c.get("width"),g=c.get("height");else if(c.has("url")){const e=new URL(c.get("url")).pathname.slice(1).split("/");h="public"==e[0]?e[2]:e[1]}else h=r.slice(r.indexOf("://")+3);return gDesigner.isAnonymous()&&i?o.gApi.getFile(h).then(n=>{u(n.url,p,g,n=>{s&&t&&(s.cloud=s.value,s.value=n),e.resolved(n)},!0)}):o.gApi.resolveUrls(d,h).then(n=>{u(n[0][1],p,g,n=>{s&&t&&(s.cloud=s.value,s.value=n),e.resolved(n)},i)})}function u(t,o,r,s,l){if(!n(e))return;const c=new Image;c.crossOrigin="Anonymous";o&&(c.width=o),r&&(c.height=r),c.onload=function(){if(!n(e))return void(c.onload=null);const t=document.createElement("CANVAS"),d=t.getContext("2d");l&&([c.width,c.height]=function(e,t,n){const o=e.width/t,i=e.height/n;return o<1||i<1?[e.width,e.height]:o>i?[t,t*e.height/e.width]:[n*e.width/e.height,n]}(c,o||1080,r||1080));let u=!1;(c.width>a.GPlatform.maxImgLinearDimension||c.height>a.GPlatform.maxImgLinearDimension||c.width*c.height>a.GPlatform.maxImgAreaDots)&&(new g(i.GLocale.get(new i.GLocaleKey("GDocument","text.image-in-design-too-big"))).open(),u=!0),t.width=c.width,t.height=c.height,d.drawImage(c,0,0,c.width,c.height);var p=t.toDataURL();p.length>a.GPlatform.maxImgDataUrlLength&&!u&&(new g(i.GLocale.get(new i.GLocaleKey("GDocument","text.image-in-design-too-big"))).open(),u=!0),c.onload=null,s(p)},c.src=t}}()}static createFolder(e,t){return new Promise((n,i)=>{var a=this;!async function(){try{var r=a.definePath(t);await o.gApi.createFile({name:e,type:C,parent:r,trashed:!1}),n()}catch(e){i(e)}}()})}static definePath(e){return e?e.id:null}static fileExists(e){return o.gApi.getFile(e).then(()=>!0).catch(e=>{if(e.status===o.HTTP_STATUS_CODES.NOT_FOUND)return!1;throw e})}static changePathTree(e,t){return new Promise((n,i)=>{!async function(){try{for(var a=0;a<e.length;++a){var r=e[a],s=r.parent;t!==s&&r.id!==t&&await o.gApi.updateFile(r.id,{parent:t})}n()}catch(e){i(e)}}()})}static performSignup(){return this.performLogin(u.Forms.SignUp)}static performLogin(e){return new Promise((t,n)=>{try{const n=()=>{new u(e=>{gDesigner.getUser(),t(e)},e).open()};gDesigner.getUser().then(e=>{!e||gDesigner.isAnonymous()?n():t(e)}).catch(()=>{n()})}catch(e){n(e)}})}static createFile(e,t){!async function(){var n=null;let i=e.getScene().getActivePage().getGeometryBBox(),a=0,r=0;i&&(a=i.getWidth(),r=i.getHeight());const s={name:e.getTitle(),parent:null,type:b.type,app:"designer",unit:e.getScene().getProperty("ut"),width:a,height:r,trashed:null};e.getReservedId()?(await o.gApi.updateFile(e.getReservedId(),s),n=e.getReservedId()):n=await o.gApi.createFile(s),t(n)}()}static loadDesignData(e,t,n,i,a,r){return new Promise(async(s,l)=>{try{let p;if(e&&r){let t=(a=await o.gApi.getFile(e)).url;if(n){t=(await o.gApi.getAutoSave(e,n)).url}else a.autosave&&(t=a.autosave_url);p=a.url,a.url=t}else if(e&&!a)if(i)a=await o.gApi.getShare(i);else{var c=n?"/version/"+n:"";a=t?await o.gApi.getFile(e+c+"?edit"):await o.gApi.getFile(e+c)}else if(t){const t=a?a.id:e;t&&await o.gApi.file.registerAccess(t).catch(e=>{console.error("Could not register access",e)})}const g=e=>fetch(e).then((function(e){if(!e.ok)throw new Error("failed to download, status = "+e.status);return e.blob()}));var d=await g(a.url).catch(e=>{if(!p)throw e;return g(p)}),u=new FileReader;u.onload=function(){s({data:new Uint8Array(this.result),file:a})},u.onerror=l,u.readAsArrayBuffer(new Blob([d],{type:"application/octet-stream"}))}catch(e){l(e)}})}static getDesigneDataSize(e){return new Promise(async(t,n)=>{try{var i=await o.gApi.getFile(e);return await fetch(i.url,{method:"HEAD"}).then((function(e){var n=e.headers.get("Content-Length");t(n)}))}catch(e){n(e)}})}static renameFile(e,t,n){!async function(){try{await o.gApi.updateFile(e.id,{name:t}),n(!0)}catch(e){console.error(e),n(!1)}}()}static _checkSecondaryFormatSanity(){return!0}static performSave(e,t,n,a,r){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e.hasPagesWithInfiniteEmptyCanvas())return void(n?n({code:507,message:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.error-emtpy-infinite-canvas")),noFailCall:!0}):d.alert(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.error-emtpy-infinite-canvas"))));var l=a;function u(){let a=!1;if(e.isCommercialProductFile())return void e.openPaywall();var u=r||e.getStorageItem();const p=u&&w.length&&w.find(e=>e.ext.toUpperCase()===u.getExtension());if(p&&!G._checkSecondaryFormatSanity(e))return void(n&&n());const g=e.getEditor().markSavePoint();var m=function(o){g.rollback(),s||(o&&507===o.code?d.alert(o.message):d.confirm(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.save-to-cloud-failed")),(function(o){o?(gDesigner.stats("savealert_save-failed_click-save-local"),gDesigner.executeAction("file.save-as.".concat(b.ext),[null,e],void 0,!0)):(gDesigner.stats("savealert_save-failed_dont-save-local"),"function"!=typeof n||a?"function"==typeof t&&t(!1):(a=!0,n()))}),i.GLocale.get(new i.GLocaleKey("GLocale","no")),i.GLocale.get(new i.GLocaleKey("GLocale","yes")))),o&&console.log(o),e.updateStatus(f.SaveFailed),e.setSynchronizing(!1),e.setErrored(!0),gDesigner.trigger(new c(c.Type.SynchronismUpdateFailed,e)),n&&!a&&(a=!0,n())};try{const n={};e.setSynchronizing(!0),e.updateStatus(f.Saving,n);const{progress:a}=n,r=e=>{a&&a(e)};!async function(t){var n=null;try{let t={unit:e.getScene().getProperty("ut"),width:0,height:0};if(o.HAS_ANNOTATIONS)if(p){let t=!0;await h.saveDocumentAnnotations(e,t);l=e.updateSaveOptionsLastModifiedDate(l)}else try{let n=(await h.getCloudAnnotationsForDocument(e)).annotationsCollection;e.getScene().iteratePages(e=>{!!h.findAnnotationsListForPage(e,n)||n.push(i.GNode.store(e.getAnnotations()))},!0),t.annotations=n}catch(e){console.warn("Annotations couldn't be updated on server")}let n=e.getScene().getActivePage().getGeometryBBox();n&&(t.width=n.getWidth(),t.height=n.getHeight()),await o.gApi.updateFile(u._id,t)}catch(e){n=e}t(n)}((function(n){r(S),n?m(n):u.write(e,(function(){r(A),e.setSynchronizing(!1),e.setErrored(!1),gDesigner.hasEventListeners(c)&&gDesigner.trigger(new c(c.Type.Modified,e));var n=(n,o)=>{try{n&&(e.updateStatus(f.Saved,l),gDesigner.updateRecentDocumentsAction(),e.getStorageItem().setFileAutoSaveLastModifiedDate(new Date(o.autosave_updated)),e.getStorageItem().setFileLastModifiedDate(new Date(o.updated)))}finally{r(T),t&&t()}};o.gApi.getFile(u._id+"?edit").then(e=>n(!0,e)).catch(n)}),(function(e){m(e)}),e=>{r(x.calculateProgress(S,E,e/100))},l)}))}catch(e){m(e)}}const p=()=>{gDesigner.getUser().then(e=>{!e||gDesigner.isAnonymous()?G.performLogin().then(u):u()})};gDesigner.isOffline()?m.openUnavailableFeature(p):p()}static async updateFileThumbnail(e,t,n,i){var a=await o.gApi.signedPutUrls(e,{type_t:n,commit:i}),r=new XMLHttpRequest;r.open("PUT",a.url_t);var s={"Content-Type":n,"Cache-Control":"public,max-age=31600000"};for(var l in s)r.setRequestHeader(l,s[l]);r.send(t)}static async saveDocumentAnnotations(e,t,n){return!!o.HAS_ANNOTATIONS&&(gDesigner.isOffline()?(console.warn("Failed to record annotations"),!1):gDesigner.getUser().then(o=>!(!o||gDesigner.isAnonymous())&&h.saveDocumentAnnotations(e,t,void 0,n)))}static async getCloudAnnotations(e){if(o.HAS_ANNOTATIONS){if(!gDesigner.isOffline())return gDesigner.getUser().then(e=>{e&&gDesigner.isAnonymous()});console.warn("Failed to get annotations")}}static isOnline(){return"undefined"!=typeof window&&void 0!==window.gApi&&window.gApi.url}static getRecentStorageItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.FILE_FORMATS;var t=this;return new Promise((n,i)=>{!async function(){const a=e.map(e=>e.type).join("|");try{if(t.isOnline()){var r=await o.gApi.listFiles({type:a,accessed:"true",sort:"-accessed",parent:"*",limit:"10"});n(r)}}catch(e){}i([])}()})}static unzipData(e){var t=null;try{t=_.ungzip(e,{to:"string"})}catch(a){if("undefined"==typeof TextDecoder&&e.length>1e7){for(var n=[],o=e.length,i=0;i<o;i+=32768)n.push(String.fromCharCode.apply(null,e.subarray(i,i+32768)));t=n.join("")}else try{t="undefined"==typeof TextDecoder?new FakeTextEncoding.TextDecoder("utf-8").decode(e):new TextDecoder("utf-8").decode(e)}catch(e){console.warn("Couldn't unzip data. Data corrupted?")}}return t}static resendEmailConfirmation(e){let t,n;if(gContainer.getRuntime()===p.Runtime.Electron){const e=gContainer.getPlatform();"darwin"!==e&&"win32"!==e||(t="designer://"),n=gDesigner.getAssetsURL()}else n=location.origin;return o.gApi.resendEmailConfirmation({appUrl:t,webUrl:n,email:e.getEmail(),force:!0,origin:location.origin}).then(()=>{let e={},t=new Promise(t=>e.resolve=t);return d.custom({title:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.email-sent-title")),subtitle:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.email-sent-info")),icon:"ok",closeCallback:()=>e.resolve()}),t}).catch(e=>d.custom({title:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.something-wrong")),subtitle:o.gApi.formatError(e)}))}static createUint8ArrayFromBlob(e){return new Promise((t,n)=>{const o=new FileReader;o.onload=function(){t(new Uint8Array(this.result))},o.onerror=n,o.readAsArrayBuffer(e)})}static getFileDataForVersionOrAutoSave(e,t,n){return t&&!n?o.gApi.getFile(e,!1,t):o.gApi.getFile(e)}static async activateCoupon(e){try{const t=await o.gApi.coupon.activate(e);await y.checkLicense(),gDesigner.addNotification({message:t.message})}catch(e){if(!e.ok&&e.code)switch(e.code){case o.gApi.ERROR_CODES.ERR_SUBSCRIPTION_COULD_NOT_BE_DEACTIVATED:const e=$("<div>".concat(i.GLocale.get(new i.GLocaleKey("GCloudUtil","text.err-subscription-could-not-be-deactivated")),"</div>"));return e.find("a").addClass("link").attr("href","javascript:void(0)").on("click",e=>(e.preventDefault(),gDesigner.runDeepLink("purchases"),!1)),d.alert(e);case o.gApi.ERROR_CODES.ERR_SUBSCRIPTION_IS_ACTIVE:const{nextBillingDate:t}=await o.gApi.subscription.getNextBillingDate();return d.alert(i.GLocale.get(new i.GLocaleKey("GCloudUtil","text.err-subscription-is-active")).replace("%date",o.DateAPI.format(t)));case o.gApi.ERROR_CODES.ERR_SUBSCRIPTION_IS_NOT_EXPIRED:return d.alert(i.GLocale.get(new i.GLocaleKey("GCloudUtil","text.err-subscription-is-not-expired")).replace("%date",o.DateAPI.format(gDesigner.getLicense().getExpirationDate())));case o.gApi.ERROR_CODES.ERR_SUBSCRIPTION_IS_LIFETIME:return d.alert(i.GLocale.get(new i.GLocaleKey("GCloudUtil","text.err-subscription-is-lifetime")))}gDesigner.addNotification({message:o.gApi.formatError(e)})}}}e.exports=G},function(e,t,n){"use strict";e.exports=function(e){return null==e}},function(e,t,n){"use strict";var o=n(23),i=n(31),a=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?a(o[e]):o[e]&&o[e][t]}},,function(e,t,n){"use strict";function o(){}n(3),o.prototype._touchTools=null,o.prototype.init=function(e,t){throw new Error("Not Supported.")},o.prototype.isGroup=function(e){return!0},o.prototype.isSticky=function(){return!1},o.prototype.isAvailable=function(e){return!e},o.prototype.update=function(e,t,n){(e=e||this._document)&&e.clearActiveStylesList()},o.prototype.openPatternChooser=function(){throw new Error("Not Supported.")},o.prototype.openEyeDropper=function(e,t){throw new Error("Not Supported.")},o.prototype.setTouchTools=function(e){this._touchTools=e},o.prototype.getTouchTools=function(){return this._touchTools},o.prototype.toString=function(){return"[Object GProperties]"},e.exports=o},function(e,t,n){"use strict";var o=n(209),i=n(92),a=n(224),r=o(o.bind);e.exports=function(e,t){return i(e),void 0===t?e:a?r(e,t):function(){return e.apply(t,arguments)}}},function(e,t,n){"use strict";n(654)},,,function(e,t,n){"use strict";var o=n(598);e.exports=function(e){var t=+e;return t!=t||0===t?0:o(t)}},function(e,t,n){"use strict";var o=n(604),i=n(31),a=n(108),r=n(41)("toStringTag"),s=Object,l="Arguments"===a(function(){return arguments}());e.exports=o?a:function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=s(e),r))?n:l?a(t):"Object"===(o=a(t))&&i(t.callee)?"Arguments":o}},,,function(e,t,n){"use strict";var o,i=n(30),a=n(209),r=n(208).f,s=n(109),l=n(56),c=n(346),d=n(98),u=n(347),p=n(85),g=a("".slice),h=Math.min,f=u("startsWith");i({target:"String",proto:!0,forced:!!(p||f||(o=r(String.prototype,"startsWith"),!o||o.writable))&&!f},{startsWith:function(e){var t=l(d(this));c(e);var n=s(h(arguments.length>1?arguments[1]:void 0,t.length)),o=l(e);return g(t,n,n+o.length)===o}})},function(e,t,n){"use strict";n(3);var o=n(1);function i(e,t,n,o){this.key=e,this.previousValue=t,this.newValue=n,this.restoring=o}o.GObject.inherit(i,o.GEvent),i.prototype.key=null,i.prototype.previousValue=null,i.prototype.newValue=null,i.prototype.restoring=!1,i.prototype.toString=function(){return"[Object GSettingChangedEvent]"},e.exports=i},function(e,t,n){"use strict";var o=n(81).f,i=n(58),a=n(41)("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!i(e,a)&&o(e,a,{configurable:!0,value:t})}},function(e,t,n){"use strict";var o=n(385),i=n(81);e.exports=function(e,t,n){return n.get&&o(n.get,t,{getter:!0}),n.set&&o(n.set,t,{setter:!0}),i.f(e,t,n)}},,,,,,function(e,t,n){"use strict";var o=n(25);e.exports=o({}.isPrototypeOf)},,,function(e,t,n){"use strict";e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},,function(e,t,n){"use strict";var o=n(35),i=n(263),a=n(49),r=n(112),s=n(109),l=n(56),c=n(98),d=n(152),u=n(295),p=n(264);i("match",(function(e,t,n){return[function(t){var n=c(this),i=r(t)?void 0:d(t,e);return i?o(i,t,n):new RegExp(t)[e](l(n))},function(e){var o=a(this),i=l(e),r=n(t,o,i);if(r.done)return r.value;if(!o.global)return p(o,i);var c=o.unicode;o.lastIndex=0;for(var d,g=[],h=0;null!==(d=p(o,i));){var f=l(d[0]);g[h]=f,""===f&&(o.lastIndex=u(i,s(o.lastIndex),c)),h++}return 0===h?null:g}]}))},function(e,t,n){"use strict";var o,i,a,r=n(410),s=n(48),l=n(23),c=n(31),d=n(55),u=n(58),p=n(121),g=n(173),h=n(102),f=n(72),m=n(127),y=n(133),v=n(235),_=n(164),b=n(41),w=n(241),C=n(79),x=C.enforce,S=C.get,E=l.Int8Array,A=E&&E.prototype,T=l.Uint8ClampedArray,G=T&&T.prototype,P=E&&v(E),D=A&&v(A),L=Object.prototype,I=l.TypeError,k=b("toStringTag"),O=w("TYPED_ARRAY_TAG"),F=r&&!!_&&"Opera"!==p(l.opera),R=!1,M={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},N={BigInt64Array:8,BigUint64Array:8},B=function(e){var t=v(e);if(d(t)){var n=S(t);return n&&u(n,"TypedArrayConstructor")?n.TypedArrayConstructor:B(t)}},U=function(e){if(!d(e))return!1;var t=p(e);return u(M,t)||u(N,t)};for(o in M)(a=(i=l[o])&&i.prototype)?x(a).TypedArrayConstructor=i:F=!1;for(o in N)(a=(i=l[o])&&i.prototype)&&(x(a).TypedArrayConstructor=i);if((!F||!c(P)||P===Function.prototype)&&(P=function(){throw new I("Incorrect invocation")},F))for(o in M)l[o]&&_(l[o],P);if((!F||!D||D===L)&&(D=P.prototype,F))for(o in M)l[o]&&_(l[o].prototype,D);if(F&&v(G)!==D&&_(G,D),s&&!u(D,k))for(o in R=!0,m(D,k,{configurable:!0,get:function(){return d(this)?this[O]:void 0}}),M)l[o]&&h(l[o],O,o);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:F,TYPED_ARRAY_TAG:R&&O,aTypedArray:function(e){if(U(e))return e;throw new I("Target is not a typed array")},aTypedArrayConstructor:function(e){if(c(e)&&(!_||y(P,e)))return e;throw new I(g(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,o){if(s){if(n)for(var i in M){var a=l[i];if(a&&u(a.prototype,e))try{delete a.prototype[e]}catch(n){try{a.prototype[e]=t}catch(e){}}}D[e]&&!n||f(D,e,n?t:F&&A[e]||t,o)}},exportTypedArrayStaticMethod:function(e,t,n){var o,i;if(s){if(_){if(n)for(o in M)if((i=l[o])&&u(i,e))try{delete i[e]}catch(e){}if(P[e]&&!n)return;try{return f(P,e,n?t:F&&P[e]||t)}catch(e){}}for(o in M)!(i=l[o])||i[e]&&!n||f(i,e,t)}},getTypedArrayConstructor:B,isView:function(e){if(!d(e))return!1;var t=p(e);return"DataView"===t||u(M,t)||u(N,t)},isTypedArray:U,TypedArray:P,TypedArrayPrototype:D}},,,,function(e,t,n){"use strict";var o=n(14);n(52),n(26),n(18),n(255),n(62),n(138),n(29),n(84),n(28);var i=n(34),a=o(n(247));const{FILE_ID_PREFIX:r}=n(9);function s(){this._permissions=[]}s.prototype.parent=null,s.prototype._previewURL=null,s.prototype.setPreviewURL=function(e){this._previewURL=e},s.prototype.getPreviewURL=function(){return this._previewURL},s.prototype.getParentId=function(){const e=this.getParent();return e instanceof s?e.getId():e},s.prototype.getParent=function(){return this.parent},s.prototype.getId=function(){return this.id},s.prototype._permissions=null,s.prototype._itemType=null,s.prototype.storage=null,s.prototype.settings=null,s.prototype.autosave=null,s.prototype.getStorage=function(){return this.storage},s.prototype.isAutoSavedVersion=function(){return this.autosave},s.prototype.getExtension=function(){const e=this.extension||this.ext;return e&&e.toLowerCase()||null},s.prototype.getNameWithExtension=function(){let e=this.getName();e=s.normalizeMultipleDotsEnd(e);const t=".".concat(this.getExtension());return!e.toLowerCase().endsWith(t)?e+=t:e=e.substr(0,e.lastIndexOf("."))+t,e},s.prototype.getNameWithoutExtension=function(){return(0,i.getFileNameWithoutExtension)(this.getName(),this.getExtension())},s.prototype.getName=function(){return this.name&&this.name.trim()||this.name},s.prototype.setItemType=function(e){if(!Object.values(s.Type).includes(e))throw Error("Invalid type!");this._itemType=e},s.prototype.getType=function(){return this._itemType},s.prototype.getPermissions=function(){return this._permissions},s.prototype.revokePermissions=function(){this._permissions=[]},s.prototype.getIcon=function(){return this.icon},s.prototype.setMimeType=function(e){this._mimetype=e},s.prototype.getMimeType=function(){return this._mimetype||this.mimeType||this.type},s.prototype.setSize=function(e){this._size=e},s.prototype.getSize=function(){return this._size},s.prototype.hasPermission=function(e){return this._permissions.includes(e)},s.prototype.setPermission=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._permissionSupported(e)){if(t)this.hasPermission(e)||this._permissions.push(e);else if(this.hasPermission(e)){var n=this._permissions.indexOf(e);this._permissions.splice(n,1)}}else console.warn("Permission not supported: "+e)},s.prototype.setVersion=function(e){this._version=e},s.prototype.getVersion=function(){return this._version},s.prototype.setModificationTime=function(e){this._modificationTime=e},s.prototype.getModificationTime=function(){return this._modificationTime},s.prototype.setPermissions=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.forEach(e=>this.setPermission(e,t))},s.prototype._permissionSupported=function(e){return Object.values(s.Permission).includes(e)},s.from=function(e){var t=new s;return(t=Object.assign(t,e)).settings&&(t.settings=s.GCloudSettings.from(t.settings)),t},s.parseFromJSON=function(e,t){try{const t=JSON.parse(e);return s.from(t)}catch(e){if(!t&&void 0===t)throw e;return t}},s.Permission={Open:"open",Copy:"copy",Editing:"editing",Rename:"rename",CutPaste:"cutPaste",Download:"download",Delete:"delete",UnshareWithMe:"unshareWithMe"},s.Storage={GoogleDrive:"GOOGLE_DRIVE",SharePoint:"SHAREPOINT",OneDriveBusiness:"ONEDRIVE_BUSINESS",Gravit:"GRAVIT_CLOUD"},s.Type={Folder:"folder",File:"file",CorporateStorage:"corporate-storage"},s.GCloudSettings=function(){},s.GCloudSettings.from=function(e){let t=new s.GCloudSettings;return t=Object.assign(t,e),t},s.GCloudSettings.parseFromJSON=function(e,t){try{const t=JSON.parse(e);return s.GCloudSettings.from(t)}catch(e){if(!t&&void 0===t)throw e;return t}},s.getPrefixIdForStorage=function(e){switch(e){case s.Storage.Gravit:return"";case s.Storage.GoogleDrive:return r.GOOGLEDRIVE;case s.Storage.SharePoint:return r.SHAREPOINT;case s.Storage.OneDriveBusiness:return r.ONEDRIVEBUSINESS}throw new Error("Unsupported storage!")},s.getFileStorageId=function(e){if(!e.id)return null;const t=s.getPrefixIdForStorage(e.storage);let n=e.id;return t&&(n=n.replace("".concat(t,"_"),"")),n},s.getCollaborativeFileId=function(e,t){const n=s.getPrefixIdForStorage(t);return"".concat(n?n+"_":"").concat(e)},s.createOrReturnSelfInstance=function(e){return e instanceof s?e:s.from(e)},s.getExtensionFromName=function(e){const t=e.match(a.default.String.FileExtension);return t?t[0].slice(1):null},s.normalizeMultipleDotsEnd=function(e){if(e.endsWith(".")){const t=e.match(a.default.String.MultipleDotsEnd);if(t)return e.slice(0,t.index)}return e},e.exports=s},function(e,t,n){"use strict";var o,i=n(49),a=n(599),r=n(288),s=n(242),l=n(390),c=n(227),d=n(286),u=d("IE_PROTO"),p=function(){},g=function(e){return"<script>"+e+"<\/script>"},h=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},f=function(){try{o=new ActiveXObject("htmlfile")}catch(e){}var e,t;f="undefined"!=typeof document?document.domain&&o?h(o):((t=c("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(g("document.F=Object")),e.close(),e.F):h(o);for(var n=r.length;n--;)delete f.prototype[r[n]];return f()};s[u]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(p.prototype=i(e),n=new p,p.prototype=null,n[u]=e):n=f(),void 0===t?n:a.f(n,t)}},function(e,t,n){"use strict";var o=n(25);e.exports=o([].slice)},,,,,,function(e,t,n){"use strict";var o=n(14);n(52),n(17),n(314),n(169),n(26),n(7),n(183),n(18),n(62),n(138),n(29),n(830),n(1363),n(204),n(177),n(178),n(179),n(180),n(28),n(22);var i=n(45),a=n(1),r=n(13),s=n(1177),l=n(776),c=n(9),d=n(34),u=o(n(1443)),p=o(n(1445)),g=o(n(1446)),h=o(n(166)),f=n(155);const m=n(1447);var y=n(372),v=n(71),_=n(78),b=n(203),w=n(322),C=n(222),x=n(820),S=n(1448),E=n(205),A=n(1214),T=n(1450),G=n(238),P=n(111),D=n(206),L=n(77);const I=n(426),k=n(376),O=n(277),F=n(278),R=n(37),M=n(427),N=n(373),B=c.FILE_FORMATS.find(e=>e.default),U=c.FILE_FORMATS.filter(e=>e.secondary),$=n(377),j=n(421);n(1129);function K(e){this._storageItem=e instanceof C.Item?e:null,this._windows=[],this._activeWindow=null,this._updateStatus(_.Init),this.sessionId=a.GUtil.uuid(),e instanceof a.GScene?this.setScene(e):this.setScene(gDesigner.createScene()),this._storageItem&&gDesigner.hasEventListeners(v)&&gDesigner.trigger(new v(v.Type.StorageItemUpdated,this)),this._activeStylesList={Fill:null,Border:null,Effect:null},this._lockedSymbolInstances=!1}a.GObject.inherit(K,a.GEventTarget),K.FileTypes=N.getFileTypesArray(),K.prototype._status=null,K.prototype._errored=!1,K.prototype._storageItem=null,K.prototype._isUpdateAvailable=!1,K.prototype._tempCloudStorageItem=null,K.prototype._documentColors=null,K.prototype._scene=null,K.prototype._editor=null,K.prototype._windows=null,K.prototype._activeWindow=null,K.prototype._synchronizing=!1,K.prototype._title=null,K.prototype._reservedId=null,K.prototype._trashed=null,K.prototype._fontImporter=null,K.prototype._paywall=null,K.prototype._lockedSymbolInstances=!1,K.prototype._lockedByVersionHistory=!1,K.prototype._editable=!0,K.prototype._annotationsEditable=c.HAS_ANNOTATIONS,K.prototype._owner=null,K.prototype._cloudSynchronismFlag=!1,K.prototype._documentFromTemplate=!1,K.prototype._isShared=!1,K.prototype._focusAnnotationId=null,K.prototype._failedDocumentIdOrToken=null,K.prototype._lastDownloadSize=0,K.prototype._lastDownloadSize=0,K.prototype.hasUTS=void 0,K.prototype._activeStylesList=null,K.prototype.updateActiveStylesList=function(e,t){this._activeStylesList.hasOwnProperty(e)&&(this._activeStylesList[e]=t)},K.prototype.getActiveStylesList=function(){return this._activeStylesList},K.prototype.clearActiveStylesList=function(){Object.keys(this._selectedStylesList).forEach(e=>{this._selectedStylesList[e]=null})},K.prototype.setFocusAnnotationId=function(e){this._focusAnnotationId=e},K.prototype.getFocusAnnotationId=function(){return this._focusAnnotationId},K.prototype.setFailedDocumentIdOrToken=function(e){this._failedDocumentIdOrToken=e},K.prototype.getFailedDocumentIdOrToken=function(){return this._failedDocumentIdOrToken},K.prototype._annotationFocused=!1,K.prototype.setAnnotationFocused=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._annotationFocused=e},K.prototype.isAnnotationFocused=function(){return this._annotationFocused},K.prototype._colorModeElms=null,K.prototype.setColorModeElms=function(e){this._colorModeElms=e},K.prototype.getColorModeElms=function(){return this._colorModeElms},K.prototype.setDocumentFromTemplate=function(e){this._documentFromTemplate=e},K.prototype.isDocumentFromTemplate=function(){return this._documentFromTemplate},K.prototype.setIsShared=function(e){this._isShared=e},K.prototype.isShared=function(){return this._isShared},K.prototype.openPaywall=function(e){this._paywall&&this._paywall.close(),this._paywall=new S(this,this.getStorageItem(),e),this._paywall.open()},K.prototype.getStatus=function(){return this._status},K.prototype.isNew=function(){return!this._storageItem},K.prototype.isModified=function(){return!!this._editor&&(!!this._errored||(!!this._editor.isModified(c.HAS_ANNOTATIONS?e=>e.hasMixin(a.GAnnotation)||e instanceof a.GComment:null)||!(!this._editable||!this.getScene()||this.getStorageItem()&&this.getStorageItem().getVersionId()||!(this.getScene().getLastTimeAnnotationsFromCloudModified()-this.getScene().getLastSavedTime()>0))))},K.prototype.getStorageItem=function(){return this._storageItem},K.prototype.getExtension=function(){const e=this.getStorageItem();return e?e.getExtension():B.ext},K.prototype.hasCDR=function(){return!!(M.CDR_ORIGIN_PROPERTY_NAME&&this._scene&&this._scene.getProperty(M.CDR_ORIGIN_PROPERTY_NAME,!0))},K.prototype.getTempCloudStorageItem=function(){return this._tempCloudStorageItem||this._storageItem},K.prototype.getStorage=function(){return this._storageItem?this._storageItem.getStorage():null},K.prototype.setStorageItem=function(e){e!==this._storageItem&&(this._storageItem=e,this._storageItem&&this.getFileFormatVersion()&&this._storageItem.storeFileFormatVersion(this.getFileFormatVersion()),gDesigner.hasEventListeners(v)&&gDesigner.trigger(new v(v.Type.StorageItemUpdated,this)))},K.prototype.getScene=function(){return this._scene},K.prototype.setScene=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e!==this._scene||t){var n=!1;gDesigner.getActiveDocument()===this&&(gDesigner.activateDocument(null),n=!0),this._updateScene(e),this._updateStatus(_.Ready,e),n&&gDesigner.activateDocument(this)}},K.prototype.setFileFormatVersion=function(){},K.prototype.saveFileFormatVersion=async function(){},K.prototype.getFileFormatVersion=function(){return null},K.prototype.getDocumentColors=function(e){var t=Object.keys(this._documentColors);t.sort(function(e,t){return this._documentColors[t]-this._documentColors[e]}.bind(this));var n=t.map(function(e){return a.GPattern.deserialize(e)}.bind(this));return"number"==typeof e&&e>0&&(n=n.slice(0,e)),n},K.prototype._applicationStateChangedEvent=function(e){e.document===this&&this._scene&&this._checkPermissionsAndUpdateState()},K.prototype._networkAvailabilityChangedEvent=function(){this._checkPermissionsAndUpdateState()},K.prototype._checkPermissionsAndUpdateState=function(){const e=gDesigner.getApplicationManager().isInspectEnabled(),t=gDesigner.getApplicationManager().isCommentingEnabled();e===this._editable&&t===this._annotationsEditable||(this._editable=e,this._annotationsEditable=t,this._updateState())},K.prototype._resolvedMissingEntryEvent=function(e){try{const t=this.isCloudFile()?this.getStorageItem().getId():null;u.default.register({message:"DICTIONARY_MISSING_ENTRY",data:{entry:e.entry.uuid,file_id:t}})}catch(e){console.error(e)}},K.prototype._updateScene=function(e){if(this._scene&&(this._editor.release(),this._editor.removeEventListener(i.GEditor.FileDropEvent,this._dropFileEvent,this),this._editor.removeEventListener(i.GEditor.ModifiedEvent,this._modifiedEvent,this),this._editor.removeAllEventListeners(),this._scene.getDictionary().removeEventListener(a.GSceneDictionary.ResolvedMissingEntryEvent,this._resolvedMissingEntryEvent,this),this._scene.removeEventListener(a.GNode.AfterInsertEvent,this._afterInsertNodeEvent,this),this._scene.removeEventListener(a.GNode.AfterRemoveEvent,this._afterRemoveNodeEvent,this),this._scene.removeEventListener(a.GNode.BeforeRemoveEvent,this._beforeRemoveNodeEvent,this),this._scene.removeEventListener(a.GNode.BeforePropertiesChangeEvent,this._beforePropertiesChangeEvent,this),this._scene.removeEventListener(a.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChangeEvent,this),this._scene.removeEventListener(a.GNode.AfterFlagChangeEvent,this._afterFlagChangeEvent,this),this._scene.removeAllEventListeners(),this._scene.iteratePages(e=>{e.removeAllEventListeners()},!0),this._scene.getDictionary().removeAllEventListeners(),this._scene.getSymbolDictionary().removeAllEventListeners(),gDesigner.removeEventListener(I,this._licenseChangedEvent,this),gDesigner.removeEventListener(k,this._applicationStateChangedEvent,this),gDesigner.removeEventListener(O,this._networkAvailabilityChangedEvent,this),gDesigner.removeEventListener(F,this._userLoggedEvent,this),gDesigner.removeEventListener(v,this._handleDocumentEvent,this),gDesigner.removeEventListener(w,this._handleStorageItemEvent,this),this.removeEventListener($,this._collaborationEvent,this),this.removeEventListener(b,this._handleDocumentStatusEvent,this),this._editor=null,this._scene=null),this._documentColors={},this._scene=e,this._scene){this._editor=i.GEditor.getEditor(e)||new i.GEditor(e);const t=gDesigner.getSyncUser();t&&this._editor.setUID(t.getUID()),this._editor.addEventListener(i.GEditor.FileDropEvent,this._dropFileEvent,this,void 0,void 0,!0),this._editor.addEventListener(i.GEditor.ModifiedEvent,this._modifiedEvent,this,void 0,void 0,!0),this._scene.getDictionary().addEventListener(a.GSceneDictionary.ResolvedMissingEntryEvent,this._resolvedMissingEntryEvent,this,void 0,void 0,!0),this._scene.addEventListener(a.GNode.AfterInsertEvent,this._afterInsertNodeEvent,this,void 0,void 0,!0),this._scene.addEventListener(a.GNode.AfterRemoveEvent,this._afterRemoveNodeEvent,this,void 0,void 0,!0),this._scene.addEventListener(a.GNode.BeforeRemoveEvent,this._beforeRemoveNodeEvent,this,void 0,void 0,!0),this._scene.addEventListener(a.GNode.BeforePropertiesChangeEvent,this._beforePropertiesChangeEvent,this,void 0,void 0,!0),this._scene.addEventListener(a.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChangeEvent,this,void 0,void 0,!0),this._scene.addEventListener(a.GNode.AfterFlagChangeEvent,this._afterFlagChangeEvent,this,void 0,void 0,!0),gDesigner.addEventListener(I,this._licenseChangedEvent,this),gDesigner.addEventListener(k,this._applicationStateChangedEvent,this),gDesigner.addEventListener(O,this._networkAvailabilityChangedEvent,this),gDesigner.addEventListener(F,this._userLoggedEvent,this),gDesigner.addEventListener(v,this._handleDocumentEvent,this),gDesigner.addEventListener(w,this._handleStorageItemEvent,this),this.addEventListener($,this._collaborationEvent,this,void 0,void 0,!0),this.addEventListener(b,this._handleDocumentStatusEvent,this,void 0,void 0,!0),e.acceptChildren(e=>{if(e.hasMixin(a.GElement.Stylable)&&e.getPaintLayers())for(var t=e.getPaintLayers().getFirstChild();null!==t;t=t.getNext())this._updateDocumentColorsFromElement(t,["_pt"])}),this._updateState()}},K.prototype._userLoggedEvent=function(e){const{user:t}=e;t&&this._editor&&this._editor.setUID(new h.default(t).getUID())},K.prototype._handleDocumentEvent=function(){},K.prototype._handleStorageItemEvent=function(){},K.prototype._collaborationEvent=async function(e){if(this.isLockedByVersionHistory())return;const{type:t,data:n}=e;switch(t){case $.Type.ReviewStatusChanged:this.isCollaborative()&&this.getStorageItem().setCollaborativeFileStatus(n.status);break;case $.Type.FileUpdate:if(n&&n.metadata&&n.metadata.sessionId&&n.metadata.sessionId===this.sessionId)return;this._isUpdateAvailable=!0,this._isIgnoringCurrentUpdate=!1,gDesigner.hasEventListeners(v)&&gDesigner.trigger(new v(v.Type.UpdateAvailable,this))}},K.prototype._handleDocumentStatusEvent=async function(e){switch(e.status){case _.Loaded:this._isUpdateAvailable=!1,this._isIgnoringCurrentUpdate=!1;break;case _.Ready:this._checkPermissionsAndUpdateState();break;case _.Saved:this._isUpdateAvailable=!1,this._isIgnoringCurrentUpdate=!1,this._handleDocumentStatusSavedEventForRealtimeNotification(e);break;case _.Saving:gDesigner.trigger(new v(v.Type.Saving,this,e.data))}},K.prototype._handleDocumentStatusSavedEventForRealtimeNotification=async function(e){e.data&&(e.data.hasOwnProperty("collabTextUpdate")||e.data.hasOwnProperty("sendEmail"))?this.publish({collabTextUpdate:e.data.collabTextUpdate,sendEmail:e.data.sendEmail}):this.publish()},K.prototype.isUpdateAvailable=async function(){if(this._isUpdateAvailable)return!0;const e=this.getStorageItem();return!(!e||!e.hasVersionControl()&&!this.isCloudFile()||this._synchronizing)&&e.hasUpdates()},K.prototype.isIgnoringCurrentUpdate=function(){return this._isIgnoringCurrentUpdate},K.prototype.ignoreCurrentUpdate=function(){this._isIgnoringCurrentUpdate=!0},K.prototype.getEditor=function(){return this._editor},K.prototype.getWindows=function(){return this._windows},K.prototype.getActiveWindow=function(){return this._activeWindow},K.prototype.setOwner=function(e){(this._owner&&this._owner.id)!==(e&&e.id)&&(this._owner=e,gDesigner.hasEventListeners(v)&&gDesigner.trigger(new v(v.Type.OwnerUpdated,this)))},K.prototype.getOwner=function(){return this._owner},K.prototype.canSaveToCloud=async function(){if(!this._owner)return!0;const e=await gDesigner.getUser();return!!e&&(this._owner.id===e.getUID()||gDesigner.getApplicationManager().hasPermission(this,c.SharePermissions.EDIT))},K.prototype.setTitle=function(e){e!==this._title&&(this._title=e,this.isCloudFile()&&this.getStorageItem().setFileName(e),gDesigner.hasEventListeners(v)&&gDesigner.trigger(new v(v.Type.Modified,this)))};var V={},H=1;function W(e){setTimeout(e,10)}K.prototype.getTitle=function(){return this.isNew()&&(V[this.sessionId]=V[this.sessionId]?V[this.sessionId]:H++),this.isNew()?this._title||a.GLocale.get(new a.GLocaleKey("GDocument","text.default-document-name"))+"-"+V[this.sessionId]:this._storageItem.getName()},K.prototype.insertElement=function(e,t,n,o){var i=this.getScene();if(i.isFixedSized()&&e.hasMixin(a.GElement.Transform)){var r=e.getGeometryBBox();if(!r)return;var s=r.getWidth(),l=r.getHeight(),c=i.getProperty("w"),d=i.getProperty("h"),u=new a.GTransform;if(n&&(s>c||l>d)){var p=1,g=1;s>c&&(p=c/s),l>d&&(g=d/l),p<g?g=p:p=g,u=u.translated(-r.getX(),-r.getY()).scaled(p,g).translated(r.getX(),r.getY()),s*=p,l*=g}t&&(u=u.translated((c-s)/2-r.getX(),(d-l)/2-r.getY())),e.transform(u,!0);var h=u.getScaleFactor(),f=function(e){if(e instanceof a.GItem&&e.hasMixin(a.GElement.Stylable)&&e.hasStyleBorder()){var t=e.getPaintLayers();t&&a.GUtil.each(t.getBorderLayers(),(function(e,t){t&&t.setProperty("_bw",t.$_bw*h)}))}};e.beginUpdate(),f(e),e.hasMixin(a.GNode.Container)&&e.acceptChildren(f),e.endUpdate()}this._editor.insertElements([e],!0,o,e instanceof a.GItem)},K.prototype.loadFromData=function(e){var t={progress:null,checkAnnotations:!1};this._updateStatus(_.Loading,t),this._loadDataIntoDocument(e,t)},K.prototype._loadDataIntoDocument=async function(e,t){t.progress&&t.progress(5),await(0,d.sleep)(10);const n=P.unzipData(e);return t.progress&&t.progress(10),await(0,d.sleep)(10),this.deserializeData(n,t)},K.prototype.deserializeData=function(e,t){const n=this.getActiveWindow();return n&&n.centerAndZoom(),this._updateCloudSynchronism(this.isCloudFile()),new Promise(async(n,o)=>{t||(t={progress:null},this._updateStatus(_.Loading,t)),t.progress&&t.progress(15);const i=await new Promise((n,o)=>{try{a.GNode.deserializeAsync(e,gDesigner.getWorkspace(),t.progress,null,n)}catch(e){o(e)}}).catch(o);e=null,i&&(!this.isCloudFile()&&!this.isExternalFile()&&i&&i.isCloudSynchronization()?this.loadFromCloud(i,t,()=>{this._updateCloudSynchronism(!0)},()=>{this._updateCloudSynchronism(!1),gDesigner.isOffline()||i.setProperty("cfs",!1)},!1):i?(this.isExternalFile()&&i.setProperty("cfs",!1),this._updateScene(i),!this.isCloudFile()&&t.checkAnnotations&&this.loadCloudAnnotations(),this._updateStatus(_.Loaded),this.setScene(i,!0)):this._updateStatus(_.LoadFailed),n())})},K.prototype.loadFromCloud=function(e,t,n,o){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];t=t||{progress:null},this._updateStatus(_.Syncing,t);var a=()=>{this.chooseLatestDocument(e,e=>{this.setScene(e),t.checkAnnotations&&this.loadCloudAnnotations(),this._updateStatus(_.Loaded),n&&n(e)},n=>{this.setScene(e),t.checkAnnotations&&this.loadCloudAnnotations(),this._updateStatus(_.SyncFailed),o&&o(n)},null,i&&(()=>{this._updateStatus(_.LoadCancelled)})||void 0)};a()},K.prototype.storeToCloud=async function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0;var r=i||{};this.isModified()||Object.assign(r,{lastModifiedDate:e.getLastSavedTime()});const s=()=>{this._updateCloudSynchronism(!1),n?n.apply(null,arguments):new E(a.GLocale.get(new a.GLocaleKey("GDocument","text.sync-to-cloud-error"))).open()},l=()=>{this._updateCloudSynchronism(!0),t&&t.apply(null,arguments)};this.isExternalFile()?this.performCloudSave(l,s,r,o):P.performSave(this,l,s,r,await D.from(gDesigner.getDefaultStorage(),e.getProperty("cid"),this.getTitle()),o)},K.prototype.saveAnnotations=function(e,t){return P.saveDocumentAnnotations(this,e,t)},K.prototype.loadCloudAnnotations=function(){return P.getCloudAnnotations(this)},K.prototype.performCloudSave=async function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var i=this;let r=!1;if(this.isCommercialProductFile())this.openPaywall();else{var s=this.getStorageItem(),l=n=>{o||(n&&507===n.code?(R.alert(n.message),n.noFailCall&&(r=!0)):R.confirm(a.GLocale.get(new a.GLocaleKey("GCommonNames","text.save-to-cloud-failed")),n=>{n?gDesigner.executeAction("file.save-as.".concat(B.ext),[null,this],"savefailed"):"function"!=typeof t||r?"function"==typeof e&&e(!1):(r=!0,t())},a.GLocale.get(new a.GLocaleKey("GLocale","no")),a.GLocale.get(new a.GLocaleKey("GLocale","yes")))),n&&console.log(n),this.setSynchronizing(!1),this._updateStatus(_.SyncFailed),this._updateStatus(_.SaveFailed),gDesigner.trigger(new v(v.Type.SynchronismUpdateFailed,this)),this.setErrored(!0),t&&!r&&(r=!0,t())};try{this.setSynchronizing(!0);var c=async()=>{const t=!i.isCloudFile()||s.getType()!==B.type;await this.saveAnnotations(t),n=this.updateSaveOptionsLastModifiedDate(n),s.write(this,(function(){i.setSynchronizing(!1),i.setErrored(!1),i._updateStatus(_.Saved,{}),gDesigner.hasEventListeners(v)&&gDesigner.trigger(new v(v.Type.Modified,i));try{i.isCloudFile()&&gDesigner.updateRecentDocumentsAction()}finally{e&&e()}}),(function(e){l(e)}),null,n)};if(s.hasVersionControl()&&await s.hasUpdates()){var d=this.getScene(),u=await s.getLatestFileVersion(),p=await new Promise((e,t)=>{u.read(t=>e(t),e=>t(e))}),g=a.GNode.deserialize(P.unzipData(p),gDesigner.getWorkspace());return new T(d,g,this.getTitle(),u.getName(),e=>{if(e===d)c();else{this.setSynchronizing(!1);const t=new K(u);t.setScene(e),gDesigner.replaceDocument(this,t,!0)}},()=>{this.setSynchronizing(!1),i.setErrored(!1),this._updateStatus(_.SaveCancelled,{}),e&&e()}).open()}c()}catch(e){l(e)}}},K.prototype.chooseLatestDocument=async function(e,t,n,o,i){var r=e=>{n&&n(e),(e instanceof Error||"string"==typeof e)&&console.error(e)};let s;try{s=await c.gApi.getFile(e.getProperty("cid"))}catch(e){return void r(e)}P.loadDesignData(e.getProperty("cid"),void 0,void 0,void 0,void 0,s.autosave).then(async n=>{var s=n.data,l=n.file;this._tempCloudStorageItem=await D.from(gDesigner.getDefaultStorage(),e.getProperty("cid")),o=o||function(e,t){return e.lastModifiedDate().getTime()!==t.lastModifiedDate().getTime()&&(0,d.isDifferent)(e,t)};var c=a.GNode.deserialize(P.unzipData(s),gDesigner.getWorkspace());c?o(e,c)?new T(e,c,this.getTitle(),l.name,n=>{this._tempCloudStorageItem=null,n===e?this.storeToCloud(n):n.setProperties(["cid","cfs"],e.getProperties(["cid","cfs"])),t(n,!0)},i).open():t(e):r()}).catch(r)},K.prototype.isCloudSynchronismAvailable=function(){return this._cloudSynchronismFlag},K.prototype._updateCloudSynchronism=function(e){this._cloudSynchronismFlag!==e&&(this._cloudSynchronismFlag=e,gDesigner.hasEventListeners(v)&&gDesigner.trigger(new v(v.Type.CloudSynchronismUpdated,this)))},K.prototype.isCloudFile=function(){return this.getStorageItem()instanceof D.Item},K.prototype.isCollaborative=function(){return this.getStorageItem()&&this.getStorageItem().hasMixin(j)},K.prototype.isShareable=function(){const e=this.getStorageItem();return this.isCloudFile()&&e&&e.getId()||e&&e.getId()&&e.supportsShadowFile()&&e.supportsSharing()},K.prototype.isExternalFile=function(){return this.getStorageItem()instanceof y.Item},K.prototype.isEditingEnabled=function(){const e=this.getStorageItem();return!e||e.isEditingEnabled()},K.prototype.getId=function(){return this.isCloudFile()||this.isExternalFile()?this.getStorageItem().getId():this.getCloudReferenceId()?this.getCloudReferenceId():null},K.prototype.getToken=function(){return this.isCollaborative()?this.getStorageItem().getToken():null},K.prototype.getAnnotationsId=function(){if(!c.HAS_ANNOTATIONS)return null;var e=this.getId();if(!e){var t=this.getScene();(e=t.isCloudAnnotations()?t.getProperty("cid"):null)||(e=this.getReservedId())}return e},K.prototype.getAnnotationsToken=async function(e){if(!c.HAS_ANNOTATIONS)return null;var t=null;let n=location.search.match(/token=(?:[\0-%'-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+/);n&&(t=n[0].slice(6));var o=null,i=this.getScene(),a=this.getId(),r=i.getProperty("cid"),s=this.getReservedId();return!t||e!==a&&e!==s?e===r&&e!==a&&e!==s&&(o=i.getProperty("asec")):o=t,o},K.prototype.updateSaveOptionsLastModifiedDate=function(e,t){return e?e.save=!0:e={save:!0},c.HAS_ANNOTATIONS&&this._scene&&this._scene.getLastTimeAnnotationsFromCloudModified()&&(e.lastModifiedDate=this._scene.getLastTimeAnnotationsFromCloudModified()),t&&!e.lastModifiedDate&&(e.lastModifiedDate=t),e},K.prototype.isWebFile=function(){const e=this.getStorageItem();return e?e instanceof D.Item:gContainer.getRuntime()===L.Runtime.Browser||gContainer.getRuntime()===L.Runtime.PWA},K.prototype.isCommercialProductFile=function(){return this.getStorageItem()&&this.getStorageItem()instanceof D.CommercialProduct},K.prototype.restrictElements=function(e){return e.forEach(e=>{e.setProperty("restricted",this.getStorageItem().getId(),!0)}),e},K.prototype.filterUnrestrictedCommercialFileElements=function(e){return e&&e.filter(e=>{let t=e.getProperty("restricted",!0)||!1;if(!t)return!0;let n=this.getStorageItem();return n&&n.getId()===t})},K.prototype.hasCloudReference=function(){return!this.isCloudFile()&&!!this._getCloudSceneId()},K.prototype.getCloudReferenceId=function(){return this.hasCloudReference()&&this._getCloudSceneId()||null},K.prototype._getCloudSceneId=function(){return this.getScene()&&this.getScene().getProperty("cid")},K.prototype.isCloudSyncOn=function(){return this.hasCloudReference()&&this.getScene()&&this.getScene().isCloudSynchronization()},K.prototype.isExtensionAvailableForLoading=function(e){return e&&!!K.FileTypes.find(t=>t.load&&t.ext.toUpperCase()===e.toUpperCase())},K.prototype.reload=async function(){let e;if(gDesigner.hasEventListeners(v)&&gDesigner.trigger(new v(v.Type.BeforeReload,this)),this.isCloudFile()){const t=await c.gApi.getFile(this.getId());e=await D.from(gDesigner.getDefaultStorage(),t,void 0,void 0,t.autosave),this.getEditor()&&this.getEditor().markSavePoint(),this.setStorageItem(e)}else e=this.getStorageItem();this.load(e)},K.prototype.load=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("lts"!==gDesigner.getEnv()||gDesigner.isEnabledProFeatures()){var n=e||this._storageItem;if(n){var o=n.getName(),i=n.getExtension();t=Object.assign({},{progress:null,filename:o,ext:i?i.toLowerCase():null},t),this._updateStatus(_.Loading,t);var r=e=>{let t=!1;G.getInstance().query(n=>{var o=[];n.faces.slice().map(e=>{for(var t=[e.family],n=0;n<e.fonts.length;n++)e.fonts[n].family&&t.indexOf(e.fonts[n].family)<0&&t.push(e.fonts[n].family);o=o.concat(t)}),s.GPDFImport.updateFontFamilies(o),t||(t=!0,e())},"%",!0)},l=function(e,o,r,s){if(e)return new E(a.GLocale.get(new a.GLocaleKey("GDocument","text.image-too-big"))).open(),void this._updateStatus(_.LoadFailed);t.progress(100);var l=gDesigner.createScene(),c=l.getActivePage(),d=new a.GImage;d.setProperties(["iw","ih","url"],[r,s,o]),c.setProperties(["w","h","bck"],[r,s,"PNG"!==i?a.GRGBColor.WHITE:null]),c.appendChild(d),n.getName()&&this.setTitle(n.getName()),this.setScene(l),this._updateStatus(_.Loaded),gDesigner.gtmEvent("DOCUMENT_IMPORT_EVENT")}.bind(this);n.read(async e=>{if("GVDESIGN"===i||i===B.ext.toUpperCase()){gDesigner.stats("document_open_".concat(i.toLowerCase())),t.checkAnnotations=!0;const o=G.getInstance();o.setShowMissingFontsDialog(!1);const a=new p.default;a.start(),this._loadDataIntoDocument(e,t).finally(async()=>{try{const e=gDesigner.getWorkspace().getFontManager();await new g.default(e).waitForAllPendingFonts();const t=a.getMissingFonts();t&&t.length&&new x(this,t).open()}finally{a.stop(),o.setShowMissingFontsDialog(!0)}}),gDesigner.addToRecentFiles(n),gDesigner.gtmEvent("DOCUMENT_OPEN_EVENT")}else if(U.length&&U.find(e=>e.ext.toUpperCase()===i)){await this._handleSecondaryFormatRead(n,e,t);var o=gDesigner.getWindows().getActiveWindow().getView();if(o&&this.hasCDR()&&!o.getViewConfiguration().multiPageView){var c=this._scene.getActivePage();if(c){var d=c.getContentBBox();if(d&&!d.isEmpty()){var u=d.getSide(a.GRect.Side.CENTER);o.zoomAtCenter(u)}}}gDesigner.gtmEvent("DOCUMENT_OPEN_EVENT")}else if("SVG"===i||"SVGZ"===i)gDesigner.stats("document_open_svg"),s.GSVGImport.import(e,{fontProvider:J},gDesigner.getWorkspace().getFontManager(),(e,t,o)=>{if(t){let e;if(t instanceof a.GPage)e=gDesigner.createScene(!0),e.appendChild(t),e.setActivePage(t);else{e=gDesigner.createScene();var i=e.getActivePage(),r=null,s=[];if(t instanceof a.GGroup)for(var l=1===t.getChildren().length;t.getFirstChild();){var c=t.getFirstChild();if(t.removeChild(c),i.appendChild(c),l&&c.hasMixin(a.GStylable)){var d=t.getEffects();d&&d.getChildren().length&&d.getChildren().forEach((function(e){c.getEffects().appendChild(e.clone())}))}if(!c.hasMixin(a.GStylable)||null===c.getPaintLayers()||c instanceof a.GImage||c.hasStyleBorder()||c.hasStyleFill())s.push(c),c.getPaintBBox()&&(r=r?r.united(c.getPaintBBox()):c.getPaintBBox())}else s.push(t),i.appendChild(t),r=t.getPaintBBox();a.GUtil.each(s,(function(){})),i.setProperties(["w","h"],[o?o.width:0,o?o.height:0]),o.unit&&e.setProperty("ut",o.unit)}this._updateStatus(_.Loaded),n.getName()&&this.setTitle(n.getName()),this.setScene(e),gDesigner.gtmEvent("DOCUMENT_IMPORT_EVENT")}else this._updateStatus(_.LoadFailed);var u=gDesigner.getWindows().getActiveWindow().getView();u.getViewConfiguration().paintMode=a.GScenePaintConfiguration.PaintMode.Output,u.invalidate()});else if("EPS"===i)gDesigner.stats("document_open_eps"),this._preProcessFonts(a.GLocale.get(new a.GLocaleKey("GDocument","text.keep-fonts-eps"))),s.GEPSImport.import(e,gDesigner.getSetting("eps_outline_fonts",!0),gDesigner.getWorkspace().getFontManager(),(e,t,o,i)=>{if(this._postProcessFonts(),e||!t){e&&new E(e).open(),this._updateStatus(_.LoadFailed);var r=gDesigner.getWindows().getActiveWindow().getView();return r.getViewConfiguration().paintMode=a.GScenePaintConfiguration.PaintMode.Output,void r.invalidate()}var s=gDesigner.createScene(),l=s.getActivePage(),c=null;"production"!==gDesigner.getEnv()&&"lts"!==gDesigner.getEnv()&&(z=0,console.time("optimization time")),Q(t),"production"!==gDesigner.getEnv()&&"lts"!==gDesigner.getEnv()&&(console.timeEnd("optimization time"),console.log("Nodes removed: "+z));var d=[];for(s._beginBlockChanges([a.GNode._Change.BeforeChildRemove,a.GNode._Change.AfterChildRemove,a.GNode._Change.BeforeChildInsert,a.GNode._Change.AfterChildInsert]),t._blockUpdateChanges();t.getFirstChild();){var u=t.getFirstChild();t.removeChild(u),l.appendChild(u),d.push(u),u.getPaintBBox()&&(c=c?c.united(u.getPaintBBox()):u.getPaintBBox())}l.acceptChildren((function(e){e instanceof a.GText&&e.hasFontsToResolve()&&e.toFakeText()})),t._releaseUpdateChanges(),a.GUtil.each(d,(function(e,t){t.transform((new a.GTransform).translated(-c.getX(),-c.getY()))})),o?l.setProperties(["w","h"],[o?o.width:0,o?o.height:0]):l.trimToContent(),l.setProperty("bck",i||a.GRGBColor.WHITE),s._endBlockChanges([a.GNode._Change.BeforeChildRemove,a.GNode._Change.AfterChildRemove,a.GNode._Change.BeforeChildInsert,a.GNode._Change.AfterChildInsert]),this._updateStatus(_.Loaded),n.getName()&&this.setTitle(n.getName()),this.setScene(s),gDesigner.gtmEvent("DOCUMENT_IMPORT_EVENT")},(function(e){new E(e).open()}),(function(e){t&&t.progress&&t.progress(e)}),this.initCancelHandler.bind(this));else if("PDF"===i||"AI"===i){"PDF"===i?gDesigner.stats("document_open_pdf"):gDesigner.stats("document_open_ai"),this._preProcessFonts();var h=0,f=function(e){new E(a.GLocale.get(new a.GLocaleKey("GDocument","text.ai-not-pdf-compatible")),e).open()};r(()=>s.GPDFImport.import(e,{},gDesigner.getWorkspace().getFontManager(),(e,t,o)=>{if(this._postProcessFonts(),e)new E(e).open();else{var i=gDesigner.createScene(!0);i._beginBlockChanges([a.GNode._Change.BeforeChildRemove,a.GNode._Change.AfterChildRemove,a.GNode._Change.BeforeChildInsert,a.GNode._Change.AfterChildInsert]),a.GUtil.each(t,(function(e,t){t.setProperty("name",a.GLocale.get(new a.GLocaleKey("GCommonNames","text.page"))+" "+(e+1)),"production"!==gDesigner.getEnv()&&"lts"!==gDesigner.getEnv()&&(console.time("optimization time"),z=0),Q(t),"production"!==gDesigner.getEnv()&&"lts"!==gDesigner.getEnv()&&(console.timeEnd("optimization time"),console.log("Nodes removed: "+z)),i.appendChild(t)})),i._endBlockChanges([a.GNode._Change.BeforeChildRemove,a.GNode._Change.AfterChildRemove,a.GNode._Change.BeforeChildInsert,a.GNode._Change.AfterChildInsert]),i.setActivePage(t[0]),this._updateStatus(_.Loaded),n.getName()&&this.setTitle(n.getName()),this.setScene(i),o instanceof Array&&o.length&&new x(this,o,null,e=>{e||i.acceptChildren(e=>{e instanceof a.GText&&e.toFakeText()})}).open();var r=gDesigner.getWindows().getActiveWindow().getView();r.getViewConfiguration().paintMode=a.GScenePaintConfiguration.PaintMode.Output,r.invalidate(),gDesigner.gtmEvent("DOCUMENT_IMPORT_EVENT")}},(function(e,n){h=Math.max(h,e/n*100),t.progress(h)}),f))}else if("SKETCH"===i)gDesigner.stats("document_open_sketch"),this._preProcessFonts(),s.GSketchImport.import(e,{progress:t.progress,fontProvider:J,workspace:gDesigner.getWorkspace()},e=>{this._postProcessFonts();var t=(e=e||{}).pages,o=e.v50error;if(t&&Array.isArray(t)){e.replacedFonts&&new x(this,e.replacedFonts).open();var i=gDesigner.createScene(!0);i._beginBlockChanges([a.GNode._Change.BeforeChildRemove,a.GNode._Change.AfterChildRemove,a.GNode._Change.BeforeChildInsert,a.GNode._Change.AfterChildInsert]),t.forEach(e=>{i.appendChild(e)}),i._endBlockChanges([a.GNode._Change.BeforeChildRemove,a.GNode._Change.AfterChildRemove,a.GNode._Change.BeforeChildInsert,a.GNode._Change.AfterChildInsert]),i.setActivePage(t[0]),this._updateStatus(_.Loaded),n.getName()&&this.setTitle(n.getName()),this.setScene(i),gDesigner.gtmEvent("DOCUMENT_IMPORT_EVENT")}else if(o)new E(a.GLocale.get(new a.GLocaleKey("GDocument","text.unsupported-sketch-version-50+"))).open(),this._updateStatus(_.LoadFailed);else{var r={text:"string"==typeof e?e:null};this._updateStatus(_.LoadFailed,r)}});else if("JPG"===i||"JPEG"===i||"PNG"===i||"HEIC"===i)if(gDesigner.stats("document_open_".concat(i.toLowerCase())),"HEIC"===i){const t=new Blob([e]);m.getInstance().then(e=>e.parse(t)).then(e=>s.GBitmapImport.import(e,l)).catch(e=>console.log("Heic conversion error",e))}else s.GBitmapImport.import(e,l);else this._updateStatus(_.LoadFailed)},e=>{e&&(console.log(e),new E(a.GLocale.get(new a.GLocaleKey("GDocument","text.error-reading-file"))).open()),this._updateStatus(_.LoadFailed)},t.progress)}}},K.prototype._handleSecondaryFormatRead=async function(e,t){this._updateStatus(_.LoadFailed,t)},K.prototype._handleSecondaryFormatSave=async function(e,t,n){n&&n(a.GLocale.get(new a.GLocaleKey("GDocument","text.cannot-save")))},K.prototype.store=async function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=!o.export;var r=e=>{i&&(this._updateStatus(_.SaveFailed,e),this._updateStatus(_.Ready)),n&&n(e)};if("lts"===gDesigner.getEnv()&&!gDesigner.isEnabledProFeatures())return r();if(gContainer.verifyEnoughMemoryToSave(this),!this._scene)return r();var s=e||this._storageItem;if(!s)throw new Error("Unable to save, no storage item available.");var d=s.getExtension(),u={progress:null,filename:o.filename,ext:d&&d.toLowerCase(),referer:o.referer};i&&this._updateStatus(_.Saving,u);var p=()=>{i&&(this._updateStatus(_.Saved),this._updateStatus(_.Ready)),d!==B.ext.toUpperCase()&&-1===U.findIndex(e=>e.ext.toUpperCase()===d)||!this._editor?gDesigner.gtmEvent("DOCUMENT_EXPORT_EVENT"):(gDesigner.gtmEvent("DOCUMENT_SAVE_EVENT"),i&&this._editor.markSavePoint()),i&&gDesigner.hasEventListeners(v)&&gDesigner.trigger(new v(v.Type.Modified,this));try{d===B.ext.toUpperCase()&&gDesigner.addToRecentFiles(s)}finally{t&&t()}},g=e=>{s.write(e,p,r,u.progress,this)};const h=[N.JPEG.ext.toUpperCase(),N.JPG.ext.toUpperCase(),N.PNG.ext.toUpperCase()],m=[N.JPEG.ext.toUpperCase(),N.JPG.ext.toUpperCase()];if(d===B.ext.toUpperCase()){var y=this._scene,b=0;y.acceptChildren((function(){b++})),u.progress&&u.progress instanceof Function&&u.progress(10),W((function(){var e;try{e=a.GNode.serialize(y,a.GUtil.extend({save:!0},o||{}))}catch(e){return console.error(e),void r(a.GLocale.get(new a.GLocaleKey("GDocument","text.cannot-save")))}null===e||""===e||e.length<b?r(a.GLocale.get(new a.GLocaleKey("GDocument","text.cannot-save"))):(u.progress&&u.progress instanceof Function&&u.progress(50),W((function(){var t=new Uint8Array(f.gzip(e,{level:9}).buffer);u.progress&&u.progress instanceof Function&&u.progress(75),t.byteLength>20+b?g(t):r("GZIP compression fail")})))}))}else if(U&&U.find(e=>e.ext.toUpperCase()===d))await this._handleSecondaryFormatSave(u,g,r,o);else if("SVG"===d||"SVGZ"===d){const{exportOptions:e={}}=o;l.GSVGExport.export(this._scene.getActivePage(),e,(e,t)=>{if(e||!t)return r();if(!o.suppressMessages&&!gDesigner.getSetting("disable_warning_unsupported_features",!1)){let e=l.GSVGExport.getUnsupportedFeatures(this._scene.getActivePage());e&&e.length&&new A(e).open()}if("SVGZ"===d)g(new Uint8Array(f.gzip(t,{level:9}).buffer));else if("function"==typeof TextEncoder)g(new TextEncoder("utf-8").encode(t));else{var n=encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})),i=new Uint8Array(n.length);Array.prototype.forEach.call(n,(function(e,t){i[t]=e.charCodeAt(0)})),g(i)}})}else if(h.includes(d)){var w=a.GLength.DPI,C=this._scene.getActivePage();l.GBitmapExport.export(C,null,m.includes(d)?a.GRGBColor.WHITE:null,null,w,1,!0).toImageBuffer(d,e=>g(new Uint8Array(e)))}else if("PDF"===d){var x=this;gDesigner.getUser().then((function(e){var t;t=e&&e.getFullUserName()?e.getFullUserName():a.GLocale.get(new a.GLocaleKey("GDocument","text.default-export-author")),l.GPDFExport.export(x._scene,{dpi:o.dpi||72,progress:u.progress,user:t,jpegQuality:o.jpegQuality||c.JPEG_EXPORT_QUALITY_DEFAULT,title:x.getTitle()},(e,t)=>{if(e||!t)return r(a.GLocale.get(new a.GLocaleKey("GCommonNames","text.pdf-export-error")));var n=new FileReader;n.onload=()=>g(new Uint8Array(n.result)),n.readAsArrayBuffer(new Blob([t]))},null,{message:e=>u.progressInfo&&u.progressInfo(e)})}))}else r()},K.prototype.initCancelHandler=function(e){this._activeWindow&&this._activeWindow.activateCancelLoading(e)},K.prototype.placeOrImport=function(e,t,n,o,i){var l=(e,o)=>{if(o&&e instanceof a.GBlock&&e.setProperty("name",o),t&&e.hasMixin(a.GElement.Transform)){var r=e.getGeometryBBox(),s=r&&r.getX()?r.getX():0,l=r&&r.getY()?r.getY():0,c=t.center?-r.getWidth()/2:0,d=t.center?-r.getHeight()/2:0;e.transform(new a.GTransform(1,0,0,1,t.x-s+c,t.y-l+d),!0)}i&&i([e])||this.insertElement(e,!t,!0,n)},c=(e,t)=>{s.GBitmapImport.import(e,(function(e,n,o,i){if(e)new E(a.GLocale.get(new a.GLocaleKey("GDocument","text.image-too-big"))).open();else{var r=new a.GImage;r.setProperties(["iw","ih","url"],[o,i,n]),l(r,t)}}))};const d=(e,t)=>{let o=t?"".concat(a.GLocale.get(new a.GLocaleKey("GCommonNames","text.loading-file")).replace("%name",t),"..."):a.GLocale.get(new a.GLocaleKey("GDocument","text.opening-your-image")),i=this._activateProgress(o);try{this._preProcessFonts(a.GLocale.get(new a.GLocaleKey("GDocument","text.keep-fonts-eps"))),s.GEPSImport.import(e,gDesigner.getSetting("eps_outline_fonts",!0),gDesigner.getWorkspace().getFontManager(),(e,o,i,r)=>{if(this._deactivateProgress(),this._postProcessFonts(),!e&&o){"production"!==gDesigner.getEnv()&&"lts"!==gDesigner.getEnv()&&(z=0,console.time("optimization time")),Q(o),"production"!==gDesigner.getEnv()&&"lts"!==gDesigner.getEnv()&&(console.timeEnd("optimization time"),console.log("Nodes removed: "+z));var s=o,l=o.getPaintBBox();if(r){(s=new a.GRectangle).setBounds(0,0,l.getWidth(),l.getHeight()),s._blockUpdateChanges();var c=new a.GStylable.FillPaintLayer;for(c.setProperties(["_pt"],[r]),s.getPaintLayers().appendChild(c);o.getFirstChild();){var d=o.getFirstChild();o.removeChild(d),d.transform((new a.GTransform).translated(-l.getX(),-l.getY())),s.appendChild(d)}s._releaseUpdateChanges(),s._invalidateGeometryForChildUpdate(!0)}else s.transform((new a.GTransform).translated(-l.getX(),-l.getY()));s.setProperty("name",t||a.GLocale.get(new a.GLocaleKey("GCommonNames","text.image"))),n||this._editor.beginTransaction();try{this._scene.appendChild(s),s.acceptChildren((function(e){e instanceof a.GText&&e.hasFontsToResolve()&&e.toFakeText()}))}finally{n||this._editor.commitTransaction(a.GLocale.get(new a.GLocaleKey("GDocument","text.import-from-eps")))}}else e&&new E(e).open()},e=>{this._deactivateProgress(),new E(e).open()},i,this.initCancelHandler.bind(this))}catch(e){throw this._deactivateProgress(),e}};var u=(e,t,o)=>{let i=t?"".concat(a.GLocale.get(new a.GLocaleKey("GCommonNames","text.loading-file")).replace("%name",t),"..."):a.GLocale.get(new a.GLocaleKey("GDocument","text.opening-your-image")),r=this._activateProgress(i);try{this._preProcessFonts(),s.GPDFImport.import(e,{startPage:1},gDesigner.getWorkspace().getFontManager(),(e,i)=>{if(this._deactivateProgress(),this._postProcessFonts(),e)new E(e).open();else if(i&&i.length){n||this._editor.beginTransaction();try{var r=i.shift();"production"!==gDesigner.getEnv()&&"lts"!==gDesigner.getEnv()&&(console.time("optimization time"),z=0),Q(r),"production"!==gDesigner.getEnv()&&"lts"!==gDesigner.getEnv()&&(console.timeEnd("optimization time"),console.log("Nodes removed: "+z));var s=r.getGeometryBBox(),l=new a.GRectangle;l.setProperty("name",t||a.GLocale.get(new a.GLocaleKey("GCommonNames","text.image"))),l.setBounds(s.getX(),s.getY(),s.getWidth(),s.getHeight()),l.beginUpdate(),r.getChildren().forEach(e=>{r.removeChild(e),l.appendChild(e)}),this._scene.appendChild(l),l.acceptChildren(e=>{e instanceof a.GText&&e.toFakeText()}),l.endUpdate()}finally{n||this._editor.commitTransaction(a.GLocale.get(new a.GLocaleKey("GDocument",o?"text.import-from-ai":"text.import-from-pdf")))}}},e=>r(e),(function(e){new E(a.GLocale.get(new a.GLocaleKey("GDocument","text.ai-not-pdf-compatible")),e).open()}))}catch(e){throw this._deactivateProgress(),e}},p=(e,t,n)=>{t=t&&t.toUpperCase();var o=r.GPlatform.maxPngDataSize;switch("JPG"!==t&&"JPEG"!==t||a.GSystem.operatingSystem!==a.GSystem.OperatingSystem.OSX_IOS&&(o>>=2),t){case"JPG":case"JPEG":case"HEIC":case"GIF":case"PNG":if(e.size>o)return void new E(a.GLocale.get(new a.GLocaleKey("GDocument","text.image-too-big"))).open();"HEIC"===t?m.getInstance().then(t=>t.parse(e)).then(e=>c(e,n)).catch(()=>console.log("HEIC conversion failed")):c(e,n);break;case"SVG":case"SVGZ":((e,t)=>{s.GSVGImport.import(e,{fontProvider:J},gDesigner.getWorkspace().getFontManager(),(e,n)=>{n&&l(n,t)})})(e,n);break;case"PDF":u(e,n,!1);break;case"AI":N.getFileTypesArray().includes(N.AI)&&u(e,n,!0);break;case"EPS":d(e,n)}};if(e instanceof C.Item)e.read(t=>{var n=e.getExtension(),o=e.getName();p(new Blob([t]),n,o)});else{var g=null,h=null;if(!o&&e.name){var f=e.name.lastIndexOf(".");f>=0&&(g=e.name.substr(f+1),h=e.name.substr(0,f))}if(!g&&e.type)for(var y=0;y<K.FileTypes.length;++y)if(K.FileTypes[y].mime===e.type){g=K.FileTypes[y].ext;break}if(!gDesigner.isEnabledProFeatures()){let e=K.FileTypes.find(e=>e.ext.toUpperCase()===g.toUpperCase());if(e&&e.pro)return void gDesigner.handlePROFeatureInterruption()}p(e,g,h)}},K.prototype._preProcessFonts=function(e){if(gContainer.getRuntime()===L.Runtime.Electron){let e=gContainer.getSystemFontsProvider();e&&G.enableProviders([e],!0)}let t=G.getInstance();t&&(e&&(t.keepFontsMessage=e),t.setShowMissingFontsDialog(!1))},K.prototype._postProcessFonts=function(){if(gContainer.getRuntime()===L.Runtime.Electron){let e=gContainer.getSystemFontsProvider();e&&G.disableProviders([e],!0)}let e=G.getInstance();e&&e.setShowMissingFontsDialog(!0)},K.prototype._activateProgress=function(e){if(this._activeWindow){let t=this._activeWindow.activateProgress(e,!0).find("progress");return e=>t.val(e)}return e=>console.info("progress",e)},K.prototype._deactivateProgress=function(){this._activeWindow&&this._activeWindow.deactivateProgress()},K.prototype.activate=function(){this._updateState()},K.prototype.isCollaborativeTextEditing=function(){return!1},K.prototype.getCollaborativeTextController=function(){return null},K.prototype.deactivate=function(){},K.prototype.release=function(){this._scene&&this.setScene(null),this.getStorageItem()&&this.getStorageItem().release(),this.removeAllEventListeners(!0)},K.prototype.publish=function(e){const t=this._storageItem&&this._storageItem.getExtension(),n=!!U.find(e=>e.ext.toUpperCase()===t);let o=!1,i=!0;return e&&(o=e.collabTextUpdate,i=e.sendEmail),this.getId()&&c.gApi.realtime&&c.gApi.realtime.publishFile?c.gApi.realtime.publishFile(this.getId(),{sessionId:this.sessionId},n,o,i):Promise.resolve()},K.prototype._afterInsertNodeEvent=function(e){if(e.node instanceof a.GGroup&&e.node.getFirstChild())this._updateDocumentColorsFromGroup(e.node);else if(e.node instanceof a.GElement&&e.node.hasMixin(a.GElement.Stylable))this._updateDocumentColors(e.node);else if(e.node instanceof a.GStylable.PaintLayer){if(this._updateDocumentColorsFromElement(e.node,["_pt"]),this.hasCDR()){var t=e.node.getParent();t&&(e.node instanceof a.GStylable.FillPaintLayer?t.getFillLayers(!0).length>1&&R.showCDRUnsupportedObjectWarning():e.node instanceof a.GStylable.BorderPaintLayer&&t.getBorderLayers(!0).length>1&&R.showCDRUnsupportedObjectWarning())}}else e.node instanceof a.GStylable.Effect&&this.hasCDR()&&R.showCDRUnsupportedObjectWarning(e.node);this._updateSymbolLock(this._scene.getActivePage())},K.prototype._beforeRemoveNodeEvent=function(e){this._updateSymbolLock(e.node,!0)},K.prototype._afterRemoveNodeEvent=function(e){e.node instanceof a.GGroup&&e.node.getFirstChild()?this._updateDocumentColorsFromGroup(e.node,!0):e.node instanceof a.GElement&&e.node.hasMixin(a.GElement.Stylable)?this._updateDocumentColors(e.node,!0):e.node instanceof a.GStylable.PaintLayer&&this._updateDocumentColorsFromElement(e.node,["_pt"],!0),e.node instanceof a.GText&&this._updateDocumentColorsFromElement(e.node,["content"],!0)},K.prototype._beforePropertiesChangeEvent=function(e){e.node instanceof a.GSymbol&&null===e.values[e.properties.indexOf("masterRef")]&&this._updateSymbolLock(e.node,!0)},K.prototype._afterPropertiesChangeEvent=function(e){if(!e.temporary){const t=t=>{if(this.hasCDR()&&!e.node.hasMixin(a.GAnnotation)&&e.properties.includes(t)){const n=e.node.getProperty(t);n&&n!==a.GPaintCanvas.BlendMode.Normal&&R.showCDRUnsupportedObjectWarning()}};if(e.node instanceof a.GStylable.PaintLayer?(this._handlePropertiesChangedForDocumentColorsElement(e.node,["_pt"],e.properties,e.values),t("_bl")):(e.node.hasMixin(a.GStylable)&&t("_sbl"),e.node instanceof a.GText&&this._handlePropertiesChangedForDocumentColorsElement(e.node,["content"],e.properties,e.values)),!gDesigner.isEnabledProFeatures()){-1!==e.properties.indexOf("lkt")&&(0,d.isSymbolInstance)(e.node)&&(e.node instanceof a.GSymbol?e.node.acceptChildren(e=>e instanceof a.GElement&&e.setFlag(a.GElement.Flag.FullLocked)):e.node.setFlag(a.GElement.Flag.FullLocked))}}},K.prototype._afterFlagChangeEvent=function(e){const t=e.node;e.flag===a.GNode.Flag.Selected&&t instanceof a.GCollabText&&gDesigner.stats("document_canvas_select-collab-text")},K.prototype._licenseChangedEvent=function(){this._updateSymbolLock(this._scene)},K.prototype.lock=function(){},K.prototype.unlock=function(){},K.prototype.isLocked=function(){return!1},K.prototype.lockByVersionHistory=function(){this._lockedByVersionHistory=!0},K.prototype.isLockedByVersionHistory=function(){return this._lockedByVersionHistory},K.prototype._updateState=function(){if(this._scene){if(this._editable)this._scene.accept(e=>{if(e instanceof a.GElement){e.setProperty("plkt",a.GBlock.ProgramLck.NoLock);const t=e.getProperty("_lkt",!0);void 0!==t&&e.setProperty("lkt",t)}});else if(this._scene.accept(e=>{if(e instanceof a.GElement){void 0===e.getProperty("_lkt",!0)&&e.setProperty("_lkt",e.getProperty("lkt")||null,!0),e.setProperty("lkt",a.GBlock.LockType.Full)}}),this._annotationsEditable){const e=a.GBlock.ProgramLck.NoSizeChanges|a.GBlock.ProgramLck.NoEdit|a.GBlock.ProgramLck.NoMove|a.GBlock.ProgramLck.NoOrigChildrenEdit|a.GBlock.ProgramLck.NoNewChildren|a.GBlock.ProgramLck.NoDelete|a.GBlock.ProgramLck.NoDirectVisibilityChange|a.GBlock.ProgramLck.NoSelect;this._scene.iteratePages(t=>{t.acceptChildren(t=>{t instanceof a.GElement&&t.setProperty("plkt",e),t.hasMixin(a.GAnnotation)&&(t.setProperty("lkt",null),t.setProperty("plkt",e&~a.GBlock.ProgramLck.NoSelect))}),t.setProperty("plkt",e),t.setProperty("lkt",null)},!0)}this._updateSymbolLock(this._scene)}},K.prototype._updateSymbolLock=function(e,t){if(!this._editable)return;const n=!t;if(e=e||this._scene){const o=t=>{e.accept(e=>{if((0,d.isSymbolInstance)(e)){if(e instanceof a.GSymbol&&null===e.getProperty("masterRef"))return!1;!(e instanceof a.GSymbol)&&e instanceof a.GElement&&t(e)}})};gDesigner.isEnabledProFeatures()?this._lockedSymbolInstances&&(o(e=>e.setProperty("lkt",e.getProperty("lkt"),n,!0)),this._lockedSymbolInstances=!1):(o(e=>{t?e.hasFlag(a.GElement.Flag.FullLocked)&&e.removeFlag(a.GElement.Flag.FullLocked):e.setFlag(a.GElement.Flag.FullLocked),e.setProperty("_pro",n,!0)}),this._lockedSymbolInstances=!0)}},K.prototype._modifiedEvent=function(e){gDesigner.hasEventListeners(v)&&gDesigner.trigger(new v(v.Type.Modified,this,e.data?e.data:null))},K.prototype._dropFileEvent=function(e){var t=null;if(e.file.name){var n=e.file.name.lastIndexOf(".");n>=0&&(t=e.file.name.substr(n+1))}if(!t&&e.file.type)for(var o=0;o<K.FileTypes.length;++o)if(K.FileTypes[o].mime===e.file.type){t=K.FileTypes[o].ext;break}gDesigner.stats("document_drop_file",t),this.placeOrImport(e.file,{x:e.position.getX(),y:e.position.getY()})},K.prototype._updateStatus=function(e,t){e!==this._status&&(this._status=e,this.hasEventListeners(b)&&this.trigger(new b(e,t)),G.getInstance().trigger(new b(e,t)),this._status===_.Loaded&&this.isCommercialProductFile()&&this.openPaywall())},K.prototype.updateStatus=function(e,t){this._updateStatus(e,t||{})},K.prototype._extractUsedDocumentRef=function(e){return e&&0===e.indexOf("document://")&&(e=e.substr("document://".length)),null},K.prototype._addDocumentColors=function(e){for(var t=0;t<e.length;++t){var n=a.GPattern.serialize(e[t]);this._documentColors.hasOwnProperty(n)?this._documentColors[n]+=1:this._documentColors[n]=1}},K.prototype._clearDocumentColors=function(e){for(var t=0;t<e.length;++t){var n=a.GPattern.serialize(e[t]);this._documentColors.hasOwnProperty(n)&&0==--this._documentColors[n]&&delete this._documentColors[n]}},K.prototype._updateDocumentColors=function(e,t){var n=e.getPaintLayers();n&&a.GUtil.each(n.getLayers(),function(e,n){t?this._updateDocumentColorsFromElement(n,["_pt"],t):this._updateDocumentColorsFromElement(n,["_pt"])}.bind(this))},K.prototype._updateDocumentColorsFromGroup=function(e,t){for(var n=e.getChildren(),o=0;o<n.length;o++){var i=n[o];i instanceof a.GGroup||!i.hasMixin(a.GElement.Stylable)?this._updateDocumentColorsFromGroup(i,t):this._updateDocumentColors(i,t)}},K.prototype._updateDocumentColorsFromElement=function(e,t,n){for(var o=[],i=0;i<t.length;++i){var r=e.getProperty(t[i]);if(r){var s=function(n,i,r){if(n instanceof a.GColor)o.push(n);else if(n instanceof a.GGradient)for(var l=n.getStops(),c=0;c<l.length;++c)o.push(l[c].color);else if("content"===t[r]&&e instanceof a.GText&&i){var d=e.getTLCore().getRichContent();if(d&&d.length){var u=e._getGravitValue("fontColor",d[0].fontColor);s(u,!1,r)}}};s(r,!0,i)}}o.length&&(n?this._clearDocumentColors(o):this._addDocumentColors(o))},K.prototype._handlePropertiesChangedForDocumentColorsElement=function(e,t,n,o){for(var i=[],r=[],s=[],l=0;l<t.length;++l){var c=n.indexOf(t[l]);if(c>=0){i.push(c),r.push(t[l]);var d=function(t,o,i){if(t instanceof a.GColor)s.push(t);else if(t instanceof a.GGradient)for(var r=t.getStops(),l=0;l<r.length;++l)s.push(r[l].color);else if("content"===n[i]&&e instanceof a.GText&&t&&o){var c=JSON.parse(t);if(c[0]&&c[0].fontColor){var u=e._getGravitValue("fontColor",c[0].fontColor);d(u,!1,i)}}};d(o[c],!0,c)}}s.length&&this._clearDocumentColors(s),r.length&&this._updateDocumentColorsFromElement(e,r)},K.prototype.setSynchronizing=function(e){e!==this._synchronizing&&(this._synchronizing=e,gDesigner.hasEventListeners(v)&&gDesigner.trigger(new v(v.Type.SynchronismUpdated,this)))},K.prototype.isSynchronizing=function(){return this._synchronizing},K.prototype.setErrored=function(e){e!==this._errored&&(this._errored=!!e,gDesigner.hasEventListeners(v)&&gDesigner.trigger(new v(v.Type.Modified,this)))},K.prototype.buildPreview=function(){return new Promise(e=>{for(var t=null,n=this._scene.getFirstChild();null!==n;n=n.getNext())if(n instanceof a.GPage){t=n;break}if(t){var o=t._getBitmapPaintArea(),i=l.GBitmapExport.convertSizeToScale(o.getWidth(),o.getHeight(),o.getWidth()>o.getHeight()?"600w":"600h");t.toBitmap(i.getX(),i.getY(),2,a.GRGBColor.WHITE).toImageBlob("image/jpeg",e)}})},K.prototype.hasPagesWithInfiniteEmptyCanvas=function(){for(var e=this._scene.getFirstChild();null!==e;e=e.getNext())if(e instanceof a.GPage&&!e.getGeometryBBox())return!0;return!1},K.prototype.setReservedId=function(e){this._reservedId=e},K.prototype.getReservedId=function(){return this._reservedId},K.prototype.getLastDownloadSize=function(){return this._lastDownloadSize},K.prototype.setLastDownloadSize=function(e){this._lastDownloadSize=e},K.waitToRendererProcess=W;var z,q=Object.keys(a.GShape.GeometryProperties).concat(Object.keys(a.GShape.MetaProperties)).concat(Object.keys(a.GItem.MetaProperties)).concat(Object.keys(a.GBlock.VisualProperties)).concat(Object.keys(a.GBlock.MetaProperties)).concat(Object.keys(a.GElement.Anchor.MetaProperties));function Y(e,t){if(e.constructor!==t.constructor)return!1;if(!(e instanceof a.GShape))return!1;if(!t.getFirstChild())return!1;if(!e.arePropertiesEqual(t,q))return!1;var n=t.$ps;return t.$ps=e.getStylePropertySets(),a.GStylable.prototype.equalsStyle.call(e,t)?(t.$ps=n,!0):(t.$ps=n,!1)}function X(e,t){if(!e.arePropertiesEqual(t,Object.keys(a.GPath.GeometryProperties)))return!1;for(var n=Object.keys(a.GPathBase.AnchorPoint.GeometryProperties),o=e.getAnchorPoints(),i=t.getAnchorPoints(),r=o.getFirstChild(),s=i.getFirstChild();r&&s;r=r.getNext(),s=s.getNext())if(!r.arePropertiesEqual(s,n))return!1;return null===r&&null===s}function Q(e){e._blockUpdateChanges();let t=e.getFirstChild();for(;t;){var n=t.getNext();if(n){if(!Y(t,n)){t=n;continue}if(!(t instanceof a.GPath)){t=n;continue}if(!X(t,n)){t=n;continue}e.removeChild(n),t._blockUpdateChanges();for(var o=n.getFirstChild();null!==o;o=o.getNext())n.removeChild(o),t.appendChild(o);t._releaseUpdateChanges(),z++}else t=n}for(t=e.getFirstChild();null!==t;t=t.getNext())Q(t);e._releaseUpdateChanges()}var J={queryFirst:function(e,t){const n=(e,t)=>{let n,o,i,a,r,s,l,c,d,u,p,g=e.length,h=t.length;if(0===g)return h;if(0===h)return g;for(g>h&&(n=e,e=t,t=n),s=new Int8Array(g+1),o=0;o<=g;o++)s[o]=o;for(o=1;o<=h;o++){for(a=o,p=t[o-1],i=1;i<=g;i++)p===e[i-1]?r=s[i-1]:(l=a+1,c=s[i]+1,d=l-(l-c&c-l>>7),u=s[i-1]+1,r=d-(d-u&u-d>>7)),s[i-1]=a,a=r;s[g]=a}return s[g]};var o=0,i=[];e.fontName&&i.push(e.fontName),i.length?i[0]!==e.fontFamily&&i.push(e.fontFamily):i.push(e.fontFamily);G.getInstance().query((function a(r){var s;r.faces.length?(s=function(t){var o={family:t[0].fonts[0].family||t[0].family,weight:t[0].fonts[0].weight,style:t[0].fonts[0].style},i=e.fontName||e.fontFamily||gDesigner.getWorkspace().getFontManager().getDefaultFont().getFamily(),a=n(o.family,i),r=0,s=o.family;for(let e=0;e<t.length;e++){var l=t[e];let o;if(l.families)for(var c=0;c<l.families.length;c++)o=n(l.families[c],i),o<a&&(a=o,r=e,s=l.families[c]);else o=n(l.family,i),o<a&&(a=o,r=e,s=l.family)}o=null;var d=t[r];for(let t=0;t<d.fonts.length;t++){var u=d.fonts[t];if(!u.family||u.family===s){if(u.style===e.fontStyle&&u.weight===e.fontWeight){o={family:u.family||d.family,weight:u.weight,style:u.style};break}o||(o={family:u.family||d.family,weight:u.weight,style:u.style})}}return o}(r.faces),t(s)):o<i.length-1?(o++,setTimeout(()=>G.getInstance().query(a,i[o]))):t(null)}),i[o])}};e.exports=K},function(e,t,n){"use strict";var o=n(92),i=n(112);e.exports=function(e,t){var n=e[t];return i(n)?void 0:o(n)}},function(e,t,n){"use strict";var o=n(133),i=TypeError;e.exports=function(e,t){if(o(t,e))return e;throw new i("Incorrect invocation")}},,function(e,t,n){"use strict";var o={};(0,n(87).assign)(o,n(446),n(449),n(301)),e.exports=o},,,function(e,t,n){"use strict";var o=n(30),i=n(661).left,a=n(335),r=n(199);o({target:"Array",proto:!0,forced:!n(187)&&r>79&&r<83||!a("reduce")},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},,function(e,t){e.exports=jQuery},,function(e,t,n){"use strict";var o=n(1);function i(){}o.GObject.inheritAndMix(i,o.GObject),e.exports=i},function(e,t,n){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";var o=n(601),i=n(49),a=n(602);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=o(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,o){return i(n),a(o),t?e(n,o):n.__proto__=o,n}}():void 0)},,function(e,t,n){"use strict";n(26),n(18),n(99),n(3),n(231),n(84);var o=n(247),i=n(9);const{GObject:a}=n(1),r=n(712),s=n(571),l={},c=["#B30000","#B35900","#999900","#59B300","#009966","#00B3B3","#0095B3","#006699","#003CB3","#1E00B3","#5900B3","#9500B3","#B30077","#E60000","#E67300","#E69900","#5500FF","#BF00FF"];function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this,e)}a.inheritAndMix(d,s,[r,i.User],!0),d.equals=function(e,t){return new d(e).getUID()===new d(t).getUID()},d.prototype.hasOwnPictureAvatar=function(){return this.avatar&&this.avatar.split("?")[1]&&"v="===this.avatar.split("?")[1].substr(0,2)},d.prototype.getUID=function(){return!this.id&&i.ANONYMOUS_SESSION_ENABLED?this.user_id||this.session_id||"":this.id||this.user_id||""},d.prototype.getUserColor=function(){if(!this._color){const t=this.getUID();if(!l[t]){var e=c.shift();l[t]=e||"#"+((32*Math.random()|0)<<3|(32*Math.random()|0)<<11|(32*Math.random()|0)<<19).toString(16)}this._color=l[t]}return this._color},d.prototype.getEmail=function(){return i.CloudUtils.getUserEmail(this)},d.prototype.isDeactivated=function(){return!!this.deactivated},d.prototype.isAnonymous=function(){return this.anonymous},d.prototype.isGravitAccount=function(){const e=this.getEmail();return/\@(gravit\.io|designer\.io|corel\.com|corelvector\.com)$/.test(e)},d.prototype.isEmailVerified=function(){return!!this.email_verified},d.prototype.getFirstName=function(){try{if(this.name&&this.name.trim()){return this.name.trim().split(o.GRegex.String.SpacesLineBreak)[0]}return this.name||""}catch(e){return""}},d.prototype.getUserNameInitials=function(){const e=this.getFirstName();try{if(this.last_name&&this.last_name.trim()){const t=this.last_name;return"".concat(e.substr(0,1)).concat(t.substr(0,1)).toLocaleUpperCase()}return e?"".concat(e.substr(0,1)):""}catch(t){return e?"".concat(e.substr(0,1)):""}},d.prototype.getLastName=function(){return this.last_name},d.prototype.getUserReference=function(){return this.email||this.login||this.getFullUserName()},d.prototype.getAccountName=function(){return this.email||this.login||""},e.exports=d},function(e,t){e.exports=require("fs")},,function(e,t,n){"use strict";var o=n(30),i=n(209),a=n(20),r=n(310),s=n(49),l=n(287),c=n(109),d=n(244),u=r.ArrayBuffer,p=r.DataView,g=p.prototype,h=i(u.prototype.slice),f=i(g.getUint8),m=i(g.setUint8);o({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:a((function(){return!new u(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(h&&void 0===t)return h(s(this),e);for(var n=s(this).byteLength,o=l(e,n),i=l(void 0===t?n:t,n),a=new(d(this,u))(c(i-o)),r=new p(this),g=new p(a),y=0;o<i;)m(g,y++,f(r,o++));return a}})},,function(e,t){var n,o,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{o="function"==typeof clearTimeout?clearTimeout:r}catch(e){o=r}}();var l,c=[],d=!1,u=-1;function p(){d&&l&&(d=!1,l.length?c=l.concat(c):u=-1,c.length&&g())}function g(){if(!d){var e=s(p);d=!0;for(var t=c.length;t;){for(l=c,c=[];++u<t;)l&&l[u].run();u=-1,t=c.length}l=null,d=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===r||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||d||s(g)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var o=n(225),i=n(98);e.exports=function(e){return o(i(e))}},function(e,t,n){"use strict";var o=String;e.exports=function(e){try{return o(e)}catch(e){return"Object"}}},function(e,t,n){"use strict";var o=n(23);e.exports=o.Promise},,,function(e,t,n){"use strict";var o=n(139),i=n(412),a=n(414),r=n(121),s=n(35),l=n(25),c=n(20),d=o.aTypedArray,u=o.exportTypedArrayMethod,p=l("".slice);u("fill",(function(e){var t=arguments.length;d(this);var n="Big"===p(r(this),0,3)?a(e):+e;return s(i,this,n,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),c((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e})))},function(e,t,n){"use strict";var o=n(23),i=n(35),a=n(139),r=n(93),s=n(413),l=n(86),c=n(20),d=o.RangeError,u=o.Int8Array,p=u&&u.prototype,g=p&&p.set,h=a.aTypedArray,f=a.exportTypedArrayMethod,m=!c((function(){var e=new Uint8ClampedArray(2);return i(g,e,{length:1,0:3},1),3!==e[1]})),y=m&&a.NATIVE_ARRAY_BUFFER_VIEWS&&c((function(){var e=new u(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));f("set",(function(e){h(this);var t=s(arguments.length>1?arguments[1]:void 0,1),n=l(e);if(m)return i(g,this,n,t);var o=this.length,a=r(n),c=0;if(a+t>o)throw new d("Wrong length");for(;c<a;)this[t+c]=n[c++]}),!m||y)},function(e,t,n){"use strict";var o=n(23),i=n(209),a=n(20),r=n(92),s=n(336),l=n(139),c=n(505),d=n(506),u=n(199),p=n(507),g=l.aTypedArray,h=l.exportTypedArrayMethod,f=o.Uint16Array,m=f&&i(f.prototype.sort),y=!(!m||a((function(){m(new f(2),null)}))&&a((function(){m(new f(2),{})}))),v=!!m&&!a((function(){if(u)return u<74;if(c)return c<67;if(d)return!0;if(p)return p<602;var e,t,n=new f(516),o=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,o[e]=e-2*t+3;for(m(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==o[e])return!0}));h("sort",(function(e){return void 0!==e&&r(e),v?m(this,e):s(g(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!v||y)},function(e,t,n){"use strict";var o=n(23),i=n(229),a=n(139),r=n(20),s=n(145),l=o.Int8Array,c=a.aTypedArray,d=a.exportTypedArrayMethod,u=[].toLocaleString,p=!!l&&r((function(){u.call(new l(1))}));d("toLocaleString",(function(){return i(u,p?s(c(this)):c(this),s(arguments))}),r((function(){return[1,2].toLocaleString()!==new l([1,2]).toLocaleString()}))||!r((function(){l.prototype.toLocaleString.call([1,2])})))},function(e,t,n){"use strict";var o=n(30),i=n(681);o({global:!0,forced:parseFloat!==i},{parseFloat:i})},,function(e,t,n){"use strict";var o=n(30),i=n(85),a=n(174),r=n(20),s=n(113),l=n(31),c=n(244),d=n(438),u=n(72),p=a&&a.prototype;if(o({target:"Promise",proto:!0,real:!0,forced:!!a&&r((function(){p.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,s("Promise")),n=l(e);return this.then(n?function(n){return d(t,e()).then((function(){return n}))}:e,n?function(n){return d(t,e()).then((function(){throw n}))}:e)}}),!i&&l(a)){var g=s("Promise").prototype.finally;p.finally!==g&&u(p,"finally",g,{unsafe:!0})}},,function(e,t,n){"use strict";e.exports={SidebarsIds:{GInspectorSidebar:"inspector",GAnnotationsSidebar:"annotations",GOutlineSidebar:"outline"}}},function(e,t,n){"use strict";var o=n(48),i=n(58),a=Function.prototype,r=o&&Object.getOwnPropertyDescriptor,s=i(a,"name"),l=s&&"something"===function(){}.name,c=s&&(!o||o&&r(a,"name").configurable);e.exports={EXISTS:s,PROPER:l,CONFIGURABLE:c}},function(e,t,n){"use strict";var o=n(23),i=n(108);e.exports="process"===i(o.process)},function(e,t,n){"use strict";var o=n(23),i=n(174),a=n(31),r=n(261),s=n(285),l=n(41),c=n(609),d=n(396),u=n(85),p=n(199),g=i&&i.prototype,h=l("species"),f=!1,m=a(o.PromiseRejectionEvent),y=r("Promise",(function(){var e=s(i),t=e!==String(i);if(!t&&66===p)return!0;if(u&&(!g.catch||!g.finally))return!0;if(!p||p<51||!/native code/.test(e)){var n=new i((function(e){e(1)})),o=function(e){e((function(){}),(function(){}))};if((n.constructor={})[h]=o,!(f=n.then((function(){}))instanceof o))return!0}return!t&&(c||d)&&!m}));e.exports={CONSTRUCTOR:y,REJECTION_EVENT:m,SUBCLASSING:f}},function(e,t,n){"use strict";var o=n(92),i=TypeError,a=function(e){var t,n;this.promise=new e((function(e,o){if(void 0!==t||void 0!==n)throw new i("Bad Promise constructor");t=e,n=o})),this.resolve=o(t),this.reject=o(n)};e.exports.f=function(e){return new a(e)}},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";var o=n(121),i=n(152),a=n(112),r=n(190),s=n(41)("iterator");e.exports=function(e){if(!a(e))return i(e,s)||i(e,"@@iterator")||r[o(e)]}},,,,,,,,function(e,t,n){"use strict";var o,i,a=n(23),r=n(136),s=a.process,l=a.Deno,c=s&&s.versions||l&&l.version,d=c&&c.v8;d&&(i=(o=d.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!i&&r&&(!(o=r.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=r.match(/Chrome\/(\d+)/))&&(i=+o[1]),e.exports=i},,,,function(e,t,n){"use strict";n(3);var o=n(1);function i(e,t){this.status=e,this.data=t}o.GObject.inherit(i,o.GEvent),i.prototype.status=null,i.prototype.data=null,i.prototype.toString=function(){return"[Object GDocumentStatusEvent]"},e.exports=i},function(e,t,n){"use strict";n(338)("Uint8",(function(e){return function(t,n,o){return e(this,t,n,o)}}))},function(e,t,n){"use strict";var o=n(1);e.exports=class{constructor(e,t){this._cb=t||null,this._dialog=$("<div></div>"),$("<div/>").addClass("message").css({lineHeight:"1.5em"}).append($("<span/>").html(e)).appendTo(this._dialog),this._dialog.gDialog({releaseOnClose:!0,buttons:[$("<button>"+o.GLocale.get(new o.GLocaleKey("GLocale","ok"))+"</button>").on("click",()=>this.close())]})}open(){this._dialog.gDialog("open",!0)}close(){this._dialog.gDialog("close"),this._cb&&this._cb()}}},function(e,t,n){"use strict";var o=n(14);n(17),n(89),n(26),n(7),n(22);var i=n(1),a=n(9),r=o(n(322)),s=o(n(37)),l=n(34),c=o(n(537)),d=o(n(538)),u=n(222),p=n(111);const g=n(421),h=n(78);var f=a.FILE_FORMATS.find(e=>e.default),m=a.FILE_FORMATS.filter(e=>!e.default);const y=n(420),v=n(155);function _(e){return fetch(a.gApi.url+"/error",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.assign(e,{ua:window.navigator.userAgent}))})}function b(){}i.GObject.inherit(b,u),b.ProgressStages={Preparing:0,SyncingImages:50,UploadingFile:100},b.from=async function(e,t,n,o,i){let a=t;return"string"==typeof t&&(a=await p.getFileDataForVersionOrAutoSave(t,o,i)),a?new b.Item(e,a.id,n||a.name,a,o||a.version,null,i):null},b.Item=function(e,t,n,o,i,a,r){if(u.Item.call(this,e),this._filename=n,this._id=t,this._file=o&&p.convertToCloudItem(o),this._versionId=i,this._token=a,this._isAutoSave="boolean"==typeof r?r:!(!o||!o.autosave),this._fileLastModifiedDate=o&&new Date(o.updated||o.created),this._fileAutoSaveLastModifiedDate=o&&new Date(o.autosave_updated),o&&m.length){var s=null;o.type?s=m.find(e=>e.type===this._file.getMimeType()):this._file.getExtension()&&(s=m.find(e=>e.ext===this._file.getExtension())),s&&(this._ext=s.ext.toUpperCase(),this._type=s.type)}},i.GObject.inheritAndMix(b.Item,u.Item,[g]),b.Item.prototype._filename=null,b.Item.prototype._ext=null,b.Item.prototype._type=null,b.Item.prototype._id=null,b.Item.prototype._file=null,b.Item.prototype._versionId=null,b.Item.prototype._token=null,b.Item.prototype._isAutoSave=null,b.Item.prototype.isRegistrable=function(){return!!this.getId()},b.Item.prototype.getId=function(){return this._id},b.Item.prototype.isVersionAutoSave=function(){return this._isAutoSave},b.Item.prototype.getToken=function(){return this._token},b.Item.prototype.getFullName=function(){return this._filename},b.Item.prototype.getName=function(){return i.GUtil.xss(this._filename)},b.Item.prototype.getVersionId=function(){return this._versionId||null},b.Item.prototype.setVersionId=function(e){this._versionId=e},b.Item.prototype.storeFileFormatVersion=function(e){return this._fileFormatVersion=e,this.supportsSharing()?a.gApi.updateFileFormat(this.getId(),{fileFormat:this._fileFormatVersion}):Promise.resolve()},b.Item.prototype.setCollaborativeFileStatus=async function(e){if(this._file.status!==e){var t=this._file.status;this._file.status=e,gDesigner.hasEventListeners(r.default.FileStatusUpdate)&&gDesigner.trigger(new r.default.FileStatusUpdate(this,t,e))}},b.Item.prototype.getCollaborativeFile=async function(){return this._file},b.Item.prototype.setFileName=function(e){this._filename=e},b.Item.prototype.getOrCreateCollaborativeFile=async function(){return gDesigner.getCloudCommunicationManager().getFileExtended(this.getId())},b.Item.prototype.getExtension=function(){return this._ext||f.ext.toUpperCase()},b.Item.prototype.getType=function(){return this._type||f.type},b.Item.prototype.setFile=function(e){if(!e)throw new Error("File can not be null");const t=this._file&&this._file.status,n=new a.FileExtended(e);this._file=p.convertToCloudItem(e),this._id=e.id,this._name=e.name,this._versionId=e.version,this._fileLastModifiedDate=new Date(e.updated),this._fileAutoSaveLastModifiedDate=new Date(e.autosave_updated),this._isAutoSave=!!n.isAutoSave(),this._file.status!==t&&null!=t&&gDesigner.hasEventListeners(r.default.FileStatusUpdate)&&gDesigner.trigger(new r.default.FileStatusUpdate(this,t,this._file.status))},b.Item.prototype.getFile=function(){return this._file},b.Item.prototype.read=async function(e,t){if(!this._file.url){const e=await p.getFileDataForVersionOrAutoSave(this._id,this._versionId,this._isAutoSave);this._file.url=e.url}p.loadDesignData(this._id,!0,this._versionId,this._token,this._file,this._isAutoSave).then(t=>{e(t.data)}).catch(t)},b.Item.prototype.supportsSharing=function(){let e=!0;return this._id||(e=!1),e},b.Item.prototype._canPerformExtensionSpecificWrite=function(){return!1},b.Item.prototype._performExtensionSpecificWrite=async function(){},b.Item.prototype._syncPreviewThumbnailWithCloud=async function(e){if(e)try{const t=await c.default.fromBlob(e);await this._uploadThumbnail(t,!1)}catch(e){console.warn("GCloudStorage.Item.prototype._performDefaultWrite","_uploadThumbnail",e)}},b.Item.prototype._performDefaultWrite=async function(e,t,n,o,i){e.updateStatus(h.Saving);const s=e=>{o&&o(e)};return p.syncCloudImages(e,this._id,i,e=>{s(d.default.calculateProgress(b.ProgressStages.Preparing,b.ProgressStages.SyncingImages,e))}).then(o=>{let[c]=o;return(async()=>{if(!c)return _({message:"[cloud] scene is null",stack:"id: ".concat(this._id,"\nscene: ").concat(c)}),this._writing=!1,n&&n("scene is null");try{const u=v.gzip(c,{level:9}),p=u.hasOwnProperty("size")?u.size:u.length;if(p<=0)return _({message:"[cloud] empty scene/blob",stack:"id: ".concat(this._id,"\nscene: ").concat(c)}),this._writing=!1,n&&n("empty blob");const g=v.ungzip(u,{to:"string"});if(this._verifyFileNotTooSmall(p,e),!g)return _({message:"[cloud] invalid Scene",stack:"id: ".concat(this._id,"\nscene original: ").concat(c,"\nscene parsed: ").concat(g)}),this._writing=!1,n&&n("Scene invalid, sending error, please try again or submit a bug issue on https://discuss.gravit.io");var o=y.base64(u);const m=await e.buildPreview().catch(()=>null),w=await a.gApi.signedPutUrls(this._id,{type:f.type,md5:o,commit:!1}),C=await this._uploadWithProgress(w.url,{method:"PUT",headers:{"Content-Type":f.type,"Content-Encoding":"gzip","Cache-Control":"public,max-age=31536000","Content-MD5":o},body:u,onProgress:e=>{s(d.default.calculateProgress(b.ProgressStages.SyncingImages,b.ProgressStages.UploadingFile,e))}});if(C.status>=400)return e.updateStatus(h.SaveFailed),this._writing=!1,400===C.status?n&&n("Invalid response, probably corrupted upload: "+C.status):n&&n("Invalid response status: "+C.status);await this._syncPreviewThumbnailWithCloud(m);const x=a.COMPUTE_SHA256_FOR_FILES?await(0,l.getFileSHA256Digest)(u):null;await a.gApi.commitManualFileUpdate(this._id,[a.FileTypes.MainFile,a.FileTypes.ThumbnailPreview]),await a.gApi.updateFile(this._id,{trashed:!1,sha256:x}),this.setVersionId(null),gDesigner.hasEventListeners(r.default)&&gDesigner.trigger(new r.default(r.default.Type.VersionUpdate,this)),e.updateStatus(h.Saved,i),t&&t(),this._writing=!1}catch(t){this._writing=!1,e.updateStatus(h.SaveFailed),n&&n(t)}})()}).catch(e=>{n(e),this._writing=!1})},b.Item.prototype.write=async function(e,t,n,o,a){if(gContainer.verifyEnoughMemoryToSave(e),!this._writing){if(!e.hasPagesWithInfiniteEmptyCanvas()){this._writing=!0;try{await this._checkUserQuotaLimit()}catch(e){return n&&n(e),void(this._writing=!1)}return this._canPerformExtensionSpecificWrite()?this._performExtensionSpecificWrite(e,t,n,o,a):this._performDefaultWrite(e,t,n,o,a)}n?n({code:507,noFailCall:!0,message:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.error-emtpy-infinite-canvas"))}):s.default.alert(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.error-emtpy-infinite-canvas")))}},b.Item.prototype.createOrUpdateFileWithMetadata=async function(e,t){if(!this._writing){this._writing=!0;try{await this._checkUserQuotaLimit(),await this._createFileInCaseNew(),await this._uploadBinary(e),await this._uploadThumbnail(t.thumbnail),await this._makeFileVisibleUpdateInternalVersionAndHash(e),await this._updateFileAfterSave()}finally{this._writing=!1}}},b.Item.prototype._makeFileVisibleUpdateInternalVersionAndHash=async function(e){const t=a.COMPUTE_SHA256_FOR_FILES?await(0,l.getFileSHA256Digest)(e):null,n={trashed:!1};t&&(n.sha256=t);const o=await a.gApi.updateFile(this.getId(),n);this.setVersionId(o.versionId)},b.Item.prototype._updateFileAfterSave=async function(){const e=await a.gApi.getFile(this._id);this._fileLastModifiedDate=new Date(e.updated),this._file=p.convertToCloudItem(e)},b.Item.prototype._isNewFile=function(){return!this.getId()},b.Item.prototype._createFileInCaseNew=async function(){if(this._isNewFile()){const e=await a.gApi.createFile({name:this.getName(),parent:this._file.getParentId(),type:this.getType(),app:"designer",trashed:null}),t=await a.gApi.getFile(e.id,!0);this._id=this._file.id=e.id,this._fileLastModifiedDate=new Date(t.updated||t.created),this._file.setModificationTime(new Date(t.updated||t.created))}},b.Item.prototype._uploadBinary=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=y.base64(e),o=await a.gApi.signedPutUrls(this.getId(),{type:this.getType(),md5:n}),i=await fetch(o.url,{method:"PUT",headers:Object.assign({"Content-Type":this.getType(),"Cache-Control":"public,max-age=31536000","Content-MD5":n},t),body:e});if(i.status>=400){if(400===i.status)throw new Error("Invalid response, probably corrupted upload: "+i.status);throw new Error("Invalid response status: "+i.status)}},b.Item.prototype._uploadThumbnail=async function(e,t){if(e)return p.updateFileThumbnail(this.getId(),e.getImageAsBlob(),e.getMimeType(),t)},b.Item.prototype._checkUserQuotaLimit=async function(){const{pro:e,free:t}=gDesigner.getLicense().getQuotas(),n=gDesigner.isEnabledProFeatures()?e:t;if(n>0){if(await a.gApi.quota()>n){const e=new Error(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.running-out-of-cloud-space")));throw e.code=507,e}}},n(1077)(b),b.Item.prototype.getUniqueId=function(){return this._id},b.Item.prototype.hasUpdates=async function(){if(!this.getUniqueId())return!1;let e=await this.getLatestFileInfo();const t=e.getModificationTime()||e.updated||e.created,n=this._file.getModificationTime()||this._file.updated||this._file.created;this._fileLastModifiedDate&&!isNaN(this._fileLastModifiedDate.getTime())||(this._fileLastModifiedDate=new Date(n)),this._fileAutoSaveLastModifiedDate&&!isNaN(this._fileAutoSaveLastModifiedDate.getTime())||(this._fileAutoSaveLastModifiedDate=new Date(this._file.autosave_updated));return(e.autosave?Math.max(new Date(t).getTime(),new Date(e.autosave_updated).getTime()):new Date(t).getTime())>(this._file.autosave?Math.max(this._fileLastModifiedDate.getTime(),this._fileAutoSaveLastModifiedDate.getTime()):this._fileLastModifiedDate.getTime())},b.Item.prototype.getLatestFileInfo=async function(){const e=await gDesigner.getCloudCommunicationManager().getFile(this._id);return p.convertToCloudItem(e)},b.Item.prototype.exists=async function(){return p.fileExists(this._id)},b.Item.prototype._uploadWithProgress=function(e,t){return new Promise((n,o)=>{const i=new XMLHttpRequest;if(i.open(t.method||"PUT",e),t.headers)for(let e in t.headers)i.setRequestHeader(e,t.headers[e]);i.onload=()=>n(i),i.onerror=()=>o(i),i.upload&&t.onProgress&&(i.upload.onprogress=e=>{t.onProgress(e.loaded/e.total)}),i.send(t.body)})},e.exports=b},function(e,t,n){"use strict";(function(e){var o=n(234),i=n(499),a=n(500);function r(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return c(this,e,t,n)}function c(e,t,n,o){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,o){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(o||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===o?new Uint8Array(t):void 0===o?new Uint8Array(t,n):new Uint8Array(t,n,o);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=p(e,t);return e}(e,t,n,o):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var o=0|h(t,n),i=(e=s(e,o)).write(t,n);i!==o&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|g(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(o=t.length)!=o?s(e,0):p(e,t);if("Buffer"===t.type&&a(t.data))return p(e,t.data)}var o;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t){if(d(t),e=s(e,t<0?0:0|g(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|g(t.length);e=s(e,n);for(var o=0;o<n;o+=1)e[o]=255&t[o];return e}function g(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function h(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(o)return U(e).length;t=(""+t).toLowerCase(),o=!0}}function f(e,t,n){var o=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return G(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function m(e,t,n){var o=e[t];e[t]=e[n],e[n]=o}function y(e,t,n,o,i){if(0===e.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,o)),l.isBuffer(t))return 0===t.length?-1:v(e,t,n,o,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,o,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,o,i){var a,r=1,s=e.length,l=t.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||t.length<2)return-1;r=2,s/=2,l/=2,n/=2}function c(e,t){return 1===r?e[t]:e.readUInt16BE(t*r)}if(i){var d=-1;for(a=n;a<s;a++)if(c(e,a)===c(t,-1===d?0:a-d)){if(-1===d&&(d=a),a-d+1===l)return d*r}else-1!==d&&(a-=a-d),d=-1}else for(n+l>s&&(n=s-l),a=n;a>=0;a--){for(var u=!0,p=0;p<l;p++)if(c(e,a+p)!==c(t,p)){u=!1;break}if(u)return a}return-1}function _(e,t,n,o){n=Number(n)||0;var i=e.length-n;o?(o=Number(o))>i&&(o=i):o=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");o>a/2&&(o=a/2);for(var r=0;r<o;++r){var s=parseInt(t.substr(2*r,2),16);if(isNaN(s))return r;e[n+r]=s}return r}function b(e,t,n,o){return j(U(t,e.length-n),e,n,o)}function w(e,t,n,o){return j(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,o)}function C(e,t,n,o){return w(e,t,n,o)}function x(e,t,n,o){return j($(t),e,n,o)}function S(e,t,n,o){return j(function(e,t){for(var n,o,i,a=[],r=0;r<e.length&&!((t-=2)<0);++r)n=e.charCodeAt(r),o=n>>8,i=n%256,a.push(i),a.push(o);return a}(t,e.length-n),e,n,o)}function E(e,t,n){return 0===t&&n===e.length?o.fromByteArray(e):o.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var o=[],i=t;i<n;){var a,r,s,l,c=e[i],d=null,u=c>239?4:c>223?3:c>191?2:1;if(i+u<=n)switch(u){case 1:c<128&&(d=c);break;case 2:128==(192&(a=e[i+1]))&&(l=(31&c)<<6|63&a)>127&&(d=l);break;case 3:a=e[i+1],r=e[i+2],128==(192&a)&&128==(192&r)&&(l=(15&c)<<12|(63&a)<<6|63&r)>2047&&(l<55296||l>57343)&&(d=l);break;case 4:a=e[i+1],r=e[i+2],s=e[i+3],128==(192&a)&&128==(192&r)&&128==(192&s)&&(l=(15&c)<<18|(63&a)<<12|(63&r)<<6|63&s)>65535&&l<1114112&&(d=l)}null===d?(d=65533,u=1):d>65535&&(d-=65536,o.push(d>>>10&1023|55296),d=56320|1023&d),o.push(d),i+=u}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",o=0;for(;o<t;)n+=String.fromCharCode.apply(String,e.slice(o,o+=4096));return n}(o)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return c(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,o){return d(t),t<=0?s(e,t):void 0!==n?"string"==typeof o?s(e,t).fill(n,o):s(e,t).fill(n):s(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return u(null,e)},l.allocUnsafeSlow=function(e){return u(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,o=t.length,i=0,a=Math.min(n,o);i<a;++i)if(e[i]!==t[i]){n=e[i],o=t[i];break}return n<o?-1:o<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var o=l.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var r=e[n];if(!l.isBuffer(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(o,i),i+=r.length}return o},l.byteLength=h,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):f.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,o,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),t<0||n>e.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&t>=n)return 0;if(o>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(o>>>=0),r=(n>>>=0)-(t>>>=0),s=Math.min(a,r),c=this.slice(o,i),d=e.slice(t,n),u=0;u<s;++u)if(c[u]!==d[u]){a=c[u],r=d[u];break}return a<r?-1:r<a?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},l.prototype.write=function(e,t,n,o){if(void 0===t)o="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)o=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===o&&(o="utf8")):(o=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var a=!1;;)switch(o){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return C(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(e,t,n){var o="";n=Math.min(e.length,n);for(var i=t;i<n;++i)o+=String.fromCharCode(127&e[i]);return o}function G(e,t,n){var o="";n=Math.min(e.length,n);for(var i=t;i<n;++i)o+=String.fromCharCode(e[i]);return o}function P(e,t,n){var o=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>o)&&(n=o);for(var i="",a=t;a<n;++a)i+=B(e[a]);return i}function D(e,t,n){for(var o=e.slice(t,n),i="",a=0;a<o.length;a+=2)i+=String.fromCharCode(o[a]+256*o[a+1]);return i}function L(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,n,o,i,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+o>e.length)throw new RangeError("Index out of range")}function k(e,t,n,o){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(o?i:1-i))>>>8*(o?i:1-i)}function O(e,t,n,o){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(o?i:3-i)&255}function F(e,t,n,o,i,a){if(n+o>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,o,a){return a||F(e,0,n,4),i.write(e,t,n,o,23,4),n+4}function M(e,t,n,o,a){return a||F(e,0,n,8),i.write(e,t,n,o,52,8),n+8}l.prototype.slice=function(e,t){var n,o=this.length;if((e=~~e)<0?(e+=o)<0&&(e=0):e>o&&(e=o),(t=void 0===t?o:~~t)<0?(t+=o)<0&&(t=0):t>o&&(t=o),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var i=t-e;n=new l(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var o=this[e],i=1,a=0;++a<t&&(i*=256);)o+=this[e+a]*i;return o},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var o=this[e+--t],i=1;t>0&&(i*=256);)o+=this[e+--t]*i;return o},l.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var o=this[e],i=1,a=0;++a<t&&(i*=256);)o+=this[e+a]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var o=t,i=1,a=this[e+--o];o>0&&(i*=256);)a+=this[e+--o]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,o){(e=+e,t|=0,n|=0,o)||I(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,o){(e=+e,t|=0,n|=0,o)||I(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):k(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):k(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):O(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):O(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,o){if(e=+e,t|=0,!o){var i=Math.pow(2,8*n-1);I(this,e,t,n,i-1,-i)}var a=0,r=1,s=0;for(this[t]=255&e;++a<n&&(r*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/r>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,o){if(e=+e,t|=0,!o){var i=Math.pow(2,8*n-1);I(this,e,t,n,i-1,-i)}var a=n-1,r=1,s=0;for(this[t+a]=255&e;--a>=0&&(r*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/r>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):k(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):k(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):O(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):O(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return M(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return M(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,o){if(n||(n=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-n&&(o=e.length-t+n);var i,a=o-n;if(this===e&&n<t&&t<o)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},l.prototype.fill=function(e,t,n,o){if("string"==typeof e){if("string"==typeof t?(o=t,t=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!l.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var r=l.isBuffer(e)?e:U(new l(e,o).toString()),s=r.length;for(a=0;a<n-t;++a)this[a+t]=r[a%s]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var n;t=t||1/0;for(var o=e.length,i=null,a=[],r=0;r<o;++r){if((n=e.charCodeAt(r))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(r+1===o){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function $(e){return o.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,n,o){for(var i=0;i<o&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(101))},function(e,t,n){"use strict";var o=n(48),i=n(35),a=n(380),r=n(163),s=n(172),l=n(280),c=n(58),d=n(383),u=Object.getOwnPropertyDescriptor;t.f=o?u:function(e,t){if(e=s(e),t=l(t),d)try{return u(e,t)}catch(e){}if(c(e,t))return r(!i(a.f,e,t),e[t])}},function(e,t,n){"use strict";var o=n(108),i=n(25);e.exports=function(e){if("Function"===o(e))return i(e)}},,function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},,,,,,function(e,t,n){"use strict";const o={IS_LOCALHOST:"localhost"===window.location.hostname,IS_RC:!1,IS_BETA:!1,IS_TRUNK:!1,IS_PRODUCTION:!0,IS_LTS:!1,IS_WEB_WORKER:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope};e.exports=o},,function(e,t,n){var o,i,a,r,s,l,c,d;e.exports=(d=n(47),n(520),n(521),i=(o=d).lib,a=i.Base,r=i.WordArray,s=o.algo,l=s.MD5,c=s.EvpKDF=a.extend({cfg:a.extend({keySize:4,hasher:l,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,o=n.hasher.create(),i=r.create(),a=i.words,s=n.keySize,l=n.iterations;a.length<s;){c&&o.update(c);var c=o.update(e).finalize(t);o.reset();for(var d=1;d<l;d++)c=o.finalize(c),o.reset();i.concat(c)}return i.sigBytes=4*s,i}}),o.EvpKDF=function(e,t,n){return c.create(n).compute(e,t)},d.EvpKDF)},,,function(e,t,n){"use strict";var o=n(14);n(7);var i=n(1),a=n(9),r=o(n(1068)),s=n(155),l=n(205),c=n(8),d=n(39);function u(){}u.Directory=function(e){this._storage=e},u.Directory.prototype._storage=null,u.Directory.prototype.getStorage=function(){return this._storage},u.Directory.prototype.getUniqueId=function(){return null},u.Directory.prototype.addDirectory=async function(e,t){throw new Error("Not implemented.")},u.Directory.prototype.addFile=async function(e,t){throw new Error("Not implemented.")},u.Item=function(e){this._storage=e},i.GObject.inherit(u.Item,i.GObject),u.Item.prototype._storage=null,u.Item.prototype._fileFormatVersion=null,u.Item.prototype.isRegistrable=function(){return!1},u.Item.prototype.release=function(){this._data&&(this._data=null)},u.Item.prototype.getStorage=function(){return this._storage},u.Item.prototype.getUniqueId=function(){return null},u.Item.prototype.getVersionId=function(){return null},u.Item.prototype.getFile=function(){return null},u.Item.prototype.getId=function(){return null},u.Item.prototype.getFullName=function(){throw new Error("Not implemented.")},u.Item.prototype.setFileName=function(e){throw new Error("Not implemented.")},u.Item.prototype.getName=function(){var e=this.getFullName();if(e){var t=e.lastIndexOf(".");return t>=0?e.substr(0,t):e}return null},u.Item.prototype.getExtension=function(){var e=this.getFullName();if(e){var t=e.lastIndexOf(".");if(t>=0)return e.substr(t+1).toUpperCase()}return null},u.Item.prototype.storeFileFormatVersion=async function(e){this._fileFormatVersion=e},u.Item.prototype.getFileFormatVersion=function(){return this._fileFormatVersion},u.Item.prototype.read=function(e,t,n){throw new Error("Not implemented.")},u.Item.prototype.write=function(e,t,n,o,i){throw new Error("Not implemented.")},u.Item.prototype.createOrUpdateFileWithMetadata=async function(e,t){throw new Error("Not implemented")},u.Item.prototype.getToken=function(){throw new Error("Not implemented")},u.Item.prototype.supportsShadowFile=function(){return!1},u.Item.prototype.isEditingEnabled=function(){return!0},u.Item.prototype.supportsSharing=function(){return!1},u.Item.prototype.hasVersionControl=function(){return!1},u.Item.prototype.supportsExternalSharing=function(){return!1},u.Item.prototype.supportsExternalSharingByLink=function(){return!1},u.Item.prototype.getPermissionsList=function(){},u.Item.prototype._fileSizeBeforeSaved=0,u.Item.prototype._fileSizeAfterSaved=0,u.Item.prototype.documentRealFileSize=0,u.Item.prototype._fileLastModifiedDate=null,u.Item.prototype._fileAutoSaveLastModifiedDate=null,u.Item.prototype._isSaveCounterMeasureEnabled=!1,u.Item.prototype.getFileSizeBeforeSaved=function(){return this._fileSizeBeforeSaved},u.Item.prototype._setFileSizeBeforeSaved=function(e){this._fileSizeBeforeSaved=e},u.Item.prototype.getFileLastModifiedDate=function(){return this._fileLastModifiedDate},u.Item.prototype.setFileLastModifiedDate=function(e){this._fileLastModifiedDate=e},u.Item.prototype.getFileAutoSaveLastModifiedDate=function(){return this._fileAutoSaveLastModifiedDate},u.Item.prototype.setFileAutoSaveLastModifiedDate=function(e){this._fileAutoSaveLastModifiedDate=e},u.Item.prototype._setFileSizeAfterSaved=async function(){throw new Error("Not implemented")},u.Item.prototype.getFileSizeAfterSaved=function(){return this._fileSizeAfterSaved},u.Item.prototype.isSaveCounterMeasureEnabled=function(){return this._isSaveCounterMeasureEnabled},u.Item.prototype.setSaveCounterMeasureEnabled=function(e){this._isSaveCounterMeasureEnabled=e},u.Item.prototype._verifyFileNotTooSmall=function(e,t){try{e<a.UN_BELIVEVABLE_FEW_BYTES_TO_SAVE&&!this.isSaveCounterMeasureEnabled()&&new l(c.get(new d("GDocument","text.saveing-error"))).open(),this.getDocumentRealSizeAfterSave(t)}catch(e){console.error(e)}},u.Item.prototype._verifyFileSizeAfterSaved=function(){try{(()=>!(this.getFileSizeBeforeSaved()<this.getFileSizeAfterSaved())&&this.getFileSizeBeforeSaved()/2>this.getFileSizeAfterSaved())()&&this.getFileSizeAfterSaved()&&this.getFileSizeAfterSaved()>0&&new l(c.get(new d("GDocument","text.saveing-error"))).open()}catch(e){console.error(e)}},u.Item.prototype.notEnoughDiskSpace=function(){new l(c.get(new d("GDocument","text.save-no-space"))).open()},u.Item.prototype.getDocumentRealSizeAfterSave=function(e){let t=null;e=e||gDesigner.getActiveDocument();try{t=i.GNode.serialize(e.getScene(),{save:!0,singleton:!1})}catch(e){return console.error(e),this.documentRealFileSize=0,this.documentRealFileSize}return null===t||""===t?(this.documentRealFileSize=0,this.documentRealFileSize):(this.documentRealFileSize=s.gzip(t,{level:9}).length,this.documentRealFileSize)},u.Item.prototype.hasUpdates=async function(){throw Error("Not implemented!")},u.prototype.canChooseDirectory=function(){return!1},u.prototype.canPromptOpen=function(){return!1},u.prototype.canPromptSave=function(){return!1},u.prototype.canSave=function(){return!1},u.prototype.canDownload=function(){return!1},u.prototype.chooseDirectory=function(e,t){throw new Error("Not implemented.")},u.prototype.openPrompt=function(e,t,n,o){throw new Error("Not implemented.")},u.prototype.savePrompt=function(e,t,n,o){throw new Error("Not implemented.")},u.prototype.download=function(e,t){throw new Error("Not implemented.")},u.prototype.storeLastDirectory=function(e){gDesigner.setSetting("lastDirectory",e)},u.prototype.getLastDirectory=function(){var e=i.GSystem.operatingSystem===i.GSystem.OperatingSystem.Windows?"\\":"/";if(gDesigner.getSetting("lastDirectory"))return gDesigner.getSetting("lastDirectory");if(gDesigner.getActiveDocument()&&gDesigner.getActiveDocument().getStorageItem()){let t=gDesigner.getActiveDocument().getStorageItem().getUniqueId();return t.substring(0,t.lastIndexOf(e))}for(var t=0;t<gDesigner.getDocuments().length;++t)if(gDesigner.getDocuments()[t].getStorageItem()){let n=gDesigner.getDocuments()[t].getStorageItem().getUniqueId();return n.substring(0,n.lastIndexOf(e))}return""},u.prototype.getPlugins=function(){return[]},u.prototype.getPluginPath=function(e){return null},u.prototype.getPluginSrc=function(e){return null},u.prototype.getWritePermission=async function(e){return new r.default(!0)},e.exports=u},function(e,t,n){"use strict";n(3);var o=n(1),i=n(34),a=n(1133),r=n(429),s=n(325),l=n(1134),c=n(783),d=n(27);function u(e,t){this._parent=e,this._htmlElement=$("<ul></ul>").addClass("g-menu"),this._htmlElement.on("mouseover",this._mouseOver.bind(this)),this._htmlElement.on("mouseout",this._mouseOut.bind(this));const n=e=>{e.cancelable||(e.stopImmediatePropagation(),"touchmove"===e.type&&this.closeMenus(!0))},o=!!(0,i.isPassiveSupported)()&&{capture:!1,passive:!0};this._htmlElement[0].addEventListener("touchstart",n,o),this._htmlElement[0].addEventListener("touchmove",n,o),this._htmlElement[0].addEventListener("touchend",n,o),t&&this._htmlElement.addClass(t)}o.GObject.inherit(u,o.GEventTarget),u.prototype._parent=null,u.prototype._htmlElement=null,u.prototype._items=null,u.prototype._hovered=!1,u.prototype._tooltipType=null,u.prototype._rangeLeftX=null,u.prototype._rangeLeftY=null,u.prototype._rangeRightX=null,u.prototype._rangeRightY=null,u.prototype.getParent=function(){return this._parent},u.prototype.setTooltipType=function(e){if(e&&"string"==typeof e)return this._tooltipType=e,this},u.prototype.isHovered=function(e){if(this._hovered)return!0;if(e){for(var t=0;t<this.getItemCount();++t){var n=this.getItem(t);if(n instanceof s&&n.getType()===s.Type.Menu&&n.getMenu().isHovered(!0))return!0}return!1}return!1},u.prototype.createMenuItem=function(e){return e?new s(s.Type.Menu,u):new s},u.prototype.createDivider=function(){return new s(s.Type.Divider)},u.prototype.setActiveItem=function(e){let t=this.getActiveItem();t&&t.changeActiveState(!1),e.changeActiveState(!0)},u.prototype.getActiveItem=function(){let e=null;for(let n=0;n<this._items.length;n++){var t=this._items[n];if(t.isActive()){e=t;break}}return e},u.prototype.isRootMenu=function(){return!(this._parent&&this._parent instanceof s)},u.prototype.isSubMenu=function(){return!!(this._parent&&this._parent instanceof s)&&!this._parent.isRootItem()},u.prototype.createAddDivider=function(){return this.createInsertDivider(this.getItemCount())},u.prototype.createInsertDivider=function(e){var t=new s(s.Type.Divider);return this.insertItem(e,t),t},u.prototype.createAddItem=function(e,t,n,o,i){return this.createInsertItem(this.getItemCount(),e,t,n,o,i)},u.prototype.createInsertItem=function(e,t,n,o,i,a){var r=new s(null,null,a);return t instanceof d?r.setAction(t,this._tooltipType):(r.setCaption(t),n&&r.addEventListener(s.ActivateEvent,n),o&&r.addEventListener(s.EnterEvent,o),i&&r.addEventListener(s.LeaveEvent,i)),this.insertItem(e,r),r},u.prototype.addItem=function(e){return this.insertItem(this.getItemCount(),e)},u.prototype.insertItem=function(e,t){null==this._items&&(this._items=[]),e+1<this._items.length?(this._items.splice(e,0,t),this._items[e+1]._htmlElement.before(t._htmlElement)):(this._items.push(t),this._htmlElement.append(t._htmlElement)),t._parent=this},u.prototype.removeItem=function(e){e>=0&&e<this.getItemCount()&&(this._items[e]._parent=null,this._items[e]._htmlElement.detach(),this._items.splice(e,1))},u.prototype.clearItems=function(){if(this._items){for(var e=0;e<this._items.length;++e)this._items[e]._parent=null,this._items[e]._htmlElement.detach();this._items=[]}},u.prototype.getItem=function(e){return e>=0&&e<this.getItemCount()?this._items[e]:null},u.prototype.getItemCount=function(){return this._items?this._items.length:0},u.prototype.indexOf=function(e){return this._items?this._items.indexOf(e):-1},u.prototype.findItem=function(e){for(var t=0;t<this.getItemCount();++t){var n=this.getItem(t);if(e==n.getCaption())return n}return null},u.prototype.update=function(){for(var e=0;e<this.getItemCount();++e){this.getItem(e).update()}},u.prototype.isOpen=function(){return!!this._htmlElement.parent().length},u.prototype.open=function(e,t,n,o){t="number"==typeof t?t:r.Position.Center,n="number"==typeof n?n:r.Position.Center;const i=e&&"number"==typeof e.x&&"number"==typeof e.y,a=this._htmlElement.hasClass("g-touch"),s=!i&&$(e).hasClass("g-menu-button");if(this._htmlElement.toggleClass("g-menu-button",!!s),this.isOpen()||(this.update(),this._htmlElement.appendTo($("body")),this.isSubMenu()||l.setActiveMenu(this,!1,o),this.trigger(c.EVENT)),this._htmlElement.parent().is("body")){var d=this._htmlElement.outerWidth(),u=this._htmlElement.outerHeight(),p=$(window).width(),g=$(window).height(),h={x:0,y:0,width:0,height:0};if(i)h.x=e.x,h.y=e.y;else{var f=$(e),m=f.offset();h.x=m.left,h.y=m.top,h.width=f.outerWidth(),h.height=f.outerHeight()}var y=0;switch(t){case r.Position.Left_Top:(y=h.x-d)<0&&(y=h.x+h.width);break;case r.Position.Center:y=h.x;break;case r.Position.Right_Bottom:(y=h.x+h.width)+d>p&&(y=h.x-d)}var v=0;switch(n){case r.Position.Left_Top:(v=h.y-u)<0&&(v=h.y+h.height);break;case r.Position.Center:v=h.y;break;case r.Position.Right_Bottom:(v=h.y+h.height)+u>g&&(v=h.y-u)}const o=this._rangeLeftX?this._rangeLeftX:0;y<o&&(y=o);const l=this._rangeRightX?this._rangeRightX:p;y+d>=l&&(y=l-d);const c=this._rangeLeftY?this._rangeLeftY:0;v<c&&(v=c);const _=this._rangeRightY?this._rangeRightY:g;if(v+u>=_&&(v=_-u),this._htmlElement.find(".g-menu-arrow").remove(),a&&s){const e=$("<div/>").addClass("g-menu-arrow").prependTo(this._htmlElement);let t=h.width/2-14;t<0&&(y-14>0?(y-=14,t+=14):e.remove()),e.css("left","".concat(t,"px"))}switch(this._htmlElement.css("left",y),this._htmlElement.css("top",v),t){case r.Position.Left_Top:this._htmlElement.addClass("g-menu-left");break;case r.Position.Right_Bottom:this._htmlElement.addClass("g-menu-right")}switch(n){case r.Position.Left_Top:this._htmlElement.addClass("g-menu-top");break;case r.Position.Right_Bottom:this._htmlElement.addClass("g-menu-bottom")}}},u.prototype.close=function(){this.isOpen()&&this._htmlElement.parent().is("body")&&(this.closeMenus(!0),this._htmlElement.removeClass("g-menu-left g-menu-right g-menu-top g-menu-bottom"),this._htmlElement.detach(),this===l._activeMenu&&l.setActiveMenu(null,!0),this.trigger(a.EVENT))},u.prototype.setTouchMode=function(e){this._htmlElement.toggleClass("g-touch",!!e)},u.prototype.closeMenus=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var t=0;t<this.getItemCount();++t){var n=this.getItem(t);n instanceof s&&n.getType()===s.Type.Menu&&(!n.isForcedAsOpened()||e)&&n.getMenu().close()}},u.prototype._mouseOver=function(e){this._hovered=!0},u.prototype._mouseOut=function(e){this._hovered=!1,this.isSubMenu()&&setTimeout(function(){this.isHovered(!0)||this.closeMenus()}.bind(this),150)},u.prototype.getHtmlElement=function(){return this._htmlElement},u.prototype.detach=function(){this.closeMenus(!0),this._htmlElement.find(".g-hover").removeClass("g-hover"),this._htmlElement.removeClass("g-menu-root"),this._htmlElement.detach(),this._parent=null},u.prototype.addClass=function(e){this._htmlElement.addClass(e)},u.prototype.setActiveRangeSize=function(e,t,n,o){this._rangeLeftX=e,this._rangeLeftY=t,this._rangeRightX=this._rangeLeftX+o,this._rangeRightY=this._rangeLeftY+n},u.prototype.toString=function(){return"[Object GMenu]"},u.prototype.setEnabled=function(e){["file","edit","modify","view"].forEach(t=>{$('.g-menu-item-menu:contains("'.concat(o.GLocale.get(new o.GLocaleKey("GCategory","category.".concat(t))),'")'))[e?"removeClass":"addClass"]("g-disabled")[e?"on":"off"]("click")})},e.exports=u},function(e,t,n){"use strict";var o=n(20);e.exports=!o((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},function(e,t,n){"use strict";var o=n(25),i=n(20),a=n(108),r=Object,s=o("".split);e.exports=i((function(){return!r("z").propertyIsEnumerable(0)}))?function(e){return"String"===a(e)?s(e,""):r(e)}:r},function(e,t,n){"use strict";var o=n(113),i=n(31),a=n(133),r=n(382),s=Object;e.exports=r?function(e){return"symbol"==typeof e}:function(e){var t=o("Symbol");return i(t)&&a(t.prototype,s(e))}},function(e,t,n){"use strict";var o=n(23),i=n(55),a=o.document,r=i(a)&&i(a.createElement);e.exports=function(e){return r?a.createElement(e):{}}},function(e,t,n){"use strict";var o=n(386),i=n(288).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,i)}},function(e,t,n){"use strict";var o=n(224),i=Function.prototype,a=i.apply,r=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(o?r.bind(a):function(){return r.apply(a,arguments)})},function(e,t,n){"use strict";var o=n(35),i=n(92),a=n(49),r=n(173),s=n(191),l=TypeError;e.exports=function(e,t){var n=arguments.length<2?s(e):t;if(i(n))return a(o(n,e));throw new l(r(e)+" is not iterable")}},function(e,t,n){"use strict";var o=n(35),i=n(25),a=n(263),r=n(49),s=n(112),l=n(98),c=n(244),d=n(295),u=n(109),p=n(56),g=n(152),h=n(264),f=n(329),m=n(20),y=f.UNSUPPORTED_Y,v=Math.min,_=i([].push),b=i("".slice),w=!m((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),C="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length;a("split",(function(e,t,n){var i="0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:o(t,this,e,n)}:t;return[function(t,n){var a=l(this),r=s(t)?void 0:g(t,e);return r?o(r,t,a,n):o(i,p(a),t,n)},function(e,o){var a=r(this),s=p(e);if(!C){var l=n(i,a,s,o,i!==t);if(l.done)return l.value}var g=c(a,RegExp),f=a.unicode,m=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(y?"g":"y"),w=new g(y?"^(?:"+a.source+")":a,m),x=void 0===o?4294967295:o>>>0;if(0===x)return[];if(0===s.length)return null===h(w,s)?[s]:[];for(var S=0,E=0,A=[];E<s.length;){w.lastIndex=y?0:E;var T,G=h(w,y?b(s,E):s);if(null===G||(T=v(u(w.lastIndex+(y?E:0)),s.length))===S)E=d(s,E,f);else{if(_(A,b(s,S,E)),A.length===x)return A;for(var P=1;P<=G.length-1;P++)if(_(A,G[P]),A.length===x)return A;E=S=T}}return _(A,b(s,S)),A}]}),C||!w,y)},function(e,t,n){"use strict";e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},,function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],o=t[1];return 3*(n+o)/4-o},t.toByteArray=function(e){var t,n,o=c(e),r=o[0],s=o[1],l=new a(function(e,t,n){return 3*(t+n)/4-n}(0,r,s)),d=0,u=s>0?r-4:r;for(n=0;n<u;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],l[d++]=t>>16&255,l[d++]=t>>8&255,l[d++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,l[d++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,l[d++]=t>>8&255,l[d++]=255&t);return l},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],r=0,s=n-i;r<s;r+=16383)a.push(d(e,r,r+16383>s?s:r+16383));1===i?(t=e[n-1],a.push(o[t>>2]+o[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(o[t>>10]+o[t>>4&63]+o[t<<2&63]+"="));return a.join("")};for(var o=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=r.length;s<l;++s)o[s]=r[s],i[r.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function d(e,t,n){for(var i,a,r=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),r.push(o[(a=i)>>18&63]+o[a>>12&63]+o[a>>6&63]+o[63&a]);return r.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t,n){"use strict";var o=n(58),i=n(31),a=n(86),r=n(286),s=n(649),l=r("IE_PROTO"),c=Object,d=c.prototype;e.exports=s?c.getPrototypeOf:function(e){var t=a(e);if(o(t,l))return t[l];var n=t.constructor;return i(n)&&t instanceof n?n.prototype:t instanceof c?d:null}},,,function(e,t,n){"use strict";n(314),n(18),n(29);var o=n(1),i=n(820),a=n(203),r=n(78);const s=n(365),l=n(239),c=n(277);var d=[],u=function(){};function p(){if(p._instance)throw new Error("FontsProviderManager can be instantiated only once.");p._instance=this}function g(e){var t=gDesigner.getActiveDocument(),n=function n(o){var s=p.getInstance();if(o)switch(o.status){case r.Saved:case r.SyncFailed:case r.Ready:case r.SaveFailed:s.removeEventListener(a,n),delete s._listenerFor[t.sessionId];break;case r.LoadFailed:s.removeEventListener(a,n),delete s._listenerFor[t.sessionId];default:return}if(!((t.getScene().getProperty("cst")||[]).indexOf(e.family)>=0)){var l=[e.family],c=d.filter((function(e){return!e.isInitialized()&&e.hasEnabler()})).map((function(e){return e.getEnabler()}));!function(e,t){var n=p.getInstance();n._missingFontsActions||(n._missingFontsActions={});n._missingFontsActions[t.sessionId]||(n._missingFontsActions[t.sessionId]={});for(var o=n._missingFontsActions[t.sessionId],i=e.length-1;i>=0;i--){var a=e[i];o.hasOwnProperty(a)?e.splice(i,1):o[a]=null}}(l,t),l.length&&(s._missingFontsDialog?(s._missingFontsDialog.setProviderEnablers(c),s._missingFontsDialog.setMissingFonts(l)):l.length&&(s._missingFontsDialog=new i(t,l,c,e=>{s._missingFontsDialog=null,s.keepFontsMessage=null;var n=s._missingFontsActions[t.sessionId];for(var o in e)n[o]=e[o]})),e.tryToResolveMissingFont&&s._showMissingFontsDialog&&!s._missingFontsDialog.opened&&s._missingFontsDialog.open(s.keepFontsMessage),s._firstCallback=u)}};if(t&&t.getStatus()===r.Ready)n();else{var o=p.getInstance();t&&!o._listenerFor[t.sessionId]&&(o._listenerFor[t.sessionId]=n,o.addEventListener(a,n))}}o.GObject.inherit(p,o.GEventTarget),p.ResetEvent=function(e){this.manager=e},o.GObject.inherit(p.ResetEvent,o.GEvent),p.MissingFontEvent=function(e,t,n){this.manager=e,this.evt=t,this.provider=n},o.GObject.inherit(p.MissingFontEvent,o.GEvent),p.prototype.manager=null,p.prototype._resetProviders=null,p.prototype.init=function(){gDesigner.addEventListener(c,this._networkAvailabilityChangedEvent,this)},p.prototype._networkAvailabilityChangedEvent=function(e){if(this._resetProviders&&this._resetProviders.length&&e.connected)for(;this._resetProviders.length;)this.reset(this._resetProviders.shift(),!0)},p.registerProvider=function(e){var t=new e(p._instance);d.indexOf(t)<0&&d.push(t)},p.unregisterProvider=function(e){for(var t=0;t<d.length;t++)d[t]instanceof e&&d.splice(t--,1)},p.getInstance=function(){return p._instance||new p},p.getInstance(),p.getProvider=function(e){return v[e]||null},p.getProviders=function(){return d.slice()},p.getProviderInstance=function(e){if(p._instance)for(var t=0;t<d.length;t++)if(d[t]instanceof e)return d[t];return null},p.disableProviders=function(e){if(p._instance){for(var t=0;t<e.length;t++)for(var n=e[t],o=0;o<d.length;o++)d[o]instanceof n?d[o].setEnabled(!1):d[o].setEnabled(!0);p._instance.reset(null,!1,!0)}},p.enableProviders=function(e,t){if(p._instance){for(var n=0;n<e.length;n++)for(var o=e[n],i=0;i<d.length;i++)d[i]instanceof o?d[i].setEnabled(!0):t||d[i].setEnabled(!1);t||p._instance.reset(null,!1,!0)}},p.resolveQueryFontFamily=function(e){var t=p.getInstance(),n=()=>{var n=t.searchFamilyInCache(e.family);e.callback(n&&n.fonts&&n.fonts.length?n.fonts:[])};t.isCacheEmpty()?t.query(n,"%",!0):n()},p._triggerMissingFont=function(e,t){var n=p.getInstance();n.hasEventListeners(p.MissingFontEvent)&&n.trigger(new p.MissingFontEvent(n,e,t))},p.resolveFont=function(e,t){var n;e&&void 0===t?(n=p.getProvider(e.family))?n.resolveFont(e.family,e.style,e.weight,{done:function(t){var n;e.sender instanceof o.GFontManager&&(n=e.sender._getFont(e.family,e.style,e.weight)),n&&n.isResolved()||(n=o.GOpenTypeFont.create(e.family,e.style,e.weight,t)),n&&e.resolved(n)},fail:function(t){t&&t===s.Errors.ConnectionError?gDesigner.isOffline()&&l.openUnavailableFeature(()=>p.resolveFont(e)):(e.failed(),p._triggerMissingFont(e,n),g(e))}}):p.resolveFont(e,0):"number"==typeof t&&((n=d[t])?n.resolveFont(e.family,e.style,e.weight,{done:function(n){var i;e.sender instanceof o.GFontManager&&(i=e.sender._getFont(e.family,e.style,e.weight)),i&&i.isResolved()||(i=o.GOpenTypeFont.create(e.family,e.style,e.weight,n)),i?e.resolved(i):p.resolveFont(e,t+1)},fail:function(){p.resolveFont(e,t+1)}}):d&&t===d.length?(e.failed(),p._triggerMissingFont(e,n),g(e)):p.resolveFont(e,t+1))},p.prototype._lock=null,p.prototype._loaded=0,p.prototype._lastLoaded=0,p.prototype._loadedPreviews=0,p.prototype._lastLoadedPreviews=0,p.prototype._loading=!1,p.prototype._timeStamp=0,p.prototype._firstCallback=null,p.prototype._missingFontsDialog=null,p.prototype._missingFontsActions=null,p.prototype._showMissingFontsDialog=!0,p.prototype._listenerFor={},p.prototype.getMissingFontsDialog=function(){return this._missingFontsDialog},p.prototype.keepFontsMessage=null;var h={},f=[],m={},y=[],v={};p.prototype.isLoading=function(){return this._loading},p.prototype.releaseDocumentListener=function(e){this._listenerFor[e.sessionId]&&this.removeEventListener(a,this._listenerFor[e.sessionId])},p.prototype.setShowMissingFontsDialog=function(e){this._showMissingFontsDialog=e},p.prototype.resetMissingFontsDialog=function(){this._missingFontsDialog=null},p.prototype._providerProbe=function(e,t,n,o,i,a,r,l,c,u){for(var p,g,_,b=this,w=l?20:9999;d[e]&&!c&&!d[e].isEnabled();)e++;if(l?(p=this._loadedPreviews,g=this._lastLoadedPreviews):(p=this._loaded,g=this._lastLoaded),e>=d.length)return this._loading=!1,this._timeStamp=o,void(l?this._loadedPreviews=this._lastLoadedPreviews:(this._loaded=this._lastLoaded,r&&i.length&&(!c&&this.hasDisabled()||(m[n]={faces:i.slice(),total:a},y.unshift(n)>30&&delete m[y.pop()]),c||(h[n]={faces:i,total:a},f.unshift(n)>30&&delete h[f.pop()])),t({faces:i,total:a}),c||this._providerProbe(0,t,n,o,[],0,r,!0,c,u)));var C,x=p+(p<9999?9999:w),S=0;if(0===e&&!r){var E=0;for(e=0;e<d.length;e++)if((c||d[e].isEnabled())&&(E+=d[e].getTotalFonts(this.normalizeQuery(n)))>p){S=p-E+d[e].getTotalFonts(this.normalizeQuery(n));break}}(!n||"%"===n)&&g<a||e>=d.length?this._providerProbe(d.length,t,n,o,i,a,r,l,c,u):(C=x-g,(_=d[e]).load(this.normalizeQuery(n),S,C,{done:function(s,u,p){if(o<this._timeStamp)console.log("discarded");else{(d.indexOf(_)<0||!c&&!d[e].isEnabled())&&this._providerProbe(e+1,t,n,o,i,a,r,l,c);for(var g=0;g<s.length;g++)v.hasOwnProperty(s[g].family)||(v[s[g].family]=_);if(!l){var f=h[this.normalizeQuery(n)]||{faces:[]};if(i!==f.faces||c){for(g=0;g<i.length;g++){if((y=d.indexOf(v[i[g].family]))>e&&d[y].isEnabled()){Array.prototype.splice.apply(i,[g,0].concat(s));break}}if(g==i.length&&Array.prototype.push.apply(i,s),!c){var m=f.faces;for(g=0;g<m.length;g++){if((y=d.indexOf(v[m[g].family]))>e&&d[y].isEnabled()){Array.prototype.splice.apply(m,[g,0].concat(s));break}}g==m.length&&Array.prototype.push.apply(m,s)}}else{for(var g=0;g<i.length;g++){var y;if((y=d.indexOf(v[i[g].family]))>e&&d[y].isEnabled()){Array.prototype.splice.apply(f.faces,[g,0].concat(s));break}}g==i.length&&Array.prototype.push.apply(i,s)}}_.addPreviews(s,l),a+=_.getTotalFonts(this.normalizeQuery(n)),r&&0===e&&(l?this._loadedPreviews=0:this._loaded=0),l?this._lastLoadedPreviews+=s.length:this._lastLoaded+=s.length,i.sort((e,t)=>e.family.localeCompare(t.family)),this._providerProbe(e+1,t,n,o,i,a,r,l,c)}}.bind(b),fail:function(d){u||d&&d===s.Errors.ConnectionError&&(b._resetProviders||(b._resetProviders=[]),b._resetProviders.push(_.constructor)),b._providerProbe(e+1,t,n,o,i,a,r,l,c)}.bind(b)},u))},p.prototype.setLock=function(){this._lock&&clearTimeout(this._lock),this._lock=setTimeout(function(){this._lock=null}.bind(this),1e4)},p.prototype.getLock=function(){return!!this._lock},p.prototype.reset=function(e,t,n){if(e)for(var o=0;o<d.length;o++)d[o]instanceof e&&(t||d[o].isEnabled())&&d[o].resetProvider();this._lock&&(clearTimeout(this._lock),this._lock=null),this._loaded=0,this._lastLoaded=0,this._loadedPreviews=0,this._lastLoadedPreviews=0,this._loading=!1,this._timeStamp=0,h={},f=[],n||(m={},y=[]),this._firstCallback&&this.query(this._firstCallback,"%"),this._missingFontsDialog&&(this._missingFontsDialog=null),this.hasEventListeners(p.ResetEvent)&&this.trigger(new p.ResetEvent(this))},p.prototype.loadMore=function(e,t){if(!this._loading){if(0===this._loadedPreviews&&0===this._lastLoadedPreviews)this._providerProbe(0,e,t,n,[],0,!1,!0);else if(this._loadedPreviews>=9999&&this._lastLoadedPreviews<this._loadedPreviews+20)if(this._loaded>=9999&&this._lastLoaded<this._loaded+9999){this._loading=!0;var n=(new Date).getTime();this._providerProbe(0,e,t,n,[],0,!1,!1)}else{this._loading=!0;n=(new Date).getTime();this._providerProbe(0,e,t,n,[],0,!1,!0)}else if(this._loaded>=9999&&this._lastLoaded<this._loaded+9999){this._loading=!0;n=(new Date).getTime();this._providerProbe(0,e,t,n,[],0,!1,!1)}return this._lastLoadedPreviews}},p.prototype.query=function(e,t,n){if(t&&(t=t.toLowerCase()),n&&m.hasOwnProperty(t))e(o=m[t]);else if(!n&&h.hasOwnProperty(t)){this._lastLoaded=0,this._lastLoadedPreviews=0;var o=h[t];this._loaded=o.faces.length,this._loadedPreviews=o.faces.length,e(o)}else{if(t.length>2){var i=t.substr(0,t.length-2);for(i=this.normalizeQuery(i);i.length>1;){if(h.hasOwnProperty(i))if((o=h[i]).faces.length<9999||o.faces.length==o.total){for(var a=[],r=0;r<o.faces.length;r++)o.faces[r].family.substr(0,t.length-1).toLowerCase()==t.substr(0,t.length-1).toLowerCase()&&a.push(o.faces[r]);return this._lastLoaded=this._lastLoadedPreviews=0,this._loaded=this._loadedPreviews=a.length,void e({faces:a})}i=i.substr(0,i.length-2),i=this.normalizeQuery(i)}}var s=(new Date).getTime();this._loading=!0,this._loaded=this._loadedPreviews=0,this._lastLoaded=this._lastLoadedPreviews=0,this._providerProbe(0,e,t,s,[],0,!0,!1,n)}},p.prototype.normalizeQuery=function(e){return"%"!=e&&(e?e+="%":e="%",e=e.replace(/%+$/,"%")),e},p.prototype.isCacheEmpty=function(){return!m||!m.hasOwnProperty("%")},p.prototype.hasDisabled=function(){return d.some(e=>!e.isEnabled())},p.prototype.searchFamilyInCache=function(e){var t=e.toLowerCase()+("%"==e?"":"%");if(this.isCacheEmpty())return null;for(;t.length>0;){if(m.hasOwnProperty(t)){var n=m[t];if(n.faces)for(var o=0;o<n.faces.length;o++){var i=n.faces[o];if(i.family===e)return i;if(i.families&&i.families.indexOf(e)>=0)return i}}if(1===t.length)break;t=t.substr(0,t.length-2),t=this.normalizeQuery(t)}return null},e.exports=p},function(e,t,n){"use strict";n(7),n(18),n(3),n(29);var o=n(1),i=n(13),a=n(34),r=n(9),s=n(342);function l(e,t,n){const a=e=>{if(i.GKey.translateKey(e.keyCode)===i.GKey.Constant.ESC)return e.preventDefault(),e.stopPropagation(),$(document).off("keydown",a),this._dialog.gDialog("close"),!1};this._dialog=$("<div></div>").gDialog({releaseOnClose:!0,className:"g-offline-dialog",alwaysCloseable:!0,closeCallback:()=>$(document).off("keydown",a)}),$(document).on("keydown",a),$("<div></div>").addClass("g-btn-close").append($("<span></span>").addClass("gravit-icon-close")).on("click",this.close.bind(this)).appendTo(this._dialog),$("<div></div>").addClass("logo").appendTo(this._dialog);const l=$("<div></div>").addClass("content").append($("<span></span>").addClass("title").html(e)).append($("<span></span>").addClass("subtitle").html(t)).append($("<div></div>").addClass("buttons").append(n.map(e=>{let{label:t,onclick:n,highlighted:o}=e;return $("<button></button>").append($("<span></span>").text(t)).addClass("g-pro-button "+(o?"highlighted":"")).on("click",()=>n(this))})));s.OFFLINEDIALOG.HAS_FOOTER&&l.append($("<span></span>").addClass("footer").html(o.GLocale.getValue("GOfflineDialog","text.offline-footer").replace("%link",r.gApi.link.getSupportUrl()))),l.appendTo(this._dialog)}o.GObject.inherit(l,o.GObject),l.openOfflineWarning=async function(){const e=await gDesigner.getUser();if(!e)return;const t=gDesigner.getLicense(),n=gDesigner.now();let i=r.DateAPI.millisecondsToDays(r.DateAPI.diff(r.DateAPI.toUTCZone(n),t.getOfflineExpirationDate()));new l(o.GLocale.get(new o.GLocaleKey("GOfflineDialog","text.offline-title")).replace("%name",e.getFullUserName()),o.GLocale.get(new o.GLocaleKey("GOfflineDialog","text.offline-subtitle")).replace("%days",i),[{label:o.GLocale.get(new o.GLocaleKey("GOfflineDialog","text.offline-check")),onclick:e=>e.close()}]).open()},l.openUnavailableFeature=function(e){l.openRetryConnection(e,o.GLocale.get(new o.GLocaleKey("GOfflineDialog","title.unavailable-feature")))},l.openRetryConnection=async function(e,t){if($(".g-offline-dialog").length)return;const n=await gDesigner.getUser();new l(t||o.GLocale.get(new o.GLocaleKey("GOfflineDialog","text.offline-title-retry")).replace("%name",n?n.getFullUserName():o.GLocale.get(new o.GLocaleKey("GOfflineDialog","text.display-name-in-case-missing"))),"",[{label:o.GLocale.get(new o.GLocaleKey("GOfflineDialog","text.offline-retry")),highlighted:!0,onclick:async t=>{gDesigner.stats("offline-dialog_retry"),t._dialog.addClass("g-loading"),await(0,a.sleep)(500),t._dialog.removeClass("g-loading"),await gDesigner.isOfflineAsync()||(e&&e(),t.close())}},{label:o.GLocale.get(new o.GLocaleKey("GOfflineDialog","text.offline-cancel")),onclick:e=>{gDesigner.stats("offline-dialog_cancel"),e.close()}}]).open()},l.prototype._dialog=null,l.prototype.open=function(){this._dialog.gDialog("open",!1)},l.prototype.close=function(){this._dialog.gDialog("close")},l.prototype.toString=function(){return"[Object GOfflineDialog]"},e.exports=l},function(e,t,n){"use strict";const o=n(1051);o.icon="",o["cloud-logo"]="assets/img/cloud/cloud_logo_white.svg",o["gravit-icon-cloud-logo"]="gravit-icon-cloud",o["gravit-icon-cloud"]="gravit-icon-gravit-cloud-file",o["gravit-icon-cloud-window"]="gravit-icon-gravit-cloud-file-window",o["gravit-icon-cloud-save-choose"]="gravit-icon-gravit-cloud-file-save-choose",o["gravit-icon-share-copy"]="gravit-icon-share-copy",e.exports=o},function(e,t,n){"use strict";var o=n(25),i=0,a=Math.random(),r=o(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+r(++i+a,36)}},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";var o=n(113),i=n(127),a=n(41),r=n(48),s=a("species");e.exports=function(e){var t=o(e);r&&t&&!t[s]&&i(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var o=n(49),i=n(391),a=n(112),r=n(41)("species");e.exports=function(e,t){var n,s=o(e).constructor;return void 0===s||a(n=o(s)[r])?t:i(n)}},,function(e,t,n){"use strict";var o=n(25),i=n(98),a=n(56),r=n(232),s=o("".replace),l=RegExp("^["+r+"]+"),c=RegExp("(^|[^"+r+"])["+r+"]+$"),d=function(e){return function(t){var n=a(i(t));return 1&e&&(n=s(n,l,"")),2&e&&(n=s(n,c,"$1")),n}};e.exports={start:d(1),end:d(2),trim:d(3)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GRegex=void 0;const{NOTIFICATION_USER_MENTION_REGEX:o}=n(9),i=t.GRegex={String:{InParenthesis:{NotNegativeNumberInTheEnd:/\(\d+\)$/},SpacesLineBreak:/\s/,NotNegativeNumber:/\d+/,MentionInputRtrim:/\s+$/,MentionInputRegexpEncode:/([.*+?^=!:${}()|\[\]\/\\])/g,MentionInputHighlightRegString:"(?![^&;]+;)(?!<[^<>]*)(<%=term%>)(?![^<>]*>)(?![^&;]+;)",USERNAME_RE:o||/@[^\r\n\t\f\v\s,{#%'"*<()>}:`;,!&?$+^\/|=\]\[\\]+/g,EMAIL:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,FileExtension:/\.[0-9a-z]+$/i,MultipleDotsEnd:/\.+$/,InvalidFileName:/(\\|\||\/)/,ValidFileName:/^(?:[\x2D0-9A-Z_a-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDF50-\uDF59\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEC0-\uDED3\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDCD0-\uDCEB\uDCF0-\uDCF9\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])+(?:[ -\.0-9A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/},URLQuery:{NextParameter:/[?&]([^=#]+)=([^&#]*)/g},NavigatorUserAgent:{IS_CHROME_OS:/CrO[S\u017F]/i}};t.default={String:i.String}},,,,,,,,function(e,t,n){"use strict";var o,i=n(30),a=n(209),r=n(208).f,s=n(109),l=n(56),c=n(346),d=n(98),u=n(347),p=n(85),g=a("".slice),h=Math.min,f=u("endsWith");i({target:"String",proto:!0,forced:!!(p||f||(o=r(String.prototype,"endsWith"),!o||o.writable))&&!f},{endsWith:function(e){var t=l(d(this));c(e);var n=arguments.length>1?arguments[1]:void 0,o=t.length,i=void 0===n?o:h(s(n),o),a=l(e);return g(t,i-a.length,i)===a}})},function(e,t,n){var o,i,a;e.exports=(a=n(47),i=(o=a).lib.WordArray,o.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,o=this._map;e.clamp();for(var i=[],a=0;a<n;a+=3)for(var r=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;s<4&&a+.75*s<n;s++)i.push(o.charAt(r>>>6*(3-s)&63));var l=o.charAt(64);if(l)for(;i.length%4;)i.push(l);return i.join("")},parse:function(e){var t=e.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var a=0;a<n.length;a++)o[n.charCodeAt(a)]=a}var r=n.charAt(64);if(r){var s=e.indexOf(r);-1!==s&&(t=s)}return function(e,t,n){for(var o=[],a=0,r=0;r<t;r++)if(r%4){var s=n[e.charCodeAt(r-1)]<<r%4*2,l=n[e.charCodeAt(r)]>>>6-r%4*2;o[a>>>2]|=(s|l)<<24-a%4*8,a++}return i.create(o,a)}(e,t,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},a.enc.Base64)},function(e,t,n){var o;e.exports=(o=n(47),function(e){var t=o,n=t.lib,i=n.WordArray,a=n.Hasher,r=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var l=r.MD5=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var o=t+n,i=e[o];e[o]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var a=this._hash.words,r=e[t+0],l=e[t+1],g=e[t+2],h=e[t+3],f=e[t+4],m=e[t+5],y=e[t+6],v=e[t+7],_=e[t+8],b=e[t+9],w=e[t+10],C=e[t+11],x=e[t+12],S=e[t+13],E=e[t+14],A=e[t+15],T=a[0],G=a[1],P=a[2],D=a[3];T=c(T,G,P,D,r,7,s[0]),D=c(D,T,G,P,l,12,s[1]),P=c(P,D,T,G,g,17,s[2]),G=c(G,P,D,T,h,22,s[3]),T=c(T,G,P,D,f,7,s[4]),D=c(D,T,G,P,m,12,s[5]),P=c(P,D,T,G,y,17,s[6]),G=c(G,P,D,T,v,22,s[7]),T=c(T,G,P,D,_,7,s[8]),D=c(D,T,G,P,b,12,s[9]),P=c(P,D,T,G,w,17,s[10]),G=c(G,P,D,T,C,22,s[11]),T=c(T,G,P,D,x,7,s[12]),D=c(D,T,G,P,S,12,s[13]),P=c(P,D,T,G,E,17,s[14]),T=d(T,G=c(G,P,D,T,A,22,s[15]),P,D,l,5,s[16]),D=d(D,T,G,P,y,9,s[17]),P=d(P,D,T,G,C,14,s[18]),G=d(G,P,D,T,r,20,s[19]),T=d(T,G,P,D,m,5,s[20]),D=d(D,T,G,P,w,9,s[21]),P=d(P,D,T,G,A,14,s[22]),G=d(G,P,D,T,f,20,s[23]),T=d(T,G,P,D,b,5,s[24]),D=d(D,T,G,P,E,9,s[25]),P=d(P,D,T,G,h,14,s[26]),G=d(G,P,D,T,_,20,s[27]),T=d(T,G,P,D,S,5,s[28]),D=d(D,T,G,P,g,9,s[29]),P=d(P,D,T,G,v,14,s[30]),T=u(T,G=d(G,P,D,T,x,20,s[31]),P,D,m,4,s[32]),D=u(D,T,G,P,_,11,s[33]),P=u(P,D,T,G,C,16,s[34]),G=u(G,P,D,T,E,23,s[35]),T=u(T,G,P,D,l,4,s[36]),D=u(D,T,G,P,f,11,s[37]),P=u(P,D,T,G,v,16,s[38]),G=u(G,P,D,T,w,23,s[39]),T=u(T,G,P,D,S,4,s[40]),D=u(D,T,G,P,r,11,s[41]),P=u(P,D,T,G,h,16,s[42]),G=u(G,P,D,T,y,23,s[43]),T=u(T,G,P,D,b,4,s[44]),D=u(D,T,G,P,x,11,s[45]),P=u(P,D,T,G,A,16,s[46]),T=p(T,G=u(G,P,D,T,g,23,s[47]),P,D,r,6,s[48]),D=p(D,T,G,P,v,10,s[49]),P=p(P,D,T,G,E,15,s[50]),G=p(G,P,D,T,m,21,s[51]),T=p(T,G,P,D,x,6,s[52]),D=p(D,T,G,P,h,10,s[53]),P=p(P,D,T,G,w,15,s[54]),G=p(G,P,D,T,l,21,s[55]),T=p(T,G,P,D,_,6,s[56]),D=p(D,T,G,P,A,10,s[57]),P=p(P,D,T,G,y,15,s[58]),G=p(G,P,D,T,S,21,s[59]),T=p(T,G,P,D,f,6,s[60]),D=p(D,T,G,P,C,10,s[61]),P=p(P,D,T,G,g,15,s[62]),G=p(G,P,D,T,b,21,s[63]),a[0]=a[0]+T|0,a[1]=a[1]+G|0,a[2]=a[2]+P|0,a[3]=a[3]+D|0},_doFinalize:function(){var t=this._data,n=t.words,o=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var a=e.floor(o/4294967296),r=o;n[15+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,l=s.words,c=0;c<4;c++){var d=l[c];l[c]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}return s},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,n,o,i,a,r){var s=e+(t&n|~t&o)+i+r;return(s<<a|s>>>32-a)+t}function d(e,t,n,o,i,a,r){var s=e+(t&o|n&~o)+i+r;return(s<<a|s>>>32-a)+t}function u(e,t,n,o,i,a,r){var s=e+(t^n^o)+i+r;return(s<<a|s>>>32-a)+t}function p(e,t,n,o,i,a,r){var s=e+(n^(t|~o))+i+r;return(s<<a|s>>>32-a)+t}t.MD5=a._createHelper(l),t.HmacMD5=a._createHmacHelper(l)}(Math),o.MD5)},,,,function(e,t,n){"use strict";var o=n(20),i=n(31),a=/#|\.prototype\./,r=function(e,t){var n=l[s(e)];return n===d||n!==c&&(i(t)?o(t):!!t)},s=r.normalize=function(e){return String(e).replace(a,".").toLowerCase()},l=r.data={},c=r.NATIVE="N",d=r.POLYFILL="P";e.exports=r},function(e,t,n){"use strict";var o=n(116),i=n(35),a=n(49),r=n(173),s=n(292),l=n(93),c=n(133),d=n(230),u=n(191),p=n(397),g=TypeError,h=function(e,t){this.stopped=e,this.result=t},f=h.prototype;e.exports=function(e,t,n){var m,y,v,_,b,w,C,x=n&&n.that,S=!(!n||!n.AS_ENTRIES),E=!(!n||!n.IS_RECORD),A=!(!n||!n.IS_ITERATOR),T=!(!n||!n.INTERRUPTED),G=o(t,x),P=function(e){return m&&p(m,"normal",e),new h(!0,e)},D=function(e){return S?(a(e),T?G(e[0],e[1],P):G(e[0],e[1])):T?G(e,P):G(e)};if(E)m=e.iterator;else if(A)m=e;else{if(!(y=u(e)))throw new g(r(e)+" is not iterable");if(s(y)){for(v=0,_=l(e);_>v;v++)if((b=D(e[v]))&&c(f,b))return b;return new h(!1)}m=d(e,y)}for(w=E?e.next:m.next;!(C=i(w,m)).done;){try{b=D(C.value)}catch(e){p(m,"throw",e)}if("object"==typeof b&&b&&c(f,b))return b}return new h(!1)}},function(e,t,n){"use strict";n(18);var o=n(35),i=n(72),a=n(293),r=n(20),s=n(41),l=n(102),c=s("species"),d=RegExp.prototype;e.exports=function(e,t,n,u){var p=s(e),g=!r((function(){var t={};return t[p]=function(){return 7},7!==""[e](t)})),h=g&&!r((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!g||!h||n){var f=/./[p],m=t(p,""[e],(function(e,t,n,i,r){var s=t.exec;return s===a||s===d.exec?g&&!r?{done:!0,value:o(f,t,n,i)}:{done:!0,value:o(e,n,t,i)}:{done:!1}}));i(String.prototype,e,m[0]),i(d,p,m[1])}u&&l(d[p],"sham",!0)}},function(e,t,n){"use strict";var o=n(35),i=n(49),a=n(31),r=n(108),s=n(293),l=TypeError;e.exports=function(e,t){var n=e.exec;if(a(n)){var c=o(n,e,t);return null!==c&&i(c),c}if("RegExp"===r(e))return o(s,e,t);throw new l("RegExp#exec called on incompatible receiver")}},,,,,,,function(e,t){e.exports=require("path")},function(e,t,n){"use strict";var o=n(72);e.exports=function(e,t,n){for(var i in t)o(e,i,t[i],n);return e}},,function(e,t,n){"use strict";var o=n(31),i=n(55),a=n(164);e.exports=function(e,t,n){var r,s;return a&&o(r=t.constructor)&&r!==n&&i(s=r.prototype)&&s!==n.prototype&&a(e,s),e}},,function(e,t,n){"use strict";var o=n(30),i=n(48),a=n(23),r=n(25),s=n(58),l=n(31),c=n(133),d=n(56),u=n(127),p=n(327),g=a.Symbol,h=g&&g.prototype;if(i&&l(g)&&(!("description"in h)||void 0!==g().description)){var f={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:d(arguments[0]),t=c(h,this)?new g(e):void 0===e?g():g(e);return""===e&&(f[t]=!0),t};p(m,g),m.prototype=h,h.constructor=m;var y="Symbol(description detection)"===String(g("description detection")),v=r(h.valueOf),_=r(h.toString),b=/^Symbol\((.*)\)[^)]+$/,w=r("".replace),C=r("".slice);u(h,"description",{configurable:!0,get:function(){var e=v(this);if(s(f,e))return"";var t=_(e),n=y?C(t,7,-1):w(t,b,"$1");return""===n?void 0:n}}),o({global:!0,constructor:!0,forced:!0},{Symbol:m})}},function(e,t,n){"use strict";n(3);var o=n(1);function i(e){this.connected=e}o.GObject.inherit(i,o.GEvent),i.prototype.connected=!1,i.prototype.toString=function(){return"[Object GNetworkAvailabilityChangedEvent]"},e.exports=i},function(e,t,n){"use strict";var o=n(1);function i(e){this.user=e}o.GObject.inherit(i,o.GEvent),i.prototype.user=null,e.exports=i},,function(e,t,n){"use strict";var o=n(381),i=n(226);e.exports=function(e){var t=o(e,"string");return i(t)?t:t+""}},function(e,t,n){"use strict";var o=n(199),i=n(20),a=n(23).String;e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol("symbol detection");return!a(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&o&&o<41}))},function(e,t,n){"use strict";var o=n(283);e.exports=function(e,t){return o[e]||(o[e]=t||{})}},function(e,t,n){"use strict";var o=n(85),i=n(23),a=n(284),r=e.exports=i["__core-js_shared__"]||a("__core-js_shared__",{});(r.versions||(r.versions=[])).push({version:"3.36.0",mode:o?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.0/LICENSE",source:"https://github.com/zloirock/core-js"})},function(e,t,n){"use strict";var o=n(23),i=Object.defineProperty;e.exports=function(e,t){try{i(o,e,{value:t,configurable:!0,writable:!0})}catch(n){o[e]=t}return t}},function(e,t,n){"use strict";var o=n(25),i=n(31),a=n(283),r=o(Function.toString);i(a.inspectSource)||(a.inspectSource=function(e){return r(e)}),e.exports=a.inspectSource},function(e,t,n){"use strict";var o=n(282),i=n(241),a=o("keys");e.exports=function(e){return a[e]||(a[e]=i(e))}},function(e,t,n){"use strict";var o=n(120),i=Math.max,a=Math.min;e.exports=function(e,t){var n=o(e);return n<0?i(n+t,0):a(n,t)}},function(e,t,n){"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){"use strict";var o=n(25),i=n(20),a=n(31),r=n(121),s=n(113),l=n(285),c=function(){},d=s("Reflect","construct"),u=/^\s*(?:class|function)\b/,p=o(u.exec),g=!u.test(c),h=function(e){if(!a(e))return!1;try{return d(c,[],e),!0}catch(e){return!1}},f=function(e){if(!a(e))return!1;switch(r(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return g||!!p(u,l(e))}catch(e){return!0}};f.sham=!0,e.exports=!d||i((function(){var e;return h(h.call)||!h(Object)||!h((function(){e=!0}))||e}))?f:h},function(e,t,n){"use strict";var o=TypeError;e.exports=function(e,t){if(e<t)throw new o("Not enough arguments");return e}},function(e,t,n){"use strict";e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t,n){"use strict";var o=n(41),i=n(190),a=o("iterator"),r=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||r[a]===e)}},function(e,t,n){"use strict";var o,i,a=n(35),r=n(25),s=n(56),l=n(294),c=n(329),d=n(282),u=n(144),p=n(79).get,g=n(442),h=n(443),f=d("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,y=m,v=r("".charAt),_=r("".indexOf),b=r("".replace),w=r("".slice),C=(i=/b*/g,a(m,o=/a/,"a"),a(m,i,"a"),0!==o.lastIndex||0!==i.lastIndex),x=c.BROKEN_CARET,S=void 0!==/()??/.exec("")[1];(C||S||x||g||h)&&(y=function(e){var t,n,o,i,r,c,d,g=this,h=p(g),E=s(e),A=h.raw;if(A)return A.lastIndex=g.lastIndex,t=a(y,A,E),g.lastIndex=A.lastIndex,t;var T=h.groups,G=x&&g.sticky,P=a(l,g),D=g.source,L=0,I=E;if(G&&(P=b(P,"y",""),-1===_(P,"g")&&(P+="g"),I=w(E,g.lastIndex),g.lastIndex>0&&(!g.multiline||g.multiline&&"\n"!==v(E,g.lastIndex-1))&&(D="(?: "+D+")",I=" "+I,L++),n=new RegExp("^(?:"+D+")",P)),S&&(n=new RegExp("^"+D+"$(?!\\s)",P)),C&&(o=g.lastIndex),i=a(m,G?n:g,I),G?i?(i.input=w(i.input,L),i[0]=w(i[0],L),i.index=g.lastIndex,g.lastIndex+=i[0].length):g.lastIndex=0:C&&i&&(g.lastIndex=g.global?i.index+i[0].length:o),S&&i&&i.length>1&&a(f,i[0],n,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)})),i&&T)for(i.groups=c=u(null),r=0;r<T.length;r++)c[(d=T[r])[0]]=i[d[1]];return i}),e.exports=y},function(e,t,n){"use strict";var o=n(49);e.exports=function(){var e=o(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var o=n(296).charAt;e.exports=function(e,t,n){return t+(n?o(e,t).length:1)}},function(e,t,n){"use strict";var o=n(25),i=n(120),a=n(56),r=n(98),s=o("".charAt),l=o("".charCodeAt),c=o("".slice),d=function(e){return function(t,n){var o,d,u=a(r(t)),p=i(n),g=u.length;return p<0||p>=g?e?"":void 0:(o=l(u,p))<55296||o>56319||p+1===g||(d=l(u,p+1))<56320||d>57343?e?s(u,p):o:e?c(u,p,p+2):d-56320+(o-55296<<10)+65536}};e.exports={codeAt:d(!1),charAt:d(!0)}},function(e,t,n){"use strict";e.exports=function(e,t,n,o){for(var i=65535&e|0,a=e>>>16&65535|0,r=0;0!==n;){n-=r=n>2e3?2e3:n;do{a=a+(i=i+t[o++]|0)|0}while(--r);i%=65521,a%=65521}return i|a<<16|0}},function(e,t,n){"use strict";var o=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var o=0;o<8;o++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,i){var a=o,r=i+n;e^=-1;for(var s=i;s<r;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}},function(e,t,n){"use strict";var o=n(87),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var r=new o.Buf8(256),s=0;s<256;s++)r[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function l(e,t){if(t<65534&&(e.subarray&&a||!e.subarray&&i))return String.fromCharCode.apply(null,o.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}r[254]=r[254]=1,t.string2buf=function(e){var t,n,i,a,r,s=e.length,l=0;for(a=0;a<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new o.Buf8(l),r=0,a=0;r<l;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),n<128?t[r++]=n:n<2048?(t[r++]=192|n>>>6,t[r++]=128|63&n):n<65536?(t[r++]=224|n>>>12,t[r++]=128|n>>>6&63,t[r++]=128|63&n):(t[r++]=240|n>>>18,t[r++]=128|n>>>12&63,t[r++]=128|n>>>6&63,t[r++]=128|63&n);return t},t.buf2binstring=function(e){return l(e,e.length)},t.binstring2buf=function(e){for(var t=new o.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,o,i,a,s=t||e.length,c=new Array(2*s);for(o=0,n=0;n<s;)if((i=e[n++])<128)c[o++]=i;else if((a=r[i])>4)c[o++]=65533,n+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&n<s;)i=i<<6|63&e[n++],a--;a>1?c[o++]=65533:i<65536?c[o++]=i:(i-=65536,c[o++]=55296|i>>10&1023,c[o++]=56320|1023&i)}return l(c,o)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+r[e[n]]>t?n:t}},function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},,,,,,,,function(e,t,n){"use strict";e.exports=function(e,t){return{value:e,done:t}}},function(e,t,n){"use strict";var o=n(23),i=n(25),a=n(48),r=n(410),s=n(186),l=n(102),c=n(127),d=n(272),u=n(20),p=n(153),g=n(120),h=n(109),f=n(411),m=n(665),y=n(668),v=n(235),_=n(164),b=n(412),w=n(145),C=n(274),x=n(327),S=n(126),E=n(79),A=s.PROPER,T=s.CONFIGURABLE,G=E.getterFor("ArrayBuffer"),P=E.getterFor("DataView"),D=E.set,L=o.ArrayBuffer,I=L,k=I&&I.prototype,O=o.DataView,F=O&&O.prototype,R=Object.prototype,M=o.Array,N=o.RangeError,B=i(b),U=i([].reverse),$=y.pack,j=y.unpack,K=function(e){return[255&e]},V=function(e){return[255&e,e>>8&255]},H=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},W=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},z=function(e){return $(m(e),23,4)},q=function(e){return $(e,52,8)},Y=function(e,t,n){c(e.prototype,t,{configurable:!0,get:function(){return n(this)[t]}})},X=function(e,t,n,o){var i=P(e),a=f(n),r=!!o;if(a+t>i.byteLength)throw new N("Wrong index");var s=i.bytes,l=a+i.byteOffset,c=w(s,l,l+t);return r?c:U(c)},Q=function(e,t,n,o,i,a){var r=P(e),s=f(n),l=o(+i),c=!!a;if(s+t>r.byteLength)throw new N("Wrong index");for(var d=r.bytes,u=s+r.byteOffset,p=0;p<t;p++)d[u+p]=l[c?p:t-p-1]};if(r){var J=A&&"ArrayBuffer"!==L.name;u((function(){L(1)}))&&u((function(){new L(-1)}))&&!u((function(){return new L,new L(1.5),new L(NaN),1!==L.length||J&&!T}))?J&&T&&l(L,"name","ArrayBuffer"):((I=function(e){return p(this,k),C(new L(f(e)),this,I)}).prototype=k,k.constructor=I,x(I,L)),_&&v(F)!==R&&_(F,R);var Z=new O(new I(2)),ee=i(F.setInt8);Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||d(F,{setInt8:function(e,t){ee(this,e,t<<24>>24)},setUint8:function(e,t){ee(this,e,t<<24>>24)}},{unsafe:!0})}else k=(I=function(e){p(this,k);var t=f(e);D(this,{type:"ArrayBuffer",bytes:B(M(t),0),byteLength:t}),a||(this.byteLength=t,this.detached=!1)}).prototype,F=(O=function(e,t,n){p(this,F),p(e,k);var o=G(e),i=o.byteLength,r=g(t);if(r<0||r>i)throw new N("Wrong offset");if(r+(n=void 0===n?i-r:h(n))>i)throw new N("Wrong length");D(this,{type:"DataView",buffer:e,byteLength:n,byteOffset:r,bytes:o.bytes}),a||(this.buffer=e,this.byteLength=n,this.byteOffset=r)}).prototype,a&&(Y(I,"byteLength",G),Y(O,"buffer",P),Y(O,"byteLength",P),Y(O,"byteOffset",P)),d(F,{getInt8:function(e){return X(this,1,e)[0]<<24>>24},getUint8:function(e){return X(this,1,e)[0]},getInt16:function(e){var t=X(this,2,e,arguments.length>1&&arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=X(this,2,e,arguments.length>1&&arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return W(X(this,4,e,arguments.length>1&&arguments[1]))},getUint32:function(e){return W(X(this,4,e,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(e){return j(X(this,4,e,arguments.length>1&&arguments[1]),23)},getFloat64:function(e){return j(X(this,8,e,arguments.length>1&&arguments[1]),52)},setInt8:function(e,t){Q(this,1,e,K,t)},setUint8:function(e,t){Q(this,1,e,K,t)},setInt16:function(e,t){Q(this,2,e,V,t,arguments.length>2&&arguments[2])},setUint16:function(e,t){Q(this,2,e,V,t,arguments.length>2&&arguments[2])},setInt32:function(e,t){Q(this,4,e,H,t,arguments.length>2&&arguments[2])},setUint32:function(e,t){Q(this,4,e,H,t,arguments.length>2&&arguments[2])},setFloat32:function(e,t){Q(this,4,e,z,t,arguments.length>2&&arguments[2])},setFloat64:function(e,t){Q(this,8,e,q,t,arguments.length>2&&arguments[2])}});S(I,"ArrayBuffer"),S(O,"DataView"),e.exports={ArrayBuffer:I,DataView:O}},,,,function(e,t,n){"use strict";var o=n(30),i=n(25),a=n(92),r=n(86),s=n(93),l=n(1015),c=n(56),d=n(20),u=n(336),p=n(335),g=n(505),h=n(506),f=n(199),m=n(507),y=[],v=i(y.sort),_=i(y.push),b=d((function(){y.sort(void 0)})),w=d((function(){y.sort(null)})),C=p("sort"),x=!d((function(){if(f)return f<70;if(!(g&&g>3)){if(h)return!0;if(m)return m<603;var e,t,n,o,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(o=0;o<47;o++)y.push({k:t+o,v:n})}for(y.sort((function(e,t){return t.v-e.v})),o=0;o<y.length;o++)t=y[o].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));o({target:"Array",proto:!0,forced:b||!w||!C||!x},{sort:function(e){void 0!==e&&a(e);var t=r(this);if(x)return void 0===e?v(t):v(t,e);var n,o,i=[],d=s(t);for(o=0;o<d;o++)o in t&&_(i,t[o]);for(u(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:c(t)>c(n)?1:-1}}(e)),n=s(i),o=0;o<n;)t[o]=i[o++];for(;o<d;)l(t,o++);return t}})},,,,,,,,function(e,t,n){"use strict";var o=n(1);function i(e,t){this.type=e,this.storageItem=t}o.GObject.inherit(i,o.GEvent),i.Type={VersionUpdate:2,ShareCreated:3,FileUpdated:4,FileCheckIn:5},i.prototype.storageItem=null,i.prototype.type=null,i.FileStatusUpdate=function(e,t,n){this.storageItem=e,this.oldStatus=t,this.newStatus=n},o.GObject.inherit(i.FileStatusUpdate,o.GEvent),e.exports=i},function(e,t,n){"use strict";const o=n(1075);e.exports=new o},,function(e,t,n){"use strict";n(26),n(3);var o=n(1),i=n(13),a=n(61),r=n(1474),s=n(1133),l=n(429),c=n(1134),d=n(783);function u(e,t,n,o){this._htmlElement=$("<li></li>").addClass("g-menu-item"),this._category=e||u.Type.Item,this._componentId=n||null,this._pro=!1,this._visible=!0,this._feature=null,this._detachBound=this._detach.bind(this),this._category===u.Type.Divider?(this._isVisible=o,this._htmlElement.addClass("g-menu-item-divider")):(this._htmlElement.append($("<span></span>").addClass("g-menu-item-icon").css("display","none")).append($("<span></span>").addClass("g-menu-item-caption")).append($("<span></span>").addClass("g-menu-item-info")).append($("<span></span>").addClass("g-menu-item-shortcut").css("display","none")).append($("<span></span>").addClass("g-menu-item-detach").addClass("gravit-icon-detach").css("display","none")).append($("<span></span>").addClass("g-menu-item-tail")),this._category===u.Type.Menu&&(this._htmlElement.addClass("g-menu-item-menu"),this.setMenu(new t(this)))),this._htmlElement.on("mouseover",this._mouseOver.bind(this)),this._htmlElement.on("mouseout",this._mouseOut.bind(this)),this._htmlElement.on("mousedown",this._mouseDown.bind(this)),this._htmlElement.on("mouseup",this._mouseUp.bind(this))}o.GObject.inherit(u,o.GEventTarget),u.Type={Item:0,Menu:1,Divider:2},u.EnterEvent=function(){},o.GObject.inherit(u.EnterEvent,o.GEvent),u.EnterEvent.prototype.toString=function(){return"[Object GMenuItem.EnterEvent]"},u.ENTER_EVENT=new u.EnterEvent,u.LeaveEvent=function(){},o.GObject.inherit(u.LeaveEvent,o.GEvent),u.LeaveEvent.prototype.toString=function(){return"[Object GMenuItem.LeaveEvent]"},u.LEAVE_EVENT=new u.LeaveEvent,u.ActivateEvent=function(){},o.GObject.inherit(u.ActivateEvent,o.GEvent),u.ActivateEvent.prototype.toString=function(){return"[Object GMenuItem.ActivateEvent]"},u.ACTIVATE_EVENT=new u.ActivateEvent,u.BeforeActivateEvent=function(){},o.GObject.inherit(u.BeforeActivateEvent,o.GEvent),u.BeforeActivateEvent.prototype.toString=function(){return"[Object GMenuItem.BeforeActivateEvent]"},u.BEFORE_ACTIVATE_EVENT=new u.BeforeActivateEvent,u.UpdateEvent=function(){},o.GObject.inherit(u.UpdateEvent,o.GEvent),u.UpdateEvent.prototype.toString=function(){return"[Object GMenuItem.UpdateEvent]"},u.UPDATE_EVENT=new u.UpdateEvent,u.DetachEvent=function(){},o.GObject.inherit(u.DetachEvent,o.GEvent),u.DetachEvent.prototype.toString=function(){return"[Object GMenuItem.DetachEvent]"},u.prototype._parent=null,u.prototype._category=null,u.prototype._menu=null,u.prototype._icon=null,u.prototype._forcedAsOpened=!1,u.prototype._caption=null,u.prototype._shortcutHint=null,u.prototype._action=null,u.prototype._data=null,u.prototype._noHover=!1,u.prototype._pro=!1,u.prototype._visible=!0,u.prototype._feature=null,u.prototype._info=null,u.prototype._uuid=null,u.prototype._detached=!1,u.prototype._detachBound=null,u.prototype._isVisible=null,u.prototype._proFeatureInterruption=!0,u.prototype.getUUID=function(){return this._uuid||(this._uuid=o.GUtil.uuid()),this._uuid},u.prototype.getParent=function(){return this._parent},u.prototype.getType=function(){return this._category},u.prototype.getIcon=function(){return this._icon},u.prototype.isForcedAsOpened=function(){return this._forcedAsOpened},u.prototype.setPro=function(e,t){this._pro=!!e,this._feature=t,this._htmlElement.gPro({pro:this._pro,feature:t});let n=!1;const o=gDesigner.getLicense(),i=o.isLegacy()&&gDesigner.isLegacyFeature(t),r=!i&&(o.isFree()||gDesigner.isAnonymous()||o.isExpired());if(this._pro&&(n=o.isTrial()&&!i),!n&&!r||!this._action)return;let s=this._action.getTooltipConfig(this._action.getTooltipArea());s&&this._htmlElement.gRichTooltip(a.GRichTooltipConfig.from(Object.assign({},s.getConfig(),{isPro:!gDesigner.isEnabledProFeatures()||!(o.isPro()&&!o.isExpired())})))},u.prototype.isPro=function(){return!!this._pro},u.prototype.getFeature=function(){return this._feature},u.prototype.setIcon=function(e){if(e!==this._icon){this._icon=e;var t=this._htmlElement.find(".g-menu-item-icon");t.empty(),this._icon?("string"==typeof this._icon?t.append($("<i></i>").addClass(e)):t.append(this._icon),t.css("display",""),this._htmlElement.addClass("has-icon")):(t.css("display","none"),this._htmlElement.removeClass("has-icon"))}},u.prototype.getCaption=function(){return this._caption},u.prototype.setCaption=function(e){if(e!==this._caption){this._caption=e;var t=this._htmlElement.find(".g-menu-item-caption");t.empty(),!this._caption||this._caption instanceof o.GLocaleKey||"string"==typeof this._caption?t.html(this._caption?o.GLocale.get(this._caption):""):t.append(this._caption)}},u.prototype.getInfo=function(){return this._info},u.prototype.setInfo=function(e){if(e!==this._info){this._info=e;const t=this._htmlElement.find(".g-menu-item-info").empty();this._htmlElement.css("display",this._info?"":"none"),this._info&&(this._info instanceof o.GLocaleKey||"string"==typeof this._info?t.text(this._info?o.GLocale.get(this._info):""):t.append(this._info))}},u.prototype.getShortcutHint=function(){return this._shortcutHint},u.prototype.setShortcutHint=function(e){this._shortcutHint=e;var t=this._htmlElement.find(".g-menu-item-shortcut");this._shortcutHint&&this._shortcutHint.length>0?(t.text(i.GKey.shortcutToString(e)),t.css("display",""),this._htmlElement.addClass("has-shortcut")):(t.empty(),t.css("display","none"),this._htmlElement.removeClass("has-shortcut"))},u.prototype.getAction=function(){return this._action},u.prototype.updateEnabled=function(){this._action&&this.setEnabled(!!this._action.isEnabled())},u.prototype.setAction=function(e,t){if(e!==this._action){if(this._action){let t=e.getShortcut();t&&t===this.getShortcutHint()&&this.setShortcutHint(null)}if(this._action=e,this._action){let n=e.getShortcut();if(n&&this.setShortcutHint(n),this.setCaption(this._action.getTitle()),this.setInfo(this._action.getInfo()),this.setIcon(this._action.getIcon()),this.setEnabled(!0===this._action.isEnabled()),this.setVisible(this._action.isVisible()),t){let e=this._action.getTooltipConfig(t);e&&this.setTooltipConfig(a.GRichTooltipConfig.from(Object.assign({},e.getConfig(),{side:!0})))}}}this.setPro(this._action&&this._action.isPro(),this._action&&this._action.getId())},u.prototype.isChecked=function(){return this._htmlElement.hasClass("g-menu-item-checked")},u.prototype.isCheckable=function(){return!!this._action&&this._action.isCheckable()},u.prototype.setChecked=function(e){e!=this.isChecked()&&(e?this._htmlElement.addClass("g-menu-item-checked"):this._htmlElement.removeClass("g-menu-item-checked"))},u.prototype.isEnabled=function(){return!this._htmlElement.hasClass("g-disabled")},u.prototype.setEnabled=function(e){e!=this.isEnabled()&&(e?this._htmlElement.removeClass("g-disabled"):this._htmlElement.addClass("g-disabled"))},u.prototype.setDetachable=function(e){const t=this._htmlElement.find(".g-menu-item-detach").css("display",e?"":"none");e?(t.on("click",this._detachBound),t[0].addEventListener("mousedown",this._stopPropagationEventListener,!0),t[0].addEventListener("mouseup",this._stopPropagationEventListener,!0)):(t.off("click",this._detachBound),t[0].removeEventListener("mousedown",this._stopPropagationEventListener,!0),t[0].removeEventListener("mouseup",this._stopPropagationEventListener,!0))},u.prototype._stopPropagationEventListener=function(e){e.stopPropagation()},u.prototype._detach=function(e){if(e.button==i.GMouseEvent.BUTTON_LEFT){e.stopPropagation(),e.preventDefault(),this._detached=!0;const t=this._parent;t&&(t.removeItem(t.indexOf(this)),t.close()),this.hasEventListeners(u.DetachEvent)&&this.trigger(new u.DetachEvent)}},u.prototype.setVisible=function(e){this._visible=!!e,this._htmlElement.css("display",e?"":"none")},u.prototype.isVisible=function(){return this._visible},u.prototype.getData=function(){return this._data},u.prototype.setData=function(e){this._data=e},u.prototype.setNoHover=function(e){this._noHover=e},u.prototype.addClass=function(e){this._htmlElement.addClass(e)},u.prototype.isRootItem=function(){return this._parent&&"function"==typeof this._parent.toString&&"[Object GMenu]"===this._parent.toString()&&null!=this._parent._parent&&!(this._parent._parent instanceof u)},u.prototype.isRootMenuBarItem=function(){return this.isRootItem()&&this._parent._parent&&"function"==typeof this._parent._parent.toString&&"[Object GMenuBar]"===this._parent._parent.toString()},u.prototype.getMenuBar=function(){return this.isRootMenuBarItem()?this._parent._parent:null},u.prototype.getMenu=function(){return this._menu},u.prototype.setMenu=function(e){e&&e!==this._menu&&this._category===u.Type.Menu&&(this._menu=e,this._menu._parent=this,this._menu.addEventListener(d.EVENT,this._menuOpen.bind(this)),this._menu.addEventListener(s.EVENT,this._menuClose.bind(this)))},u.prototype.update=function(){this._action&&(this.setCaption(this._action.getTitle()),this.setEnabled(this._action.isEnabled()),this.setChecked(this._action.isChecked()),this.setPro(this._action.isPro(),this._action.getId()),this.setIcon(this._icon||this._action.getIcon()),this.setInfo(this._action.getInfo()),this.setVisible(this._action.isVisible())),this.getType()===u.Type.Divider&&this._isVisible&&this.setVisible(this._isVisible()),this.hasEventListeners(u.UpdateEvent)&&this.trigger(u.UPDATE_EVENT)},u.prototype.activate=function(){let e=!1;const t=()=>{let e,t=this.getParent();for(;t&&(e=t,t!==t.getParent());)t=t.getParent();return e};if(this.hasEventListeners(u.BeforeActivateEvent)&&this.trigger(u.BEFORE_ACTIVATE_EVENT),this._action&&this._action.isAvailable(this._componentId)&&this._action.isEnabled()){let i=t();var n="execute";this._action.isPro()&&!gDesigner.isEnabledProFeatures(this._action.getId())&&(n="nonprotriespro"),this._action.execute(),e=!0;var o=this._action.statsValue()||this._action.getId();i&&"context"===i.__which?gDesigner.stats("action_"+n+"_context",o):i&&"menubar"===i.__which?gDesigner.stats("action_"+n+"_menu",o):i&&"assistantbar"===i.__which?gDesigner.stats("action_"+n+"_assistantbar",o):i&&"touchmenu"===i.__which?gDesigner.stats("action_"+n+"_touchmenu",o):gDesigner.stats("action_"+n+"_toolbar",o)}if(this.isEnabled()){if(this.isPro()&&this._proFeatureInterruption&&!gDesigner.isEnabledProFeatures(this._feature)){if(!e){let e=t();e&&"context"===e.__which?gDesigner.stats("action_nonprotriespro_context",this._feature):e&&"menubar"===e.__which?gDesigner.stats("action_nonprotriespro_menu",this._feature):e&&"assistantbar"===e.__which?gDesigner.stats("action_nonprotriespro_assistantbar",this._feature):e&&"touchmenu"===e.__which?gDesigner.stats("action_nonprotriespro_touchmenu",this._feature):gDesigner.stats("action_nonprotriespro_toolbar",this._feature),gDesigner.handlePROFeatureInterruption()}return!1}this.hasEventListeners(u.ActivateEvent)&&this.trigger(u.ACTIVATE_EVENT),this._parent&&this._parent.hasEventListeners(r)&&this._parent.trigger(new r(this))}},u.prototype.setTooltipConfig=function(e){this._htmlElement.gRichTooltip(e)},u.prototype.setProFeatureInterruption=function(e){this._proFeatureInterruption=e},u.prototype._mouseOver=function(e){this._parent&&this._category===u.Type.Menu&&this._parent.getActiveItem()!==this&&!this.isRootItem()&&this._parent.closeMenus(!0),this._parent&&"function"==typeof this._parent.toString&&"[Object GMenu]"===this._parent.toString()&&!this.isRootItem()&&this._parent.closeMenus(),this.isEnabled()&&(this._category==u.Type.Menu&&o.GSystem.hardware===o.GSystem.Hardware.Desktop&&(!this.isRootItem()||this.isRootMenuBarItem()&&this.getMenuBar().isActive())&&this._openMenu(),this._category!=u.Type.Divider&&(this._noHover||this._htmlElement.addClass("g-hover"),this.hasEventListeners(u.EnterEvent)&&this.trigger(u.ENTER_EVENT)))},u.prototype.isActive=function(){return this._htmlElement.hasClass("g-active")},u.prototype.changeActiveState=function(e){e?this._htmlElement.addClass("g-active"):this._htmlElement.removeClass("g-active")},u.prototype._mouseOut=function(e){if(this._category===u.Type.Menu&&(this.isRootItem()||o.GSystem.hardware!==o.GSystem.Hardware.Desktop))return e.stopPropagation(),void e.preventDefault();this.isEnabled()&&this._category!=u.Type.Divider&&(this._noHover||this._htmlElement.removeClass("g-hover"),this.hasEventListeners(u.LeaveEvent)&&this.trigger(u.LEAVE_EVENT))},u.prototype._mouseDown=function(e){e.cancelable&&(this.isEnabled()?e.button==i.GMouseEvent.BUTTON_LEFT?(e.stopPropagation(),e.preventDefault(),this._category===u.Type.Menu&&(this._forcedAsOpened?(this.getMenu().close(),this._forcedAsOpened=!1):(this._parent&&(this._parent.closeMenus(!0),this._parent.setActiveItem(this)),this._openMenu(),this._forcedAsOpened=!0))):(e.button,i.GMouseEvent.BUTTON_MIDDLE,e.stopPropagation(),e.preventDefault()):gDesigner.isTouchEnabled()&&e.button===i.GMouseEvent.BUTTON_LEFT&&e.stopPropagation())},u.prototype._mouseUp=function(e){if(e.cancelable&&(e.stopPropagation(),e.preventDefault(),e.button!=i.GMouseEvent.BUTTON_MIDDLE&&e.button!=i.GMouseEvent.BUTTON_RIGHT&&!this._detached&&this._category!==u.Type.Menu)){if(this.isRootMenuBarItem()||this._mouseOut(e),this._category==u.Type.Item){let e=this.activate();this.isEnabled()&&!1!==e&&c.triggerGlobalActivation(this)}this.isRootMenuBarItem()||c.setActiveMenu(null)}},u.prototype._openMenu=function(){this.getMenu().open(this._htmlElement,this.isRootItem()?l.Position.Center:l.Position.Right_Bottom,this.isRootItem()?l.Position.Right_Bottom:l.Position.Center)},u.prototype._menuOpen=function(){this._htmlElement.addClass("g-active"),this.isRootItem()&&this._parent._parent._htmlElement.addClass("g-active")},u.prototype._menuClose=function(){this._forcedAsOpened=!1,this._htmlElement.removeClass("g-active"),this.isRootItem()&&this._parent._parent._htmlElement.removeClass("g-active")},u.prototype.toString=function(){return"[Object GMenuItem]"},e.exports=u},function(e,t,n){"use strict";function o(e){Object.assign(this,e)}n(26),n(3),o.prototype.def=!1,o.prototype.id=null,o.prototype.sidebar=null,o.prototype.icon=null,o.prototype.panel=null,o.prototype.toolbar=null,o.prototype.activate=function(){},o.prototype.deactivate=function(){},o.prototype.toString=function(){return"[Object GTouchTool]"},o.APPEARANCE_TOUCH_TOOL=new o({id:"appearance",icon:"gravit-icon-touch-appearance-panel",panel:".appearance-property-panel",panelWidth:"380px",toolbar:".appearance-toolbar"}),e.exports=o},function(e,t,n){"use strict";var o=n(58),i=n(597),a=n(208),r=n(81);e.exports=function(e,t,n){for(var s=i(t),l=r.f,c=a.f,d=0;d<s.length;d++){var u=s[d];o(e,u)||n&&o(n,u)||l(e,u,c(t,u))}}},function(e,t,n){"use strict";var o=n(41)("iterator"),i=!1;try{var a=0,r={next:function(){return{done:!!a++}},return:function(){i=!0}};r[o]=function(){return this},Array.from(r,(function(){throw 2}))}catch(e){}e.exports=function(e,t){try{if(!t&&!i)return!1}catch(e){return!1}var n=!1;try{var a={};a[o]=function(){return{next:function(){return{done:n=!0}}}},e(a)}catch(e){}return n}},function(e,t,n){"use strict";var o=n(20),i=n(23).RegExp,a=o((function(){var e=i("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),r=a||o((function(){return!i("a","y").sticky})),s=a||o((function(){var e=i("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));e.exports={BROKEN_CARET:s,MISSED_STICKY:r,UNSUPPORTED_Y:a}},,,,function(e,t,n){"use strict";var o=n(108);e.exports=Array.isArray||function(e){return"Array"===o(e)}},function(e,t,n){"use strict";var o=n(116),i=n(25),a=n(225),r=n(86),s=n(93),l=n(556),c=i([].push),d=function(e){var t=1===e,n=2===e,i=3===e,d=4===e,u=6===e,p=7===e,g=5===e||u;return function(h,f,m,y){for(var v,_,b=r(h),w=a(b),C=s(w),x=o(f,m),S=0,E=y||l,A=t?E(h,C):n||p?E(h,0):void 0;C>S;S++)if((g||S in w)&&(_=x(v=w[S],S,b),e))if(t)A[S]=_;else if(_)switch(e){case 3:return!0;case 5:return v;case 6:return S;case 2:c(A,v)}else switch(e){case 4:return!1;case 7:c(A,v)}return u?-1:i||d?d:A}};e.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterReject:d(7)}},function(e,t,n){"use strict";var o=n(20);e.exports=function(e,t){var n=[][e];return!!n&&o((function(){n.call(null,t||function(){return 1},1)}))}},function(e,t,n){"use strict";var o=n(145),i=Math.floor,a=function(e,t){var n=e.length;if(n<8)for(var r,s,l=1;l<n;){for(s=l,r=e[l];s&&t(e[s-1],r)>0;)e[s]=e[--s];s!==l++&&(e[s]=r)}else for(var c=i(n/2),d=a(o(e,0,c),t),u=a(o(e,c),t),p=d.length,g=u.length,h=0,f=0;h<p||f<g;)e[h+f]=h<p&&f<g?t(d[h],u[f])<=0?d[h++]:u[f++]:h<p?d[h++]:u[f++];return e};e.exports=a},,function(e,t,n){"use strict";var o=n(30),i=n(23),a=n(35),r=n(48),s=n(670),l=n(139),c=n(310),d=n(153),u=n(163),p=n(102),g=n(671),h=n(109),f=n(411),m=n(413),y=n(673),v=n(280),_=n(58),b=n(121),w=n(55),C=n(226),x=n(144),S=n(133),E=n(164),A=n(228).f,T=n(674),G=n(334).forEach,P=n(243),D=n(127),L=n(81),I=n(208),k=n(676),O=n(79),F=n(274),R=O.get,M=O.set,N=O.enforce,B=L.f,U=I.f,$=i.RangeError,j=c.ArrayBuffer,K=j.prototype,V=c.DataView,H=l.NATIVE_ARRAY_BUFFER_VIEWS,W=l.TYPED_ARRAY_TAG,z=l.TypedArray,q=l.TypedArrayPrototype,Y=l.isTypedArray,X=function(e,t){D(e,t,{configurable:!0,get:function(){return R(this)[t]}})},Q=function(e){var t;return S(K,e)||"ArrayBuffer"===(t=b(e))||"SharedArrayBuffer"===t},J=function(e,t){return Y(e)&&!C(t)&&t in e&&g(+t)&&t>=0},Z=function(e,t){return t=v(t),J(e,t)?u(2,e[t]):U(e,t)},ee=function(e,t,n){return t=v(t),!(J(e,t)&&w(n)&&_(n,"value"))||_(n,"get")||_(n,"set")||n.configurable||_(n,"writable")&&!n.writable||_(n,"enumerable")&&!n.enumerable?B(e,t,n):(e[t]=n.value,e)};r?(H||(I.f=Z,L.f=ee,X(q,"buffer"),X(q,"byteOffset"),X(q,"byteLength"),X(q,"length")),o({target:"Object",stat:!0,forced:!H},{getOwnPropertyDescriptor:Z,defineProperty:ee}),e.exports=function(e,t,n){var r=e.match(/\d+/)[0]/8,l=e+(n?"Clamped":"")+"Array",c="get"+e,u="set"+e,g=i[l],v=g,_=v&&v.prototype,b={},C=function(e,t){B(e,t,{get:function(){return function(e,t){var n=R(e);return n.view[c](t*r+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,o){var i=R(e);i.view[u](t*r+i.byteOffset,n?y(o):o,!0)}(this,t,e)},enumerable:!0})};H?s&&(v=t((function(e,t,n,o){return d(e,_),F(w(t)?Q(t)?void 0!==o?new g(t,m(n,r),o):void 0!==n?new g(t,m(n,r)):new g(t):Y(t)?k(v,t):a(T,v,t):new g(f(t)),e,v)})),E&&E(v,z),G(A(g),(function(e){e in v||p(v,e,g[e])})),v.prototype=_):(v=t((function(e,t,n,o){d(e,_);var i,s,l,c=0,u=0;if(w(t)){if(!Q(t))return Y(t)?k(v,t):a(T,v,t);i=t,u=m(n,r);var p=t.byteLength;if(void 0===o){if(p%r)throw new $("Wrong length");if((s=p-u)<0)throw new $("Wrong length")}else if((s=h(o)*r)+u>p)throw new $("Wrong length");l=s/r}else l=f(t),i=new j(s=l*r);for(M(e,{buffer:i,byteOffset:u,byteLength:s,length:l,view:new V(i)});c<l;)C(e,c++)})),E&&E(v,z),_=v.prototype=x(q)),_.constructor!==v&&p(_,"constructor",v),N(_).TypedArrayConstructor=v,W&&p(_,W,l);var S=v!==g;b[l]=v,o({global:!0,constructor:!0,forced:S,sham:!H},b),"BYTES_PER_ELEMENT"in v||p(v,"BYTES_PER_ELEMENT",r),"BYTES_PER_ELEMENT"in _||p(_,"BYTES_PER_ELEMENT",r),P(l)}):e.exports=function(){}},,function(e,t,n){"use strict";n.r(t);class o extends Error{constructor(...e){super(...e),this.constructor=o,this.__proto__=o.prototype,this.name="AppError"}toString(){return this.message}}t.default=o},function(e,t,n){"use strict";var o=n(48),i=n(23),a=n(25),r=n(261),s=n(274),l=n(102),c=n(144),d=n(228).f,u=n(133),p=n(439),g=n(56),h=n(444),f=n(329),m=n(1017),y=n(72),v=n(20),_=n(58),b=n(79).enforce,w=n(243),C=n(41),x=n(442),S=n(443),E=C("match"),A=i.RegExp,T=A.prototype,G=i.SyntaxError,P=a(T.exec),D=a("".charAt),L=a("".replace),I=a("".indexOf),k=a("".slice),O=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,F=/a/g,R=/a/g,M=new A(F)!==F,N=f.MISSED_STICKY,B=f.UNSUPPORTED_Y,U=o&&(!M||N||x||S||v((function(){return R[E]=!1,A(F)!==F||A(R)===R||"/a/i"!==String(A(F,"i"))})));if(r("RegExp",U)){for(var $=function(e,t){var n,o,i,a,r,d,f=u(T,this),m=p(e),y=void 0===t,v=[],w=e;if(!f&&m&&y&&e.constructor===$)return e;if((m||u(T,e))&&(e=e.source,y&&(t=h(w))),e=void 0===e?"":g(e),t=void 0===t?"":g(t),w=e,x&&"dotAll"in F&&(o=!!t&&I(t,"s")>-1)&&(t=L(t,/s/g,"")),n=t,N&&"sticky"in F&&(i=!!t&&I(t,"y")>-1)&&B&&(t=L(t,/y/g,"")),S&&(e=(a=function(e){for(var t,n=e.length,o=0,i="",a=[],r=c(null),s=!1,l=!1,d=0,u="";o<=n;o++){if("\\"===(t=D(e,o)))t+=D(e,++o);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:P(O,k(e,o+1))&&(o+=2,l=!0),i+=t,d++;continue;case">"===t&&l:if(""===u||_(r,u))throw new G("Invalid capture group name");r[u]=!0,a[a.length]=[u,d],l=!1,u="";continue}l?u+=t:i+=t}return[i,a]}(e))[0],v=a[1]),r=s(A(e,t),f?this:T,$),(o||i||v.length)&&(d=b(r),o&&(d.dotAll=!0,d.raw=$(function(e){for(var t,n=e.length,o=0,i="",a=!1;o<=n;o++)"\\"!==(t=D(e,o))?a||"."!==t?("["===t?a=!0:"]"===t&&(a=!1),i+=t):i+="[\\s\\S]":i+=t+D(e,++o);return i}(e),n)),i&&(d.sticky=!0),v.length&&(d.groups=v)),e!==w)try{l(r,"source",""===w?"(?:)":w)}catch(e){}return r},j=d(A),K=0;j.length>K;)m($,A,j[K++]);T.constructor=$,$.prototype=T,y(i,"RegExp",$,{constructor:!0})}w("RegExp")},function(e,t,n){"use strict";var o=n(1),i=n(1050);i.DESIGNER.HIGHLIGHTOUTLINE_COLOR=new o.GRGBColor([197,17,98]),i.PURCHASEPANEL.HAS_PRODUCT_DESCRIPTION=!1,i.USERLOGIN.loadLogo=()=>{},e.exports=i},function(e,t,n){"use strict";n(52),n(17),n(7),n(62),n(28),n(22);var o=n(1),i=n(45),a=n(34),r=n(9),s=n(574),l=n(1071);const c=n(419);function d(){}async function u(e,t){const n=gDesigner.getSyncUser(),o=gDesigner.getApplicationManager(),i=d.isOwner(n,e),a=(e.getProperty("asgn")||[]).includes(n.getUID()),r=o.isCommentingEditingEnabled(),s=await o.hasAccess(t);return r&&(s||i||a)}d.getCloudAnnotationsForDocument=async function(e){const t=e.getAnnotationsId();if(!t)throw new s("GAnnotationsUtils.getCloudAnnotationsForDocument: can't get annotations id for the document");const n=await e.getAnnotationsToken(t);return gDesigner.getAnnotationsManager().getAnnotations(t,n).then(o=>new l(o,t,n,e))},d.updateAndReturnCloudAnnotationsForDocument=async function(e,t){const n=e.getAnnotationsId();if(!n)throw new s("GAnnotationsUtils.updateAndReturnCloudAnnotationsForDocument: can't get annotations id for the document");t||(t=[]);const o=await e.getAnnotationsToken(n);return gDesigner.getAnnotationsManager().updateAnnotations(n,this._prepareAnnotations(e,t),o).then(t=>new l(t,n,o,e))},d._prepareAnnotations=function(e,t){return t},d.saveDocumentAnnotations=async function(e,t,n,i){var a=t;if(n=n||e.getScene(),!e.isCloudFile()&&!e.isExternalFile()||!n||!n.hasAnnotations()&&!n.isCloudAnnotations())return!1;var r=e.getId(),s=n.getProperty("cid"),c=e.getReservedId();let u=[];var p;n.iteratePages(e=>{let t=e.getAnnotations();i&&(d.removeSidFromAnnotations(t),e.getProperty("Guid")||d.removeGuidFromAnnotations(t)),u.push(t)},!0);var g=null;const h=async()=>{let e=await gApi.getFile(p,!0).catch(()=>null);if(e&&e.link_accesses&&e.link_accesses.length)for(var t=0;t<e.link_accesses.length&&!g;++t){let n=e.link_accesses[t];if(n.token&&n.comment)return n.token}return null};if((p=r||(s||c))&&a&&((g=await e.getAnnotationsToken(p))||(g=await h())),!p)try{const t={trashed:null};let n=await gApi.createFile(t);(p=n.id)&&e.setReservedId(p)}catch(e){console.warn("Failed to record annotations")}if(!p)return!1;a&&!g&&(g=await h());const f=this._prepareAnnotations(e,u.map(o.GNode.store));return f instanceof Array||(f.suppressNewPageNotifications=!!i),gDesigner.getAnnotationsManager().updateAnnotations(p,f,g).then(t=>{var r=new l(t,p,g,e);let s,c=r.annotationsCollection;return s=i&&n.getLastSavedTime()||new Date(r.lastUpdateTime).getTime(),c&&c.length?(n.iteratePages(e=>{let t=d.findAnnotationsListForPage(e,c);t&&e.setAnnotations(o.GNode.restore(t))},!0),n.getProperty("cid")!==p&&n.setCloudAnnotations(p),a&&g&&n.setProperty("asec",g)):(n.setCloudAnnotations(null),n.cleanAnnotations(),a&&g&&n.setProperty("asec",g)),n.setLastTimeAnnotationsFromCloudModified(s),!0}).catch(e=>(n.setCloudAnnotations(null),console.warn("Failed to record annotations: "+e),!1))},d.findAnnotationsListForPage=function(e,t){const n=e.getProperty("Guid",!0)||e.getAnnotations().getProperty("Guid");let o=null;if(!t||!t.length)return o;if(n&&(o=this._findInAnnotationsObj(t,e=>e.Guid===n||e.aid===n,e=>e.$Guid===n||e["@Guid"]===n||e.$aid===n)),!o){const n=e.getAnnotations().getProperty("aid");n&&(o=this._findInAnnotationsObj(t,e=>e.aid===n,e=>e.$aid===n))}if(!o){const n=e.getId();n&&(o=this._findInAnnotationsObj(t,e=>e.pgid===n,e=>e.$pgid===n))}return o},d._findInAnnotationsObj=function(e,t,n){return e.find(e=>e instanceof o.GAnnotationsList?n(e):t(e))},d.mergeAnnotations=function(e,t,n,i,r){let s={},l={},c=!1;t.forEach(e=>{l[e.getId()]=e,e.hasFlag(o.GNode.Flag.Selected)&&(s[e.getId()]=1)}),t.forEach(t=>{i.some(e=>e.getId()===t.getId())||(e.removeChild(t),c=!0)});const d=["$lmd","$storedUrl","$__ids","$plkt","$mtime","$lkt","@_lkt"];r&&r instanceof Object&&d.push(...Object.keys(r).map(e=>"$"+e));for(let t=0;t<i.length;t++){let n=i[t],r=l[n.getId()];r&&((0,a.isDifferent)(n,r,d.concat(n instanceof o.GRectangleAnnotation?["$cu"]:[]))&&((0,a.mergeNode)(r,n),c=!0),r.setProperty("mtime",n.getProperty("mtime"))),1===s[n.getId()]&&n.setFlag(o.GNode.Flag.Selected),l[n.getId()]||(e.appendChild(n),c=!0)}e.setProperty("sid",n.getProperty("sid")||null);const u=n.getProperty("Guid");return u&&e.setProperty("Guid",u),c},d.canDeleteAnnotation=function(e){var t=gDesigner.getSyncUser();return d.isOwner(t,e)},d.removeAnnotations=function(e,t,n){let o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!t||!t.getScene())return;let a=t.getScene(),r=gDesigner.getActiveDocument();if(r.getScene()===a){var s=!!r.getAnnotationsId();i.GAnnotationEditor.removeAnnotations(e,t,n,o,!s)}},d.filterAnnotationElements=function(e){return e.filter(e=>e.hasMixin(o.GAnnotation)||e instanceof o.GComment)},d.canResolveAnnotation=function(e){return u(e,c.RESOLVE_COMMENT_ANNOTATION)},d.canReopenAnnotation=function(e){return u(e,c.REOPEN_COMMENT_ANNOTATION)},d.isOwner=function(e,t){if(e){const n=t.getProperty?t.getProperty("uid"):t.uid;return e.getUID()===n}return!1},d.canUpdate=function(e){return!(gDesigner.isAnonymous()&&!r.ANONYMOUS_SESSION_ENABLED)&&!!e},d.resolveAllComments=function(e){var t=e.getScene();t&&i.GEditor.tryRunTransaction(t,(function(){t.iteratePages(e=>{e.getAnnotations().resolve()},!0)}),o.GLocale.get(new o.GLocaleKey("GAnnotationsSidebar","text.resolve-all-comments")))},d.getCommentsCount=function(e){if(!e.annotations)return 0;let t=0;const n={annotationsCollection:e.annotations,lastUpdateTime:0};let o=new l(n,e.id);return o&&o.annotationsCollection&&o.annotationsCollection.forEach(e=>{e.$&&e.$.forEach((function(e){e.rsv||(e.$&&0!==e.$.length&&e.$.forEach((function(e){"cmt"===e["@"]&&t++})),t++)}))}),t},d.removeSidFromAnnotations=function(e){d.setPropertyValueInAnnotations(e,"sid",null)},d.removeGuidFromAnnotations=function(e){d.setPropertyValueInAnnotations(e,"Guid","")},d.setPropertyValueInAnnotations=function(e,t,n,i){e.accept(e=>{(e instanceof o.GAnnotationsList||e.hasMixin(o.GAnnotation)||e instanceof o.GComment)&&e.setProperty(t,n,i)})},e.exports=d},,function(e,t,n){"use strict";var o=n(41),i=n(144),a=n(81).f,r=o("unscopables"),s=Array.prototype;void 0===s[r]&&a(s,r,{configurable:!0,value:i(null)}),e.exports=function(e){s[r][e]=!0}},function(e,t,n){"use strict";var o=n(439),i=TypeError;e.exports=function(e){if(o(e))throw new i("The method doesn't accept regular expressions");return e}},function(e,t,n){"use strict";var o=n(41)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[o]=!1,"/./"[e](t)}catch(e){}}return!1}},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function o(e){this._providerManager=e}n(18),n(29),n(124),o.Errors={UnknownError:0,ConnectionError:1},o.prototype._providerManager=null,o.prototype._enabled=!0,o.prototype.addPreviews=function(e){throw new Error("GFontsProvider.addPreviews: virtual")},o.prototype.load=function(e,t,n,o){throw new Error("GFontsProvider.load: virtual")},o.prototype.getTotalFonts=function(e){throw new Error("GFontsProvider.getTotalFonts: virtual")},o.prototype.getProviderId=function(){throw new Error("GFontsProvider.getProviderId: virtual")},o.prototype.resolveFont=function(e,t,n,o){throw new Error("GFontsProvider.resolveFont: virtual")},o.prototype.isInitialized=function(){return!0},o.prototype.resetProvider=function(){},o.prototype.hasEnabler=function(){return!1},o.prototype.getEnabler=function(){return null},o.prototype.setEnabled=function(e){this._enabled=!!e},o.prototype.isEnabled=function(){return this._enabled},o.prototype._searchFilter=function(e){return function(t){return e.indexOf("%")>=0?t.family.toLowerCase().startsWith(e.replace(/%/g,"")):t.family.toLowerCase()==e.toLowerCase()}},o.prototype._getClosestKey=function(e,t,n,o){var i,a=Number.POSITIVE_INFINITY;n=Number(n);for(var r=-1,s=0;s<e.length;s++){var l=e[s];l.family===t&&(i=(n-l.weight)*(n-l.weight),o!==l.style&&(i+=9e4),i<a&&(a=i,r=s))}return r},e.exports=o},function(e,t,n){var o,i,a,r,s,l;e.exports=(l=n(47),i=(o=l).lib,a=i.Base,r=i.WordArray,(s=o.x64={}).Word=a.extend({init:function(e,t){this.high=e,this.low=t}}),s.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],o=0;o<t;o++){var i=e[o];n.push(i.high),n.push(i.low)}return r.create(n,this.sigBytes)},clone:function(){for(var e=a.clone.call(this),t=e.words=this.words.slice(0),n=t.length,o=0;o<n;o++)t[o]=t[o].clone();return e}}),l)},,,,,,function(e,t,n){"use strict";n(7),n(3);var o=n(1);const i=n(222),a=n(143);function r(){}o.GObject.inherit(r,i),r.Item=function(e,t){i.Item.call(this,e),this.setFile(t)},o.GObject.inherit(r.Item,i.Item),r.Item.prototype._app=null,r.Item.prototype._filename=null,r.Item.prototype._ext=null,r.Item.prototype._id=null,r.Item.prototype._file=null,r.Item.prototype.isRegistrable=function(){return!!this.getId()},r.Item.prototype.getId=function(){return this._id},r.Item.prototype.setId=function(e){return this._id=e,this},r.Item.prototype.getFullName=function(){return this._filename},r.Item.prototype.getName=function(){return this._filename},r.Item.prototype.setFileName=function(e){return this._filename=e,this},r.Item.prototype.getExtension=function(){return this._ext&&this._ext.toUpperCase()||"CDRAPP"},r.Item.prototype.setFile=function(e){if(!e)throw new Error(o.GLocale.get(new o.GLocaleKey("GExternalStorage","text.error-file-cant-be-null")));e=a.createOrReturnSelfInstance(e),this._file=e,this._id=e.id,this._filename=e.name},r.Item.prototype.getFile=function(){const e=this._file;return!e.settings&&this._client&&(e.settings=this._client.getSettings()),e},r.Item.prototype.hasFileSettings=function(){return this._file&&this._file.settings},r.Item.prototype.getUniqueId=function(){return this._id},r.Item.prototype.getVersion=function(){throw Error("Not implemented!")},r.Item.prototype.getMimeType=function(){throw Error("Not implemented!")},r.Item.prototype.hasVersionControl=function(){return!1},r.Item.prototype.hasUpdates=async function(){throw Error("Not implemented!")},r.Item.prototype.getLatestFileVersion=async function(){throw Error("Not implemented!")},r.Item.prototype.getLatestFileInfo=async function(){throw Error("Not implemented!")},r.Item.prototype.exists=async function(){throw Error("Not implemented!")},r.Item.prototype.isVersionNewerThan=function(){throw Error("Not implemented!")},r.Item.prototype.setCloudClient=function(e){this._client=e},r.Item.prototype.getCloudClient=function(){return this._client},r.Item.prototype.supportsSharing=function(){return this._getClient().isCorporate()},r.Item.prototype.getCorporateProviderName=function(){throw Error("Not implemented!")},r.Item.prototype.isEmailFromCorporateDomain=function(){throw Error("Not implemented!")},r.Item.prototype.toString=function(){return"[Object GExternalStorage.Item]"},e.exports=r},function(e,t,n){"use strict";var o=n(1);function i(){}i.GVDESIGN={ext:"gvdesign",mime:"application/gravit+design",name:new o.GLocaleKey("GDocument","file-type.gvdesign"),title:new o.GLocaleKey("GDocument","title.save-gvdesign"),category:"gravit",load:!0,store:!0,import_image:!1,default:!0},i.HEIC={ext:"heic",mime:"image/heic",name:new o.GLocaleKey("GDocument","file-type.png"),category:"image",load:!0,store:!1,import_image:!0},i.PNG={ext:"png",mime:"image/png",name:new o.GLocaleKey("GDocument","file-type.png"),category:"image",load:!0,store:!0,import_image:!0},i.JPG={ext:"jpg",mime:"image/jpeg",name:new o.GLocaleKey("GDocument","file-type.jpeg"),category:"image",load:!0,store:!0,import_image:!0},i.JPEG={ext:"jpeg",mime:"image/jpeg",category:"image",load:!0,import_image:!0},i.SVG={ext:"svg",mime:"image/svg+xml",name:new o.GLocaleKey("GDocument","file-type.svg"),category:"vector",load:!0,store:!0,import_image:!0},i.SVGZ={ext:"svgz",mime:"image/svg+xml",name:new o.GLocaleKey("GDocument","file-type.svgz"),category:"vector",load:!0,store:!1,import_image:!0},i.PDF={ext:"pdf",mime:"application/pdf",name:new o.GLocaleKey("GDocument","file-type.pdf"),category:"document",load:!0,store:!0,import_image:!0},i.AI={ext:"ai",mime:"application/pdf",name:new o.GLocaleKey("GDocument","file-type.ai"),category:"document",load:!0,store:!1,import_image:!0,pro:!0},i.EPS={ext:"eps",mime:"application/postscript",name:new o.GLocaleKey("GDocument","file-type.eps"),category:"document",load:!0,store:!1,import_image:!0,pro:!0},i.SKETCH={ext:"sketch",mime:"application/zip",name:new o.GLocaleKey("GDocument","file-type.sketch"),category:"document",load:!0,store:!1,import_image:!0,pro:!0},i.ZIP={ext:"zip",mime:"application/zip",load:!1,store:!1,import_image:!1},i.getFileTypesArray=function(){return[i.GVDESIGN,i.PNG,i.HEIC,i.JPG,i.JPEG,i.SVG,i.PDF,i.EPS]},e.exports=i},,,function(e,t,n){"use strict";n(3);var o=n(1);function i(e,t){this.document=e,this.state=t}o.GObject.inherit(i,o.GEvent),i.prototype.document=null,i.prototype.state=null,i.prototype.toString=function(){return"Object [GApplicationStateChangedEvent]"},e.exports=i},function(e,t,n){"use strict";n(3);const{GEvent:o,GObject:i}=n(1);function a(e,t){this.type=e,this.data=t}i.inherit(a,o),a.prototype.type=null,a.prototype.data=null,a.Type={AnnotationsUpdate:0,ShareUpdate:10,UserUpdate:20,LockRequest:30,LockUpdated:31,FileUpdate:40,FileAutoSave:41,ReviewStatusChanged:50},a.prototype.toString=function(){return"[Object GCollaborationEvent]"},e.exports=a},function(e,t,n){"use strict";n(3);var o=n(1);function i(){}o.GObject.inherit(i,o.GEventTarget),i.UpdateEvent=function(){},o.GObject.inherit(i.UpdateEvent,o.GEvent),i.UpdateEvent.prototype.toString=function(){return"[Object GView.UpdateEvent]"},i.UPDATE_EVENT=new i.UpdateEvent,i.prototype.getId=function(){throw new Error("Not Supported")},i.prototype.getTitle=function(){throw new Error("Not Supported")},i.prototype.isEnabled=function(){return!0},i.prototype.isVisible=function(){return!0},i.prototype._fireUpdateEvent=function(){this.trigger(i.UPDATE_EVENT)},i.prototype.toString=function(){return"[Object GView]"},e.exports=i},function(e,t,n){"use strict";n(52),n(51),n(62),n(28);var o=n(1),i=n(13),a=n(378),r=n(125),s=n(842),{SidebarsIds:l}=n(185),c=n(786);function d(e,t,n){this._htmlElement=e,this._orientation=t,this._frame=n,this._sidebarWidths={},this._canResize=!1,this._isResizing=!1}o.GObject.inherit(d,o.GEventTarget),d.Orientation={Left:"left",Right:"right"},d.SidebarEvent=c,d.prototype._htmlElement=null,d.prototype._orientation=null,d.prototype._sidebars=null,d.prototype._activeSidebar=null,d.prototype._activeTouchTool=null,d.prototype._touchToolbar=null,d.prototype._sidebarWidths=null,d.prototype._sidebarsSelector=null,d.prototype.getActiveSidebar=function(){return this._activeSidebar},d.prototype.setActiveSidebar=function(e){if(e||this.setActiveTouchTool(null),e!==this._activeSidebar){if(e){var t=this.getSidebar(e);if((!t||!t.isVisible())&&(e=null,this._activeSidebar)){const e=this.getSidebar(this._activeSidebar);if(e&&e.isVisible())return}}for(var n=this._activeSidebar,o=0;o<this._sidebars.length;++o){var i=this._sidebars[o],a=i.sidebar.getId();if(a===e){this._activeSidebar=a,i.container.css("display",""),i.sidebar.activate(),this._sidebarWidths[a]?this._htmlElement.css("width",this._sidebarWidths[a]+"px"):this._htmlElement.css("width",i.sidebar.getDefaultWidth()+"px"),this.relayout(),this.hasEventListeners(d.SidebarEvent)&&this.trigger(new d.SidebarEvent(d.SidebarEvent.Type.Activated,i.sidebar));const e=i.sidebar.getTouchTools();if(e){const t=e.find(e=>{let{def:t}=e;return!!t})||e[0];t&&this.setActiveTouchTool(t)}}else i.container.css("display","none"),a===n&&(i.sidebar.deactivate(),this._activeSidebar=e,this.hasEventListeners(d.SidebarEvent)&&this.trigger(new d.SidebarEvent(d.SidebarEvent.Type.Deactivated,i.sidebar)));this._updateBadge(i.sidebar)}this._htmlElement.find(".sidebar-option").removeClass("active"),this._htmlElement.find(".sidebar-option.sidebar-"+e).addClass("active"),this._activeSidebar&&!this._getSidebarInfo(this._activeSidebar)&&this.setActiveSidebar(this._sidebars[0].sidebar.getId())}},d.prototype.setActiveTouchTool=function(e){this._activeTouchTool&&e&&this._activeTouchTool.id===e.id||(this._htmlElement.find("[g-touch-tool]").removeClass("g-active"),this._htmlElement.find(".sidebar-container").removeClass("g-active"),this._activeTouchTool&&this._activeTouchTool.deactivate(),e?(this._htmlElement.find(".sidebar-".concat(e.sidebar)).addClass("g-active"),this._htmlElement.find('[g-touch-tool="'.concat(e.id,'"]')).addClass("g-active"),this._activeTouchTool=e):this._activeTouchTool=null,this._activeTouchTool&&this._activeTouchTool.activate())},d.prototype.showSidebar=function(e){if(this.getSidebar(e)&&this._activeSidebar!==e){null===this._activeSidebar&&this.setActiveSidebar(e);var t=this._htmlElement.find(".sidebar-option.sidebar-"+e);t.is(":hidden")&&t.show()}},d.prototype.hideSidebar=function(e){if(this.getActiveSidebar()===e){for(var t=null,n=0;n<this._sidebars.length&&!t;++n)if(this._sidebars[n].sidebar.getId()!==e){var o=this._sidebars[n].sidebar.getId();this._htmlElement.find(".sidebar-option.sidebar-"+o).is(":visible")&&(t=o)}this.setActiveSidebar(t)}var i=this._htmlElement.find(".sidebar-option.sidebar-"+e);i.is(":visible")&&i.hide()},d.prototype.setSidebarEnabled=function(e,t){var n=this._getSidebarInfo(e);if(n)if(t)n.container.find(".g-disabled-overlay").remove(),n.container.removeClass("g-disabled");else{var o=n.container.find(".g-disabled-overlay");0===o.length&&(o=$("<div></div>").addClass("g-disabled-overlay").appendTo(n.container)),n.container.addClass("g-disabled")}},d.prototype.init=function(){this._sidebars=[];var e=function(e,t){t>1&&!this._sidebarsSelector&&(this._sidebarsSelector=$("<div/>").addClass("sidebar-selector").css("display","none").appendTo(this._htmlElement),this._htmlElement.css("width",e.getDefaultWidth()+"px")),this._sidebarsSelector&&$("<div/>").addClass("sidebar-option sidebar-"+e.getId()).append([$("<span/>").addClass("sidebar-title").text(o.GLocale.get(e.getTitle())),$("<span/>").addClass("g-badge").hide()]).on("click",this._tryActivateSidebar.bind(this,e)).appendTo(this._sidebarsSelector);var n=$("<div></div>").addClass("sidebar-container sidebar-"+e.getId()+(this._sidebarsSelector?" multiple":"")).css("display","none").appendTo(this._htmlElement);e.init(n),this._sidebars.push({container:n,sidebar:e}),n.find("button").each((function(e,t){$(t).on("mousedown",(function(e){e.preventDefault()}))}));const i=gDesigner.getLicense();e.addEventListener(a.UpdateEvent,function(){this.setSidebarEnabled(e.getId(),e.isEnabled()&&i.canAccessFreemium()),this._updateTouchToolbar(),this._updateBadge(e)}.bind(this)),e.getId()===l.GInspectorSidebar&&e.addEventListener(d.SidebarEvent,function(e){[d.SidebarEvent.Type.ChildAdded,d.SidebarEvent.Type.ChildRemoved].includes(e.type)&&this._updateTouchToolbar()}.bind(this)),this.setSidebarEnabled(e.getId(),e.isEnabled())}.bind(this),t=[];for(let e=0;e<window.gravit.sidebars.length;++e){let n=window.gravit.sidebars[e];n.getOrientation()===this._orientation&&t.push(n)}if(window.gravit.sidebars)for(let n=0;n<t.length;++n){let o=t[n];o.getOrientation()===this._orientation&&e(o,t.length)}gDesigner.addEventListener(r,this._settingChanged,this),this._mouseDownHandler=this._documentMouseDown.bind(this),this._mouseMoveHandler=this._documentMouseMove.bind(this),this._mouseReleaseHandler=this._resizeMouseUp.bind(this),document.addEventListener("mousemove",this._mouseMoveHandler),document.addEventListener("mousedown",this._mouseDownHandler),document.addEventListener("mouseup",this._mouseReleaseHandler,!0),document.addEventListener("dragstart",this._mouseMoveHandler),document.addEventListener("drag",this._mouseMoveHandler),document.addEventListener("dragend",this._mouseMoveHandler,!0),this._updateTouchToolbar()},d.prototype.setView=function(e){e!==this._view&&(this._view&&(this._view.removeEventListener(i.GMouseEvent.Down,this._mouseDownHandler,this),this._view.removeEventListener(i.GMouseEvent.Move,this._mouseMoveHandler,this),this._view.removeEventListener(i.GMouseEvent.DragStart,this._mouseMoveHandler,this),this._view.removeEventListener(i.GMouseEvent.Drag,this._mouseMoveHandler,this),this._view.removeEventListener(i.GMouseEvent.DragEnd,this._mouseMoveHandler,this),this._view.removeEventListener(i.GMouseEvent.Release,this._mouseReleaseHandler,this)),this._view=e,this._view&&(this._view.addEventListener(i.GMouseEvent.Down,this._mouseDownHandler,this),this._view.addEventListener(i.GMouseEvent.Move,this._mouseMoveHandler,this),this._view.addEventListener(i.GMouseEvent.DragStart,this._mouseMoveHandler,this),this._view.addEventListener(i.GMouseEvent.Drag,this._mouseMoveHandler,this),this._view.addEventListener(i.GMouseEvent.DragEnd,this._mouseMoveHandler,this),this._view.addEventListener(i.GMouseEvent.Release,this._mouseReleaseHandler,this)))},d.prototype._isActiveSidebarDeactivatable=function(){return!(this.getSidebar(this._activeSidebar)&&!this.getSidebar(this._activeSidebar).isDeactivatable())},d.prototype._tryActivateSidebar=function(e){return!!this._isActiveSidebarDeactivatable()&&(gDesigner.stats("sidebars_activate_sidebar",e&&e.getId()||"unkn"),this.setActiveSidebar(e.getId()),this.setSidebarEnabled(e.getId(),e.isEnabled()),!0)},d.prototype.disableContextSensitive=function(){this._updateTouchToolbar({disableContextSensitive:!0})},d.prototype.enableContextSensitive=function(){this._updateTouchToolbar()},d.prototype._documentMouseMove=function(e){if(this._htmlElement&&this._htmlElement[0])if(this._isResizing){var t;e instanceof MouseEvent?t=e.pageX:(e.isImmediatePropagationStopped=!0,t=e.client.getX()/o.GPaintCanvas.getScreenDPI()),e.stopPropagation instanceof Function&&e.stopPropagation(),this._newWidth=this._orientation===d.Orientation.Left?t:window.innerWidth-t,this._newWidth<this._minimumWidth&&(this._newWidth=this._minimumWidth),this._htmlElement.css("width",this._newWidth+"px");var n=this.getSidebar(this._activeSidebar);n&&n.resize()}else{var i=this._orientation===d.Orientation.Left?this._htmlElement[0].offsetWidth:window.innerWidth-this._htmlElement[0].offsetWidth,a=o.GMath.isEqualEps(e.pageX,i,3*o.GPaintCanvas.getScreenDPI())&&this._orientation!==d.Orientation.Right;(a||this._canResize)&&(a&&!this._canResize?(this._frame.addClass("resize"),this._canResize=a):this._canResize&&!a&&(this._frame.removeClass("resize"),this._canResize=a))}},d.prototype._documentMouseDown=function(e){var t=this.getSidebar(this._activeSidebar);this._canResize&&t&&t.isResizeable()&&(this._isResizing=!0,this._minimumWidth=t.getMinimumWidth(),e instanceof i.GMouseEvent&&(e.isImmediatePropagationStopped=!0),e.stopPropagation instanceof Function&&e.stopPropagation())},d.prototype._resizeMouseUp=function(e){if(this._isResizing){e instanceof i.GMouseEvent&&(e.isImmediatePropagationStopped=!0),e.stopPropagation instanceof Function&&e.stopPropagation(),this._isResizing=!1;var t=this.getSidebar(this._activeSidebar);t&&gDesigner.setSetting("sidebars_width_"+t.getId(),this._newWidth)}},d.prototype.relayout=function(){if(this._activeSidebar){let e=this.getSidebar(this._activeSidebar);e&&(this._htmlElement.css("width",e.getSettingWidth()+"px"),e.relayout())}for(var e=0,t=0,n=0;n<this._sidebars.length;++n){let i=this._sidebars[n];var o=i.sidebar.getId();i.sidebar.isVisible()?(e++,this._htmlElement.find(".sidebar-option.sidebar-"+o).show()):this._htmlElement.find(".sidebar-option.sidebar-"+o).hide(),i.sidebar.isEnabled()&&t++,this._updateBadge(i.sidebar)}if(e>0){let n=this._htmlElement.find(".sidebar-container");this._sidebarsSelector&&t>0&&(this._sidebarsSelector.css("display",""),this._sidebarsSelector.toggleClass("singleton",1===e),n.hasClass("multiple")||n.addClass("multiple")),this._orientation===d.Orientation.Right&&n.css("bottom",$(".license-info:visible").length>0?parseInt($(".license-info:visible").outerHeight(),10):0)}else this._sidebarsSelector&&this._sidebarsSelector.css("display","none"),this._htmlElement.find(".sidebar-container").removeClass("multiple");this._updateTouchToolbar()},d.prototype._getSidebarInfo=function(e){if(e&&this._sidebars)for(var t=0;t<this._sidebars.length;++t){if(this._sidebars[t].sidebar.getId()===e)return this._sidebars[t]}return null},d.prototype._settingChanged=function(e){if(e.key==="sidebars_"+this._orientation+"_active"){if(gDesigner.isTouchEnabled()&&e.restoring)return;this.setActiveSidebar(e.newValue?e.newValue:null),gDesigner.setPartVisible(this.getSidebarsPart(),!!e.newValue)}else if(0===e.key.indexOf("sidebars_width_")&&this._orientation!==d.Orientation.Right){var t=e.key.substr("sidebars_width_".length);this._sidebarWidths[t]=e.newValue,t===this._activeSidebar&&(this._htmlElement.css("width",e.newValue+"px"),gDesigner.relayout())}else"touch"===e.key&&(this._updateTouchToolbar(),this._htmlElement.find(".appearance-properties-panel").removeClass("display-none"))},d.prototype._updateBadge=function(e){if(this._sidebarsSelector){var t=this._sidebarsSelector.find(".sidebar-option.sidebar-"+e.getId()),n=t.find(".g-badge");e.updateBadge(n)?(t.addClass("content-width"),n.show()):(t.removeClass("content-width"),n.hide())}},d.prototype.getSidebar=function(e){var t=null;if(e){var n=this._getSidebarInfo(e);n&&(t=n.sidebar)}return t},d.prototype.getSidebarsPart=function(){switch(this._orientation){case d.Orientation.Left:return s.LeftSidebars;case d.Orientation.Right:return s.RightSidebars}},d.prototype.addClassName=function(e){this._htmlElement.find(".sidebar-container").addClass(e)},d.prototype.removeClassName=function(e){this._htmlElement.find(".sidebar-container").removeClass(e)},d.setOrientationStateInSetting=function(e,t){gDesigner.setSetting(d.getSettingNameForSidebar(e),t)},d.isOrientationActiveInSetting=function(e){return gDesigner.getSetting(d.getSettingNameForSidebar(e))},d.getSettingNameForSidebar=function(e){return"sidebars_"+e+"_active"},d.prototype.getHtmlElement=function(){return this._htmlElement},d.prototype.setEnabled=function(e,t){$(".sidebar-selector > div")[t?"removeClass":"addClass"]("g-disabled"),e._sidebars.forEach(e=>{e.container[t?"removeClass":"addClass"]("g-disabled")})},e.exports=d},function(e,t,n){"use strict";var o={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,a=i&&!o.call({1:2},1);t.f=a?function(e){var t=i(this,e);return!!t&&t.enumerable}:o},function(e,t,n){"use strict";var o=n(35),i=n(55),a=n(226),r=n(152),s=n(596),l=n(41),c=TypeError,d=l("toPrimitive");e.exports=function(e,t){if(!i(e)||a(e))return e;var n,l=r(e,d);if(l){if(void 0===t&&(t="default"),n=o(l,e,t),!i(n)||a(n))return n;throw new c("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},function(e,t,n){"use strict";var o=n(281);e.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){"use strict";var o=n(48),i=n(20),a=n(227);e.exports=!o&&!i((function(){return 7!==Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";var o=n(48),i=n(20);e.exports=o&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(e,t,n){"use strict";var o=n(25),i=n(20),a=n(31),r=n(58),s=n(48),l=n(186).CONFIGURABLE,c=n(285),d=n(79),u=d.enforce,p=d.get,g=String,h=Object.defineProperty,f=o("".slice),m=o("".replace),y=o([].join),v=s&&!i((function(){return 8!==h((function(){}),"length",{value:8}).length})),_=String(String).split("String"),b=e.exports=function(e,t,n){"Symbol("===f(g(t),0,7)&&(t="["+m(g(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!r(e,"name")||l&&e.name!==t)&&(s?h(e,"name",{value:t,configurable:!0}):e.name=t),v&&n&&r(n,"arity")&&e.length!==n.arity&&h(e,"length",{value:n.arity});try{n&&r(n,"constructor")&&n.constructor?s&&h(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var o=u(e);return r(o,"source")||(o.source=y(_,"string"==typeof t?t:"")),e};Function.prototype.toString=b((function(){return a(this)&&p(this).source||c(this)}),"toString")},function(e,t,n){"use strict";var o=n(25),i=n(58),a=n(172),r=n(387).indexOf,s=n(242),l=o([].push);e.exports=function(e,t){var n,o=a(e),c=0,d=[];for(n in o)!i(s,n)&&i(o,n)&&l(d,n);for(;t.length>c;)i(o,n=t[c++])&&(~r(d,n)||l(d,n));return d}},function(e,t,n){"use strict";var o=n(172),i=n(287),a=n(93),r=function(e){return function(t,n,r){var s=o(t),l=a(s);if(0===l)return!e&&-1;var c,d=i(r,l);if(e&&n!=n){for(;l>d;)if((c=s[d++])!=c)return!0}else for(;l>d;d++)if((e||d in s)&&s[d]===n)return e||d||0;return!e&&-1}};e.exports={includes:r(!0),indexOf:r(!1)}},function(e,t,n){"use strict";t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";var o=n(386),i=n(288);e.exports=Object.keys||function(e){return o(e,i)}},function(e,t,n){"use strict";var o=n(113);e.exports=o("document","documentElement")},function(e,t,n){"use strict";var o=n(289),i=n(173),a=TypeError;e.exports=function(e){if(o(e))return e;throw new a(i(e)+" is not a constructor")}},function(e,t,n){"use strict";var o,i,a,r,s=n(23),l=n(229),c=n(116),d=n(31),u=n(58),p=n(20),g=n(390),h=n(145),f=n(227),m=n(290),y=n(393),v=n(187),_=s.setImmediate,b=s.clearImmediate,w=s.process,C=s.Dispatch,x=s.Function,S=s.MessageChannel,E=s.String,A=0,T={};p((function(){o=s.location}));var G=function(e){if(u(T,e)){var t=T[e];delete T[e],t()}},P=function(e){return function(){G(e)}},D=function(e){G(e.data)},L=function(e){s.postMessage(E(e),o.protocol+"//"+o.host)};_&&b||(_=function(e){m(arguments.length,1);var t=d(e)?e:x(e),n=h(arguments,1);return T[++A]=function(){l(t,void 0,n)},i(A),A},b=function(e){delete T[e]},v?i=function(e){w.nextTick(P(e))}:C&&C.now?i=function(e){C.now(P(e))}:S&&!y?(r=(a=new S).port2,a.port1.onmessage=D,i=c(r.postMessage,r)):s.addEventListener&&d(s.postMessage)&&!s.importScripts&&o&&"file:"!==o.protocol&&!p(L)?(i=L,s.addEventListener("message",D,!1)):i="onreadystatechange"in f("script")?function(e){g.appendChild(f("script")).onreadystatechange=function(){g.removeChild(this),G(e)}}:function(e){setTimeout(P(e),0)}),e.exports={set:_,clear:b}},function(e,t,n){"use strict";var o=n(136);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(o)},function(e,t,n){"use strict";var o=n(23),i=n(48),a=Object.getOwnPropertyDescriptor;e.exports=function(e){if(!i)return o[e];var t=a(o,e);return t&&t.value}},function(e,t,n){"use strict";var o=function(){this.head=null,this.tail=null};o.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}},e.exports=o},function(e,t,n){"use strict";e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},function(e,t,n){"use strict";var o=n(35),i=n(49),a=n(152);e.exports=function(e,t,n){var r,s;i(e);try{if(!(r=a(e,"return"))){if("throw"===t)throw n;return n}r=o(r,e)}catch(e){s=!0,r=e}if("throw"===t)throw n;if(s)throw r;return i(r),n}},function(e,t,n){"use strict";var o=n(174),i=n(328),a=n(188).CONSTRUCTOR;e.exports=a||!i((function(e){o.all(e).then(void 0,(function(){}))}))},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";var o=n(48),i=n(25),a=n(35),r=n(20),s=n(389),l=n(388),c=n(380),d=n(86),u=n(225),p=Object.assign,g=Object.defineProperty,h=i([].concat);e.exports=!p||r((function(){if(o&&1!==p({b:1},p(g({},"a",{enumerable:!0,get:function(){g(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol("assign detection");return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!==p({},e)[n]||"abcdefghijklmnopqrst"!==s(p({},t)).join("")}))?function(e,t){for(var n=d(e),i=arguments.length,r=1,p=l.f,g=c.f;i>r;)for(var f,m=u(arguments[r++]),y=p?h(s(m),p(m)):s(m),v=y.length,_=0;v>_;)f=y[_++],o&&!a(g,m,f)||(n[f]=m[f]);return n}:p},,,function(e,t,n){"use strict";var o=n(30),i=n(35),a=n(85),r=n(186),s=n(31),l=n(404),c=n(235),d=n(164),u=n(126),p=n(102),g=n(72),h=n(41),f=n(190),m=n(405),y=r.PROPER,v=r.CONFIGURABLE,_=m.IteratorPrototype,b=m.BUGGY_SAFARI_ITERATORS,w=h("iterator"),C=function(){return this};e.exports=function(e,t,n,r,h,m,x){l(n,t,r);var S,E,A,T=function(e){if(e===h&&I)return I;if(!b&&e&&e in D)return D[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},G=t+" Iterator",P=!1,D=e.prototype,L=D[w]||D["@@iterator"]||h&&D[h],I=!b&&L||T(h),k="Array"===t&&D.entries||L;if(k&&(S=c(k.call(new e)))!==Object.prototype&&S.next&&(a||c(S)===_||(d?d(S,_):s(S[w])||g(S,w,C)),u(S,G,!0,!0),a&&(f[G]=C)),y&&"values"===h&&L&&"values"!==L.name&&(!a&&v?p(D,"name","values"):(P=!0,I=function(){return i(L,this)})),h)if(E={values:T("values"),keys:m?I:T("keys"),entries:T("entries")},x)for(A in E)(b||P||!(A in D))&&g(D,A,E[A]);else o({target:t,proto:!0,forced:b||P},E);return a&&!x||D[w]===I||g(D,w,I,{name:h}),f[t]=I,E}},function(e,t,n){"use strict";var o=n(405).IteratorPrototype,i=n(144),a=n(163),r=n(126),s=n(190),l=function(){return this};e.exports=function(e,t,n,c){var d=t+" Iterator";return e.prototype=i(o,{next:a(+!c,n)}),r(e,d,!1,!0),s[d]=l,e}},function(e,t,n){"use strict";var o,i,a,r=n(20),s=n(31),l=n(55),c=n(144),d=n(235),u=n(72),p=n(41),g=n(85),h=p("iterator"),f=!1;[].keys&&("next"in(a=[].keys())?(i=d(d(a)))!==Object.prototype&&(o=i):f=!0),!l(o)||r((function(){var e={};return o[h].call(e)!==e}))?o={}:g&&(o=c(o)),s(o[h])||u(o,h,(function(){return this})),e.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:f}},function(e,t,n){"use strict";e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){"use strict";var o=n(227)("span").classList,i=o&&o.constructor&&o.constructor.prototype;e.exports=i===Object.prototype?void 0:i},function(e,t,n){"use strict";var o=n(20),i=n(41),a=n(48),r=n(85),s=i("iterator");e.exports=!o((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n=new URLSearchParams("a=1&a=2&b=3"),o="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),o+=n+e})),n.delete("a",2),n.delete("b",void 0),r&&(!e.toJSON||!n.has("a",1)||n.has("a",2)||!n.has("a",void 0)||n.has("b"))||!t.size&&(r||!a)||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==o||"x"!==new URL("http://x",void 0).host}))},function(e,t,n){"use strict";n(17);var o=n(30),i=n(23),a=n(394),r=n(35),s=n(25),l=n(48),c=n(408),d=n(72),u=n(127),p=n(272),g=n(126),h=n(404),f=n(79),m=n(153),y=n(31),v=n(58),_=n(116),b=n(121),w=n(49),C=n(55),x=n(56),S=n(144),E=n(163),A=n(230),T=n(191),G=n(309),P=n(290),D=n(41),L=n(336),I=D("iterator"),k=f.set,O=f.getterFor("URLSearchParams"),F=f.getterFor("URLSearchParamsIterator"),R=a("fetch"),M=a("Request"),N=a("Headers"),B=M&&M.prototype,U=N&&N.prototype,$=i.RegExp,j=i.TypeError,K=i.decodeURIComponent,V=i.encodeURIComponent,H=s("".charAt),W=s([].join),z=s([].push),q=s("".replace),Y=s([].shift),X=s([].splice),Q=s("".split),J=s("".slice),Z=/\+/g,ee=Array(4),te=function(e){return ee[e-1]||(ee[e-1]=$("((?:%[\\da-f]{2}){"+e+"})","gi"))},ne=function(e){try{return K(e)}catch(t){return e}},oe=function(e){var t=q(e,Z," "),n=4;try{return K(t)}catch(e){for(;n;)t=q(t,te(n--),ne);return t}},ie=/[!'()~]|%20/g,ae={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},re=function(e){return ae[e]},se=function(e){return q(V(e),ie,re)},le=h((function(e,t){k(this,{type:"URLSearchParamsIterator",target:O(e).entries,index:0,kind:t})}),"URLSearchParams",(function(){var e=F(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=void 0,G(void 0,!0);var o=t[n];switch(e.kind){case"keys":return G(o.key,!1);case"values":return G(o.value,!1)}return G([o.key,o.value],!1)}),!0),ce=function(e){this.entries=[],this.url=null,void 0!==e&&(C(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===H(e,0)?J(e,1):e:x(e)))};ce.prototype={type:"URLSearchParams",bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,o,i,a,s,l,c=this.entries,d=T(e);if(d)for(n=(t=A(e,d)).next;!(o=r(n,t)).done;){if(a=(i=A(w(o.value))).next,(s=r(a,i)).done||(l=r(a,i)).done||!r(a,i).done)throw new j("Expected sequence with length 2");z(c,{key:x(s.value),value:x(l.value)})}else for(var u in e)v(e,u)&&z(c,{key:u,value:x(e[u])})},parseQuery:function(e){if(e)for(var t,n,o=this.entries,i=Q(e,"&"),a=0;a<i.length;)(t=i[a++]).length&&(n=Q(t,"="),z(o,{key:oe(Y(n)),value:oe(W(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],o=0;o<t.length;)e=t[o++],z(n,se(e.key)+"="+se(e.value));return W(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var de=function(){m(this,ue);var e=arguments.length>0?arguments[0]:void 0,t=k(this,new ce(e));l||(this.size=t.entries.length)},ue=de.prototype;if(p(ue,{append:function(e,t){var n=O(this);P(arguments.length,2),z(n.entries,{key:x(e),value:x(t)}),l||this.length++,n.updateURL()},delete:function(e){for(var t=O(this),n=P(arguments.length,1),o=t.entries,i=x(e),a=n<2?void 0:arguments[1],r=void 0===a?a:x(a),s=0;s<o.length;){var c=o[s];if(c.key!==i||void 0!==r&&c.value!==r)s++;else if(X(o,s,1),void 0!==r)break}l||(this.size=o.length),t.updateURL()},get:function(e){var t=O(this).entries;P(arguments.length,1);for(var n=x(e),o=0;o<t.length;o++)if(t[o].key===n)return t[o].value;return null},getAll:function(e){var t=O(this).entries;P(arguments.length,1);for(var n=x(e),o=[],i=0;i<t.length;i++)t[i].key===n&&z(o,t[i].value);return o},has:function(e){for(var t=O(this).entries,n=P(arguments.length,1),o=x(e),i=n<2?void 0:arguments[1],a=void 0===i?i:x(i),r=0;r<t.length;){var s=t[r++];if(s.key===o&&(void 0===a||s.value===a))return!0}return!1},set:function(e,t){var n=O(this);P(arguments.length,1);for(var o,i=n.entries,a=!1,r=x(e),s=x(t),c=0;c<i.length;c++)(o=i[c]).key===r&&(a?X(i,c--,1):(a=!0,o.value=s));a||z(i,{key:r,value:s}),l||(this.size=i.length),n.updateURL()},sort:function(){var e=O(this);L(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=O(this).entries,o=_(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)o((t=n[i++]).value,t.key,this)},keys:function(){return new le(this,"keys")},values:function(){return new le(this,"values")},entries:function(){return new le(this,"entries")}},{enumerable:!0}),d(ue,I,ue.entries,{name:"entries"}),d(ue,"toString",(function(){return O(this).serialize()}),{enumerable:!0}),l&&u(ue,"size",{get:function(){return O(this).entries.length},configurable:!0,enumerable:!0}),g(de,"URLSearchParams"),o({global:!0,constructor:!0,forced:!c},{URLSearchParams:de}),!c&&y(N)){var pe=s(U.has),ge=s(U.set),he=function(e){if(C(e)){var t,n=e.body;if("URLSearchParams"===b(n))return t=e.headers?new N(e.headers):new N,pe(t,"content-type")||ge(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),S(e,{body:E(0,x(n)),headers:E(0,t)})}return e};if(y(R)&&o({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return R(e,arguments.length>1?he(arguments[1]):{})}}),y(M)){var fe=function(e){return m(this,B),new M(e,arguments.length>1?he(arguments[1]):{})};B.constructor=fe,fe.prototype=B,o({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:fe})}}e.exports={URLSearchParams:de,getState:O}},function(e,t,n){"use strict";e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(e,t,n){"use strict";var o=n(120),i=n(109),a=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=o(e),n=i(t);if(t!==n)throw new a("Wrong length or index");return n}},function(e,t,n){"use strict";var o=n(86),i=n(287),a=n(93);e.exports=function(e){for(var t=o(this),n=a(t),r=arguments.length,s=i(r>1?arguments[1]:void 0,n),l=r>2?arguments[2]:void 0,c=void 0===l?n:i(l,n);c>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var o=n(672),i=RangeError;e.exports=function(e,t){var n=o(e);if(n%t)throw new i("Wrong offset");return n}},function(e,t,n){"use strict";var o=n(381),i=TypeError;e.exports=function(e){var t=o(e,"number");if("number"==typeof t)throw new i("Can't convert number to bigint");return BigInt(t)}},,,,function(e,t,n){"use strict";n(276);const{ShareRoles:o,defaultUserSettings:{share:{defaults:{public:{role:i}={},private:{role:a}={}}={}}={}}={}}=n(9),r=n(1044),s=n(1047),l=n(1048);function c(){throw"No instantiate"}c.makeFromShare=function(e){const t=c._makeFromShareRole(e.getRole());return t&&(t.applyPermissions(new s(e.getPermissions())),t.lockPermissions()),t},c.makeFromShareRole=function(e){const t=c._makeFromShareRole(e);return t.lockPermissions(),t},c._makeFromShareRole=function(e){if(!e)return null;const{id:t,name:n,description:o,status:i,pro:a,permissions:c={},assignable:d,level:u}=e,p=new r({id:t,level:u,name:n,description:o,status:i,pro:a,permissions:new s(c),assignable:d}),g=l[p.id];return g&&p.grant(g),p},c.ROLES={get ALL(){return Object.values(o).map(e=>c.makeFromShareRole(e))},get DEFAULT_PUBLIC_ROLE(){return c.makeFromShareRole(i)},get DEFAULT_PRIVATE_ROLE(){return c.makeFromShareRole(a)},get NO_ACCESS_ROLE(){return c.makeFromShareRole(o.NoAccess)},get APPROVER_ROLE(){return c.makeFromShareRole(o.Approver)},get OWNER_ROLE(){return c.makeFromShareRole(o.Owner)},get VIEWER_ROLE(){return c.makeFromShareRole(o.Viewer)}},e.exports=c},function(e,t,n){"use strict";n(26);const o=n(1049);e.exports=Object.assign({},o)},function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__(399),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t){return new Md5(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Md5},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("md5").update(e,"utf8").digest("hex");if(null==e)throw ERROR;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if("string"!==n){if("object"!==n)throw ERROR;if(null===e)throw ERROR;if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw ERROR;t=!0}for(var o,i,a=0,r=e.length,s=this.blocks,l=this.buffer8;a<r;){if(this.hashed&&(this.hashed=!1,s[0]=s[16],s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)if(ARRAY_BUFFER)for(i=this.start;a<r&&i<64;++a)l[i++]=e[a];else for(i=this.start;a<r&&i<64;++a)s[i>>2]|=e[a]<<SHIFT[3&i++];else if(ARRAY_BUFFER)for(i=this.start;a<r&&i<64;++a)(o=e.charCodeAt(a))<128?l[i++]=o:o<2048?(l[i++]=192|o>>6,l[i++]=128|63&o):o<55296||o>=57344?(l[i++]=224|o>>12,l[i++]=128|o>>6&63,l[i++]=128|63&o):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++a)),l[i++]=240|o>>18,l[i++]=128|o>>12&63,l[i++]=128|o>>6&63,l[i++]=128|63&o);else for(i=this.start;a<r&&i<64;++a)(o=e.charCodeAt(a))<128?s[i>>2]|=o<<SHIFT[3&i++]:o<2048?(s[i>>2]|=(192|o>>6)<<SHIFT[3&i++],s[i>>2]|=(128|63&o)<<SHIFT[3&i++]):o<55296||o>=57344?(s[i>>2]|=(224|o>>12)<<SHIFT[3&i++],s[i>>2]|=(128|o>>6&63)<<SHIFT[3&i++],s[i>>2]|=(128|63&o)<<SHIFT[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++a)),s[i>>2]|=(240|o>>18)<<SHIFT[3&i++],s[i>>2]|=(128|o>>12&63)<<SHIFT[3&i++],s[i>>2]|=(128|o>>6&63)<<SHIFT[3&i++],s[i>>2]|=(128|63&o)<<SHIFT[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var e,t,n,o,i,a,r=this.blocks;this.first?t=((t=((e=((e=r[0]-680876937)<<7|e>>>25)-271733879<<0)^(n=((n=(-271733879^(o=((o=(-1732584194^2004318071&e)+r[1]-117830708)<<12|o>>>20)+e<<0)&(-271733879^e))+r[2]-1126478375)<<17|n>>>15)+o<<0)&(o^e))+r[3]-1316259209)<<22|t>>>10)+n<<0:(e=this.h0,t=this.h1,n=this.h2,t=((t+=((e=((e+=((o=this.h3)^t&(n^o))+r[0]-680876936)<<7|e>>>25)+t<<0)^(n=((n+=(t^(o=((o+=(n^e&(t^n))+r[1]-389564586)<<12|o>>>20)+e<<0)&(e^t))+r[2]+606105819)<<17|n>>>15)+o<<0)&(o^e))+r[3]-1044525330)<<22|t>>>10)+n<<0),t=((t+=((e=((e+=(o^t&(n^o))+r[4]-176418897)<<7|e>>>25)+t<<0)^(n=((n+=(t^(o=((o+=(n^e&(t^n))+r[5]+1200080426)<<12|o>>>20)+e<<0)&(e^t))+r[6]-1473231341)<<17|n>>>15)+o<<0)&(o^e))+r[7]-45705983)<<22|t>>>10)+n<<0,t=((t+=((e=((e+=(o^t&(n^o))+r[8]+1770035416)<<7|e>>>25)+t<<0)^(n=((n+=(t^(o=((o+=(n^e&(t^n))+r[9]-1958414417)<<12|o>>>20)+e<<0)&(e^t))+r[10]-42063)<<17|n>>>15)+o<<0)&(o^e))+r[11]-1990404162)<<22|t>>>10)+n<<0,t=((t+=((e=((e+=(o^t&(n^o))+r[12]+1804603682)<<7|e>>>25)+t<<0)^(n=((n+=(t^(o=((o+=(n^e&(t^n))+r[13]-40341101)<<12|o>>>20)+e<<0)&(e^t))+r[14]-1502002290)<<17|n>>>15)+o<<0)&(o^e))+r[15]+1236535329)<<22|t>>>10)+n<<0,t=((t+=((o=((o+=(t^n&((e=((e+=(n^o&(t^n))+r[1]-165796510)<<5|e>>>27)+t<<0)^t))+r[6]-1069501632)<<9|o>>>23)+e<<0)^e&((n=((n+=(e^t&(o^e))+r[11]+643717713)<<14|n>>>18)+o<<0)^o))+r[0]-373897302)<<20|t>>>12)+n<<0,t=((t+=((o=((o+=(t^n&((e=((e+=(n^o&(t^n))+r[5]-701558691)<<5|e>>>27)+t<<0)^t))+r[10]+38016083)<<9|o>>>23)+e<<0)^e&((n=((n+=(e^t&(o^e))+r[15]-660478335)<<14|n>>>18)+o<<0)^o))+r[4]-405537848)<<20|t>>>12)+n<<0,t=((t+=((o=((o+=(t^n&((e=((e+=(n^o&(t^n))+r[9]+568446438)<<5|e>>>27)+t<<0)^t))+r[14]-1019803690)<<9|o>>>23)+e<<0)^e&((n=((n+=(e^t&(o^e))+r[3]-187363961)<<14|n>>>18)+o<<0)^o))+r[8]+1163531501)<<20|t>>>12)+n<<0,t=((t+=((o=((o+=(t^n&((e=((e+=(n^o&(t^n))+r[13]-1444681467)<<5|e>>>27)+t<<0)^t))+r[2]-51403784)<<9|o>>>23)+e<<0)^e&((n=((n+=(e^t&(o^e))+r[7]+1735328473)<<14|n>>>18)+o<<0)^o))+r[12]-1926607734)<<20|t>>>12)+n<<0,t=((t+=((a=(o=((o+=((i=t^n)^(e=((e+=(i^o)+r[5]-378558)<<4|e>>>28)+t<<0))+r[8]-2022574463)<<11|o>>>21)+e<<0)^e)^(n=((n+=(a^t)+r[11]+1839030562)<<16|n>>>16)+o<<0))+r[14]-35309556)<<23|t>>>9)+n<<0,t=((t+=((a=(o=((o+=((i=t^n)^(e=((e+=(i^o)+r[1]-1530992060)<<4|e>>>28)+t<<0))+r[4]+1272893353)<<11|o>>>21)+e<<0)^e)^(n=((n+=(a^t)+r[7]-155497632)<<16|n>>>16)+o<<0))+r[10]-1094730640)<<23|t>>>9)+n<<0,t=((t+=((a=(o=((o+=((i=t^n)^(e=((e+=(i^o)+r[13]+681279174)<<4|e>>>28)+t<<0))+r[0]-358537222)<<11|o>>>21)+e<<0)^e)^(n=((n+=(a^t)+r[3]-722521979)<<16|n>>>16)+o<<0))+r[6]+76029189)<<23|t>>>9)+n<<0,t=((t+=((a=(o=((o+=((i=t^n)^(e=((e+=(i^o)+r[9]-640364487)<<4|e>>>28)+t<<0))+r[12]-421815835)<<11|o>>>21)+e<<0)^e)^(n=((n+=(a^t)+r[15]+530742520)<<16|n>>>16)+o<<0))+r[2]-995338651)<<23|t>>>9)+n<<0,t=((t+=((o=((o+=(t^((e=((e+=(n^(t|~o))+r[0]-198630844)<<6|e>>>26)+t<<0)|~n))+r[7]+1126891415)<<10|o>>>22)+e<<0)^((n=((n+=(e^(o|~t))+r[14]-1416354905)<<15|n>>>17)+o<<0)|~e))+r[5]-57434055)<<21|t>>>11)+n<<0,t=((t+=((o=((o+=(t^((e=((e+=(n^(t|~o))+r[12]+1700485571)<<6|e>>>26)+t<<0)|~n))+r[3]-1894986606)<<10|o>>>22)+e<<0)^((n=((n+=(e^(o|~t))+r[10]-1051523)<<15|n>>>17)+o<<0)|~e))+r[1]-2054922799)<<21|t>>>11)+n<<0,t=((t+=((o=((o+=(t^((e=((e+=(n^(t|~o))+r[8]+1873313359)<<6|e>>>26)+t<<0)|~n))+r[15]-30611744)<<10|o>>>22)+e<<0)^((n=((n+=(e^(o|~t))+r[6]-1560198380)<<15|n>>>17)+o<<0)|~e))+r[13]+1309151649)<<21|t>>>11)+n<<0,t=((t+=((o=((o+=(t^((e=((e+=(n^(t|~o))+r[4]-145523070)<<6|e>>>26)+t<<0)|~n))+r[11]-1120210379)<<10|o>>>22)+e<<0)^((n=((n+=(e^(o|~t))+r[2]+718787259)<<15|n>>>17)+o<<0)|~e))+r[9]-343485551)<<21|t>>>11)+n<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=n-1732584194<<0,this.h3=o+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+n<<0,this.h3=this.h3+o<<0)},Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,o=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,o=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,255&o,o>>8&255,o>>16&255,o>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,t,n,o="",i=this.array(),a=0;a<15;)e=i[a++],t=i[a++],n=i[a++],o+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|t>>>4)]+BASE64_ENCODE_CHAR[63&(t<<2|n>>>6)]+BASE64_ENCODE_CHAR[63&n];return e=i[a],o+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"=="};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()}).call(this,__webpack_require__(171),__webpack_require__(101))},function(e,t,n){"use strict";n(7);const{GObject:o}=n(1);function i(e){this._app=e,this._collaborativeFile=null}o.inherit(i,o),i.prototype.getOrCreateCollaborativeFile=async function(){throw"Not implemented"},i.prototype.createCollaborativeFile=async function(){throw"Not implemented"},i.prototype.updateCollaborativeFile=function(){throw"Not implemented"},i.prototype.getCollaborativeFile=async function(){throw"Not implemented"},i.prototype.shareWithUser=async function(e,t){throw"Not implemented"},i.prototype.unshareWithUser=async function(e,t){throw"Not implemented"},i.prototype.setCollaborativeFileStatus=async function(e){throw"Not implemented"},e.exports=i},,,,,function(e,t,n){"use strict";var o=n(1);function i(e){this.license=e}o.GObject.inherit(i,o.GEvent),i.prototype.license=null,e.exports=i},function(e,t,n){"use strict";function o(){}o.PAGE_CLIP_CONTENT_ENABLED=2,o.PAGE_CLIP_CONTENT_DISABLED=1,o.PAGE_CLIP_PROPERTY_NAME="cce",o.EXPORT_PROPERTY_NAME="__export",o.MULTIPAGE_VIEW_ENABLED="mve",o.PropertiesToExcludeFromCopying=null,e.exports=o},function(e,t,n){"use strict";n(17),n(540),n(22),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(7);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var o={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=a?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]}return o.default=e,n&&n.set(e,o),o}(n(1455));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}const a=n(9);let r=!1,s=!1,l=null;const c={TeamsMode:{DESKTOP:{label:"Desktop",code:"desktop"},WEB:{label:"Web",code:"web"},IOS:{label:"Ios",code:"ios"},ANDROID:{label:"Android",code:"android"},OTHER:{label:"Other"}},isExecutingOnMSTeams:async()=>{const e=await c.getTeamsContext().catch(()=>!1);return!!e&&!!e.tid},getTeamsEnv:async function(){switch(l||await c.initTeams(),l.hostClientType){case c.TeamsMode.DESKTOP.code:return c.TeamsMode.DESKTOP.label;case c.TeamsMode.WEB.code:return c.TeamsMode.WEB.label;default:return c.TeamsMode.OTHER.label}},isExecutingOnChannelOrChat:async()=>!!await c.isExecutingOnMSTeams()&&(!!await c.isPrivateChat()||!!await c.isTeamsChannel()),isExecutingOnChannelOrChatSingletonPromise:()=>s,initTeams:()=>{if(l)return Promise.resolve();const e=a.msTeamsMode?15e3:0;return new Promise((t,n)=>{const i=setTimeout(()=>{n()},e);o.initialize(()=>{o.getContext(e=>{l=e,clearTimeout(i),t()})})})},getTeamsContext:async()=>(l||await c.initTeams(),l),getTeamsLocale:async()=>(l||await c.initTeams(),l.locale),isPrivateChat:async()=>!!(await c.getTeamsContext()).chatId,isTeamsChannel:async()=>!!(await c.getTeamsContext()).channelId,sendSettings:async e=>(l||await c.initTeams(),o.authentication.notifySuccess(e)),getAuthenticator:async()=>(l||await c.initTeams(),o.authentication),isExecutingOnMSTeamsSync:()=>r};c.isExecutingOnMSTeams().then(e=>{r=e}),s=c.isExecutingOnChannelOrChat();t.default=c},function(e,t,n){"use strict";e.exports={Position:{Left_Top:0,Center:1,Right_Bottom:2}}},function(e,t,n){"use strict";n(28);var o=n(14),i=o(n(1479));n(52),n(26),n(7),n(18),n(3),n(255),n(62),n(29);var a=n(1),r=n(13),s=n(61),l=o(n(1224)),c=n(9);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=n(151),g=n(16),h=n(27),f=n(431),m=n(78);const y=n(37),v=n(373);var _=c.FILE_FORMATS.map(e=>e.ext);const b=c.FILE_FORMATS.find(e=>e.default).ext;function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._fileExt=e,this._isNativeExt=!!_.includes(this._fileExt);var n=p.FileTypes.filter(t=>t.ext===e)[0];this._title=n.title||n.name,this._mime=n.mime,this._options=t,w.TOOLTIP_CONFIG={[s.TOOLTIP_AREA.MAIN_MENU.TRY_PRO_COMMON]:s.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GSaveAsAction","text.try-this-feature-pro-tooltip-title")),learnMore:"https://documentation.corelvector.com/import-export/export/#quick-exporting",upgradeToProStatsValue:"file.save-as.pdf.300",middle:!1,side:!0})}}a.GObject.inherit(w,h),w.ID="file.save-as",w.TOOLTIP_CONFIG=null,w.DEFAULT_SAVE_OPTIONS={},w.prototype._fileExt=null,w.prototype._isNativeExt=!1,w.prototype._title=null,w.prototype._mime=null,w.prototype._options=null,w.prototype.getId=function(){if("pdf"===this._fileExt){const e=this._options&&this._options.dpi;if(e&&72!==e)return w.ID+"."+this._fileExt+"."+e}return w.ID+"."+this._fileExt},w.prototype.getTitle=function(){if(this._isNativeExt)return gDesigner.getDefaultStorage().canSave()?a.GLocale.get(this._title):a.GLocale.get(new a.GLocaleKey("GDocument","title.download-"+this._fileExt));if("pdf"===this._fileExt){var e=this._options.dpi?this._options.dpi:72;return a.GLocale.get(new a.GLocaleKey("GSaveAsAction","text.dpi-value")).replace("%dpiValue",e).replace("%dpiString",a.GLocale.get(new a.GLocaleKey("GSaveAsAction","text.dpi")))}{const{dpi:e=72}=this._options;return a.GLocale.get(new a.GLocaleKey("GSaveAsAction","pdf"===this._fileExt?"text.save-pdf":"text.save-common")).replace("%title",a.GLocale.get(this._title)).replace("%fileExtension",this._fileExt).replace("%dpiValue",e).replace("%dpiString",a.GLocale.get(new a.GLocaleKey("GSaveAsAction","text.dpi")))}},w.prototype.getCategory=function(){return this._isNativeExt?g.CATEGORY_FILE:"pdf"===this._fileExt?g.CATEGORY_FILE_EXPORT_PDF:g.CATEGORY_FILE_EXPORT},w.prototype.getGroup=function(){return this._isNativeExt?"file":"pdf"===this._fileExt?"export/file-type/"+this._fileExt:"export/file-type"},w.prototype.isPro=function(){return"pdf"===this._fileExt&&300===this._options.dpi},w.prototype.getTooltipArea=function(){return s.TOOLTIP_AREA.MAIN_MENU.TRY_PRO_COMMON},w.prototype.getTooltipConfig=function(e){return"file.save-as.pdf.300"===this.getId()&&e&&w.TOOLTIP_CONFIG[e]||null},w.prototype.getShortcut=function(){return this._isNativeExt?[r.GKey.Constant.SHIFT,r.GKey.Constant.META,r.GKey.Constant.OPTION,"S"]:null},w.prototype.isEnabled=function(e,t){return!!gDesigner.getApplicationManager().isFileFormatEnabledForSaveAs({ext:this._fileExt})&&(!!gDesigner.getApplicationManager().isSavingAsEnabled()&&(!!(t=t||gDesigner.getActiveDocument())&&((e=e||(t.getStorageItem()?t.getStorageItem().getStorage():gDesigner.getDefaultStorage())).canPromptSave()||e.canDownload())))},w.prototype.execute=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w.DEFAULT_SAVE_OPTIONS,i=arguments.length>4?arguments[4]:void 0;const a=t||gDesigner.getActiveDocument();if(a&&a.isCommercialProductFile())return a.openPaywall(this.getId()),!1;new f(()=>{this._performSave(e,a,n,o,i)},()=>{gDesigner.stats("action_cancelled_anonymous",this.getId())})},w.prototype._performSave=async function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,r=i;if(t.isCloudFile()&&(this._fileExt===b&&t.getScene().setCloudSynchronization(t.getStorageItem().getId()),o.lastModifiedDate=t.isModified()?void 0:t.getScene().getLastSavedTime()),e=e||(t.getStorageItem()?t.getStorageItem().getStorage():gDesigner.getDefaultStorage()),!await this._checkWriteAccess(e))return;o.referer=this.getId();const s=!e.canDownload()||this._fileExt!==v.PDF.ext;if(e.canPromptSave()&&s){const i=t.getStorageItem();!r&&i&&(r=i.getName()),r||(r=t.getTitle()),r&&!r.endsWith(this._fileExt)&&(r+=".".concat(this._fileExt.toLowerCase())),e.savePrompt(r,this._getFileTypes(t,e),async e=>{_.includes((e.getExtension()||"").toLowerCase())&&t.setStorageItem(e);let i=this._fileExt!==b||!t.isCloudFile();await t.saveAnnotations(i),o=t.updateSaveOptionsLastModifiedDate(o),o.singleton=!t.isCloudFile(),o=this._updateSaveOptions(o,t,e),t.store(e,n,this._showError,o instanceof l.default?o:Object.assign({},this._options,o))},()=>{n&&n({documentStatus:m.SaveCancelled})})}else if(e.canDownload()){if(r||t.getStorageItem()&&(r=t.getStorageItem().getName()),r=r||t.getTitle()||"Design",!this._isNativeExt&&t.hasPagesWithInfiniteEmptyCanvas())return void y.alert(a.GLocale.get(new a.GLocaleKey("GCommonNames","text.error-emtpy-infinite-canvas")));o=t.updateSaveOptionsLastModifiedDate(o),o.singleton=!t.isCloudFile(),o=u(u({},w.DEFAULT_SAVE_OPTIONS),o),e.download(r+"."+this._fileExt,e=>{e&&t.store(e,n,this._showError,Object.assign({},this._options,o,{filename:r}))})}},w.prototype._checkWriteAccess=async function(e){const t=gContainer.getDefaultStorageDestination(this._fileExt);if(t){const n=await e.getWritePermission(t),o=n.isAuthorized();return!o&&n.getStatusText()&&this._showError(n.getStatusText()),o}return!0},w.prototype._showError=function(e){e&&y.error(e,{showTitle:!1})},w.prototype._getFileTypes=function(){return[{ext:this._fileExt,mime:this._mime}]},w.prototype._updateSaveOptions=function(e){return e},w.prototype.toString=function(){return"[Object GSaveAsAction]"},e.exports=w},function(e,t,n){"use strict";var o=n(14),i=n(1),a=o(n(111)),r=o(n(839));function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};this._cb=e,this._showFormCb=t,this._run()}i.GObject.inherit(s,i.GObject),s.prototype._close=function(){this._dialog&&this._dialog.gDialog("close")},s.prototype._run=function(){if(gDesigner.isAnonymous())return new r.default(e=>{e&&!e.anonymous&&this._logged(e)}).open({anonymous:!0,signup:!0,animate:!0}),void this._showFormCb();this._cb&&this._cb()},s.prototype._logged=function(e){this._close(),this._cb&&this._cb(e)},s.prototype._build=function(){this._dialog=$("<div/>"),gDesigner.getUser().then(e=>{if(e)this._logged(e);else{this._dialog.closest(".loading").removeClass("loading");var t=$("<div/>");t.addClass("container").appendTo(this._dialog),$("<div/>").addClass("logo").appendTo(t),$("<span/>").addClass("title").text(i.GLocale.get(new i.GLocaleKey("GLoginPanel","text.title"))).appendTo(t),$("<span/>").addClass("subtitle").text(i.GLocale.get(new i.GLocaleKey("GLoginPanel","text.subtitle"))).appendTo(t);var n=$("<div/>");n.addClass("buttons").appendTo(t);var o=(e,t)=>{var o=$("<div/>");o.on("click",t),o.addClass(e).text(i.GLocale.get(new i.GLocaleKey("GLoginPanel","text."+e))).appendTo(n)};o("login",()=>{a.default.performLogin().then(e=>{this._logged(e)})}),o("signup",()=>{a.default.performSignup().then(e=>{this._logged(e)})})}}),this._dialog.gDialog({releaseOnClose:!0,className:"g-login-panel loading"}),this._dialog.gDialog("open",!0)},e.exports=s},function(e,t,n){"use strict";n(7),n(3);var o=n(1),i=n(13),a=n(34),r=n(1223),s=n(9),l=n(61),c=n(16),d=n(27),u=n(430),p=n(433),g=n(78),h=n(111),f=n(1485),m=n(1486);const y=n(37),v=n(1487);var _=n(77),b="."+s.FILE_FORMATS.find(e=>e.default).ext;function w(){w.TOOLTIP_CONFIG={[l.TOOLTIP_AREA.TOOLBAR]:l.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GSaveAction","tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GSaveAction","tooltip-description")),shortcut:w.SHORTCUT,learnMore:"https://documentation.corelvector.com/basics/working-with-files/save-and-open-files/#save"})}}o.GObject.inherit(w,d),w.ID="file.save",w.TITLE=new o.GLocaleKey("GSaveAction","title"),w.SHORTCUT=[i.GKey.Constant.META,"S"],w.TOOLTIP_CONFIG=null,w.prototype.getId=function(){return w.ID},w.prototype.getTitle=function(){return w.TITLE},w.prototype.getIcon=function(){return"gravit-icon-save"},w.prototype.getCategory=function(){return c.CATEGORY_FILE},w.prototype.getGroup=function(){return"file"},w.prototype.getShortcut=function(){return w.SHORTCUT},w.prototype.isShortcutGlobal=function(){return!0},w.prototype.isEnabled=function(e){return!!gDesigner.getApplicationManager().isEditingEnabled()&&(!(!(e=e||gDesigner.getActiveDocument())||!e.isModified()&&!e.isNew())&&(!e.isSynchronizing()&&(!(e.isNew()||!e.getStorageItem()||!e.getStorageItem().getStorage().canSave())||gDesigner.canExecuteAction(u.ID+b,[null,e],void 0,!0))))},w.prototype.execute=function(e,t,n){const o=e||gDesigner.getActiveDocument();if(o&&o.isCommercialProductFile())return o.openPaywall(this.getId()),!1;gContainer.getRuntime()===_.Runtime.IPad&&(n=!0),this._save(o,t,n)},w.prototype._performSave=async function(e,t){await e.isUpdateAvailable()?a.buildDialogDocumentHasUpdates.call(this,e,(function(){e.reload()}),(function(){h.performSave(e,t)})):h.performSave(e,t)},w.prototype._save=async function(e,t,n){if(gDesigner.getDefaultStorage().canSave()){if(!e.getScene().hasLinkedFiles())return this._saveDesktop(e,t,n);new m(()=>{this._saveDesktop(e,t,n)}).open()}else{if(e.isNew())return this._saveToCloud(e,t);if(e.isCloudFile()&&e.getId()){if(!await e.canSaveToCloud())return this._saveToCloud(e,t);await this._performSave(e,t)}else if(e.isExternalFile())e.storeToCloud(e.getScene(),t);else{if(!e.hasCloudReference())return this._saveToCloud(e,t);if(!e.isCloudSyncOn())return gDesigner.executeAction(u.ID+b,[null,e,t],void 0,!0);if(!await e.canSaveToCloud())return this._saveToCloud(e,t);e.chooseLatestDocument(e.getScene(),n=>{n!==e.getScene()?(e.setScene(n),t&&t()):e.storeToCloud(e.getScene(),t)},()=>this._saveToCloud(e,t),(e,t)=>t.lastModifiedDate().getTime()>e.lastModifiedDate().getTime(),()=>{t&&t()})}}},w.prototype._saveDesktop=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.isNew()){if(n)return this._saveToCloud(e,t);new f(async function(n){if(n===f.file()){if(await p.prototype._hasUnsupported.call(this,e))return;return gDesigner.executeAction(u.ID+b,[null,e,t],void 0,!0)}if(n===f.cloud())return this._saveToCloud(e,t)}.bind(this),{closeCallback:e=>e&&t&&t({documentStatus:g.SaveCancelled})}).open()}else if(e.isCloudFile()){if(!await e.canSaveToCloud())return this._saveToCloud(e,t);await this._performSave(e,t)}else if(e.hasCloudReference())if(e.isCloudSyncOn()){if(!await e.canSaveToCloud())return this._saveToCloud(e,t);e.chooseLatestDocument(e.getScene(),n=>{n!==e.getScene()?(e.setScene(n),e.store(e.getStorageItem(),t,null,{lastModifiedDate:n.getLastSavedTime()})):e.store(e.getStorageItem(),()=>{e.storeToCloud(e.getScene(),t)})},n=>{n&&404===n.status?e.store(e.getStorageItem(),t):y.alert(s.gApi.formatError(n))},(e,t)=>t.lastModifiedDate().getTime()>e.lastModifiedDate().getTime())}else e.isExternalFile()?e.storeToCloud(e.getScene(),t):e.store(e.getStorageItem(),t);else if(e.isExternalFile())e.storeToCloud(e.getScene(),t);else{const n=e.getStorageItem();let o={};n instanceof v.Item&&(o=(0,r.updateSaveOptions)(o,e,n)),e.store(n,t,null,o)}},w.prototype._saveToCloud=function(e,t){return gDesigner.executeAction(p.ID+".save-as",[e,n=>{n===g.Loaded?gDesigner.removeDocument(e,null,!0):n===g.Saved?t&&t({documentStatus:g.Saved}):n===g.SaveCancelled&&t&&t({documentStatus:g.SaveCancelled})}],void 0,!0)},w.prototype.getTooltipConfig=function(e){return e&&w.TOOLTIP_CONFIG[e]||null},w.prototype.toString=function(){return"[Object GSaveAction]"},e.exports=w},function(e,t,n){"use strict";n(7),n(3);var o=n(1),i=n(13),a=n(16),r=n(27),s=n(823),l=n(78),c=n(206),d=n(111),u=n(431);const p=n(239);function g(e){this._type=e,this._title=new o.GLocaleKey("GGravitCloudAction","title."+e)}g.Actions={New:"new",Save:"save",SaveAs:"save-as",Open:"open"},o.GObject.inherit(g,r),g.ID="gravit-cloud",g.prototype._type=null,g.prototype._title=null,g.prototype.getId=function(){return g.getIdForAction(this._type)},g.getIdForAction=function(e){return g.ID+"."+e},g.prototype.getTitle=function(){return this._title},g.prototype.getCategory=function(){return a.CATEGORY_FILE},g.prototype.getGroup=function(){return this._type===g.Actions.Open?"file-open":"file"},g.prototype.getGroupIcon=function(){return s["gravit-cloud"]},g.prototype.getShortcut=function(){return this._type==g.Actions.Open?[i.GKey.Constant.SHIFT,i.GKey.Constant.META,"O"]:this._type==g.Actions.SaveAs?[i.GKey.Constant.SHIFT,i.GKey.Constant.META,"S"]:null},g.prototype.isEnabled=function(){if(!gDesigner.getApplicationManager().isEditingEnabled()&&this._type===g.Actions.Save)return!1;if(!gDesigner.getApplicationManager().isOpenFromCloudEnabled()&&this._type===g.Actions.Open)return!1;if(!gDesigner.getApplicationManager().isSavingAsEnabled()&&this._type===g.Actions.SaveAs)return!1;return!(!gDesigner.getActiveDocument()&&this._type!==g.Actions.Open)&&!!d.isOnline()},g.prototype.execute=function(e,t,n){const o=()=>new u(()=>{this._executeAction(e,t,n)},()=>{gDesigner.stats("action-cancelled_export",this._type)});gDesigner.isOffline()?p.openUnavailableFeature(o):o()},g.prototype._executeAction=function(e,t,n){var o=this;if("open"===this._type){let e={closable:!0,showCloudOptions:!0,openFromCloud:!0};gDesigner.openNewDocumentDialog(e)}else if("save"===this._type){var i=gDesigner.getActiveDocument();if(i.isCommercialProductFile())return void i.openPaywall(this.getId());var a=i.getStorageItem();a&&a instanceof c.Item?d.performSave(i,()=>{t&&t(l.Saved)},()=>{t&&t(l.SaveFailed)}):o._saveAs(!1,e,t)}else if("new"===this._type){let n={closable:!0,cb:function(){o._saveAs(!0,e,t)}};gDesigner.openNewDocumentDialog(n)}else"save-as"===this._type&&o._saveAs(!1,e,t,n)},g.prototype._hasUnsupported=async function(){return!1},g.prototype._saveAs=async function(e,t,n,o){var i=t||gDesigner.getActiveDocument();if(i.isCommercialProductFile())i.openPaywall(this.getId());else{var a=i.getTitle();!i.isDocumentFromTemplate()&&await this._hasUnsupported(i)||gDesigner.openCloudSaveDialog(i,(function(){e&&gDesigner.getWindows().removeWindow(i.getActiveWindow()),n&&n(l.SaveCancelled)}),a,n,o)}},g.prototype.getIcon=function(){return gDesigner.getApplicationManager().isOpenFromCloudEnabled()&&this._type===g.Actions.Open?gDesigner.isTouchEnabled()?"gravit-icon-touch-file-open-cloud":"":gDesigner.getApplicationManager().isSavingAsEnabled()&&this._type===g.Actions.SaveAs?gDesigner.isTouchEnabled()?"gravit-icon-touch-file-save-as-cloud":"":void 0},g.prototype.toString=function(){return"[Object GGravitCloudAction]"},e.exports=g},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(61),r=n(16),s=n(27);function l(){l.TOOLTIP_CONFIG={[a.TOOLTIP_AREA.TOOLBAR]:a.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GFitAllAction","tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GFitAllAction","tooltip-description")),shortcut:l.SHORTCUT})}}o.GObject.inherit(l,s),l.ID="view.zoom.fit.all",l.TITLE=new o.GLocaleKey("GFitAllAction","title"),l.SHORTCUT=[i.GKey.Constant.OPTION,i.GKey.Constant.META,"0"],l.TOOLTIP_CONFIG=null,l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){return l.TITLE},l.prototype.getCategory=function(){return r.CATEGORY_VIEW},l.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-fit-all":null},l.prototype.getGroup=function(){return"zoom"},l.prototype.getShortcut=function(){return l.SHORTCUT},l.prototype.isEnabled=function(){var e=gDesigner.getActiveDocument(),t=e&&e.getScene()&&e.getScene().getPaintBBox()||null;return t&&!t.isEmpty()},l.prototype.execute=function(){var e,t=gDesigner.getActiveDocument(),n=t.getScene(),i=t.getActiveWindow().getView().getViewConfiguration().multiPageView;if(n.isFixedSized()&&!i){var a=n.getActivePage();e=new o.GRect(0,0,a.getProperty("w"),a.getProperty("h"))}else e=n.getPaintBBox(i);e&&!e.isEmpty()&&t.getActiveWindow().getView().zoomAll(e,!1)},l.prototype.getTooltipConfig=function(e){return e&&l.TOOLTIP_CONFIG[e]||null},l.prototype.toString=function(){return"[Object GFitAllAction]"},e.exports=l},function(e,t,n){"use strict";e.exports={Crop:1,Canvas:2,PagePanel:3,LayerPanel:4,FillPropertyPanel:5,BorderPropertyPanel:6,EffectPropertyPanel:7}},function(e,t,n){"use strict";n(51),n(7),n(3);var o=n(1),i=n(1681);function a(){}function r(e,t){this.id=e,this.expanded=t}function s(e,t,n,o,r,c,d,u,p,g,h,f,m,y,v,_,b,w,C,x,S,E,A){this._root=new a,this._root.expanded=!0,this._root.parent=this,this._rootIndentation=x||15,this._indentation=S||15,this._bottomPadding=E||0,i.call(this,e,t,0,0),this._container.classList.add("g-virtual-tree"),this._rowStyle=n||s.DEFAULT_ROW_STYLE,this._freeHeight=isNaN(d)?s.DEFAULT_FREEZONE_HEIGHT:d,this._insertIntoStyle=u||s.DEFAULT_INSERTINTO_STYLE,this._upSeparatorSpan1Style=v||s.DEFAULT_UP_SEPARATOR_SPAN1_STYLE,this._downSeparatorSpan1Style=b||s.DEFAULT_DOWN_SEPARATOR_SPAN1_STYLE,this._initComputedVals(),r&&(this._expandStyle=r),o&&(this._expandRenderer=o),c&&(this._separatorRenderer=c),_&&(this._upSeparatorSpan2Style=_),w&&(this._downSeparatorSpan2Style=w),p&&(this._dropAllowedCallback=p),g&&(this._dropCallback=g),h&&f&&(this._isDuplicateEffectCallback=h,this._duplicateCallback=f),m&&(this._clickCallback=m),y&&(this._expandCallback=y),A&&(this._renderFinishCallback=A),this._putLastChildWhenInside=!!C,this._aScroll=new l(this._container,200,10,null,7),this._drag=this._drag.bind(this)}function l(e,t,n,o,i){this._elem=e,this._scrollDelay=t||30,this._step=n||1,this._axisFlag=o||l.SCROLL_AXIS_FLAG.Y|l.SCROLL_AXIS_FLAG.X,this._scAreaWidth=i||5,this._fixupHandler("onmouseout",this.offScrolls.bind(this)),this._fixupHandler("ondragleave",this.offScrolls.bind(this))}a._Change={ExpandedSet:1,ExpandedRemoved:2},a.prototype.parent=null,a.prototype.previous=null,a.prototype.next=null,a.prototype.firstChild=null,a.prototype.lastChild=null,a.prototype.expanded=!1,a.prototype.dragging=!1,a.prototype.row=null,a.prototype.acceptChildren=function(e,t,n,o){var i,a=!o;if(!t||this.expanded)if(n)for(var r=this.lastChild;null!=r;r=r.previous){if(!1===(i=r.accept(e,t,n,o))&&!o)return!1;!0===i&&o&&(a=!0)}else for(r=this.firstChild;null!=r;r=r.next){if(!1===(i=r.accept(e,t,n,o))&&!o)return!1;!0===i&&o&&(a=!0)}return a},a.prototype.accept=function(e,t,n,o){return!1!==e.call(null,this)&&this.acceptChildren(e,t,n,o)},a.prototype.getNestLevel=function(){for(var e=0,t=this.parent;null!=t&&t instanceof a;t=t.parent)++e;return e},a.prototype.isVisible=function(){for(var e=this.parent;e instanceof a;){if(!e.expanded)return!1;e=e.parent}return!0},a.prototype.handleChange=function(e,t){e!=a._Change.ExpandedSet&&e!=a._Change.ExpandedRemoved||this.parent&&this.parent.handleChange(e,t)},a.prototype.handleExpand=function(e){e.target.id===s.COLLAPSE_ID&&this.expanded?(this.expanded=!1,this.handleChange(a._Change.ExpandedSet,this)):e.target.id!==s.EXPAND_ID||this.expanded||(this.expanded=!0,this.handleChange(a._Change.ExpandedRemoved,this))},a.prototype.getNodeCount=function(){var e=0;return this.accept((function(t){return++e,!0}),!1),e},a.prototype.getBBox=function(){if(this.row){const e=this.row.getBoundingClientRect();return new o.GRect(e.x,e.y,e.width,e.height)}return new o.GRect(0,0,0,0)},a.prototype.getNextFocusableNode=function(){return this.expanded?this.firstChild:this.next||this.parent&&this.parent.next||(this.parent.row?this.parent.parent.firstChild:this.parent.firstChild)},a.prototype.getPreviousFocusableNode=function(){return this.previous&&this.previous.expanded?this.previous.lastChild:!this.previous&&this.parent.expanded&&this.parent.row?this.parent:this.previous||(this.parent.lastChild.expanded?this.parent.lastChild.lastChild:this.parent.lastChild)},a.prototype.setDragging=function(e){this.accept(t=>{t.dragging=e})},a.prototype.toString=function(){return"[GVirtualTreeNode]"},r.prototype=Object.create(a.prototype),r.prototype.id=null,r.prototype.expanded=void 0,s.DEFAULT_ROW_STYLE="vrow",s.DEFAULT_INSERTINTO_STYLE="insertInto",s.DEFAULT_LINE_HEIGHT=30,s.DEFAULT_FREEZONE_HEIGHT=7,s.DEFAULT_UP_SEPARATOR_SPAN1_STYLE="up-separator-span1",s.DEFAULT_DOWN_SEPARATOR_SPAN1_STYLE="down-separator-span1",s.COLLAPSE_ID="clpsId",s.EXPAND_ID="xpndId",s.ROW_ID="rowId",s.LOWER_SEP_ID="lsepId",s.UPPER_SEP_ID="usepId",s.prototype=Object.create(i.prototype),s.IdxIterator=function(e,t,n,o){this._vtree=e,this._firstIdx=t||1,this._lastIdx=o?n&&n<=this._vtree._rowCount?n:this._vtree._rowCount:n&&n<=this._vtree._nodeCount?n:this._vtree._nodeCount,this._visibleOnly=!!o},s.IdxIterator.prototype._vtree=null,s.IdxIterator.prototype._firstIdx=0,s.IdxIterator.prototype._lastIdx=0,s.IdxIterator.prototype._visibleOnly=!1,s.IdxIterator.prototype._curNode=null,s.IdxIterator.prototype._curIdx=0,s.IdxIterator.prototype.getFirstNode=function(){return this._firstIdx<=this._lastIdx?(this._curIdx=this._firstIdx,this._curNode=this._vtree._getNodeByIdx(this._curIdx,this._visibleOnly)):(this._curIdx=this._lastIdx+1,this._curNode=null),this._curNode},s.IdxIterator.prototype.getNext=function(){return this._curIdx?(this._curIdx=this._curIdx<=this._lastIdx?this._curIdx+1:this._curIdx,this._curIdx<=this._lastIdx&&this._curNode?this._curNode=this._vtree.getNextNode(this._curNode,this._visibleOnly):this._curNode=null,this._curNode):this.getFirstNode()},s.prototype._root=null,s.prototype._nodeCount=0,s.prototype._rowStyle=null,s.prototype._rootIndentation=15,s.prototype._indentation=21,s.prototype._bottomPadding=0,s.prototype._containerWidth=0,s.prototype._expandedWidth=0,s.prototype._expandStyle=null,s.prototype._dragNodes=null,s.prototype._freeHeight=0,s.prototype._upSeparatorStyle=null,s.prototype._downSeparatorStyle=null,s.prototype._insertIntoStyle=null,s.prototype._downSepHeight=0,s.prototype._dropAllowedCallback=null,s.prototype._dropCallback=null,s.prototype._renderFinishCallback=null,s.prototype._dragStartPt=null,s.prototype._dragLastPt=null,s.prototype._dragBBox=null,s.prototype._dragNode=null,s.prototype._dragAndDropHelper=null,s.prototype._animatedDragEnabled=!1,s.prototype._dragByMouse=!1,s.prototype._isDuplicateEffectCallback=null,s.prototype._duplicateCallback=null,s.prototype._clickCallback=null,s.prototype._expandCallback=null,s.prototype._putLastChildWhenInside=!1,s.prototype._invalidationRequestTimerId=null,s.prototype._focusTimerId=null,s.prototype._updateMarksTimerId=null,s.prototype._aScroll=null,s.prototype._freeZone=null,s.prototype._lastVisitedDroppable=null,s.prototype.endUpdate=function(e){0==--this._updateCounter&&this.requestInvalidation(e)},s.prototype.refresh=function(){this._initComputedVals(),this.requestInvalidation(!0)},s.prototype.expandAndFocus=function(e,t){for(var n=0,o=e;o.parent&&o.parent!==this._root;)(o=o.parent).expanded||(o.expanded=!0,this._expandCallback&&this._expandCallback(o));if(this._focusTimerId)return!1;this._root.acceptChildren((function(t){return t!==e&&(n++,!0)}),!0),t||this.invalidate();var i=n*this._rowHeight,a=this._container.scrollTop;return 0===this._visibleRows&&this._updateVisibleRows(),(a>i||i-a>=this._rowHeight*this._visibleRows)&&(this._focusTimerId=setTimeout(function(){this._container.scrollTop=i,this._focusTimerId=null}.bind(this,50))),!0},s.prototype.requestInvalidation=function(e){e?this._updateCounter||(this.invalidate(),this._renderFinishCallback&&this._renderFinishCallback()):this._updateCounter||null===this._invalidationRequestTimerId&&(this._invalidationRequestTimerId=setTimeout(function(){this.requestInvalidation(!0),this._invalidationRequestTimerId=null}.bind(this),25))},s.prototype.handleChange=function(e,t){e!=a._Change.ExpandedSet&&e!=a._Change.ExpandedRemoved||this.requestInvalidation(!0)},s.prototype.invalidate=function(){this._updateRowCount(),this._updateVisibleRows(),this._updateScroller(),this._requestViewportClean(),this._render(),this._lastRenderScrollTop=this._container.scrollTop},s.prototype.getNextNode=function(e,t){var n=e,o=null;if(t)for(;n.parent instanceof a&&!n.parent.expanded;)n=n.parent;if(!n.firstChild||t&&!n.expanded||(o=n.firstChild),!o&&n.next&&(o=n.next),!o)for(var i=n.parent;!o&&i instanceof a&&i!==this._root;i=i.parent)i.next&&(o=i.next);return o},s.prototype.appendNode=function(e,t){return this._insertNodeBefore(e||this._root,null,t)},s.prototype.prependNode=function(e,t){return this._insertNodeBefore(e||this._root,e?e.firstChild:this._root.firstChild,t)},s.prototype.insertNodeBefore=function(e,t){return this._insertNodeBefore(e.parent,e,t)},s.prototype.insertNodeAfter=function(e,t){return this._insertNodeBefore(e.parent,e.next?e.next:null,t)},s.prototype.removeNode=function(e){e.parent&&(e.parent.firstChild==e&&(e.parent.firstChild=e.next),e.parent.lastChild==e&&(e.parent.lastChild=e.previous)),null!=e.previous&&(e.previous.next=e.next),null!=e.next&&(e.next.previous=e.previous);var t=e.parent;t&&(e.parent=null,e.previous=null,e.next=null,e.firstChild?this._nodeCount-=e.getNodeCount():--this._nodeCount,e.expanded&&e.firstChild?this._updateRowCount():t.expanded&&--this._rowCount,t.expanded&&!t.firstChild&&t!==this._root&&t.expanded&&(t.handleChange(a._Change.ExpandedRemoved,t),t.expanded=!1,this._expandCallback&&this._expandCallback(t)),t.expanded&&this.requestInvalidation())},s.prototype.clean=function(){this._nodeCount=0,this._rowCount=0,this._root=new a,this._root.expanded=!0,this._root.parent=this,this._dragNodes=null,this.requestInvalidation(!0)},s.prototype.acceptChildren=function(e,t,n,o){return this._root.acceptChildren(e,t,n,o)},s.prototype.getLastVisitedDroppable=function(){return this._lastVisitedDroppable},s.prototype._updateScroller=function(){this._scroller.style.height=(this._rowCount*this._rowHeight+this._freeHeight).toString()+"px",this._scroller.scrollHeight<this._container.clientHeight?this._scroller.style.borderRight="none":this._scroller.style.borderRight=""},s.prototype._isDragging=function(){return!!this._dragNode},s.prototype._renderViewport=function(e){const t=!this.isAnimatedDragEnabled()||!this._isDragging();if(t){this._freeZone=null,this._lastVisitedDroppable=null;for(var n=1,o=this._container.childNodes.length;n<o;n++)this._container.childNodes[n].style.display="none",this._container.childNodes[n].setAttribute("data-clean","")}if(this._rowCount&&this._renderer&&this._rowHeight){for(var i=Math.min(this._rowCount,e+this._cachedRows),a=document.createDocumentFragment(),r=new s.IdxIterator(this,e+1,i,!0),l=e,c=r.getFirstNode();null!=c;c=r.getNext(),++l){const e=c.row;var d=!t&&e?e:document.createElement("div");d.id=s.ROW_ID,d.classList.add(this._rowStyle),d.style.top=(l*this._rowHeight).toString()+"px";var u=this._rootIndentation+this._indentation*(c.getNestLevel()-1);if(d.style.paddingLeft=u.toString()+"px",c.expanded||c.firstChild){var p=document.createElement("span");c.expanded?p.id=s.COLLAPSE_ID:p.id=s.EXPAND_ID,this._expandStyle&&p.classList.add(this._expandStyle),this._expandRenderer(p),!t&&e||d.appendChild(p)}this.isAnimatedDragEnabled()?(d.classList.add("g-drag-vrow"),d.classList.toggle("g-drag-mouse",!!this._dragByMouse),d.classList.toggle("g-dragging",!!c.dragging)):(d.classList.remove("g-drag-vrow"),d.classList.remove("g-drag-mouse"),d.classList.remove("g-dragging")),t||!e?(d.addEventListener("click",this._nodeClick.bind(this,c)),d.setAttribute("draggable",!0),d.addEventListener("draginit",this._nodeDragInit.bind(this,c)),d.addEventListener("dragstart",this._nodeDragStart.bind(this,c)),d.addEventListener("dragend",this._nodeDragEnd.bind(this,c)),this.isAnimatedDragEnabled()||(d.addEventListener("dragenter",this._nodeDragEnter.bind(this,c)),d.addEventListener("dragover",this._nodeDragOver.bind(this,c)),d.addEventListener("dragleave",this._nodeDragLeave.bind(this,c)),d.addEventListener("dragexit",this._nodeDragExit.bind(this,c)),d.addEventListener("drop",this._nodeDrop.bind(this,c))),d._specCounter=0,d._hasStyle=!1,c.row=d,this._renderer(c,d),a.appendChild(d)):t||(d.hasAttribute("data-clean")&&(d.removeAttribute("data-clean"),d.style.display=""),d.parentNode||a.appendChild(d))}if(i==this._rowCount&&!this.isAnimatedDragEnabled()){var g=document.createElement("div");g.style.position="absolute",g.style.height=this._freeHeight.toString()+"px",g.style.top=(i*this._rowHeight).toString()+"px",g.addEventListener("dragenter",this._nodeDragEnter.bind(this,this._root)),g.addEventListener("dragover",this._nodeDragOver.bind(this,this._root)),g.addEventListener("dragleave",this._nodeDragLeave.bind(this,this._root)),g.addEventListener("drop",this._nodeDrop.bind(this,this._root)),a.appendChild(g),this._freeZone=g}this._container.appendChild(a),this._expandedWidth=this._container.scrollWidth;for(n=1,o=this._container.childNodes.length;n<o;n++)if("none"!==this._container.childNodes[n].style.display){getComputedStyle(this._container.childNodes[n]);this._container.childNodes[n].style.width=this._expandedWidth+"px"}}},s.prototype._initComputedVals=function(){this._containerWidth=parseInt(this._container.clientWidth);var e=document.createElement("div");e.classList.add(this._rowStyle),e.style.visibility="hidden",this._container.appendChild(e);var t=getComputedStyle(e),n=parseInt(t.height);this._rowHeight=(n||20)+this._bottomPadding;var o=document.createElement("div");o.classList.add(this._downSeparatorStyle),o.style.display="none",e.appendChild(o),this._downSepHeight=parseInt(getComputedStyle(o).height),this._expandedWidth=this._container.scrollWidth,this._container.removeChild(e)},s.prototype._insertNodeBefore=function(e,t,n){return n.parent=e,null!=t?(n.next=t,n.previous=t.previous,t.previous=n,null==n.previous?e.firstChild=n:n.previous.next=n):(null!=e.lastChild&&(n.previous=e.lastChild,e.lastChild.next=n,e.lastChild=n),n.next=null),null==e.firstChild&&(e.firstChild=n,n.previous=null,n.next=null),null==n.next&&(e.lastChild=n),n.firstChild?this._nodeCount+=n.getNodeCount():++this._nodeCount,n.expanded&&n.firstChild?this._updateRowCount():e.expanded&&++this._rowCount,(e.expanded||!e.expanded&&e.firstChild==e.lastChild)&&this.requestInvalidation(),this},s.prototype._expandRenderer=function(e){e.id===s.COLLAPSE_ID?e.innerHTML="&#9660;":e.id===s.EXPAND_ID&&(e.innerHTML="&#9658;")},s.prototype._separatorRenderer=function(e,t){var n=this._expandedWidth||this._container.scrollWidth;e.style.width=n.toString()+"px",e.style.height=this._freeHeight.toString()+"px",e.style.position="absolute",e.style.pointerEvents="none";var o=document.createElement("span"),i=null;e.id==s.UPPER_SEP_ID?(o.classList.add(this._upSeparatorSpan1Style),i=this._upSeparatorSpan2Style?this._upSeparatorSpan2Style:null,e.style.top="0px"):(o.classList.add(this._downSeparatorSpan1Style),i=this._downSeparatorSpan2Style?this._downSeparatorSpan2Style:null,e.style.top=(this._rowHeight-this._freeHeight).toString()+"px"),e.appendChild(o);getComputedStyle(o);if(i){var a=document.createElement("span");a.classList.add(i),e.appendChild(a)}},s.prototype._updateRowCount=function(){var e=0;this._root.acceptChildren((function(t){return++e,!0}),!0),this._rowCount=e},s.prototype._getNodeByIdx=function(e,t){var n=0,o=null;return this._root.acceptChildren((function(t){return++n!=e||(o=t,!1)}),t),o},s.prototype._nodeHasSomeParent=function(e,t){for(var n=!1,o=e.parent;o&&o instanceof a&&!n;o=o.parent)n=o===t;return n},s.prototype._nodeClick=function(e,t){!e.expanded&&!e.firstChild||t.target.id!==s.COLLAPSE_ID&&t.target.id!==s.EXPAND_ID?this._clickCallback&&(t.stopPropagation(),this._clickCallback(e)):(t.stopPropagation(),e.handleExpand(t),this._expandCallback&&this._expandCallback(e))},s.prototype.setDragNodes=function(e){e&&e.length&&(this._dragNodes=e.slice())},s.prototype.setAnimatedDragEnabled=function(e){this._animatedDragEnabled!==e&&(this._animatedDragEnabled=e,this.requestInvalidation(!0))},s.prototype.isAnimatedDragEnabled=function(){return this._animatedDragEnabled},s.prototype._onScroll=function(e){this.isAnimatedDragEnabled()&&this._isDragging()?e.preventDefault():i.prototype._onScroll.call(this,e)},s.prototype._nodeDragInit=function(e,t){this.isAnimatedDragEnabled()&&(this._dragNode=e,this._dragBBox=e.getBBox(),this._dragStartPt=new o.GPoint(t.clientX,t.clientY),this._dragOffset=this._dragStartPt.subtract(this._dragBBox.getSide(o.GRect.Side.TOP_LEFT)),this._dragAndDropHelper=new s._DragAndDropHelper(this))},s.prototype._nodeDragStart=function(e,t){this._dragNodes||(this._dragNodes=[e]),t.dataTransfer.setData("text/plain","some_dummy_data"),t.target.classList.add("g-drag"),this.isAnimatedDragEnabled()?(this._dragByMouse=!!t.isTrusted,this._dragNode||this._nodeDragInit(e,t),document.addEventListener("drag",this._drag,!0),e.setDragging(!0),this.requestInvalidation(!0)):this._aScroll.enableAScroll()},s.prototype._moveDown=function(e,t){e!==this._dragNode&&this._dragAndDropHelper&&(Math.abs(t.getY())>this._freeHeight?this._canDropInside(e)&&this._dragAndDropHelper.setDroppableNodeInside(e):this._canDropLower(e)&&this._dragAndDropHelper.setDroppableNodeLower(e))},s.prototype._moveUp=function(e,t){e!==this._dragNode&&this._dragAndDropHelper&&(t.getY()>this._freeHeight?this._canDropInside(e)&&this._dragAndDropHelper.setDroppableNodeInside(e):this._canDropUpper(e)&&this._dragAndDropHelper.setDroppableNodeUpper(e))},s.prototype._canDropUpper=function(e){const t=this._dragNode.row===this._freeZone;return this._dropHereAllowed(e)&&this._dropUpperAllowed(e,0,null,t)},s.prototype._canDropLower=function(e){return this._dropHereAllowed(e)&&this._dropLowerAllowed(e,this._rowHeight)},s.prototype._canDropInside=function(e){return this._dropHereAllowed(e)&&e!==this._root&&this._dropInsideAllowed(e)},s.prototype._getOffset=function(e,t){const n=e.getBBox().getSide(o.GRect.Side.TOP_LEFT);return t.getSide(o.GRect.Side.TOP_LEFT).subtract(n)},s.prototype._drag=function(e){if(!this._dragAndDropHelper)return;const t=new o.GPoint(e.clientX,e.clientY),n=t.subtract(this._dragLastPt||this._dragStartPt),i=parseInt(n.getY());if(0===i)return;this._dragLastPt=new o.GPoint(e.clientX,e.clientY);const a=t.subtract(this._dragOffset),r=new o.GRect(a.getX(),a.getY(),this._dragBBox.getWidth(),this._dragBBox.getHeight()),s=[];this._root.acceptChildren(e=>{if(this._dragNode!==e)if(e.getBBox().intersectsRect(r))s.push(e);else if(s.length>0)return!1},!0),this._dragAndDropHelper.setDroppableNodeInside(null);const l=i>0;if(1===s.length){const e=s[0],t=this._getOffset(e,r);l?this._moveDown(e,t):this._moveUp(e,t)}else if(2===s.length)if(l){const e=s[1],t=this._getOffset(e,r);this._moveDown(e,t)}else{const e=s[0],t=this._getOffset(e,r);this._moveUp(e,t)}},s.prototype._nodeDragEnd=function(e,t){document.removeEventListener("drag",this._drag,!0),gDesigner.setItemDraggingState(!1),$(t.target).closest(".g-drag").removeClass("g-drag"),this.isAnimatedDragEnabled()&&(e.setDragging(!1),this._dragAndDropHelper.drop(),this._dragNode=null,this._dragAndDropHelper=null,this.expandAndFocus(e,!0),this.requestInvalidation(!0))},s.prototype._nodeDragEnter=function(e,t){return t.preventDefault(),t.stopPropagation(),gDesigner.setItemDraggingState(!0),this._updateMarksTimerId&&clearTimeout(this._updateMarksTimerId),gDesigner.isTouchEnabled()?this._updateMarks(e,t.currentTarget,t.layerY,!0):this._updateMarksTimerId=setTimeout(function(e,t,n){this._updateMarks(e,t,n,!0)}.bind(this,e,t.currentTarget,t.layerY),10),this._lastVisitedDroppable=t.currentTarget,!1},s.prototype._nodeDragOver=function(e,t){return t.preventDefault(),t.stopPropagation(),this._updateMarksTimerId&&clearTimeout(this._updateMarksTimerId),gDesigner.isTouchEnabled()?this._updateMarks(e,t.currentTarget,t.layerY,!1):this._updateMarksTimerId=setTimeout(function(e,t,n){this._updateMarks(e,t,n,!1)}.bind(this,e,t.currentTarget,t.layerY),10),this._aScroll.takeOnOffAction(t),!1},s.prototype._nodeDragExit=function(e,t){$(this._container).find(".g-drag").removeClass("g-no-drop")},s.prototype._nodeDragLeave=function(e,t){return t.preventDefault(),t.stopPropagation(),t.currentTarget._hasStyle&&(!t.currentTarget._specCounter||t.currentTarget._specCounter<=1?(t.currentTarget._specCounter=0,t.currentTarget.classList.remove(this._insertIntoStyle),this._rowRemoveSep(t.currentTarget,s.LOWER_SEP_ID),this._rowRemoveSep(t.currentTarget,s.UPPER_SEP_ID),this._aScroll.takeOnOffAction(t)):--t.currentTarget._specCounter),!1},s.prototype._nodeDrop=function(e,t){t.preventDefault(),t.stopPropagation();var n=this._lastVisitedDroppable?this._lastVisitedDroppable:t.currentTarget,o=t.layerY;if(n._specCounter=0,this._dropHereAllowed(e)){n.classList.remove(this._insertIntoStyle),this._rowRemoveSep(n,s.LOWER_SEP_ID),this._rowRemoveSep(n,s.UPPER_SEP_ID),n._hasStyle=!1;var i=[],a=n===this._freeZone;if(this._dropUpperAllowed(e,o,i,a))if(i.length||(i=this._dragNodes),this._isDuplicateEffectCallback&&this._isDuplicateEffectCallback(t))e!==this._root?this._duplicateCallback(e.parent,e,e.previous?e.previous:null,i):this._duplicateCallback(this._root,null,a?e.lastChild:null,i);else{this.beginUpdate();for(var r=0;r<i.length;++r)this.removeNode(i[r]);if(e!==this._root){this._dropCallback&&this._dropCallback(e.parent,e,e.previous?e.previous:null,i);for(r=0;r<i.length;++r)this.insertNodeBefore(e,i[r])}else{this._dropCallback&&this._dropCallback(this._root,null,a?e.lastChild:null,i);for(r=0;r<i.length;++r)this.appendNode(e,i[r])}this._dragNodes=null,this.endUpdate()}else if(this._dropLowerAllowed(e,o,i))if(i.length||(i=this._dragNodes),this._isDuplicateEffectCallback&&this._isDuplicateEffectCallback(t))this._duplicateCallback(e.parent,e.next?e.next:null,e,i);else{this.beginUpdate();for(r=0;r<i.length;++r)this.removeNode(i[r]);this._dropCallback&&this._dropCallback(e.parent,e.next?e.next:null,e,i);for(r=i.length;r>0;--r)this.insertNodeAfter(e,i[r-1]);this._dragNodes=null,this.endUpdate()}else if(this._dropInsideAllowed(e,i,a))if(i.length||(i=this._dragNodes),this._isDuplicateEffectCallback&&this._isDuplicateEffectCallback(t))this._duplicateCallback(e,null,null,i);else{this.beginUpdate();for(r=0;r<i.length;++r)this.removeNode(i[r]);if(this._dropCallback&&this._dropCallback(e,null,a?e.lastChild:null,i),this._putLastChildWhenInside||a)for(r=0;r<i.length;++r)this.appendNode(e,i[r]);else for(r=i.length;r>0;--r)this.prependNode(e,i[r-1]);this._dragNodes=null,this.endUpdate()}}return this._dragNodes=null,this._aScroll.disableAScroll(),!1},s.prototype._dropHereAllowed=function(e){for(var t=this._dragNodes&&this._dragNodes.length,n=0;t&&n<this._dragNodes.length;++n){var o=this._dragNodes[n];t=o!==e&&!this._nodeHasSomeParent(e,o)}return t},s.prototype._dropUpperAllowed=function(e,t,n,o){var i=t<=this._freeHeight&&(this._dragNodes.length>1||e!==this._dragNodes[0].next);return i&&this._dropAllowedCallback&&(i=e!==this._root&&this._dropAllowedCallback(e.parent,e,e.previous?e.previous:null,this._dragNodes,n)||e===this._root&&this._dropInsideAllowed(e,n,o)),i},s.prototype._dropLowerAllowed=function(e,t,n){var o=t>=this._rowHeight-this._freeHeight&&!e.expanded&&e!==this._root&&(this._dragNodes.length>1||this._dragNodes[0]!==e.next);return o&&this._dropAllowedCallback&&(o=this._dropAllowedCallback(e.parent,e.next?e.next:null,e,this._dragNodes,n)),o},s.prototype._dropInsideAllowed=function(e,t,n){var o=n||this._putLastChildWhenInside,i=this._dragNodes.length>1||!(this._dragNodes[0].parent===e&&(o&&e.lastChild===this._dragNodes[0]||!o&&e.firstChild===this._dragNodes[0]));return i&&this._dropAllowedCallback&&(i=this._dropAllowedCallback(e,o?null:e.firstChild,o?e.lastChild:null,this._dragNodes,t)),i},s.prototype._drawUpperSeparator=function(e,t){var n=e===this._root?0:e.getNestLevel()-1;this._rowAddSep(t,s.UPPER_SEP_ID,n)},s.prototype._drawLowerSeparator=function(e,t){var n=e.getNestLevel()-1;this._rowAddSep(t,s.LOWER_SEP_ID,n)},s.prototype._updateMarks=function(e,t,n,o){let i=!0;if(this._dropHereAllowed(e)){var a=t===this._freeZone;this._dropUpperAllowed(e,n,null,a)?(i=!1,this._rowHasSep(t,s.UPPER_SEP_ID)||(this._rowRemoveSep(t,s.LOWER_SEP_ID),t._specCounter=0,t.classList.remove(this._insertIntoStyle),this._drawUpperSeparator(e,t))):this._dropLowerAllowed(e,n)?(i=!1,this._rowHasSep(t,s.LOWER_SEP_ID)||(this._rowRemoveSep(t,s.UPPER_SEP_ID),t._specCounter=0,t.classList.remove(this._insertIntoStyle),this._drawLowerSeparator(e,t))):e!==this._root&&this._dropInsideAllowed(e)&&(i=!1,this._rowRemoveSep(t,s.LOWER_SEP_ID),this._rowRemoveSep(t,s.UPPER_SEP_ID),t.classList.add(this._insertIntoStyle),t._hasStyle=!0,o&&(t._specCounter?++t._specCounter:t._specCounter=1))}$(this._container).find(".g-drag").toggleClass("g-no-drop",i)},s.prototype._rowHasSep=function(e,t){for(var n=1,o=e.childNodes.length;n<o;n++)if(e.childNodes[n].id===t)return!0;return!1},s.prototype._rowAddSep=function(e,t,n){var o=document.createElement("div");o.id=t,this._separatorRenderer(o,n),t==s.UPPER_SEP_ID?e.insertBefore(o,e.firstChild):e.appendChild(o),e._hasStyle=!0},s.prototype._rowRemoveSep=function(e,t){for(var n=e.childNodes.length-1;n>=0;--n)e.childNodes[n].id===t&&e.removeChild(e.childNodes[n])},s.prototype.resetRowHeight=function(e){this._rowHeight=e},s.prototype.setFreeHeight=function(e){this._freeHeight=e},s.prototype.toString=function(){return"[GVirtualTree]"},l.AUTO_SCROLL_Y={OFF:0,UP:1,DOWN:2},l.AUTO_SCROLL_X={OFF:0,LEFT:1,RIGHT:2},l.SCROLL_AXIS_FLAG={X:1,Y:2},l.prototype._elem=null,l.prototype._timerId=null,l.prototype._scrollDelay=null,l.prototype._step=null,l.prototype._axisFlag=null,l.prototype._scAreaWidth=0,l.prototype._aScrollEnabled=!1,l.prototype._aScrollY=l.AUTO_SCROLL_Y.OFF,l.prototype._aScrollX=l.AUTO_SCROLL_X.OFF,l.prototype.enableAScroll=function(){this._aScrollEnabled=!0,this._timerId=setInterval(this._tryScroll.bind(this),this._scrollDelay)},l.prototype.disableAScroll=function(){this._aScrollEnabled=!1,this._timerId&&(clearInterval(this._timerId),this._timerId=null)},l.prototype.takeOnOffAction=function(e){if(this._aScrollEnabled){if(e.layerY==e.clientY||e.layerX==e.clientX)return this._aScrollY=l.AUTO_SCROLL_Y.OFF,void(this._aScrollX=l.AUTO_SCROLL_X.OFF);for(var t=e.layerY,n=e.layerX,o=e.target;o!=this._elem&&o;o=o.offsetParent?o.offsetParent:o.parentNode)o.offsetParent&&(t+=o.offsetTop,n+=o.offsetLeft);if(!o)return;t-=this._elem.scrollTop,n-=this._elem.scrollLeft,this._axisFlag&l.SCROLL_AXIS_FLAG.Y&&n>0&&n<this._elem.offsetWidth&&(t<=this._scAreaWidth?this._aScrollY=l.AUTO_SCROLL_Y.UP:t>=this._elem.offsetHeight-this._scAreaWidth?this._aScrollY=l.AUTO_SCROLL_Y.DOWN:this._aScrollY=l.AUTO_SCROLL_Y.OFF),this._axisFlag&l.SCROLL_AXIS_FLAG.X&&t>0&&t<this._elem.offsetHeight&&(n<=this._scAreaWidth?this._aScrollX=l.AUTO_SCROLL_X.LEFT:n>=this._elem.offsetWidth-this._scAreaWidth?this._aScrollX=l.AUTO_SCROLL_X.RIGHT:this._aScrollX=l.AUTO_SCROLL_X.OFF)}},l.prototype.offScrolls=function(e){e.target===this._elem&&(this._aScrollY=l.AUTO_SCROLL_Y.OFF,this._aScrollX=l.AUTO_SCROLL_X.OFF)},l.prototype._tryScroll=function(){if(this._aScrollY!==l.AUTO_SCROLL_Y.OFF||this._aScrollX!==l.AUTO_SCROLL_X.OFF){if(this._aScrollY){var e=this._aScrollY==l.AUTO_SCROLL_Y.UP?-1:1;this._elem.scrollTop+=this._step*e}if(this._aScrollX){var t=this._aScrollX==l.AUTO_SCROLL_X.LEFT?-1:1;this._elem.scrollLeft+=this._step*t}}},l.prototype._fixupHandler=function(e,t){var n,o;this._elem[e]?this._elem[e]=(n=t,o=this._elem[e],function(){return n.apply(this,arguments),o.apply(this,arguments)}):this._elem[e]=t},n(1682)(s),e.exports.GVirtualTreeNode=a,e.exports.GVirtualTreeNodeNamed=r,e.exports.GVirtualTree=s},function(e,t,n){"use strict";var o=n(23),i=n(31),a=o.WeakMap;e.exports=i(a)&&/native code/.test(String(a))},function(e,t,n){"use strict";var o=n(49),i=n(55),a=n(189);e.exports=function(e,t){if(o(e),i(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var o=n(55),i=n(108),a=n(41)("match");e.exports=function(e){var t;return o(e)&&(void 0!==(t=e[a])?!!t:"RegExp"===i(e))}},,,function(e,t,n){"use strict";var o=n(20),i=n(23).RegExp;e.exports=o((function(){var e=i(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)}))},function(e,t,n){"use strict";var o=n(20),i=n(23).RegExp;e.exports=o((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},function(e,t,n){"use strict";var o=n(35),i=n(58),a=n(133),r=n(294),s=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in s||i(e,"flags")||!a(s,e)?t:o(r,e)}},function(e,t,n){"use strict";var o=n(186).PROPER,i=n(20),a=n(232);e.exports=function(e){return i((function(){return!!a[e]()||"​᠎"!=="​᠎"[e]()||o&&a[e].name!==e}))}},function(e,t,n){"use strict";var o=n(447),i=n(87),a=n(299),r=n(211),s=n(300),l=Object.prototype.toString;function c(e){if(!(this instanceof c))return new c(e);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=o.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(r[n]);if(t.header&&o.deflateSetHeader(this.strm,t.header),t.dictionary){var d;if(d="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=o.deflateSetDictionary(this.strm,d)))throw new Error(r[n]);this._dict_set=!0}}function d(e,t){var n=new c(t);if(n.push(e,!0),n.err)throw n.msg||r[n.err];return n.result}c.prototype.push=function(e,t){var n,r,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=a.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(c),s.next_out=0,s.avail_out=c),1!==(n=o.deflate(s,r))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(a.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==n);return 4===r?(n=o.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==r||(this.onEnd(0),s.avail_out=0,!0)},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=c,t.deflate=d,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,d(e,t)}},function(e,t,n){"use strict";var o,i=n(87),a=n(448),r=n(297),s=n(298),l=n(211);function c(e,t){return e.msg=l[t],t}function d(e){return(e<<1)-(e>4?9:0)}function u(e){for(var t=e.length;--t>=0;)e[t]=0}function p(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function g(e,t){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,p(e.strm)}function h(e,t){e.pending_buf[e.pending++]=t}function f(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function m(e,t){var n,o,i=e.max_chain_length,a=e.strstart,r=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,c=e.window,d=e.w_mask,u=e.prev,p=e.strstart+258,g=c[a+r-1],h=c[a+r];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(n=t)+r]===h&&c[n+r-1]===g&&c[n]===c[a]&&c[++n]===c[a+1]){a+=2,n++;do{}while(c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&a<p);if(o=258-(p-a),a=p-258,o>r){if(e.match_start=t,r=o,o>=s)break;g=c[a+r-1],h=c[a+r]}}}while((t=u[t&d])>l&&0!=--i);return r<=e.lookahead?r:e.lookahead}function y(e){var t,n,o,a,l,c,d,u,p,g,h=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=h+(h-262)){i.arraySet(e.window,e.window,h,h,0),e.match_start-=h,e.strstart-=h,e.block_start-=h,t=n=e.hash_size;do{o=e.head[--t],e.head[t]=o>=h?o-h:0}while(--n);t=n=h;do{o=e.prev[--t],e.prev[t]=o>=h?o-h:0}while(--n);a+=h}if(0===e.strm.avail_in)break;if(c=e.strm,d=e.window,u=e.strstart+e.lookahead,p=a,g=void 0,(g=c.avail_in)>p&&(g=p),n=0===g?0:(c.avail_in-=g,i.arraySet(d,c.input,c.next_in,g,u),1===c.state.wrap?c.adler=r(c.adler,d,g,u):2===c.state.wrap&&(c.adler=s(c.adler,d,g,u)),c.next_in+=g,c.total_in+=g,g),e.lookahead+=n,e.lookahead+e.insert>=3)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+3-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)}function v(e,t){for(var n,o;;){if(e.lookahead<262){if(y(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=m(e,n)),e.match_length>=3)if(o=a._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else o=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(o&&(g(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(g(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(g(e,!1),0===e.strm.avail_out)?1:2}function _(e,t){for(var n,o,i;;){if(e.lookahead<262){if(y(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=m(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,o=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,o&&(g(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((o=a._tr_tally(e,0,e.window[e.strstart-1]))&&g(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(o=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(g(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(g(e,!1),0===e.strm.avail_out)?1:2}function b(e,t,n,o,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=o,this.func=i}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),u(this.dyn_ltree),u(this.dyn_dtree),u(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),u(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),u(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function C(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=0,a._tr_init(t),0):c(e,-2)}function x(e){var t,n=C(e);return 0===n&&((t=e.state).window_size=2*t.w_size,u(t.head),t.max_lazy_match=o[t.level].max_lazy,t.good_match=o[t.level].good_length,t.nice_match=o[t.level].nice_length,t.max_chain_length=o[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function S(e,t,n,o,a,r){if(!e)return-2;var s=1;if(-1===t&&(t=6),o<0?(s=0,o=-o):o>15&&(s=2,o-=16),a<1||a>9||8!==n||o<8||o>15||t<0||t>9||r<0||r>4)return c(e,-2);8===o&&(o=9);var l=new w;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=o,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=r,l.method=n,x(e)}o=[new b(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(y(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var o=e.block_start+n;if((0===e.strstart||e.strstart>=o)&&(e.lookahead=e.strstart-o,e.strstart=o,g(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-262&&(g(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(g(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(g(e,!1),e.strm.avail_out),1)})),new b(4,4,8,4,v),new b(4,5,16,8,v),new b(4,6,32,32,v),new b(4,4,16,16,_),new b(8,16,32,32,_),new b(8,16,128,128,_),new b(8,32,128,256,_),new b(32,128,258,1024,_),new b(32,258,258,4096,_)],t.deflateInit=function(e,t){return S(e,t,8,15,8,0)},t.deflateInit2=S,t.deflateReset=x,t.deflateResetKeep=C,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?-2:(e.state.gzhead=t,0):-2},t.deflate=function(e,t){var n,i,r,l;if(!e||!e.state||t>5||t<0)return e?c(e,-2):-2;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return c(e,0===e.avail_out?-5:-2);if(i.strm=e,n=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,h(i,31),h(i,139),h(i,8),i.gzhead?(h(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),h(i,255&i.gzhead.time),h(i,i.gzhead.time>>8&255),h(i,i.gzhead.time>>16&255),h(i,i.gzhead.time>>24&255),h(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),h(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(h(i,255&i.gzhead.extra.length),h(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(h(i,0),h(i,0),h(i,0),h(i,0),h(i,0),h(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),h(i,3),i.status=113);else{var m=8+(i.w_bits-8<<4)<<8;m|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(m|=32),m+=31-m%31,i.status=113,f(i,m),0!==i.strstart&&(f(i,e.adler>>>16),f(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>r&&(e.adler=s(e.adler,i.pending_buf,i.pending-r,r)),p(e),r=i.pending,i.pending!==i.pending_buf_size));)h(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(e.adler=s(e.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=s(e.adler,i.pending_buf,i.pending-r,r)),p(e),r=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,h(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>r&&(e.adler=s(e.adler,i.pending_buf,i.pending-r,r)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=s(e.adler,i.pending_buf,i.pending-r,r)),p(e),r=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,h(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>r&&(e.adler=s(e.adler,i.pending_buf,i.pending-r,r)),0===l&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&p(e),i.pending+2<=i.pending_buf_size&&(h(i,255&e.adler),h(i,e.adler>>8&255),e.adler=0,i.status=113)):i.status=113),0!==i.pending){if(p(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&d(t)<=d(n)&&4!==t)return c(e,-5);if(666===i.status&&0!==e.avail_in)return c(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&666!==i.status){var v=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(y(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(g(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(g(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(g(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var n,o,i,r,s=e.window;;){if(e.lookahead<=258){if(y(e),e.lookahead<=258&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(o=s[i=e.strstart-1])===s[++i]&&o===s[++i]&&o===s[++i]){r=e.strstart+258;do{}while(o===s[++i]&&o===s[++i]&&o===s[++i]&&o===s[++i]&&o===s[++i]&&o===s[++i]&&o===s[++i]&&o===s[++i]&&i<r);e.match_length=258-(r-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=a._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(g(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(g(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(g(e,!1),0===e.strm.avail_out)?1:2}(i,t):o[i.level].func(i,t);if(3!==v&&4!==v||(i.status=666),1===v||3===v)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===v&&(1===t?a._tr_align(i):5!==t&&(a._tr_stored_block(i,0,0,!1),3===t&&(u(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),p(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(h(i,255&e.adler),h(i,e.adler>>8&255),h(i,e.adler>>16&255),h(i,e.adler>>24&255),h(i,255&e.total_in),h(i,e.total_in>>8&255),h(i,e.total_in>>16&255),h(i,e.total_in>>24&255)):(f(i,e.adler>>>16),f(i,65535&e.adler)),p(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?c(e,-2):(e.state=null,113===t?c(e,-3):0):-2},t.deflateSetDictionary=function(e,t){var n,o,a,s,l,c,d,p,g=t.length;if(!e||!e.state)return-2;if(2===(s=(n=e.state).wrap)||1===s&&42!==n.status||n.lookahead)return-2;for(1===s&&(e.adler=r(e.adler,t,g,0)),n.wrap=0,g>=n.w_size&&(0===s&&(u(n.head),n.strstart=0,n.block_start=0,n.insert=0),p=new i.Buf8(n.w_size),i.arraySet(p,t,g-n.w_size,n.w_size,0),t=p,g=n.w_size),l=e.avail_in,c=e.next_in,d=e.input,e.avail_in=g,e.next_in=0,e.input=t,y(n);n.lookahead>=3;){o=n.strstart,a=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[o+3-1])&n.hash_mask,n.prev[o&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=o,o++}while(--a);n.strstart=o,n.lookahead=2,y(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=c,e.input=d,e.avail_in=l,n.wrap=s,0},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";var o=n(87);function i(e){for(var t=e.length;--t>=0;)e[t]=0}var a=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],r=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],c=new Array(576);i(c);var d=new Array(60);i(d);var u=new Array(512);i(u);var p=new Array(256);i(p);var g=new Array(29);i(g);var h,f,m,y=new Array(30);function v(e,t,n,o,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=o,this.max_length=i,this.has_stree=e&&e.length}function _(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function b(e){return e<256?u[e]:u[256+(e>>>7)]}function w(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function C(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,w(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function x(e,t,n){C(e,n[2*t],n[2*t+1])}function S(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function E(e,t,n){var o,i,a=new Array(16),r=0;for(o=1;o<=15;o++)a[o]=r=r+n[o-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=S(a[s]++,s))}}function A(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function T(e){e.bi_valid>8?w(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function G(e,t,n,o){var i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&o[t]<=o[n]}function P(e,t,n){for(var o=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&G(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!G(t,o,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=o}function D(e,t,n){var o,i,s,l,c=0;if(0!==e.last_lit)do{o=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0===o?x(e,i,t):(x(e,(s=p[i])+256+1,t),0!==(l=a[s])&&C(e,i-=g[s],l),x(e,s=b(--o),n),0!==(l=r[s])&&C(e,o-=y[s],l))}while(c<e.last_lit);x(e,256,t)}function L(e,t){var n,o,i,a=t.dyn_tree,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<l;n++)0!==a[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=r[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)P(e,a,n);i=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],P(e,a,1),o=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=o,a[2*i]=a[2*n]+a[2*o],e.depth[i]=(e.depth[n]>=e.depth[o]?e.depth[n]:e.depth[o])+1,a[2*n+1]=a[2*o+1]=i,e.heap[1]=i++,P(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,o,i,a,r,s,l=t.dyn_tree,c=t.max_code,d=t.stat_desc.static_tree,u=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,g=t.stat_desc.extra_base,h=t.stat_desc.max_length,f=0;for(a=0;a<=15;a++)e.bl_count[a]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(a=l[2*l[2*(o=e.heap[n])+1]+1]+1)>h&&(a=h,f++),l[2*o+1]=a,o>c||(e.bl_count[a]++,r=0,o>=g&&(r=p[o-g]),s=l[2*o],e.opt_len+=s*(a+r),u&&(e.static_len+=s*(d[2*o+1]+r)));if(0!==f){do{for(a=h-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[h]--,f-=2}while(f>0);for(a=h;0!==a;a--)for(o=e.bl_count[a];0!==o;)(i=e.heap[--n])>c||(l[2*i+1]!==a&&(e.opt_len+=(a-l[2*i+1])*l[2*i],l[2*i+1]=a),o--)}}(e,t),E(a,c,e.bl_count)}function I(e,t,n){var o,i,a=-1,r=t[1],s=0,l=7,c=4;for(0===r&&(l=138,c=3),t[2*(n+1)+1]=65535,o=0;o<=n;o++)i=r,r=t[2*(o+1)+1],++s<l&&i===r||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=i,0===r?(l=138,c=3):i===r?(l=6,c=3):(l=7,c=4))}function k(e,t,n){var o,i,a=-1,r=t[1],s=0,l=7,c=4;for(0===r&&(l=138,c=3),o=0;o<=n;o++)if(i=r,r=t[2*(o+1)+1],!(++s<l&&i===r)){if(s<c)do{x(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(x(e,i,e.bl_tree),s--),x(e,16,e.bl_tree),C(e,s-3,2)):s<=10?(x(e,17,e.bl_tree),C(e,s-3,3)):(x(e,18,e.bl_tree),C(e,s-11,7));s=0,a=i,0===r?(l=138,c=3):i===r?(l=6,c=3):(l=7,c=4)}}i(y);var O=!1;function F(e,t,n,i){C(e,0+(i?1:0),3),function(e,t,n,i){T(e),i&&(w(e,n),w(e,~n)),o.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}t._tr_init=function(e){O||(!function(){var e,t,n,o,i,l=new Array(16);for(n=0,o=0;o<28;o++)for(g[o]=n,e=0;e<1<<a[o];e++)p[n++]=o;for(p[n-1]=o,i=0,o=0;o<16;o++)for(y[o]=i,e=0;e<1<<r[o];e++)u[i++]=o;for(i>>=7;o<30;o++)for(y[o]=i<<7,e=0;e<1<<r[o]-7;e++)u[256+i++]=o;for(t=0;t<=15;t++)l[t]=0;for(e=0;e<=143;)c[2*e+1]=8,e++,l[8]++;for(;e<=255;)c[2*e+1]=9,e++,l[9]++;for(;e<=279;)c[2*e+1]=7,e++,l[7]++;for(;e<=287;)c[2*e+1]=8,e++,l[8]++;for(E(c,287,l),e=0;e<30;e++)d[2*e+1]=5,d[2*e]=S(e,5);h=new v(c,a,257,286,15),f=new v(d,r,0,30,15),m=new v(new Array(0),s,0,19,7)}(),O=!0),e.l_desc=new _(e.dyn_ltree,h),e.d_desc=new _(e.dyn_dtree,f),e.bl_desc=new _(e.bl_tree,m),e.bi_buf=0,e.bi_valid=0,A(e)},t._tr_stored_block=F,t._tr_flush_block=function(e,t,n,o){var i,a,r=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),L(e,e.l_desc),L(e,e.d_desc),r=function(e){var t;for(I(e,e.dyn_ltree,e.l_desc.max_code),I(e,e.dyn_dtree,e.d_desc.max_code),L(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*l[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==t?F(e,t,n,o):4===e.strategy||a===i?(C(e,2+(o?1:0),3),D(e,c,d)):(C(e,4+(o?1:0),3),function(e,t,n,o){var i;for(C(e,t-257,5),C(e,n-1,5),C(e,o-4,4),i=0;i<o;i++)C(e,e.bl_tree[2*l[i]+1],3);k(e,e.dyn_ltree,t-1),k(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,r+1),D(e,e.dyn_ltree,e.dyn_dtree)),A(e),o&&T(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(p[n]+256+1)]++,e.dyn_dtree[2*b(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){C(e,2,3),x(e,256,c),function(e){16===e.bi_valid?(w(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,n){"use strict";var o=n(450),i=n(87),a=n(299),r=n(301),s=n(211),l=n(300),c=n(453),d=Object.prototype.toString;function u(e){if(!(this instanceof u))return new u(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=o.inflateInit2(this.strm,t.windowBits);if(n!==r.Z_OK)throw new Error(s[n]);if(this.header=new c,o.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=a.string2buf(t.dictionary):"[object ArrayBuffer]"===d.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=o.inflateSetDictionary(this.strm,t.dictionary))!==r.Z_OK))throw new Error(s[n])}function p(e,t){var n=new u(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}u.prototype.push=function(e,t){var n,s,l,c,u,p=this.strm,g=this.options.chunkSize,h=this.options.dictionary,f=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?r.Z_FINISH:r.Z_NO_FLUSH,"string"==typeof e?p.input=a.binstring2buf(e):"[object ArrayBuffer]"===d.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new i.Buf8(g),p.next_out=0,p.avail_out=g),(n=o.inflate(p,r.Z_NO_FLUSH))===r.Z_NEED_DICT&&h&&(n=o.inflateSetDictionary(this.strm,h)),n===r.Z_BUF_ERROR&&!0===f&&(n=r.Z_OK,f=!1),n!==r.Z_STREAM_END&&n!==r.Z_OK)return this.onEnd(n),this.ended=!0,!1;p.next_out&&(0!==p.avail_out&&n!==r.Z_STREAM_END&&(0!==p.avail_in||s!==r.Z_FINISH&&s!==r.Z_SYNC_FLUSH)||("string"===this.options.to?(l=a.utf8border(p.output,p.next_out),c=p.next_out-l,u=a.buf2string(p.output,l),p.next_out=c,p.avail_out=g-c,c&&i.arraySet(p.output,p.output,l,c,0),this.onData(u)):this.onData(i.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(f=!0)}while((p.avail_in>0||0===p.avail_out)&&n!==r.Z_STREAM_END);return n===r.Z_STREAM_END&&(s=r.Z_FINISH),s===r.Z_FINISH?(n=o.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===r.Z_OK):s!==r.Z_SYNC_FLUSH||(this.onEnd(r.Z_OK),p.avail_out=0,!0)},u.prototype.onData=function(e){this.chunks.push(e)},u.prototype.onEnd=function(e){e===r.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=u,t.inflate=p,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},t.ungzip=p},function(e,t,n){"use strict";var o=n(87),i=n(297),a=n(298),r=n(451),s=n(452);function l(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function d(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new o.Buf32(852),t.distcode=t.distdyn=new o.Buf32(592),t.sane=1,t.back=-1,0):-2}function u(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,d(e)):-2}function p(e,t){var n,o;return e&&e.state?(o=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==o.window&&o.wbits!==t&&(o.window=null),o.wrap=n,o.wbits=t,u(e))):-2}function g(e,t){var n,o;return e?(o=new c,e.state=o,o.window=null,0!==(n=p(e,t))&&(e.state=null),n):-2}var h,f,m=!0;function y(e){if(m){var t;for(h=new o.Buf32(512),f=new o.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,h,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,f,0,e.work,{bits:5}),m=!1}e.lencode=h,e.lenbits=9,e.distcode=f,e.distbits=5}function v(e,t,n,i){var a,r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new o.Buf8(r.wsize)),i>=r.wsize?(o.arraySet(r.window,t,n-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):((a=r.wsize-r.wnext)>i&&(a=i),o.arraySet(r.window,t,n-i,a,r.wnext),(i-=a)?(o.arraySet(r.window,t,n-i,i,0),r.wnext=i,r.whave=r.wsize):(r.wnext+=a,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=a))),0}t.inflateReset=u,t.inflateReset2=p,t.inflateResetKeep=d,t.inflateInit=function(e){return g(e,15)},t.inflateInit2=g,t.inflate=function(e,t){var n,c,d,u,p,g,h,f,m,_,b,w,C,x,S,E,A,T,G,P,D,L,I,k,O=0,F=new o.Buf8(4),R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(n=e.state).mode&&(n.mode=13),p=e.next_out,d=e.output,h=e.avail_out,u=e.next_in,c=e.input,g=e.avail_in,f=n.hold,m=n.bits,_=g,b=h,L=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;m<16;){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}if(2&n.wrap&&35615===f){n.check=0,F[0]=255&f,F[1]=f>>>8&255,n.check=a(n.check,F,2,0),f=0,m=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&f)<<8)+(f>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&f)){e.msg="unknown compression method",n.mode=30;break}if(m-=4,D=8+(15&(f>>>=4)),0===n.wbits)n.wbits=D;else if(D>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<D,e.adler=n.check=1,n.mode=512&f?10:12,f=0,m=0;break;case 2:for(;m<16;){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}if(n.flags=f,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=f>>8&1),512&n.flags&&(F[0]=255&f,F[1]=f>>>8&255,n.check=a(n.check,F,2,0)),f=0,m=0,n.mode=3;case 3:for(;m<32;){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}n.head&&(n.head.time=f),512&n.flags&&(F[0]=255&f,F[1]=f>>>8&255,F[2]=f>>>16&255,F[3]=f>>>24&255,n.check=a(n.check,F,4,0)),f=0,m=0,n.mode=4;case 4:for(;m<16;){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}n.head&&(n.head.xflags=255&f,n.head.os=f>>8),512&n.flags&&(F[0]=255&f,F[1]=f>>>8&255,n.check=a(n.check,F,2,0)),f=0,m=0,n.mode=5;case 5:if(1024&n.flags){for(;m<16;){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}n.length=f,n.head&&(n.head.extra_len=f),512&n.flags&&(F[0]=255&f,F[1]=f>>>8&255,n.check=a(n.check,F,2,0)),f=0,m=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((w=n.length)>g&&(w=g),w&&(n.head&&(D=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),o.arraySet(n.head.extra,c,u,w,D)),512&n.flags&&(n.check=a(n.check,c,w,u)),g-=w,u+=w,n.length-=w),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===g)break e;w=0;do{D=c[u+w++],n.head&&D&&n.length<65536&&(n.head.name+=String.fromCharCode(D))}while(D&&w<g);if(512&n.flags&&(n.check=a(n.check,c,w,u)),g-=w,u+=w,D)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===g)break e;w=0;do{D=c[u+w++],n.head&&D&&n.length<65536&&(n.head.comment+=String.fromCharCode(D))}while(D&&w<g);if(512&n.flags&&(n.check=a(n.check,c,w,u)),g-=w,u+=w,D)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;m<16;){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}if(f!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}f=0,m=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;m<32;){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}e.adler=n.check=l(f),f=0,m=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=p,e.avail_out=h,e.next_in=u,e.avail_in=g,n.hold=f,n.bits=m,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){f>>>=7&m,m-=7&m,n.mode=27;break}for(;m<3;){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}switch(n.last=1&f,m-=1,3&(f>>>=1)){case 0:n.mode=14;break;case 1:if(y(n),n.mode=20,6===t){f>>>=2,m-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}f>>>=2,m-=2;break;case 14:for(f>>>=7&m,m-=7&m;m<32;){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}if((65535&f)!=(f>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&f,f=0,m=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(w=n.length){if(w>g&&(w=g),w>h&&(w=h),0===w)break e;o.arraySet(d,c,u,w,p),g-=w,u+=w,h-=w,p+=w,n.length-=w;break}n.mode=12;break;case 17:for(;m<14;){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}if(n.nlen=257+(31&f),f>>>=5,m-=5,n.ndist=1+(31&f),f>>>=5,m-=5,n.ncode=4+(15&f),f>>>=4,m-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;m<3;){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}n.lens[R[n.have++]]=7&f,f>>>=3,m-=3}for(;n.have<19;)n.lens[R[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,I={bits:n.lenbits},L=s(0,n.lens,0,19,n.lencode,0,n.work,I),n.lenbits=I.bits,L){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;E=(O=n.lencode[f&(1<<n.lenbits)-1])>>>16&255,A=65535&O,!((S=O>>>24)<=m);){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}if(A<16)f>>>=S,m-=S,n.lens[n.have++]=A;else{if(16===A){for(k=S+2;m<k;){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}if(f>>>=S,m-=S,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}D=n.lens[n.have-1],w=3+(3&f),f>>>=2,m-=2}else if(17===A){for(k=S+3;m<k;){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}m-=S,D=0,w=3+(7&(f>>>=S)),f>>>=3,m-=3}else{for(k=S+7;m<k;){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}m-=S,D=0,w=11+(127&(f>>>=S)),f>>>=7,m-=7}if(n.have+w>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;w--;)n.lens[n.have++]=D}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,I={bits:n.lenbits},L=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,I),n.lenbits=I.bits,L){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,I={bits:n.distbits},L=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,I),n.distbits=I.bits,L){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(g>=6&&h>=258){e.next_out=p,e.avail_out=h,e.next_in=u,e.avail_in=g,n.hold=f,n.bits=m,r(e,b),p=e.next_out,d=e.output,h=e.avail_out,u=e.next_in,c=e.input,g=e.avail_in,f=n.hold,m=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;E=(O=n.lencode[f&(1<<n.lenbits)-1])>>>16&255,A=65535&O,!((S=O>>>24)<=m);){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}if(E&&0==(240&E)){for(T=S,G=E,P=A;E=(O=n.lencode[P+((f&(1<<T+G)-1)>>T)])>>>16&255,A=65535&O,!(T+(S=O>>>24)<=m);){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}f>>>=T,m-=T,n.back+=T}if(f>>>=S,m-=S,n.back+=S,n.length=A,0===E){n.mode=26;break}if(32&E){n.back=-1,n.mode=12;break}if(64&E){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&E,n.mode=22;case 22:if(n.extra){for(k=n.extra;m<k;){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}n.length+=f&(1<<n.extra)-1,f>>>=n.extra,m-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;E=(O=n.distcode[f&(1<<n.distbits)-1])>>>16&255,A=65535&O,!((S=O>>>24)<=m);){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}if(0==(240&E)){for(T=S,G=E,P=A;E=(O=n.distcode[P+((f&(1<<T+G)-1)>>T)])>>>16&255,A=65535&O,!(T+(S=O>>>24)<=m);){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}f>>>=T,m-=T,n.back+=T}if(f>>>=S,m-=S,n.back+=S,64&E){e.msg="invalid distance code",n.mode=30;break}n.offset=A,n.extra=15&E,n.mode=24;case 24:if(n.extra){for(k=n.extra;m<k;){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}n.offset+=f&(1<<n.extra)-1,f>>>=n.extra,m-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===h)break e;if(w=b-h,n.offset>w){if((w=n.offset-w)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}w>n.wnext?(w-=n.wnext,C=n.wsize-w):C=n.wnext-w,w>n.length&&(w=n.length),x=n.window}else x=d,C=p-n.offset,w=n.length;w>h&&(w=h),h-=w,n.length-=w;do{d[p++]=x[C++]}while(--w);0===n.length&&(n.mode=21);break;case 26:if(0===h)break e;d[p++]=n.length,h--,n.mode=21;break;case 27:if(n.wrap){for(;m<32;){if(0===g)break e;g--,f|=c[u++]<<m,m+=8}if(b-=h,e.total_out+=b,n.total+=b,b&&(e.adler=n.check=n.flags?a(n.check,d,b,p-b):i(n.check,d,b,p-b)),b=h,(n.flags?f:l(f))!==n.check){e.msg="incorrect data check",n.mode=30;break}f=0,m=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;m<32;){if(0===g)break e;g--,f+=c[u++]<<m,m+=8}if(f!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}f=0,m=0}n.mode=29;case 29:L=1;break e;case 30:L=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=p,e.avail_out=h,e.next_in=u,e.avail_in=g,n.hold=f,n.bits=m,(n.wsize||b!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&v(e,e.output,e.next_out,b-e.avail_out)?(n.mode=31,-4):(_-=e.avail_in,b-=e.avail_out,e.total_in+=_,e.total_out+=b,n.total+=b,n.wrap&&b&&(e.adler=n.check=n.flags?a(n.check,d,b,e.next_out-b):i(n.check,d,b,e.next_out-b)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===_&&0===b||4===t)&&0===L&&(L=-5),L)},t.inflateEnd=function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?-2:(n.head=t,t.done=!1,0):-2},t.inflateSetDictionary=function(e,t){var n,o=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?-2:11===n.mode&&i(1,t,o,0)!==n.check?-3:v(e,t,o,o)?(n.mode=31,-4):(n.havedict=1,0):-2},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";e.exports=function(e,t){var n,o,i,a,r,s,l,c,d,u,p,g,h,f,m,y,v,_,b,w,C,x,S,E,A;n=e.state,o=e.next_in,E=e.input,i=o+(e.avail_in-5),a=e.next_out,A=e.output,r=a-(t-e.avail_out),s=a+(e.avail_out-257),l=n.dmax,c=n.wsize,d=n.whave,u=n.wnext,p=n.window,g=n.hold,h=n.bits,f=n.lencode,m=n.distcode,y=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;e:do{h<15&&(g+=E[o++]<<h,h+=8,g+=E[o++]<<h,h+=8),_=f[g&y];t:for(;;){if(g>>>=b=_>>>24,h-=b,0===(b=_>>>16&255))A[a++]=65535&_;else{if(!(16&b)){if(0==(64&b)){_=f[(65535&_)+(g&(1<<b)-1)];continue t}if(32&b){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&_,(b&=15)&&(h<b&&(g+=E[o++]<<h,h+=8),w+=g&(1<<b)-1,g>>>=b,h-=b),h<15&&(g+=E[o++]<<h,h+=8,g+=E[o++]<<h,h+=8),_=m[g&v];n:for(;;){if(g>>>=b=_>>>24,h-=b,!(16&(b=_>>>16&255))){if(0==(64&b)){_=m[(65535&_)+(g&(1<<b)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(C=65535&_,h<(b&=15)&&(g+=E[o++]<<h,(h+=8)<b&&(g+=E[o++]<<h,h+=8)),(C+=g&(1<<b)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(g>>>=b,h-=b,C>(b=a-r)){if((b=C-b)>d&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(x=0,S=p,0===u){if(x+=c-b,b<w){w-=b;do{A[a++]=p[x++]}while(--b);x=a-C,S=A}}else if(u<b){if(x+=c+u-b,(b-=u)<w){w-=b;do{A[a++]=p[x++]}while(--b);if(x=0,u<w){w-=b=u;do{A[a++]=p[x++]}while(--b);x=a-C,S=A}}}else if(x+=u-b,b<w){w-=b;do{A[a++]=p[x++]}while(--b);x=a-C,S=A}for(;w>2;)A[a++]=S[x++],A[a++]=S[x++],A[a++]=S[x++],w-=3;w&&(A[a++]=S[x++],w>1&&(A[a++]=S[x++]))}else{x=a-C;do{A[a++]=A[x++],A[a++]=A[x++],A[a++]=A[x++],w-=3}while(w>2);w&&(A[a++]=A[x++],w>1&&(A[a++]=A[x++]))}break}}break}}while(o<i&&a<s);o-=w=h>>3,g&=(1<<(h-=w<<3))-1,e.next_in=o,e.next_out=a,e.avail_in=o<i?i-o+5:5-(o-i),e.avail_out=a<s?s-a+257:257-(a-s),n.hold=g,n.bits=h}},function(e,t,n){"use strict";var o=n(87),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],r=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,l,c,d,u,p){var g,h,f,m,y,v,_,b,w,C=p.bits,x=0,S=0,E=0,A=0,T=0,G=0,P=0,D=0,L=0,I=0,k=null,O=0,F=new o.Buf16(16),R=new o.Buf16(16),M=null,N=0;for(x=0;x<=15;x++)F[x]=0;for(S=0;S<l;S++)F[t[n+S]]++;for(T=C,A=15;A>=1&&0===F[A];A--);if(T>A&&(T=A),0===A)return c[d++]=20971520,c[d++]=20971520,p.bits=1,0;for(E=1;E<A&&0===F[E];E++);for(T<E&&(T=E),D=1,x=1;x<=15;x++)if(D<<=1,(D-=F[x])<0)return-1;if(D>0&&(0===e||1!==A))return-1;for(R[1]=0,x=1;x<15;x++)R[x+1]=R[x]+F[x];for(S=0;S<l;S++)0!==t[n+S]&&(u[R[t[n+S]]++]=S);if(0===e?(k=M=u,v=19):1===e?(k=i,O-=257,M=a,N-=257,v=256):(k=r,M=s,v=-1),I=0,S=0,x=E,y=d,G=T,P=0,f=-1,m=(L=1<<T)-1,1===e&&L>852||2===e&&L>592)return 1;for(;;){_=x-P,u[S]<v?(b=0,w=u[S]):u[S]>v?(b=M[N+u[S]],w=k[O+u[S]]):(b=96,w=0),g=1<<x-P,E=h=1<<G;do{c[y+(I>>P)+(h-=g)]=_<<24|b<<16|w|0}while(0!==h);for(g=1<<x-1;I&g;)g>>=1;if(0!==g?(I&=g-1,I+=g):I=0,S++,0==--F[x]){if(x===A)break;x=t[n+u[S]]}if(x>T&&(I&m)!==f){for(0===P&&(P=T),y+=E,D=1<<(G=x-P);G+P<A&&!((D-=F[G+P])<=0);)G++,D<<=1;if(L+=1<<G,1===e&&L>852||2===e&&L>592)return 1;c[f=I&m]=T<<24|G<<16|y-d|0}}return 0!==I&&(c[y+I]=x-P<<24|64<<16|0),p.bits=T,0}},function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){t.read=function(e,t,n,o,i){var a,r,s=8*i-o-1,l=(1<<s)-1,c=l>>1,d=-7,u=n?i-1:0,p=n?-1:1,g=e[t+u];for(u+=p,a=g&(1<<-d)-1,g>>=-d,d+=s;d>0;a=256*a+e[t+u],u+=p,d-=8);for(r=a&(1<<-d)-1,a>>=-d,d+=o;d>0;r=256*r+e[t+u],u+=p,d-=8);if(0===a)a=1-c;else{if(a===l)return r?NaN:1/0*(g?-1:1);r+=Math.pow(2,o),a-=c}return(g?-1:1)*r*Math.pow(2,a-o)},t.write=function(e,t,n,o,i,a){var r,s,l,c=8*a-i-1,d=(1<<c)-1,u=d>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,g=o?0:a-1,h=o?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,r=d):(r=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-r))<1&&(r--,l*=2),(t+=r+u>=1?p/l:p*Math.pow(2,1-u))*l>=2&&(r++,l/=2),r+u>=d?(s=0,r=d):r+u>=1?(s=(t*l-1)*Math.pow(2,i),r+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,i),r=0));i>=8;e[n+g]=255&s,g+=h,s/=256,i-=8);for(r=r<<i|s,c+=i;c>0;e[n+g]=255&r,g+=h,r/=256,c-=8);e[n+g-h]|=128*f}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},,,function(e,t,n){"use strict";const o=[{ext:"gvdesign",type:"application/gravit+design",default:!0}],i=o.map(e=>{let{ext:t}=e;return t.toLowerCase()});e.exports={AmplitudeHelper:{logEvent(){},updateUserProperty(){},updateUserLicenseProperties(){}},AmplitudeData:{Events:{},EventProperties:{},UserProperties:{}},ENABLE_UNSPLASH_INTEGRATION:!0,GoogleTagManagerSettings:null,IN_APP_PURCHASE:{WINDOWS:{trunk:null,rc:null,beta:null,production:null,lts:null},CLEVERBRIDGE:{openCartInAPopup:!1}},License:null,LicenseType:null,Runtime:null,NOTIFICATION_USER_MENTION_REGEX:null,NOTIFICATION_SETTINGS_ENABLED:!1,FILE_REVIEW_ENABLED:!0,ANNOTATION_PERMANENT_LINK:!1,ANONYMOUS_SESSION_ENABLED:!1,LOCAL_FONTS_API_ENABLED:!0,DOMAIN:null,GA:{customDimensions:null},TOUCH_LAYOUT:!0,SHARE_ENGINE:!0,LEGACY_SHARE_DIALOG:!1,ENABLE_COLLABORATION:!0,ENABLE_REQUEST_ACCESS:!0,ENABLE_GUEST_ACCESS:!0,LISTS_FEATURE:!0,REMOVE_GUEST_USER_WHEN_ROLE_IS_NO_ACCESS:!1,PURCHASE:{URL_TO_PRODUCT:null},DESIGNER:{TITLE:"Corel Vector"},TRANSLATION_MANAGER:{CONSIDER_EXTENSION:void 0},SOFTWARE_UPDATE:{SHOW_CHANGE_LOG:!1,CHANGE_LOG_LINK:"https://corelvector.com/changelog/"},LOGIN_DIALOGS:{POPUP:!0},HAS_ENTERPRISE:!1,FORGOT_PWD_LINK:null,LICENSE:{UPGRADEABLE:!1},CLOUD_DIALOG:{NEW_LAYOUT:!1,SHOW_FILE_SIZE_INFO:!0},CLOUD_SYNC_FEATURE:{NEW_LAYOUT:!0},USER_LOGIN:{SHOW_PURCHASE_PRO:!0},AUTO_SAVE_ENABLED:!0,AUTOSAVE_INTERVALS:[5,10,20],AUTOSAVE_INTERVAL_DEFAULT:5,FILE_FORMATS:o,FILE_EXTENSIONS:i,LINKS:{CLEVERBRIDGE_SUPPORT_URL:"https://support.cleverbridge.com/hc/en/requests/new?ticket_form_id=18434",BLENDING_MODES_DOCUMENTATION_URL:null,ACCOUNT_SETTING_URL:null,USER_NAME_UPDATE_URL:null},FOLDER_FORMAT:"application/gravit+folder",HAS_SNAPZONES:!0,HAS_ANNOTATIONS:!1,PROFILE_DIALOG_URL:null,PRESET_LIMIT:void 0,CONNECTION_TEST_WITH_CREDENTIALS:!1,NEW_COMMENT_READ_TIMEOUT:3e4,cloudTrunkURL:null,cloudRCURL:null,trunkURL:null,betaURL:null,cloudBetaURL:null,prodURL:null,rcURL:null,ltsURL:null,domain:null,webcdr:null,stagingWebcdr:null,betaWebcdr:null,trunkwebcdr:null,websocketURL:null,trunkWebsocketURL:null,rcWebsocketURL:null,betaWebsocketURL:null,DateAPI:null,gApi:null,GooglePickerBuilder:null,USE_EXTENSION_IN_FILENAME:!0,ALWAYS_SHOW_ACCOUNT_SETTING_DIALOG:!0,ALLOW_REARRANGE_TABS:!0,SHOW_SIDEBAR_BADGE:!0,COMPUTE_SHA256_FOR_FILES:!1,IS_COREL:!1,IS_TRUNK:!1,IS_PROD:!0,IS_BETA:!1,FILE_ID_PREFIX:{},GFileReviewActions:{},FileStatus:{},User:{},NotificationConstants:{},LONG_PRESS_TIME_OUT:500,JPEG_EXPORT_QUALITY_DEFAULT:92,VTREE_FREE_HEIGHT:7,VTREE_FREE_HEIGHT_TOUCH:15,UN_BELIVEVABLE_FEW_BYTES_TO_SAVE:200,FILE_SIZE_TO_RAM_COEFFCIENT:1.5,FILE_SIZE_TO_SAVING_RAM_COEFFCIENT:5,MIN_JS_HEAP_SIZE:104857600,JS_HEAP_SIZE_LIMIT_POYFILL:4294705152,ELECTRON_NOJS_MAX_MEMORY:1503238553.6,MIN_TOUCH_MOVE_DISTANCE:20,MIN_TWO_FINGERS_TOUCH_MOVE_DISTANCE:10,MIN_SUPPORTED_SCREEN_SIZE:1024,MAX_FOLDER_DEPTH_FOR_CLOUD:64,OFFLINE_CHECK_MIN_WAIT:2e3,USER_CHECK_MIN_WAIT:3e4,SubscriptionStatus:null,PurchaseStatus:null,EXTERNAL_APP:{GOOGLEDRIVE:"googledrive"},DEFAULT_FILE_THUMBNAIL:"assets/img/cloud/default-file-preview.svg",CACHED_GAPI_FUNCTIONS:["getCollaborators","getFileExtended","getFile","getExternalFile"],SEARCH_IN_FOLDERS:!1,ACTIVE_USAGE_IDLE_TIME:3e4}},function(e,t,n){"use strict";function o(){}o.Provider={CloudNative:1,SharepointNative:2,GoogleDriveNative:3,OneDriveBusinessNative:4},o.SecurityLevel={Lowest:0,Highest:1},e.exports=o},function(e,t,n){"use strict";var o=n(136).match(/firefox\/(\d+)/i);e.exports=!!o&&+o[1]},function(e,t,n){"use strict";var o=n(136);e.exports=/MSIE|Trident/.test(o)},function(e,t,n){"use strict";var o=n(136).match(/AppleWebKit\/(\d+)\./);e.exports=!!o&&+o[1]},,,function(e,t,n){"use strict";var o=n(23),i=n(48),a=n(127),r=n(294),s=n(20),l=o.RegExp,c=l.prototype;i&&s((function(){var e=!0;try{l(".","d")}catch(t){e=!1}var t={},n="",o=e?"dgimsy":"gimsy",i=function(e,o){Object.defineProperty(t,e,{get:function(){return n+=o,!0}})},a={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var r in e&&(a.hasIndices="d"),a)i(r,a[r]);return Object.getOwnPropertyDescriptor(c,"flags").get.call(t)!==o||n!==o}))&&a(c,"flags",{configurable:!0,get:r})},,,,,,,,,function(e,t,n){"use strict";n(7);e.exports=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._factory=e,this._timeout=t,this._lastCheckTime=0}get(){if(this._timeout){const e=Date.now();this._lastCheckTime||(this._lastCheckTime=e);e-this._lastCheckTime>=this._timeout&&(this.reset(),this._lastCheckTime=e)}return this._promise||(this._promise=this._factory.apply(this._factory,arguments)),this._promise}reset(){this._promise=null}setCacheValue(e){this.reset(),this._lastCheckTime=Date.now(),this._promise=Promise.resolve(e)}}},function(e,t,n){var o,i,a,r,s,l,c,d;e.exports=(d=n(47),i=(o=d).lib,a=i.WordArray,r=i.Hasher,s=o.algo,l=[],c=s.SHA1=r.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],i=n[1],a=n[2],r=n[3],s=n[4],c=0;c<80;c++){if(c<16)l[c]=0|e[t+c];else{var d=l[c-3]^l[c-8]^l[c-14]^l[c-16];l[c]=d<<1|d>>>31}var u=(o<<5|o>>>27)+s+l[c];u+=c<20?1518500249+(i&a|~i&r):c<40?1859775393+(i^a^r):c<60?(i&a|i&r|a&r)-1894007588:(i^a^r)-899497514,s=r,r=a,a=i<<30|i>>>2,i=o,o=u}n[0]=n[0]+o|0,n[1]=n[1]+i|0,n[2]=n[2]+a|0,n[3]=n[3]+r|0,n[4]=n[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(o+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),o.SHA1=r._createHelper(c),o.HmacSHA1=r._createHmacHelper(c),d.SHA1)},function(e,t,n){var o,i,a,r;e.exports=(o=n(47),a=(i=o).lib.Base,r=i.enc.Utf8,void(i.algo.HMAC=a.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var n=e.blockSize,o=4*n;t.sigBytes>o&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),a=this._iKey=t.clone(),s=i.words,l=a.words,c=0;c<n;c++)s[c]^=1549556828,l[c]^=909522486;i.sigBytes=a.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))},,,,,,,,,,,,,,,,function(e,t){class n{getImageAsBlob(){return new Blob([this.getImageAsBinary()],{type:this.getMimeType()})}getImageAsBinary(){const e=atob(this.getImageAsBase64()),t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}getMimeType(){return this.mimeType}getImageAsDataURL(){return this.image}getImageAsBase64(){return this.image.split("base64,")[1]}static async fromBlob(e){const t=new n,o=await new Promise(t=>{const n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsDataURL(e)});return t.image=o,t.mimeType=e.type,t}}e.exports=n},function(e,t,n){"use strict";e.exports=class{static calculateProgress(e,t,n){return e+(t-e)*n}}},function(e,t,n){"use strict";var o=n(14);n(52),n(26),n(51),n(7),n(183),n(341),n(18),n(3),n(29);var i=n(1),a=n(34),r=o(n(826)),s=o(n(827)),l=o(n(37)),c=n(9),d=o(n(766)),u=o(n(768)),p=o(n(538));const g=n(372),h=n(111),f=n(577),m=n(322),y=n(421),v=n(71),_=n(143),b=n(373),w=n(78),C=n(769),x=n(537),{FILE_FORMATS:S}=n(9),E=Object.values(S).find(e=>e.default),A=10,T=50,G=80,P=100;function D(){}i.GObject.inherit(D,g),D.getSupportedFileFormats=function(){return b.getFileTypesArray().filter(e=>e.load)},D.convertToCloudItem=function(e){var t=_.from(e);if(t.updated=e.modifiedTime,t.created=e.createdTime,t.storage=_.Storage.GoogleDrive,!t.kind||t.kind!==s.default.Kind.TeamDrive&&t.kind!==s.default.Kind.Drive?t.mimeType===s.default.MimeType.Folder?t.setItemType(_.Type.Folder):(t.setItemType(_.Type.File),t.setVersion(e.version),t.setModificationTime(e.modifiedTime)):t.setItemType(_.Type.CorporateStorage),t.mimeType&&(t.type=t.mimeType),t.fileExtension){t.extension=t.fileExtension,t.name=e.name.replace(new RegExp(".(".concat(t.extension,")$"),"i"),"");const n=D.getSupportedFileFormats().find(e=>e.ext.toLowerCase()===t.fileExtension.toLowerCase());n&&(t.type=n.type||n.mime,t.setMimeType(t.type))}return t.capabilities&&(t.capabilities.canDownload&&(t.setPermission(_.Permission.Download),t.setPermission(_.Permission.Open)),t.capabilities.canEdit&&t.setPermission(_.Permission.Editing)),t.parent||(t.parent=null),t.hasThumbnail&&t.setPreviewURL(t.thumbnailLink),t.size&&t.setSize(t.size),t},D.Item=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;g.Item.call(this,e,t),this._rawData=n,this._token=o,t&&(this._setExtension(),t.version&&(this._version=t.version))},i.GObject.inheritAndMix(D.Item,g.Item,[y]),D.Item.prototype._version=null,D.Item.prototype._writing=!1,D.Item.prototype.setFile=function(e){if(!e)throw"File is incorrect";e instanceof _||(e=D.convertToCloudItem(e));const t=this._getOrCreateClient(),n=t&&t.getTokenIssuerSettings();!e.settings&&n&&(e=Object.assign(e,{settings:n})),g.Item.prototype.setFile.call(this,e),this._setExtension(),this._setVersion(e.version)},D.Item.prototype.isVersionNewerThan=function(e){if(e instanceof D.Item&&this.getUniqueId()===e.getUniqueId()){var t=this.getVersion()>e.getVersion(),n=e.getFile();const i=this.getFile();if(t&&o(i.modifiedTime,n.modifiedTime))return!0;const a=i.getVersion()>n.getVersion(),r=o(i.getModificationTime(),n.getModificationTime());if(a&&r)return!0}return!1;function o(e,t){return new Date(e).getTime()>new Date(t).getTime()}},D.Item.prototype.supportsShadowFile=function(){const e=this._getOrCreateClient();return!!e&&e.isCorporate()},D.Item.prototype.getCollaborativeFile=async function(){if(!this.supportsShadowFile())throw"Not the collaborative mode";return this._collaborativeFile=await gDesigner.getCloudCommunicationManager().getExternalFile(this.getId()).catch(()=>null),this._collaborativeFile},D.Item.prototype.setCollaborativeFileStatus=async function(e){if(!this.supportsShadowFile())throw"Not the collaborative mode";const t=this._collaborativeFile?this._collaborativeFile:await this.getCollaborativeFile();if(t&&Number(t.status)!==Number(e)){var n=t.status;t.status=e,gDesigner.hasEventListeners(m.FileStatusUpdate)&&gDesigner.trigger(new m.FileStatusUpdate(this,n,e))}},D.Item.prototype.getOrCreateCollaborativeFile=async function(){if(!this.supportsShadowFile())throw"Not the collaborative mode";var e=await this.getCollaborativeFile();return e||(await this.createShadowFile(),e=await this.getCollaborativeFile()),e},D.Item.prototype._app=c.FILE_ID_PREFIX.GOOGLEDRIVE,D.Item.prototype.getId=function(){const e=this._getGoogleId();return e?_.getCollaborativeFileId(e,_.Storage.GoogleDrive):null},D.Item.prototype._getGoogleId=function(){return this._id||null},D.Item.prototype._setExtension=function(){const e=this.getFile();e&&(e.fileExtension?this._ext=e.fileExtension:["application/vnd.corel-draw","application/cdr"].includes(e.mimeType)?this._ext="CDR":"application/des"===e.mimeType&&(this._ext="DES"))},D.Item.prototype._setFileSizeAfterSaved=async function(){return this._getOrCreateClient().getFileDetails(this.getUniqueId()).then(e=>{this._fileSizeAfterSaved=e.Length})},D.Item.prototype.write=async function(e,t,n,o,a){gContainer.verifyEnoughMemoryToSave(e);try{if(this._writing)return;if(e.hasPagesWithInfiniteEmptyCanvas())return void(n?n({code:507,noFailCall:!0,message:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.error-emtpy-infinite-canvas"))}):l.default.alert(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.error-emtpy-infinite-canvas"))));this._writing=!0;const h=e.getEditor().markSavePoint(),f=e=>{h.rollback(),n&&n(e)};try{const n={};e.updateStatus(w.Saving,n);const l=o||n.progress,h=e=>{l&&l(e)};let m;var r=this.getExtension();const y=e.isNew();if(h(A),i.GUtil.prepareForSaving(e.getScene(),r),"CDR"===r||"DES"===r){var c={progress:o,ext:r.toLowerCase()};m=await this._exportDocumentToCDR(e,c,a)}else{var d=e.getScene(),u=i.GNode.serialize(d,i.GUtil.extend({save:!0},a));m=new Blob([u])}h(T),this._verifyFileNotTooSmall(m.size,e),this._setFileSizeBeforeSaved(m.size);const _=await this._buildGoogleMetadataForDoc(e),b=e=>{h(p.default.calculateProgress(T,G,e))};var g=this._id?this._id:null;await this._getOrCreateClient().upload(g,m,_,s.default.DefaultUploadType,b).then(async n=>{this._updateInternalFileWithGoogleResponse(n);try{await this._setFileSizeAfterSaved(),this._verifyFileSizeAfterSaved()}catch(e){console.error(e)}if(e.updateStatus(w.Saved),y&&this.supportsShadowFile())return this.createShadowFile().then(()=>{gDesigner.hasEventListeners(v)&&gDesigner.trigger(new v(v.Type.StorageItemUpdated,e)),t&&t()});gDesigner.hasEventListeners(v)&&gDesigner.trigger(new v(v.Type.StorageItemUpdated,e)),h(P),t&&t()}).catch(t=>{e.updateStatus(w.SaveFailed),f(t)}).finally(()=>{this._writing=!1})}catch(e){f(e)}}catch(t){return e.updateStatus(w.SaveFailed),this._writing=!1,n&&n(t)}},D.Item.prototype.createOrUpdateFileWithMetadata=async function(e,t){try{if(this._writing)return;this._writing=!0;const n=await this._buildGoogleMetadata(t),o=await this._getOrCreateClient().upload(this._getGoogleId(),new Blob([e]),n);this._updateInternalFileWithGoogleResponse(o)}finally{this._writing=!1}},D.Item.prototype._updateInternalFileWithGoogleResponse=function(e){this.setFile(Object.assign(D.convertToCloudItem(e),{settings:this._getOrCreateClient().getTokenIssuerSettings()}))},D.Item.prototype._getOrCreateClient=function(){let e=this.getCloudClient();return!e&&this._file&&(e=new s.default(new f(this._file.settings)),this.setCloudClient(e)),e},D.Item.prototype._getClient=function(){return this._getOrCreateClient()},D.Item.prototype._exportDocumentToCDR=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(async(o,i)=>{r.default.prepareCDRforSaving(e,(function(e){return i(e)}),t,n,(function(e){return o(new Blob([e]))}))})},D.Item.prototype._setVersion=function(e){this._version=e},D.Item.prototype.getVersion=function(){return parseInt(this._version)},D.Item.prototype.read=async function(e,t){if(this._rawData){var n=this._rawData;return this._rawData=null,e(n)}await this._getOrCreateClient().getFile(this.getUniqueId(),this._getQuery()).then(async t=>{const n=await this._getOrCreateClient().getFileDetails(this.getUniqueId(),this._getQuery());this.setFile(n),this.supportsShadowFile()&&await this.syncShadowFile(),e(await h.createUint8ArrayFromBlob(t))}).catch(e=>t(e))},D.Item.prototype.getToken=function(){return this._token},D.Item.prototype.getMimeType=function(){return this.getFile().mimeType},D.Item.prototype.getPermissionsList=function(){return this._getOrCreateClient().getFilePermissions(this.getUniqueId())},D.Item.prototype.rolesMatch=function(e,t){return d.default[e]===t||u.default[t]===e},D.Item.prototype.getShareRole=async function(e){return this._getOrCreateClient().getFilePermissions(this.getUniqueId()).then(t=>{let n=null;return t&&t.permissions&&t.permissions.length&&t.permissions.some(t=>{let{email:o,role:i}=t;if(e===o)return n=i,!0}),n})},D.Item.prototype.requestExternalShare=function(e,t){let n=!1;try{n=this._getOrCreateClient().isCorporate()}catch(e){}return n?e?this._shareWithUser(e,t.getRole()):this._shareWithDomain(t.getRole()):Promise.reject(i.GLocale.get(new i.GLocaleKey("GGoogleDrive","error.only-for-corporate")))},D.Item.prototype.requestExternalUnShare=async function(e,t){let n=!1;try{n=this._getOrCreateClient().isCorporate()}catch(e){}if(!n)return Promise.reject(i.GLocale.get(new i.GLocaleKey("GGoogleDrive","error.only-for-corporate")));if(t&&t.is(c.ShareRoles.NoAccess))return Promise.resolve();const o=await this._getOrCreateClient().getShareIdForEmail(this.getUniqueId(),e);for(let e=0,t=o.length;e<t;e++)try{const t=await this._getOrCreateClient().removeShare(this.getUniqueId(),o[e]);if(t.status!==c.gApi.HTTP_STATUS_CODES.OK&&t.status!==c.gApi.HTTP_STATUS_CODES.NO_CONTENT){const e=t&&t.error&&t.error.message||i.GLocale.get(new i.GLocaleKey("GGoogleDrive","error.google-api-error"));return Promise.reject(e)}}catch(e){return Promise.reject(e)}return Promise.resolve()},D.Item.prototype._shareWithUser=async function(e,t){return this._getOrCreateClient().createOrUpdateUserShare(this.getUniqueId(),{role:t,emailAddress:e})},D.Item.prototype.isEmailFromCorporateDomain=async function(e){const t=gDesigner.getSyncUser();let n=!0;if(await this._getOrCreateClient().supportsEmailDomainCheck()){await this._getOrCreateClient().getAccountByEmail(e).catch(()=>!1)||(n=!1)}else c.gApi.sameDomain(t,{email:e})||(n=!1);return n},D.Item.prototype._shareWithDomain=async function(e){const t=await gDesigner.getUser(),n=t&&t.email.split("@")[1];return this._getOrCreateClient().createDomainShare(this.getUniqueId(),{role:e,domain:n})},D.Item.prototype._setId=function(e){this._id=e,this._file&&(this._file.id=e)},D.Item.prototype._buildGoogleMetadataForDoc=async function(e){const t=new C;t.thumbnail=await x.fromBlob(await e.buildPreview());const n=e.getScene();t.unit=n.getProperty("ut");const o=n.getActivePage(),i=o&&o.getGeometryBBox();return i&&(t.width=i.getWidth(),t.height=i.getHeight()),this._buildGoogleMetadata(t)},D.Item.prototype._buildGoogleMetadata=async function(e){const t=this._file.getExtension()||E.ext.toUpperCase(),n=this._file.getMimeType()||(o=t,Object.values(S).find(e=>{let{ext:t}=e;return!!t&&t.toLowerCase()===o.toLowerCase()})||E).type;var o;const i=e.thumbnail.getImageAsBlob(),a=await this._buildSafeEncodedBase64ForBlob(i),r={name:this._file.getNameWithExtension(),mimeType:n,contentHints:{thumbnail:{mimeType:e.thumbnail.getMimeType(),image:a}},appProperties:{type:n,app:"designer",unit:e.unit,width:e.width,height:e.height,trashed:null},viewedByMeTime:(new Date).toISOString()};return this._file.parent&&!this.getUniqueId()&&(r.parents=[this._file.getParentId()]),this._isFromGSuite()&&(r.driveId=this._getTeamDriveId()),r},D.Item.prototype._buildSafeEncodedBase64ForBlob=function(e){return new Promise((t,n)=>{const o=new FileReader;o.onload=e=>{const n=e.target.result,o=n.substr(n.indexOf(",")+1),i=(0,a.base64URLSafeEncode)(o);t(i)},o.onerror=function(){n(o.error)},o.readAsDataURL(e)})},D.Item.prototype.hasVersionControl=function(){return!0},D.Item.prototype.hasUpdates=async function(){if(!this.getUniqueId()||!this.getVersion())return!1;const e=await this._getOrCreateClient().getFileDetails(this.getUniqueId(),this._getQuery());return new D.Item(this.getStorage(),e).isVersionNewerThan(this)},D.Item.prototype._getQuery=function(){return this._isFromGSuite()?{supportsAllDrives:!0}:{}},D.Item.prototype._isFromGSuite=function(){return!!this._getTeamDriveId()},D.Item.prototype._getTeamDriveId=function(){const e=this._file.driveId;if(e)return e;const t=this._file.parent&&this._file.parent.driveId;return t||null},D.Item.prototype.getLatestFileVersion=async function(){const e=this._getOrCreateClient(),t=await this.getLatestFileInfo(),n=await e.getFile(this.getUniqueId(),this._getQuery()),o=await h.createUint8ArrayFromBlob(n),i=new D.Item(this._storage,t,o);return i.setCloudClient(e),i},D.Item.prototype.getLatestFileInfo=async function(){const e=await this._getOrCreateClient().getFileDetails(this.getUniqueId(),this._getQuery());return D.convertToCloudItem(e)},D.Item.prototype.exists=function(){return this._getOrCreateClient().fileExists(this.getUniqueId(),this._getQuery())},D.Item.prototype.toString=function(){return"[Object GGoogleDriveStorage.Item]"},e.exports=D},function(e,t,n){"use strict";n(1079)},function(e,t,n){"use strict";var o=n(30),i=n(25),a=n(242),r=n(55),s=n(58),l=n(81).f,c=n(228),d=n(1080),u=n(1081),p=n(241),g=n(765),h=!1,f=p("meta"),m=0,y=function(e){l(e,f,{value:{objectID:"O"+m++,weakData:{}}})},v=e.exports={enable:function(){v.enable=function(){},h=!0;var e=c.f,t=i([].splice),n={};n[f]=1,e(n).length&&(c.f=function(n){for(var o=e(n),i=0,a=o.length;i<a;i++)if(o[i]===f){t(o,i,1);break}return o},o({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:d.f}))},fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,f)){if(!u(e))return"F";if(!t)return"E";y(e)}return e[f].objectID},getWeakData:function(e,t){if(!s(e,f)){if(!u(e))return!0;if(!t)return!1;y(e)}return e[f].weakData},onFreeze:function(e){return g&&h&&u(e)&&!s(e,f)&&y(e),e}};a[f]=!0},,,,,,,function(e,t,n){"use strict";e.exports={DEFAULT:0,PRESS_AND_HOLD:1}},function(e,t,n){"use strict";n(3);var o=n(1),i=n(16),a=n(27);function r(){}o.GObject.inherit(r,a),r.ID="view.zoom.fit-selection",r.TITLE=new o.GLocaleKey("GFitSelectionAction","title"),r.prototype.getId=function(){return r.ID},r.prototype.getTitle=function(){return r.TITLE},r.prototype.getCategory=function(){return i.CATEGORY_VIEW},r.prototype.getGroup=function(){return"zoom"},r.prototype.isEnabled=function(){var e=gDesigner.getActiveDocument(),t=e?e.getEditor():null;return t&&t.hasSelection()},r.prototype.execute=function(){var e=gDesigner.getActiveDocument(),t=(e?e.getEditor():null).getSelectionBBox();t&&!t.isEmpty()&&e.getActiveWindow().getView().zoomAll(t,!1,!0)},r.prototype.toString=function(){return"[Object GFitSelectionAction]"},e.exports=r},function(e,t,n){"use strict";var o=n(14);n(52),n(7),n(3),n(62),n(28);var i=n(45),a=n(1),r=n(13),s=o(n(223)),l=o(n(325)),c=n(61),d=o(n(326)),u=n(1251),p=n(429),g=n(71),h=(n(588),n(785)),f=n(379),m=n(843),y=n(115),v=n(1510),_=n(585),b=n(1511),w=n(343),C=n(574);const x=n(376),S=n(125);var E=n(1512);const A=n(277),T=n(377),G=n(322),P=n(419),{SHOW_SIDEBAR_BADGE:D,NOTIFICATION_SETTINGS_ENABLED:L}=n(9),I=n(78),k=n(203),O=n(1255),{DateAPI:F,FileStatus:{APPROVED:R}}=n(9),M=n(185);function N(){h.call(this),this._annotationPanels=[],this._annotationProperties=[],this._handleFocusInEvent=this._handleFocusInEvent.bind(this),this._handleFocusOutEvent=this._handleFocusOutEvent.bind(this)}a.GObject.inherit(N,h),N.ANNOTATION_PROPERTIES_ARROW_POSITION=[32.5,44,55.5,67,78.5,90],N.ANNOTATION_PROPERTIES_ARROW_POSITION_TOUCH=[25.5,38,50.5,63,75.5,88],N.ID=M.SidebarsIds.GAnnotationsSidebar,N.TITLE=new a.GLocaleKey("GAnnotationsSidebar","text.title"),N.prototype._htmlElement=null,N.prototype._panelsContainer=null,N.prototype._annotationPanels=null,N.prototype._annotationProperties=null,N.prototype._document=null,N.prototype._notificationMenu=null,N.prototype._elements=null,N.prototype._listenersAdded=!1,N.prototype._annotationToolbar=null,N.prototype._annotationsToolbarPanel=null,N.prototype._showResolved=!1,N.prototype._showDistance=i.GEditorOptions.showDistance,N.prototype._toolExitKey=i.GEditorOptions.toolExitKey,N.prototype._currentAnnotations=null,N.prototype._localAnnotations=null,N.prototype._page=null,N.prototype.getId=function(){return N.ID},N.prototype.getTitle=function(){return N.TITLE},N.prototype.isEnabled=function(){return!!this._document},N.prototype.isVisible=function(){return!!gDesigner.getApplicationManager().isCommentingEnabled()},N.prototype.isDeactivatable=function(){return!this._annotationPanels||!this._annotationPanels.some(e=>e.properties.isAddingAnnotation())},N.prototype.getOrientation=function(){return f.Orientation.Right},N.prototype.getMinimumWidth=function(){return this._getSidebarWidth()},N.prototype.isResizeable=function(){return!1},N.prototype.getDefaultWidth=function(){return this._getSidebarWidth()},N.prototype._getSidebarWidth=function(){return gDesigner.isTouchEnabled()?376:300},N.prototype._storageItemFileStatusEvent=function(e){this._storageItem&&this._storageItem===e.storageItem&&(e.oldStatus!==R&&e.newStatus!==R||this._updatePropertyPanels(!0))},N.prototype._toggleShowResolved=function(e){if(e!==this._showResolved){this._showResolved=e;for(var t=this._annotationPanels.length-1;t>=0;t--){this._annotationPanels[t].properties.toggleShowResolved(e)}this._document.getActiveWindow().getView().getViewConfiguration().showResolvedAnnotations=e,this._document.getActiveWindow().getView().invalidateAndResetCache(null)}},N.prototype.syncAnnotations=function(e){return this._annotationPanels&&this._document&&this._document.getAnnotationsId()?this.isAnnotationPropertiesEditing()?Promise.resolve():new Promise(t=>{(e?w.updateAndReturnCloudAnnotationsForDocument(this._document,this._currentAnnotations):w.getCloudAnnotationsForDocument(this._document)).then(n=>{let o=n.annotationsCollection,i=!1;this._document&&this._document.getAnnotationsId()!==n.cid&&t(i);let a=!1;if(o){this._currentAnnotations=o;for(let t=this._annotationPanels.length-1;t>=0;t--){let n=this._annotationPanels[t];if(n.properties instanceof v){let t=this._getAnnotationsToSet(o,n.properties.getPage()),r=n.properties.setAnnotations(t);r===O.UPDATED?i=!0:r===O.DELAYED&&(a=!0,n.properties.setDelayedSyncCallback(this.syncAnnotations.bind(this,e)))}}}if(i=i&&!a,i){let e=this._document.getScene();e&&e.setLastTimeAnnotationsFromCloudModified(n.lastUpdateTime),gDesigner.notifyDocumentModified(this._document),this._active?this._activateAnnotations():this.trigger(h.UPDATE_EVENT)}t(i)})}):Promise.resolve()},N.prototype._getAnnotationsToSet=function(e,t){let n=w.findAnnotationsListForPage(t,e);return n||(n={"@":"annlst"}),n},N.prototype.init=function(e){h.prototype.init.call(this,e),this._htmlElement=e,this._notificationMenu=new s.default(null,"g-annotation-sidebar-notification-menu");const t=gDesigner.getApplicationManager().isCommentingEditingEnabled();this._sidebarTitle=$("<div></div>").addClass("sidebar-title-inner").append(a.GLocale.get(this.getTitle())),this._annotationToolbar=$("<div></div>").addClass("toolbar annotations-toolbar");const n=$("<button></button>");var o=$("<div></div>").addClass("annotation-sidebar-options").gOverlay({releaseOnClose:!1,clazz:"g-annotation-sidebar-option-overlay",closeCallback:()=>n.removeClass("g-active")});this._annotationsToolbarPanel=$("<div></div>").addClass("properties-panel").addClass("annotations-properties-panel");var r=$("<div></div>").addClass("annotation-options-box").appendTo(this._annotationToolbar);n.attr("data-title",a.GLocale.get(new a.GLocaleKey("GAnnotationsSidebar","text.annotation-options"))).addClass("annotation-options").append($("<span></span>").addClass("gravit-icon-settings")).on("click",function(e){o.gOverlay("open",$(e.target).closest("button")),n.addClass("g-active")}.bind(this)).appendTo(r),$("<span></span>").addClass("indicator").appendTo(this._annotationToolbar),this._optionsToolbar=$("<div></div>").gPropertyRow({noPaddingRight:!0,clickable:!0,rawClick:e=>{var t=!$(e.target).find("input").prop("checked");$(e.target).find("input").prop("checked",t),gDesigner.stats("annotations_settings_show-resolved",t?"On":"Off"),this._toggleShowResolved(t),e.stopPropagation()},columns:[{width:"100%",content:$("<label>").append($("<input>").attr("type","checkbox").prop("checked",this._showResolved).on("change",e=>{var t=$(e.target).prop("checked");gDesigner.stats("annotations_settings_show-resolved",t?"On":"Off"),this._toggleShowResolved(t),e.stopPropagation()})).append($("<span>").text(a.GLocale.get(new a.GLocaleKey("GAnnotationsSidebar","text.show-resolved"))))}]}),t&&this._optionsToolbar.gPropertyRow({noPaddingRight:!0,clickable:!0,rawClick:()=>{gDesigner.getApplicationManager().isCommentingEditingEnabled()&&(w.resolveAllComments(this._document),this.relayout(!0))},columns:[{width:"100%",content:$("<label>").append($("<span>").addClass("resolve-all-button").addClass("gravit-icon-resolve-all")).append($("<span>").text(a.GLocale.get(new a.GLocaleKey("GAnnotationsSidebar","text.resolve-all"))))}]}),L&&this._optionsToolbar.gPropertyRow({clickable:!0,isMenu:!0,rawClick:e=>{if(this._document&&this._document.isCloudFile())this._notificationMenu.open(e.target,p.Position.Right_Bottom,p.Position.Right_Bottom),$("body").find(".hover-notification-container")&&this._removeHoverNotificationFrag(),this._openHoverNotification(e.target);else{this._optionsToolbar.find(".notification-label").closest(".columns").gTooltip("show")}e.stopPropagation()},columns:[{width:"100%",clazz:"notification-label",content:$("<label>").append($("<span>").addClass("resolve-all-button").addClass("gravit-icon-notification")).append($("<span>").text(a.GLocale.get(new a.GLocaleKey("GAnnotationsSidebar","text.notification"))))}]}),this._optionsToolbar.appendTo(o),$("<div/>").addClass("offline-overlay-message").append($("<div/>").addClass("box").append($("<span/>").text(a.GLocale.get(new a.GLocaleKey("GOfflineDialog","title.unavailable-feature"))))).appendTo(this._htmlElement),gDesigner.addEventListener(g,this._documentEvent,this),gDesigner.getWindows().addEventListener(_.WindowEvent,this._windowEvent,this),gDesigner.getToolManager().addEventListener(i.GToolManager.ToolChangedEvent,this._toolChangedEvent,this),gDesigner.addEventListener(x,this._stateChangedEvent,this),gDesigner.addEventListener(A,this._networkAvailabilityChangedEvent,this),this._activeTool(gDesigner.getToolManager().getActiveTool()),this._updatePropertyPanels(!0)},N.prototype.getTouchTools=function(){if(!this.isEnabled())return[];if(!this._active){const e=this._document&&this._document.getEditor(),t=e&&e.getSelection();if(t&&t.length)return[]}return[new d.default({id:"annotation",sidebar:this.getId(),icon:"gravit-icon-touch-comment-docker",panel:[this._annotationsToolbarPanel,".annotations-properties-panel"],toolbar:[this._annotationToolbar,".annotations-toolbar"]})]},N.prototype.getAnnotationsProperties=function(){return[new b([b.PropertySet.FillLayer,b.PropertySet.BorderLayer,b.PropertySet.BorderWidth],a.GEllipseAnnotation,i.GEllipseAnnotationTool,"gravit-icon-annotationtools-ellipse","text.tooltip-ellipse-tool",{_ptf:"text.tooltip-ellipse-fill",_ptb:"text.tooltip-ellipse-border",_ptfdropper:"text.tooltip-ellipse-dropper-fill",_ptbdropper:"text.tooltip-ellipse-dropper-border",_bw:"text.tooltip-ellipse-outline"},"Ellipse","tool-ellipse"),new b([b.PropertySet.FillLayer,b.PropertySet.BorderLayer,b.PropertySet.BorderWidth],a.GRectangleAnnotation,i.GRectangleAnnotationTool,"gravit-icon-annotationtools-rectangle","text.tooltip-rectangle-tool",{_ptf:"text.tooltip-rectangle-fill",_ptb:"text.tooltip-rectangle-border",_ptfdropper:"text.tooltip-rectangle-dropper-fill",_ptbdropper:"text.tooltip-rectangle-dropper-border",_bw:"text.tooltip-rectangle-outline"},"Rectangle","tool-rectangle"),new b([b.PropertySet.BorderLayer,b.PropertySet.BorderWidth],a.GPencilAnnotation,i.GPencilAnnotationTool,"gravit-icon-annotationtools-pencil","text.tooltip-pencil-tool",{_ptb:"text.tooltip-pencil-border",_ptbdropper:"text.tooltip-pencil-dropper-border",_bw:"text.tooltip-pencil-outline"},"Pencil","tool-pencil"),new b([b.PropertySet.BorderLayer,b.PropertySet.BorderWidth],a.GHighlighterAnnotation,i.GHighlighterAnnotationTool,"gravit-icon-annotationtools-highlighter","text.tooltip-highlighter-tool",{_ptb:"text.tooltip-highlighter-border",_ptbdropper:"text.tooltip-highlighter-dropper-border",_bw:"text.tooltip-highlighter-outline"},"Highlighter","tool-highlighter"),new b([b.PropertySet.BorderLayer,b.PropertySet.BorderWidth,b.PropertySet.BorderHeadMarker,b.PropertySet.BorderTailMarker],a.GArrowAnnotation,i.GArrowAnnotationTool,"gravit-icon-annotationtools-line","text.tooltip-arrow-tool",{_ptb:"text.tooltip-arrow-border",_ptbdropper:"text.tooltip-arrow-dropper-border",_bw:"text.tooltip-arrow-outline"},"Line","tool-line"),new b([b.PropertySet.FillLayer],a.GCommentAnnotation,i.GCommentAnnotationTool,"gravit-icon-annotationtools-comment","text.tooltip-comment-tool",{_ptf:"text.tooltip-comment-fill",_ptfdropper:"text.tooltip-comment-dropper-fill"},"Note","tool-comment"),new E]},N.prototype.activate=function(){this._active=!0,!this._listenersAdded&&this._document&&(this._addListeners(),this._updatePropertyPanels(!0)),this._updateToolbarButtons(),this._document&&this._document.getActiveWindow()&&this._activateAnnotations(),gDesigner.getToolManager().activateTool(i.GPointerTool,null,!0),this.syncAnnotations()},N.prototype.deactivate=function(){this._active=!1,this._listenersAdded&&this._removeListeners(),this._document&&this._document.getActiveWindow()&&this._deactivateAnnotations()},N.prototype._activateAnnotations=function(){this._document&&(this._document.getEditor().clearSelection(),this._document.getActiveWindow().getView().getViewConfiguration().elementAnnotations=!0,this._document.getActiveWindow().getView().getViewConfiguration().showResolvedAnnotations=this._showResolved,this._showDistance=i.GEditorOptions.showDistance,this._toolExitKey=i.GEditorOptions.toolExitKey,i.GEditorOptions.showDistance=!1,i.GEditorOptions.toolExitKey=r.GKey.Constant.ESC,this._document.getActiveWindow().getView().invalidateAndResetCache(null))},N.prototype._deactivateAnnotations=function(){if(this._document){var e=this._document.getEditor();e.getSelection()&&e.updateSelection(!1,e.getSelection().filter(e=>!e.hasMixin(a.GAnnotation))),this._document.getActiveWindow().getView().getViewConfiguration().elementAnnotations=!1,i.GEditorOptions.showDistance=this._showDistance,i.GEditorOptions.toolExitKey=this._toolExitKey,this._document.getActiveWindow().getView().invalidateAndResetCache(null)}},N.prototype._addListeners=function(){var e=this._document.getScene(),t=this._document.getEditor();gDesigner.getToolManager().addEventListener(i.GToolManager.ToolChangedEvent,this._updateFromToolOrSelection,this),t.addEventListener(i.GEditor.SelectionChangedEvent,this._selectionChangedEvent,this),e.addEventListener(a.GNode.AfterFlagChangeEvent,this._afterFlagChangeEvent,this),e.addEventListener(a.GNode.AfterInsertEvent,this._afterInsertEvent,this),e.addEventListener(a.GNode.AfterRemoveEvent,this._afterRemoveEvent,this),gDesigner.addEventListener(S,this._settingChanged,this),gDesigner.isTouchEnabled()&&this._htmlElement&&(this._htmlElement[0].addEventListener("focusin",this._handleFocusInEvent,!0),this._htmlElement[0].addEventListener("focusout",this._handleFocusOutEvent,!0)),this._listenersAdded=!0},N.prototype._removeListeners=function(){var e=this._document.getScene(),t=this._document.getEditor();gDesigner.getToolManager().removeEventListener(i.GToolManager.ToolChangedEvent,this._updateFromToolOrSelection,this),t.removeEventListener(i.GEditor.SelectionChangedEvent,this._selectionChangedEvent,this),e.removeEventListener(a.GNode.AfterFlagChangeEvent,this._afterFlagChangeEvent,this),e.removeEventListener(a.GNode.AfterInsertEvent,this._afterInsertEvent,this),e.removeEventListener(a.GNode.AfterRemoveEvent,this._afterRemoveEvent,this),gDesigner.removeEventListener(S,this._settingChanged,this),this._htmlElement&&(this._htmlElement[0].removeEventListener("focusin",this._handleFocusInEvent),this._htmlElement[0].removeEventListener("focusout",this._handleFocusOutEvent)),this._listenersAdded=!1},N.prototype._stateChangedEvent=async function(e){this._updateToolbar()},N.prototype._updateToolbar=async function(){const e=gDesigner.getApplicationManager(),t=e.isCommentingEditingEnabled(),n=await e.hasAccess(P.RESOLVE_ALL_COMMENT_ANNOTATION),o=this._optionsToolbar.find(".resolve-all-row");t&&n?o.parent().show():o.parent().hide()},N.prototype._windowEvent=function(e){e.type===_.WindowEvent.Type.Activated&&this._active&&this._activateAnnotations()},N.prototype._documentEvent=function(e){if(!e.document.isLockedByVersionHistory())if(e.type===g.Type.Activated){this._document=e.document,this._storageItem=this._document.getStorageItem();var t=this._document&&this._document.getScene();this._localAnnotations=t&&t.getAnnotations(),this._document.isLocked()||this._updateFromToolOrSelection(!0),this._active&&!this._listenersAdded&&this._addListeners(),this._active&&this._document.getActiveWindow()&&this._activateAnnotations(),this.trigger(h.UPDATE_EVENT),this._document.addEventListener(k,this._documentStatusEvent,this),this._document.addEventListener(T,this._collaborationEvent,this),gDesigner.addEventListener(G.FileStatusUpdate,this._storageItemFileStatusEvent,this),this._updateNotificationMenu()}else e.type===g.Type.Deactivated?(this._listenersAdded&&this._removeListeners(),this._document.getActiveWindow()&&this._deactivateAnnotations(),this._document.removeEventListener(k,this._documentStatusEvent,this),this._document.removeEventListener(T,this._collaborationEvent,this),gDesigner.removeEventListener(G.FileStatusUpdate,this._storageItemFileStatusEvent,this),this._document=null,this._storageItem=null,this._elements=null,this._currentAnnotations=null,this._localAnnotations=null,this._page=null,this._updatePropertyPanels(!0),this.trigger(h.UPDATE_EVENT)):e.type===g.Type.StorageItemUpdated&&this._updatePropertyPanels(!0)},N.prototype._settingChanged=function(e){"touch"===e.key&&this._updateToolbarButtons()},N.prototype._handleFocusInEvent=function(e){$(e.target).is("textarea")&&this._htmlElement.addClass("g-annotation-comment-focus")},N.prototype._handleFocusOutEvent=function(e){$(e.target).is("textarea")&&this._htmlElement.removeClass("g-annotation-comment-focus")},N.prototype._updateNotificationMenu=function(){this._notificationMenu.clearItems(),this._notificationMenu.setTooltipType(c.TOOLTIP_AREA.SIDEBAR),this._document.getId()&&gApi.updateFileData(this._document.getId()).then(e=>{const t=[{caption:a.GLocale.get(new a.GLocaleKey("GAnnotationsSidebar","text.notification-all-annotation")),checked:!1,statType:"All"},{caption:a.GLocale.get(new a.GLocaleKey("GAnnotationsSidebar","text.notification-assign-to-me")),checked:!1,statType:"Assigned"},{caption:a.GLocale.get(new a.GLocaleKey("GAnnotationsSidebar","text.notification-none")),checked:!1,statType:"None"}];t[e.data.notifications_disabled||0].checked=!0,0===this._notificationMenu.getItemCount()&&t.forEach(e=>{this._notificationMenu.addItem(this._createMenuItem(e))})})},N.prototype._createMenuItem=function(e){var t=new l.default(l.default.Type.Item);return t.setChecked(e.checked),t.setCaption(e.caption),t.addEventListener(l.default.ActivateEvent,t=>{const{sender:n}=t;this._notificationMenu._items.forEach(e=>{e.setChecked(!1)}),n.setChecked(!0),gDesigner.stats("annotations_settings_notifications",e.statType),gApi.updateFileData(this._document.getId(),{notifications_disabled:this._notificationMenu.indexOf(n)})}),t},N.prototype._documentStatusEvent=function(e){e.status===I.Unlocked&&this._updateFromToolOrSelection(!0)},N.prototype._collaborationEvent=function(e){if(e.type===T.Type.AnnotationsUpdate){const{data:{lastUpdateTime:t}={}}=e;if(t&&this._document){const e=this._document.getScene();!e||e.getLastTimeAnnotationsFromCloudModified()&&!F.lt(e.getLastTimeAnnotationsFromCloudModified(),t,!1)||this.syncAnnotations()}}else e.type===T.Type.ReviewStatusChanged&&this._updateToolbar()},N.prototype.isToolAllowed=function(e){return!(![i.GHandTool,i.GPointerTool,i.GZoomTool].some(t=>e instanceof t)&&!e.hasMixin(i.GAnnotationTool))},N.prototype._toolChangedEvent=function(e){e.previousTool;var t=e.newTool;if(e.newTool.hasMixin(i.GAnnotationTool)){var n=gDesigner.getActiveDocument();n&&n.getEditor()&&n.getEditor().clearSelection()}this._activeTool(t)},N.prototype._networkAvailabilityChangedEvent=function(e){this._htmlElement.toggleClass("offline",!e.connected),e.connected&&this.syncAnnotations()},N.prototype._activeTool=function(e){this._annotationToolbar.find(".toolbar-button").each((t,n)=>{var o=$(n).data("toolClass");e instanceof o?$(n).addClass("g-active"):$(n).removeClass("g-active")})},N.prototype._afterFlagChangeEvent=function(e){e.node instanceof a.GPage&&e.flag===a.GNode.Flag.Active&&!this._document.getEditor().hasSelection()&&this._updateFromToolOrSelection()},N.prototype._afterInsertEvent=function(e){(e.node instanceof a.GPage||e.node instanceof a.GAnnotationsList)&&this._updatePropertyPanels(!0)},N.prototype._afterRemoveEvent=function(e){(e.node instanceof a.GPage||e.node instanceof a.GAnnotationsList)&&this._updatePropertyPanels(!0)},N.prototype.relayout=function(e){this._annotationPanels.forEach(t=>t.properties instanceof v&&t.properties.relayout(e))},N.prototype._updateSelection=function(){const e=this._document&&this._document.getEditor();if(e){var t=this._document.getScene().getActivePage();if(this._page=t,this._elements=e.getSelection(),this._elements&&this._elements.length){if(this._elements.find(e=>!(e.hasMixin(a.GAnnotation)||e instanceof a.GPage)))return this._elements=[],console.warn("deactivating annotations"),void gDesigner.getRightSidebars().setActiveSidebar(m.ID);this._elements=this._elements.filter(e=>e.hasMixin(a.GAnnotation))}if(!this._elements||0===this._elements.length){var n=gDesigner.getToolManager().getActiveTool();if(n instanceof i.GItemTool){var o=n.getDefaultStyle();o&&(this._elements=[o])}}this._elements||(this._elements=[])}},N.prototype._selectionChangedEvent=function(e){this._updateSelection(),this._updatePropertyPanels(!1,!1,!1)},N.prototype._updateFromToolOrSelection=function(e){this._updateSelection(),this._updatePropertyPanels(!0===e,e instanceof i.GToolManager.ToolChangedEvent&&!(e.newTool instanceof i.GPointerTool))},N.prototype._updateAnnotationArray=function(){var e,t=!1,n=!1;if(this._panelsContainer?n=!0:(this._panelsContainer=$("<div></div>").addClass("panels").appendTo(this._htmlElement),$("<div></div>").addClass("fixed-panels").appendTo(this._panelsContainer),$("<div></div>").addClass("scrolling-panels").appendTo(this._panelsContainer)),e=this._panelsContainer.find(".fixed-panels"),!n){this._sidebarTitle.appendTo(e),this._annotationToolbar.appendTo(e),this._annotationsToolbarPanel.appendTo(e);for(var o=0;o<this.getAnnotationsProperties().length;o++)t=this._addPropertiesPanel(this.getAnnotationsProperties()[o],o)||t}if(this._document){for(o=this._annotationPanels.length-1;o>=0;o--){var i=this._annotationPanels[o];i.properties.setPage(null),i.panel&&i.panel.remove(),i.toolbar&&i.toolbar.remove(),i.divider&&i.divider.remove()}this._annotationPanels=[],this._document.getScene().iteratePages(e=>{t=this._addPropertiesPanel(e)||t},!0)}return t},N.prototype._addPropertiesPanel=function(e,t){let n,o,i=$("<div></div>").css("display","none").addClass("properties-panel"),r=!1;const s=this._panelsContainer.find(".scrolling-panels");if(e instanceof y){n=e;var l=$("<div></div>").addClass("annotations-property-panel");if(n.init(l,this._annotationToolbar),e._availableProperties&&0===e._availableProperties.length)return r;var c=$("<div></div>").css("display","none");e instanceof b&&c.append($("<div></div>").addClass("arrow-top").css("right",(gDesigner.isTouchEnabled()?N.ANNOTATION_PROPERTIES_ARROW_POSITION_TOUCH[t]:N.ANNOTATION_PROPERTIES_ARROW_POSITION[t])+"%")),this._annotationsToolbarPanel.append(c),this._annotationsToolbarPanel.append(l),o=this._annotationToolbar,i=l,this._annotationProperties.push({panel:i,toolbar:o,properties:n,topArrow:c})}else{if(o=$("<div></div>").addClass("annotations-page-toolbar toolbar"),n=new v,i.appendTo(s),n.init(i,o,this._active,this._showResolved,this._updatePropertyPanels.bind(this),function(e){this._currentAnnotations=e}.bind(this)),""!==o.html()?o.insertBefore(i):o=null,this._currentAnnotations){let t,n,o=e.getAnnotations();t=a.GNode.store(o);let i=!1;if(o.restored?n=w.findAnnotationsListForPage(e,this._currentAnnotations):(n=this._currentAnnotations.find(e=>e["@id"]===t["@id"]),i=!0),n&&!a.GUtil.equals(t,n,!0)){let t=a.GNode.restore(n);if(t){let n=e.getAnnotations(),o=t.getChildren()||[];if(t.clearChildren(),i&&n.getProperty("aid")!==t.getProperty("aid")){n.setProperty("aid",t.getProperty("aid")),n.clearChildren();for(let e=0;e<o.length;e++)n.appendChild(o[e]);r=!0}else{let e=w.mergeAnnotations(n,n.getChildren(),t,o);r=r||e}}}}n.setPage(e),this._annotationPanels.push({panel:i,toolbar:o,properties:n})}return r},N.prototype._updateToolbarButtons=function(){this._annotationProperties.forEach((e,t)=>{const{topArrow:n,properties:o}=e;if(o instanceof b){const e=gDesigner.isTouchEnabled()?N.ANNOTATION_PROPERTIES_ARROW_POSITION_TOUCH:N.ANNOTATION_PROPERTIES_ARROW_POSITION;n.find(".arrow-top").css("right",e[t]+"%")}})},N.prototype._updatePropertyPanels=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this._updatingPropertyPanels)return;this.updateNotificationOption(),this._updatingPropertyPanels=!0;const o=()=>{let o=!1;try{e&&(o=this._updateAnnotationArray());var i=this._annotationProperties.concat(this._annotationPanels),r=this._annotationToolbar.find(".indicator");r.css("visibility","hidden");for(var s=0;s<i.length;++s){var l=i[s],c=l.properties,d=c.isAvailable(this._transformMode);if(d)if(c instanceof b||c instanceof E)l.panel.show(),(d=l.properties.update(this._document,this._elements,gDesigner.getToolManager().getActiveTool()))||l.panel.hide();else{var u=c.getPage().getAnnotations().getChildren();d=l.properties.update(this._document,u,t),n&&l.properties.relayout()}if(l.toolbar&&l.toolbar!==this._annotationToolbar)l.toolbar.css("display",d?"":"none"),c instanceof E||(d?(l.toolbar.gAccordion("toggleOpen",c.getPage().hasFlag(a.GNode.Flag.Active)),l.toolbar.gAccordion("init",l.panel,"label",null,"annotations"),c.getPage().hasFlag(a.GNode.Flag.Active)?l.panel.addClass("g-active"):l.panel.removeClass("g-active")):l.panel.css("display","none"));else if(l.panel.css("display",d?"":"none"),l.topArrow.css("display",d?"":"none"),d&&!(c instanceof E)){let e=this._annotationToolbar.find("."+c._toolbarIcon);r.css("left",e.position().left+e.width()/2-6),r.css("visibility","visible")}d&&this._annotationsToolbarPanel.css("display","")}this._document||(this._annotationPanels=[])}finally{this._updatingPropertyPanels=!1}return o};!this._currentAnnotations&&this._document&&this._document.getAnnotationsId()?w.getCloudAnnotationsForDocument(this._document).then(e=>{let t=!1;if(this._document&&this._document.getAnnotationsId()!==e.cid)return this._updatingPropertyPanels=!1,t;if(this._currentAnnotations=e.annotationsCollection,t=o(),t){let t=this._document.getScene();t&&t.setLastTimeAnnotationsFromCloudModified(e.lastUpdateTime),gDesigner.notifyDocumentModified(this._document),this._active?this._activateAnnotations():this.trigger(h.UPDATE_EVENT)}}).catch(e=>{!this._active||e instanceof C&&e.cid&&this._document&&this._document.getAnnotationsId()!==e.cid?this._updatingPropertyPanels=!1:(this._currentAnnotations=[],o())}):o()},N.prototype.updateBadge=function(e){var t={unread:0,total:0},n=this._annotationPanels.map(e=>e.properties.getPage()),o=this._document&&(this._document.isCloudFile()||this._document.isExternalFile());if(D&&!this._active){var i=gDesigner.getSyncUser();if(o){if(this._currentAnnotations){n.map(e=>w.findAnnotationsListForPage(e,this._currentAnnotations)).filter(e=>!!e).forEach((function(e){e.$&&e.$.forEach((function(e){var n=w.isOwner(i,e);e.rsv||(e.$&&0!=e.$.length?(e.$.forEach((function(e){"cmt"==e["@"]&&(i&&i.getUID()!==e.uid&&e.type!==a.GComment.Type.Close&&!(e.read||[]).includes(i.getUID())&&t.unread++,t.total++)})),n||(e.read||[]).includes(i.getUID())||t.unread++,t.total++):(n||(e.read||[]).includes(i.getUID())||t.unread++,t.total++))}))}))}}else if(this._localAnnotations){n.map(e=>w.findAnnotationsListForPage(e,this._localAnnotations)).filter(e=>!!e).forEach((function(e){for(var n=e.getFirstChild();null!==n&&n.hasMixin(a.GAnnotation);n=n.getNext()){var o=w.isOwner(i,n);if(!n.getProperty("rsv"))if(n.getChildren().length>0){for(var r=n.getFirstChild();null!==r&&r instanceof a.GComment;r=r.getNext())i&&i.getUID()!==r.getProperty("uid")&&r.getProperty("type")!==a.GComment.Type.Close&&!(r.getProperty("read")||[]).includes(i.getUID())&&t.unread++,t.total++;o||(n.getProperty("read")||[]).includes(i.getUID())||t.unread++,t.total++}else o||(n.getProperty("read")||[]).includes(i.getUID())||t.unread++,t.total++}}))}}return t.total>0&&(e.text(t.total),t.unread>0?e.addClass("new"):e.removeClass("new")),!!t.total},N.prototype.isAnnotationPropertiesEditing=function(){return this._annotationProperties.some(e=>{let{properties:t}=e;return t.isEditing&&t.isEditing()||!1})},N.prototype.updateNotificationOption=function(){const e=this._optionsToolbar.find(".notification-label").closest(".columns");this._document&&this._document.isCloudFile()?(e.removeAttr("data-title"),e.toggleClass("g-disabled",!1)):(e.attr("data-title",a.GLocale.get(new a.GLocaleKey("GAnnotationsSidebar","text.save-file-tip"))),e.toggleClass("g-disabled",!0))},N.prototype.toString=function(){return"[Object GAnnotationsSidebar]"},N.prototype._createHoverNotificationFrag=function(){let e=$("<div>").addClass("g-menu hover-notification-container").html(a.GLocale.get(new a.GLocaleKey("GAnnotationsSidebar","text.hover-notification")));return e.find("span").addClass("highlight").click(()=>{(new u).then(e=>e.open())}),e},N.prototype._openHoverNotification=function(e){let t=this._createHoverNotificationFrag(),n=$("body").find(".g-annotation-sidebar-notification-menu")[0];if(t.appendTo($("body")),document.addEventListener("click",this._removeHoverNotificationFrag),n&&(n.addEventListener("mouseenter",(function(){let e=$("body").find(".hover-notification-container");e.length&&$(e[0]).css("display","block")})),n.addEventListener("mouseleave",(function(){let e=$("body").find(".hover-notification-container");e.length&&setTimeout((function(){$(e[0]).css("display","none")}),250)})),$(n).find("li").map((e,t)=>{t.addEventListener("mousedown",(function(){let e=$("body").find(".hover-notification-container");e.length&&$(e[0]).css("display","none")}))})),t.parent().is("body")){var o=t.outerWidth(),i=t.outerHeight(),a=$(window).width(),r=$(window).height(),s={x:0,y:0,width:0,height:0},l=$(e),c=l.offset();s.x=c.left,s.y=c.top,s.width=l.outerWidth(),s.height=l.outerHeight();var d=0;(d=s.x+s.width)+o>a&&(d=s.x-o);var u=0;(u=s.y+s.height)+i>r&&(u=s.y-i);const n=this._rangeLeftX?this._rangeLeftX:0;d<n&&(d=n);const p=this._rangeRightX?this._rangeRightX:a;d+o>=p&&(d=p-o);const g=this._rangeLeftY?this._rangeLeftY:0;u<g&&(u=g);const h=this._rangeRightY?this._rangeRightY:r;u+i>=h&&(u=h-i);const f=u-i-10;t.css("left",d),t.css("top",f),t.addClass("g-menu-right g-menu-bottom")}},N.prototype._removeHoverNotificationFrag=function(){let e=$("body").find(".hover-notification-container");e.length&&(e.remove(),document.removeEventListener("click",this._removeHoverNotificationFrag))},e.exports=N},,,function(e,t){e.exports=require("url")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("https")},function(e,t,n){"use strict";var o=n(653);e.exports=function(e,t){return new(o(e))(0===t?0:t)}},,,,,,,,,,,,,,,function(e,t,n){"use strict";function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this,e)}n(26),o.prototype.getUID=function(){},e.exports=o},function(e,t,n){"use strict";n(18),n(29),n(124),n(28);var o=n(1),i=n(1052),a=n(365);function r(e){a.call(this,e)}o.GObject.inherit(r,a);var s=o.GUtil.uuid(),l={},c=null,d=[{family:"Open Sans",fonts:[{weight:o.GFont.Weight.Light,style:o.GFont.Style.Normal,url:"assets/font/OpenSans-Light.ttf"},{weight:o.GFont.Weight.Light,style:o.GFont.Style.Italic,url:"assets/font/OpenSans-LightItalic.ttf"},{weight:o.GFont.Weight.Regular,style:o.GFont.Style.Normal,url:"assets/font/OpenSans-Regular.ttf"},{weight:o.GFont.Weight.Regular,style:o.GFont.Style.Italic,url:"assets/font/OpenSans-Italic.ttf"},{weight:o.GFont.Weight.SemiBold,style:o.GFont.Style.Normal,url:"assets/font/OpenSans-SemiBold.ttf"},{weight:o.GFont.Weight.SemiBold,style:o.GFont.Style.Italic,url:"assets/font/OpenSans-SemiBoldItalic.ttf"},{weight:o.GFont.Weight.Bold,style:o.GFont.Style.Normal,url:"assets/font/OpenSans-Bold.ttf"},{weight:o.GFont.Weight.Bold,style:o.GFont.Style.Italic,url:"assets/font/OpenSans-BoldItalic.ttf"},{weight:o.GFont.Weight.ExtraBold,style:o.GFont.Style.Normal,url:"assets/font/OpenSans-ExtraBold.ttf"},{weight:o.GFont.Weight.ExtraBold,style:o.GFont.Style.Italic,url:"assets/font/OpenSans-ExtraBoldItalic.ttf"}],preview:"assets/font/OpenSans.svg",scripts:["LATIN"]}];d.push({family:"Noto Sans CJK SC",fonts:[{weight:o.GFont.Weight.Regular,style:o.GFont.Style.Normal,url:"assets/font/chinese-simplified/NotoSansCJKsc-Regular.otf"},{weight:o.GFont.Weight.Bold,style:o.GFont.Style.Normal,url:"assets/font/chinese-simplified/NotoSansCJKsc-Bold.otf"}],preview:"assets/font/chinese-simplified/NotoSans.svg",scripts:["HAN"]}),d.push({family:"Noto Sans CJK TC",fonts:[{weight:o.GFont.Weight.Regular,style:o.GFont.Style.Normal,url:"assets/font/chinese-traditional/NotoSansCJKtc-Regular.otf"},{weight:o.GFont.Weight.Bold,style:o.GFont.Style.Normal,url:"assets/font/chinese-traditional/NotoSansCJKtc-Bold.otf"}],preview:"assets/font/chinese-traditional/NotoSans.svg",scripts:["HAN"]}),d=d.concat(i),o.GObject.inherit(r,a),r.prototype.getDefaultFamilyForString=function(e){var t=o.GOpenTypeFont.getScriptForString(e);if("CYRILLIC"===t||"GREEK"===t)return"Noto Sans";var n=d.find(e=>e.scripts&&e.scripts.indexOf(t)>=0);return n&&n.family||null},r.prototype.addPreviews=function(e){for(var t=new DOMParser,n=0;n<e.length;n++)e[n].cachedPreview||(e[n].addPreviewCallback=function(e){var n=new XMLHttpRequest;n.open("GET",this.preview),n.onload=function(){var n;if(this.status>=200&&this.status<300)try{(n=t.parseFromString(this.response,"image/svg+xml").firstChild)&&n.getAttribute("xmlns")&&(n.setAttribute("height","20px"),e(n))}catch(e){"undefined"!=typeof gdb_loaddesign&&console.warn("Couldn't parse default preview")}},n.send()})},r.prototype.init=function(){c||(c=d)},r.prototype.load=function(e,t,n,o){this.init(),o.done(c.filter((function(t){return e.indexOf("%")>=0?t.family.toLowerCase().startsWith(e.replace(/%/g,"")):t.family.toLowerCase()==e.toLowerCase()})).slice(t,t+n),!0,null)},r.prototype.getTotalFonts=function(e){return this.init(),e?c.filter(this._searchFilter(e)).length:c.length},r.prototype.hasFont=function(e){var t=!1;if(d)for(var n=0;n<d.length;++n)if(d[n].family===e){t=!0;break}return t},r.prototype.resolveFont=function(e,t,n,i){this.init();for(var r=0;r<c.length;r++){var s=c[r];if(s.family===e)for(var d=s.fonts,u=0;u<d.length;u++){var p=d[u];if(p.weight===(n||400)&&p.style===(t||o.GFont.Style.Normal)){if(l[p.url])l[p.url].push(i);else{var g=new XMLHttpRequest;g.responseType="arraybuffer",g.open("GET",p.url),l[p.url]=[],l[p.url].push(i),g.onload=function(){if(this.status>=200&&this.status<300){var e=l[p.url];delete l[p.url],e.forEach(e=>{e.done(this.response)})}},g.onerror=()=>{delete l[p.url],i.fail(a.Errors.ConnectionError)},g.send()}return}}}i.fail()},r.prototype.getProviderId=function(){return s},e.exports=r},function(e,t,n){"use strict";function o(){}n(26),Object.assign(o,{SETUP:{ENDPOINT:"SETUP_URL_ENDPOINT"},COMMAND_SAVE:{REQUEST:"SAVE_REQUEST",SUCCESS:"SAVE_SUCCESS",FAILED:"SAVE_FAILED"},COMMAND_SYNC_IMAGES:{REQUEST:"sync-images",SUCCESS:"dictionary-updated"},CODES:{AUTOSAVE_CLOUD_SYNCHRONIZM_NOT_AVAILABLE:"AUTOSAVE_CLOUD_SYNCHRONIZM_NOT_AVAILABLE",AUTOSAVE_LOCAL_FILES_WITHOUT_CID_NOT_AVAILABLE:"AUTOSAVE_LOCAL_FILES_WITHOUT_CID_NOT_AVAILABLE",AUTOSAVE_OFFLINE_NOT_AVAILABLE:"AUTOSAVE_OFFLINE_NOT_AVAILABLE",AUTOSAVE_ALREADY_SAVING:"AUTOSAVE_ALREADY_SAVING",AUTOSAVE_NOT_MODIFIED:"AUTOSAVE_NOT_MODIFIED",AUTOSAVE_FILE_CONFLICT:"AUTOSAVE_FILE_CONFLICT"}}),e.exports=o},function(e,t,n){"use strict";function o(e,t){this.description=e,this.cid=t}n(276),o.description=null,o.cid=null,e.exports=o},function(e,t,n){"use strict";function o(e){return pako.gzip(e,{level:9}).buffer}Object.defineProperty(t,"__esModule",{value:!0}),t.gzip=o,t.hasRootFolderInSelections=function(e,t){if(!e||!(t||[]).length)return!1;t instanceof Array||(t=[t]);return t.some(t=>e.isRootFolder(t))},t.readResponseWithProgress=async function(e,t,n){const i=e.body.getReader(),a=parseInt(e.headers.get("Content-Length"))||0;let r=0;return new Promise(e=>{const s=new ReadableStream({start:l=>function c(){return i.read().then(d=>{let{done:u,value:p}=d;if(u)return l.close(),i.releaseLock(),void e(s);if("function"==typeof t){r+=function(e){if(n)return new Uint8Array(o(e)).length;return e.length}(p);const e=Math.floor(r/a*100);t(e)}return l.enqueue(p),c()})}()})}).then(e=>new Response(e))},n(17),n(169),n(51),n(7),n(204),n(177),n(178),n(179),n(180)},function(e,t,n){"use strict";n.r(t);class o extends Error{constructor(...e){super(...e),this.constructor=o,this.__proto__=o.prototype,this.name="GError"}toString(){return"[Object GError]"}}t.default=o},function(e,t,n){"use strict";n(26),n(7);var o=n(9);function i(e){const{accessToken:t,expires:n,corporate:o,accountId:a}=new i.Settings(e);this.accessToken=t,this.expires=n,this.corporate=o,this.accountId=a}i.Settings=function(e){e||(e={});const{accessToken:t,expires:n,corporate:o=!0,accountId:i}=e;return Object.assign(this,{accessToken:t,expires:n,corporate:o,accountId:i})},i.prototype.isExpired=function(){return!this.expires||(new Date).getTime()>this.expires},i.prototype.getSettings=function(){return{accessToken:this.accessToken,expires:this.expires,corporate:this.corporate,accountId:this.accountId}},i.prototype.get=async function(){return this.isExpired()?this.corporate?o.gApi.cloudServices.googleDrive.getAccessToken().then(e=>{let{accessToken:t,expires:n}=e;return this.expires=n,this.accessToken=t,this.accessToken}):gContainer.getGoogleAPI().getAccessToken().then(e=>{let{accessToken:t,expires:n}=e;return this.expires=n,this.accessToken=t,this.accessToken}):this.accessToken},e.exports=i},function(e,t,n){"use strict";var o=n(30),i=n(25),a=n(333),r=i([].reverse),s=[1,2];o({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return a(this)&&(this.length=this.length),r(this)}})},,,,,,,function(e,t,n){"use strict";n(3);var o=n(1),i=n(1478),a=n(37),r=n(432),s=n(78);function l(e){this._htmlElement=e,this._windows=[]}o.GObject.inherit(l,o.GEventTarget),l.WindowEvent=function(e,t,n){this.type=e,this.window=t,this.index=n},o.GObject.inherit(l.WindowEvent,o.GEvent),l.WindowEvent.Type={Added:0,Removed:1,Deactivated:10,Activated:11},l.WindowEvent.prototype.type=null,l.WindowEvent.prototype.window=null,l.WindowEvent.prototype.index=null,l.WindowEvent.prototype.toString=function(){return"[Object GWindows.WindowEvent]"},l.prototype._htmlElement=null,l.prototype._windows=null,l.prototype._activeWindow=null,l.prototype._viewOffset=null,l.prototype.getWindows=function(){return this._windows},l.prototype.getActiveWindow=function(){return this._activeWindow},l.prototype.activateWindow=function(e,t){if(e!==this._activeWindow){this._activeWindow&&(this._activeWindow.deactivate(),this._activeWindow._container.detach()),null===e?gDesigner.activateDocument(null,!0):(e&&this._activeWindow&&e.getDocument()!==this._activeWindow.getDocument()||!this._activeWindow)&&gDesigner.activateDocument(e.getDocument(),!0);var n=this._activeWindow;this._activeWindow=e,n&&this.hasEventListeners(l.WindowEvent)&&this.trigger(new l.WindowEvent(l.WindowEvent.Type.Deactivated,n)),e&&(e.getDocument()._activeWindow=e,this._htmlElement.append(e._container),this._relayoutWindow(e,t),this._activeWindow.activate(t),this.hasEventListeners(l.WindowEvent)&&this.trigger(new l.WindowEvent(l.WindowEvent.Type.Activated,e)))}},l.prototype.addWindow=function(e,t,n){var o=e instanceof i?e.getDocument():e,a=this._addWindow(o,t,n);if(e instanceof i){var r=e.getView();a.getView()&&a.getView().transform(r.getScrollX(),r.getScrollY(),r.getZoom())}return a},l.prototype.removeWindow=function(e,t,n,i){var c=e.getDocument(),d=function(n){if(!n||n.documentStatus!==s.SaveCancelled){if(e===this._activeWindow){var o=this._windows.indexOf(e);o>0?this.activateWindow(this._windows[o-1],i):o+1<this._windows.length?this.activateWindow(this._windows[o+1],i):this.activateWindow(null)}c._activeWindow===e&&(c._activeWindow=null),c._windows.splice(c._windows.indexOf(e),1),this._windows.splice(this._windows.indexOf(e),1),e._container.remove(),this.hasEventListeners(l.WindowEvent)&&this.trigger(new l.WindowEvent(l.WindowEvent.Type.Removed,e)),e.release(),t&&t(),0===c._windows.length&&gDesigner.removeDocument(c)}}.bind(this);n?d():c.isSynchronizing()?a.alert(o.GLocale.get(new o.GLocaleKey("GCommonNames","text.please-wait-avoid-losing-progress"))):1===c._windows.length&&c.isModified()?gDesigner.canUnloadDocument(c).then(e=>{e?d():(gDesigner.stats("action_execute_windowalert",r.ID),gDesigner.executeAction(r.ID,[c,d],void 0,!0))}).catch(e=>{e&&!e.documentStatus&&console.log(e)}):d()},l.prototype.init=function(){},l.prototype.relayout=function(e){this._viewOffset=e||this._viewOffset,this._activeWindow&&this._relayoutWindow(this._activeWindow)},l.prototype._relayoutWindow=function(e,t){e.relayout(this._htmlElement.width(),this._htmlElement.height(),this._viewOffset,t)},l.prototype._addWindow=function(e,t,n){var o=new i(e,t);return e._windows.push(o),"number"==typeof n?this._windows.splice(n,0,o):this._windows.push(o),this.hasEventListeners(l.WindowEvent)&&this.trigger(new l.WindowEvent(l.WindowEvent.Type.Added,o,n)),this.activateWindow(o),o},l.prototype.getHtmlElement=function(){return this._htmlElement},l.prototype.getWindow=function(e){for(var t=null,n=0;n<this._windows.length;++n)if(this._windows[n].getDocument()===e){t=this._windows[n];break}return t},e.exports=l},function(e,t,n){"use strict";n(52),n(7),n(62);var o=n(1);const i=n(1482),a=n(1483),r=n(1484),s=n(1135),l=n(784),{gApi:c}=(n(166),n(9));function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._user=e,this._options=n,this._init(t,n)}o.GObject.inherit(d,o.GObject),d.prototype._options=null,d.prototype._avatar=null,d.Tabs={Account:"account",Purchase:"purchase",ChangePassword:"change-password"},d.prototype._init=async function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{closeable:l=!0,tabs:u}=n,p=gDesigner.getLicense();this._dialog=$("<div></div>").gDialog({closeCallback:()=>this._close(),releaseOnClose:!0,className:"g-profile-dialog"}),l&&$("<div></div>").addClass("g-btn-close").append($("<span></span>").addClass("gravit-icon-close")).on("click",this.close.bind(this)).appendTo(this._dialog);let g=$("<div></div>").addClass("left-sidebar").appendTo(this._dialog),h=$("<div></div>").addClass("right-sidebar").appendTo(this._dialog);this._avatar=$("<div></div>").addClass("avatar").append($("<span></span>").addClass("btn gravit-icon-avatar").attr("data-title",o.GLocale.get(new o.GLocaleKey("GProfileDialog","text.avatar-tooltip"))).on("click",this._updateAvatar.bind(this))),$("<div></div>").addClass("picture").append(this._avatar).appendTo(g);let f=$("<div></div>").addClass("header").append($("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GProfileDialog","text.details")))).appendTo(h);this._messageHandler=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";t._dialog.find(".message").remove(),e&&$("<div></div>").addClass("message "+n).append($("<span></span>").html(e)).on("click",e=>$(e.target).closest(".message").remove()).insertAfter(f)},this._tabs=$("<ul></ul>").addClass("tabs").appendTo(g),this._panels=$("<div></div>").addClass("tab-panels").appendTo(h);const m=(e,n,o,i)=>{let a=$("<div></div>").addClass("tab-panel").append(o).appendTo(this._panels);$("<li></li>").attr("id",i).addClass("tab").append($("<span></span>").addClass(n)).append($("<span></span>").text(e)).on("click",(function(n){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=$(n.target).closest(".tab");o||t._messageHandler(void 0),t._tabs.find(".tab.g-selected").removeClass("g-selected"),t._panels.find(".tab-panel.g-selected").removeClass("g-selected"),a.addClass("g-selected"),i.addClass("g-selected"),f.find("span").text(e),gDesigner.stats("profile-dialog_tab_".concat(i.attr("id")))})).appendTo(this._tabs)},y=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return u&&u.length?u.includes(e):t};if(y(d.Tabs.Account)&&m(o.GLocale.get(new o.GLocaleKey("GProfileDialog","text.details")),"gravit-icon-account",new a(this._user,this._messageHandler.bind(this),this,n).getHTMLElement(),d.Tabs.Account),y(d.Tabs.ChangePassword,!1)&&m(o.GLocale.get(new o.GLocaleKey("GProfileDialog","text.change-password")),"gravit-icon-change-password",new r(this._user,this._messageHandler.bind(this),this,n).getHTMLElement(),d.Tabs.ChangePassword),y(d.Tabs.Purchase)){await c.hasPurchases({issued:"true"}).catch(()=>!1)&&m(o.GLocale.get(new o.GLocaleKey("GProfileDialog","text.purchases")),"gravit-icon-purchase",new i(this._user,this._messageHandler.bind(this),n).getHTMLElement(),d.Tabs.Purchase)}if(this._tabs.find(".tab:first-child").trigger("click",[!0]),e&&(gDesigner.stats("profile-dialog_tab_".concat(e)),this._tabs.find("#".concat(e)).trigger("click",[!0])),!gDesigner.isAnonymous()&&(!p.isPro()||p.isExpired())){const e=gDesigner.getAction(s.ID);e&&e.isVisible()&&e.isAvailable()&&this._tabs.append($("<button/>").addClass("purchase-pro-btn").html(o.GLocale.get(new o.GLocaleKey("GPurchaseProAction","title"))).on("click",(function(){gDesigner.stats("profile-dialog_click_purchase-pro"),gDesigner.executeAction(s.ID,null,null,!0)})))}this._updateUI(this._user)},d.prototype._updateAvatar=function(){gDesigner.stats("profile-dialog_click_update-avatar");let e=this._dialog.find(".avatar");function t(t){e.removeClass("g-loading");let n=o.GLocale.get(new o.GLocaleKey("GAccountPanel","text.error"));t&&t.message?n=t.message:t&&t.errors&&(n=t.errors.map(e=>e[1]).join("<br>")),this._messageHandler(n)}gDesigner.getDefaultStorage().openPrompt([{ext:"png",mime:"image/png"},{ext:"jpg",mime:"image/jpeg"},{ext:"jpeg",mime:"image/jpeg"}],n=>{e.addClass("g-loading"),n.read(i=>{if(i.byteLength>102400)return void t.call(this,{message:o.GLocale.get(new o.GLocaleKey("GProfileDialog","text.avatar-size-too-big"))});let a=n.getExtension().toLowerCase();"jpg"===a&&(a="jpeg");let r=new File([new Blob([i],{type:"image/"+a})],n.getFullName());this._messageHandler(void 0),gDesigner.getCloudCommunicationManager().updateAvatar(r).then(t=>{e.removeClass("g-loading"),e.find(".picture").css("background-image","url(".concat(t.avatar,")")),e.find(".picture").removeClass("g-profile-top-avatar"),e.find(".picture").css({"background-color":"transparent"}),e.find(".picture").text(""),gDesigner.getUser()}).catch(t)})},!1)},d.prototype._userPropertiesChangedEvent=function(e){this._updateUI(e.user)},d.prototype._updateUI=function(e){this._avatar&&(this._avatar.find(".picture").remove(),e.hasOwnPictureAvatar()?this._avatar.append($("<div/>").addClass("picture").css("background-image","url(".concat(e.avatar,")"))):this._avatar.append($("<div/>").addClass("picture").addClass("g-profile-top-avatar").css({"background-color":e.getUserColor()}).text(e.getUserNameInitials())))},d.prototype.open=function(){gDesigner.addEventListener(l,this._userPropertiesChangedEvent,this),this._dialog.gDialog("open",this._options.closeable)},d.prototype.close=function(){this._dialog.gDialog("close")},d.prototype._close=function(){gDesigner.removeEventListener(l,this._userPropertiesChangedEvent,this)},e.exports=d},function(e,t,n){var o,i,a;i=[n(160)],void 0===(a="function"==typeof(o=function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"})?o.apply(t,i):o)||(e.exports=a)},function(e,t,n){"use strict";n(3);var o=n(1),i=n(378);function a(){i.call(this)}o.GObject.inherit(a,i),a.prototype.init=function(e){},a.prototype.activate=function(){},a.prototype.deactivate=function(){},a.prototype.isEnabled=function(){return!0},a.prototype.toString=function(){return"[Object GPanel]"},e.exports=a},function(e,t,n){"use strict";e.exports={FillPropertiesPanel:"fill-properties-panel",BorderPropertiesPanel:"border-properties-panel",EffectPropertiesPanel:"effect-properties-panel"}},function(e,t,n){"use strict";n(3),n(28);var o=n(1),i=n(13),a=n(61),r=n(16),s=n(97),l=n(37);function c(){c.TOOLTIP_CONFIG={[a.TOOLTIP_AREA.TOOLBAR]:a.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GCreateSymbolAction","tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GCreateSymbolAction","tooltip-description")),learnMore:"https://documentation.corelvector.com/organizing-your-designs/symbols/"})}}o.GObject.inherit(c,s),c.ID="modify.createsymbol",c.TITLE=new o.GLocaleKey("GCreateSymbolAction","title"),c.SHORTCUT=[i.GKey.Constant.F8],c.TOOLTIP_CONFIG=null,c.prototype.getId=function(){return c.ID},c.prototype.getTitle=function(){return c.TITLE},c.prototype.getCategory=function(){return r.CATEGORY_MODIFY_SYMBOL},c.prototype.getGroup=function(){return"structure/modify"},c.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-create-symbol":"gravit-icon-symbolmaster"},c.prototype.getShortcut=function(){return c.SHORTCUT},c.prototype.isPro=function(){if(!gDesigner.isEnabledProFeatures()){const e=gDesigner.getActiveDocument();if(e){const t=e.getEditor().getIndividualSelection();if(t&&t.length)return t.filter(e=>e instanceof o.GSymbol).length>1}}return!1},c.prototype.isEnabled=function(){if(!s.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument();if(e){var t=e.getEditor().getIndividualSelection();if(t&&t.length)for(var n=0,i=new o.GSymbol,a=t.length-1;a>=0;--a){var r=t[a];if(r instanceof o.GSymbol&&!r.getMasterSymbol()||r.validateInsertion(i)&&!r.getParent().isLocked()&&i.validateInsertion(r.getParent())&&!o.GSymbol.containsUnsupportedNodes(r)){if(!(r instanceof o.GSymbol&&r.isMaster()))return!0;if(++n>1)return!0}}}return!1},c.prototype.execute=function(){if(!this.isPro()||gDesigner.isEnabledProFeatures()){var e=1,t=o.GLocale.get(new o.GLocaleKey("GCreateSymbolAction","createsymbol.defaultname")),n=t+" "+e,i=gDesigner.getActiveDocument();if(i){var a=i.getScene();if(a)(a.getSymbols()||[]).forEach((function(i){i instanceof o.GSymbol&&i.isMaster()&&i.getProperty("name")===n&&(e++,n=t+" "+e)})),l.prompt(o.GLocale.get(new o.GLocaleKey("GCreateSymbolAction","createsymbol.enternewname")),e=>{if(gDesigner.getActiveDocument()&&e){var t=gDesigner.getActiveDocument().getEditor(),n=o.GNode.order(t.getIndividualSelection().slice());t.beginTransaction();try{for(var i=new o.GSymbol,a=null,r=n.length-1;r>=0;--r){var s=n[r];if(s instanceof o.GSymbol&&s.convertToMaster(e))n.splice(r,1);else if(s.validateInsertion(i)&&!o.GSymbol.containsUnsupportedNodes(s)){if(!(a=s.getParent()).isLocked()&&i.validateInsertion(a))break;a=null}}a&&t.updateSelection(!1,[o.GSymbol.create(n,a,e)])}finally{t.commitTransaction(o.GLocale.get(new o.GLocaleKey("GCreateSymbolAction","title")))}}},n)}}else gDesigner.handlePROFeatureInterruption()},c.prototype.getTooltipConfig=function(e){return e&&c.TOOLTIP_CONFIG[e]||null},c.prototype.toString=function(){return"[Object GCreateSymbolAction]"},e.exports=c},function(e,t,n){"use strict";n(3);var o=n(1),i=n(45);const a=n(16),r=n(97);function s(e,t){r.call(this),this._id=e,this._title=t}o.GObject.inherit(s,r),s.EmptyValue={},s.EmptyPattern={},s.prototype._id=null,s.prototype._title=null,s.prototype.getId=function(){return this._id},s.prototype.getTitle=function(){return this._title},s.prototype.getCategory=function(){return a.CATEGORY_EDIT_SELECT_SAME},s.prototype.isEnabled=function(){if(!r.prototype.isEnabled.call(this))return!1;const e=gDesigner.getActiveDocument(),t=e&&e.getEditor(),n=t&&t.getSelection();if(!n||!n.length)return!1;return this._createPattern(n)!==s.EmptyPattern},s.prototype._createPattern=function(e){const t=e&&e.length;if(!t)return s.EmptyPattern;const n=this._getValue(e[0]);if(n===s.EmptyValue)return s.EmptyPattern;for(let o=1;o<t;o++){const t=e[o],i=this._getValue(t);if(i===s.EmptyValue)return s.EmptyPattern;if(!this._matches(n,i))return s.EmptyPattern}return n},s.prototype._matches=function(e,t){return e!==s.EmptyPattern&&(t!==s.EmptyPattern&&o.GUtil.equals(e,t,!0))},s.prototype._getValue=function(e){throw"Not implemented"},s.prototype.execute=function(){const e=gDesigner.getActiveDocument(),t=e&&e.getScene(),n=e&&e.getEditor(),a=n&&n.getSelection();if(!t||!a||!a.length)return;const r=this._createPattern(a);if(r===s.EmptyPattern)return;const l=[];t.accept(e=>{if(e instanceof o.GElement&&!e.hasMixin(o.GAnnotation)){const t=this._createPattern([e]);this._matches(r,t)&&l.push(e)}}),l.length>0&&i.GEditor.tryRunTransaction(t,()=>{n.updateSelection(!1,l)},o.GLocale.get(this.getTitle()))},s.prototype.toString=function(){return"[Object GSelectByAction]"},e.exports=s},function(e,t,n){var o;!function(i,a){"use strict";var r="model",s="name",l="type",c="vendor",d="version",u="mobile",p="tablet",g="smarttv",h=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},f=function(e,t){return"string"==typeof e&&-1!==m(t).indexOf(m(e))},m=function(e){return e.toLowerCase()},y=function(e,t){if("string"==typeof e)return e=e.replace(/^\s\s*/,""),void 0===t?e:e.substring(0,350)},v=function(e,t){for(var n,o,i,a,r,s,l=0;l<t.length&&!r;){var c=t[l],d=t[l+1];for(n=o=0;n<c.length&&!r;)if(r=c[n++].exec(e))for(i=0;i<d.length;i++)s=r[++o],"object"==typeof(a=d[i])&&a.length>0?2===a.length?"function"==typeof a[1]?this[a[0]]=a[1].call(this,s):this[a[0]]=a[1]:3===a.length?"function"!=typeof a[1]||a[1].exec&&a[1].test?this[a[0]]=s?s.replace(a[1],a[2]):void 0:this[a[0]]=s?a[1].call(this,s,a[2]):void 0:4===a.length&&(this[a[0]]=s?a[3].call(this,s.replace(a[1],a[2])):void 0):this[a]=s||void 0;l+=2}},_=function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var o=0;o<t[n].length;o++)if(f(t[n][o],e))return"?"===n?void 0:n}else if(f(t[n],e))return"?"===n?void 0:n;return e},b={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},w={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[d,[s,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[d,[s,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[s,d],[/opios[\/ ]+([\w\.]+)/i],[d,[s,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[d,[s,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[s,d],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[d,[s,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[d,[s,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[d,[s,"WeChat"]],[/konqueror\/([\w\.]+)/i],[d,[s,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[d,[s,"IE"]],[/yabrowser\/([\w\.]+)/i],[d,[s,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[s,/(.+)/,"$1 Secure Browser"],d],[/\bfocus\/([\w\.]+)/i],[d,[s,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[d,[s,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[d,[s,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[d,[s,"Dolphin"]],[/coast\/([\w\.]+)/i],[d,[s,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[d,[s,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[d,[s,"Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[[s,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[s,/(.+)/,"$1 Browser"],d],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],d],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[s,d],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[s],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[s,"Facebook"],d],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[s,d],[/\bgsa\/([\w\.]+) .*safari\//i],[d,[s,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[d,[s,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[s,"Chrome WebView"],d],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[d,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[s,d],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[d,[s,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[d,s],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[s,[d,_,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[s,d],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[s,"Netscape"],d],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[d,[s,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[s,d],[/(cobalt)\/([\w\.]+)/i],[s,[d,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",m]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[["architecture","arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[["architecture","armhf"]],[/windows (ce|mobile); ppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[["architecture",/ower/,"",m]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[["architecture",m]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[r,[c,"Samsung"],[l,p]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[r,[c,"Samsung"],[l,u]],[/((ipod|iphone)\d+,\d+)/i],[r,[c,"Apple"],[l,u]],[/(ipad\d+,\d+)/i],[r,[c,"Apple"],[l,p]],[/\((ip(?:hone|od)[\w ]*);/i],[r,[c,"Apple"],[l,u]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[r,[c,"Apple"],[l,p]],[/(macintosh);/i],[r,[c,"Apple"]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[r,[c,"Huawei"],[l,p]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[r,[c,"Huawei"],[l,u]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[r,/_/g," "],[c,"Xiaomi"],[l,u]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[r,/_/g," "],[c,"Xiaomi"],[l,p]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[r,[c,"OPPO"],[l,u]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[r,[c,"Vivo"],[l,u]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[r,[c,"Realme"],[l,u]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[r,[c,"Motorola"],[l,u]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[r,[c,"Motorola"],[l,p]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[r,[c,"LG"],[l,p]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[r,[c,"LG"],[l,u]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[r,[c,"Lenovo"],[l,p]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[r,/_/g," "],[c,"Nokia"],[l,u]],[/(pixel c)\b/i],[r,[c,"Google"],[l,p]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[r,[c,"Google"],[l,u]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[r,[c,"Sony"],[l,u]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[r,"Xperia Tablet"],[c,"Sony"],[l,p]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[r,[c,"OnePlus"],[l,u]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[r,[c,"Amazon"],[l,p]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[r,/(.+)/g,"Fire Phone $1"],[c,"Amazon"],[l,u]],[/(playbook);[-\w\),; ]+(rim)/i],[r,c,[l,p]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[r,[c,"BlackBerry"],[l,u]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[r,[c,"ASUS"],[l,p]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[r,[c,"ASUS"],[l,u]],[/(nexus 9)/i],[r,[c,"HTC"],[l,p]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[c,[r,/_/g," "],[l,u]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[r,[c,"Acer"],[l,p]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[r,[c,"Meizu"],[l,u]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[r,[c,"Sharp"],[l,u]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[c,r,[l,u]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[c,r,[l,p]],[/(surface duo)/i],[r,[c,"Microsoft"],[l,p]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[r,[c,"Fairphone"],[l,u]],[/(u304aa)/i],[r,[c,"AT&T"],[l,u]],[/\bsie-(\w*)/i],[r,[c,"Siemens"],[l,u]],[/\b(rct\w+) b/i],[r,[c,"RCA"],[l,p]],[/\b(venue[\d ]{2,7}) b/i],[r,[c,"Dell"],[l,p]],[/\b(q(?:mv|ta)\w+) b/i],[r,[c,"Verizon"],[l,p]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[r,[c,"Barnes & Noble"],[l,p]],[/\b(tm\d{3}\w+) b/i],[r,[c,"NuVision"],[l,p]],[/\b(k88) b/i],[r,[c,"ZTE"],[l,p]],[/\b(nx\d{3}j) b/i],[r,[c,"ZTE"],[l,u]],[/\b(gen\d{3}) b.+49h/i],[r,[c,"Swiss"],[l,u]],[/\b(zur\d{3}) b/i],[r,[c,"Swiss"],[l,p]],[/\b((zeki)?tb.*\b) b/i],[r,[c,"Zeki"],[l,p]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[c,"Dragon Touch"],r,[l,p]],[/\b(ns-?\w{0,9}) b/i],[r,[c,"Insignia"],[l,p]],[/\b((nxa|next)-?\w{0,9}) b/i],[r,[c,"NextBook"],[l,p]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[c,"Voice"],r,[l,u]],[/\b(lvtel\-)?(v1[12]) b/i],[[c,"LvTel"],r,[l,u]],[/\b(ph-1) /i],[r,[c,"Essential"],[l,u]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[r,[c,"Envizen"],[l,p]],[/\b(trio[-\w\. ]+) b/i],[r,[c,"MachSpeed"],[l,p]],[/\btu_(1491) b/i],[r,[c,"Rotor"],[l,p]],[/(shield[\w ]+) b/i],[r,[c,"Nvidia"],[l,p]],[/(sprint) (\w+)/i],[c,r,[l,u]],[/(kin\.[onetw]{3})/i],[[r,/\./g," "],[c,"Microsoft"],[l,u]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[r,[c,"Zebra"],[l,p]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[r,[c,"Zebra"],[l,u]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[c,r,[l,"console"]],[/droid.+; (shield) bui/i],[r,[c,"Nvidia"],[l,"console"]],[/(playstation [345portablevi]+)/i],[r,[c,"Sony"],[l,"console"]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[r,[c,"Microsoft"],[l,"console"]],[/smart-tv.+(samsung)/i],[c,[l,g]],[/hbbtv.+maple;(\d+)/i],[[r,/^/,"SmartTV"],[c,"Samsung"],[l,g]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[c,"LG"],[l,g]],[/(apple) ?tv/i],[c,[r,"Apple TV"],[l,g]],[/crkey/i],[[r,"Chromecast"],[c,"Google"],[l,g]],[/droid.+aft(\w)( bui|\))/i],[r,[c,"Amazon"],[l,g]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[r,[c,"Sharp"],[l,g]],[/(bravia[\w ]+)( bui|\))/i],[r,[c,"Sony"],[l,g]],[/(mitv-\w{5}) bui/i],[r,[c,"Xiaomi"],[l,g]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[c,y],[r,y],[l,g]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,g]],[/((pebble))app/i],[c,r,[l,"wearable"]],[/droid.+; (glass) \d/i],[r,[c,"Google"],[l,"wearable"]],[/droid.+; (wt63?0{2,3})\)/i],[r,[c,"Zebra"],[l,"wearable"]],[/(quest( 2)?)/i],[r,[c,"Facebook"],[l,"wearable"]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[c,[l,"embedded"]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[r,[l,u]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[r,[l,p]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,p]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,u]],[/(android[-\w\. ]{0,9});.+buil/i],[r,[c,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[d,[s,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[d,[s,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[s,d],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[d,s]],os:[[/microsoft (windows) (vista|xp)/i],[s,d],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[s,[d,_,b]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[s,"Windows"],[d,_,b]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[d,/_/g,"."],[s,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[s,"Mac OS"],[d,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[d,s],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[s,d],[/\(bb(10);/i],[d,[s,"BlackBerry"]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[d,[s,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[d,[s,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[d,[s,"webOS"]],[/crkey\/([\d\.]+)/i],[d,[s,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[s,"Chromium OS"],d],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[s,d],[/(sunos) ?([\w\.\d]*)/i],[[s,"Solaris"],d],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[s,d]]},C=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof C))return new C(e,t).getResult();var n=e||(void 0!==i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),o=t?function(e,t){var n={};for(var o in e)t[o]&&t[o].length%2==0?n[o]=t[o].concat(e[o]):n[o]=e[o];return n}(w,t):w;return this.getBrowser=function(){var e,t={};return t[s]=void 0,t[d]=void 0,v.call(t,n,o.browser),t.major="string"==typeof(e=t.version)?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0,t},this.getCPU=function(){var e={architecture:void 0};return v.call(e,n,o.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return v.call(e,n,o.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return v.call(e,n,o.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return v.call(e,n,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n="string"==typeof e&&e.length>350?y(e,350):e,this},this.setUA(n),this};C.VERSION="0.7.33",C.BROWSER=h([s,d,"major"]),C.CPU=h(["architecture"]),C.DEVICE=h([r,c,l,"console",u,g,p,"wearable","embedded"]),C.ENGINE=C.OS=h([s,d]),void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=C),t.UAParser=C):n(399)?void 0===(o=function(){return C}.call(t,n,t,e))||(e.exports=o):void 0!==i&&(i.UAParser=C);var x=void 0!==i&&(i.jQuery||i.Zepto);if(x&&!x.ua){var S=new C;x.ua=S.getResult(),x.ua.get=function(){return S.getUA()},x.ua.set=function(e){S.setUA(e);var t=S.getResult();for(var n in t)x.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var o=function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==e?e:void 0}}).call(this,n(101))},,,function(e,t,n){"use strict";var o=n(35),i=n(31),a=n(55),r=TypeError;e.exports=function(e,t){var n,s;if("string"===t&&i(n=e.toString)&&!a(s=o(n,e)))return s;if(i(n=e.valueOf)&&!a(s=o(n,e)))return s;if("string"!==t&&i(n=e.toString)&&!a(s=o(n,e)))return s;throw new r("Can't convert object to primitive value")}},function(e,t,n){"use strict";var o=n(113),i=n(25),a=n(228),r=n(388),s=n(49),l=i([].concat);e.exports=o("Reflect","ownKeys")||function(e){var t=a.f(s(e)),n=r.f;return n?l(t,n(e)):t}},function(e,t,n){"use strict";var o=Math.ceil,i=Math.floor;e.exports=Math.trunc||function(e){var t=+e;return(t>0?i:o)(t)}},function(e,t,n){"use strict";var o=n(48),i=n(384),a=n(81),r=n(49),s=n(172),l=n(389);t.f=o&&!i?Object.defineProperties:function(e,t){r(e);for(var n,o=s(t),i=l(t),c=i.length,d=0;c>d;)a.f(e,n=i[d++],o[n]);return e}},function(e,t,n){"use strict";var o,i,a,r=n(30),s=n(85),l=n(187),c=n(23),d=n(35),u=n(72),p=n(164),g=n(126),h=n(243),f=n(92),m=n(31),y=n(55),v=n(153),_=n(244),b=n(392).set,w=n(605),C=n(608),x=n(291),S=n(395),E=n(79),A=n(174),T=n(188),G=n(189),P=T.CONSTRUCTOR,D=T.REJECTION_EVENT,L=T.SUBCLASSING,I=E.getterFor("Promise"),k=E.set,O=A&&A.prototype,F=A,R=O,M=c.TypeError,N=c.document,B=c.process,U=G.f,$=U,j=!!(N&&N.createEvent&&c.dispatchEvent),K=function(e){var t;return!(!y(e)||!m(t=e.then))&&t},V=function(e,t){var n,o,i,a=t.value,r=1===t.state,s=r?e.ok:e.fail,l=e.resolve,c=e.reject,u=e.domain;try{s?(r||(2===t.rejection&&Y(t),t.rejection=1),!0===s?n=a:(u&&u.enter(),n=s(a),u&&(u.exit(),i=!0)),n===e.promise?c(new M("Promise-chain cycle")):(o=K(n))?d(o,n,l,c):l(n)):c(a)}catch(e){u&&!i&&u.exit(),c(e)}},H=function(e,t){e.notified||(e.notified=!0,w((function(){for(var n,o=e.reactions;n=o.get();)V(n,e);e.notified=!1,t&&!e.rejection&&z(e)})))},W=function(e,t,n){var o,i;j?((o=N.createEvent("Event")).promise=t,o.reason=n,o.initEvent(e,!1,!0),c.dispatchEvent(o)):o={promise:t,reason:n},!D&&(i=c["on"+e])?i(o):"unhandledrejection"===e&&C("Unhandled promise rejection",n)},z=function(e){d(b,c,(function(){var t,n=e.facade,o=e.value;if(q(e)&&(t=x((function(){l?B.emit("unhandledRejection",o,n):W("unhandledrejection",n,o)})),e.rejection=l||q(e)?2:1,t.error))throw t.value}))},q=function(e){return 1!==e.rejection&&!e.parent},Y=function(e){d(b,c,(function(){var t=e.facade;l?B.emit("rejectionHandled",t):W("rejectionhandled",t,e.value)}))},X=function(e,t,n){return function(o){e(t,o,n)}},Q=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,H(e,!0))},J=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw new M("Promise can't be resolved itself");var o=K(t);o?w((function(){var n={done:!1};try{d(o,t,X(J,n,e),X(Q,n,e))}catch(t){Q(n,t,e)}})):(e.value=t,e.state=1,H(e,!1))}catch(t){Q({done:!1},t,e)}}};if(P&&(R=(F=function(e){v(this,R),f(e),d(o,this);var t=I(this);try{e(X(J,t),X(Q,t))}catch(e){Q(t,e)}}).prototype,(o=function(e){k(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new S,rejection:!1,state:0,value:void 0})}).prototype=u(R,"then",(function(e,t){var n=I(this),o=U(_(this,F));return n.parent=!0,o.ok=!m(e)||e,o.fail=m(t)&&t,o.domain=l?B.domain:void 0,0===n.state?n.reactions.add(o):w((function(){V(o,n)})),o.promise})),i=function(){var e=new o,t=I(e);this.promise=e,this.resolve=X(J,t),this.reject=X(Q,t)},G.f=U=function(e){return e===F||void 0===e?new i(e):$(e)},!s&&m(A)&&O!==Object.prototype)){a=O.then,L||u(O,"then",(function(e,t){var n=this;return new F((function(e,t){d(a,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete O.constructor}catch(e){}p&&p(O,R)}r({global:!0,constructor:!0,wrap:!0,forced:P},{Promise:F}),g(F,"Promise",!1,!0),h("Promise")},function(e,t,n){"use strict";var o=n(25),i=n(92);e.exports=function(e,t,n){try{return o(i(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}}},function(e,t,n){"use strict";var o=n(603),i=String,a=TypeError;e.exports=function(e){if(o(e))return e;throw new a("Can't set "+i(e)+" as a prototype")}},function(e,t,n){"use strict";var o=n(55);e.exports=function(e){return o(e)||null===e}},function(e,t,n){"use strict";var o={};o[n(41)("toStringTag")]="z",e.exports="[object z]"===String(o)},function(e,t,n){"use strict";var o,i,a,r,s,l=n(23),c=n(394),d=n(116),u=n(392).set,p=n(395),g=n(393),h=n(606),f=n(607),m=n(187),y=l.MutationObserver||l.WebKitMutationObserver,v=l.document,_=l.process,b=l.Promise,w=c("queueMicrotask");if(!w){var C=new p,x=function(){var e,t;for(m&&(e=_.domain)&&e.exit();t=C.get();)try{t()}catch(e){throw C.head&&o(),e}e&&e.enter()};g||m||f||!y||!v?!h&&b&&b.resolve?((r=b.resolve(void 0)).constructor=b,s=d(r.then,r),o=function(){s(x)}):m?o=function(){_.nextTick(x)}:(u=d(u,l),o=function(){u(x)}):(i=!0,a=v.createTextNode(""),new y(x).observe(a,{characterData:!0}),o=function(){a.data=i=!i}),w=function(e){C.head||o(),C.add(e)}}e.exports=w},function(e,t,n){"use strict";var o=n(136);e.exports=/ipad|iphone|ipod/i.test(o)&&"undefined"!=typeof Pebble},function(e,t,n){"use strict";var o=n(136);e.exports=/web0s(?!.*chrome)/i.test(o)},function(e,t,n){"use strict";e.exports=function(e,t){try{1===arguments.length?console.error(e):console.error(e,t)}catch(e){}}},function(e,t,n){"use strict";var o=n(396),i=n(187);e.exports=!o&&!i&&"object"==typeof window&&"object"==typeof document},function(e,t,n){"use strict";var o=n(30),i=n(35),a=n(92),r=n(189),s=n(291),l=n(262);o({target:"Promise",stat:!0,forced:n(398)},{all:function(e){var t=this,n=r.f(t),o=n.resolve,c=n.reject,d=s((function(){var n=a(t.resolve),r=[],s=0,d=1;l(e,(function(e){var a=s++,l=!1;d++,i(n,t,e).then((function(e){l||(l=!0,r[a]=e,--d||o(r))}),c)})),--d||o(r)}));return d.error&&c(d.value),n.promise}})},function(e,t,n){"use strict";var o=n(30),i=n(85),a=n(188).CONSTRUCTOR,r=n(174),s=n(113),l=n(31),c=n(72),d=r&&r.prototype;if(o({target:"Promise",proto:!0,forced:a,real:!0},{catch:function(e){return this.then(void 0,e)}}),!i&&l(r)){var u=s("Promise").prototype.catch;d.catch!==u&&c(d,"catch",u,{unsafe:!0})}},function(e,t,n){"use strict";var o=n(30),i=n(35),a=n(92),r=n(189),s=n(291),l=n(262);o({target:"Promise",stat:!0,forced:n(398)},{race:function(e){var t=this,n=r.f(t),o=n.reject,c=s((function(){var r=a(t.resolve);l(e,(function(e){i(r,t,e).then(n.resolve,o)}))}));return c.error&&o(c.value),n.promise}})},function(e,t,n){"use strict";var o=n(30),i=n(189);o({target:"Promise",stat:!0,forced:n(188).CONSTRUCTOR},{reject:function(e){var t=i.f(this);return(0,t.reject)(e),t.promise}})},function(e,t,n){"use strict";var o=n(30),i=n(113),a=n(85),r=n(174),s=n(188).CONSTRUCTOR,l=n(438),c=i("Promise"),d=a&&!s;o({target:"Promise",stat:!0,forced:a||s},{resolve:function(e){return l(d&&this===c?r:this,e)}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=require("child_process")},,,,,function(e,t,n){"use strict";var o=n(20);e.exports=!o((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){"use strict";var o=n(25),i=n(333),a=n(31),r=n(108),s=n(56),l=o([].push);e.exports=function(e){if(a(e))return e;if(i(e)){for(var t=e.length,n=[],o=0;o<t;o++){var c=e[o];"string"==typeof c?l(n,c):"number"!=typeof c&&"Number"!==r(c)&&"String"!==r(c)||l(n,s(c))}var d=n.length,u=!0;return function(e,t){if(u)return u=!1,t;if(i(this))return t;for(var o=0;o<d;o++)if(n[o]===e)return t}}}},function(e,t,n){"use strict";var o=n(25),i=n(86),a=Math.floor,r=o("".charAt),s=o("".replace),l=o("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,o,u,p){var g=n+e.length,h=o.length,f=d;return void 0!==u&&(u=i(u),f=c),s(p,f,(function(i,s){var c;switch(r(s,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,n);case"'":return l(t,g);case"<":c=u[l(s,1,-1)];break;default:var d=+s;if(0===d)return i;if(d>h){var p=a(d/10);return 0===p?i:p<=h?void 0===o[p-1]?r(s,1):o[p-1]+r(s,1):i}c=o[d-1]}return void 0===c?"":c}))}},function(e,t,n){"use strict";var o=n(334).forEach,i=n(335)("forEach");e.exports=i?[].forEach:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,t,n){"use strict";var o=n(333),i=n(289),a=n(55),r=n(41)("species"),s=Array;e.exports=function(e){var t;return o(e)&&(t=e.constructor,(i(t)&&(t===s||o(t.prototype))||a(t)&&null===(t=t[r]))&&(t=void 0)),void 0===t?s:t}},function(e,t,n){"use strict";n(655);var o,i=n(30),a=n(48),r=n(408),s=n(23),l=n(116),c=n(25),d=n(72),u=n(127),p=n(153),g=n(58),h=n(400),f=n(656),m=n(145),y=n(296).codeAt,v=n(659),_=n(56),b=n(126),w=n(290),C=n(409),x=n(79),S=x.set,E=x.getterFor("URL"),A=C.URLSearchParams,T=C.getState,G=s.URL,P=s.TypeError,D=s.parseInt,L=Math.floor,I=Math.pow,k=c("".charAt),O=c(/./.exec),F=c([].join),R=c(1..toString),M=c([].pop),N=c([].push),B=c("".replace),U=c([].shift),$=c("".split),j=c("".slice),K=c("".toLowerCase),V=c([].unshift),H=/[a-z]/i,W=/[\d+-.a-z]/i,z=/\d/,q=/^0x/i,Y=/^[0-7]+$/,X=/^\d+$/,Q=/^[\da-f]+$/i,J=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Z=/[\0\t\n\r #/:<>?@[\\\]^|]/,ee=/^[\u0000-\u0020]+/,te=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,ne=/[\t\n\r]/g,oe=function(e){var t,n,o,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)V(t,e%256),e=L(e/256);return F(t,".")}if("object"==typeof e){for(t="",o=function(e){for(var t=null,n=1,o=null,i=0,a=0;a<8;a++)0!==e[a]?(i>n&&(t=o,n=i),o=null,i=0):(null===o&&(o=a),++i);return i>n&&(t=o,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),o===n?(t+=n?":":"::",i=!0):(t+=R(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},ie={},ae=h({},ie,{" ":1,'"':1,"<":1,">":1,"`":1}),re=h({},ae,{"#":1,"?":1,"{":1,"}":1}),se=h({},re,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),le=function(e,t){var n=y(e,0);return n>32&&n<127&&!g(t,e)?e:encodeURIComponent(e)},ce={ftp:21,file:null,http:80,https:443,ws:80,wss:443},de=function(e,t){var n;return 2===e.length&&O(H,k(e,0))&&(":"===(n=k(e,1))||!t&&"|"===n)},ue=function(e){var t;return e.length>1&&de(j(e,0,2))&&(2===e.length||"/"===(t=k(e,2))||"\\"===t||"?"===t||"#"===t)},pe=function(e){return"."===e||"%2e"===K(e)},ge={},he={},fe={},me={},ye={},ve={},_e={},be={},we={},Ce={},xe={},Se={},Ee={},Ae={},Te={},Ge={},Pe={},De={},Le={},Ie={},ke={},Oe=function(e,t,n){var o,i,a,r=_(e);if(t){if(i=this.parse(r))throw new P(i);this.searchParams=null}else{if(void 0!==n&&(o=new Oe(n,!0)),i=this.parse(r,null,o))throw new P(i);(a=T(new A)).bindURL(this),this.searchParams=a}};Oe.prototype={type:"URL",parse:function(e,t,n){var i,a,r,s,l,c=this,d=t||ge,u=0,p="",h=!1,y=!1,v=!1;for(e=_(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=B(e,ee,""),e=B(e,te,"$1")),e=B(e,ne,""),i=f(e);u<=i.length;){switch(a=i[u],d){case ge:if(!a||!O(H,a)){if(t)return"Invalid scheme";d=fe;continue}p+=K(a),d=he;break;case he:if(a&&(O(W,a)||"+"===a||"-"===a||"."===a))p+=K(a);else{if(":"!==a){if(t)return"Invalid scheme";p="",d=fe,u=0;continue}if(t&&(c.isSpecial()!==g(ce,p)||"file"===p&&(c.includesCredentials()||null!==c.port)||"file"===c.scheme&&!c.host))return;if(c.scheme=p,t)return void(c.isSpecial()&&ce[c.scheme]===c.port&&(c.port=null));p="","file"===c.scheme?d=Ae:c.isSpecial()&&n&&n.scheme===c.scheme?d=me:c.isSpecial()?d=be:"/"===i[u+1]?(d=ye,u++):(c.cannotBeABaseURL=!0,N(c.path,""),d=Le)}break;case fe:if(!n||n.cannotBeABaseURL&&"#"!==a)return"Invalid scheme";if(n.cannotBeABaseURL&&"#"===a){c.scheme=n.scheme,c.path=m(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,d=ke;break}d="file"===n.scheme?Ae:ve;continue;case me:if("/"!==a||"/"!==i[u+1]){d=ve;continue}d=we,u++;break;case ye:if("/"===a){d=Ce;break}d=De;continue;case ve:if(c.scheme=n.scheme,a===o)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=m(n.path),c.query=n.query;else if("/"===a||"\\"===a&&c.isSpecial())d=_e;else if("?"===a)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=m(n.path),c.query="",d=Ie;else{if("#"!==a){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=m(n.path),c.path.length--,d=De;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=m(n.path),c.query=n.query,c.fragment="",d=ke}break;case _e:if(!c.isSpecial()||"/"!==a&&"\\"!==a){if("/"!==a){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,d=De;continue}d=Ce}else d=we;break;case be:if(d=we,"/"!==a||"/"!==k(p,u+1))continue;u++;break;case we:if("/"!==a&&"\\"!==a){d=Ce;continue}break;case Ce:if("@"===a){h&&(p="%40"+p),h=!0,r=f(p);for(var b=0;b<r.length;b++){var w=r[b];if(":"!==w||v){var C=le(w,se);v?c.password+=C:c.username+=C}else v=!0}p=""}else if(a===o||"/"===a||"?"===a||"#"===a||"\\"===a&&c.isSpecial()){if(h&&""===p)return"Invalid authority";u-=f(p).length+1,p="",d=xe}else p+=a;break;case xe:case Se:if(t&&"file"===c.scheme){d=Ge;continue}if(":"!==a||y){if(a===o||"/"===a||"?"===a||"#"===a||"\\"===a&&c.isSpecial()){if(c.isSpecial()&&""===p)return"Invalid host";if(t&&""===p&&(c.includesCredentials()||null!==c.port))return;if(s=c.parseHost(p))return s;if(p="",d=Pe,t)return;continue}"["===a?y=!0:"]"===a&&(y=!1),p+=a}else{if(""===p)return"Invalid host";if(s=c.parseHost(p))return s;if(p="",d=Ee,t===Se)return}break;case Ee:if(!O(z,a)){if(a===o||"/"===a||"?"===a||"#"===a||"\\"===a&&c.isSpecial()||t){if(""!==p){var x=D(p,10);if(x>65535)return"Invalid port";c.port=c.isSpecial()&&x===ce[c.scheme]?null:x,p=""}if(t)return;d=Pe;continue}return"Invalid port"}p+=a;break;case Ae:if(c.scheme="file","/"===a||"\\"===a)d=Te;else{if(!n||"file"!==n.scheme){d=De;continue}switch(a){case o:c.host=n.host,c.path=m(n.path),c.query=n.query;break;case"?":c.host=n.host,c.path=m(n.path),c.query="",d=Ie;break;case"#":c.host=n.host,c.path=m(n.path),c.query=n.query,c.fragment="",d=ke;break;default:ue(F(m(i,u),""))||(c.host=n.host,c.path=m(n.path),c.shortenPath()),d=De;continue}}break;case Te:if("/"===a||"\\"===a){d=Ge;break}n&&"file"===n.scheme&&!ue(F(m(i,u),""))&&(de(n.path[0],!0)?N(c.path,n.path[0]):c.host=n.host),d=De;continue;case Ge:if(a===o||"/"===a||"\\"===a||"?"===a||"#"===a){if(!t&&de(p))d=De;else if(""===p){if(c.host="",t)return;d=Pe}else{if(s=c.parseHost(p))return s;if("localhost"===c.host&&(c.host=""),t)return;p="",d=Pe}continue}p+=a;break;case Pe:if(c.isSpecial()){if(d=De,"/"!==a&&"\\"!==a)continue}else if(t||"?"!==a)if(t||"#"!==a){if(a!==o&&(d=De,"/"!==a))continue}else c.fragment="",d=ke;else c.query="",d=Ie;break;case De:if(a===o||"/"===a||"\\"===a&&c.isSpecial()||!t&&("?"===a||"#"===a)){if(".."===(l=K(l=p))||"%2e."===l||".%2e"===l||"%2e%2e"===l?(c.shortenPath(),"/"===a||"\\"===a&&c.isSpecial()||N(c.path,"")):pe(p)?"/"===a||"\\"===a&&c.isSpecial()||N(c.path,""):("file"===c.scheme&&!c.path.length&&de(p)&&(c.host&&(c.host=""),p=k(p,0)+":"),N(c.path,p)),p="","file"===c.scheme&&(a===o||"?"===a||"#"===a))for(;c.path.length>1&&""===c.path[0];)U(c.path);"?"===a?(c.query="",d=Ie):"#"===a&&(c.fragment="",d=ke)}else p+=le(a,re);break;case Le:"?"===a?(c.query="",d=Ie):"#"===a?(c.fragment="",d=ke):a!==o&&(c.path[0]+=le(a,ie));break;case Ie:t||"#"!==a?a!==o&&("'"===a&&c.isSpecial()?c.query+="%27":c.query+="#"===a?"%23":le(a,ie)):(c.fragment="",d=ke);break;case ke:a!==o&&(c.fragment+=le(a,ae))}u++}},parseHost:function(e){var t,n,o;if("["===k(e,0)){if("]"!==k(e,e.length-1))return"Invalid host";if(!(t=function(e){var t,n,o,i,a,r,s,l=[0,0,0,0,0,0,0,0],c=0,d=null,u=0,p=function(){return k(e,u)};if(":"===p()){if(":"!==k(e,1))return;u+=2,d=++c}for(;p();){if(8===c)return;if(":"!==p()){for(t=n=0;n<4&&O(Q,p());)t=16*t+D(p(),16),u++,n++;if("."===p()){if(0===n)return;if(u-=n,c>6)return;for(o=0;p();){if(i=null,o>0){if(!("."===p()&&o<4))return;u++}if(!O(z,p()))return;for(;O(z,p());){if(a=D(p(),10),null===i)i=a;else{if(0===i)return;i=10*i+a}if(i>255)return;u++}l[c]=256*l[c]+i,2!==++o&&4!==o||c++}if(4!==o)return;break}if(":"===p()){if(u++,!p())return}else if(p())return;l[c++]=t}else{if(null!==d)return;u++,d=++c}}if(null!==d)for(r=c-d,c=7;0!==c&&r>0;)s=l[c],l[c--]=l[d+r-1],l[d+--r]=s;else if(8!==c)return;return l}(j(e,1,-1))))return"Invalid host";this.host=t}else if(this.isSpecial()){if(e=v(e),O(J,e))return"Invalid host";if(null===(t=function(e){var t,n,o,i,a,r,s,l=$(e,".");if(l.length&&""===l[l.length-1]&&l.length--,(t=l.length)>4)return e;for(n=[],o=0;o<t;o++){if(""===(i=l[o]))return e;if(a=10,i.length>1&&"0"===k(i,0)&&(a=O(q,i)?16:8,i=j(i,8===a?1:2)),""===i)r=0;else{if(!O(10===a?X:8===a?Y:Q,i))return e;r=D(i,a)}N(n,r)}for(o=0;o<t;o++)if(r=n[o],o===t-1){if(r>=I(256,5-t))return null}else if(r>255)return null;for(s=M(n),o=0;o<n.length;o++)s+=n[o]*I(256,3-o);return s}(e)))return"Invalid host";this.host=t}else{if(O(Z,e))return"Invalid host";for(t="",n=f(e),o=0;o<n.length;o++)t+=le(n[o],ie);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return g(ce,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"===this.scheme&&1===t&&de(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,o=e.password,i=e.host,a=e.port,r=e.path,s=e.query,l=e.fragment,c=t+":";return null!==i?(c+="//",e.includesCredentials()&&(c+=n+(o?":"+o:"")+"@"),c+=oe(i),null!==a&&(c+=":"+a)):"file"===t&&(c+="//"),c+=e.cannotBeABaseURL?r[0]:r.length?"/"+F(r,"/"):"",null!==s&&(c+="?"+s),null!==l&&(c+="#"+l),c},setHref:function(e){var t=this.parse(e);if(t)throw new P(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"===e)try{return new Fe(e.path[0]).origin}catch(e){return"null"}return"file"!==e&&this.isSpecial()?e+"://"+oe(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(_(e)+":",ge)},getUsername:function(){return this.username},setUsername:function(e){var t=f(_(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=le(t[n],se)}},getPassword:function(){return this.password},setPassword:function(e){var t=f(_(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=le(t[n],se)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?oe(e):oe(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,xe)},getHostname:function(){var e=this.host;return null===e?"":oe(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Se)},getPort:function(){var e=this.port;return null===e?"":_(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""===(e=_(e))?this.port=null:this.parse(e,Ee))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+F(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Pe))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""===(e=_(e))?this.query=null:("?"===k(e,0)&&(e=j(e,1)),this.query="",this.parse(e,Ie)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!==(e=_(e))?("#"===k(e,0)&&(e=j(e,1)),this.fragment="",this.parse(e,ke)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Fe=function(e){var t=p(this,Re),n=w(arguments.length,1)>1?arguments[1]:void 0,o=S(t,new Oe(e,!1,n));a||(t.href=o.serialize(),t.origin=o.getOrigin(),t.protocol=o.getProtocol(),t.username=o.getUsername(),t.password=o.getPassword(),t.host=o.getHost(),t.hostname=o.getHostname(),t.port=o.getPort(),t.pathname=o.getPathname(),t.search=o.getSearch(),t.searchParams=o.getSearchParams(),t.hash=o.getHash())},Re=Fe.prototype,Me=function(e,t){return{get:function(){return E(this)[e]()},set:t&&function(e){return E(this)[t](e)},configurable:!0,enumerable:!0}};if(a&&(u(Re,"href",Me("serialize","setHref")),u(Re,"origin",Me("getOrigin")),u(Re,"protocol",Me("getProtocol","setProtocol")),u(Re,"username",Me("getUsername","setUsername")),u(Re,"password",Me("getPassword","setPassword")),u(Re,"host",Me("getHost","setHost")),u(Re,"hostname",Me("getHostname","setHostname")),u(Re,"port",Me("getPort","setPort")),u(Re,"pathname",Me("getPathname","setPathname")),u(Re,"search",Me("getSearch","setSearch")),u(Re,"searchParams",Me("getSearchParams")),u(Re,"hash",Me("getHash","setHash"))),d(Re,"toJSON",(function(){return E(this).serialize()}),{enumerable:!0}),d(Re,"toString",(function(){return E(this).serialize()}),{enumerable:!0}),G){var Ne=G.createObjectURL,Be=G.revokeObjectURL;Ne&&d(Fe,"createObjectURL",l(Ne,G)),Be&&d(Fe,"revokeObjectURL",l(Be,G))}b(Fe,"URL"),i({global:!0,constructor:!0,forced:!r,sham:!a},{URL:Fe})},function(e,t,n){"use strict";var o=n(296).charAt,i=n(56),a=n(79),r=n(403),s=n(309),l=a.set,c=a.getterFor("String Iterator");r(String,"String",(function(e){l(this,{type:"String Iterator",string:i(e),index:0})}),(function(){var e,t=c(this),n=t.string,i=t.index;return i>=n.length?s(void 0,!0):(e=o(n,i),t.index+=e.length,s(e,!1))}))},function(e,t,n){"use strict";var o=n(116),i=n(35),a=n(86),r=n(657),s=n(292),l=n(289),c=n(93),d=n(658),u=n(230),p=n(191),g=Array;e.exports=function(e){var t=a(e),n=l(this),h=arguments.length,f=h>1?arguments[1]:void 0,m=void 0!==f;m&&(f=o(f,h>2?arguments[2]:void 0));var y,v,_,b,w,C,x=p(t),S=0;if(!x||this===g&&s(x))for(y=c(t),v=n?new this(y):g(y);y>S;S++)C=m?f(t[S],S):t[S],d(v,S,C);else for(w=(b=u(t,x)).next,v=n?new this:[];!(_=i(w,b)).done;S++)C=m?r(b,f,[_.value,S],!0):_.value,d(v,S,C);return v.length=S,v}},function(e,t,n){"use strict";var o=n(49),i=n(397);e.exports=function(e,t,n,a){try{return a?t(o(n)[0],n[1]):t(n)}catch(t){i(e,"throw",t)}}},function(e,t,n){"use strict";var o=n(48),i=n(81),a=n(163);e.exports=function(e,t,n){o?i.f(e,t,a(0,n)):e[t]=n}},function(e,t,n){"use strict";var o=n(25),i=/[^\0-\u007E]/,a=/[.\u3002\uFF0E\uFF61]/g,r="Overflow: input needs wider integers to process",s=RangeError,l=o(a.exec),c=Math.floor,d=String.fromCharCode,u=o("".charCodeAt),p=o([].join),g=o([].push),h=o("".replace),f=o("".split),m=o("".toLowerCase),y=function(e){return e+22+75*(e<26)},v=function(e,t,n){var o=0;for(e=n?c(e/700):e>>1,e+=c(e/t);e>455;)e=c(e/35),o+=36;return c(o+36*e/(e+38))},_=function(e){var t,n,o=[],i=(e=function(e){for(var t=[],n=0,o=e.length;n<o;){var i=u(e,n++);if(i>=55296&&i<=56319&&n<o){var a=u(e,n++);56320==(64512&a)?g(t,((1023&i)<<10)+(1023&a)+65536):(g(t,i),n--)}else g(t,i)}return t}(e)).length,a=128,l=0,h=72;for(t=0;t<e.length;t++)(n=e[t])<128&&g(o,d(n));var f=o.length,m=f;for(f&&g(o,"-");m<i;){var _=2147483647;for(t=0;t<e.length;t++)(n=e[t])>=a&&n<_&&(_=n);var b=m+1;if(_-a>c((2147483647-l)/b))throw new s(r);for(l+=(_-a)*b,a=_,t=0;t<e.length;t++){if((n=e[t])<a&&++l>2147483647)throw new s(r);if(n===a){for(var w=l,C=36;;){var x=C<=h?1:C>=h+26?26:C-h;if(w<x)break;var S=w-x,E=36-x;g(o,d(y(x+S%E))),w=c(S/E),C+=36}g(o,d(y(w))),h=v(l,b,m===f),l=0,m++}}l++,a++}return p(o,"")};e.exports=function(e){var t,n,o=[],r=f(h(m(e),a,"."),".");for(t=0;t<r.length;t++)n=r[t],g(o,l(i,n)?"xn--"+_(n):n);return p(o,".")}},function(e,t,n){"use strict";var o=n(23),i=n(20),a=n(25),r=n(56),s=n(246).trim,l=n(232),c=o.parseInt,d=o.Symbol,u=d&&d.iterator,p=/^[+-]?0x/i,g=a(p.exec),h=8!==c(l+"08")||22!==c(l+"0x16")||u&&!i((function(){c(Object(u))}));e.exports=h?function(e,t){var n=s(r(e));return c(n,t>>>0||(g(p,n)?16:10))}:c},function(e,t,n){"use strict";var o=n(92),i=n(86),a=n(225),r=n(93),s=TypeError,l="Reduce of empty array with no initial value",c=function(e){return function(t,n,c,d){var u=i(t),p=a(u),g=r(u);if(o(n),0===g&&c<2)throw new s(l);var h=e?g-1:0,f=e?-1:1;if(c<2)for(;;){if(h in p){d=p[h],h+=f;break}if(h+=f,e?h<0:g<=h)throw new s(l)}for(;e?h>=0:g>h;h+=f)h in p&&(d=n(d,p[h],h,u));return d}};e.exports={left:c(!1),right:c(!0)}},,,function(e,t,n){"use strict";var o=n(30),i=n(23),a=n(310),r=n(243),s=a.ArrayBuffer;o({global:!0,constructor:!0,forced:i.ArrayBuffer!==s},{ArrayBuffer:s}),r("ArrayBuffer")},function(e,t,n){"use strict";var o=n(666);e.exports=Math.fround||function(e){return o(e,1.1920928955078125e-7,34028234663852886e22,11754943508222875e-54)}},function(e,t,n){"use strict";var o=n(667),i=Math.abs;e.exports=function(e,t,n,a){var r=+e,s=i(r),l=o(r);if(s<a)return l*function(e){return e+4503599627370496-4503599627370496}(s/a/t)*a*t;var c=(1+t/2220446049250313e-31)*s,d=c-(c-s);return d>n||d!=d?l*(1/0):l*d}},function(e,t,n){"use strict";e.exports=Math.sign||function(e){var t=+e;return 0===t||t!=t?t:t<0?-1:1}},function(e,t,n){"use strict";var o=Array,i=Math.abs,a=Math.pow,r=Math.floor,s=Math.log,l=Math.LN2;e.exports={pack:function(e,t,n){var c,d,u,p=o(n),g=8*n-t-1,h=(1<<g)-1,f=h>>1,m=23===t?a(2,-24)-a(2,-77):0,y=e<0||0===e&&1/e<0?1:0,v=0;for((e=i(e))!=e||e===1/0?(d=e!=e?1:0,c=h):(c=r(s(e)/l),e*(u=a(2,-c))<1&&(c--,u*=2),(e+=c+f>=1?m/u:m*a(2,1-f))*u>=2&&(c++,u/=2),c+f>=h?(d=0,c=h):c+f>=1?(d=(e*u-1)*a(2,t),c+=f):(d=e*a(2,f-1)*a(2,t),c=0));t>=8;)p[v++]=255&d,d/=256,t-=8;for(c=c<<t|d,g+=t;g>0;)p[v++]=255&c,c/=256,g-=8;return p[--v]|=128*y,p},unpack:function(e,t){var n,o=e.length,i=8*o-t-1,r=(1<<i)-1,s=r>>1,l=i-7,c=o-1,d=e[c--],u=127&d;for(d>>=7;l>0;)u=256*u+e[c--],l-=8;for(n=u&(1<<-l)-1,u>>=-l,l+=t;l>0;)n=256*n+e[c--],l-=8;if(0===u)u=1-s;else{if(u===r)return n?NaN:d?-1/0:1/0;n+=a(2,t),u-=s}return(d?-1:1)*n*a(2,u-t)}}},function(e,t,n){"use strict";n(338)("Uint32",(function(e){return function(t,n,o){return e(this,t,n,o)}}))},function(e,t,n){"use strict";var o=n(23),i=n(20),a=n(328),r=n(139).NATIVE_ARRAY_BUFFER_VIEWS,s=o.ArrayBuffer,l=o.Int8Array;e.exports=!r||!i((function(){l(1)}))||!i((function(){new l(-1)}))||!a((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||i((function(){return 1!==new l(new s(2),1,void 0).length}))},function(e,t,n){"use strict";var o=n(55),i=Math.floor;e.exports=Number.isInteger||function(e){return!o(e)&&isFinite(e)&&i(e)===e}},function(e,t,n){"use strict";var o=n(120),i=RangeError;e.exports=function(e){var t=o(e);if(t<0)throw new i("The argument can't be less than 0");return t}},function(e,t,n){"use strict";var o=Math.round;e.exports=function(e){var t=o(e);return t<0?0:t>255?255:255&t}},function(e,t,n){"use strict";var o=n(116),i=n(35),a=n(391),r=n(86),s=n(93),l=n(230),c=n(191),d=n(292),u=n(675),p=n(139).aTypedArrayConstructor,g=n(414);e.exports=function(e){var t,n,h,f,m,y,v,_,b=a(this),w=r(e),C=arguments.length,x=C>1?arguments[1]:void 0,S=void 0!==x,E=c(w);if(E&&!d(E))for(_=(v=l(w,E)).next,w=[];!(y=i(_,v)).done;)w.push(y.value);for(S&&C>2&&(x=o(x,arguments[2])),n=s(w),h=new(p(b))(n),f=u(h),t=0;n>t;t++)m=S?x(w[t],t):w[t],h[t]=f?g(m):+m;return h}},function(e,t,n){"use strict";var o=n(121);e.exports=function(e){var t=o(e);return"BigInt64Array"===t||"BigUint64Array"===t}},function(e,t,n){"use strict";var o=n(93);e.exports=function(e,t,n){for(var i=0,a=arguments.length>2?n:o(t),r=new e(a);a>i;)r[i]=t[i++];return r}},,,,,function(e,t,n){"use strict";var o=n(23),i=n(20),a=n(25),r=n(56),s=n(246).trim,l=n(232),c=a("".charAt),d=o.parseFloat,u=o.Symbol,p=u&&u.iterator,g=1/d(l+"-0")!=-1/0||p&&!i((function(){d(Object(p))}));e.exports=g?function(e){var t=s(r(e)),n=d(t);return 0===n&&"-"===c(t,0)?-0:n}:d},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";const{GObject:o,GEventTarget:i,GEvent:a}=n(1);function r(){}o.inheritAndMix(r,o,[i]),r.prototype._role=null,r.prototype.setRole=function(e){this._role=e,this.hasEventListeners(r.RoleChangedEvent)&&this.trigger(new r.RoleChangedEvent(e,this))},r.prototype.getRole=function(){return this._role},r.RoleChangedEvent=function(e,t){this.role=e,this.target=t},o.inherit(r.RoleChangedEvent,a),e.exports=r},function(e,t,n){"use strict";n.r(t);n(340);class o extends Error{constructor(...e){super(...e),this.constructor=o,this.__proto__=o.prototype,this.name="ExternalFileSettingsError"}toString(){return this.message}}t.default=o},function(e,t,n){"use strict";var o=n(246).start,i=n(445);e.exports=i("trimStart")?function(){return o(this)}:"".trimStart},function(e,t,n){var o;e.exports=(o=n(47),function(e){var t=o,n=t.lib,i=n.WordArray,a=n.Hasher,r=t.algo,s=[],l=[];!function(){function t(t){for(var n=e.sqrt(t),o=2;o<=n;o++)if(!(t%o))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var o=2,i=0;i<64;)t(o)&&(i<8&&(s[i]=n(e.pow(o,.5))),l[i]=n(e.pow(o,1/3)),i++),o++}();var c=[],d=r.SHA256=a.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],i=n[1],a=n[2],r=n[3],s=n[4],d=n[5],u=n[6],p=n[7],g=0;g<64;g++){if(g<16)c[g]=0|e[t+g];else{var h=c[g-15],f=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,m=c[g-2],y=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;c[g]=f+c[g-7]+y+c[g-16]}var v=o&i^o&a^i&a,_=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),b=p+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&d^~s&u)+l[g]+c[g];p=u,u=d,d=s,s=r+b|0,r=a,a=i,i=o,o=b+(_+v)|0}n[0]=n[0]+o|0,n[1]=n[1]+i|0,n[2]=n[2]+a|0,n[3]=n[3]+r|0,n[4]=n[4]+s|0,n[5]=n[5]+d|0,n[6]=n[6]+u|0,n[7]=n[7]+p|0},_doFinalize:function(){var t=this._data,n=t.words,o=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(o/4294967296),n[15+(i+64>>>9<<4)]=o,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=a._createHelper(d),t.HmacSHA256=a._createHmacHelper(d)}(Math),o.SHA256)},function(e,t,n){var o;e.exports=(o=n(47),n(366),function(){var e=o,t=e.lib.Hasher,n=e.x64,i=n.Word,a=n.WordArray,r=e.algo;function s(){return i.create.apply(i,arguments)}var l=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],c=[];!function(){for(var e=0;e<80;e++)c[e]=s()}();var d=r.SHA512=t.extend({_doReset:function(){this._hash=new a.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],i=n[1],a=n[2],r=n[3],s=n[4],d=n[5],u=n[6],p=n[7],g=o.high,h=o.low,f=i.high,m=i.low,y=a.high,v=a.low,_=r.high,b=r.low,w=s.high,C=s.low,x=d.high,S=d.low,E=u.high,A=u.low,T=p.high,G=p.low,P=g,D=h,L=f,I=m,k=y,O=v,F=_,R=b,M=w,N=C,B=x,U=S,$=E,j=A,K=T,V=G,H=0;H<80;H++){var W=c[H];if(H<16)var z=W.high=0|e[t+2*H],q=W.low=0|e[t+2*H+1];else{var Y=c[H-15],X=Y.high,Q=Y.low,J=(X>>>1|Q<<31)^(X>>>8|Q<<24)^X>>>7,Z=(Q>>>1|X<<31)^(Q>>>8|X<<24)^(Q>>>7|X<<25),ee=c[H-2],te=ee.high,ne=ee.low,oe=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,ie=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),ae=c[H-7],re=ae.high,se=ae.low,le=c[H-16],ce=le.high,de=le.low;z=(z=(z=J+re+((q=Z+se)>>>0<Z>>>0?1:0))+oe+((q+=ie)>>>0<ie>>>0?1:0))+ce+((q+=de)>>>0<de>>>0?1:0),W.high=z,W.low=q}var ue,pe=M&B^~M&$,ge=N&U^~N&j,he=P&L^P&k^L&k,fe=D&I^D&O^I&O,me=(P>>>28|D<<4)^(P<<30|D>>>2)^(P<<25|D>>>7),ye=(D>>>28|P<<4)^(D<<30|P>>>2)^(D<<25|P>>>7),ve=(M>>>14|N<<18)^(M>>>18|N<<14)^(M<<23|N>>>9),_e=(N>>>14|M<<18)^(N>>>18|M<<14)^(N<<23|M>>>9),be=l[H],we=be.high,Ce=be.low,xe=K+ve+((ue=V+_e)>>>0<V>>>0?1:0),Se=ye+fe;K=$,V=j,$=B,j=U,B=M,U=N,M=F+(xe=(xe=(xe=xe+pe+((ue+=ge)>>>0<ge>>>0?1:0))+we+((ue+=Ce)>>>0<Ce>>>0?1:0))+z+((ue+=q)>>>0<q>>>0?1:0))+((N=R+ue|0)>>>0<R>>>0?1:0)|0,F=k,R=O,k=L,O=I,L=P,I=D,P=xe+(me+he+(Se>>>0<ye>>>0?1:0))+((D=ue+Se|0)>>>0<ue>>>0?1:0)|0}h=o.low=h+D,o.high=g+P+(h>>>0<D>>>0?1:0),m=i.low=m+I,i.high=f+L+(m>>>0<I>>>0?1:0),v=a.low=v+O,a.high=y+k+(v>>>0<O>>>0?1:0),b=r.low=b+R,r.high=_+F+(b>>>0<R>>>0?1:0),C=s.low=C+N,s.high=w+M+(C>>>0<N>>>0?1:0),S=d.low=S+U,d.high=x+B+(S>>>0<U>>>0?1:0),A=u.low=A+j,u.high=E+$+(A>>>0<j>>>0?1:0),G=p.low=G+V,p.high=T+K+(G>>>0<V>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[30+(o+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(o+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(d),e.HmacSHA512=t._createHmacHelper(d)}(),o.SHA512)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=require("util")},function(e,t,n){"use strict";n(26),n(7);e.exports=new class{constructor(){this._cache={},this._initiliazed=!1}updateLicense(e){e._offline||this._update({license:e})}updateUser(e){this._update({user:e})}getUser(){return this._cache.user}getLicense(){if(this._cache.license){const{lastUpdate:e}=this._cache;return this._cache.license=Object.assign({},this._cache.license,{lastUpdate:e}),this._cache.license}return null}clear(){this._cache={},this._store()}_update(e){this._initiliazed&&(this._cache=Object.assign(this._cache,e),this._store())}async init(){return gContainer.getProperty("offline_cache").then(e=>{this._cache=e||{},this._initiliazed=!0}).catch(e=>Promise.reject(e))}_store(){this._initiliazed&&(this._cache.lastUpdate=gDesigner.now(),gContainer.setProperty("offline_cache",this._cache))}}},function(e,t,n){"use strict";var o=n(20);e.exports=!o((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t,n){"use strict";var o=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GoogleToCloudRoleMap=void 0;var i=n(9),a=o(n(767));const r=t.GoogleToCloudRoleMap={[a.default.Reader]:i.ShareRoles.Viewer.id,[a.default.Commenter]:i.ShareRoles.Reviewer.id,[a.default.Writer]:i.ShareRoles.CoAuthor.id,[a.default.Owner]:i.ShareRoles.Owner.id,[a.default.Organizer]:i.ShareRoles.CoAuthor.id,[a.default.FileOrganizer]:i.ShareRoles.CoAuthor.id};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GoogleShareRoles=void 0;const o=t.GoogleShareRoles={Owner:"owner",Writer:"writer",Commenter:"commenter",Reader:"reader",Organizer:"organizer",FileOrganizer:"fileOrganizer"};t.default=o},function(e,t,n){"use strict";var o=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.NoAccessId=t.CloudToGoogleRoleMap=void 0;var i=n(9),a=o(n(767));const r=t.NoAccessId="NoAccess",s=t.CloudToGoogleRoleMap={[i.ShareRoles.Viewer.id]:a.default.Reader,[i.ShareRoles.Developer.id]:a.default.Commenter,[i.ShareRoles.Reviewer.id]:a.default.Commenter,[i.ShareRoles.CoAuthor.id]:a.default.Writer,[i.ShareRoles.Owner.id]:a.default.Owner,[i.ShareRoles.NoAccess.id]:r};t.default=s},function(e,t){function n(){}n.prototype.thumbnail=null,e.exports=n},function(e,t,n){(function(t){var o;"function"!=typeof t.Promise?(o=n(1091),Object.defineProperty(o,"polyfilled",{value:!0,writable:!1,enumerable:!1})):o=t.Promise,e.exports=o}).call(this,n(101))},function(e,t,n){(function(t,o,i){var a;a=function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var o=n(1),i=n(146),a=n(162),r=n(163),s=n(151),l=n(164),c=n(154),d=n(155),u=n(156),p=n(153);if(n(4)()){var g=n(165).PDFNodeStream;i.setPDFNetworkStreamFactory((function(e){return new g(e)}))}else if("undefined"!=typeof Response&&"body"in Response.prototype&&"undefined"!=typeof ReadableStream){var h=n(168).PDFFetchStream;i.setPDFNetworkStreamFactory((function(e){return new h(e)}))}else{var f=n(169).PDFNetworkStream;i.setPDFNetworkStreamFactory((function(e){return new f(e)}))}t.build=i.build,t.version=i.version,t.getDocument=i.getDocument,t.LoopbackPort=i.LoopbackPort,t.PDFDataRangeTransport=i.PDFDataRangeTransport,t.PDFWorker=i.PDFWorker,t.renderTextLayer=a.renderTextLayer,t.AnnotationLayer=r.AnnotationLayer,t.createPromiseCapability=o.createPromiseCapability,t.PasswordResponses=o.PasswordResponses,t.InvalidPDFException=o.InvalidPDFException,t.MissingPDFException=o.MissingPDFException,t.SVGGraphics=l.SVGGraphics,t.CanvasGraphics=c.CanvasGraphics,t.TilingPattern=d.TilingPattern,t.getShadingPatternFromIR=d.getShadingPatternFromIR,t.NativeImageDecoding=o.NativeImageDecoding,t.CMapCompressionType=o.CMapCompressionType,t.PermissionFlag=o.PermissionFlag,t.UnexpectedResponseException=o.UnexpectedResponseException,t.OPS=o.OPS,t.VerbosityLevel=o.VerbosityLevel,t.UNSUPPORTED_FEATURES=o.UNSUPPORTED_FEATURES,t.createValidAbsoluteUrl=o.createValidAbsoluteUrl,t.createObjectURL=o.createObjectURL,t.removeNullCharacters=o.removeNullCharacters,t.shadow=o.shadow,t.Util=o.Util,t.ReadableStream=o.ReadableStream,t.URL=o.URL,t.RenderingCancelledException=s.RenderingCancelledException,t.getFilenameFromUrl=s.getFilenameFromUrl,t.LinkTarget=s.LinkTarget,t.addLinkAttributes=s.addLinkAttributes,t.loadScript=s.loadScript,t.GlobalWorkerOptions=u.GlobalWorkerOptions,t.apiCompatibilityParams=p.apiCompatibilityParams},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toRomanNumerals=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];d(Number.isInteger(e)&&e>0,"The number should be a positive integer.");for(var n,o=[];e>=1e3;)e-=1e3,o.push("M");n=e/100|0,e%=100,o.push(A[n]),n=e/10|0,e%=10,o.push(A[10+n]),o.push(A[20+e]);var i=o.join("");return t?i.toLowerCase():i},t.arrayByteLength=x,t.arraysToBytes=function(e){if(1===e.length&&e[0]instanceof Uint8Array)return e[0];var t,n,o,i=0,a=e.length;for(t=0;t<a;t++)n=e[t],o=x(n),i+=o;var r=0,s=new Uint8Array(i);for(t=0;t<a;t++)(n=e[t])instanceof Uint8Array||(n="string"==typeof n?C(n):new Uint8Array(n)),o=n.byteLength,s.set(n,r),r+=o;return s},t.assert=d,t.bytesToString=function(e){d(null!==e&&"object"===a(e)&&void 0!==e.length,"Invalid argument for bytesToString");var t=e.length;if(t<8192)return String.fromCharCode.apply(null,e);for(var n=[],o=0;o<t;o+=8192){var i=Math.min(o+8192,t),r=e.subarray(o,i);n.push(String.fromCharCode.apply(null,r))}return n.join("")},t.createPromiseCapability=function(){var e=Object.create(null),t=!1;return Object.defineProperty(e,"settled",{get:function(){return t}}),e.promise=new Promise((function(n,o){e.resolve=function(e){t=!0,n(e)},e.reject=function(e){t=!0,o(e)}})),e},t.deprecated=function(e){console.log("Deprecated API usage: "+e)},t.getInheritableProperty=function(e){for(var t,n=e.dict,o=e.key,i=e.getArray,a=void 0!==i&&i,r=e.stopWhenFound,s=void 0===r||r,c=0;n;){var d=a?n.getArray(o):n.get(o);if(void 0!==d){if(s)return d;t||(t=[]),t.push(d)}if(++c>100){l('getInheritableProperty: maximum loop count exceeded for "'.concat(o,'"'));break}n=n.get("Parent")}return t},t.getLookupTableFactory=function(e){var t;return function(){return e&&(t=Object.create(null),e(t),e=null),t}},t.getVerbosityLevel=function(){return s},t.info=function(e){s>=r.INFOS&&console.log("Info: "+e)},t.isArrayBuffer=function(e){return"object"===a(e)&&null!==e&&void 0!==e.byteLength},t.isBool=function(e){return"boolean"==typeof e},t.isEmptyObj=function(e){for(var t in e)return!1;return!0},t.isNum=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSpace=function(e){return 32===e||9===e||13===e||10===e},t.isSameOrigin=function(e,t){try{var n=new i.URL(e);if(!n.origin||"null"===n.origin)return!1}catch(e){return!1}var o=new i.URL(t,n);return n.origin===o.origin},t.createValidAbsoluteUrl=function(e,t){if(!e)return null;try{var n=t?new i.URL(e,t):new i.URL(e);if(function(e){if(!e)return!1;switch(e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(n))return n}catch(e){}return null},t.isLittleEndian=function(){var e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]},t.isEvalSupported=function(){try{return new Function(""),!0}catch(e){return!1}},t.log2=function(e){return e<=0?0:Math.ceil(Math.log2(e))},t.readInt8=function(e,t){return e[t]<<24>>24},t.readUint16=function(e,t){return e[t]<<8|e[t+1]},t.readUint32=function(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0},t.removeNullCharacters=function(e){return"string"!=typeof e?(l("The argument for removeNullCharacters must be a string."),e):e.replace(w,"")},t.setVerbosityLevel=function(e){Number.isInteger(e)&&(s=e)},t.shadow=function(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!1}),n},t.string32=function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)},t.stringToBytes=C,t.stringToPDFString=function(e){var t,n=e.length,o=[];if("þ"===e[0]&&"ÿ"===e[1])for(t=2;t<n;t+=2)o.push(String.fromCharCode(e.charCodeAt(t)<<8|e.charCodeAt(t+1)));else for(t=0;t<n;++t){var i=T[e.charCodeAt(t)];o.push(i?String.fromCharCode(i):e.charAt(t))}return o.join("")},t.stringToUTF8String=function(e){return decodeURIComponent(escape(e))},t.utf8StringToString=function(e){return unescape(encodeURIComponent(e))},t.warn=l,t.unreachable=c,Object.defineProperty(t,"ReadableStream",{enumerable:!0,get:function(){return o.ReadableStream}}),Object.defineProperty(t,"URL",{enumerable:!0,get:function(){return i.URL}}),t.createObjectURL=t.FormatError=t.XRefParseException=t.XRefEntryException=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.StreamType=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.NativeImageDecoding=t.MissingPDFException=t.MissingDataException=t.InvalidPDFException=t.AbortException=t.CMapCompressionType=t.ImageKind=t.FontType=t.AnnotationType=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationBorderStyleType=t.UNSUPPORTED_FEATURES=t.VerbosityLevel=t.OPS=t.IDENTITY_MATRIX=t.FONT_IDENTITY_MATRIX=void 0,n(2);var o=n(142),i=n(144);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.IDENTITY_MATRIX=[1,0,0,1,0,0],t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],t.NativeImageDecoding={NONE:"none",DECODE:"decode",DISPLAY:"display"},t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},t.StreamType={UNKNOWN:0,FLATE:1,LZW:2,DCT:3,JPX:4,JBIG:5,A85:6,AHX:7,CCF:8,RL:9},t.FontType={UNKNOWN:0,TYPE1:1,TYPE1C:2,CIDFONTTYPE0:3,CIDFONTTYPE0C:4,TRUETYPE:5,CIDFONTTYPE2:6,TYPE3:7,OPENTYPE:8,TYPE0:9,MMTYPE1:10};var r={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=r,t.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},t.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"},t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var s=r.WARNINGS;function l(e){s>=r.WARNINGS&&console.log("Warning: "+e)}function c(e){throw new Error(e)}function d(e,t){e||c(t)}var u=function(){function e(e,t){this.name="PasswordException",this.message=e,this.code=t}return e.prototype=new Error,e.constructor=e,e}();t.PasswordException=u;var p=function(){function e(e,t){this.name="UnknownErrorException",this.message=e,this.details=t}return e.prototype=new Error,e.constructor=e,e}();t.UnknownErrorException=p;var g=function(){function e(e){this.name="InvalidPDFException",this.message=e}return e.prototype=new Error,e.constructor=e,e}();t.InvalidPDFException=g;var h=function(){function e(e){this.name="MissingPDFException",this.message=e}return e.prototype=new Error,e.constructor=e,e}();t.MissingPDFException=h;var f=function(){function e(e,t){this.name="UnexpectedResponseException",this.message=e,this.status=t}return e.prototype=new Error,e.constructor=e,e}();t.UnexpectedResponseException=f;var m=function(){function e(e,t){this.begin=e,this.end=t,this.message="Missing data ["+e+", "+t+")"}return e.prototype=new Error,e.prototype.name="MissingDataException",e.constructor=e,e}();t.MissingDataException=m;var y=function(){function e(e){this.message=e}return e.prototype=new Error,e.prototype.name="XRefEntryException",e.constructor=e,e}();t.XRefEntryException=y;var v=function(){function e(e){this.message=e}return e.prototype=new Error,e.prototype.name="XRefParseException",e.constructor=e,e}();t.XRefParseException=v;var _=function(){function e(e){this.message=e}return e.prototype=new Error,e.prototype.name="FormatError",e.constructor=e,e}();t.FormatError=_;var b=function(){function e(e){this.name="AbortException",this.message=e}return e.prototype=new Error,e.constructor=e,e}();t.AbortException=b;var w=/\x00/g;function C(e){d("string"==typeof e,"Invalid argument for stringToBytes");for(var t=e.length,n=new Uint8Array(t),o=0;o<t;++o)n[o]=255&e.charCodeAt(o);return n}function x(e){return void 0!==e.length?e.length:(d(void 0!==e.byteLength),e.byteLength)}var S=function(){function e(){}var t=["rgb(",0,",",0,",",0,")"],n=["cmyk(",0,"%,",0,"%,",0,"%,",0,"%)"];return e.makeCssRgb=function(e,n,o){return t[1]=e,t[3]=n,t[5]=o,t.join("")},e.makeCssCMYK=function(e,t,o,i){return n[1]=e,n[3]=t,n[5]=o,n[7]=i,n.join("")},e.transform=function(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]},e.applyTransform=function(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]},e.applyInverseTransform=function(e,t){var n=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n]},e.getAxialAlignedBoundingBox=function(t,n){var o=e.applyTransform(t,n),i=e.applyTransform(t.slice(2,4),n),a=e.applyTransform([t[0],t[3]],n),r=e.applyTransform([t[2],t[1]],n);return[Math.min(o[0],i[0],a[0],r[0]),Math.min(o[1],i[1],a[1],r[1]),Math.max(o[0],i[0],a[0],r[0]),Math.max(o[1],i[1],a[1],r[1])]},e.inverseTransform=function(e){var t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]},e.apply3dTransform=function(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[3]*t[0]+e[4]*t[1]+e[5]*t[2],e[6]*t[0]+e[7]*t[1]+e[8]*t[2]]},e.singularValueDecompose2dScale=function(e){var t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],o=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],r=(n+a)/2,s=Math.sqrt((n+a)*(n+a)-4*(n*a-i*o))/2,l=r+s||1,c=r-s||1;return[Math.sqrt(l),Math.sqrt(c)]},e.normalizeRect=function(e){var t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t},e.intersect=function(t,n){function o(e,t){return e-t}var i=[t[0],t[2],n[0],n[2]].sort(o),a=[t[1],t[3],n[1],n[3]].sort(o),r=[];return t=e.normalizeRect(t),n=e.normalizeRect(n),(i[0]===t[0]&&i[1]===n[0]||i[0]===n[0]&&i[1]===t[0])&&(r[0]=i[1],r[2]=i[2],(a[0]===t[1]&&a[1]===n[1]||a[0]===n[1]&&a[1]===t[1])&&(r[1]=a[1],r[3]=a[2],r))},e}();t.Util=S;var E,A=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364],G=(E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!n&&i.URL.createObjectURL){var o=new Blob([e],{type:t});return i.URL.createObjectURL(o)}for(var a="data:"+t+";base64,",r=0,s=e.length;r<s;r+=3){var l=255&e[r],c=255&e[r+1],d=255&e[r+2],u=l>>2,p=(3&l)<<4|c>>4,g=r+1<s?(15&c)<<2|d>>6:64,h=r+2<s?63&d:64;a+=E[u]+E[p]+E[g]+E[h]}return a});t.createObjectURL=G},function(e,n,o){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=o(3);if(!a._pdfjsCompatibilityChecked){a._pdfjsCompatibilityChecked=!0;var r=o(4),s="object"===("undefined"==typeof window?"undefined":i(window))&&"object"===("undefined"==typeof document?"undefined":i(document));!a.btoa&&r()&&(a.btoa=function(e){return t.from(e,"binary").toString("base64")}),!a.atob&&r()&&(a.atob=function(e){return t.from(e,"base64").toString("binary")}),s&&void 0===Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),function(){if(s&&!r()){var e=document.createElement("div");if(e.classList.add("testOne","testTwo"),!0!==e.classList.contains("testOne")||!0!==e.classList.contains("testTwo")){var t=DOMTokenList.prototype.add,n=DOMTokenList.prototype.remove;DOMTokenList.prototype.add=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];for(var i=0;i<n.length;i++){var a=n[i];t.call(this,a)}},DOMTokenList.prototype.remove=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];for(var i=0;i<t.length;i++){var a=t[i];n.call(this,a)}}}}}(),s&&!r()&&!1!==document.createElement("div").classList.toggle("test",0)&&(DOMTokenList.prototype.toggle=function(e){var t=arguments.length>1?!!arguments[1]:!this.contains(e);return this[t?"add":"remove"](e),t}),String.prototype.startsWith||o(5),String.prototype.endsWith||o(35),String.prototype.includes||o(37),Array.prototype.includes||o(39),Array.from||o(46),Object.assign||o(69),Math.log2||(Math.log2=o(74)),Number.isNaN||(Number.isNaN=o(76)),Number.isInteger||(Number.isInteger=o(78)),a.Promise&&a.Promise.prototype&&a.Promise.prototype.finally||(a.Promise=o(81)),a.WeakMap||(a.WeakMap=o(101)),a.WeakSet||(a.WeakSet=o(118)),String.codePointAt||(String.codePointAt=o(122)),String.fromCodePoint||(String.fromCodePoint=o(124)),a.Symbol||o(126),String.prototype.padStart||o(133),String.prototype.padEnd||o(137),Object.values||(Object.values=o(139))}},function(e,t,n){"use strict";e.exports="undefined"!=typeof window&&window.Math===Math?window:void 0!==o&&o.Math===Math?o:"undefined"!=typeof self&&self.Math===Math?self:{}},function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(){return"object"===(void 0===i?"undefined":o(i))&&i+""=="[object process]"&&!i.versions.nw}},function(e,t,n){"use strict";n(6),e.exports=n(9).String.startsWith},function(e,t,n){"use strict";var o=n(7),i=n(25),a=n(27),r="".startsWith;o(o.P+o.F*n(34)("startsWith"),"String",{startsWith:function(e){var t=a(this,e,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),o=String(e);return r?r.call(t,o,n):t.slice(n,n+o.length)===o}})},function(e,t,n){"use strict";var o=n(8),i=n(9),a=n(10),r=n(20),s=n(23),l=function e(t,n,l){var c,d,u,p,g=t&e.F,h=t&e.G,f=t&e.P,m=t&e.B,y=h?o:t&e.S?o[n]||(o[n]={}):(o[n]||{}).prototype,v=h?i:i[n]||(i[n]={}),_=v.prototype||(v.prototype={});for(c in h&&(l=n),l)u=((d=!g&&y&&void 0!==y[c])?y:l)[c],p=m&&d?s(u,o):f&&"function"==typeof u?s(Function.call,u):u,y&&r(y,c,u,t&e.U),v[c]!=u&&a(v,c,p),f&&_[c]!=u&&(_[c]=u)};o.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,n){"use strict";var o=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=o)},function(e,t,n){"use strict";var o=e.exports={version:"2.6.2"};"number"==typeof __e&&(__e=o)},function(e,t,n){"use strict";var o=n(11),i=n(19);e.exports=n(15)?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){"use strict";var o=n(12),i=n(14),a=n(18),r=Object.defineProperty;t.f=n(15)?Object.defineProperty:function(e,t,n){if(o(e),t=a(t,!0),o(n),i)try{return r(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";var o=n(13);e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return"object"===o(e)?null!==e:"function"==typeof e}},function(e,t,n){"use strict";e.exports=!n(15)&&!n(16)((function(){return 7!=Object.defineProperty(n(17)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";e.exports=!n(16)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";var o=n(13),i=n(8).document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,n){"use strict";var o=n(13);e.exports=function(e,t){if(!o(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!o(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!o(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!o(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";var o=n(8),i=n(10),a=n(21),r=n(22)("src"),s=Function.toString,l=(""+s).split("toString");n(9).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(a(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(a(n,r)||i(n,r,e[t]?""+e[t]:l.join(String(t)))),e===o?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[r]||s.call(this)}))},function(e,t,n){"use strict";var o={}.hasOwnProperty;e.exports=function(e,t){return o.call(e,t)}},function(e,t,n){"use strict";var o=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++o+i).toString(36))}},function(e,t,n){"use strict";var o=n(24);e.exports=function(e,t,n){if(o(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,i){return e.call(t,n,o,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){"use strict";e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var o=n(26),i=Math.min;e.exports=function(e){return e>0?i(o(e),9007199254740991):0}},function(e,t,n){"use strict";var o=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:o)(e)}},function(e,t,n){"use strict";var o=n(28),i=n(33);e.exports=function(e,t,n){if(o(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){"use strict";var o=n(13),i=n(29),a=n(30)("match");e.exports=function(e){var t;return o(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},function(e,t,n){"use strict";var o={}.toString;e.exports=function(e){return o.call(e).slice(8,-1)}},function(e,t,n){"use strict";var o=n(31)("wks"),i=n(22),a=n(8).Symbol,r="function"==typeof a;(e.exports=function(e){return o[e]||(o[e]=r&&a[e]||(r?a:i)("Symbol."+e))}).store=o},function(e,t,n){"use strict";var o=n(9),i=n(8),a=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:o.version,mode:n(32)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){"use strict";e.exports=!1},function(e,t,n){"use strict";e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";var o=n(30)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[o]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){"use strict";n(36),e.exports=n(9).String.endsWith},function(e,t,n){"use strict";var o=n(7),i=n(25),a=n(27),r="".endsWith;o(o.P+o.F*n(34)("endsWith"),"String",{endsWith:function(e){var t=a(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,o=i(t.length),s=void 0===n?o:Math.min(i(n),o),l=String(e);return r?r.call(t,l,s):t.slice(s-l.length,s)===l}})},function(e,t,n){"use strict";n(38),e.exports=n(9).String.includes},function(e,t,n){"use strict";var o=n(7),i=n(27);o(o.P+o.F*n(34)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";n(40),e.exports=n(9).Array.includes},function(e,t,n){"use strict";var o=n(7),i=n(41)(!0);o(o.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(45)("includes")},function(e,t,n){"use strict";var o=n(42),i=n(25),a=n(44);e.exports=function(e){return function(t,n,r){var s,l=o(t),c=i(l.length),d=a(r,c);if(e&&n!=n){for(;c>d;)if((s=l[d++])!=s)return!0}else for(;c>d;d++)if((e||d in l)&&l[d]===n)return e||d||0;return!e&&-1}}},function(e,t,n){"use strict";var o=n(43),i=n(33);e.exports=function(e){return o(i(e))}},function(e,t,n){"use strict";var o=n(29);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}},function(e,t,n){"use strict";var o=n(26),i=Math.max,a=Math.min;e.exports=function(e,t){return(e=o(e))<0?i(e+t,0):a(e,t)}},function(e,t,n){"use strict";var o=n(30)("unscopables"),i=Array.prototype;null==i[o]&&n(10)(i,o,{}),e.exports=function(e){i[o][e]=!0}},function(e,t,n){"use strict";n(47),n(62),e.exports=n(9).Array.from},function(e,t,n){"use strict";var o=n(48)(!0);n(49)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=o(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var o=n(26),i=n(33);e.exports=function(e){return function(t,n){var a,r,s=String(i(t)),l=o(n),c=s.length;return l<0||l>=c?e?"":void 0:(a=s.charCodeAt(l))<55296||a>56319||l+1===c||(r=s.charCodeAt(l+1))<56320||r>57343?e?s.charAt(l):a:e?s.slice(l,l+2):r-56320+(a-55296<<10)+65536}}},function(e,t,n){"use strict";var o=n(32),i=n(7),a=n(20),r=n(10),s=n(50),l=n(51),c=n(59),d=n(60),u=n(30)("iterator"),p=!([].keys&&"next"in[].keys()),g=function(){return this};e.exports=function(e,t,n,h,f,m,y){l(n,t,h);var v,_,b,w=function(e){if(!p&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},C=t+" Iterator",x="values"==f,S=!1,E=e.prototype,A=E[u]||E["@@iterator"]||f&&E[f],T=A||w(f),G=f?x?w("entries"):T:void 0,P="Array"==t&&E.entries||A;if(P&&(b=d(P.call(new e)))!==Object.prototype&&b.next&&(c(b,C,!0),o||"function"==typeof b[u]||r(b,u,g)),x&&A&&"values"!==A.name&&(S=!0,T=function(){return A.call(this)}),o&&!y||!p&&!S&&E[u]||r(E,u,T),s[t]=T,s[C]=g,f)if(v={values:x?T:w("values"),keys:m?T:w("keys"),entries:G},y)for(_ in v)_ in E||a(E,_,v[_]);else i(i.P+i.F*(p||S),t,v);return v}},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";var o=n(52),i=n(19),a=n(59),r={};n(10)(r,n(30)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=o(r,{next:i(1,n)}),a(e,t+" Iterator")}},function(e,t,n){"use strict";var o=n(12),i=n(53),a=n(57),r=n(56)("IE_PROTO"),s=function(){},l=function(){var e,t=n(17)("iframe"),o=a.length;for(t.style.display="none",n(58).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;o--;)delete l.prototype[a[o]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=o(e),n=new s,s.prototype=null,n[r]=e):n=l(),void 0===t?n:i(n,t)}},function(e,t,n){"use strict";var o=n(11),i=n(12),a=n(54);e.exports=n(15)?Object.defineProperties:function(e,t){i(e);for(var n,r=a(t),s=r.length,l=0;s>l;)o.f(e,n=r[l++],t[n]);return e}},function(e,t,n){"use strict";var o=n(55),i=n(57);e.exports=Object.keys||function(e){return o(e,i)}},function(e,t,n){"use strict";var o=n(21),i=n(42),a=n(41)(!1),r=n(56)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),l=0,c=[];for(n in s)n!=r&&o(s,n)&&c.push(n);for(;t.length>l;)o(s,n=t[l++])&&(~a(c,n)||c.push(n));return c}},function(e,t,n){"use strict";var o=n(31)("keys"),i=n(22);e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t,n){"use strict";e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){"use strict";var o=n(8).document;e.exports=o&&o.documentElement},function(e,t,n){"use strict";var o=n(11).f,i=n(21),a=n(30)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,a)&&o(e,a,{configurable:!0,value:t})}},function(e,t,n){"use strict";var o=n(21),i=n(61),a=n(56)("IE_PROTO"),r=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),o(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?r:null}},function(e,t,n){"use strict";var o=n(33);e.exports=function(e){return Object(o(e))}},function(e,t,n){"use strict";var o=n(23),i=n(7),a=n(61),r=n(63),s=n(64),l=n(25),c=n(65),d=n(66);i(i.S+i.F*!n(68)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,u,p=a(e),g="function"==typeof this?this:Array,h=arguments.length,f=h>1?arguments[1]:void 0,m=void 0!==f,y=0,v=d(p);if(m&&(f=o(f,h>2?arguments[2]:void 0,2)),null==v||g==Array&&s(v))for(n=new g(t=l(p.length));t>y;y++)c(n,y,m?f(p[y],y):p[y]);else for(u=v.call(p),n=new g;!(i=u.next()).done;y++)c(n,y,m?r(u,f,[i.value,y],!0):i.value);return n.length=y,n}})},function(e,t,n){"use strict";var o=n(12);e.exports=function(e,t,n,i){try{return i?t(o(n)[0],n[1]):t(n)}catch(t){var a=e.return;throw void 0!==a&&o(a.call(e)),t}}},function(e,t,n){"use strict";var o=n(50),i=n(30)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},function(e,t,n){"use strict";var o=n(11),i=n(19);e.exports=function(e,t,n){t in e?o.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){"use strict";var o=n(67),i=n(30)("iterator"),a=n(50);e.exports=n(9).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||a[o(e)]}},function(e,t,n){"use strict";var o=n(29),i=n(30)("toStringTag"),a="Arguments"==o(function(){return arguments}());e.exports=function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:a?o(t):"Object"==(r=o(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,n){"use strict";var o=n(30)("iterator"),i=!1;try{var a=[7][o]();a.return=function(){i=!0},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var a=[7],r=a[o]();r.next=function(){return{done:n=!0}},a[o]=function(){return r},e(a)}catch(e){}return n}},function(e,t,n){"use strict";n(70),e.exports=n(9).Object.assign},function(e,t,n){"use strict";var o=n(7);o(o.S+o.F,"Object",{assign:n(71)})},function(e,t,n){"use strict";var o=n(54),i=n(72),a=n(73),r=n(61),s=n(43),l=Object.assign;e.exports=!l||n(16)((function(){var e={},t={},n=Symbol(),o="abcdefghijklmnopqrst";return e[n]=7,o.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=o}))?function(e,t){for(var n=r(e),l=arguments.length,c=1,d=i.f,u=a.f;l>c;)for(var p,g=s(arguments[c++]),h=d?o(g).concat(d(g)):o(g),f=h.length,m=0;f>m;)u.call(g,p=h[m++])&&(n[p]=g[p]);return n}:l},function(e,t,n){"use strict";t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";n(75),e.exports=n(9).Math.log2},function(e,t,n){"use strict";var o=n(7);o(o.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){"use strict";n(77),e.exports=n(9).Number.isNaN},function(e,t,n){"use strict";var o=n(7);o(o.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){"use strict";n(79),e.exports=n(9).Number.isInteger},function(e,t,n){"use strict";var o=n(7);o(o.S,"Number",{isInteger:n(80)})},function(e,t,n){"use strict";var o=n(13),i=Math.floor;e.exports=function(e){return!o(e)&&isFinite(e)&&i(e)===e}},function(e,t,n){"use strict";n(82),n(47),n(83),n(86),n(99),n(100),e.exports=n(9).Promise},function(e,t,n){"use strict";var o=n(67),i={};i[n(30)("toStringTag")]="z",i+""!="[object z]"&&n(20)(Object.prototype,"toString",(function(){return"[object "+o(this)+"]"}),!0)},function(e,t,n){"use strict";for(var o=n(84),i=n(54),a=n(20),r=n(8),s=n(10),l=n(50),c=n(30),d=c("iterator"),u=c("toStringTag"),p=l.Array,g={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(g),f=0;f<h.length;f++){var m,y=h[f],v=g[y],_=r[y],b=_&&_.prototype;if(b&&(b[d]||s(b,d,p),b[u]||s(b,u,y),l[y]=p,v))for(m in o)b[m]||a(b,m,o[m],!0)}},function(e,t,n){"use strict";var o=n(45),i=n(85),a=n(50),r=n(42);e.exports=n(49)(Array,"Array",(function(e,t){this._t=r(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),a.Arguments=a.Array,o("keys"),o("values"),o("entries")},function(e,t,n){"use strict";e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var o,i,a,r,s=n(32),l=n(8),c=n(23),d=n(67),u=n(7),p=n(13),g=n(24),h=n(87),f=n(88),m=n(89),y=n(90).set,v=n(92)(),_=n(93),b=n(94),w=n(95),C=n(96),x=l.TypeError,S=l.process,E=S&&S.versions,A=E&&E.v8||"",T=l.Promise,G="process"==d(S),P=function(){},D=i=_.f,L=!!function(){try{var e=T.resolve(1),t=(e.constructor={})[n(30)("species")]=function(e){e(P,P)};return(G||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t&&0!==A.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),I=function(e){var t;return!(!p(e)||"function"!=typeof(t=e.then))&&t},k=function(e,t){if(!e._n){e._n=!0;var n=e._c;v((function(){for(var o=e._v,i=1==e._s,a=0,r=function(t){var n,a,r,s=i?t.ok:t.fail,l=t.resolve,c=t.reject,d=t.domain;try{s?(i||(2==e._h&&R(e),e._h=1),!0===s?n=o:(d&&d.enter(),n=s(o),d&&(d.exit(),r=!0)),n===t.promise?c(x("Promise-chain cycle")):(a=I(n))?a.call(n,l,c):l(n)):c(o)}catch(e){d&&!r&&d.exit(),c(e)}};n.length>a;)r(n[a++]);e._c=[],e._n=!1,t&&!e._h&&O(e)}))}},O=function(e){y.call(l,(function(){var t,n,o,i=e._v,a=F(e);if(a&&(t=b((function(){G?S.emit("unhandledRejection",i,e):(n=l.onunhandledrejection)?n({promise:e,reason:i}):(o=l.console)&&o.error&&o.error("Unhandled promise rejection",i)})),e._h=G||F(e)?2:1),e._a=void 0,a&&t.e)throw t.v}))},F=function(e){return 1!==e._h&&0===(e._a||e._c).length},R=function(e){y.call(l,(function(){var t;G?S.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})}))},M=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),k(t,!0))},N=function e(t){var n,o=this;if(!o._d){o._d=!0,o=o._w||o;try{if(o===t)throw x("Promise can't be resolved itself");(n=I(t))?v((function(){var i={_w:o,_d:!1};try{n.call(t,c(e,i,1),c(M,i,1))}catch(e){M.call(i,e)}})):(o._v=t,o._s=1,k(o,!1))}catch(e){M.call({_w:o,_d:!1},e)}}};L||(T=function(e){h(this,T,"Promise","_h"),g(e),o.call(this);try{e(c(N,this,1),c(M,this,1))}catch(e){M.call(this,e)}},(o=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(97)(T.prototype,{then:function(e,t){var n=D(m(this,T));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=G?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&k(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new o;this.promise=e,this.resolve=c(N,e,1),this.reject=c(M,e,1)},_.f=D=function(e){return e===T||e===r?new a(e):i(e)}),u(u.G+u.W+u.F*!L,{Promise:T}),n(59)(T,"Promise"),n(98)("Promise"),r=n(9).Promise,u(u.S+u.F*!L,"Promise",{reject:function(e){var t=D(this);return(0,t.reject)(e),t.promise}}),u(u.S+u.F*(s||!L),"Promise",{resolve:function(e){return C(s&&this===r?T:this,e)}}),u(u.S+u.F*!(L&&n(68)((function(e){T.all(e).catch(P)}))),"Promise",{all:function(e){var t=this,n=D(t),o=n.resolve,i=n.reject,a=b((function(){var n=[],a=0,r=1;f(e,!1,(function(e){var s=a++,l=!1;n.push(void 0),r++,t.resolve(e).then((function(e){l||(l=!0,n[s]=e,--r||o(n))}),i)})),--r||o(n)}));return a.e&&i(a.v),n.promise},race:function(e){var t=this,n=D(t),o=n.reject,i=b((function(){f(e,!1,(function(e){t.resolve(e).then(n.resolve,o)}))}));return i.e&&o(i.v),n.promise}})},function(e,t,n){"use strict";e.exports=function(e,t,n,o){if(!(e instanceof t)||void 0!==o&&o in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){"use strict";var o=n(23),i=n(63),a=n(64),r=n(12),s=n(25),l=n(66),c={},d={},u=e.exports=function(e,t,n,u,p){var g,h,f,m,y=p?function(){return e}:l(e),v=o(n,u,t?2:1),_=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(a(y)){for(g=s(e.length);g>_;_++)if((m=t?v(r(h=e[_])[0],h[1]):v(e[_]))===c||m===d)return m}else for(f=y.call(e);!(h=f.next()).done;)if((m=i(f,v,h.value,t))===c||m===d)return m};u.BREAK=c,u.RETURN=d},function(e,t,n){"use strict";var o=n(12),i=n(24),a=n(30)("species");e.exports=function(e,t){var n,r=o(e).constructor;return void 0===r||null==(n=o(r)[a])?t:i(n)}},function(e,t,n){"use strict";var o,i,a,r=n(23),s=n(91),l=n(58),c=n(17),d=n(8),u=d.process,p=d.setImmediate,g=d.clearImmediate,h=d.MessageChannel,f=d.Dispatch,m=0,y={},v=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},_=function(e){v.call(e.data)};p&&g||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++m]=function(){s("function"==typeof e?e:Function(e),t)},o(m),m},g=function(e){delete y[e]},"process"==n(29)(u)?o=function(e){u.nextTick(r(v,e,1))}:f&&f.now?o=function(e){f.now(r(v,e,1))}:h?(a=(i=new h).port2,i.port1.onmessage=_,o=r(a.postMessage,a,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(o=function(e){d.postMessage(e+"","*")},d.addEventListener("message",_,!1)):o="onreadystatechange"in c("script")?function(e){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),v.call(e)}}:function(e){setTimeout(r(v,e,1),0)}),e.exports={set:p,clear:g}},function(e,t,n){"use strict";e.exports=function(e,t,n){var o=void 0===n;switch(t.length){case 0:return o?e():e.call(n);case 1:return o?e(t[0]):e.call(n,t[0]);case 2:return o?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return o?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return o?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){"use strict";var o=n(8),i=n(90).set,a=o.MutationObserver||o.WebKitMutationObserver,r=o.process,s=o.Promise,l="process"==n(29)(r);e.exports=function(){var e,t,n,c=function(){var o,i;for(l&&(o=r.domain)&&o.exit();e;){i=e.fn,e=e.next;try{i()}catch(o){throw e?n():t=void 0,o}}t=void 0,o&&o.enter()};if(l)n=function(){r.nextTick(c)};else if(!a||o.navigator&&o.navigator.standalone)if(s&&s.resolve){var d=s.resolve(void 0);n=function(){d.then(c)}}else n=function(){i.call(o,c)};else{var u=!0,p=document.createTextNode("");new a(c).observe(p,{characterData:!0}),n=function(){p.data=u=!u}}return function(o){var i={fn:o,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){"use strict";var o=n(24);function i(e){var t,n;this.promise=new e((function(e,o){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=o})),this.resolve=o(t),this.reject=o(n)}e.exports.f=function(e){return new i(e)}},function(e,t,n){"use strict";e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){"use strict";var o=n(8).navigator;e.exports=o&&o.userAgent||""},function(e,t,n){"use strict";var o=n(12),i=n(13),a=n(93);e.exports=function(e,t){if(o(e),i(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var o=n(20);e.exports=function(e,t,n){for(var i in t)o(e,i,t[i],n);return e}},function(e,t,n){"use strict";var o=n(8),i=n(11),a=n(15),r=n(30)("species");e.exports=function(e){var t=o[e];a&&t&&!t[r]&&i.f(t,r,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var o=n(7),i=n(9),a=n(8),r=n(89),s=n(96);o(o.P+o.R,"Promise",{finally:function(e){var t=r(this,i.Promise||a.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){"use strict";var o=n(7),i=n(93),a=n(94);o(o.S,"Promise",{try:function(e){var t=i.f(this),n=a(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){"use strict";n(82),n(83),n(102),n(114),n(116),e.exports=n(9).WeakMap},function(e,t,n){"use strict";var o,i=n(103)(0),a=n(20),r=n(107),s=n(71),l=n(108),c=n(13),d=n(16),u=n(109),p=r.getWeak,g=Object.isExtensible,h=l.ufstore,f={},m=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(e){if(c(e)){var t=p(e);return!0===t?h(u(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return l.def(u(this,"WeakMap"),e,t)}},v=e.exports=n(110)("WeakMap",m,y,l,!0,!0);d((function(){return 7!=(new v).set((Object.freeze||Object)(f),7).get(f)}))&&(s((o=l.getConstructor(m,"WeakMap")).prototype,y),r.NEED=!0,i(["delete","has","get","set"],(function(e){var t=v.prototype,n=t[e];a(t,e,(function(t,i){if(c(t)&&!g(t)){this._f||(this._f=new o);var a=this._f[e](t,i);return"set"==e?this:a}return n.call(this,t,i)}))})))},function(e,t,n){"use strict";var o=n(23),i=n(43),a=n(61),r=n(25),s=n(104);e.exports=function(e,t){var n=1==e,l=2==e,c=3==e,d=4==e,u=6==e,p=5==e||u,g=t||s;return function(t,s,h){for(var f,m,y=a(t),v=i(y),_=o(s,h,3),b=r(v.length),w=0,C=n?g(t,b):l?g(t,0):void 0;b>w;w++)if((p||w in v)&&(m=_(f=v[w],w,y),e))if(n)C[w]=m;else if(m)switch(e){case 3:return!0;case 5:return f;case 6:return w;case 2:C.push(f)}else if(d)return!1;return u?-1:c||d?d:C}}},function(e,t,n){"use strict";var o=n(105);e.exports=function(e,t){return new(o(e))(t)}},function(e,t,n){"use strict";var o=n(13),i=n(106),a=n(30)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),o(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var o=n(29);e.exports=Array.isArray||function(e){return"Array"==o(e)}},function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(22)("meta"),a=n(13),r=n(21),s=n(11).f,l=0,c=Object.isExtensible||function(){return!0},d=!n(16)((function(){return c(Object.preventExtensions({}))})),u=function(e){s(e,i,{value:{i:"O"+ ++l,w:{}}})},p=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!a(e))return"symbol"==o(e)?e:("string"==typeof e?"S":"P")+e;if(!r(e,i)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[i].i},getWeak:function(e,t){if(!r(e,i)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[i].w},onFreeze:function(e){return d&&p.NEED&&c(e)&&!r(e,i)&&u(e),e}}},function(e,t,n){"use strict";var o=n(97),i=n(107).getWeak,a=n(12),r=n(13),s=n(87),l=n(88),c=n(103),d=n(21),u=n(109),p=c(5),g=c(6),h=0,f=function(e){return e._l||(e._l=new m)},m=function(){this.a=[]},y=function(e,t){return p(e.a,(function(e){return e[0]===t}))};m.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var n=y(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=g(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,a){var c=e((function(e,o){s(e,c,t,"_i"),e._t=t,e._i=h++,e._l=void 0,null!=o&&l(o,n,e[a],e)}));return o(c.prototype,{delete:function(e){if(!r(e))return!1;var n=i(e);return!0===n?f(u(this,t)).delete(e):n&&d(n,this._i)&&delete n[this._i]},has:function(e){if(!r(e))return!1;var n=i(e);return!0===n?f(u(this,t)).has(e):n&&d(n,this._i)}}),c},def:function(e,t,n){var o=i(a(t),!0);return!0===o?f(e).set(t,n):o[e._i]=n,e},ufstore:f}},function(e,t,n){"use strict";var o=n(13);e.exports=function(e,t){if(!o(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";var o=n(8),i=n(7),a=n(20),r=n(97),s=n(107),l=n(88),c=n(87),d=n(13),u=n(16),p=n(68),g=n(59),h=n(111);e.exports=function(e,t,n,f,m,y){var v=o[e],_=v,b=m?"set":"add",w=_&&_.prototype,C={},x=function(e){var t=w[e];a(w,e,"delete"==e||"has"==e?function(e){return!(y&&!d(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!d(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof _&&(y||w.forEach&&!u((function(){(new _).entries().next()})))){var S=new _,E=S[b](y?{}:-0,1)!=S,A=u((function(){S.has(1)})),T=p((function(e){new _(e)})),G=!y&&u((function(){for(var e=new _,t=5;t--;)e[b](t,t);return!e.has(-0)}));T||((_=t((function(t,n){c(t,_,e);var o=h(new v,t,_);return null!=n&&l(n,m,o[b],o),o}))).prototype=w,w.constructor=_),(A||G)&&(x("delete"),x("has"),m&&x("get")),(G||E)&&x(b),y&&w.clear&&delete w.clear}else _=f.getConstructor(t,e,m,b),r(_.prototype,n),s.NEED=!0;return g(_,e),C[e]=_,i(i.G+i.W+i.F*(_!=v),C),y||f.setStrong(_,e,m),_}},function(e,t,n){"use strict";var o=n(13),i=n(112).set;e.exports=function(e,t,n){var a,r=t.constructor;return r!==n&&"function"==typeof r&&(a=r.prototype)!==n.prototype&&o(a)&&i&&i(e,a),e}},function(e,t,n){"use strict";var o=n(13),i=n(12),a=function(e,t){if(i(e),!o(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,o){try{(o=n(23)(Function.call,n(113).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return a(e,n),t?e.__proto__=n:o(e,n),e}}({},!1):void 0),check:a}},function(e,t,n){"use strict";var o=n(73),i=n(19),a=n(42),r=n(18),s=n(21),l=n(14),c=Object.getOwnPropertyDescriptor;t.f=n(15)?c:function(e,t){if(e=a(e),t=r(t,!0),l)try{return c(e,t)}catch(e){}if(s(e,t))return i(!o.f.call(e,t),e[t])}},function(e,t,n){"use strict";n(115)("WeakMap")},function(e,t,n){"use strict";var o=n(7);e.exports=function(e){o(o.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){"use strict";n(117)("WeakMap")},function(e,t,n){"use strict";var o=n(7),i=n(24),a=n(23),r=n(88);e.exports=function(e){o(o.S,e,{from:function(e){var t,n,o,s,l=arguments[1];return i(this),(t=void 0!==l)&&i(l),null==e?new this:(n=[],t?(o=0,s=a(l,arguments[2],2),r(e,!1,(function(e){n.push(s(e,o++))}))):r(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";n(82),n(83),n(119),n(120),n(121),e.exports=n(9).WeakSet},function(e,t,n){"use strict";var o=n(108),i=n(109);n(110)("WeakSet",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return o.def(i(this,"WeakSet"),e,!0)}},o,!1,!0)},function(e,t,n){"use strict";n(115)("WeakSet")},function(e,t,n){"use strict";n(117)("WeakSet")},function(e,t,n){"use strict";n(123),e.exports=n(9).String.codePointAt},function(e,t,n){"use strict";var o=n(7),i=n(48)(!1);o(o.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,n){"use strict";n(125),e.exports=n(9).String.fromCodePoint},function(e,t,n){"use strict";var o=n(7),i=n(44),a=String.fromCharCode,r=String.fromCodePoint;o(o.S+o.F*(!!r&&1!=r.length),"String",{fromCodePoint:function(e){for(var t,n=[],o=arguments.length,r=0;o>r;){if(t=+arguments[r++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?a(t):a(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){"use strict";n(127),n(82),e.exports=n(9).Symbol},function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(8),a=n(21),r=n(15),s=n(7),l=n(20),c=n(107).KEY,d=n(16),u=n(31),p=n(59),g=n(22),h=n(30),f=n(128),m=n(129),y=n(130),v=n(106),_=n(12),b=n(13),w=n(42),C=n(18),x=n(19),S=n(52),E=n(131),A=n(113),T=n(11),G=n(54),P=A.f,D=T.f,L=E.f,I=i.Symbol,k=i.JSON,O=k&&k.stringify,F=h("_hidden"),R=h("toPrimitive"),M={}.propertyIsEnumerable,N=u("symbol-registry"),B=u("symbols"),U=u("op-symbols"),$=Object.prototype,j="function"==typeof I,K=i.QObject,V=!K||!K.prototype||!K.prototype.findChild,H=r&&d((function(){return 7!=S(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a}))?function(e,t,n){var o=P($,t);o&&delete $[t],D(e,t,n),o&&e!==$&&D($,t,o)}:D,W=function(e){var t=B[e]=S(I.prototype);return t._k=e,t},z=j&&"symbol"==o(I.iterator)?function(e){return"symbol"==o(e)}:function(e){return e instanceof I},q=function(e,t,n){return e===$&&q(U,t,n),_(e),t=C(t,!0),_(n),a(B,t)?(n.enumerable?(a(e,F)&&e[F][t]&&(e[F][t]=!1),n=S(n,{enumerable:x(0,!1)})):(a(e,F)||D(e,F,x(1,{})),e[F][t]=!0),H(e,t,n)):D(e,t,n)},Y=function(e,t){_(e);for(var n,o=y(t=w(t)),i=0,a=o.length;a>i;)q(e,n=o[i++],t[n]);return e},X=function(e){var t=M.call(this,e=C(e,!0));return!(this===$&&a(B,e)&&!a(U,e))&&(!(t||!a(this,e)||!a(B,e)||a(this,F)&&this[F][e])||t)},Q=function(e,t){if(e=w(e),t=C(t,!0),e!==$||!a(B,t)||a(U,t)){var n=P(e,t);return!n||!a(B,t)||a(e,F)&&e[F][t]||(n.enumerable=!0),n}},J=function(e){for(var t,n=L(w(e)),o=[],i=0;n.length>i;)a(B,t=n[i++])||t==F||t==c||o.push(t);return o},Z=function(e){for(var t,n=e===$,o=L(n?U:w(e)),i=[],r=0;o.length>r;)!a(B,t=o[r++])||n&&!a($,t)||i.push(B[t]);return i};j||(l((I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=g(arguments.length>0?arguments[0]:void 0),t=function t(n){this===$&&t.call(U,n),a(this,F)&&a(this[F],e)&&(this[F][e]=!1),H(this,e,x(1,n))};return r&&V&&H($,e,{configurable:!0,set:t}),W(e)}).prototype,"toString",(function(){return this._k})),A.f=Q,T.f=q,n(132).f=E.f=J,n(73).f=X,n(72).f=Z,r&&!n(32)&&l($,"propertyIsEnumerable",X,!0),f.f=function(e){return W(h(e))}),s(s.G+s.W+s.F*!j,{Symbol:I});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)h(ee[te++]);for(var ne=G(h.store),oe=0;ne.length>oe;)m(ne[oe++]);s(s.S+s.F*!j,"Symbol",{for:function(e){return a(N,e+="")?N[e]:N[e]=I(e)},keyFor:function(e){if(!z(e))throw TypeError(e+" is not a symbol!");for(var t in N)if(N[t]===e)return t},useSetter:function(){V=!0},useSimple:function(){V=!1}}),s(s.S+s.F*!j,"Object",{create:function(e,t){return void 0===t?S(e):Y(S(e),t)},defineProperty:q,defineProperties:Y,getOwnPropertyDescriptor:Q,getOwnPropertyNames:J,getOwnPropertySymbols:Z}),k&&s(s.S+s.F*(!j||d((function(){var e=I();return"[null]"!=O([e])||"{}"!=O({a:e})||"{}"!=O(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,o=[e],i=1;arguments.length>i;)o.push(arguments[i++]);if(n=t=o[1],(b(t)||void 0!==e)&&!z(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!z(t))return t}),o[1]=t,O.apply(k,o)}}),I.prototype[R]||n(10)(I.prototype,R,I.prototype.valueOf),p(I,"Symbol"),p(Math,"Math",!0),p(i.JSON,"JSON",!0)},function(e,t,n){"use strict";t.f=n(30)},function(e,t,n){"use strict";var o=n(8),i=n(9),a=n(32),r=n(128),s=n(11).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:o.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:r.f(e)})}},function(e,t,n){"use strict";var o=n(54),i=n(72),a=n(73);e.exports=function(e){var t=o(e),n=i.f;if(n)for(var r,s=n(e),l=a.f,c=0;s.length>c;)l.call(e,r=s[c++])&&t.push(r);return t}},function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(42),a=n(132).f,r={}.toString,s="object"==("undefined"==typeof window?"undefined":o(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==r.call(e)?function(e){try{return a(e)}catch(e){return s.slice()}}(e):a(i(e))}},function(e,t,n){"use strict";var o=n(55),i=n(57).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,i)}},function(e,t,n){"use strict";n(134),e.exports=n(9).String.padStart},function(e,t,n){"use strict";var o=n(7),i=n(135),a=n(95);o(o.P+o.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(a),"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){"use strict";var o=n(25),i=n(136),a=n(33);e.exports=function(e,t,n,r){var s=String(a(e)),l=s.length,c=void 0===n?" ":String(n),d=o(t);if(d<=l||""==c)return s;var u=d-l,p=i.call(c,Math.ceil(u/c.length));return p.length>u&&(p=p.slice(0,u)),r?p+s:s+p}},function(e,t,n){"use strict";var o=n(26),i=n(33);e.exports=function(e){var t=String(i(this)),n="",a=o(e);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},function(e,t,n){"use strict";n(138),e.exports=n(9).String.padEnd},function(e,t,n){"use strict";var o=n(7),i=n(135),a=n(95);o(o.P+o.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(a),"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";n(140),e.exports=n(9).Object.values},function(e,t,n){"use strict";var o=n(7),i=n(141)(!1);o(o.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){"use strict";var o=n(54),i=n(42),a=n(73).f;e.exports=function(e){return function(t){for(var n,r=i(t),s=o(r),l=s.length,c=0,d=[];l>c;)a.call(r,n=s[c++])&&d.push(e?[n,r[n]]:r[n]);return d}}},function(e,t,n){"use strict";var o=!1;if("undefined"!=typeof ReadableStream)try{new ReadableStream({start:function(e){e.close()}}),o=!0}catch(e){}t.ReadableStream=o?ReadableStream:n(143).ReadableStream},function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){for(var n in t)e[n]=t[n]}(t,function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){var i="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)},a=n(1).assert;function r(e){return"string"==typeof e||"symbol"===(void 0===e?"undefined":i(e))}function s(e,t,n){if("function"!=typeof e)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,n)}t.typeIsObject=function(e){return"object"===(void 0===e?"undefined":i(e))&&null!==e||"function"==typeof e},t.createDataProperty=function(e,n,o){a(t.typeIsObject(e)),Object.defineProperty(e,n,{value:o,writable:!0,enumerable:!0,configurable:!0})},t.createArrayFromList=function(e){return e.slice()},t.ArrayBufferCopy=function(e,t,n,o,i){new Uint8Array(e).set(new Uint8Array(n,o,i),t)},t.CreateIterResultObject=function(e,t){a("boolean"==typeof t);var n={};return Object.defineProperty(n,"value",{value:e,enumerable:!0,writable:!0,configurable:!0}),Object.defineProperty(n,"done",{value:t,enumerable:!0,writable:!0,configurable:!0}),n},t.IsFiniteNonNegativeNumber=function(e){return!(Number.isNaN(e)||e===1/0||e<0)},t.InvokeOrNoop=function(e,t,n){a(void 0!==e),a(r(t)),a(Array.isArray(n));var o=e[t];if(void 0!==o)return s(o,e,n)},t.PromiseInvokeOrNoop=function(e,n,o){a(void 0!==e),a(r(n)),a(Array.isArray(o));try{return Promise.resolve(t.InvokeOrNoop(e,n,o))}catch(e){return Promise.reject(e)}},t.PromiseInvokeOrPerformFallback=function(e,t,n,o,i){a(void 0!==e),a(r(t)),a(Array.isArray(n)),a(Array.isArray(i));var l=void 0;try{l=e[t]}catch(e){return Promise.reject(e)}if(void 0===l)return o.apply(null,i);try{return Promise.resolve(s(l,e,n))}catch(e){return Promise.reject(e)}},t.TransferArrayBuffer=function(e){return e.slice()},t.ValidateAndNormalizeHighWaterMark=function(e){if(e=Number(e),Number.isNaN(e)||e<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return e},t.ValidateAndNormalizeQueuingStrategy=function(e,n){if(void 0!==e&&"function"!=typeof e)throw new TypeError("size property of a queuing strategy must be a function");return{size:e,highWaterMark:n=t.ValidateAndNormalizeHighWaterMark(n)}}},function(e,t,n){function o(e){this.name="AssertionError",this.message=e||"",this.stack=(new Error).stack}o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,e.exports={rethrowAssertionErrorRejection:function(e){e&&e.constructor===o&&setTimeout((function(){throw e}),0)},AssertionError:o,assert:function(e,t){if(!e)throw new o(t)}}},function(e,t,n){var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(0),r=a.InvokeOrNoop,s=a.PromiseInvokeOrNoop,l=a.ValidateAndNormalizeQueuingStrategy,c=a.typeIsObject,d=n(1),u=d.assert,p=d.rethrowAssertionErrorRejection,g=n(3),h=g.DequeueValue,f=g.EnqueueValueWithSize,m=g.PeekQueueValue,y=g.ResetQueue,v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.size,a=n.highWaterMark,r=void 0===a?1:a;i(this,e),this._state="writable",this._storedError=void 0,this._writer=void 0,this._writableStreamController=void 0,this._writeRequests=[],this._inFlightWriteRequest=void 0,this._closeRequest=void 0,this._inFlightCloseRequest=void 0,this._pendingAbortRequest=void 0,this._backpressure=!1;var s=t.type;if(void 0!==s)throw new RangeError("Invalid type is specified");this._writableStreamController=new N(this,t,o,r),this._writableStreamController.__startSteps()}return o(e,[{key:"abort",value:function(e){return!1===b(this)?Promise.reject(V("abort")):!0===w(this)?Promise.reject(new TypeError("Cannot abort a stream that already has a writer")):C(this,e)}},{key:"getWriter",value:function(){if(!1===b(this))throw V("getWriter");return _(this)}},{key:"locked",get:function(){if(!1===b(this))throw V("locked");return w(this)}}]),e}();function _(e){return new L(e)}function b(e){return!!c(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")}function w(e){return u(!0===b(e),"IsWritableStreamLocked should only be used on known writable streams"),void 0!==e._writer}function C(e,t){var n=e._state;if("closed"===n)return Promise.resolve(void 0);if("errored"===n)return Promise.reject(e._storedError);var o=new TypeError("Requested to abort");if(void 0!==e._pendingAbortRequest)return Promise.reject(o);u("writable"===n||"erroring"===n,"state must be writable or erroring");var i=!1;"erroring"===n&&(i=!0,t=void 0);var a=new Promise((function(n,o){e._pendingAbortRequest={_resolve:n,_reject:o,_reason:t,_wasAlreadyErroring:i}}));return!1===i&&S(e,o),a}function x(e,t){var n=e._state;"writable"!==n?(u("erroring"===n),E(e)):S(e,t)}function S(e,t){u(void 0===e._storedError,"stream._storedError === undefined"),u("writable"===e._state,"state must be writable");var n=e._writableStreamController;u(void 0!==n,"controller must not be undefined"),e._state="erroring",e._storedError=t;var o=e._writer;void 0!==o&&F(o,t),!1===G(e)&&!0===n._started&&E(e)}function E(e){u("erroring"===e._state,"stream._state === erroring"),u(!1===G(e),"WritableStreamHasOperationMarkedInFlight(stream) === false"),e._state="errored",e._writableStreamController.__errorSteps();for(var t=e._storedError,n=0;n<e._writeRequests.length;n++)e._writeRequests[n]._reject(t);if(e._writeRequests=[],void 0!==e._pendingAbortRequest){var o=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,!0===o._wasAlreadyErroring)return o._reject(t),void P(e);e._writableStreamController.__abortSteps(o._reason).then((function(){o._resolve(),P(e)}),(function(t){o._reject(t),P(e)}))}else P(e)}function A(e){u(void 0!==e._inFlightCloseRequest),e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0;var t=e._state;u("writable"===t||"erroring"===t),"erroring"===t&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";var n=e._writer;void 0!==n&&function(e){u(void 0!==e._closedPromise_resolve,"writer._closedPromise_resolve !== undefined"),u(void 0!==e._closedPromise_reject,"writer._closedPromise_reject !== undefined"),u("pending"===e._closedPromiseState,"writer._closedPromiseState is pending"),e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved"}(n),u(void 0===e._pendingAbortRequest,"stream._pendingAbortRequest === undefined"),u(void 0===e._storedError,"stream._storedError === undefined")}function T(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function G(e){return void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest}function P(e){u("errored"===e._state,'_stream_.[[state]] is `"errored"`'),void 0!==e._closeRequest&&(u(void 0===e._inFlightCloseRequest),e._closeRequest._reject(e._storedError),e._closeRequest=void 0);var t=e._writer;void 0!==t&&(q(t,e._storedError),t._closedPromise.catch((function(){})))}function D(e,t){u("writable"===e._state),u(!1===T(e));var n=e._writer;void 0!==n&&t!==e._backpressure&&(!0===t?function(e){u(void 0===e._readyPromise_resolve,"writer._readyPromise_resolve === undefined"),u(void 0===e._readyPromise_reject,"writer._readyPromise_reject === undefined"),e._readyPromise=new Promise((function(t,n){e._readyPromise_resolve=t,e._readyPromise_reject=n})),e._readyPromiseState="pending"}(n):(u(!1===t),Q(n))),e._backpressure=t}e.exports={AcquireWritableStreamDefaultWriter:_,IsWritableStream:b,IsWritableStreamLocked:w,WritableStream:v,WritableStreamAbort:C,WritableStreamDefaultControllerError:K,WritableStreamDefaultWriterCloseWithErrorPropagation:function(e){var t=e._ownerWritableStream;u(void 0!==t);var n=t._state;return!0===T(t)||"closed"===n?Promise.resolve():"errored"===n?Promise.reject(t._storedError):(u("writable"===n||"erroring"===n),k(e))},WritableStreamDefaultWriterRelease:R,WritableStreamDefaultWriterWrite:M,WritableStreamCloseQueuedOrInFlight:T};var L=function(){function e(t){if(i(this,e),!1===b(t))throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===w(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;var n,o=t._state;if("writable"===o)!1===T(t)&&!0===t._backpressure?((n=this)._readyPromise=new Promise((function(e,t){n._readyPromise_resolve=e,n._readyPromise_reject=t})),n._readyPromiseState="pending"):X(this),z(this);else if("erroring"===o)Y(this,t._storedError),this._readyPromise.catch((function(){})),z(this);else if("closed"===o)X(this),function(e){e._closedPromise=Promise.resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved"}(this);else{u("errored"===o,"state must be errored");var a=t._storedError;Y(this,a),this._readyPromise.catch((function(){})),function(e,t){e._closedPromise=Promise.reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected"}(this,a),this._closedPromise.catch((function(){}))}}return o(e,[{key:"abort",value:function(e){return!1===I(this)?Promise.reject(H("abort")):void 0===this._ownerWritableStream?Promise.reject(W("abort")):function(e,t){var n=e._ownerWritableStream;return u(void 0!==n),C(n,t)}(this,e)}},{key:"close",value:function(){if(!1===I(this))return Promise.reject(H("close"));var e=this._ownerWritableStream;return void 0===e?Promise.reject(W("close")):!0===T(e)?Promise.reject(new TypeError("cannot close an already-closing stream")):k(this)}},{key:"releaseLock",value:function(){if(!1===I(this))throw H("releaseLock");var e=this._ownerWritableStream;void 0!==e&&(u(void 0!==e._writer),R(this))}},{key:"write",value:function(e){return!1===I(this)?Promise.reject(H("write")):void 0===this._ownerWritableStream?Promise.reject(W("write to")):M(this,e)}},{key:"closed",get:function(){return!1===I(this)?Promise.reject(H("closed")):this._closedPromise}},{key:"desiredSize",get:function(){if(!1===I(this))throw H("desiredSize");if(void 0===this._ownerWritableStream)throw W("desiredSize");return e=this._ownerWritableStream,"errored"===(t=e._state)||"erroring"===t?null:"closed"===t?0:B(e._writableStreamController);var e,t}},{key:"ready",get:function(){return!1===I(this)?Promise.reject(H("ready")):this._readyPromise}}]),e}();function I(e){return!!c(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")}function k(e){var t=e._ownerWritableStream;u(void 0!==t);var n=t._state;if("closed"===n||"errored"===n)return Promise.reject(new TypeError("The stream (in "+n+" state) is not in the writable state and cannot be closed"));u("writable"===n||"erroring"===n),u(!1===T(t));var o,i=new Promise((function(e,n){var o={_resolve:e,_reject:n};t._closeRequest=o}));return!0===t._backpressure&&"writable"===n&&Q(e),o=t._writableStreamController,f(o,"close",0),U(o),i}function O(e,t){"pending"===e._closedPromiseState?q(e,t):function(e,t){u(void 0===e._closedPromise_resolve,"writer._closedPromise_resolve === undefined"),u(void 0===e._closedPromise_reject,"writer._closedPromise_reject === undefined"),u("pending"!==e._closedPromiseState,"writer._closedPromiseState is not pending"),e._closedPromise=Promise.reject(t),e._closedPromiseState="rejected"}(e,t),e._closedPromise.catch((function(){}))}function F(e,t){"pending"===e._readyPromiseState?function(e,t){u(void 0!==e._readyPromise_resolve,"writer._readyPromise_resolve !== undefined"),u(void 0!==e._readyPromise_reject,"writer._readyPromise_reject !== undefined"),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected"}(e,t):function(e,t){u(void 0===e._readyPromise_resolve,"writer._readyPromise_resolve === undefined"),u(void 0===e._readyPromise_reject,"writer._readyPromise_reject === undefined"),e._readyPromise=Promise.reject(t),e._readyPromiseState="rejected"}(e,t),e._readyPromise.catch((function(){}))}function R(e){var t=e._ownerWritableStream;u(void 0!==t),u(t._writer===e);var n=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");F(e,n),O(e,n),t._writer=void 0,e._ownerWritableStream=void 0}function M(e,t){var n=e._ownerWritableStream;u(void 0!==n);var o=n._writableStreamController,i=function(e,t){var n=e._strategySize;if(void 0===n)return 1;try{return n(t)}catch(t){return $(e,t),1}}(o,t);if(n!==e._ownerWritableStream)return Promise.reject(W("write to"));var a=n._state;if("errored"===a)return Promise.reject(n._storedError);if(!0===T(n)||"closed"===a)return Promise.reject(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===a)return Promise.reject(n._storedError);u("writable"===a);var r=function(e){return u(!0===w(e)),u("writable"===e._state),new Promise((function(t,n){var o={_resolve:t,_reject:n};e._writeRequests.push(o)}))}(n);return function(e,t,n){var o={chunk:t};try{f(e,o,n)}catch(t){return void $(e,t)}var i=e._controlledWritableStream;if(!1===T(i)&&"writable"===i._state){var a=j(e);D(i,a)}U(e)}(o,t,i),r}var N=function(){function e(t,n,o,a){if(i(this,e),!1===b(t))throw new TypeError("WritableStreamDefaultController can only be constructed with a WritableStream instance");if(void 0!==t._writableStreamController)throw new TypeError("WritableStreamDefaultController instances can only be created by the WritableStream constructor");this._controlledWritableStream=t,this._underlyingSink=n,this._queue=void 0,this._queueTotalSize=void 0,y(this),this._started=!1;var r=l(o,a);this._strategySize=r.size,this._strategyHWM=r.highWaterMark,D(t,j(this))}return o(e,[{key:"error",value:function(e){if(!1==(!!c(t=this)&&!!Object.prototype.hasOwnProperty.call(t,"_underlyingSink")))throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");var t;"writable"===this._controlledWritableStream._state&&K(this,e)}},{key:"__abortSteps",value:function(e){return s(this._underlyingSink,"abort",[e])}},{key:"__errorSteps",value:function(){y(this)}},{key:"__startSteps",value:function(){var e=this,t=r(this._underlyingSink,"start",[this]),n=this._controlledWritableStream;Promise.resolve(t).then((function(){u("writable"===n._state||"erroring"===n._state),e._started=!0,U(e)}),(function(t){u("writable"===n._state||"erroring"===n._state),e._started=!0,x(n,t)})).catch(p)}}]),e}();function B(e){return e._strategyHWM-e._queueTotalSize}function U(e){var t=e._controlledWritableStream;if(!1!==e._started&&void 0===t._inFlightWriteRequest){var n=t._state;if("closed"!==n&&"errored"!==n)if("erroring"!==n){if(0!==e._queue.length){var o=m(e);"close"===o?function(e){var t=e._controlledWritableStream;(function(e){u(void 0===e._inFlightCloseRequest),u(void 0!==e._closeRequest),e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0})(t),h(e),u(0===e._queue.length,"queue must be empty once the final write record is dequeued"),s(e._underlyingSink,"close",[]).then((function(){A(t)}),(function(e){!function(e,t){u(void 0!==e._inFlightCloseRequest),e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,u("writable"===e._state||"erroring"===e._state),void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),x(e,t)}(t,e)})).catch(p)}(e):function(e,t){var n=e._controlledWritableStream;(function(e){u(void 0===e._inFlightWriteRequest,"there must be no pending write request"),u(0!==e._writeRequests.length,"writeRequests must not be empty"),e._inFlightWriteRequest=e._writeRequests.shift()})(n),s(e._underlyingSink,"write",[t,e]).then((function(){!function(e){u(void 0!==e._inFlightWriteRequest),e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}(n);var t=n._state;if(u("writable"===t||"erroring"===t),h(e),!1===T(n)&&"writable"===t){var o=j(e);D(n,o)}U(e)}),(function(e){!function(e,t){u(void 0!==e._inFlightWriteRequest),e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,u("writable"===e._state||"erroring"===e._state),x(e,t)}(n,e)})).catch(p)}(e,o.chunk)}}else E(t)}}function $(e,t){"writable"===e._controlledWritableStream._state&&K(e,t)}function j(e){return B(e)<=0}function K(e,t){var n=e._controlledWritableStream;u("writable"===n._state),S(n,t)}function V(e){return new TypeError("WritableStream.prototype."+e+" can only be used on a WritableStream")}function H(e){return new TypeError("WritableStreamDefaultWriter.prototype."+e+" can only be used on a WritableStreamDefaultWriter")}function W(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function z(e){e._closedPromise=new Promise((function(t,n){e._closedPromise_resolve=t,e._closedPromise_reject=n,e._closedPromiseState="pending"}))}function q(e,t){u(void 0!==e._closedPromise_resolve,"writer._closedPromise_resolve !== undefined"),u(void 0!==e._closedPromise_reject,"writer._closedPromise_reject !== undefined"),u("pending"===e._closedPromiseState,"writer._closedPromiseState is pending"),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected"}function Y(e,t){e._readyPromise=Promise.reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected"}function X(e){e._readyPromise=Promise.resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled"}function Q(e){u(void 0!==e._readyPromise_resolve,"writer._readyPromise_resolve !== undefined"),u(void 0!==e._readyPromise_reject,"writer._readyPromise_reject !== undefined"),e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled"}},function(e,t,n){var o=n(0).IsFiniteNonNegativeNumber,i=n(1).assert;t.DequeueValue=function(e){i("_queue"in e&&"_queueTotalSize"in e,"Spec-level failure: DequeueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),i(e._queue.length>0,"Spec-level failure: should never dequeue from an empty queue.");var t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value},t.EnqueueValueWithSize=function(e,t,n){if(i("_queue"in e&&"_queueTotalSize"in e,"Spec-level failure: EnqueueValueWithSize should only be used on containers with [[queue]] and [[queueTotalSize]]."),n=Number(n),!o(n))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:n}),e._queueTotalSize+=n},t.PeekQueueValue=function(e){return i("_queue"in e&&"_queueTotalSize"in e,"Spec-level failure: PeekQueueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),i(e._queue.length>0,"Spec-level failure: should never peek at an empty queue."),e._queue[0].value},t.ResetQueue=function(e){i("_queue"in e&&"_queueTotalSize"in e,"Spec-level failure: ResetQueue should only be used on containers with [[queue]] and [[queueTotalSize]]."),e._queue=[],e._queueTotalSize=0}},function(e,t,n){var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(0),r=a.ArrayBufferCopy,s=a.CreateIterResultObject,l=a.IsFiniteNonNegativeNumber,c=a.InvokeOrNoop,d=a.PromiseInvokeOrNoop,u=a.TransferArrayBuffer,p=a.ValidateAndNormalizeQueuingStrategy,g=a.ValidateAndNormalizeHighWaterMark,h=n(0),f=h.createArrayFromList,m=h.createDataProperty,y=h.typeIsObject,v=n(1),_=v.assert,b=v.rethrowAssertionErrorRejection,w=n(3),C=w.DequeueValue,x=w.EnqueueValueWithSize,S=w.ResetQueue,E=n(2),A=E.AcquireWritableStreamDefaultWriter,T=E.IsWritableStream,G=E.IsWritableStreamLocked,P=E.WritableStreamAbort,D=E.WritableStreamDefaultWriterCloseWithErrorPropagation,L=E.WritableStreamDefaultWriterRelease,I=E.WritableStreamDefaultWriterWrite,k=E.WritableStreamCloseQueuedOrInFlight,O=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.size,a=n.highWaterMark;i(this,e),this._state="readable",this._reader=void 0,this._storedError=void 0,this._disturbed=!1,this._readableStreamController=void 0;var r=t.type,s=String(r);if("bytes"===s)void 0===a&&(a=0),this._readableStreamController=new ge(this,t,a);else{if(void 0!==r)throw new RangeError("Invalid type is specified");void 0===a&&(a=1),this._readableStreamController=new ie(this,t,o,a)}}return o(e,[{key:"cancel",value:function(e){return!1===M(this)?Promise.reject(De("cancel")):!0===N(this)?Promise.reject(new TypeError("Cannot cancel a stream that already has a reader")):j(this,e)}},{key:"getReader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mode;if(!1===M(this))throw De("getReader");if(void 0===t)return R(this);if("byob"===(t=String(t)))return F(this);throw new RangeError("Invalid mode is specified")}},{key:"pipeThrough",value:function(e,t){var n=e.writable,o=e.readable;return function(e){try{Promise.prototype.then.call(e,void 0,(function(){}))}catch(e){}}(this.pipeTo(n,t)),o}},{key:"pipeTo",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.preventClose,i=n.preventAbort,a=n.preventCancel;if(!1===M(this))return Promise.reject(De("pipeTo"));if(!1===T(e))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));if(o=Boolean(o),i=Boolean(i),a=Boolean(a),!0===N(this))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"));if(!0===G(e))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"));var r=R(this),s=A(e),l=!1,c=Promise.resolve();return new Promise((function(n,d){var u,p,g;if(m(t,r._closedPromise,(function(t){!1===i?y((function(){return P(e,t)}),!0,t):v(!0,t)})),m(e,s._closedPromise,(function(e){!1===a?y((function(){return j(t,e)}),!0,e):v(!0,e)})),u=t,p=r._closedPromise,g=function(){!1===o?y((function(){return D(s)})):v()},"closed"===u._state?g():p.then(g).catch(b),!0===k(e)||"closed"===e._state){var h=new TypeError("the destination writable stream closed before all data could be piped to it");!1===a?y((function(){return j(t,h)}),!0,h):v(!0,h)}function f(){var e=c;return c.then((function(){return e!==c?f():void 0}))}function m(e,t,n){"errored"===e._state?n(e._storedError):t.catch(n).catch(b)}function y(t,n,o){function i(){t().then((function(){return _(n,o)}),(function(e){return _(!0,e)})).catch(b)}!0!==l&&(l=!0,"writable"===e._state&&!1===k(e)?f().then(i):i())}function v(t,n){!0!==l&&(l=!0,"writable"===e._state&&!1===k(e)?f().then((function(){return _(t,n)})).catch(b):_(t,n))}function _(e,t){L(s),ne(r),e?d(t):n(void 0)}(function e(){return c=Promise.resolve(),!0===l?Promise.resolve():s._readyPromise.then((function(){return oe(r).then((function(e){var t=e.value;!0!==e.done&&(c=I(s,t).catch((function(){})))}))})).then(e)})().catch((function(e){c=Promise.resolve(),b(e)}))}))}},{key:"tee",value:function(){if(!1===M(this))throw De("tee");var e=B(this,!1);return f(e)}},{key:"locked",get:function(){if(!1===M(this))throw De("locked");return N(this)}}]),e}();function F(e){return new Q(e)}function R(e){return new X(e)}function M(e){return!!y(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")}function N(e){return _(!0===M(e),"IsReadableStreamLocked should only be used on known readable streams"),void 0!==e._reader}function B(e,t){_(!0===M(e)),_("boolean"==typeof t);var n=R(e),o={closedOrErrored:!1,canceled1:!1,canceled2:!1,reason1:void 0,reason2:void 0};o.promise=new Promise((function(e){o._resolve=e}));var i=function e(){var t=e._branch1,n=e._branch2,o=e._teeState;return oe(e._reader).then((function(e){_(y(e));var i=e.value,a=e.done;if(_("boolean"==typeof a),!0===a&&!1===o.closedOrErrored&&(!1===o.canceled1&&se(t),!1===o.canceled2&&se(n),o.closedOrErrored=!0),!0!==o.closedOrErrored){var r=i,s=i;!1===o.canceled1&&le(t,r),!1===o.canceled2&&le(n,s)}}))};i._reader=n,i._teeState=o,i._cloneForBranch2=t;var a=function e(t){var n=e._stream,o=e._teeState;if(o.canceled1=!0,o.reason1=t,!0===o.canceled2){var i=j(n,f([o.reason1,o.reason2]));o._resolve(i)}return o.promise};a._stream=e,a._teeState=o;var r=function e(t){var n=e._stream,o=e._teeState;if(o.canceled2=!0,o.reason2=t,!0===o.canceled1){var i=j(n,f([o.reason1,o.reason2]));o._resolve(i)}return o.promise};r._stream=e,r._teeState=o;var s=Object.create(Object.prototype);m(s,"pull",i),m(s,"cancel",a);var l=new O(s),c=Object.create(Object.prototype);m(c,"pull",i),m(c,"cancel",r);var d=new O(c);return i._branch1=l._readableStreamController,i._branch2=d._readableStreamController,n._closedPromise.catch((function(e){!0!==o.closedOrErrored&&(ce(i._branch1,e),ce(i._branch2,e),o.closedOrErrored=!0)})),[l,d]}function U(e){return _(!0===J(e._reader)),_("readable"===e._state||"closed"===e._state),new Promise((function(t,n){var o={_resolve:t,_reject:n};e._reader._readIntoRequests.push(o)}))}function $(e){return _(!0===Z(e._reader)),_("readable"===e._state),new Promise((function(t,n){var o={_resolve:t,_reject:n};e._reader._readRequests.push(o)}))}function j(e,t){return e._disturbed=!0,"closed"===e._state?Promise.resolve(void 0):"errored"===e._state?Promise.reject(e._storedError):(K(e),e._readableStreamController.__cancelSteps(t).then((function(){})))}function K(e){_("readable"===e._state),e._state="closed";var t=e._reader;if(void 0!==t){if(!0===Z(t)){for(var n=0;n<t._readRequests.length;n++)(0,t._readRequests[n]._resolve)(s(void 0,!0));t._readRequests=[]}!function(e){_(void 0!==e._closedPromise_resolve),_(void 0!==e._closedPromise_reject),e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}(t)}}function V(e,t){_(!0===M(e),"stream must be ReadableStream"),_("readable"===e._state,"state must be readable"),e._state="errored",e._storedError=t;var n=e._reader;if(void 0!==n){if(!0===Z(n)){for(var o=0;o<n._readRequests.length;o++)n._readRequests[o]._reject(t);n._readRequests=[]}else{_(J(n),"reader must be ReadableStreamBYOBReader");for(var i=0;i<n._readIntoRequests.length;i++)n._readIntoRequests[i]._reject(t);n._readIntoRequests=[]}ke(n,t),n._closedPromise.catch((function(){}))}}function H(e,t,n){var o=e._reader;_(o._readRequests.length>0),o._readRequests.shift()._resolve(s(t,n))}function W(e){return e._reader._readIntoRequests.length}function z(e){return e._reader._readRequests.length}function q(e){var t=e._reader;return void 0!==t&&!1!==J(t)}function Y(e){var t=e._reader;return void 0!==t&&!1!==Z(t)}e.exports={ReadableStream:O,IsReadableStreamDisturbed:function(e){return _(!0===M(e),"IsReadableStreamDisturbed should only be used on known readable streams"),e._disturbed},ReadableStreamDefaultControllerClose:se,ReadableStreamDefaultControllerEnqueue:le,ReadableStreamDefaultControllerError:ce,ReadableStreamDefaultControllerGetDesiredSize:ue};var X=function(){function e(t){if(i(this,e),!1===M(t))throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===N(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ee(this,t),this._readRequests=[]}return o(e,[{key:"cancel",value:function(e){return!1===Z(this)?Promise.reject(Ie("cancel")):void 0===this._ownerReadableStream?Promise.reject(Le("cancel")):te(this,e)}},{key:"read",value:function(){return!1===Z(this)?Promise.reject(Ie("read")):void 0===this._ownerReadableStream?Promise.reject(Le("read from")):oe(this)}},{key:"releaseLock",value:function(){if(!1===Z(this))throw Ie("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ne(this)}}},{key:"closed",get:function(){return!1===Z(this)?Promise.reject(Ie("closed")):this._closedPromise}}]),e}(),Q=function(){function e(t){if(i(this,e),!M(t))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===he(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(N(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ee(this,t),this._readIntoRequests=[]}return o(e,[{key:"cancel",value:function(e){return J(this)?void 0===this._ownerReadableStream?Promise.reject(Le("cancel")):te(this,e):Promise.reject(Oe("cancel"))}},{key:"read",value:function(e){return J(this)?void 0===this._ownerReadableStream?Promise.reject(Le("read from")):ArrayBuffer.isView(e)?0===e.byteLength?Promise.reject(new TypeError("view must have non-zero byteLength")):function(e,t){var n=e._ownerReadableStream;return _(void 0!==n),n._disturbed=!0,"errored"===n._state?Promise.reject(n._storedError):function(e,t){var n=e._controlledReadableStream,o=1;t.constructor!==DataView&&(o=t.constructor.BYTES_PER_ELEMENT);var i=t.constructor,a={buffer:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:o,ctor:i,readerType:"byob"};if(e._pendingPullIntos.length>0)return a.buffer=u(a.buffer),e._pendingPullIntos.push(a),U(n);if("closed"===n._state){var r=new t.constructor(a.buffer,a.byteOffset,0);return Promise.resolve(s(r,!0))}if(e._queueTotalSize>0){if(!0===we(e,a)){var l=_e(a);return xe(e),Promise.resolve(s(l,!1))}if(!0===e._closeRequested){var c=new TypeError("Insufficient bytes to fill elements in the given buffer");return Ge(e,c),Promise.reject(c)}}a.buffer=u(a.buffer),e._pendingPullIntos.push(a);var d=U(n);return me(e),d}(n._readableStreamController,t)}(this,e):Promise.reject(new TypeError("view must be an array buffer view")):Promise.reject(Oe("read"))}},{key:"releaseLock",value:function(){if(!J(this))throw Oe("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ne(this)}}},{key:"closed",get:function(){return J(this)?this._closedPromise:Promise.reject(Oe("closed"))}}]),e}();function J(e){return!!y(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")}function Z(e){return!!y(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")}function ee(e,t){e._ownerReadableStream=t,t._reader=e,"readable"===t._state?function(e){e._closedPromise=new Promise((function(t,n){e._closedPromise_resolve=t,e._closedPromise_reject=n}))}(e):"closed"===t._state?function(e){e._closedPromise=Promise.resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}(e):(_("errored"===t._state,"state must be errored"),function(e,t){e._closedPromise=Promise.reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}(e,t._storedError),e._closedPromise.catch((function(){})))}function te(e,t){var n=e._ownerReadableStream;return _(void 0!==n),j(n,t)}function ne(e){_(void 0!==e._ownerReadableStream),_(e._ownerReadableStream._reader===e),"readable"===e._ownerReadableStream._state?ke(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(e,t){_(void 0===e._closedPromise_resolve),_(void 0===e._closedPromise_reject),e._closedPromise=Promise.reject(t)}(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._closedPromise.catch((function(){})),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function oe(e){var t=e._ownerReadableStream;return _(void 0!==t),t._disturbed=!0,"closed"===t._state?Promise.resolve(s(void 0,!0)):"errored"===t._state?Promise.reject(t._storedError):(_("readable"===t._state),t._readableStreamController.__pullSteps())}var ie=function(){function e(t,n,o,a){if(i(this,e),!1===M(t))throw new TypeError("ReadableStreamDefaultController can only be constructed with a ReadableStream instance");if(void 0!==t._readableStreamController)throw new TypeError("ReadableStreamDefaultController instances can only be created by the ReadableStream constructor");this._controlledReadableStream=t,this._underlyingSource=n,this._queue=void 0,this._queueTotalSize=void 0,S(this),this._started=!1,this._closeRequested=!1,this._pullAgain=!1,this._pulling=!1;var r=p(o,a);this._strategySize=r.size,this._strategyHWM=r.highWaterMark;var s=this,l=c(n,"start",[this]);Promise.resolve(l).then((function(){s._started=!0,_(!1===s._pulling),_(!1===s._pullAgain),re(s)}),(function(e){de(s,e)})).catch(b)}return o(e,[{key:"close",value:function(){if(!1===ae(this))throw Fe("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var e=this._controlledReadableStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be closed");se(this)}},{key:"enqueue",value:function(e){if(!1===ae(this))throw Fe("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var t=this._controlledReadableStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be enqueued to");return le(this,e)}},{key:"error",value:function(e){if(!1===ae(this))throw Fe("error");var t=this._controlledReadableStream;if("readable"!==t._state)throw new TypeError("The stream is "+t._state+" and so cannot be errored");ce(this,e)}},{key:"__cancelSteps",value:function(e){return S(this),d(this._underlyingSource,"cancel",[e])}},{key:"__pullSteps",value:function(){var e=this._controlledReadableStream;if(this._queue.length>0){var t=C(this);return!0===this._closeRequested&&0===this._queue.length?K(e):re(this),Promise.resolve(s(t,!1))}var n=$(e);return re(this),n}},{key:"desiredSize",get:function(){if(!1===ae(this))throw Fe("desiredSize");return ue(this)}}]),e}();function ae(e){return!!y(e)&&!!Object.prototype.hasOwnProperty.call(e,"_underlyingSource")}function re(e){!1!==function(e){var t=e._controlledReadableStream;return"closed"!==t._state&&"errored"!==t._state&&(!0!==e._closeRequested&&(!1!==e._started&&(!0===N(t)&&z(t)>0||ue(e)>0)))}(e)&&(!0!==e._pulling?(_(!1===e._pullAgain),e._pulling=!0,d(e._underlyingSource,"pull",[e]).then((function(){if(e._pulling=!1,!0===e._pullAgain)return e._pullAgain=!1,re(e)}),(function(t){de(e,t)})).catch(b)):e._pullAgain=!0)}function se(e){var t=e._controlledReadableStream;_(!1===e._closeRequested),_("readable"===t._state),e._closeRequested=!0,0===e._queue.length&&K(t)}function le(e,t){var n=e._controlledReadableStream;if(_(!1===e._closeRequested),_("readable"===n._state),!0===N(n)&&z(n)>0)H(n,t,!1);else{var o=1;if(void 0!==e._strategySize){var i=e._strategySize;try{o=i(t)}catch(t){throw de(e,t),t}}try{x(e,t,o)}catch(t){throw de(e,t),t}}re(e)}function ce(e,t){var n=e._controlledReadableStream;_("readable"===n._state),S(e),V(n,t)}function de(e,t){"readable"===e._controlledReadableStream._state&&ce(e,t)}function ue(e){var t=e._controlledReadableStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}var pe=function(){function e(t,n){i(this,e),this._associatedReadableByteStreamController=t,this._view=n}return o(e,[{key:"respond",value:function(e){if(!1===fe(this))throw Re("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");!function(e,t){if(t=Number(t),!1===l(t))throw new RangeError("bytesWritten must be a finite");_(e._pendingPullIntos.length>0),Ae(e,t)}(this._associatedReadableByteStreamController,e)}},{key:"respondWithNewView",value:function(e){if(!1===fe(this))throw Re("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");!function(e,t){_(e._pendingPullIntos.length>0);var n=e._pendingPullIntos[0];if(n.byteOffset+n.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(n.byteLength!==t.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");n.buffer=t.buffer,Ae(e,t.byteLength)}(this._associatedReadableByteStreamController,e)}},{key:"view",get:function(){return this._view}}]),e}(),ge=function(){function e(t,n,o){if(i(this,e),!1===M(t))throw new TypeError("ReadableByteStreamController can only be constructed with a ReadableStream instance given a byte source");if(void 0!==t._readableStreamController)throw new TypeError("ReadableByteStreamController instances can only be created by the ReadableStream constructor given a byte source");this._controlledReadableStream=t,this._underlyingByteSource=n,this._pullAgain=!1,this._pulling=!1,ye(this),this._queue=this._queueTotalSize=void 0,S(this),this._closeRequested=!1,this._started=!1,this._strategyHWM=g(o);var a=n.autoAllocateChunkSize;if(void 0!==a&&(!1===Number.isInteger(a)||a<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");this._autoAllocateChunkSize=a,this._pendingPullIntos=[];var r=this,s=c(n,"start",[this]);Promise.resolve(s).then((function(){r._started=!0,_(!1===r._pulling),_(!1===r._pullAgain),me(r)}),(function(e){"readable"===t._state&&Ge(r,e)})).catch(b)}return o(e,[{key:"close",value:function(){if(!1===he(this))throw Me("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var e=this._controlledReadableStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be closed");!function(e){var t=e._controlledReadableStream;if(_(!1===e._closeRequested),_("readable"===t._state),e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0&&e._pendingPullIntos[0].bytesFilled>0){var n=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Ge(e,n),n}K(t)}}(this)}},{key:"enqueue",value:function(e){if(!1===he(this))throw Me("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var t=this._controlledReadableStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(e))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");!function(e,t){var n=e._controlledReadableStream;_(!1===e._closeRequested),_("readable"===n._state);var o=t.buffer,i=t.byteOffset,a=t.byteLength,r=u(o);if(!0===Y(n))if(0===z(n))be(e,r,i,a);else{_(0===e._queue.length);var s=new Uint8Array(r,i,a);H(n,s,!1)}else!0===q(n)?(be(e,r,i,a),Ee(e)):(_(!1===N(n),"stream must not be locked"),be(e,r,i,a))}(this,e)}},{key:"error",value:function(e){if(!1===he(this))throw Me("error");var t=this._controlledReadableStream;if("readable"!==t._state)throw new TypeError("The stream is "+t._state+" and so cannot be errored");Ge(this,e)}},{key:"__cancelSteps",value:function(e){return this._pendingPullIntos.length>0&&(this._pendingPullIntos[0].bytesFilled=0),S(this),d(this._underlyingByteSource,"cancel",[e])}},{key:"__pullSteps",value:function(){var e=this._controlledReadableStream;if(_(!0===Y(e)),this._queueTotalSize>0){_(0===z(e));var t=this._queue.shift();this._queueTotalSize-=t.byteLength,xe(this);var n=void 0;try{n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}catch(e){return Promise.reject(e)}return Promise.resolve(s(n,!1))}var o=this._autoAllocateChunkSize;if(void 0!==o){var i=void 0;try{i=new ArrayBuffer(o)}catch(e){return Promise.reject(e)}var a={buffer:i,byteOffset:0,byteLength:o,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(a)}var r=$(e);return me(this),r}},{key:"byobRequest",get:function(){if(!1===he(this))throw Me("byobRequest");if(void 0===this._byobRequest&&this._pendingPullIntos.length>0){var e=this._pendingPullIntos[0],t=new Uint8Array(e.buffer,e.byteOffset+e.bytesFilled,e.byteLength-e.bytesFilled);this._byobRequest=new pe(this,t)}return this._byobRequest}},{key:"desiredSize",get:function(){if(!1===he(this))throw Me("desiredSize");return Pe(this)}}]),e}();function he(e){return!!y(e)&&!!Object.prototype.hasOwnProperty.call(e,"_underlyingByteSource")}function fe(e){return!!y(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")}function me(e){!1!==function(e){var t=e._controlledReadableStream;return"readable"===t._state&&(!0!==e._closeRequested&&(!1!==e._started&&(!0===Y(t)&&z(t)>0||(!0===q(t)&&W(t)>0||Pe(e)>0))))}(e)&&(!0!==e._pulling?(_(!1===e._pullAgain),e._pulling=!0,d(e._underlyingByteSource,"pull",[e]).then((function(){e._pulling=!1,!0===e._pullAgain&&(e._pullAgain=!1,me(e))}),(function(t){"readable"===e._controlledReadableStream._state&&Ge(e,t)})).catch(b)):e._pullAgain=!0)}function ye(e){Se(e),e._pendingPullIntos=[]}function ve(e,t){_("errored"!==e._state,"state must not be errored");var n=!1;"closed"===e._state&&(_(0===t.bytesFilled),n=!0);var o=_e(t);"default"===t.readerType?H(e,o,n):(_("byob"===t.readerType),function(e,t,n){var o=e._reader;_(o._readIntoRequests.length>0),o._readIntoRequests.shift()._resolve(s(t,n))}(e,o,n))}function _e(e){var t=e.bytesFilled,n=e.elementSize;return _(t<=e.byteLength),_(t%n==0),new e.ctor(e.buffer,e.byteOffset,t/n)}function be(e,t,n,o){e._queue.push({buffer:t,byteOffset:n,byteLength:o}),e._queueTotalSize+=o}function we(e,t){var n=t.elementSize,o=t.bytesFilled-t.bytesFilled%n,i=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),a=t.bytesFilled+i,s=a-a%n,l=i,c=!1;s>o&&(l=s-t.bytesFilled,c=!0);for(var d=e._queue;l>0;){var u=d[0],p=Math.min(l,u.byteLength),g=t.byteOffset+t.bytesFilled;r(t.buffer,g,u.buffer,u.byteOffset,p),u.byteLength===p?d.shift():(u.byteOffset+=p,u.byteLength-=p),e._queueTotalSize-=p,Ce(e,p,t),l-=p}return!1===c&&(_(0===e._queueTotalSize,"queue must be empty"),_(t.bytesFilled>0),_(t.bytesFilled<t.elementSize)),c}function Ce(e,t,n){_(0===e._pendingPullIntos.length||e._pendingPullIntos[0]===n),Se(e),n.bytesFilled+=t}function xe(e){_("readable"===e._controlledReadableStream._state),0===e._queueTotalSize&&!0===e._closeRequested?K(e._controlledReadableStream):me(e)}function Se(e){void 0!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=void 0,e._byobRequest=void 0)}function Ee(e){for(_(!1===e._closeRequested);e._pendingPullIntos.length>0;){if(0===e._queueTotalSize)return;var t=e._pendingPullIntos[0];!0===we(e,t)&&(Te(e),ve(e._controlledReadableStream,t))}}function Ae(e,t){var n=e._pendingPullIntos[0],o=e._controlledReadableStream;if("closed"===o._state){if(0!==t)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");!function(e,t){t.buffer=u(t.buffer),_(0===t.bytesFilled,"bytesFilled must be 0");var n=e._controlledReadableStream;if(!0===q(n))for(;W(n)>0;)ve(n,Te(e))}(e,n)}else _("readable"===o._state),function(e,t,n){if(n.bytesFilled+t>n.byteLength)throw new RangeError("bytesWritten out of range");if(Ce(e,t,n),!(n.bytesFilled<n.elementSize)){Te(e);var o=n.bytesFilled%n.elementSize;if(o>0){var i=n.byteOffset+n.bytesFilled,a=n.buffer.slice(i-o,i);be(e,a,0,a.byteLength)}n.buffer=u(n.buffer),n.bytesFilled-=o,ve(e._controlledReadableStream,n),Ee(e)}}(e,t,n)}function Te(e){var t=e._pendingPullIntos.shift();return Se(e),t}function Ge(e,t){var n=e._controlledReadableStream;_("readable"===n._state),ye(e),S(e),V(n,t)}function Pe(e){var t=e._controlledReadableStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function De(e){return new TypeError("ReadableStream.prototype."+e+" can only be used on a ReadableStream")}function Le(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Ie(e){return new TypeError("ReadableStreamDefaultReader.prototype."+e+" can only be used on a ReadableStreamDefaultReader")}function ke(e,t){_(void 0!==e._closedPromise_resolve),_(void 0!==e._closedPromise_reject),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}function Oe(e){return new TypeError("ReadableStreamBYOBReader.prototype."+e+" can only be used on a ReadableStreamBYOBReader")}function Fe(e){return new TypeError("ReadableStreamDefaultController.prototype."+e+" can only be used on a ReadableStreamDefaultController")}function Re(e){return new TypeError("ReadableStreamBYOBRequest.prototype."+e+" can only be used on a ReadableStreamBYOBRequest")}function Me(e){return new TypeError("ReadableByteStreamController.prototype."+e+" can only be used on a ReadableByteStreamController")}},function(e,t,n){var o=n(6),i=n(4),a=n(2);t.TransformStream=o.TransformStream,t.ReadableStream=i.ReadableStream,t.IsReadableStreamDisturbed=i.IsReadableStreamDisturbed,t.ReadableStreamDefaultControllerClose=i.ReadableStreamDefaultControllerClose,t.ReadableStreamDefaultControllerEnqueue=i.ReadableStreamDefaultControllerEnqueue,t.ReadableStreamDefaultControllerError=i.ReadableStreamDefaultControllerError,t.ReadableStreamDefaultControllerGetDesiredSize=i.ReadableStreamDefaultControllerGetDesiredSize,t.AcquireWritableStreamDefaultWriter=a.AcquireWritableStreamDefaultWriter,t.IsWritableStream=a.IsWritableStream,t.IsWritableStreamLocked=a.IsWritableStreamLocked,t.WritableStream=a.WritableStream,t.WritableStreamAbort=a.WritableStreamAbort,t.WritableStreamDefaultControllerError=a.WritableStreamDefaultControllerError,t.WritableStreamDefaultWriterCloseWithErrorPropagation=a.WritableStreamDefaultWriterCloseWithErrorPropagation,t.WritableStreamDefaultWriterRelease=a.WritableStreamDefaultWriterRelease,t.WritableStreamDefaultWriterWrite=a.WritableStreamDefaultWriterWrite},function(e,t,n){var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(1).assert,r=n(0),s=r.InvokeOrNoop,l=r.PromiseInvokeOrPerformFallback,c=r.PromiseInvokeOrNoop,d=r.typeIsObject,u=n(4),p=u.ReadableStream,g=u.ReadableStreamDefaultControllerClose,h=u.ReadableStreamDefaultControllerEnqueue,f=u.ReadableStreamDefaultControllerError,m=u.ReadableStreamDefaultControllerGetDesiredSize,y=n(2),v=y.WritableStream,_=y.WritableStreamDefaultControllerError;function b(e,t){if(!0===e._errored)throw new TypeError("TransformStream is already errored");if(!0===e._readableClosed)throw new TypeError("Readable side is already closed");var n=e._readableController;try{h(n,t)}catch(t){throw e._readableClosed=!0,C(e,t),e._storedError}!0==m(n)<=0&&!1===e._backpressure&&E(e,!0)}function w(e){a(!1===e._errored),a(!1===e._readableClosed);try{g(e._readableController)}catch(e){a(!1)}e._readableClosed=!0}function C(e,t){!1===e._errored&&x(e,t)}function x(e,t){a(!1===e._errored),e._errored=!0,e._storedError=t,!1===e._writableDone&&_(e._writableController,t),!1===e._readableClosed&&f(e._readableController,t)}function S(e){return a(void 0!==e._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),!1===e._backpressure?Promise.resolve():(a(!0===e._backpressure,"_backpressure should have been initialized"),e._backpressureChangePromise)}function E(e,t){a(e._backpressure!==t,"TransformStreamSetBackpressure() should be called only when backpressure is changed"),void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(t),e._backpressureChangePromise=new Promise((function(t){e._backpressureChangePromise_resolve=t})),e._backpressureChangePromise.then((function(e){a(e!==t,"_backpressureChangePromise should be fulfilled only when backpressure is changed")})),e._backpressure=t}function A(e,t){return b(t._controlledTransformStream,e),Promise.resolve()}function T(e){return!!d(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")}function G(e){return!!d(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")}var P=function(){function e(t,n){i(this,e),this._transformStream=t,this._startPromise=n}return o(e,[{key:"start",value:function(e){var t=this._transformStream;return t._writableController=e,this._startPromise.then((function(){return S(t)}))}},{key:"write",value:function(e){return function(e,t){a(!1===e._errored),a(!1===e._transforming),a(!1===e._backpressure),e._transforming=!0;var n=e._transformer,o=e._transformStreamController;return l(n,"transform",[t,o],A,[t,o]).then((function(){return e._transforming=!1,S(e)}),(function(t){return C(e,t),Promise.reject(t)}))}(this._transformStream,e)}},{key:"abort",value:function(){var e=this._transformStream;e._writableDone=!0,x(e,new TypeError("Writable side aborted"))}},{key:"close",value:function(){var e=this._transformStream;return a(!1===e._transforming),e._writableDone=!0,c(e._transformer,"flush",[e._transformStreamController]).then((function(){return!0===e._errored?Promise.reject(e._storedError):(!1===e._readableClosed&&w(e),Promise.resolve())})).catch((function(t){return C(e,t),Promise.reject(e._storedError)}))}}]),e}(),D=function(){function e(t,n){i(this,e),this._transformStream=t,this._startPromise=n}return o(e,[{key:"start",value:function(e){var t=this._transformStream;return t._readableController=e,this._startPromise.then((function(){return a(void 0!==t._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),!0===t._backpressure?Promise.resolve():(a(!1===t._backpressure,"_backpressure should have been initialized"),t._backpressureChangePromise)}))}},{key:"pull",value:function(){var e=this._transformStream;return a(!0===e._backpressure,"pull() should be never called while _backpressure is false"),a(void 0!==e._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),E(e,!1),e._backpressureChangePromise}},{key:"cancel",value:function(){var e=this._transformStream;e._readableClosed=!0,x(e,new TypeError("Readable side canceled"))}}]),e}(),L=function(){function e(t){if(i(this,e),!1===G(t))throw new TypeError("TransformStreamDefaultController can only be constructed with a TransformStream instance");if(void 0!==t._transformStreamController)throw new TypeError("TransformStreamDefaultController instances can only be created by the TransformStream constructor");this._controlledTransformStream=t}return o(e,[{key:"enqueue",value:function(e){if(!1===T(this))throw k("enqueue");b(this._controlledTransformStream,e)}},{key:"close",value:function(){if(!1===T(this))throw k("close");!function(e){if(!0===e._errored)throw new TypeError("TransformStream is already errored");if(!0===e._readableClosed)throw new TypeError("Readable side is already closed");w(e)}(this._controlledTransformStream)}},{key:"error",value:function(e){if(!1===T(this))throw k("error");!function(e,t){if(!0===e._errored)throw new TypeError("TransformStream is already errored");x(e,t)}(this._controlledTransformStream,e)}},{key:"desiredSize",get:function(){if(!1===T(this))throw k("desiredSize");var e=this._controlledTransformStream._readableController;return m(e)}}]),e}(),I=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this._transformer=t;var n=t.readableStrategy,o=t.writableStrategy;this._transforming=!1,this._errored=!1,this._storedError=void 0,this._writableController=void 0,this._readableController=void 0,this._transformStreamController=void 0,this._writableDone=!1,this._readableClosed=!1,this._backpressure=void 0,this._backpressureChangePromise=void 0,this._backpressureChangePromise_resolve=void 0,this._transformStreamController=new L(this);var r=void 0,l=new Promise((function(e){r=e})),c=new D(this,l);this._readable=new p(c,n);var d=new P(this,l);this._writable=new v(d,o),a(void 0!==this._writableController),a(void 0!==this._readableController);var u=m(this._readableController);E(this,u<=0);var g=this,h=s(t,"start",[g._transformStreamController]);r(h),l.catch((function(e){!1===g._errored&&(g._errored=!0,g._storedError=e)}))}return o(e,[{key:"readable",get:function(){if(!1===G(this))throw O("readable");return this._readable}},{key:"writable",get:function(){if(!1===G(this))throw O("writable");return this._writable}}]),e}();function k(e){return new TypeError("TransformStreamDefaultController.prototype."+e+" can only be used on a TransformStreamDefaultController")}function O(e){return new TypeError("TransformStream.prototype."+e+" can only be used on a TransformStream")}e.exports={TransformStream:I}},function(e,t,n){e.exports=n(5)}]))},function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=!1;try{if("function"==typeof URL&&"object"===o(URL.prototype)&&"origin"in URL.prototype){var a=new URL("b","http://a");a.pathname="c%20d",i="http://a/c%20d"===a.href}}catch(e){}if(i)t.URL=URL;else{var r=n(145).URL,s=n(3).URL;s&&(r.createObjectURL=function(e){return s.createObjectURL.apply(s,arguments)},r.revokeObjectURL=function(e){s.revokeObjectURL(e)}),t.URL=r}},function(e,t,n){"use strict";!function(){var e=Object.create(null);e.ftp=21,e.file=0,e.gopher=70,e.http=80,e.https=443,e.ws=80,e.wss=443;var n=Object.create(null);function o(t){return void 0!==e[t]}function i(){p.call(this),this._isInvalid=!0}function a(e){return""===e&&i.call(this),e.toLowerCase()}function r(e){var t=e.charCodeAt(0);return t>32&&t<127&&-1===[34,35,60,62,63,96].indexOf(t)?e:encodeURIComponent(e)}function s(e){var t=e.charCodeAt(0);return t>32&&t<127&&-1===[34,35,60,62,96].indexOf(t)?e:encodeURIComponent(e)}n["%2e"]=".",n[".%2e"]="..",n["%2e."]="..",n["%2e%2e"]="..";var l,c=/[a-zA-Z]/,d=/[a-zA-Z0-9\+\-\.]/;function u(t,u,p){function g(e){_.push(e)}var h=u||"scheme start",f=0,m="",y=!1,v=!1,_=[];e:for(;(t[f-1]!==l||0===f)&&!this._isInvalid;){var b=t[f];switch(h){case"scheme start":if(!b||!c.test(b)){if(u){g("Invalid scheme.");break e}m="",h="no scheme";continue}m+=b.toLowerCase(),h="scheme";break;case"scheme":if(b&&d.test(b))m+=b.toLowerCase();else{if(":"!==b){if(u){if(b===l)break e;g("Code point not allowed in scheme: "+b);break e}m="",f=0,h="no scheme";continue}if(this._scheme=m,m="",u)break e;o(this._scheme)&&(this._isRelative=!0),h="file"===this._scheme?"relative":this._isRelative&&p&&p._scheme===this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"===b?(this._query="?",h="query"):"#"===b?(this._fragment="#",h="fragment"):b!==l&&"\t"!==b&&"\n"!==b&&"\r"!==b&&(this._schemeData+=r(b));break;case"no scheme":if(p&&o(p._scheme)){h="relative";continue}g("Missing scheme."),i.call(this);break;case"relative or authority":if("/"!==b||"/"!==t[f+1]){g("Expected /, got: "+b),h="relative";continue}h="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!==this._scheme&&(this._scheme=p._scheme),b===l){this._host=p._host,this._port=p._port,this._path=p._path.slice(),this._query=p._query,this._username=p._username,this._password=p._password;break e}if("/"===b||"\\"===b)"\\"===b&&g("\\ is an invalid code point."),h="relative slash";else if("?"===b)this._host=p._host,this._port=p._port,this._path=p._path.slice(),this._query="?",this._username=p._username,this._password=p._password,h="query";else{if("#"!==b){var w=t[f+1],C=t[f+2];("file"!==this._scheme||!c.test(b)||":"!==w&&"|"!==w||C!==l&&"/"!==C&&"\\"!==C&&"?"!==C&&"#"!==C)&&(this._host=p._host,this._port=p._port,this._username=p._username,this._password=p._password,this._path=p._path.slice(),this._path.pop()),h="relative path";continue}this._host=p._host,this._port=p._port,this._path=p._path.slice(),this._query=p._query,this._fragment="#",this._username=p._username,this._password=p._password,h="fragment"}break;case"relative slash":if("/"!==b&&"\\"!==b){"file"!==this._scheme&&(this._host=p._host,this._port=p._port,this._username=p._username,this._password=p._password),h="relative path";continue}"\\"===b&&g("\\ is an invalid code point."),h="file"===this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!==b){g("Expected '/', got: "+b),h="authority ignore slashes";continue}h="authority second slash";break;case"authority second slash":if(h="authority ignore slashes","/"!==b){g("Expected '/', got: "+b);continue}break;case"authority ignore slashes":if("/"!==b&&"\\"!==b){h="authority";continue}g("Expected authority, got: "+b);break;case"authority":if("@"===b){y&&(g("@ already seen."),m+="%40"),y=!0;for(var x=0;x<m.length;x++){var S=m[x];if("\t"!==S&&"\n"!==S&&"\r"!==S)if(":"!==S||null!==this._password){var E=r(S);null!==this._password?this._password+=E:this._username+=E}else this._password="";else g("Invalid whitespace in authority.")}m=""}else{if(b===l||"/"===b||"\\"===b||"?"===b||"#"===b){f-=m.length,m="",h="host";continue}m+=b}break;case"file host":if(b===l||"/"===b||"\\"===b||"?"===b||"#"===b){2!==m.length||!c.test(m[0])||":"!==m[1]&&"|"!==m[1]?(0===m.length||(this._host=a.call(this,m),m=""),h="relative path start"):h="relative path";continue}"\t"===b||"\n"===b||"\r"===b?g("Invalid whitespace in file host."):m+=b;break;case"host":case"hostname":if(":"!==b||v){if(b===l||"/"===b||"\\"===b||"?"===b||"#"===b){if(this._host=a.call(this,m),m="",h="relative path start",u)break e;continue}"\t"!==b&&"\n"!==b&&"\r"!==b?("["===b?v=!0:"]"===b&&(v=!1),m+=b):g("Invalid code point in host/hostname: "+b)}else if(this._host=a.call(this,m),m="",h="port","hostname"===u)break e;break;case"port":if(/[0-9]/.test(b))m+=b;else{if(b===l||"/"===b||"\\"===b||"?"===b||"#"===b||u){if(""!==m){var A=parseInt(m,10);A!==e[this._scheme]&&(this._port=A+""),m=""}if(u)break e;h="relative path start";continue}"\t"===b||"\n"===b||"\r"===b?g("Invalid code point in port: "+b):i.call(this)}break;case"relative path start":if("\\"===b&&g("'\\' not allowed in path."),h="relative path","/"!==b&&"\\"!==b)continue;break;case"relative path":var T;b!==l&&"/"!==b&&"\\"!==b&&(u||"?"!==b&&"#"!==b)?"\t"!==b&&"\n"!==b&&"\r"!==b&&(m+=r(b)):("\\"===b&&g("\\ not allowed in relative path."),(T=n[m.toLowerCase()])&&(m=T),".."===m?(this._path.pop(),"/"!==b&&"\\"!==b&&this._path.push("")):"."===m&&"/"!==b&&"\\"!==b?this._path.push(""):"."!==m&&("file"===this._scheme&&0===this._path.length&&2===m.length&&c.test(m[0])&&"|"===m[1]&&(m=m[0]+":"),this._path.push(m)),m="","?"===b?(this._query="?",h="query"):"#"===b&&(this._fragment="#",h="fragment"));break;case"query":u||"#"!==b?b!==l&&"\t"!==b&&"\n"!==b&&"\r"!==b&&(this._query+=s(b)):(this._fragment="#",h="fragment");break;case"fragment":b!==l&&"\t"!==b&&"\n"!==b&&"\r"!==b&&(this._fragment+=b)}f++}}function p(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function g(e,t){void 0===t||t instanceof g||(t=new g(String(t))),this._url=e,p.call(this);var n=e.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");u.call(this,n,null,t)}g.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var e="";return""===this._username&&null===this._password||(e=this._username+(null!==this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+e+this.host:"")+this.pathname+this._query+this._fragment},set href(e){p.call(this),u.call(this,e)},get protocol(){return this._scheme+":"},set protocol(e){this._isInvalid||u.call(this,e+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(e){!this._isInvalid&&this._isRelative&&u.call(this,e,"host")},get hostname(){return this._host},set hostname(e){!this._isInvalid&&this._isRelative&&u.call(this,e,"hostname")},get port(){return this._port},set port(e){!this._isInvalid&&this._isRelative&&u.call(this,e,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(e){!this._isInvalid&&this._isRelative&&(this._path=[],u.call(this,e,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"===this._query?"":this._query},set search(e){!this._isInvalid&&this._isRelative&&(this._query="?","?"===e[0]&&(e=e.slice(1)),u.call(this,e,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"===this._fragment?"":this._fragment},set hash(e){this._isInvalid||(this._fragment="#","#"===e[0]&&(e=e.slice(1)),u.call(this,e,"fragment"))},get origin(){var e;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null";case"blob":try{return new g(this._schemeData).origin||"null"}catch(e){}return"null"}return(e=this.host)?this._scheme+"://"+e:""}},t.URL=g}()},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDocument=function(e){var t,n=new I;if("string"==typeof e)t={url:e};else if((0,a.isArrayBuffer)(e))t={data:e};else if(e instanceof k)t={range:e};else{if("object"!==x(e))throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");t=e}var o=Object.create(null),i=null,s=null;for(var c in t)if("url"!==c||"undefined"==typeof window)if("range"!==c)if("worker"!==c)if("data"!==c||t[c]instanceof Uint8Array)o[c]=t[c];else{var d=t[c];if("string"==typeof d)o[c]=(0,a.stringToBytes)(d);else if("object"!==x(d)||null===d||isNaN(d.length)){if(!(0,a.isArrayBuffer)(d))throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");o[c]=new Uint8Array(d)}else o[c]=new Uint8Array(d)}else s=t[c];else i=t[c];else o[c]=new a.URL(t[c],window.location).href;o.rangeChunkSize=o.rangeChunkSize||65536,o.CMapReaderFactory=o.CMapReaderFactory||r.DOMCMapReaderFactory,o.ignoreErrors=!0!==o.stopAtErrors,o.pdfBug=!0===o.pdfBug;var g=Object.values(a.NativeImageDecoding);if(void 0!==o.nativeImageDecoderSupport&&g.includes(o.nativeImageDecoderSupport)||(o.nativeImageDecoderSupport=l.apiCompatibilityParams.nativeImageDecoderSupport||a.NativeImageDecoding.DECODE),Number.isInteger(o.maxImageSize)||(o.maxImageSize=-1),"boolean"!=typeof o.isEvalSupported&&(o.isEvalSupported=!0),"boolean"!=typeof o.disableFontFace&&(o.disableFontFace=l.apiCompatibilityParams.disableFontFace||!1),"boolean"!=typeof o.disableRange&&(o.disableRange=!1),"boolean"!=typeof o.disableStream&&(o.disableStream=!1),"boolean"!=typeof o.disableAutoFetch&&(o.disableAutoFetch=!1),"boolean"!=typeof o.disableCreateObjectURL&&(o.disableCreateObjectURL=l.apiCompatibilityParams.disableCreateObjectURL||!1),(0,a.setVerbosityLevel)(o.verbosity),!s){var f={postMessageTransfers:o.postMessageTransfers,verbosity:o.verbosity,port:u.GlobalWorkerOptions.workerPort};s=f.port?M.fromPort(f):new M(f),n._worker=s}var m=n.docId;return s.promise.then((function(){if(n.destroyed)throw new Error("Loading aborted");return function(e,t,n,o){return e.destroyed?Promise.reject(new Error("Worker was destroyed")):(n&&(t.length=n.length,t.initialData=n.initialData),e.messageHandler.sendWithPromise("GetDocRequest",{docId:o,apiVersion:"2.1.286",source:{data:t.data,url:t.url,password:t.password,disableAutoFetch:t.disableAutoFetch,rangeChunkSize:t.rangeChunkSize,length:t.length},maxImageSize:t.maxImageSize,disableFontFace:t.disableFontFace,disableCreateObjectURL:t.disableCreateObjectURL,postMessageTransfers:e.postMessageTransfers,docBaseUrl:t.docBaseUrl,nativeImageDecoderSupport:t.nativeImageDecoderSupport,ignoreErrors:t.ignoreErrors,isEvalSupported:t.isEvalSupported,disableCMYKToRGB:t.disableCMYKToRGB}).then((function(t){if(e.destroyed)throw new Error("Worker was destroyed");return t})))}(s,o,i,m).then((function(e){if(n.destroyed)throw new Error("Loading aborted");var t;i?t=new h.PDFDataTransportStream({length:o.length,initialData:o.initialData,disableRange:o.disableRange,disableStream:o.disableStream},i):o.data||(t=G({url:o.url,length:o.length,httpHeaders:o.httpHeaders,withCredentials:o.withCredentials,rangeChunkSize:o.rangeChunkSize,disableRange:o.disableRange,disableStream:o.disableStream}));var a=new p.MessageHandler(m,e,s.port);a.postMessageTransfers=s.postMessageTransfers;var r=new B(a,n,t,o);n._transport=r,a.send("Ready",null)}))})).catch(n._capability.reject),n},t.setPDFNetworkStreamFactory=function(e){G=e},t.build=t.version=t.PDFPageProxy=t.PDFDocumentProxy=t.PDFWorker=t.PDFDataRangeTransport=t.LoopbackPort=void 0;var i=m(o(147)),a=o(1),r=o(151),s=o(152),l=o(153),c=o(154),d=m(o(3)),u=o(156),p=o(157),g=o(158),h=o(160),f=o(161);function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n,o,i,a,r){try{var s=e[a](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,i)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),e}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S,E,A=!1,T=!1;"undefined"==typeof window?(A=!0,T=!0):T=!0,"undefined"!=typeof requirejs&&requirejs.toUrl&&(S=requirejs.toUrl("pdfjs-dist/build/pdf.worker.js"));var G,P="undefined"!=typeof requirejs&&requirejs.load;if(E=T?function(){return new Promise((function(e,t){n.e(13).then(function(){try{var o;o=n(1168),e(o.WorkerMessageHandler)}catch(e){t(e)}}.bind(null,n)).catch(t)}))}:P?function(){return new Promise((function(e,t){requirejs(["pdfjs-dist/build/pdf.worker"],(function(n){try{e(n.WorkerMessageHandler)}catch(e){t(e)}}),t)}))}:null,!S&&"object"===("undefined"==typeof document?"undefined":x(document))&&"currentScript"in document){var D=document.currentScript&&document.currentScript.src;D&&(S=D.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}var L,I=(L=0,function(){function e(){b(this,e),this._capability=(0,a.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+L++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}return C(e,[{key:"destroy",value:function(){var e=this;return this.destroyed=!0,(this._transport?this._transport.destroy():Promise.resolve()).then((function(){e._transport=null,e._worker&&(e._worker.destroy(),e._worker=null)}))}},{key:"then",value:function(e,t){return(0,a.deprecated)("PDFDocumentLoadingTask.then method, use the `promise` getter instead."),this.promise.then.apply(this.promise,arguments)}},{key:"promise",get:function(){return this._capability.promise}}]),e}()),k=function(){function e(t,n){b(this,e),this.length=t,this.initialData=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._readyCapability=(0,a.createPromiseCapability)()}return C(e,[{key:"addRangeListener",value:function(e){this._rangeListeners.push(e)}},{key:"addProgressListener",value:function(e){this._progressListeners.push(e)}},{key:"addProgressiveReadListener",value:function(e){this._progressiveReadListeners.push(e)}},{key:"onDataRange",value:function(e,t){var n=!0,o=!1,i=void 0;try{for(var a,r=this._rangeListeners[Symbol.iterator]();!(n=(a=r.next()).done);n=!0)(0,a.value)(e,t)}catch(e){o=!0,i=e}finally{try{n||null==r.return||r.return()}finally{if(o)throw i}}}},{key:"onDataProgress",value:function(e){var t=this;this._readyCapability.promise.then((function(){var n=!0,o=!1,i=void 0;try{for(var a,r=t._progressListeners[Symbol.iterator]();!(n=(a=r.next()).done);n=!0)(0,a.value)(e)}catch(e){o=!0,i=e}finally{try{n||null==r.return||r.return()}finally{if(o)throw i}}}))}},{key:"onDataProgressiveRead",value:function(e){var t=this;this._readyCapability.promise.then((function(){var n=!0,o=!1,i=void 0;try{for(var a,r=t._progressiveReadListeners[Symbol.iterator]();!(n=(a=r.next()).done);n=!0)(0,a.value)(e)}catch(e){o=!0,i=e}finally{try{n||null==r.return||r.return()}finally{if(o)throw i}}}))}},{key:"transportReady",value:function(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function(e,t){(0,a.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function(){}}]),e}();t.PDFDataRangeTransport=k;var O=function(){function e(t,n,o){b(this,e),this.loadingTask=o,this._pdfInfo=t,this._transport=n}return C(e,[{key:"getPage",value:function(e){return this._transport.getPage(e)}},{key:"getPageIndex",value:function(e){return this._transport.getPageIndex(e)}},{key:"getDestinations",value:function(){return this._transport.getDestinations()}},{key:"getDestination",value:function(e){return this._transport.getDestination(e)}},{key:"getPageLabels",value:function(){return this._transport.getPageLabels()}},{key:"getPageMode",value:function(){return this._transport.getPageMode()}},{key:"getOpenActionDestination",value:function(){return this._transport.getOpenActionDestination()}},{key:"getAttachments",value:function(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function(){return this._transport.getJavaScript()}},{key:"getOutline",value:function(){return this._transport.getOutline()}},{key:"getPermissions",value:function(){return this._transport.getPermissions()}},{key:"getMetadata",value:function(){return this._transport.getMetadata()}},{key:"getData",value:function(){return this._transport.getData()}},{key:"getDownloadInfo",value:function(){return this._transport.downloadInfoCapability.promise}},{key:"getStats",value:function(){return this._transport.getStats()}},{key:"cleanup",value:function(){this._transport.startCleanup()}},{key:"destroy",value:function(){return this.loadingTask.destroy()}},{key:"numPages",get:function(){return this._pdfInfo.numPages}},{key:"fingerprint",get:function(){return this._pdfInfo.fingerprint}},{key:"loadingParams",get:function(){return this._transport.loadingParams}}]),e}();t.PDFDocumentProxy=O;var F=function(){function e(t,n,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];b(this,e),this.pageIndex=t,this._pageInfo=n,this._transport=o,this._stats=i?new r.StatTimer:r.DummyStatTimer,this._pdfBug=i,this.commonObjs=o.commonObjs,this.objs=new U,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this.intentStates=Object.create(null),this.destroyed=!1}return C(e,[{key:"getViewport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scale,n=e.rotation,o=void 0===n?this.rotate:n,i=e.dontFlip,s=void 0!==i&&i;return(arguments.length>1||"number"==typeof arguments[0])&&((0,a.deprecated)("getViewport is called with obsolete arguments."),t=arguments[0],o="number"==typeof arguments[1]?arguments[1]:this.rotate,s="boolean"==typeof arguments[2]&&arguments[2]),new r.PageViewport({viewBox:this.view,scale:t,rotation:o,dontFlip:s})}},{key:"getAnnotations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.intent,n=void 0===t?null:t;return this.annotationsPromise&&this.annotationsIntent===n||(this.annotationsPromise=this._transport.getAnnotations(this.pageIndex,n),this.annotationsIntent=n),this.annotationsPromise}},{key:"render",value:function(e){var t=this,n=e.canvasContext,o=e.viewport,i=e.intent,s=void 0===i?"display":i,l=e.enableWebGL,c=void 0!==l&&l,d=e.renderInteractiveForms,u=void 0!==d&&d,p=e.transform,g=void 0===p?null:p,h=e.imageLayer,m=void 0===h?null:h,y=e.canvasFactory,v=void 0===y?null:y,_=e.background,b=void 0===_?null:_,w=e.canvasGraphicsClass,C=void 0===w?null:w,x=e.progress,S=void 0===x?null:x,E=this._stats;E.time("Overall"),this.pendingCleanup=!1;var A="print"===s?"print":"display",T=v||new r.DOMCanvasFactory,G=new f.WebGLContext({enable:c});this.intentStates[A]||(this.intentStates[A]=Object.create(null));var P=this.intentStates[A];P.displayReadyCapability||(P.receivingOperatorList=!0,P.displayReadyCapability=(0,a.createPromiseCapability)(),P.operatorList={fnArray:[],argsArray:[],lastChunk:!1},E.time("Page Request"),this._transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageNumber-1,intent:A,renderInteractiveForms:!0===u}));var D=function(e){var n=P.renderTasks.indexOf(L);n>=0&&P.renderTasks.splice(n,1),t.cleanupAfterRender&&(t.pendingCleanup=!0),t._tryCleanup(),e?L.capability.reject(e):L.capability.resolve(),E.timeEnd("Rendering"),E.timeEnd("Overall")},L=new j({callback:D,params:{canvasContext:n,viewport:o,transform:g,imageLayer:m,background:b,progress:S},objs:this.objs,commonObjs:this.commonObjs,operatorList:P.operatorList,pageNumber:this.pageNumber,canvasFactory:T,canvasGraphicsClass:C,webGLContext:G,useRequestAnimationFrame:"print"!==A,pdfBug:this._pdfBug});P.renderTasks||(P.renderTasks=[]),P.renderTasks.push(L);var I=L.task;return P.displayReadyCapability.promise.then((function(e){t.pendingCleanup?D():(E.time("Rendering"),L.initializeGraphics(e),L.operatorListChanged())})).catch(D),I}},{key:"getOperatorList",value:function(){this.intentStates.oplist||(this.intentStates.oplist=Object.create(null));var e,t=this.intentStates.oplist;return t.opListReadCapability||((e={}).operatorListChanged=function(){if(t.operatorList.lastChunk){t.opListReadCapability.resolve(t.operatorList);var n=t.renderTasks.indexOf(e);n>=0&&t.renderTasks.splice(n,1)}},t.receivingOperatorList=!0,t.opListReadCapability=(0,a.createPromiseCapability)(),t.renderTasks=[],t.renderTasks.push(e),t.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats.time("Page Request"),this._transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageIndex,intent:"oplist"})),t.opListReadCapability.promise}},{key:"streamTextContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.normalizeWhitespace,n=void 0!==t&&t,o=e.disableCombineTextItems,i=void 0!==o&&o,a=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this.pageNumber-1,normalizeWhitespace:!0===n,combineTextItems:!0!==i},{highWaterMark:a,size:function(e){return e.items.length}})}},{key:"getTextContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.streamTextContent(e);return new Promise((function(e,n){var o=t.getReader(),i={items:[],styles:Object.create(null)};!function t(){o.read().then((function(n){var o,a=n.value;n.done?e(i):(Object.assign(i.styles,a.styles),(o=i.items).push.apply(o,_(a.items)),t())}),n)}()}))}},{key:"_destroy",value:function(){this.destroyed=!0,this._transport.pageCache[this.pageIndex]=null;var e=[];return Object.keys(this.intentStates).forEach((function(t){"oplist"!==t&&this.intentStates[t].renderTasks.forEach((function(t){var n=t.capability.promise.catch((function(){}));e.push(n),t.cancel()}))}),this),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(e)}},{key:"cleanup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pendingCleanup=!0,this._tryCleanup(e)}},{key:"_tryCleanup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pendingCleanup&&!Object.keys(this.intentStates).some((function(e){var t=this.intentStates[e];return 0!==t.renderTasks.length||t.receivingOperatorList}),this)&&(Object.keys(this.intentStates).forEach((function(e){delete this.intentStates[e]}),this),this.objs.clear(),this.annotationsPromise=null,e&&this._stats instanceof r.StatTimer&&(this._stats=new r.StatTimer),this.pendingCleanup=!1)}},{key:"_startRenderPage",value:function(e,t){var n=this.intentStates[t];n.displayReadyCapability&&n.displayReadyCapability.resolve(e)}},{key:"_renderPageChunk",value:function(e,t){for(var n=this.intentStates[t],o=0,i=e.length;o<i;o++)n.operatorList.fnArray.push(e.fnArray[o]),n.operatorList.argsArray.push(e.argsArray[o]);n.operatorList.lastChunk=e.lastChunk;for(var a=0;a<n.renderTasks.length;a++)n.renderTasks[a].operatorListChanged();e.lastChunk&&(n.receivingOperatorList=!1,this._tryCleanup())}},{key:"pageNumber",get:function(){return this.pageIndex+1}},{key:"rotate",get:function(){return this._pageInfo.rotate}},{key:"ref",get:function(){return this._pageInfo.ref}},{key:"userUnit",get:function(){return this._pageInfo.userUnit}},{key:"view",get:function(){return this._pageInfo.view}},{key:"stats",get:function(){return this._stats instanceof r.StatTimer?this._stats:null}}]),e}();t.PDFPageProxy=F;var R=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];b(this,e),this._listeners=[],this._defer=t,this._deferred=Promise.resolve(void 0)}return C(e,[{key:"postMessage",value:function(e,t){var n=this;if(this._defer){var o=new WeakMap,i={data:function e(n){if("object"!==x(n)||null===n)return n;if(o.has(n))return o.get(n);var i,r;if((i=n.buffer)&&(0,a.isArrayBuffer)(i)){var s=t&&t.includes(i);return r=n===i?n:s?new n.constructor(i,n.byteOffset,n.byteLength):new n.constructor(n),o.set(n,r),r}for(var l in r=Array.isArray(n)?[]:{},o.set(n,r),n){for(var c=void 0,d=n;!(c=Object.getOwnPropertyDescriptor(d,l));)d=Object.getPrototypeOf(d);void 0!==c.value&&"function"!=typeof c.value&&(r[l]=e(c.value))}return r}(e)};this._deferred.then((function(){n._listeners.forEach((function(e){e.call(this,i)}),n)}))}else this._listeners.forEach((function(t){t.call(this,{data:e})}),this)}},{key:"addEventListener",value:function(e,t){this._listeners.push(t)}},{key:"removeEventListener",value:function(e,t){var n=this._listeners.indexOf(t);this._listeners.splice(n,1)}},{key:"terminate",value:function(){this._listeners=[]}}]),e}();t.LoopbackPort=R;var M=function(){var e,t=new WeakMap,n=0;function o(){if(u.GlobalWorkerOptions.workerSrc)return u.GlobalWorkerOptions.workerSrc;if(void 0!==S)return S;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function i(){try{if("undefined"!=typeof window)return window.pdfjsWorker&&window.pdfjsWorker.WorkerMessageHandler}catch(e){}return null}return function(){function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.name,o=void 0===n?null:n,i=e.port,r=void 0===i?null:i,l=e.postMessageTransfers,c=void 0===l||l,d=e.verbosity,u=void 0===d?(0,a.getVerbosityLevel)():d;if(b(this,s),r&&t.has(r))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=o,this.destroyed=!1,this.postMessageTransfers=!1!==c,this.verbosity=u,this._readyCapability=(0,a.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,r)return t.set(r,this),void this._initializeFromPort(r);this._initialize()}return C(s,[{key:"_initializeFromPort",value:function(e){this._port=e,this._messageHandler=new p.MessageHandler("main","worker",e),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve()}},{key:"_initialize",value:function(){var e,t,n=this;if("undefined"!=typeof Worker&&!A&&!i()){var r=o();try{(0,a.isSameOrigin)(window.location.href,r)||(e=new a.URL(r,window.location).href,t="importScripts('"+e+"');",r=a.URL.createObjectURL(new Blob([t])));var s=new Worker(r),l=new p.MessageHandler("main","worker",s),c=function(){s.removeEventListener("error",d),l.destroy(),s.terminate(),n.destroyed?n._readyCapability.reject(new Error("Worker was destroyed")):n._setupFakeWorker()},d=function(){n._webWorker||c()};s.addEventListener("error",d),l.on("test",(function(e){s.removeEventListener("error",d),n.destroyed?c():e&&e.supportTypedArray?(n._messageHandler=l,n._port=s,n._webWorker=s,e.supportTransfers||(n.postMessageTransfers=!1),n._readyCapability.resolve(),l.send("configure",{verbosity:n.verbosity})):(n._setupFakeWorker(),l.destroy(),s.terminate())})),l.on("ready",(function(e){if(s.removeEventListener("error",d),n.destroyed)c();else try{u()}catch(e){n._setupFakeWorker()}}));var u=function(){var e=new Uint8Array([n.postMessageTransfers?255:0]);try{l.send("test",e,[e.buffer])}catch(t){(0,a.info)("Cannot use postMessage transfers"),e[0]=0,l.send("test",e)}};return void u()}catch(e){(0,a.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function(){var t=this;A||((0,a.warn)("Setting up fake worker."),A=!0),function(){if(e)return e.promise;e=(0,a.createPromiseCapability)();var t=i();return t?(e.resolve(t),e.promise):((E||function(){return(0,r.loadScript)(o()).then((function(){return window.pdfjsWorker.WorkerMessageHandler}))})().then(e.resolve,e.reject),e.promise)}().then((function(e){if(t.destroyed)t._readyCapability.reject(new Error("Worker was destroyed"));else{var o=new R;t._port=o;var i="fake"+n++,a=new p.MessageHandler(i+"_worker",i,o);e.setup(a,o);var r=new p.MessageHandler(i,i+"_worker",o);t._messageHandler=r,t._readyCapability.resolve()}})).catch((function(e){t._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))}))}},{key:"destroy",value:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}},{key:"promise",get:function(){return this._readyCapability.promise}},{key:"port",get:function(){return this._port}},{key:"messageHandler",get:function(){return this._messageHandler}}],[{key:"fromPort",value:function(e){if(!e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return t.has(e.port)?t.get(e.port):new s(e)}},{key:"getWorkerSrc",value:function(){return o()}}]),s}()}();t.PDFWorker=M;var N,B=function(){function e(t,n,o,i){b(this,e),this.messageHandler=t,this.loadingTask=n,this.commonObjs=new U,this.fontLoader=new s.FontLoader({docId:n.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this)}),this._params=i,this.CMapReaderFactory=new i.CMapReaderFactory({baseUrl:i.cMapUrl,isCompressed:i.cMapPacked}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=o,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,a.createPromiseCapability)(),this.setupMessageHandler()}return C(e,[{key:"destroy",value:function(){var e=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,a.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var t=[];this.pageCache.forEach((function(e){e&&t.push(e._destroy())})),this.pageCache=[],this.pagePromises=[];var n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then((function(){e.fontLoader.clear(),e._networkStream&&e._networkStream.cancelAllRequests(),e.messageHandler&&(e.messageHandler.destroy(),e.messageHandler=null),e.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function(){var e=this.messageHandler,t=this.loadingTask;e.on("GetReader",(function(e,t){var n=this;(0,a.assert)(this._networkStream),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=function(e){n._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=function(){n._fullReader.read().then((function(e){var n=e.value;e.done?t.close():((0,a.assert)((0,a.isArrayBuffer)(n)),t.enqueue(new Uint8Array(n),1,[n]))})).catch((function(e){t.error(e)}))},t.onCancel=function(e){n._fullReader.cancel(e)}}),this),e.on("ReaderHeadersReady",(function(e){var n=this,o=(0,a.createPromiseCapability)(),i=this._fullReader;return i.headersReady.then((function(){i.isStreamingSupported&&i.isRangeSupported||(n._lastProgress&&t.onProgress&&t.onProgress(n._lastProgress),i.onProgress=function(e){t.onProgress&&t.onProgress({loaded:e.loaded,total:e.total})}),o.resolve({isStreamingSupported:i.isStreamingSupported,isRangeSupported:i.isRangeSupported,contentLength:i.contentLength})}),o.reject),o.promise}),this),e.on("GetRangeReader",(function(e,t){(0,a.assert)(this._networkStream);var n=this._networkStream.getRangeReader(e.begin,e.end);t.onPull=function(){n.read().then((function(e){var n=e.value;e.done?t.close():((0,a.assert)((0,a.isArrayBuffer)(n)),t.enqueue(new Uint8Array(n),1,[n]))})).catch((function(e){t.error(e)}))},t.onCancel=function(e){n.cancel(e)}}),this),e.on("GetDoc",(function(e){var n=e.pdfInfo;this.numPages=n.numPages,this.pdfDocument=new O(n,this,t),t._capability.resolve(this.pdfDocument)}),this),e.on("PasswordRequest",(function(e){var n=this;if(this._passwordCapability=(0,a.createPromiseCapability)(),t.onPassword)try{t.onPassword((function(e){n._passwordCapability.resolve({password:e})}),e.code)}catch(e){this._passwordCapability.reject(e)}else this._passwordCapability.reject(new a.PasswordException(e.message,e.code));return this._passwordCapability.promise}),this),e.on("PasswordException",(function(e){t._capability.reject(new a.PasswordException(e.message,e.code))}),this),e.on("InvalidPDF",(function(e){t._capability.reject(new a.InvalidPDFException(e.message))}),this),e.on("MissingPDF",(function(e){t._capability.reject(new a.MissingPDFException(e.message))}),this),e.on("UnexpectedResponse",(function(e){t._capability.reject(new a.UnexpectedResponseException(e.message,e.status))}),this),e.on("UnknownError",(function(e){t._capability.reject(new a.UnknownErrorException(e.message,e.details))}),this),e.on("DataLoaded",(function(e){t.onProgress&&t.onProgress({loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),this),e.on("StartRenderPage",(function(e){if(!this.destroyed){var t=this.pageCache[e.pageIndex];t._stats.timeEnd("Page Request"),t._startRenderPage(e.transparency,e.intent)}}),this),e.on("RenderPageChunk",(function(e){this.destroyed||this.pageCache[e.pageIndex]._renderPageChunk(e.operatorList,e.intent)}),this),e.on("commonobj",(function(t){var n=this;if(!this.destroyed){var o=v(t,3),i=o[0],r=o[1],l=o[2];if(!this.commonObjs.has(i))switch(r){case"Font":var c=this._params;if("error"in l){var u=l.error;(0,a.warn)("Error during font loading: ".concat(u)),this.commonObjs.resolve(i,u);break}var p=null;c.pdfBug&&d.default.FontInspector&&d.default.FontInspector.enabled&&(p={registerFont:function(e,t){d.default.FontInspector.fontAdded(e,t)}});var g=new s.FontFaceObject(l,{isEvalSupported:c.isEvalSupported,disableFontFace:c.disableFontFace,ignoreErrors:c.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:p});this.fontLoader.bind(g).then((function(){n.commonObjs.resolve(i,g)}),(function(t){e.sendWithPromise("FontFallback",{id:i}).finally((function(){n.commonObjs.resolve(i,g)}))}));break;case"FontPath":this.commonObjs.resolve(i,l);break;default:throw new Error("Got unknown common object type ".concat(r))}}}),this),e.on("obj",(function(e){if(!this.destroyed){var t=v(e,4),n=t[0],o=t[1],i=t[2],a=t[3],r=this.pageCache[o];if(!r.objs.has(n))switch(i){case"JpegStream":return new Promise((function(e,t){var n=new Image;n.onload=function(){e(n)},n.onerror=function(){t(new Error("Error during JPEG image loading"))},n.src=a})).then((function(e){r.objs.resolve(n,e)}));case"Image":r.objs.resolve(n,a),a&&"data"in a&&a.data.length>8e6&&(r.cleanupAfterRender=!0);break;default:throw new Error("Got unknown object type ".concat(i))}}}),this),e.on("DocProgress",(function(e){this.destroyed||t.onProgress&&t.onProgress({loaded:e.loaded,total:e.total})}),this),e.on("PageError",(function(e){if(!this.destroyed){var t=this.pageCache[e.pageNum-1].intentStates[e.intent];if(!t.displayReadyCapability)throw new Error(e.error);if(t.displayReadyCapability.reject(e.error),t.operatorList){t.operatorList.lastChunk=!0;for(var n=0;n<t.renderTasks.length;n++)t.renderTasks[n].operatorListChanged()}}}),this),e.on("UnsupportedFeature",this._onUnsupportedFeature,this),e.on("JpegDecode",(function(e){if(this.destroyed)return Promise.reject(new Error("Worker was destroyed"));if("undefined"==typeof document)return Promise.reject(new Error('"document" is not defined.'));var t=v(e,2),n=t[0],o=t[1];return 3!==o&&1!==o?Promise.reject(new Error("Only 3 components or 1 component can be returned")):new Promise((function(e,t){var i=new Image;i.onload=function(){var t=i.width,n=i.height,a=t*n,r=4*a,s=new Uint8ClampedArray(a*o),l=document.createElement("canvas");l.width=t,l.height=n;var c=l.getContext("2d");c.drawImage(i,0,0);var d=c.getImageData(0,0,t,n).data;if(3===o)for(var u=0,p=0;u<r;u+=4,p+=3)s[p]=d[u],s[p+1]=d[u+1],s[p+2]=d[u+2];else if(1===o)for(var g=0,h=0;g<r;g+=4,h++)s[h]=d[g];e({data:s,width:t,height:n})},i.onerror=function(){t(new Error("JpegDecode failed to load image"))},i.src=n}))}),this),e.on("FetchBuiltInCMap",(function(e){return this.destroyed?Promise.reject(new Error("Worker was destroyed")):this.CMapReaderFactory.fetch({name:e.name})}),this)}},{key:"_onUnsupportedFeature",value:function(e){var t=e.featureId;this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(t)}},{key:"getData",value:function(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"getPage",value:function(e){var t=this;if(!Number.isInteger(e)||e<=0||e>this.numPages)return Promise.reject(new Error("Invalid page request"));var n=e-1;if(n in this.pagePromises)return this.pagePromises[n];var o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then((function(e){if(t.destroyed)throw new Error("Transport destroyed");var o=new F(n,e,t,t._params.pdfBug);return t.pageCache[n]=o,o}));return this.pagePromises[n]=o,o}},{key:"getPageIndex",value:function(e){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:e}).catch((function(e){return Promise.reject(new Error(e))}))}},{key:"getAnnotations",value:function(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}},{key:"getDestinations",value:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}},{key:"getPageLabels",value:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageMode",value:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getOpenActionDestination",value:function(){return this.messageHandler.sendWithPromise("getOpenActionDestination",null)}},{key:"getAttachments",value:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getOutline",value:function(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getPermissions",value:function(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function(){var e=this;return this.messageHandler.sendWithPromise("GetMetadata",null).then((function(t){return{info:t[0],metadata:t[1]?new g.Metadata(t[1]):null,contentDispositionFilename:e._fullReader?e._fullReader.filename:null}}))}},{key:"getStats",value:function(){return this.messageHandler.sendWithPromise("GetStats",null)}},{key:"startCleanup",value:function(){var e=this;this.messageHandler.sendWithPromise("Cleanup",null).then((function(){for(var t=0,n=e.pageCache.length;t<n;t++){var o=e.pageCache[t];o&&o.cleanup()}e.commonObjs.clear(),e.fontLoader.clear()}))}},{key:"loadingParams",get:function(){var e=this._params;return(0,a.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,disableCreateObjectURL:e.disableCreateObjectURL,disableFontFace:e.disableFontFace,nativeImageDecoderSupport:e.nativeImageDecoderSupport})}}]),e}(),U=function(){function e(){b(this,e),this._objs=Object.create(null)}return C(e,[{key:"_ensureObj",value:function(e){return this._objs[e]?this._objs[e]:this._objs[e]={capability:(0,a.createPromiseCapability)(),data:null,resolved:!1}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t)return this._ensureObj(e).capability.promise.then(t),null;var n=this._objs[e];if(!n||!n.resolved)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return n.data}},{key:"has",value:function(e){var t=this._objs[e];return!!t&&t.resolved}},{key:"resolve",value:function(e,t){var n=this._ensureObj(e);n.resolved=!0,n.data=t,n.capability.resolve(t)}},{key:"clear",value:function(){this._objs=Object.create(null)}}]),e}(),$=function(){function e(t){b(this,e),this._internalRenderTask=t,this.onContinue=null}return C(e,[{key:"cancel",value:function(){this._internalRenderTask.cancel()}},{key:"then",value:function(e,t){return(0,a.deprecated)("RenderTask.then method, use the `promise` getter instead."),this.promise.then.apply(this.promise,arguments)}},{key:"promise",get:function(){return this._internalRenderTask.capability.promise}}]),e}(),j=(N=new WeakSet,function(){function e(t){var n=t.callback,o=t.params,i=t.objs,r=t.commonObjs,s=t.operatorList,l=t.pageNumber,d=t.canvasFactory,u=t.canvasGraphicsClass,p=t.webGLContext,g=t.useRequestAnimationFrame,h=void 0!==g&&g,f=t.pdfBug,m=void 0!==f&&f;b(this,e),this.callback=n,this.params=o,this.objs=i,this.commonObjs=r,this.operatorListIdx=null,this.operatorList=s,this.pageNumber=l,this.canvasFactory=d,this.CanvasGraphics=u||c.CanvasGraphics,this.webGLContext=p,this._pdfBug=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===h&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,a.createPromiseCapability)(),this.task=new $(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=o.canvasContext.canvas}var t,n;return C(e,[{key:"initializeGraphics",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.cancelled){if(this._canvas){if(N.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");N.add(this._canvas)}this._pdfBug&&d.default.StepperManager&&d.default.StepperManager.enabled&&(this.stepper=d.default.StepperManager.create(this.pageNumber-1),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var t=this.params,n=t.canvasContext,o=t.viewport,i=t.transform,a=t.imageLayer,r=t.background;this.gfx=new this.CanvasGraphics(n,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,a),this.gfx.beginDrawing({transform:i,viewport:o,transparency:e,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}}},{key:"cancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&N.delete(this._canvas),this.callback(e||new r.RenderingCancelledException("Rendering cancelled, page ".concat(this.pageNumber),"canvas"))}},{key:"operatorListChanged",value:function(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function(){var e=this;this._useRequestAnimationFrame?window.requestAnimationFrame((function(){e._nextBound().catch(e.cancel.bind(e))})):Promise.resolve().then(this._nextBound).catch(this.cancel.bind(this))}},{key:"_next",value:(t=i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cancelled){e.next=2;break}return e.abrupt("return");case 2:try{this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this.params.progress),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&N.delete(this._canvas),this.callback()))}catch(e){this.capability.reject(e)}case 3:case"end":return e.stop()}}),e,this)})),n=function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function r(e){y(a,o,i,r,s,"next",e)}function s(e){y(a,o,i,r,s,"throw",e)}r(void 0)}))},function(){return n.apply(this,arguments)})}]),e}());t.version="2.1.286",t.build="7525e341"},function(e,t,n){"use strict";e.exports=n(148)},function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=function(){return this||"object"===("undefined"==typeof self?"undefined":o(self))&&self}()||Function("return this")(),a=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,r=a&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,e.exports=n(149),a)i.regeneratorRuntime=r;else try{delete i.regeneratorRuntime}catch(e){i.regeneratorRuntime=void 0}},function(e,t,n){"use strict";(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(n){var o=Object.prototype,i=o.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag",c="object"===t(e),d=n.regeneratorRuntime;if(d)c&&(e.exports=d);else{(d=n.regeneratorRuntime=c?e.exports:{}).wrap=m;var u={},p={};p[r]=function(){return this};var g=Object.getPrototypeOf,h=g&&g(g(T([])));h&&h!==o&&i.call(h,r)&&(p=h);var f=b.prototype=v.prototype=Object.create(p);_.prototype=f.constructor=b,b.constructor=_,b[l]=_.displayName="GeneratorFunction",d.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},d.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(f),e},d.awrap=function(e){return{__await:e}},w(C.prototype),C.prototype[s]=function(){return this},d.AsyncIterator=C,d.async=function(e,t,n,o){var i=new C(m(e,t,n,o));return d.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(f),f[l]="Generator",f[r]=function(){return this},f.toString=function(){return"[object Generator]"},d.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},d.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,o){return r.type="throw",r.arg=e,t.next=n,o&&(t.method="next",t.arg=void 0),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],r=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=e,r.arg=t,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}}}function m(e,t,n,o){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),r=new A(o||[]);return a._invoke=function(e,t,n){var o="suspendedStart";return function(i,a){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var r=n.delegate;if(r){var s=x(r,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var l=y(e,t,n);if("normal"===l.type){if(o=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o="completed",n.method="throw",n.arg=l.arg)}}}(e,n,r),a}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function v(){}function _(){}function b(){}function w(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function C(e){var n;this._invoke=function(o,a){function r(){return new Promise((function(n,r){!function n(o,a,r,s){var l=y(e[o],e,a);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"===t(d)&&i.call(d,"__await")?Promise.resolve(d.__await).then((function(e){n("next",e,r,s)}),(function(e){n("throw",e,r,s)})):Promise.resolve(d).then((function(e){c.value=e,r(c)}),(function(e){return n("throw",e,r,s)}))}s(l.arg)}(o,a,n,r)}))}return n=n?n.then(r,r):r()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var o=y(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,u;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:G}}function G(){return{value:void 0,done:!0}}}(function(){return this||"object"===("undefined"==typeof self?"undefined":t(self))&&self}()||Function("return this")())}).call(this,n(150)(e))},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLinkAttributes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.url,i=t.target,a=t.rel;if(e.href=e.title=n?(0,o.removeNullCharacters)(n):"",n){var r=Object.values(g),s=r.includes(i)?i:g.NONE;e.target=h[s],e.rel="string"==typeof a?a:"noopener noreferrer nofollow"}},t.getFilenameFromUrl=function(e){var t=e.indexOf("#"),n=e.indexOf("?"),o=Math.min(t>0?t:e.length,n>0?n:e.length);return e.substring(e.lastIndexOf("/",o)+1,o)},t.loadScript=function(e){return new Promise((function(t,n){var o=document.createElement("script");o.src=e,o.onload=t,o.onerror=function(){n(new Error("Cannot load script at: ".concat(o.src)))},(document.head||document.documentElement).appendChild(o)}))},t.DummyStatTimer=t.StatTimer=t.DOMSVGFactory=t.DOMCMapReaderFactory=t.DOMCanvasFactory=t.DEFAULT_LINK_REL=t.LinkTarget=t.RenderingCancelledException=t.PageViewport=void 0;var o=n(1);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}t.DEFAULT_LINK_REL="noopener noreferrer nofollow";var s="http://www.w3.org/2000/svg",l=function(){function e(){i(this,e)}return r(e,[{key:"create",value:function(e,t){if(e<=0||t<=0)throw new Error("invalid canvas size");var n=document.createElement("canvas"),o=n.getContext("2d");return n.width=e,n.height=t,{canvas:n,context:o}}},{key:"reset",value:function(e,t,n){if(!e.canvas)throw new Error("canvas is not specified");if(t<=0||n<=0)throw new Error("invalid canvas size");e.canvas.width=t,e.canvas.height=n}},{key:"destroy",value:function(e){if(!e.canvas)throw new Error("canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}}]),e}();t.DOMCanvasFactory=l;var c=function(){function e(t){var n=t.baseUrl,o=void 0===n?null:n,a=t.isCompressed,r=void 0!==a&&a;i(this,e),this.baseUrl=o,this.isCompressed=r}return r(e,[{key:"fetch",value:function(e){var t=this,n=e.name;return this.baseUrl?n?new Promise((function(e,i){var a=t.baseUrl+n+(t.isCompressed?".bcmap":""),r=new XMLHttpRequest;r.open("GET",a,!0),t.isCompressed&&(r.responseType="arraybuffer"),r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE){var n;if((200===r.status||0===r.status)&&(t.isCompressed&&r.response?n=new Uint8Array(r.response):!t.isCompressed&&r.responseText&&(n=(0,o.stringToBytes)(r.responseText)),n))return void e({cMapData:n,compressionType:t.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE});i(new Error("Unable to load "+(t.isCompressed?"binary ":"")+"CMap at: "+a))}},r.send(null)})):Promise.reject(new Error("CMap name must be specified.")):Promise.reject(new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.'))}}]),e}();t.DOMCMapReaderFactory=c;var d=function(){function e(){i(this,e)}return r(e,[{key:"create",value:function(e,t){(0,o.assert)(e>0&&t>0,"Invalid SVG dimensions");var n=document.createElementNS(s,"svg:svg");return n.setAttribute("version","1.1"),n.setAttribute("width",e+"px"),n.setAttribute("height",t+"px"),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox","0 0 "+e+" "+t),n}},{key:"createElement",value:function(e){return(0,o.assert)("string"==typeof e,"Invalid SVG element type"),document.createElementNS(s,e)}}]),e}();t.DOMSVGFactory=d;var u=function(){function e(t){var n=t.viewBox,o=t.scale,a=t.rotation,r=t.offsetX,s=void 0===r?0:r,l=t.offsetY,c=void 0===l?0:l,d=t.dontFlip,u=void 0!==d&&d;i(this,e),this.viewBox=n,this.scale=o,this.rotation=a,this.offsetX=s,this.offsetY=c;var p,g,h,f,m,y,v,_,b=(n[2]+n[0])/2,w=(n[3]+n[1])/2;switch(a=(a%=360)<0?a+360:a){case 180:p=-1,g=0,h=0,f=1;break;case 90:p=0,g=1,h=1,f=0;break;case 270:p=0,g=-1,h=-1,f=0;break;default:p=1,g=0,h=0,f=-1}u&&(h=-h,f=-f),0===p?(m=Math.abs(w-n[1])*o+s,y=Math.abs(b-n[0])*o+c,v=Math.abs(n[3]-n[1])*o,_=Math.abs(n[2]-n[0])*o):(m=Math.abs(b-n[0])*o+s,y=Math.abs(w-n[1])*o+c,v=Math.abs(n[2]-n[0])*o,_=Math.abs(n[3]-n[1])*o),this.transform=[p*o,g*o,h*o,f*o,m-p*o*b-h*o*w,y-g*o*b-f*o*w],this.width=v,this.height=_}return r(e,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.scale,o=void 0===n?this.scale:n,i=t.rotation,a=void 0===i?this.rotation:i,r=t.dontFlip,s=void 0!==r&&r;return new e({viewBox:this.viewBox.slice(),scale:o,rotation:a,offsetX:this.offsetX,offsetY:this.offsetY,dontFlip:s})}},{key:"convertToViewportPoint",value:function(e,t){return o.Util.applyTransform([e,t],this.transform)}},{key:"convertToViewportRectangle",value:function(e){var t=o.Util.applyTransform([e[0],e[1]],this.transform),n=o.Util.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}},{key:"convertToPdfPoint",value:function(e,t){return o.Util.applyInverseTransform([e,t],this.transform)}}]),e}();t.PageViewport=u;var p=function(){function e(e,t){this.message=e,this.type=t}return e.prototype=new Error,e.prototype.name="RenderingCancelledException",e.constructor=e,e}();t.RenderingCancelledException=p;var g={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};t.LinkTarget=g;var h=["","_self","_blank","_parent","_top"],f=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];i(this,e),this.enabled=!!t,this.started=Object.create(null),this.times=[]}return r(e,[{key:"time",value:function(e){this.enabled&&(e in this.started&&(0,o.warn)("Timer is already running for "+e),this.started[e]=Date.now())}},{key:"timeEnd",value:function(e){this.enabled&&(e in this.started||(0,o.warn)("Timer has not been started for "+e),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e])}},{key:"toString",value:function(){for(var e=this.times,t="",n=0,o=0,i=e.length;o<i;++o){var a=e[o].name;a.length>n&&(n=a.length)}for(var r=0,s=e.length;r<s;++r){var l=e[r],c=l.end-l.start;t+="".concat(l.name.padEnd(n)," ").concat(c,"ms\n")}return t}}]),e}();t.StatTimer=f;var m=function(){function e(){i(this,e),(0,o.unreachable)("Cannot initialize DummyStatTimer.")}return r(e,null,[{key:"time",value:function(e){}},{key:"timeEnd",value:function(e){}},{key:"toString",value:function(){return""}}]),e}();t.DummyStatTimer=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var o,i=(o=n(147))&&o.__esModule?o:{default:o},a=n(1);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n,o,i,a,r){try{var s=e[a](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,i)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}var h,f=function(){function e(t){var n=t.docId,o=t.onUnsupportedFeature;u(this,e),this.constructor===e&&(0,a.unreachable)("Cannot initialize BaseFontLoader."),this.docId=n,this._onUnsupportedFeature=o,this.nativeFontFaces=[],this.styleElement=null}var t,n;return g(e,[{key:"addNativeFontFace",value:function(e){this.nativeFontFaces.push(e),document.fonts.add(e)}},{key:"insertRule",value:function(e){var t=this.styleElement;t||((t=this.styleElement=document.createElement("style")).id="PDFJS_FONT_STYLE_TAG_".concat(this.docId),document.documentElement.getElementsByTagName("head")[0].appendChild(t));var n=t.sheet;n.insertRule(e,n.cssRules.length)}},{key:"clear",value:function(){this.nativeFontFaces.forEach((function(e){document.fonts.delete(e)})),this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"bind",value:(t=i.default.mark((function e(t){var n,o,r=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.attached&&!t.missingFile){e.next=2;break}return e.abrupt("return");case 2:if(t.attached=!0,!this.isFontLoadingAPISupported){e.next=19;break}if(!(n=t.createNativeFontFace())){e.next=18;break}return this.addNativeFontFace(n),e.prev=7,e.next=10,n.loaded;case 10:e.next=18;break;case 12:throw e.prev=12,e.t0=e.catch(7),this._onUnsupportedFeature({featureId:a.UNSUPPORTED_FEATURES.font}),(0,a.warn)("Failed to load font '".concat(n.family,"': '").concat(e.t0,"'.")),t.disableFontFace=!0,e.t0;case 18:return e.abrupt("return");case 19:if(!(o=t.createFontFaceRule())){e.next=25;break}if(this.insertRule(o),!this.isSyncFontLoadingSupported){e.next=24;break}return e.abrupt("return");case 24:return e.abrupt("return",new Promise((function(e){var n=r._queueLoadingCallback(e);r._prepareFontLoadEvent([o],[t],n)})));case 25:case"end":return e.stop()}}),e,this,[[7,12]])})),n=function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function r(e){d(a,o,i,r,s,"next",e)}function s(e){d(a,o,i,r,s,"throw",e)}r(void 0)}))},function(e){return n.apply(this,arguments)})},{key:"_queueLoadingCallback",value:function(e){(0,a.unreachable)("Abstract method `_queueLoadingCallback`.")}},{key:"_prepareFontLoadEvent",value:function(e,t,n){(0,a.unreachable)("Abstract method `_prepareFontLoadEvent`.")}},{key:"isFontLoadingAPISupported",get:function(){(0,a.unreachable)("Abstract method `isFontLoadingAPISupported`.")}},{key:"isSyncFontLoadingSupported",get:function(){(0,a.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}},{key:"_loadTestFont",get:function(){(0,a.unreachable)("Abstract method `_loadTestFont`.")}}]),e}();t.FontLoader=h,t.FontLoader=h=function(e){function t(e){var n;return u(this,t),(n=s(this,l(t).call(this,e))).loadingContext={requests:[],nextRequestId:0},n.loadTestFontId=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),g(t,[{key:"_queueLoadingCallback",value:function(e){var t=this.loadingContext,n={id:"pdfjs-font-loading-".concat(t.nextRequestId++),done:!1,complete:function(){for((0,a.assert)(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.requests.length>0&&t.requests[0].done;){var e=t.requests.shift();setTimeout(e.callback,0)}},callback:e};return t.requests.push(n),n}},{key:"_prepareFontLoadEvent",value:function(e,t,n){function o(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function i(e,t,n,o){return e.substring(0,t)+o+e.substring(t+n)}var r,s,l=document.createElement("canvas");l.width=1,l.height=1;var c=l.getContext("2d"),d=0,u="lt".concat(Date.now()).concat(this.loadTestFontId++),p=this._loadTestFont,g=o(p=i(p,976,u.length,u),16);for(r=0,s=u.length-3;r<s;r+=4)g=g-1482184792+o(u,r)|0;r<u.length&&(g=g-1482184792+o(u+"XXX",r)|0),p=i(p,16,4,(0,a.string32)(g));var h="url(data:font/opentype;base64,".concat(btoa(p),");"),f='@font-face {font-family:"'.concat(u,'";src:').concat(h,"}");this.insertRule(f);var m=[];for(r=0,s=t.length;r<s;r++)m.push(t[r].loadedName);m.push(u);var y=document.createElement("div");for(y.setAttribute("style","visibility: hidden;width: 10px; height: 10px;position: absolute; top: 0px; left: 0px;"),r=0,s=m.length;r<s;++r){var v=document.createElement("span");v.textContent="Hi",v.style.fontFamily=m[r],y.appendChild(v)}document.body.appendChild(y),function e(t,n){if(++d>30)return(0,a.warn)("Load test font never loaded."),void n();c.font="30px "+t,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(u,(function(){document.body.removeChild(y),n.complete()}))}},{key:"isFontLoadingAPISupported",get:function(){var e="undefined"!=typeof document&&!!document.fonts;if(e&&"undefined"!=typeof navigator){var t=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);t&&t[1]<63&&(e=!1)}return(0,a.shadow)(this,"isFontLoadingAPISupported",e)}},{key:"isSyncFontLoadingSupported",get:function(){var e=!1;if("undefined"==typeof navigator)e=!0;else{var t=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);t&&t[1]>=14&&(e=!0)}return(0,a.shadow)(this,"isSyncFontLoadingSupported",e)}},{key:"_loadTestFont",get:function(){return(0,a.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}}]),t}(f);var m={get value(){return(0,a.shadow)(this,"value",(0,a.isEvalSupported)())}},y=function(){function e(t,n){var o=n.isEvalSupported,i=void 0===o||o,a=n.disableFontFace,r=void 0!==a&&a,s=n.ignoreErrors,l=void 0!==s&&s,c=n.onUnsupportedFeature,d=void 0===c?null:c,p=n.fontRegistry,g=void 0===p?null:p;for(var h in u(this,e),this.compiledGlyphs=Object.create(null),t)this[h]=t[h];this.isEvalSupported=!1!==i,this.disableFontFace=!0===r,this.ignoreErrors=!0===l,this._onUnsupportedFeature=d,this.fontRegistry=g}return g(e,[{key:"createNativeFontFace",value:function(){if(!this.data||this.disableFontFace)return null;var e=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),e}},{key:"createFontFaceRule",value:function(){if(!this.data||this.disableFontFace)return null;var e=(0,a.bytesToString)(new Uint8Array(this.data)),t="url(data:".concat(this.mimetype,";base64,").concat(btoa(e),");"),n='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(t,"}");return this.fontRegistry&&this.fontRegistry.registerFont(this,t),n}},{key:"getPathGenerator",value:function(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];var n,o;try{n=e.get(this.loadedName+"_path_"+t)}catch(e){if(!this.ignoreErrors)throw e;return this._onUnsupportedFeature&&this._onUnsupportedFeature({featureId:a.UNSUPPORTED_FEATURES.font}),(0,a.warn)('getPathGenerator - ignoring character: "'.concat(e,'".')),this.compiledGlyphs[t]=function(e,t){}}if(this.isEvalSupported&&m.value){for(var i,r="",s=0,l=n.length;s<l;s++)i=void 0!==(o=n[s]).args?o.args.join(","):"",r+="c."+o.cmd+"("+i+");\n";return this.compiledGlyphs[t]=new Function("c","size",r)}return this.compiledGlyphs[t]=function(e,t){for(var i=0,a=n.length;i<a;i++){"scale"===(o=n[i]).cmd&&(o.args=[t,-t]);try{e[o.cmd].apply(e,o.args)}catch(t){throw"function"!=typeof e[o.cmd]?new Error("Unsupported drawing command: "+o.cmd):t}}}}}]),e}();t.FontFaceObject=y},function(e,t,n){"use strict";var o=Object.create(null),i=n(4),a="undefined"!=typeof navigator&&navigator.userAgent||"",r=/Trident/.test(a),s=/CriOS/.test(a);(r||s)&&(o.disableCreateObjectURL=!0),i()&&(o.disableFontFace=!0,o.nativeImageDecoderSupport="none"),t.apiCompatibilityParams=Object.freeze(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var o=n(1),i=n(155),a={get value(){return(0,o.shadow)(a,"value",(0,o.isLittleEndian)())}};function r(e){e.mozCurrentTransform||(e._originalSave=e.save,e._originalRestore=e.restore,e._originalRotate=e.rotate,e._originalScale=e.scale,e._originalTranslate=e.translate,e._originalTransform=e.transform,e._originalSetTransform=e.setTransform,e._transformMatrix=e._transformMatrix||[1,0,0,1,0,0],e._transformStack=[],Object.defineProperty(e,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(e,"mozCurrentTransformInverse",{get:function(){var e=this._transformMatrix,t=e[0],n=e[1],o=e[2],i=e[3],a=e[4],r=e[5],s=t*i-n*o,l=n*o-t*i;return[i/s,n/l,o/l,t/s,(i*a-o*r)/l,(n*a-t*r)/s]}}),e.save=function(){var e=this._transformMatrix;this._transformStack.push(e),this._transformMatrix=e.slice(0,6),this._originalSave()},e.restore=function(){var e=this._transformStack.pop();e&&(this._transformMatrix=e,this._originalRestore())},e.translate=function(e,t){var n=this._transformMatrix;n[4]=n[0]*e+n[2]*t+n[4],n[5]=n[1]*e+n[3]*t+n[5],this._originalTranslate(e,t)},e.scale=function(e,t){var n=this._transformMatrix;n[0]=n[0]*e,n[1]=n[1]*e,n[2]=n[2]*t,n[3]=n[3]*t,this._originalScale(e,t)},e.transform=function(t,n,o,i,a,r){var s=this._transformMatrix;this._transformMatrix=[s[0]*t+s[2]*n,s[1]*t+s[3]*n,s[0]*o+s[2]*i,s[1]*o+s[3]*i,s[0]*a+s[2]*r+s[4],s[1]*a+s[3]*r+s[5]],e._originalTransform(t,n,o,i,a,r)},e.setTransform=function(t,n,o,i,a,r){this._transformMatrix=[t,n,o,i,a,r],e._originalSetTransform(t,n,o,i,a,r)},e.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),o=this._transformMatrix;this._transformMatrix=[o[0]*t+o[2]*n,o[1]*t+o[3]*n,o[0]*-n+o[2]*t,o[1]*-n+o[3]*t,o[4],o[5]],this._originalRotate(e)})}var s=function(){function e(e){this.canvasFactory=e,this.cache=Object.create(null)}return e.prototype={getCanvas:function(e,t,n,o){var i;return void 0!==this.cache[e]?(i=this.cache[e],this.canvasFactory.reset(i,t,n),i.context.setTransform(1,0,0,1,0,0)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),o&&r(i.context),i},clear:function(){for(var e in this.cache){var t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}},e}(),l=function(){function e(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null}return e.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(e,t){this.x=e,this.y=t}},e}(),c=function(){function e(e,t,n,o,i,a){this.ctx=e,this.current=new l,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=o,this.webGLContext=i,this.imageLayer=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.cachedCanvases=new s(this.canvasFactory),e&&r(e),this._cachedGetSinglePixelWidth=null}function t(e,t){if("undefined"!=typeof ImageData&&t instanceof ImageData)e.putImageData(t,0,0);else{var n,i,r,s,l,c=t.height,d=t.width,u=c%16,p=(c-u)/16,g=0===u?p:p+1,h=e.createImageData(d,16),f=0,m=t.data,y=h.data;if(t.kind===o.ImageKind.GRAYSCALE_1BPP){var v=m.byteLength,_=new Uint32Array(y.buffer,0,y.byteLength>>2),b=_.length,w=d+7>>3,C=4294967295,x=a.value?4278190080:255;for(i=0;i<g;i++){for(s=i<p?16:u,n=0,r=0;r<s;r++){for(var S=v-f,E=0,A=S>w?d:8*S-7,T=-8&A,G=0,P=0;E<T;E+=8)P=m[f++],_[n++]=128&P?C:x,_[n++]=64&P?C:x,_[n++]=32&P?C:x,_[n++]=16&P?C:x,_[n++]=8&P?C:x,_[n++]=4&P?C:x,_[n++]=2&P?C:x,_[n++]=1&P?C:x;for(;E<A;E++)0===G&&(P=m[f++],G=128),_[n++]=P&G?C:x,G>>=1}for(;n<b;)_[n++]=0;e.putImageData(h,0,16*i)}}else if(t.kind===o.ImageKind.RGBA_32BPP){for(r=0,l=16*d*4,i=0;i<p;i++)y.set(m.subarray(f,f+l)),f+=l,e.putImageData(h,0,r),r+=16;i<g&&(l=d*u*4,y.set(m.subarray(f,f+l)),e.putImageData(h,0,r))}else{if(t.kind!==o.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));for(l=d*(s=16),i=0;i<g;i++){for(i>=p&&(l=d*(s=u)),n=0,r=l;r--;)y[n++]=m[f++],y[n++]=m[f++],y[n++]=m[f++],y[n++]=255;e.putImageData(h,0,16*i)}}}}function n(e,t){for(var n=t.height,o=t.width,i=n%16,a=(n-i)/16,r=0===i?a:a+1,s=e.createImageData(o,16),l=0,c=t.data,d=s.data,u=0;u<r;u++){for(var p=u<a?16:i,g=3,h=0;h<p;h++)for(var f=0,m=0;m<o;m++){if(!f){var y=c[l++];f=128}d[g]=y&f?0:255,g+=4,f>>=1}e.putImageData(s,0,16*u)}}function c(e,t){for(var n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","_path"],o=0,i=n.length;o<i;o++){var a=n[o];void 0!==e[a]&&(t[a]=e[a])}void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function d(e){e.strokeStyle="#000000",e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0)}function u(e,t,n,o){for(var i=e.length,a=3;a<i;a+=4){var r=e[a];if(0===r)e[a-3]=t,e[a-2]=n,e[a-1]=o;else if(r<255){var s=255-r;e[a-3]=e[a-3]*r+t*s>>8,e[a-2]=e[a-2]*r+n*s>>8,e[a-1]=e[a-1]*r+o*s>>8}}}function p(e,t,n){for(var o=e.length,i=3;i<o;i+=4){var a=n?n[e[i]]:e[i];t[i]=t[i]*a*(1/255)|0}}function g(e,t,n){for(var o=e.length,i=3;i<o;i+=4){var a=77*e[i-3]+152*e[i-2]+28*e[i-1];t[i]=n?t[i]*n[a>>8]>>8:t[i]*a>>16}}function h(e,t,n,o){var i=t.canvas,a=t.context;e.setTransform(t.scaleX,0,0,t.scaleY,t.offsetX,t.offsetY);var r=t.backdrop||null;if(!t.transferMap&&o.isEnabled){var s=o.composeSMask({layer:n.canvas,mask:i,properties:{subtype:t.subtype,backdrop:r}});return e.setTransform(1,0,0,1,0,0),void e.drawImage(s,t.offsetX,t.offsetY)}!function(e,t,n,o,i,a,r){var s,l=!!a,c=l?a[0]:0,d=l?a[1]:0,h=l?a[2]:0;s="Luminosity"===i?g:p;for(var f=Math.min(o,Math.ceil(1048576/n)),m=0;m<o;m+=f){var y=Math.min(f,o-m),v=e.getImageData(0,m,n,y),_=t.getImageData(0,m,n,y);l&&u(v.data,c,d,h),s(v.data,_.data,r),e.putImageData(_,0,m)}}(a,n,i.width,i.height,t.subtype,r,t.transferMap),e.drawImage(i,0,0)}var f=["butt","round","square"],m=["miter","round","bevel"],y={},v={};for(var _ in e.prototype={beginDrawing:function(e){var t=e.transform,n=e.viewport,o=e.transparency,i=void 0!==o&&o,a=e.background,r=void 0===a?null:a,s=this.ctx.canvas.width,l=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=r||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,s,l),this.ctx.restore(),i){var c=this.cachedCanvases.getCanvas("transparent",s,l,!0);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),d(this.ctx),t&&this.ctx.transform.apply(this.ctx,t),this.ctx.transform.apply(this.ctx,n.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(e,t,n,i,a){var r=e.argsArray,s=e.fnArray,l=t||0,c=r.length;if(c===l)return l;for(var d,u=c-l>10&&"function"==typeof n,p=u?Date.now()+15:0,g=0,h=this.commonObjs,f=this.objs;;){if(void 0!==i&&l===i.nextBreakPoint)return i.breakIt(l,n),l;if((d=s[l])!==o.OPS.dependency)this[d].apply(this,r[l]);else for(var m=r[l],y=0,v=m.length;y<v;y++){var _=m[y],b="g"===_[0]&&"_"===_[1]?h:f;if(!b.has(_))return b.get(_,n),l}if(l++,a&&a(l,c),l===c)return l;if(u&&++g>10){if(Date.now()>p)return n(),l;g=0}}},endDrawing:function(){null!==this.current.activeSMask&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.webGLContext.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(e){this.current.lineWidth=e,this.ctx.lineWidth=e},setLineCap:function(e){this.ctx.lineCap=f[e]},setLineJoin:function(e){this.ctx.lineJoin=m[e]},setMiterLimit:function(e){this.ctx.miterLimit=e},setDash:function(e,t){var n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(e),n.lineDashOffset=t)},setRenderingIntent:function(e){},setFlatness:function(e){},setGState:function(e){for(var t=0,n=e.length;t<n;t++){var o=e[t],i=o[0],a=o[1];switch(i){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"RI":this.setRenderingIntent(a);break;case"FL":this.setFlatness(a);break;case"Font":this.setFont(a[0],a[1]);break;case"CA":this.current.strokeAlpha=o[1];break;case"ca":this.current.fillAlpha=o[1],this.ctx.globalAlpha=o[1];break;case"BM":this.ctx.globalCompositeOperation=a;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=a?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null}}},beginSMaskGroup:function(){var e=this.current.activeSMask,t=e.canvas.width,n=e.canvas.height,o="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(o,t,n,!0),a=this.ctx,r=a.mozCurrentTransform;this.ctx.save();var s=i.context;s.scale(1/e.scaleX,1/e.scaleY),s.translate(-e.offsetX,-e.offsetY),s.transform.apply(s,r),e.startTransformInverse=s.mozCurrentTransformInverse,c(a,s),this.ctx=s,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(a),this.groupLevel++},suspendSMaskGroup:function(){var e=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),(this.composeSmask||h)(this.ctx,this.current.activeSMask,e,this.webGLContext),this.ctx.restore(),this.ctx.save(),c(e,this.ctx),this.current.resumeSMaskCtx=e;var t=o.Util.transform(this.current.activeSMask.startTransformInverse,e.mozCurrentTransform);this.ctx.transform.apply(this.ctx,t),e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.restore()},resumeSMaskGroup:function(){var e=this.current.resumeSMaskCtx,t=this.ctx;this.ctx=e,this.groupStack.push(t),this.groupLevel++},endSMaskGroup:function(){var e=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),(this.composeSmask||h)(this.ctx,this.current.activeSMask,e,this.webGLContext),this.ctx.restore(),c(e,this.ctx);var t=o.Util.transform(this.current.activeSMask.startTransformInverse,e.mozCurrentTransform);this.ctx.transform.apply(this.ctx,t)},save:function(){this.ctx.save();var e=this.current;this.stateStack.push(e),this.current=e.clone(),this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)},transform:function(e,t,n,o,i,a){this.ctx.transform(e,t,n,o,i,a),this._cachedGetSinglePixelWidth=null},constructPath:function(e,t){for(var n=this.ctx,i=this.current,a=i.x,r=i.y,s=0,l=0,c=e.length;s<c;s++)switch(0|e[s]){case o.OPS.rectangle:a=t[l++],r=t[l++];var d=t[l++],u=t[l++];0===d&&(d=this.getSinglePixelWidth()),0===u&&(u=this.getSinglePixelWidth());var p=a+d,g=r+u;this.ctx.moveTo(a,r),this.ctx.lineTo(p,r),this.ctx.lineTo(p,g),this.ctx.lineTo(a,g),this.ctx.lineTo(a,r),this.ctx.closePath();break;case o.OPS.moveTo:a=t[l++],r=t[l++],n.moveTo(a,r);break;case o.OPS.lineTo:a=t[l++],r=t[l++],n.lineTo(a,r);break;case o.OPS.curveTo:a=t[l+4],r=t[l+5],n.bezierCurveTo(t[l],t[l+1],t[l+2],t[l+3],a,r),l+=6;break;case o.OPS.curveTo2:n.bezierCurveTo(a,r,t[l],t[l+1],t[l+2],t[l+3]),a=t[l+2],r=t[l+3],l+=4;break;case o.OPS.curveTo3:a=t[l+2],r=t[l+3],n.bezierCurveTo(t[l],t[l+1],a,r,a,r),l+=4;break;case o.OPS.closePath:n.closePath()}i.setCurrentPoint(a,r)},closePath:function(){this.ctx.closePath()},stroke:function(e){e=void 0===e||e;var t=this.ctx,n=this.current.strokeColor;t.lineWidth=this.current.lineWidth,t.globalAlpha=this.current.strokeAlpha,n&&n.hasOwnProperty("type")&&"Pattern"===n.type?(t.save(),t.strokeStyle=n.getPattern(t,this),t.stroke(),t.restore()):t.stroke(),e&&this.consumePath(),t.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath(),this.stroke()},fill:function(e){e=void 0===e||e;var t=this.ctx,n=this.current.fillColor,o=!1;this.current.patternFill&&(t.save(),this.baseTransform&&t.setTransform.apply(t,this.baseTransform),t.fillStyle=n.getPattern(t,this),o=!0),this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill(),o&&t.restore(),e&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0,this.fill()},fillStroke:function(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=y},eoClip:function(){this.pendingClip=v},beginText:function(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function(){var e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(var n=0;n<e.length;n++){var o=e[n];t.setTransform.apply(t,o.transform),t.translate(o.x,o.y);try{o.addToPath(t,o.fontSize)}catch(e){console.warn("Couldn't add to path:"+e.message)}}t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()},setCharSpacing:function(e){this.current.charSpacing=e},setWordSpacing:function(e){this.current.wordSpacing=e},setHScale:function(e){this.current.textHScale=e/100},setLeading:function(e){this.current.leading=-e},setFont:function(e,t){var n=this.commonObjs.get(e),i=this.current;if(!n)throw new Error("Can't find font for ".concat(e));if(i.fontMatrix=n.fontMatrix?n.fontMatrix:o.FONT_IDENTITY_MATRIX,0!==i.fontMatrix[0]&&0!==i.fontMatrix[3]||(0,o.warn)("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=n,this.current.fontSize=t,!n.isType3Font){var a=n.loadedName||"sans-serif",r=n.black?"900":n.bold?"bold":"normal",s=n.italic?"italic":"normal",l='"'.concat(a,'", ').concat(n.fallbackName),c=t<16?16:t>100?100:t;this.current.fontSizeScale=t/c,this.ctx.font="".concat(s," ").concat(r," ").concat(c,"px ").concat(l)}},setTextRenderingMode:function(e){this.current.textRenderingMode=e},setTextRise:function(e){this.current.textRise=e},moveText:function(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t},setLeadingMoveText:function(e,t){this.setLeading(-t),this.moveText(e,t)},setTextMatrix:function(e,t,n,o,i,a){this.current.textMatrix=[e,t,n,o,i,a],this.current.textMatrixScale=Math.sqrt(e*e+t*t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar:function(e,t,n,i,a){var r,s=this.ctx,l=this.current,c=l.font,d=l.textRenderingMode,u=l.fontSize/l.fontSizeScale,p=d&o.TextRenderingMode.FILL_STROKE_MASK,g=!!(d&o.TextRenderingMode.ADD_TO_PATH_FLAG),h=l.patternFill&&c.data;(c.disableFontFace||g||h)&&(r=c.getPathGenerator(this.commonObjs,e)),c.disableFontFace||h?(s.save(),s.translate(t,n),s.beginPath(),r(s,u),i&&s.setTransform.apply(s,i),p!==o.TextRenderingMode.FILL&&p!==o.TextRenderingMode.FILL_STROKE||s.fill(),p!==o.TextRenderingMode.STROKE&&p!==o.TextRenderingMode.FILL_STROKE||s.stroke(),s.restore()):(p!==o.TextRenderingMode.FILL&&p!==o.TextRenderingMode.FILL_STROKE||s.fillText(e,t,n,a),p!==o.TextRenderingMode.STROKE&&p!==o.TextRenderingMode.FILL_STROKE||s.strokeText(e,t,n,a)),g&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:s.mozCurrentTransform,x:t,y:n,fontSize:u,addToPath:r})},get isFontSubpixelAAEnabled(){var e=this.canvasFactory.create(10,10).context;e.scale(1.5,1),e.fillText("I",0,10);for(var t=e.getImageData(0,0,10,10).data,n=!1,i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",n)},showText:function(e){var t=this.current,n=t.font;if(n&&n.isType3Font)return this.showType3Text(e);var i=t.fontSize;if(0!==i){var a,r=this.ctx,s=t.fontSizeScale,l=t.charSpacing,c=t.wordSpacing,d=t.fontDirection,u=t.textHScale*d,p=e.length,g=n.vertical,h=g?1:-1,f=n.defaultVMetrics,m=i*t.fontMatrix[0],y=t.textRenderingMode===o.TextRenderingMode.FILL&&!n.disableFontFace&&!t.patternFill;if(r.save(),t.patternFill){r.save();var v=t.fillColor.getPattern(r,this);a=r.mozCurrentTransform,r.restore(),r.fillStyle=v}r.transform.apply(r,t.textMatrix),r.translate(t.x,t.y+t.textRise),d>0?r.scale(u,-1):r.scale(u,1);var _=t.lineWidth,b=t.textMatrixScale;if(0===b||0===_){var w=t.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;w!==o.TextRenderingMode.STROKE&&w!==o.TextRenderingMode.FILL_STROKE||(this._cachedGetSinglePixelWidth=null,_=.65*this.getSinglePixelWidth())}else _/=b;1!==s&&(r.scale(s,s),_/=s),r.lineWidth=_;var C,x=0;for(C=0;C<p;++C){var S=e[C];if((0,o.isNum)(S))x+=h*S*i/1e3;else{var E,A,T,G,P,D,L,I=!1,k=(S.isSpace?c:0)+l,O=S.unicode,F=S.accent,R=S.width;if(g?(P=S.vmetric||f,D=-(D=S.vmetric?P[1]:.5*R)*m,L=P[2]*m,R=P?-P[0]:R,E=D/s,A=(x+L)/s):(E=x/s,A=0),n.remeasure&&R>0){var M=1e3*r.measureText(O).width/i*s;if(R<M&&this.isFontSubpixelAAEnabled){var N=R/M;I=!0,r.save(),r.scale(N,1),E/=N}else R!==M&&(E+=(R-M)/2e3*i/s)}var B=R*m+k*d;(S.isInFont||n.missingFile)&&(y&&!F?r.fillText(O,E,A,B):(this.paintChar(O,E,A,a,B),F&&(T=E+F.offset.x/s,G=A-F.offset.y/s,this.paintChar(F.fontChar,T,G,a,B)))),x+=B,I&&r.restore()}}g?t.y-=x*u:t.x+=x*u,r.restore()}},showType3Text:function(e){var t,n,i,a,r=this.ctx,s=this.current,l=s.font,c=s.fontSize,d=s.fontDirection,u=l.vertical?1:-1,p=s.charSpacing,g=s.wordSpacing,h=s.textHScale*d,f=s.fontMatrix||o.FONT_IDENTITY_MATRIX,m=e.length;if(s.textRenderingMode!==o.TextRenderingMode.INVISIBLE&&0!==c){for(this._cachedGetSinglePixelWidth=null,r.save(),r.transform.apply(r,s.textMatrix),r.translate(s.x,s.y),r.scale(h,d),t=0;t<m;++t)if(n=e[t],(0,o.isNum)(n))a=u*n*c/1e3,this.ctx.translate(a,0),s.x+=a*h;else{var y=(n.isSpace?g:0)+p,v=l.charProcOperatorList[n.operatorListId];v?(this.processingType3=n,this.save(),r.scale(c,c),r.transform.apply(r,f),this.executeOperatorList(v),this.restore(),i=o.Util.applyTransform([n.width,0],f)[0]*c+y,r.translate(i,0),s.x+=i*h):(0,o.warn)('Type3 character "'.concat(n.operatorListId,'" is not available.'))}r.restore(),this.processingType3=null}},setCharWidth:function(e,t){},setCharWidthAndBounds:function(e,t,n,o,i,a){this.ctx.rect(n,o,i-n,a-o),this.clip(),this.endPath()},getColorN_Pattern:function(e){var t,n=this;if("TilingPattern"===e[0]){var o=e[1],a=this.baseTransform||this.ctx.mozCurrentTransform.slice(),r=this,s={createCanvasGraphics:function(e){return new r.constructor(e,n.commonObjs,n.objs,n.canvasFactory,n.webGLContext)}};t=new i.TilingPattern(e,o,this.ctx,s,a)}else t=(0,i.getShadingPatternFromIR)(e);return t},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function(e,t,n){var i=o.Util.makeCssRgb(e,t,n);this.ctx.strokeStyle=i,this.current.strokeColor=i},setFillRGBColor:function(e,t,n){var i=o.Util.makeCssRgb(e,t,n);this.ctx.fillStyle=i,this.current.fillColor=i,this.current.patternFill=!1},setStrokeCMYKColor:function(e,t,n,i){var a=o.Util.makeCssCMYK(e,t,n,i);this.ctx.strokeStyle=a,this.current.strokeColor=a},setFillCMYKColor:function(e,t,n,i){var a=o.Util.makeCssCMYK(e,t,n,i);this.ctx.fillStyle=a,this.current.fillColor=a,this.current.patternFill=!1},shadingFill:function(e){var t=this.ctx;this.save();var n=(0,i.getShadingPatternFromIR)(e);t.fillStyle=n.getPattern(t,this,!0);var a=t.mozCurrentTransformInverse;if(a){var r=t.canvas,s=r.width,l=r.height,c=o.Util.applyTransform([0,0],a),d=o.Util.applyTransform([0,l],a),u=o.Util.applyTransform([s,0],a),p=o.Util.applyTransform([s,l],a),g=Math.min(c[0],d[0],u[0],p[0]),h=Math.min(c[1],d[1],u[1],p[1]),f=Math.max(c[0],d[0],u[0],p[0]),m=Math.max(c[1],d[1],u[1],p[1]);this.ctx.fillRect(g,h,f-g,m-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()},beginInlineImage:function(){(0,o.unreachable)("Should not call beginInlineImage")},beginImageData:function(){(0,o.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function(e,t){if(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(e)&&6===e.length&&this.transform.apply(this,e),this.baseTransform=this.ctx.mozCurrentTransform,t){var n=t[2]-t[0],o=t[3]-t[1];this.ctx.rect(t[0],t[1],n,o),this.clip(),this.endPath()}},paintFormXObjectEnd:function(){this.restore(),this.baseTransform=this.baseTransformStack.pop()},beginGroup:function(e){this.save();var t=this.ctx;e.isolated||(0,o.info)("TODO: Support non-isolated groups."),e.knockout&&(0,o.warn)("Knockout groups not supported.");var n=t.mozCurrentTransform;if(e.matrix&&t.transform.apply(t,e.matrix),!e.bbox)throw new Error("Bounding box is required.");var i=o.Util.getAxialAlignedBoundingBox(e.bbox,t.mozCurrentTransform),a=[0,0,t.canvas.width,t.canvas.height];i=o.Util.intersect(i,a)||[0,0,0,0];var r=Math.floor(i[0]),s=Math.floor(i[1]),l=Math.max(Math.ceil(i[2])-r,1),d=Math.max(Math.ceil(i[3])-s,1),u=1,p=1;l>4096&&(u=l/4096,l=4096),d>4096&&(p=d/4096,d=4096);var g="groupAt"+this.groupLevel;e.smask&&(g+="_smask_"+this.smaskCounter++%2);var h=this.cachedCanvases.getCanvas(g,l,d,!0),f=h.context;f.scale(1/u,1/p),f.translate(-r,-s),f.transform.apply(f,n),e.smask?this.smaskStack.push({canvas:h.canvas,context:f,offsetX:r,offsetY:s,scaleX:u,scaleY:p,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(r,s),t.scale(u,p)),c(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++,this.current.activeSMask=null},endGroup:function(e){this.groupLevel--;var t=this.ctx;this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,e.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(t.canvas,0,0),this.restore()},beginAnnotations:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(e,t,n){if(this.save(),d(this.ctx),this.current=new l,Array.isArray(e)&&4===e.length){var o=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],o,i),this.clip(),this.endPath()}this.transform.apply(this,t),this.transform.apply(this,n)},endAnnotation:function(){this.restore()},paintJpegXObject:function(e,t,n){var i=this.objs.get(e);if(i){this.save();var a=this.ctx;if(a.scale(1/t,-1/n),a.drawImage(i,0,0,i.width,i.height,0,-n,t,n),this.imageLayer){var r=a.mozCurrentTransformInverse,s=this.getCanvasPosition(0,0);this.imageLayer.appendImage({objId:e,left:s[0],top:s[1],width:t/r[0],height:n/r[3]})}this.restore()}else(0,o.warn)("Dependent image isn't ready yet")},paintImageMaskXObject:function(e){var t=this.ctx,o=e.width,i=e.height,a=this.current.fillColor,r=this.current.patternFill,s=this.processingType3;if(s&&void 0===s.compiled&&(s.compiled=o<=1e3&&i<=1e3?function(e){var t,n,o,i,a=e.width,r=e.height,s=a+1,l=new Uint8Array(s*(r+1)),c=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),d=a+7&-8,u=e.data,p=new Uint8Array(d*r),g=0;for(t=0,i=u.length;t<i;t++)for(var h=128,f=u[t];h>0;)p[g++]=f&h?0:255,h>>=1;var m=0;for(0!==p[g=0]&&(l[0]=1,++m),n=1;n<a;n++)p[g]!==p[g+1]&&(l[n]=p[g]?2:1,++m),g++;for(0!==p[g]&&(l[n]=2,++m),t=1;t<r;t++){o=t*s,p[(g=t*d)-d]!==p[g]&&(l[o]=p[g]?1:8,++m);var y=(p[g]?4:0)+(p[g-d]?8:0);for(n=1;n<a;n++)c[y=(y>>2)+(p[g+1]?4:0)+(p[g-d+1]?8:0)]&&(l[o+n]=c[y],++m),g++;if(p[g-d]!==p[g]&&(l[o+n]=p[g]?2:4,++m),m>1e3)return null}for(o=t*s,0!==p[g=d*(r-1)]&&(l[o]=8,++m),n=1;n<a;n++)p[g]!==p[g+1]&&(l[o+n]=p[g]?4:8,++m),g++;if(0!==p[g]&&(l[o+n]=4,++m),m>1e3)return null;var v=new Int32Array([0,s,-1,0,-s,0,0,0,1]),_=[];for(t=0;m&&t<=r;t++){for(var b=t*s,w=b+a;b<w&&!l[b];)b++;if(b!==w){var C,x=[b%s,t],S=l[b],E=b;do{var A=v[S];do{b+=A}while(!l[b]);5!==(C=l[b])&&10!==C?(S=C,l[b]=0):(S=C&51*S>>4,l[b]&=S>>2|S<<2),x.push(b%s),x.push(b/s|0),--m}while(E!==b);_.push(x),--t}}return function(e){e.save(),e.scale(1/a,-1/r),e.translate(0,-r),e.beginPath();for(var t=0,n=_.length;t<n;t++){var o=_[t];e.moveTo(o[0],o[1]);for(var i=2,s=o.length;i<s;i+=2)e.lineTo(o[i],o[i+1])}e.fill(),e.beginPath(),e.restore()}}({data:e.data,width:o,height:i}):null),s&&s.compiled)s.compiled(t);else{var l=this.cachedCanvases.getCanvas("maskCanvas",o,i),c=l.context;c.save(),n(c,e),c.globalCompositeOperation="source-in",c.fillStyle=r?a.getPattern(c,this):a,c.fillRect(0,0,o,i),c.restore(),this.paintInlineImageXObject(l.canvas)}},paintImageMaskXObjectRepeat:function(e,t,o,i){var a=e.width,r=e.height,s=this.current.fillColor,l=this.current.patternFill,c=this.cachedCanvases.getCanvas("maskCanvas",a,r),d=c.context;d.save(),n(d,e),d.globalCompositeOperation="source-in",d.fillStyle=l?s.getPattern(d,this):s,d.fillRect(0,0,a,r),d.restore();for(var u=this.ctx,p=0,g=i.length;p<g;p+=2)u.save(),u.transform(t,0,0,o,i[p],i[p+1]),u.scale(1,-1),u.drawImage(c.canvas,0,0,a,r,0,-1,1,1),u.restore()},paintImageMaskXObjectGroup:function(e){for(var t=this.ctx,o=this.current.fillColor,i=this.current.patternFill,a=0,r=e.length;a<r;a++){var s=e[a],l=s.width,c=s.height,d=this.cachedCanvases.getCanvas("maskCanvas",l,c),u=d.context;u.save(),n(u,s),u.globalCompositeOperation="source-in",u.fillStyle=i?o.getPattern(u,this):o,u.fillRect(0,0,l,c),u.restore(),t.save(),t.transform.apply(t,s.transform),t.scale(1,-1),t.drawImage(d.canvas,0,0,l,c,0,-1,1,1),t.restore()}},paintImageXObject:function(e){var t=this.objs.get(e);t?this.paintInlineImageXObject(t):(0,o.warn)("Dependent image isn't ready yet")},paintImageXObjectRepeat:function(e,t,n,i){var a=this.objs.get(e);if(a){for(var r=a.width,s=a.height,l=[],c=0,d=i.length;c<d;c+=2)l.push({transform:[t,0,0,n,i[c],i[c+1]],x:0,y:0,w:r,h:s});this.paintInlineImageXObjectGroup(a,l)}else(0,o.warn)("Dependent image isn't ready yet")},paintInlineImageXObject:function(e){var n=e.width,o=e.height,i=this.ctx;this.save(),i.scale(1/n,-1/o);var a,r,s=i.mozCurrentTransformInverse,l=s[0],c=s[1],d=Math.max(Math.sqrt(l*l+c*c),1),u=s[2],p=s[3],g=Math.max(Math.sqrt(u*u+p*p),1);if("function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data)a=e;else{var h=(r=this.cachedCanvases.getCanvas("inlineImage",n,o)).context;t(h,e),a=r.canvas}for(var f=n,m=o,y="prescale1";d>2&&f>1||g>2&&m>1;){var v=f,_=m;d>2&&f>1&&(d/=f/(v=Math.ceil(f/2))),g>2&&m>1&&(g/=m/(_=Math.ceil(m/2))),(h=(r=this.cachedCanvases.getCanvas(y,v,_)).context).clearRect(0,0,v,_),h.drawImage(a,0,0,f,m,0,0,v,_),a=r.canvas,f=v,m=_,y="prescale1"===y?"prescale2":"prescale1"}if(i.drawImage(a,0,0,f,m,0,-o,n,o),this.imageLayer){var b=this.getCanvasPosition(0,-o);this.imageLayer.appendImage({imgData:e,left:b[0],top:b[1],width:n/s[0],height:o/s[3]})}this.restore()},paintInlineImageXObjectGroup:function(e,n){var o=this.ctx,i=e.width,a=e.height,r=this.cachedCanvases.getCanvas("inlineImage",i,a);t(r.context,e);for(var s=0,l=n.length;s<l;s++){var c=n[s];if(o.save(),o.transform.apply(o,c.transform),o.scale(1,-1),o.drawImage(r.canvas,c.x,c.y,c.w,c.h,0,-1,1,1),this.imageLayer){var d=this.getCanvasPosition(c.x,c.y);this.imageLayer.appendImage({imgData:e,left:d[0],top:d[1],width:i,height:a})}o.restore()}},paintSolidColorImageMask:function(){this.ctx.fillRect(0,0,1,1)},paintXObject:function(){(0,o.warn)("Unsupported 'paintXObject' command.")},markPoint:function(e){},markPointProps:function(e,t){},beginMarkedContent:function(e){},beginMarkedContentProps:function(e,t){},endMarkedContent:function(){},beginCompat:function(){},endCompat:function(){},consumePath:function(){var e=this.ctx;this.pendingClip&&(this.pendingClip===v?e.clip("evenodd"):e.clip(),this.pendingClip=null),e.beginPath()},getSinglePixelWidth:function(e){if(null===this._cachedGetSinglePixelWidth){var t=this.ctx.mozCurrentTransformInverse;this._cachedGetSinglePixelWidth=Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1],t[2]*t[2]+t[3]*t[3]))}return this._cachedGetSinglePixelWidth},getCanvasPosition:function(e,t){var n=this.ctx.mozCurrentTransform;return[n[0]*e+n[2]*t+n[4],n[1]*e+n[3]*t+n[5]]}},o.OPS)e.prototype[o.OPS[_]]=e.prototype[_];return e}();t.CanvasGraphics=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShadingPatternFromIR=function(e){var t=i[e[0]];if(!t)throw new Error("Unknown IR type: ".concat(e[0]));return t.fromIR(e)},t.TilingPattern=void 0;var o=n(1),i={RadialAxial:{fromIR:function(e){var t=e[1],n=e[2],o=e[3],i=e[4],a=e[5],r=e[6],s=e[7];return{type:"Pattern",getPattern:function(e){var l;"axial"===t?l=e.createLinearGradient(o[0],o[1],i[0],i[1],s):"radial"===t&&(l=e.createRadialGradient(o[0],o[1],a,i[0],i[1],r,s));for(var c=0,d=n.length;c<d;++c){var u=n[c];l.addColorStop(u[0],u[1])}return l}}}}},a=function(){function e(e,t,n,o,i,a,r,s){var l,c=t.coords,d=t.colors,u=e.data,p=4*e.width;c[n+1]>c[o+1]&&(l=n,n=o,o=l,l=a,a=r,r=l),c[o+1]>c[i+1]&&(l=o,o=i,i=l,l=r,r=s,s=l),c[n+1]>c[o+1]&&(l=n,n=o,o=l,l=a,a=r,r=l);var g=(c[n]+t.offsetX)*t.scaleX,h=(c[n+1]+t.offsetY)*t.scaleY,f=(c[o]+t.offsetX)*t.scaleX,m=(c[o+1]+t.offsetY)*t.scaleY,y=(c[i]+t.offsetX)*t.scaleX,v=(c[i+1]+t.offsetY)*t.scaleY;if(!(h>=v))for(var _,b,w,C,x,S,E,A,T,G=d[a],P=d[a+1],D=d[a+2],L=d[r],I=d[r+1],k=d[r+2],O=d[s],F=d[s+1],R=d[s+2],M=Math.round(h),N=Math.round(v),B=M;B<=N;B++){B<m?(_=g-(g-f)*(T=B<h?0:h===m?1:(h-B)/(h-m)),b=G-(G-L)*T,w=P-(P-I)*T,C=D-(D-k)*T):(_=f-(f-y)*(T=B>v?1:m===v?0:(m-B)/(m-v)),b=L-(L-O)*T,w=I-(I-F)*T,C=k-(k-R)*T),x=g-(g-y)*(T=B<h?0:B>v?1:(h-B)/(h-v)),S=G-(G-O)*T,E=P-(P-F)*T,A=D-(D-R)*T;for(var U=Math.round(Math.min(_,x)),$=Math.round(Math.max(_,x)),j=p*B+4*U,K=U;K<=$;K++)T=(T=(_-K)/(_-x))<0?0:T>1?1:T,u[j++]=b-(b-S)*T|0,u[j++]=w-(w-E)*T|0,u[j++]=C-(C-A)*T|0,u[j++]=255}}function t(t,n,o){var i,a,r=n.coords,s=n.colors;switch(n.type){case"lattice":var l=n.verticesPerRow,c=Math.floor(r.length/l)-1,d=l-1;for(i=0;i<c;i++)for(var u=i*l,p=0;p<d;p++,u++)e(t,o,r[u],r[u+1],r[u+l],s[u],s[u+1],s[u+l]),e(t,o,r[u+l+1],r[u+1],r[u+l],s[u+l+1],s[u+1],s[u+l]);break;case"triangles":for(i=0,a=r.length;i<a;i+=3)e(t,o,r[i],r[i+1],r[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}return function(e,n,o,i,a,r,s,l){var c,d,u,p,g=Math.floor(e[0]),h=Math.floor(e[1]),f=Math.ceil(e[2])-g,m=Math.ceil(e[3])-h,y=Math.min(Math.ceil(Math.abs(f*n[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(m*n[1]*1.1)),3e3),_=f/y,b=m/v,w={coords:o,colors:i,offsetX:-g,offsetY:-h,scaleX:1/_,scaleY:1/b},C=y+4,x=v+4;if(l.isEnabled)c=l.drawFigures({width:y,height:v,backgroundColor:r,figures:a,context:w}),(d=s.getCanvas("mesh",C,x,!1)).context.drawImage(c,2,2),c=d.canvas;else{var S=(d=s.getCanvas("mesh",C,x,!1)).context,E=S.createImageData(y,v);if(r){var A=E.data;for(u=0,p=A.length;u<p;u+=4)A[u]=r[0],A[u+1]=r[1],A[u+2]=r[2],A[u+3]=255}for(u=0;u<a.length;u++)t(E,a[u],w);S.putImageData(E,2,2),c=d.canvas}return{canvas:c,offsetX:g-2*_,offsetY:h-2*b,scaleX:_,scaleY:b}}}();i.Mesh={fromIR:function(e){var t=e[2],n=e[3],i=e[4],r=e[5],s=e[6],l=e[8];return{type:"Pattern",getPattern:function(e,c,d){var u;if(d)u=o.Util.singularValueDecompose2dScale(e.mozCurrentTransform);else if(u=o.Util.singularValueDecompose2dScale(c.baseTransform),s){var p=o.Util.singularValueDecompose2dScale(s);u=[u[0]*p[0],u[1]*p[1]]}var g=a(r,u,t,n,i,d?null:l,c.cachedCanvases,c.webGLContext);return d||(e.setTransform.apply(e,c.baseTransform),s&&e.transform.apply(e,s)),e.translate(g.offsetX,g.offsetY),e.scale(g.scaleX,g.scaleY),e.createPattern(g.canvas,"no-repeat")}}}},i.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};var r=function(){var e=1,t=2;function n(e,t,n,o,i){this.operatorList=e[2],this.matrix=e[3]||[1,0,0,1,0,0],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.canvasGraphicsFactory=o,this.baseTransform=i,this.type="Pattern",this.ctx=n}return n.prototype={createPatternCanvas:function(e){var t=this.operatorList,n=this.bbox,i=this.xstep,a=this.ystep,r=this.paintType,s=this.tilingType,l=this.color,c=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+s);var d=n[0],u=n[1],p=n[2],g=n[3],h=[d,u],f=[d+i,u+a],m=f[0]-h[0],y=f[1]-h[1],v=o.Util.singularValueDecompose2dScale(this.matrix),_=o.Util.singularValueDecompose2dScale(this.baseTransform),b=[v[0]*_[0],v[1]*_[1]];m=Math.min(Math.ceil(Math.abs(m*b[0])),3e3),y=Math.min(Math.ceil(Math.abs(y*b[1])),3e3);var w=e.cachedCanvases.getCanvas("pattern",m,y,!0),C=w.context,x=c.createCanvasGraphics(C);x.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(x,r,l),this.setScale(m,y,i,a),this.transformToScale(x);var S=[1,0,0,1,-h[0],-h[1]];return x.transform.apply(x,S),this.clipBbox(x,n,d,u,p,g),x.executeOperatorList(t),w.canvas},setScale:function(e,t,n,o){this.scale=[e/n,t/o]},transformToScale:function(e){var t=this.scale,n=[t[0],0,0,t[1],0,0];e.transform.apply(e,n)},scaleToContext:function(){var e=this.scale;this.ctx.scale(1/e[0],1/e[1])},clipBbox:function(e,t,n,o,i,a){if(Array.isArray(t)&&4===t.length){var r=i-n,s=a-o;e.ctx.rect(n,o,r,s),e.clip(),e.endPath()}},setFillAndStrokeStyleToContext:function(n,i,a){var r=n.ctx,s=n.current;switch(i){case e:var l=this.ctx;r.fillStyle=l.fillStyle,r.strokeStyle=l.strokeStyle,s.fillColor=l.fillStyle,s.strokeColor=l.strokeStyle;break;case t:var c=o.Util.makeCssRgb(a[0],a[1],a[2]);r.fillStyle=c,r.strokeStyle=c,s.fillColor=c,s.strokeColor=c;break;default:throw new o.FormatError("Unsupported paint type: ".concat(i))}},getPattern:function(e,t){var n=this.createPatternCanvas(t);return(e=this.ctx).setTransform.apply(e,this.baseTransform),e.transform.apply(e,this.matrix),this.scaleToContext(),e.createPattern(n,"repeat")}},n}();t.TilingPattern=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;var o=Object.create(null);t.GlobalWorkerOptions=o,o.workerPort=void 0===o.workerPort?null:o.workerPort,o.workerSrc=void 0===o.workerSrc?"":o.workerSrc},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=h;var o,i=(o=n(147))&&o.__esModule?o:{default:o},a=n(1);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,n,o,i,a,r){try{var s=e[a](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function r(e){s(a,o,i,r,l,"next",e)}function l(e){s(a,o,i,r,l,"throw",e)}r(void 0)}))}}function c(e,t){return d.apply(this,arguments)}function d(){return(d=l(i.default.mark((function e(t,n){var o,a=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a.length>2&&void 0!==a[2]?a[2]:null,t){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",t.apply(o,n));case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function u(e){if("object"!==r(e))return e;switch(e.name){case"AbortException":return new a.AbortException(e.message);case"MissingPDFException":return new a.MissingPDFException(e.message);case"UnexpectedResponseException":return new a.UnexpectedResponseException(e.message,e.status);default:return new a.UnknownErrorException(e.message,e.details)}}function p(e){return!(e instanceof Error)||e instanceof a.AbortException||e instanceof a.MissingPDFException||e instanceof a.UnexpectedResponseException||e instanceof a.UnknownErrorException?e:new a.UnknownErrorException(e.message,e.toString())}function g(e,t,n){t?e.resolve():e.reject(n)}function h(e,t,n){var o=this;this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null);var i=this.callbacksCapabilities=Object.create(null),a=this.actionHandler=Object.create(null);this._onComObjOnMessage=function(e){var t=e.data;if(t.targetName===o.sourceName)if(t.stream)o._processStreamMessage(t);else if(t.isReply){var r=t.callbackId;if(!(t.callbackId in i))throw new Error("Cannot resolve callback ".concat(r));var s=i[r];delete i[r],"error"in t?s.reject(u(t.error)):s.resolve(t.data)}else{if(!(t.action in a))throw new Error("Unknown action from worker: ".concat(t.action));var l=a[t.action];if(t.callbackId){var c=o.sourceName,d=t.sourceName;Promise.resolve().then((function(){return l[0].call(l[1],t.data)})).then((function(e){n.postMessage({sourceName:c,targetName:d,isReply:!0,callbackId:t.callbackId,data:e})}),(function(e){n.postMessage({sourceName:c,targetName:d,isReply:!0,callbackId:t.callbackId,error:p(e)})}))}else t.streamId?o._createStreamSink(t):l[0].call(l[1],t.data)}},n.addEventListener("message",this._onComObjOnMessage)}h.prototype={on:function(e,t,n){var o=this.actionHandler;if(o[e])throw new Error('There is already an actionName called "'.concat(e,'"'));o[e]=[t,n]},send:function(e,t,n){var o={sourceName:this.sourceName,targetName:this.targetName,action:e,data:t};this.postMessage(o,n)},sendWithPromise:function(e,t,n){var o=this.callbackId++,i={sourceName:this.sourceName,targetName:this.targetName,action:e,data:t,callbackId:o},r=(0,a.createPromiseCapability)();this.callbacksCapabilities[o]=r;try{this.postMessage(i,n)}catch(e){r.reject(e)}return r.promise},sendWithStream:function(e,t,n,o){var i=this,r=this.streamId++,s=this.sourceName,l=this.targetName;return new a.ReadableStream({start:function(n){var o=(0,a.createPromiseCapability)();return i.streamControllers[r]={controller:n,startCall:o,isClosed:!1},i.postMessage({sourceName:s,targetName:l,action:e,streamId:r,data:t,desiredSize:n.desiredSize}),o.promise},pull:function(e){var t=(0,a.createPromiseCapability)();return i.streamControllers[r].pullCall=t,i.postMessage({sourceName:s,targetName:l,stream:"pull",streamId:r,desiredSize:e.desiredSize}),t.promise},cancel:function(e){var t=(0,a.createPromiseCapability)();return i.streamControllers[r].cancelCall=t,i.streamControllers[r].isClosed=!0,i.postMessage({sourceName:s,targetName:l,stream:"cancel",reason:e,streamId:r}),t.promise}},n)},_createStreamSink:function(e){var t=this,n=this,o=this.actionHandler[e.action],i=e.streamId,r=e.desiredSize,s=this.sourceName,l=e.sourceName,d=(0,a.createPromiseCapability)(),u=function(e){var n=e.stream,o=e.chunk,a=e.transfers,r=e.success,c=e.reason;t.postMessage({sourceName:s,targetName:l,stream:n,streamId:i,chunk:o,success:r,reason:c},a)},p={enqueue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var o=this.desiredSize;this.desiredSize-=t,o>0&&this.desiredSize<=0&&(this.sinkCapability=(0,a.createPromiseCapability)(),this.ready=this.sinkCapability.promise),u({stream:"enqueue",chunk:e,transfers:n})}},close:function(){this.isCancelled||(this.isCancelled=!0,u({stream:"close"}),delete n.streamSinks[i])},error:function(e){this.isCancelled||(this.isCancelled=!0,u({stream:"error",reason:e}))},sinkCapability:d,onPull:null,onCancel:null,isCancelled:!1,desiredSize:r,ready:null};p.sinkCapability.resolve(),p.ready=p.sinkCapability.promise,this.streamSinks[i]=p,c(o[0],[e.data,p],o[1]).then((function(){u({stream:"start_complete",success:!0})}),(function(e){u({stream:"start_complete",success:!1,reason:e})}))},_processStreamMessage:function(e){var t=this,n=this.sourceName,o=e.sourceName,i=e.streamId,r=function(e){var a=e.stream,r=e.success,s=e.reason;t.comObj.postMessage({sourceName:n,targetName:o,stream:a,success:r,streamId:i,reason:s})},s=function(){Promise.all([t.streamControllers[e.streamId].startCall,t.streamControllers[e.streamId].pullCall,t.streamControllers[e.streamId].cancelCall].map((function(e){return e&&(t=e.promise,Promise.resolve(t).catch((function(){})));var t}))).then((function(){delete t.streamControllers[e.streamId]}))};switch(e.stream){case"start_complete":g(this.streamControllers[e.streamId].startCall,e.success,u(e.reason));break;case"pull_complete":g(this.streamControllers[e.streamId].pullCall,e.success,u(e.reason));break;case"pull":if(!this.streamSinks[e.streamId]){r({stream:"pull_complete",success:!0});break}this.streamSinks[e.streamId].desiredSize<=0&&e.desiredSize>0&&this.streamSinks[e.streamId].sinkCapability.resolve(),this.streamSinks[e.streamId].desiredSize=e.desiredSize,c(this.streamSinks[e.streamId].onPull).then((function(){r({stream:"pull_complete",success:!0})}),(function(e){r({stream:"pull_complete",success:!1,reason:e})}));break;case"enqueue":(0,a.assert)(this.streamControllers[e.streamId],"enqueue should have stream controller"),this.streamControllers[e.streamId].isClosed||this.streamControllers[e.streamId].controller.enqueue(e.chunk);break;case"close":if((0,a.assert)(this.streamControllers[e.streamId],"close should have stream controller"),this.streamControllers[e.streamId].isClosed)break;this.streamControllers[e.streamId].isClosed=!0,this.streamControllers[e.streamId].controller.close(),s();break;case"error":(0,a.assert)(this.streamControllers[e.streamId],"error should have stream controller"),this.streamControllers[e.streamId].controller.error(u(e.reason)),s();break;case"cancel_complete":g(this.streamControllers[e.streamId].cancelCall,e.success,u(e.reason)),s();break;case"cancel":if(!this.streamSinks[e.streamId])break;c(this.streamSinks[e.streamId].onCancel,[u(e.reason)]).then((function(){r({stream:"cancel_complete",success:!0})}),(function(e){r({stream:"cancel_complete",success:!1,reason:e})})),this.streamSinks[e.streamId].sinkCapability.reject(u(e.reason)),this.streamSinks[e.streamId].isCancelled=!0,delete this.streamSinks[e.streamId];break;default:throw new Error("Unexpected stream case")}},postMessage:function(e,t){t&&this.postMessageTransfers?this.comObj.postMessage(e,t):this.comObj.postMessage(e)},destroy:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var o=n(1),i=n(159);function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(0,o.assert)("string"==typeof t,"Metadata: input is not a string"),t=this._repair(t);var n=(new i.SimpleXMLParser).parseFromString(t);this._metadata=Object.create(null),n&&this._parse(n)}var t,n,r;return t=e,(n=[{key:"_repair",value:function(e){return e.replace(/^([^<]+)/,"").replace(/>\\376\\377([^<]+)/g,(function(e,t){for(var n=t.replace(/\\([0-3])([0-7])([0-7])/g,(function(e,t,n,o){return String.fromCharCode(64*t+8*n+1*o)})).replace(/&(amp|apos|gt|lt|quot);/g,(function(e,t){switch(t){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error("_repair: ".concat(t," isn't defined."))})),o="",i=0,a=n.length;i<a;i+=2){var r=256*n.charCodeAt(i)+n.charCodeAt(i+1);o+=r>=32&&r<127&&60!==r&&62!==r&&38!==r?String.fromCharCode(r):"&#x"+(65536+r).toString(16).substring(1)+";"}return">"+o}))}},{key:"_parse",value:function(e){var t=e.documentElement;if("rdf:rdf"!==t.nodeName.toLowerCase())for(t=t.firstChild;t&&"rdf:rdf"!==t.nodeName.toLowerCase();)t=t.nextSibling;var n=t?t.nodeName.toLowerCase():null;if(t&&"rdf:rdf"===n&&t.hasChildNodes())for(var o=t.childNodes,i=0,a=o.length;i<a;i++){var r=o[i];if("rdf:description"===r.nodeName.toLowerCase())for(var s=0,l=r.childNodes.length;s<l;s++)if("#text"!==r.childNodes[s].nodeName.toLowerCase()){var c=r.childNodes[s],d=c.nodeName.toLowerCase();this._metadata[d]=c.textContent.trim()}}}},{key:"get",value:function(e){var t=this._metadata[e];return void 0!==t?t:null}},{key:"getAll",value:function(){return this._metadata}},{key:"has",value:function(e){return void 0!==this._metadata[e]}}])&&a(t.prototype,n),r&&a(t,r),e}();t.Metadata=r},function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleXMLParser=void 0;var p=0,g=-2,h=-3,f=-4,m=-5,y=-6,v=-9;function _(e,t){var n=e[t];return" "===n||"\n"===n||"\r"===n||"\t"===n}var b=function(){function e(){c(this,e)}return u(e,[{key:"_resolveEntities",value:function(e){var t=this;return e.replace(/&([^;]+);/g,(function(e,n){if("#x"===n.substring(0,2))return String.fromCharCode(parseInt(n.substring(2),16));if("#"===n.substring(0,1))return String.fromCharCode(parseInt(n.substring(1),10));switch(n){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return t.onResolveEntity(n)}))}},{key:"_parseContent",value:function(e,t){var n,o=t,i=[];function a(){for(;o<e.length&&_(e,o);)++o}for(;o<e.length&&!_(e,o)&&">"!==e[o]&&"/"!==e[o];)++o;for(n=e.substring(t,o),a();o<e.length&&">"!==e[o]&&"/"!==e[o]&&"?"!==e[o];){a();for(var r,s="";o<e.length&&!_(e,o)&&"="!==e[o];)s+=e[o],++o;if(a(),"="!==e[o])return null;++o,a();var l=e[o];if('"'!==l&&"'"!==l)return null;var c=e.indexOf(l,++o);if(c<0)return null;r=e.substring(o,c),i.push({name:s,value:this._resolveEntities(r)}),o=c+1,a()}return{name:n,attributes:i,parsed:o-t}}},{key:"_parseProcessingInstruction",value:function(e,t){for(var n,o=t;o<e.length&&!_(e,o)&&">"!==e[o]&&"/"!==e[o];)++o;n=e.substring(t,o),function(){for(;o<e.length&&_(e,o);)++o}();for(var i=o;o<e.length&&("?"!==e[o]||">"!==e[o+1]);)++o;return{name:n,value:e.substring(i,o),parsed:o-t}}},{key:"parseXml",value:function(e){for(var t=0;t<e.length;){var n=t;if("<"===e[t]){var o=void 0;switch(e[++n]){case"/":if(++n,(o=e.indexOf(">",n))<0)return void this.onError(v);this.onEndElement(e.substring(n,o)),n=o+1;break;case"?":++n;var i=this._parseProcessingInstruction(e,n);if("?>"!==e.substring(n+i.parsed,n+i.parsed+2))return void this.onError(h);this.onPi(i.name,i.value),n+=i.parsed+2;break;case"!":if("--"===e.substring(n+1,n+3)){if((o=e.indexOf("--\x3e",n+3))<0)return void this.onError(m);this.onComment(e.substring(n+3,o)),n=o+3}else if("[CDATA["===e.substring(n+1,n+8)){if((o=e.indexOf("]]>",n+8))<0)return void this.onError(g);this.onCdata(e.substring(n+8,o)),n=o+3}else{if("DOCTYPE"!==e.substring(n+1,n+8))return void this.onError(y);var a=e.indexOf("[",n+8),r=!1;if((o=e.indexOf(">",n+8))<0)return void this.onError(f);if(a>0&&o>a){if((o=e.indexOf("]>",n+8))<0)return void this.onError(f);r=!0}var s=e.substring(n+8,o+(r?1:0));this.onDoctype(s),n=o+(r?2:1)}break;default:var l=this._parseContent(e,n);if(null===l)return void this.onError(y);var c=!1;if("/>"===e.substring(n+l.parsed,n+l.parsed+2))c=!0;else if(">"!==e.substring(n+l.parsed,n+l.parsed+1))return void this.onError(v);this.onBeginElement(l.name,l.attributes,c),n+=l.parsed+(c?2:1)}}else{for(;n<e.length&&"<"!==e[n];)n++;var d=e.substring(t,n);this.onText(this._resolveEntities(d))}t=n}}},{key:"onResolveEntity",value:function(e){return"&".concat(e,";")}},{key:"onPi",value:function(e,t){}},{key:"onComment",value:function(e){}},{key:"onCdata",value:function(e){}},{key:"onDoctype",value:function(e){}},{key:"onText",value:function(e){}},{key:"onBeginElement",value:function(e,t,n){}},{key:"onEndElement",value:function(e){}},{key:"onError",value:function(e){}}]),e}(),w=function(){function e(t,n){c(this,e),this.nodeName=t,this.nodeValue=n,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}return u(e,[{key:"hasChildNodes",value:function(){return this.childNodes&&this.childNodes.length>0}},{key:"firstChild",get:function(){return this.childNodes&&this.childNodes[0]}},{key:"nextSibling",get:function(){var e=this.parentNode.childNodes;if(e){var t=e.indexOf(this);if(-1!==t)return e[t+1]}}},{key:"textContent",get:function(){return this.childNodes?this.childNodes.map((function(e){return e.textContent})).join(""):this.nodeValue||""}}]),e}(),C=function(e){function t(){var e;return c(this,t),(e=a(this,s(t).call(this)))._currentFragment=null,e._stack=null,e._errorCode=p,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),u(t,[{key:"parseFromString",value:function(e){if(this._currentFragment=[],this._stack=[],this._errorCode=p,this.parseXml(e),this._errorCode===p){var t=i(this._currentFragment,1)[0];if(t)return{documentElement:t}}}},{key:"onResolveEntity",value:function(e){switch(e){case"apos":return"'"}return r(s(t.prototype),"onResolveEntity",this).call(this,e)}},{key:"onText",value:function(e){if(!function(e){for(var t=0,n=e.length;t<n;t++)if(!_(e,t))return!1;return!0}(e)){var t=new w("#text",e);this._currentFragment.push(t)}}},{key:"onCdata",value:function(e){var t=new w("#text",e);this._currentFragment.push(t)}},{key:"onBeginElement",value:function(e,t,n){var o=new w(e);o.childNodes=[],this._currentFragment.push(o),n||(this._stack.push(this._currentFragment),this._currentFragment=o.childNodes)}},{key:"onEndElement",value:function(e){this._currentFragment=this._stack.pop()||[];var t=this._currentFragment[this._currentFragment.length-1];if(t)for(var n=0,o=t.childNodes.length;n<o;n++)t.childNodes[n].parentNode=t}},{key:"onError",value:function(e){this._errorCode=e}}]),t}(b);t.SimpleXMLParser=C},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var o,i=(o=n(147))&&o.__esModule?o:{default:o},a=n(1);function r(e,t,n,o,i,a,r){try{var s=e[a](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,l,"next",e)}function l(e){r(a,o,i,s,l,"throw",e)}s(void 0)}))}}var l=function(){function e(e,t){var n=this;(0,a.assert)(t),this._queuedChunks=[];var o=e.initialData;if(o&&o.length>0){var i=new Uint8Array(o).buffer;this._queuedChunks.push(i)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._contentLength=e.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((function(e,t){n._onReceiveData({begin:e,chunk:t})})),this._pdfDataRangeTransport.addProgressListener((function(e){n._onProgress({loaded:e})})),this._pdfDataRangeTransport.addProgressiveReadListener((function(e){n._onReceiveData({chunk:e})})),this._pdfDataRangeTransport.transportReady()}function t(e,t){this._stream=e,this._done=!1,this._filename=null,this._queuedChunks=t||[],this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}var n,o;function r(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}return e.prototype={_onReceiveData:function(e){var t=new Uint8Array(e.chunk).buffer;if(void 0===e.begin)this._fullRequestReader?this._fullRequestReader._enqueue(t):this._queuedChunks.push(t);else{var n=this._rangeReaders.some((function(n){return n._begin===e.begin&&(n._enqueue(t),!0)}));(0,a.assert)(n)}},_onProgress:function(e){if(this._rangeReaders.length>0){var t=this._rangeReaders[0];t.onProgress&&t.onProgress({loaded:e.loaded})}},_removeRangeReader:function(e){var t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)},getFullReader:function(){(0,a.assert)(!this._fullRequestReader);var e=this._queuedChunks;return this._queuedChunks=null,new t(this,e)},getRangeReader:function(e,t){var n=new r(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n},cancelAllRequests:function(e){this._fullRequestReader&&this._fullRequestReader.cancel(e),this._rangeReaders.slice(0).forEach((function(t){t.cancel(e)})),this._pdfDataRangeTransport.abort()}},t.prototype={_enqueue:function(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e))},get headersReady(){return this._headersReady},get filename(){return this._filename},get isRangeSupported(){return this._stream._isRangeSupported},get isStreamingSupported(){return this._stream._isStreamingSupported},get contentLength(){return this._stream._contentLength},read:(n=s(i.default.mark((function e(){var t,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._queuedChunks.length>0)){e.next=3;break}return t=this._queuedChunks.shift(),e.abrupt("return",{value:t,done:!1});case 3:if(!this._done){e.next=5;break}return e.abrupt("return",{value:void 0,done:!0});case 5:return n=(0,a.createPromiseCapability)(),this._requests.push(n),e.abrupt("return",n.promise);case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),cancel:function(e){this._done=!0,this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[]}},r.prototype={_enqueue:function(e){this._done||(0===this._requests.length?this._queuedChunk=e:(this._requests.shift().resolve({value:e,done:!1}),this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[]),this._done=!0,this._stream._removeRangeReader(this))},get isStreamingSupported(){return!1},read:(o=s(i.default.mark((function e(){var t,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._queuedChunk){e.next=4;break}return t=this._queuedChunk,this._queuedChunk=null,e.abrupt("return",{value:t,done:!1});case 4:if(!this._done){e.next=6;break}return e.abrupt("return",{value:void 0,done:!0});case 6:return n=(0,a.createPromiseCapability)(),this._requests.push(n),e.abrupt("return",n.promise);case 9:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),cancel:function(e){this._done=!0,this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[],this._stream._removeRangeReader(this)}},e}();t.PDFDataTransportStream=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLContext=void 0;var o=n(1);function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a=function(){function e(t){var n=t.enable,o=void 0!==n&&n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._enabled=!0===o}var t,n,a;return t=e,(n=[{key:"composeSMask",value:function(e){var t=e.layer,n=e.mask,o=e.properties;return r.composeSMask(t,n,o)}},{key:"drawFigures",value:function(e){var t=e.width,n=e.height,o=e.backgroundColor,i=e.figures,a=e.context;return r.drawFigures(t,n,o,i,a)}},{key:"clear",value:function(){r.cleanup()}},{key:"isEnabled",get:function(){var e=this._enabled;return e&&(e=r.tryInitGL()),(0,o.shadow)(this,"isEnabled",e)}}])&&i(t.prototype,n),a&&i(t,a),e}();t.WebGLContext=a;var r=function(){function e(e,t,n){var o=e.createShader(n);if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){var i=e.getShaderInfoLog(o);throw new Error("Error during shader compilation: "+i)}return o}function t(t,n){return e(t,n,t.VERTEX_SHADER)}function n(t,n){return e(t,n,t.FRAGMENT_SHADER)}function o(e,t){for(var n=e.createProgram(),o=0,i=t.length;o<i;++o)e.attachShader(n,t[o]);if(e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS)){var a=e.getProgramInfoLog(n);throw new Error("Error during program linking: "+a)}return n}function i(e,t,n){e.activeTexture(n);var o=e.createTexture();return e.bindTexture(e.TEXTURE_2D,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),o}var a,r;function s(){a||(r=document.createElement("canvas"),a=r.getContext("webgl",{premultipliedalpha:!1}))}var l=null,c=null;return{tryInitGL:function(){try{return s(),!!a}catch(e){}return!1},composeSMask:function(e,c,d){var u=e.width,p=e.height;l||function(){var e,i;s(),e=r,r=null,i=a,a=null;var c=o(i,[t(i,"  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             "),n(i,"  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ")]);i.useProgram(c);var d={};d.gl=i,d.canvas=e,d.resolutionLocation=i.getUniformLocation(c,"u_resolution"),d.positionLocation=i.getAttribLocation(c,"a_position"),d.backdropLocation=i.getUniformLocation(c,"u_backdrop"),d.subtypeLocation=i.getUniformLocation(c,"u_subtype");var u=i.getAttribLocation(c,"a_texCoord"),p=i.getUniformLocation(c,"u_image"),g=i.getUniformLocation(c,"u_mask"),h=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,h),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),i.STATIC_DRAW),i.enableVertexAttribArray(u),i.vertexAttribPointer(u,2,i.FLOAT,!1,0,0),i.uniform1i(p,0),i.uniform1i(g,1),l=d}();var g=l,h=g.canvas,f=g.gl;h.width=u,h.height=p,f.viewport(0,0,f.drawingBufferWidth,f.drawingBufferHeight),f.uniform2f(g.resolutionLocation,u,p),d.backdrop?f.uniform4f(g.resolutionLocation,d.backdrop[0],d.backdrop[1],d.backdrop[2],1):f.uniform4f(g.resolutionLocation,0,0,0,0),f.uniform1i(g.subtypeLocation,"Luminosity"===d.subtype?1:0);var m=i(f,e,f.TEXTURE0),y=i(f,c,f.TEXTURE1),v=f.createBuffer();return f.bindBuffer(f.ARRAY_BUFFER,v),f.bufferData(f.ARRAY_BUFFER,new Float32Array([0,0,u,0,0,p,0,p,u,0,u,p]),f.STATIC_DRAW),f.enableVertexAttribArray(g.positionLocation),f.vertexAttribPointer(g.positionLocation,2,f.FLOAT,!1,0,0),f.clearColor(0,0,0,0),f.enable(f.BLEND),f.blendFunc(f.ONE,f.ONE_MINUS_SRC_ALPHA),f.clear(f.COLOR_BUFFER_BIT),f.drawArrays(f.TRIANGLES,0,6),f.flush(),f.deleteTexture(m),f.deleteTexture(y),f.deleteBuffer(v),h},drawFigures:function(e,i,l,d,u){c||function(){var e,i;s(),e=r,r=null,i=a,a=null;var l=o(i,[t(i,"  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             "),n(i,"  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ")]);i.useProgram(l);var d={};d.gl=i,d.canvas=e,d.resolutionLocation=i.getUniformLocation(l,"u_resolution"),d.scaleLocation=i.getUniformLocation(l,"u_scale"),d.offsetLocation=i.getUniformLocation(l,"u_offset"),d.positionLocation=i.getAttribLocation(l,"a_position"),d.colorLocation=i.getAttribLocation(l,"a_color"),c=d}();var p=c,g=p.canvas,h=p.gl;g.width=e,g.height=i,h.viewport(0,0,h.drawingBufferWidth,h.drawingBufferHeight),h.uniform2f(p.resolutionLocation,e,i);var f,m,y,v=0;for(f=0,m=d.length;f<m;f++)switch(d[f].type){case"lattice":v+=((y=d[f].coords.length/d[f].verticesPerRow|0)-1)*(d[f].verticesPerRow-1)*6;break;case"triangles":v+=d[f].coords.length}var _=new Float32Array(2*v),b=new Uint8Array(3*v),w=u.coords,C=u.colors,x=0,S=0;for(f=0,m=d.length;f<m;f++){var E=d[f],A=E.coords,T=E.colors;switch(E.type){case"lattice":var G=E.verticesPerRow;y=A.length/G|0;for(var P=1;P<y;P++)for(var D=P*G+1,L=1;L<G;L++,D++)_[x]=w[A[D-G-1]],_[x+1]=w[A[D-G-1]+1],_[x+2]=w[A[D-G]],_[x+3]=w[A[D-G]+1],_[x+4]=w[A[D-1]],_[x+5]=w[A[D-1]+1],b[S]=C[T[D-G-1]],b[S+1]=C[T[D-G-1]+1],b[S+2]=C[T[D-G-1]+2],b[S+3]=C[T[D-G]],b[S+4]=C[T[D-G]+1],b[S+5]=C[T[D-G]+2],b[S+6]=C[T[D-1]],b[S+7]=C[T[D-1]+1],b[S+8]=C[T[D-1]+2],_[x+6]=_[x+2],_[x+7]=_[x+3],_[x+8]=_[x+4],_[x+9]=_[x+5],_[x+10]=w[A[D]],_[x+11]=w[A[D]+1],b[S+9]=b[S+3],b[S+10]=b[S+4],b[S+11]=b[S+5],b[S+12]=b[S+6],b[S+13]=b[S+7],b[S+14]=b[S+8],b[S+15]=C[T[D]],b[S+16]=C[T[D]+1],b[S+17]=C[T[D]+2],x+=12,S+=18;break;case"triangles":for(var I=0,k=A.length;I<k;I++)_[x]=w[A[I]],_[x+1]=w[A[I]+1],b[S]=C[T[I]],b[S+1]=C[T[I]+1],b[S+2]=C[T[I]+2],x+=2,S+=3}}l?h.clearColor(l[0]/255,l[1]/255,l[2]/255,1):h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT);var O=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,O),h.bufferData(h.ARRAY_BUFFER,_,h.STATIC_DRAW),h.enableVertexAttribArray(p.positionLocation),h.vertexAttribPointer(p.positionLocation,2,h.FLOAT,!1,0,0);var F=h.createBuffer();return h.bindBuffer(h.ARRAY_BUFFER,F),h.bufferData(h.ARRAY_BUFFER,b,h.STATIC_DRAW),h.enableVertexAttribArray(p.colorLocation),h.vertexAttribPointer(p.colorLocation,3,h.UNSIGNED_BYTE,!1,0,0),h.uniform2f(p.scaleLocation,u.scaleX,u.scaleY),h.uniform2f(p.offsetLocation,u.offsetX,u.offsetY),h.drawArrays(h.TRIANGLES,0,v),h.flush(),h.deleteBuffer(O),h.deleteBuffer(F),g},cleanup:function(){l&&l.canvas&&(l.canvas.width=0,l.canvas.height=0),c&&c.canvas&&(c.canvas.width=0,c.canvas.height=0),l=null,c=null}}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderTextLayer=void 0;var o,i=n(1),a=(o=n(3))&&o.__esModule?o:{default:o},r=function(){var e=/\S/,t=["left: ",0,"px; top: ",0,"px; font-size: ",0,"px; font-family: ","",";"];function n(n,o,a){var r,s=document.createElement("span"),l={style:null,angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(n._textDivs.push(s),r=o.str,!e.test(r))return l.isWhitespace=!0,void n._textDivProperties.set(s,l);var c=i.Util.transform(n._viewport.transform,o.transform),d=Math.atan2(c[1],c[0]),u=a[o.fontName];u.vertical&&(d+=Math.PI/2);var p,g,h=Math.sqrt(c[2]*c[2]+c[3]*c[3]),f=h;if(u.ascent?f=u.ascent*f:u.descent&&(f=(1+u.descent)*f),0===d?(p=c[4],g=c[5]-f):(p=c[4]+f*Math.sin(d),g=c[5]-f*Math.cos(d)),t[1]=p,t[3]=g,t[5]=h,t[7]=u.fontFamily,l.style=t.join(""),s.setAttribute("style",l.style),s.textContent=o.str,n._fontInspectorEnabled&&(s.dataset.fontName=o.fontName),0!==d&&(l.angle=d*(180/Math.PI)),o.str.length>1&&(u.vertical?l.canvasWidth=o.height*n._viewport.scale:l.canvasWidth=o.width*n._viewport.scale),n._textDivProperties.set(s,l),n._textContentStream&&n._layoutText(s),n._enhanceTextSelection){var m=1,y=0;0!==d&&(m=Math.cos(d),y=Math.sin(d));var v,_,b=(u.vertical?o.height:o.width)*n._viewport.scale,w=h;0!==d?(v=[m,y,-y,m,p,g],_=i.Util.getAxialAlignedBoundingBox([0,0,b,w],v)):_=[p,g,p+b,g+w],n._bounds.push({left:_[0],top:_[1],right:_[2],bottom:_[3],div:s,size:[b,w],m:v})}}function o(e){if(!e._canceled){var t=e._textDivs,n=e._capability,o=t.length;if(o>1e5)return e._renderingDone=!0,void n.resolve();if(!e._textContentStream)for(var i=0;i<o;i++)e._layoutText(t[i]);e._renderingDone=!0,n.resolve()}}function r(e){for(var t=e._bounds,n=e._viewport,o=function(e,t,n){var o=n.map((function(e,t){return{x1:e.left,y1:e.top,x2:e.right,y2:e.bottom,index:t,x1New:void 0,x2New:void 0}}));s(e,o);var i=new Array(n.length);return o.forEach((function(e){var t=e.index;i[t]={left:e.x1New,top:0,right:e.x2New,bottom:0}})),n.map((function(t,n){var a=i[n],r=o[n];r.x1=t.top,r.y1=e-a.right,r.x2=t.bottom,r.y2=e-a.left,r.index=n,r.x1New=void 0,r.x2New=void 0})),s(t,o),o.forEach((function(e){var t=e.index;i[t].top=e.x1New,i[t].bottom=e.x2New})),i}(n.width,n.height,t),a=0;a<o.length;a++){var r=t[a].div,l=e._textDivProperties.get(r);if(0!==l.angle){var c=o[a],d=t[a],u=d.m,p=u[0],g=u[1],h=[[0,0],[0,d.size[1]],[d.size[0],0],d.size],f=new Float64Array(64);h.forEach((function(e,t){var n=i.Util.applyTransform(e,u);f[t+0]=p&&(c.left-n[0])/p,f[t+4]=g&&(c.top-n[1])/g,f[t+8]=p&&(c.right-n[0])/p,f[t+12]=g&&(c.bottom-n[1])/g,f[t+16]=g&&(c.left-n[0])/-g,f[t+20]=p&&(c.top-n[1])/p,f[t+24]=g&&(c.right-n[0])/-g,f[t+28]=p&&(c.bottom-n[1])/p,f[t+32]=p&&(c.left-n[0])/-p,f[t+36]=g&&(c.top-n[1])/-g,f[t+40]=p&&(c.right-n[0])/-p,f[t+44]=g&&(c.bottom-n[1])/-g,f[t+48]=g&&(c.left-n[0])/g,f[t+52]=p&&(c.top-n[1])/-p,f[t+56]=g&&(c.right-n[0])/g,f[t+60]=p&&(c.bottom-n[1])/-p}));var m=function(e,t,n){for(var o=0,i=0;i<n;i++){var a=e[t++];a>0&&(o=o?Math.min(a,o):a)}return o},y=1+Math.min(Math.abs(p),Math.abs(g));l.paddingLeft=m(f,32,16)/y,l.paddingTop=m(f,48,16)/y,l.paddingRight=m(f,0,16)/y,l.paddingBottom=m(f,16,16)/y,e._textDivProperties.set(r,l)}else l.paddingLeft=t[a].left-o[a].left,l.paddingTop=t[a].top-o[a].top,l.paddingRight=o[a].right-t[a].right,l.paddingBottom=o[a].bottom-t[a].bottom,e._textDivProperties.set(r,l)}}function s(e,t){t.sort((function(e,t){return e.x1-t.x1||e.index-t.index}));var n=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];t.forEach((function(e){for(var t=0;t<n.length&&n[t].end<=e.y1;)t++;for(var o,i,a=n.length-1;a>=0&&n[a].start>=e.y2;)a--;var r,s,l=-1/0;for(r=t;r<=a;r++){var c;(c=(i=(o=n[r]).boundary).x2>e.x1?i.index>e.index?i.x1New:e.x1:void 0===i.x2New?(i.x2+e.x1)/2:i.x2New)>l&&(l=c)}for(e.x1New=l,r=t;r<=a;r++)void 0===(i=(o=n[r]).boundary).x2New?i.x2>e.x1?i.index>e.index&&(i.x2New=i.x2):i.x2New=l:i.x2New>l&&(i.x2New=Math.max(l,i.x2));var d=[],u=null;for(r=t;r<=a;r++){var p=(i=(o=n[r]).boundary).x2>e.x2?i:e;u===p?d[d.length-1].end=o.end:(d.push({start:o.start,end:o.end,boundary:p}),u=p)}for(n[t].start<e.y1&&(d[0].start=e.y1,d.unshift({start:n[t].start,end:e.y1,boundary:n[t].boundary})),e.y2<n[a].end&&(d[d.length-1].end=e.y2,d.push({start:e.y2,end:n[a].end,boundary:n[a].boundary})),r=t;r<=a;r++)if(void 0===(i=(o=n[r]).boundary).x2New){var g=!1;for(s=t-1;!g&&s>=0&&n[s].start>=i.y1;s--)g=n[s].boundary===i;for(s=a+1;!g&&s<n.length&&n[s].end<=i.y2;s++)g=n[s].boundary===i;for(s=0;!g&&s<d.length;s++)g=d[s].boundary===i;g||(i.x2New=l)}Array.prototype.splice.apply(n,[t,a-t+1].concat(d))})),n.forEach((function(t){var n=t.boundary;void 0===n.x2New&&(n.x2New=Math.max(e,n.x2))}))}function l(e){var t=e.textContent,n=e.textContentStream,o=e.container,r=e.viewport,s=e.textDivs,l=e.textContentItemsStr,c=e.enhanceTextSelection;this._textContent=t,this._textContentStream=n,this._container=o,this._viewport=r,this._textDivs=s||[],this._textContentItemsStr=l||[],this._enhanceTextSelection=!!c,this._fontInspectorEnabled=!(!a.default.FontInspector||!a.default.FontInspector.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,i.createPromiseCapability)(),this._renderTimer=null,this._bounds=[]}return l.prototype={get promise(){return this._capability.promise},cancel:function(){this._reader&&(this._reader.cancel(new i.AbortException("text layer task cancelled")),this._reader=null),this._canceled=!0,null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject("canceled")},_processItems:function(e,t){for(var o=0,i=e.length;o<i;o++)this._textContentItemsStr.push(e[o].str),n(this,e[o],t)},_layoutText:function(e){var t=this._container,n=this._textDivProperties.get(e);if(!n.isWhitespace){var o=e.style.fontSize,i=e.style.fontFamily;o===this._layoutTextLastFontSize&&i===this._layoutTextLastFontFamily||(this._layoutTextCtx.font=o+" "+i,this._layoutTextLastFontSize=o,this._layoutTextLastFontFamily=i);var a=this._layoutTextCtx.measureText(e.textContent).width,r="";0!==n.canvasWidth&&a>0&&(n.scale=n.canvasWidth/a,r="scaleX(".concat(n.scale,")")),0!==n.angle&&(r="rotate(".concat(n.angle,"deg) ").concat(r)),r.length>0&&(n.originalTransform=r,e.style.transform=r),this._textDivProperties.set(e,n),t.appendChild(e)}},_render:function(e){var t=this,n=(0,i.createPromiseCapability)(),a=Object.create(null),r=document.createElement("canvas");if(r.mozOpaque=!0,this._layoutTextCtx=r.getContext("2d",{alpha:!1}),this._textContent){var s=this._textContent.items,l=this._textContent.styles;this._processItems(s,l),n.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');this._reader=this._textContentStream.getReader(),function e(){t._reader.read().then((function(o){var i=o.value;o.done?n.resolve():(Object.assign(a,i.styles),t._processItems(i.items,a),e())}),n.reject)}()}n.promise.then((function(){a=null,e?t._renderTimer=setTimeout((function(){o(t),t._renderTimer=null}),e):o(t)}),this._capability.reject)},expandTextDivs:function(e){if(this._enhanceTextSelection&&this._renderingDone){null!==this._bounds&&(r(this),this._bounds=null);for(var t=0,n=this._textDivs.length;t<n;t++){var o=this._textDivs[t],i=this._textDivProperties.get(o);if(!i.isWhitespace)if(e){var a="",s="";1!==i.scale&&(a="scaleX("+i.scale+")"),0!==i.angle&&(a="rotate("+i.angle+"deg) "+a),0!==i.paddingLeft&&(s+=" padding-left: "+i.paddingLeft/i.scale+"px;",a+=" translateX("+-i.paddingLeft/i.scale+"px)"),0!==i.paddingTop&&(s+=" padding-top: "+i.paddingTop+"px;",a+=" translateY("+-i.paddingTop+"px)"),0!==i.paddingRight&&(s+=" padding-right: "+i.paddingRight/i.scale+"px;"),0!==i.paddingBottom&&(s+=" padding-bottom: "+i.paddingBottom+"px;"),""!==s&&o.setAttribute("style",i.style+s),""!==a&&(o.style.transform=a)}else o.style.padding=0,o.style.transform=i.originalTransform||""}}}},function(e){var t=new l({textContent:e.textContent,textContentStream:e.textContentStream,container:e.container,viewport:e.viewport,textDivs:e.textDivs,textContentItemsStr:e.textContentItemsStr,enhanceTextSelection:e.enhanceTextSelection});return t._render(e.timeout),t}}();t.renderTextLayer=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var o=n(151),i=n(1);function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}var f=function(){function e(){p(this,e)}return h(e,null,[{key:"create",value:function(e){switch(e.data.annotationType){case i.AnnotationType.LINK:return new y(e);case i.AnnotationType.TEXT:return new v(e);case i.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new b(e);case"Btn":return e.data.radioButton?new C(e):e.data.checkBox?new w(e):new x(e);case"Ch":return new S(e)}return new _(e);case i.AnnotationType.POPUP:return new E(e);case i.AnnotationType.LINE:return new T(e);case i.AnnotationType.SQUARE:return new G(e);case i.AnnotationType.CIRCLE:return new P(e);case i.AnnotationType.POLYLINE:return new D(e);case i.AnnotationType.INK:return new I(e);case i.AnnotationType.POLYGON:return new L(e);case i.AnnotationType.HIGHLIGHT:return new k(e);case i.AnnotationType.UNDERLINE:return new O(e);case i.AnnotationType.SQUIGGLY:return new F(e);case i.AnnotationType.STRIKEOUT:return new R(e);case i.AnnotationType.STAMP:return new M(e);case i.AnnotationType.FILEATTACHMENT:return new N(e);default:return new m(e)}}}]),e}(),m=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];p(this,e),this.isRenderable=n,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderInteractiveForms=t.renderInteractiveForms,this.svgFactory=t.svgFactory,n&&(this.container=this._createContainer(o))}return h(e,[{key:"_createContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.data,n=this.page,o=this.viewport,a=document.createElement("section"),r=t.rect[2]-t.rect[0],s=t.rect[3]-t.rect[1];a.setAttribute("data-annotation-id",t.id);var l=i.Util.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]);if(a.style.transform="matrix("+o.transform.join(",")+")",a.style.transformOrigin=-l[0]+"px "+-l[1]+"px",!e&&t.borderStyle.width>0){a.style.borderWidth=t.borderStyle.width+"px",t.borderStyle.style!==i.AnnotationBorderStyleType.UNDERLINE&&(r-=2*t.borderStyle.width,s-=2*t.borderStyle.width);var c=t.borderStyle.horizontalCornerRadius,d=t.borderStyle.verticalCornerRadius;if(c>0||d>0){var u=c+"px / "+d+"px";a.style.borderRadius=u}switch(t.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:a.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:a.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:a.style.borderBottomStyle="solid"}t.color?a.style.borderColor=i.Util.makeCssRgb(0|t.color[0],0|t.color[1],0|t.color[2]):a.style.borderWidth=0}return a.style.left=l[0]+"px",a.style.top=l[1]+"px",a.style.width=r+"px",a.style.height=s+"px",a}},{key:"_createPopup",value:function(e,t,n){t||((t=document.createElement("div")).style.height=e.style.height,t.style.width=e.style.width,e.appendChild(t));var o=new A({container:e,trigger:t,color:n.color,title:n.title,contents:n.contents,hideWrapper:!0}).render();o.style.left=e.style.width,e.appendChild(o)}},{key:"render",value:function(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}}]),e}(),y=function(e){function t(e){p(this,t);var n=!!(e.data.url||e.data.dest||e.data.action);return s(this,c(t).call(this,e,n))}return d(t,e),h(t,[{key:"render",value:function(){this.container.className="linkAnnotation";var e=this.data,t=this.linkService,n=document.createElement("a");return(0,o.addLinkAttributes)(n,{url:e.url,target:e.newWindow?o.LinkTarget.BLANK:t.externalLinkTarget,rel:t.externalLinkRel}),e.url||(e.action?this._bindNamedAction(n,e.action):this._bindLink(n,e.dest)),this.container.appendChild(n),this.container}},{key:"_bindLink",value:function(e,t){var n=this;e.href=this.linkService.getDestinationHash(t),e.onclick=function(){return t&&n.linkService.navigateTo(t),!1},t&&(e.className="internalLink")}},{key:"_bindNamedAction",value:function(e,t){var n=this;e.href=this.linkService.getAnchorUrl(""),e.onclick=function(){return n.linkService.executeNamedAction(t),!1},e.className="internalLink"}}]),t}(m),v=function(e){function t(e){p(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return s(this,c(t).call(this,e,n))}return d(t,e),h(t,[{key:"render",value:function(){this.container.className="textAnnotation";var e=document.createElement("img");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,e,this.data),this.container.appendChild(e),this.container}}]),t}(m),_=function(e){function t(){return p(this,t),s(this,c(t).apply(this,arguments))}return d(t,e),h(t,[{key:"render",value:function(){return this.container}}]),t}(m),b=function(e){function t(e){p(this,t);var n=e.renderInteractiveForms||!e.data.hasAppearance&&!!e.data.fieldValue;return s(this,c(t).call(this,e,n))}return d(t,e),h(t,[{key:"render",value:function(){this.container.className="textWidgetAnnotation";var e=null;if(this.renderInteractiveForms){if(this.data.multiLine?(e=document.createElement("textarea")).textContent=this.data.fieldValue:((e=document.createElement("input")).type="text",e.setAttribute("value",this.data.fieldValue)),e.disabled=this.data.readOnly,null!==this.data.maxLen&&(e.maxLength=this.data.maxLen),this.data.comb){var t=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;e.classList.add("comb"),e.style.letterSpacing="calc("+t+"px - 1ch)"}}else{(e=document.createElement("div")).textContent=this.data.fieldValue,e.style.verticalAlign="middle",e.style.display="table-cell";var n=null;this.data.fontRefName&&this.page.commonObjs.has(this.data.fontRefName)&&(n=this.page.commonObjs.get(this.data.fontRefName)),this._setTextStyle(e,n)}return null!==this.data.textAlignment&&(e.style.textAlign=["left","center","right"][this.data.textAlignment]),this.container.appendChild(e),this.container}},{key:"_setTextStyle",value:function(e,t){var n=e.style;if(n.fontSize=this.data.fontSize+"px",n.direction=this.data.fontDirection<0?"rtl":"ltr",t){n.fontWeight=t.black?t.bold?"900":"bold":t.bold?"bold":"normal",n.fontStyle=t.italic?"italic":"normal";var o=t.loadedName?'"'+t.loadedName+'", ':"",i=t.fallbackName||"Helvetica, sans-serif";n.fontFamily=o+i}}}]),t}(_),w=function(e){function t(e){return p(this,t),s(this,c(t).call(this,e,e.renderInteractiveForms))}return d(t,e),h(t,[{key:"render",value:function(){this.container.className="buttonWidgetAnnotation checkBox";var e=document.createElement("input");return e.disabled=this.data.readOnly,e.type="checkbox",this.data.fieldValue&&"Off"!==this.data.fieldValue&&e.setAttribute("checked",!0),this.container.appendChild(e),this.container}}]),t}(_),C=function(e){function t(e){return p(this,t),s(this,c(t).call(this,e,e.renderInteractiveForms))}return d(t,e),h(t,[{key:"render",value:function(){this.container.className="buttonWidgetAnnotation radioButton";var e=document.createElement("input");return e.disabled=this.data.readOnly,e.type="radio",e.name=this.data.fieldName,this.data.fieldValue===this.data.buttonValue&&e.setAttribute("checked",!0),this.container.appendChild(e),this.container}}]),t}(_),x=function(e){function t(){return p(this,t),s(this,c(t).apply(this,arguments))}return d(t,e),h(t,[{key:"render",value:function(){var e=a(c(t.prototype),"render",this).call(this);return e.className="buttonWidgetAnnotation pushButton",e}}]),t}(y),S=function(e){function t(e){return p(this,t),s(this,c(t).call(this,e,e.renderInteractiveForms))}return d(t,e),h(t,[{key:"render",value:function(){this.container.className="choiceWidgetAnnotation";var e=document.createElement("select");e.disabled=this.data.readOnly,this.data.combo||(e.size=this.data.options.length,this.data.multiSelect&&(e.multiple=!0));for(var t=0,n=this.data.options.length;t<n;t++){var o=this.data.options[t],i=document.createElement("option");i.textContent=o.displayValue,i.value=o.exportValue,this.data.fieldValue.includes(o.displayValue)&&i.setAttribute("selected",!0),e.appendChild(i)}return this.container.appendChild(e),this.container}}]),t}(_),E=function(e){function t(e){p(this,t);var n=!(!e.data.title&&!e.data.contents);return s(this,c(t).call(this,e,n))}return d(t,e),h(t,[{key:"render",value:function(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;var e='[data-annotation-id="'+this.data.parentId+'"]',t=this.layer.querySelector(e);if(!t)return this.container;var n=new A({container:this.container,trigger:t,color:this.data.color,title:this.data.title,contents:this.data.contents}),o=parseFloat(t.style.left),i=parseFloat(t.style.width);return this.container.style.transformOrigin=-(o+i)+"px -"+t.style.top,this.container.style.left=o+i+"px",this.container.appendChild(n.render()),this.container}}]),t}(m),A=function(){function e(t){p(this,e),this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.title=t.title,this.contents=t.contents,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}return h(e,[{key:"render",value:function(){var e=document.createElement("div");e.className="popupWrapper",this.hideElement=this.hideWrapper?e:this.container,this.hideElement.setAttribute("hidden",!0);var t=document.createElement("div");t.className="popup";var n=this.color;if(n){var o=.7*(255-n[0])+n[0],a=.7*(255-n[1])+n[1],r=.7*(255-n[2])+n[2];t.style.backgroundColor=i.Util.makeCssRgb(0|o,0|a,0|r)}var s=this._formatContents(this.contents),l=document.createElement("h1");return l.textContent=this.title,this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),t.addEventListener("click",this._hide.bind(this,!0)),t.appendChild(l),t.appendChild(s),e.appendChild(t),e}},{key:"_formatContents",value:function(e){for(var t=document.createElement("p"),n=e.split(/(?:\r\n?|\n)/),o=0,i=n.length;o<i;++o){var a=n[o];t.appendChild(document.createTextNode(a)),o<i-1&&t.appendChild(document.createElement("br"))}return t}},{key:"_toggle",value:function(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)}},{key:"_hide",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&(this.pinned=!1),this.hideElement.hasAttribute("hidden")||this.pinned||(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}}]),e}(),T=function(e){function t(e){p(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return s(this,c(t).call(this,e,n,!0))}return d(t,e),h(t,[{key:"render",value:function(){this.container.className="lineAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],o=this.svgFactory.create(t,n),i=this.svgFactory.createElement("svg:line");return i.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),i.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),i.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),i.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),i.setAttribute("stroke-width",e.borderStyle.width),i.setAttribute("stroke","transparent"),o.appendChild(i),this.container.append(o),this._createPopup(this.container,i,e),this.container}}]),t}(m),G=function(e){function t(e){p(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return s(this,c(t).call(this,e,n,!0))}return d(t,e),h(t,[{key:"render",value:function(){this.container.className="squareAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],o=this.svgFactory.create(t,n),i=e.borderStyle.width,a=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",i/2),a.setAttribute("y",i/2),a.setAttribute("width",t-i),a.setAttribute("height",n-i),a.setAttribute("stroke-width",i),a.setAttribute("stroke","transparent"),a.setAttribute("fill","none"),o.appendChild(a),this.container.append(o),this._createPopup(this.container,a,e),this.container}}]),t}(m),P=function(e){function t(e){p(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return s(this,c(t).call(this,e,n,!0))}return d(t,e),h(t,[{key:"render",value:function(){this.container.className="circleAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],o=this.svgFactory.create(t,n),i=e.borderStyle.width,a=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",t/2),a.setAttribute("cy",n/2),a.setAttribute("rx",t/2-i/2),a.setAttribute("ry",n/2-i/2),a.setAttribute("stroke-width",i),a.setAttribute("stroke","transparent"),a.setAttribute("fill","none"),o.appendChild(a),this.container.append(o),this._createPopup(this.container,a,e),this.container}}]),t}(m),D=function(e){function t(e){var n;p(this,t);var o=!!(e.data.hasPopup||e.data.title||e.data.contents);return(n=s(this,c(t).call(this,e,o,!0))).containerClassName="polylineAnnotation",n.svgElementName="svg:polyline",n}return d(t,e),h(t,[{key:"render",value:function(){this.container.className=this.containerClassName;for(var e=this.data,t=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],o=this.svgFactory.create(t,n),i=e.vertices,a=[],r=0,s=i.length;r<s;r++){var l=i[r].x-e.rect[0],c=e.rect[3]-i[r].y;a.push(l+","+c)}a=a.join(" ");var d=e.borderStyle.width,u=this.svgFactory.createElement(this.svgElementName);return u.setAttribute("points",a),u.setAttribute("stroke-width",d),u.setAttribute("stroke","transparent"),u.setAttribute("fill","none"),o.appendChild(u),this.container.append(o),this._createPopup(this.container,u,e),this.container}}]),t}(m),L=function(e){function t(e){var n;return p(this,t),(n=s(this,c(t).call(this,e))).containerClassName="polygonAnnotation",n.svgElementName="svg:polygon",n}return d(t,e),t}(D),I=function(e){function t(e){var n;p(this,t);var o=!!(e.data.hasPopup||e.data.title||e.data.contents);return(n=s(this,c(t).call(this,e,o,!0))).containerClassName="inkAnnotation",n.svgElementName="svg:polyline",n}return d(t,e),h(t,[{key:"render",value:function(){this.container.className=this.containerClassName;for(var e=this.data,t=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],o=this.svgFactory.create(t,n),i=e.inkLists,a=0,r=i.length;a<r;a++){for(var s=i[a],l=[],c=0,d=s.length;c<d;c++){var u=s[c].x-e.rect[0],p=e.rect[3]-s[c].y;l.push(u+","+p)}l=l.join(" ");var g=e.borderStyle.width,h=this.svgFactory.createElement(this.svgElementName);h.setAttribute("points",l),h.setAttribute("stroke-width",g),h.setAttribute("stroke","transparent"),h.setAttribute("fill","none"),this._createPopup(this.container,h,e),o.appendChild(h)}return this.container.append(o),this.container}}]),t}(m),k=function(e){function t(e){p(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return s(this,c(t).call(this,e,n,!0))}return d(t,e),h(t,[{key:"render",value:function(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),t}(m),O=function(e){function t(e){p(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return s(this,c(t).call(this,e,n,!0))}return d(t,e),h(t,[{key:"render",value:function(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),t}(m),F=function(e){function t(e){p(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return s(this,c(t).call(this,e,n,!0))}return d(t,e),h(t,[{key:"render",value:function(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),t}(m),R=function(e){function t(e){p(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return s(this,c(t).call(this,e,n,!0))}return d(t,e),h(t,[{key:"render",value:function(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),t}(m),M=function(e){function t(e){p(this,t);var n=!!(e.data.hasPopup||e.data.title||e.data.contents);return s(this,c(t).call(this,e,n,!0))}return d(t,e),h(t,[{key:"render",value:function(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),t}(m),N=function(e){function t(e){var n;p(this,t);var a=(n=s(this,c(t).call(this,e,!0))).data.file,r=a.filename,d=a.content;return n.filename=(0,o.getFilenameFromUrl)(r),n.content=d,n.linkService.eventBus&&n.linkService.eventBus.dispatch("fileattachmentannotation",{source:l(l(n)),id:(0,i.stringToPDFString)(r),filename:r,content:d}),n}return d(t,e),h(t,[{key:"render",value:function(){this.container.className="fileAttachmentAnnotation";var e=document.createElement("div");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.addEventListener("dblclick",this._download.bind(this)),this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(this.container,e,this.data),this.container.appendChild(e),this.container}},{key:"_download",value:function(){this.downloadManager?this.downloadManager.downloadData(this.content,this.filename,""):(0,i.warn)("Download cannot be started due to unavailable download manager")}}]),t}(m),B=function(){function e(){p(this,e)}return h(e,null,[{key:"render",value:function(e){for(var t=0,n=e.annotations.length;t<n;t++){var i=e.annotations[t];if(i){var a=f.create({data:i,layer:e.div,page:e.page,viewport:e.viewport,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderInteractiveForms:e.renderInteractiveForms||!1,svgFactory:new o.DOMSVGFactory});a.isRenderable&&e.div.appendChild(a.render())}}}},{key:"update",value:function(e){for(var t=0,n=e.annotations.length;t<n;t++){var o=e.annotations[t],i=e.div.querySelector('[data-annotation-id="'+o.id+'"]');i&&(i.style.transform="matrix("+e.viewport.transform.join(",")+")")}e.div.removeAttribute("hidden")}}]),e}();t.AnnotationLayer=B},function(e,o,a){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.SVGGraphics=void 0;var r,s=a(1),l=a(151),c=(r=a(4))&&r.__esModule?r:{default:r},d=function(){throw new Error("Not implemented: SVGGraphics")};o.SVGGraphics=d;var u={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},p=function(){for(var e=new Uint8Array([137,80,78,71,13,10,26,10]),o=new Int32Array(256),a=0;a<256;a++){for(var r=a,l=0;l<8;l++)r=1&r?3988292384^r>>1&2147483647:r>>1&2147483647;o[a]=r}function d(e,t,n,i){var a=i,r=t.length;n[a]=r>>24&255,n[a+1]=r>>16&255,n[a+2]=r>>8&255,n[a+3]=255&r,n[a+=4]=255&e.charCodeAt(0),n[a+1]=255&e.charCodeAt(1),n[a+2]=255&e.charCodeAt(2),n[a+3]=255&e.charCodeAt(3),a+=4,n.set(t,a);var s=function(e,t,n){for(var i=-1,a=t;a<n;a++){var r=255&(i^e[a]);i=i>>>8^o[r]}return-1^i}(n,i+4,a+=t.length);n[a]=s>>24&255,n[a+1]=s>>16&255,n[a+2]=s>>8&255,n[a+3]=255&s}function u(e){var t=e.length,n=Math.ceil(t/65535),o=new Uint8Array(2+t+5*n+4),i=0;o[i++]=120,o[i++]=156;for(var a=0;t>65535;)o[i++]=0,o[i++]=255,o[i++]=255,o[i++]=0,o[i++]=0,o.set(e.subarray(a,a+65535),i),i+=65535,a+=65535,t-=65535;o[i++]=1,o[i++]=255&t,o[i++]=t>>8&255,o[i++]=255&~t,o[i++]=(65535&~t)>>8&255,o.set(e.subarray(a),i),i+=e.length-a;var r=function(e,t,n){for(var o=1,i=0,a=t;a<n;++a)i=(i+(o=(o+(255&e[a]))%65521))%65521;return i<<16|o}(e,0,e.length);return o[i++]=r>>24&255,o[i++]=r>>16&255,o[i++]=r>>8&255,o[i++]=255&r,o}function p(o,a,r,l){var p,g,h,f=o.width,m=o.height,y=o.data;switch(a){case s.ImageKind.GRAYSCALE_1BPP:g=0,p=1,h=f+7>>3;break;case s.ImageKind.RGB_24BPP:g=2,p=8,h=3*f;break;case s.ImageKind.RGBA_32BPP:g=6,p=8,h=4*f;break;default:throw new Error("invalid format")}var v,_,b=new Uint8Array((1+h)*m),w=0,C=0;for(v=0;v<m;++v)b[w++]=0,b.set(y.subarray(C,C+h),w),C+=h,w+=h;if(a===s.ImageKind.GRAYSCALE_1BPP&&l)for(w=0,v=0;v<m;v++)for(w++,_=0;_<h;_++)b[w++]^=255;var x=new Uint8Array([f>>24&255,f>>16&255,f>>8&255,255&f,m>>24&255,m>>16&255,m>>8&255,255&m,p,g,0,0,0]),S=function(e){if(!(0,c.default)())return u(e);try{var o;o=parseInt(i.versions.node)>=8?e:new t(e);var a=n(1364).deflateSync(o,{level:9});return a instanceof Uint8Array?a:new Uint8Array(a)}catch(e){(0,s.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+e)}return u(e)}(b),E=e.length+36+x.length+S.length,A=new Uint8Array(E),T=0;return A.set(e,T),d("IHDR",x,A,T+=e.length),d("IDATA",S,A,T+=12+x.length),T+=12+S.length,d("IEND",new Uint8Array(0),A,T),(0,s.createObjectURL)(A,"image/png",r)}return function(e,t,n){return p(e,void 0===e.kind?s.ImageKind.GRAYSCALE_1BPP:e.kind,t,n)}}(),g=function(){function e(){this.fontSizeScale=1,this.fontWeight=u.fontWeight,this.fontSize=0,this.textMatrix=s.IDENTITY_MATRIX,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=s.TextRenderingMode.FILL,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=u.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return e.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(e,t){this.x=e,this.y=t}},e}();o.SVGGraphics=d=function(){function e(e){if(Number.isInteger(e))return e.toString();var t=e.toFixed(10),n=t.length-1;if("0"!==t[n])return t;do{n--}while("0"===t[n]);return t.substring(0,"."===t[n]?n:n+1)}function t(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":"scale("+e(t[0])+" "+e(t[3])+")";if(t[0]===t[3]&&t[1]===-t[2])return"rotate("+e(180*Math.acos(t[0])/Math.PI)+")"}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return"translate("+e(t[4])+" "+e(t[5])+")";return"matrix("+e(t[0])+" "+e(t[1])+" "+e(t[2])+" "+e(t[3])+" "+e(t[4])+" "+e(t[5])+")"}function n(e,t,n){this.svgFactory=new l.DOMSVGFactory,this.current=new g,this.transformMatrix=s.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=t,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!n}var o="http://www.w3.org/1999/xlink",i=["butt","round","square"],a=["miter","round","bevel"],r=0,c=0;return n.prototype={save:function(){this.transformStack.push(this.transformMatrix);var e=this.current;this.extraStack.push(e),this.current=e.clone()},restore:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null},group:function(e){this.save(),this.executeOpTree(e),this.restore()},loadDependencies:function(e){for(var t=this,n=e.fnArray,o=n.length,i=e.argsArray,a=0;a<o;a++)if(s.OPS.dependency===n[a])for(var r=i[a],l=0,c=r.length;l<c;l++){var d,u=r[l],p="g_"===u.substring(0,2);d=new Promise(p?function(e){t.commonObjs.get(u,e)}:function(e){t.objs.get(u,e)}),this.current.dependencies.push(d)}return Promise.all(this.current.dependencies)},transform:function(e,t,n,o,i,a){var r=[e,t,n,o,i,a];this.transformMatrix=s.Util.transform(this.transformMatrix,r),this.tgrp=null},getSVG:function(e,t){var n=this;this.viewport=t;var o=this._initialize(t);return this.loadDependencies(e).then((function(){n.transformMatrix=s.IDENTITY_MATRIX;var t=n.convertOpList(e);return n.executeOpTree(t),o}))},convertOpList:function(e){var t=e.argsArray,n=e.fnArray,o=n.length,i=[],a=[];for(var r in s.OPS)i[s.OPS[r]]=r;for(var l=0;l<o;l++){var c=n[l];a.push({fnId:c,fn:i[c],args:t[l]})}return function(e){for(var t=[],n=[],o=e.length,i=0;i<o;i++)"save"!==e[i].fn?"restore"===e[i].fn?t=n.pop():t.push(e[i]):(t.push({fnId:92,fn:"group",items:[]}),n.push(t),t=t[t.length-1].items);return t}(a)},executeOpTree:function(e){for(var t=e.length,n=0;n<t;n++){var o=e[n].fn,i=e[n].fnId,a=e[n].args;switch(0|i){case s.OPS.beginText:this.beginText();break;case s.OPS.dependency:break;case s.OPS.setLeading:this.setLeading(a);break;case s.OPS.setLeadingMoveText:this.setLeadingMoveText(a[0],a[1]);break;case s.OPS.setFont:this.setFont(a);break;case s.OPS.showText:case s.OPS.showSpacedText:this.showText(a[0]);break;case s.OPS.endText:this.endText();break;case s.OPS.moveText:this.moveText(a[0],a[1]);break;case s.OPS.setCharSpacing:this.setCharSpacing(a[0]);break;case s.OPS.setWordSpacing:this.setWordSpacing(a[0]);break;case s.OPS.setHScale:this.setHScale(a[0]);break;case s.OPS.setTextMatrix:this.setTextMatrix(a[0],a[1],a[2],a[3],a[4],a[5]);break;case s.OPS.setTextRise:this.setTextRise(a[0]);break;case s.OPS.setTextRenderingMode:this.setTextRenderingMode(a[0]);break;case s.OPS.setLineWidth:this.setLineWidth(a[0]);break;case s.OPS.setLineJoin:this.setLineJoin(a[0]);break;case s.OPS.setLineCap:this.setLineCap(a[0]);break;case s.OPS.setMiterLimit:this.setMiterLimit(a[0]);break;case s.OPS.setFillRGBColor:this.setFillRGBColor(a[0],a[1],a[2]);break;case s.OPS.setStrokeRGBColor:this.setStrokeRGBColor(a[0],a[1],a[2]);break;case s.OPS.setDash:this.setDash(a[0],a[1]);break;case s.OPS.setGState:this.setGState(a[0]);break;case s.OPS.fill:this.fill();break;case s.OPS.eoFill:this.eoFill();break;case s.OPS.stroke:this.stroke();break;case s.OPS.fillStroke:this.fillStroke();break;case s.OPS.eoFillStroke:this.eoFillStroke();break;case s.OPS.clip:this.clip("nonzero");break;case s.OPS.eoClip:this.clip("evenodd");break;case s.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case s.OPS.paintJpegXObject:this.paintJpegXObject(a[0],a[1],a[2]);break;case s.OPS.paintImageXObject:this.paintImageXObject(a[0]);break;case s.OPS.paintInlineImageXObject:this.paintInlineImageXObject(a[0]);break;case s.OPS.paintImageMaskXObject:this.paintImageMaskXObject(a[0]);break;case s.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(a[0],a[1]);break;case s.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case s.OPS.closePath:this.closePath();break;case s.OPS.closeStroke:this.closeStroke();break;case s.OPS.closeFillStroke:this.closeFillStroke();break;case s.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case s.OPS.nextLine:this.nextLine();break;case s.OPS.transform:this.transform(a[0],a[1],a[2],a[3],a[4],a[5]);break;case s.OPS.constructPath:this.constructPath(a[0],a[1]);break;case s.OPS.endPath:this.endPath();break;case 92:this.group(e[n].items);break;default:(0,s.warn)("Unimplemented operator "+o)}}},setWordSpacing:function(e){this.current.wordSpacing=e},setCharSpacing:function(e){this.current.charSpacing=e},nextLine:function(){this.moveText(0,this.current.leading)},setTextMatrix:function(t,n,o,i,a,r){var s=this.current;this.current.textMatrix=this.current.lineMatrix=[t,n,o,i,a,r],this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,s.xcoords=[],s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",e(s.fontSize)+"px"),s.tspan.setAttributeNS(null,"y",e(-s.y)),s.txtElement=this.svgFactory.createElement("svg:text"),s.txtElement.appendChild(s.tspan)},beginText:function(){this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.current.textMatrix=s.IDENTITY_MATRIX,this.current.lineMatrix=s.IDENTITY_MATRIX,this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.txtElement=this.svgFactory.createElement("svg:text"),this.current.txtgrp=this.svgFactory.createElement("svg:g"),this.current.xcoords=[]},moveText:function(t,n){var o=this.current;this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n,o.xcoords=[],o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size",e(o.fontSize)+"px"),o.tspan.setAttributeNS(null,"y",e(-o.y))},showText:function(n){var o=this.current,i=o.font,a=o.fontSize;if(0!==a){var r,l=o.charSpacing,c=o.wordSpacing,d=o.fontDirection,p=o.textHScale*d,g=n.length,h=i.vertical,f=a*o.fontMatrix[0],m=0;for(r=0;r<g;++r){var y=n[r];if(null!==y)if((0,s.isNum)(y))m+=-y*a*.001;else{var v=y.width,_=y.fontChar,b=v*f+((y.isSpace?c:0)+l)*d;y.isInFont||i.missingFile?(o.xcoords.push(o.x+m*p),o.tspan.textContent+=_,m+=b):m+=b}else m+=d*c}h?o.y-=m*p:o.x+=m*p,o.tspan.setAttributeNS(null,"x",o.xcoords.map(e).join(" ")),o.tspan.setAttributeNS(null,"y",e(-o.y)),o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size",e(o.fontSize)+"px"),o.fontStyle!==u.fontStyle&&o.tspan.setAttributeNS(null,"font-style",o.fontStyle),o.fontWeight!==u.fontWeight&&o.tspan.setAttributeNS(null,"font-weight",o.fontWeight);var w=o.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;w===s.TextRenderingMode.FILL||w===s.TextRenderingMode.FILL_STROKE?(o.fillColor!==u.fillColor&&o.tspan.setAttributeNS(null,"fill",o.fillColor),o.fillAlpha<1&&o.tspan.setAttributeNS(null,"fill-opacity",o.fillAlpha)):o.textRenderingMode===s.TextRenderingMode.ADD_TO_PATH?o.tspan.setAttributeNS(null,"fill","transparent"):o.tspan.setAttributeNS(null,"fill","none"),w!==s.TextRenderingMode.STROKE&&w!==s.TextRenderingMode.FILL_STROKE||this._setStrokeAttributes(o.tspan);var C=o.textMatrix;0!==o.textRise&&((C=C.slice())[5]+=o.textRise),o.txtElement.setAttributeNS(null,"transform",t(C)+" scale(1, -1)"),o.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),o.txtElement.appendChild(o.tspan),o.txtgrp.appendChild(o.txtElement),this._ensureTransformGroup().appendChild(o.txtElement)}},setLeadingMoveText:function(e,t){this.setLeading(-t),this.moveText(e,t)},addFontStyle:function(e){this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var t=(0,s.createObjectURL)(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'+e.loadedName+'"; src: url('+t+"); }\n"},setFont:function(t){var n=this.current,o=this.commonObjs.get(t[0]),i=t[1];this.current.font=o,this.embedFonts&&o.data&&!this.embeddedFonts[o.loadedName]&&(this.addFontStyle(o),this.embeddedFonts[o.loadedName]=o),n.fontMatrix=o.fontMatrix?o.fontMatrix:s.FONT_IDENTITY_MATRIX;var a=o.black?o.bold?"bolder":"bold":o.bold?"bold":"normal",r=o.italic?"italic":"normal";i<0?(i=-i,n.fontDirection=-1):n.fontDirection=1,n.fontSize=i,n.fontFamily=o.loadedName,n.fontWeight=a,n.fontStyle=r,n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"y",e(-n.y)),n.xcoords=[]},endText:function(){var e=this.current;e.textRenderingMode&s.TextRenderingMode.ADD_TO_PATH_FLAG&&e.txtElement&&e.txtElement.hasChildNodes()&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())},setLineWidth:function(e){e>0&&(this.current.lineWidth=e)},setLineCap:function(e){this.current.lineCap=i[e]},setLineJoin:function(e){this.current.lineJoin=a[e]},setMiterLimit:function(e){this.current.miterLimit=e},setStrokeAlpha:function(e){this.current.strokeAlpha=e},setStrokeRGBColor:function(e,t,n){var o=s.Util.makeCssRgb(e,t,n);this.current.strokeColor=o},setFillAlpha:function(e){this.current.fillAlpha=e},setFillRGBColor:function(e,t,n){var o=s.Util.makeCssRgb(e,t,n);this.current.fillColor=o,this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[]},setDash:function(e,t){this.current.dashArray=e,this.current.dashPhase=t},constructPath:function(t,n){var o=this.current,i=o.x,a=o.y;o.path=this.svgFactory.createElement("svg:path");for(var r=[],l=t.length,c=0,d=0;c<l;c++)switch(0|t[c]){case s.OPS.rectangle:i=n[d++],a=n[d++];var u=i+n[d++],p=a+n[d++];r.push("M",e(i),e(a),"L",e(u),e(a),"L",e(u),e(p),"L",e(i),e(p),"Z");break;case s.OPS.moveTo:i=n[d++],a=n[d++],r.push("M",e(i),e(a));break;case s.OPS.lineTo:i=n[d++],a=n[d++],r.push("L",e(i),e(a));break;case s.OPS.curveTo:i=n[d+4],a=n[d+5],r.push("C",e(n[d]),e(n[d+1]),e(n[d+2]),e(n[d+3]),e(i),e(a)),d+=6;break;case s.OPS.curveTo2:i=n[d+2],a=n[d+3],r.push("C",e(i),e(a),e(n[d]),e(n[d+1]),e(n[d+2]),e(n[d+3])),d+=4;break;case s.OPS.curveTo3:i=n[d+2],a=n[d+3],r.push("C",e(n[d]),e(n[d+1]),e(i),e(a),e(i),e(a)),d+=4;break;case s.OPS.closePath:r.push("Z")}o.path.setAttributeNS(null,"d",r.join(" ")),o.path.setAttributeNS(null,"fill","none"),this._ensureTransformGroup().appendChild(o.path),o.element=o.path,o.setCurrentPoint(i,a)},endPath:function(){if(this.pendingClip){var e=this.current,n="clippath"+r;r++;var o=this.svgFactory.createElement("svg:clipPath");o.setAttributeNS(null,"id",n),o.setAttributeNS(null,"transform",t(this.transformMatrix));var i=e.element.cloneNode(!0);"evenodd"===this.pendingClip?i.setAttributeNS(null,"clip-rule","evenodd"):i.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,o.appendChild(i),this.defs.appendChild(o),e.activeClipUrl&&(e.clipGroup=null,this.extraStack.forEach((function(e){e.clipGroup=null})),o.setAttributeNS(null,"clip-path",e.activeClipUrl)),e.activeClipUrl="url(#"+n+")",this.tgrp=null}},clip:function(e){this.pendingClip=e},closePath:function(){var e=this.current;if(e.path){var t=e.path.getAttributeNS(null,"d");t+="Z",e.path.setAttributeNS(null,"d",t)}},setLeading:function(e){this.current.leading=-e},setTextRise:function(e){this.current.textRise=e},setTextRenderingMode:function(e){this.current.textRenderingMode=e},setHScale:function(e){this.current.textHScale=e/100},setGState:function(e){for(var t=0,n=e.length;t<n;t++){var o=e[t],i=o[0],a=o[1];switch(i){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"Font":this.setFont(a);break;case"CA":this.setStrokeAlpha(a);break;case"ca":this.setFillAlpha(a);break;default:(0,s.warn)("Unimplemented graphic state "+i)}}},fill:function(){var e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())},stroke:function(){var e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())},_setStrokeAttributes:function(t){var n=this.current;t.setAttributeNS(null,"stroke",n.strokeColor),t.setAttributeNS(null,"stroke-opacity",n.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",e(n.miterLimit)),t.setAttributeNS(null,"stroke-linecap",n.lineCap),t.setAttributeNS(null,"stroke-linejoin",n.lineJoin),t.setAttributeNS(null,"stroke-width",e(n.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",n.dashArray.map(e).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",e(n.dashPhase)+"px")},eoFill:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()},fillStroke:function(){this.stroke(),this.fill()},eoFillStroke:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()},closeStroke:function(){this.closePath(),this.stroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.closePath(),this.eoFillStroke()},paintSolidColorImageMask:function(){var e=this.current,t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",e.fillColor),this._ensureTransformGroup().appendChild(t)},paintJpegXObject:function(t,n,i){var a=this.objs.get(t),r=this.svgFactory.createElement("svg:image");r.setAttributeNS(o,"xlink:href",a.src),r.setAttributeNS(null,"width",e(n)),r.setAttributeNS(null,"height",e(i)),r.setAttributeNS(null,"x","0"),r.setAttributeNS(null,"y",e(-i)),r.setAttributeNS(null,"transform","scale("+e(1/n)+" "+e(-1/i)+")"),this._ensureTransformGroup().appendChild(r)},paintImageXObject:function(e){var t=this.objs.get(e);t?this.paintInlineImageXObject(t):(0,s.warn)("Dependent image isn't ready yet")},paintInlineImageXObject:function(t,n){var i=t.width,a=t.height,r=p(t,this.forceDataSchema,!!n),s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y","0"),s.setAttributeNS(null,"width",e(i)),s.setAttributeNS(null,"height",e(a)),this.current.element=s,this.clip("nonzero");var l=this.svgFactory.createElement("svg:image");l.setAttributeNS(o,"xlink:href",r),l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y",e(-a)),l.setAttributeNS(null,"width",e(i)+"px"),l.setAttributeNS(null,"height",e(a)+"px"),l.setAttributeNS(null,"transform","scale("+e(1/i)+" "+e(-1/a)+")"),n?n.appendChild(l):this._ensureTransformGroup().appendChild(l)},paintImageMaskXObject:function(t){var n=this.current,o=t.width,i=t.height,a=n.fillColor;n.maskId="mask"+c++;var r=this.svgFactory.createElement("svg:mask");r.setAttributeNS(null,"id",n.maskId);var s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y","0"),s.setAttributeNS(null,"width",e(o)),s.setAttributeNS(null,"height",e(i)),s.setAttributeNS(null,"fill",a),s.setAttributeNS(null,"mask","url(#"+n.maskId+")"),this.defs.appendChild(r),this._ensureTransformGroup().appendChild(s),this.paintInlineImageXObject(t,r)},paintFormXObjectBegin:function(t,n){if(Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),n){var o=n[2]-n[0],i=n[3]-n[1],a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x",n[0]),a.setAttributeNS(null,"y",n[1]),a.setAttributeNS(null,"width",e(o)),a.setAttributeNS(null,"height",e(i)),this.current.element=a,this.clip("nonzero"),this.endPath()}},paintFormXObjectEnd:function(){},_initialize:function(e){var n=this.svgFactory.create(e.width,e.height),o=this.svgFactory.createElement("svg:defs");n.appendChild(o),this.defs=o;var i=this.svgFactory.createElement("svg:g");return i.setAttributeNS(null,"transform",t(e.transform)),n.appendChild(i),this.svg=i,n},_ensureClipGroup:function(){if(!this.current.clipGroup){var e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(e),this.current.clipGroup=e}return this.current.clipGroup},_ensureTransformGroup:function(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",t(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}},n}()},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var i,a=(i=o(147))&&i.__esModule?i:{default:i},r=o(1),s=o(166);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,o,i,a,r){try{var s=e[a](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function r(e){g(a,o,i,r,s,"next",e)}function s(e){g(a,o,i,r,s,"throw",e)}r(void 0)}))}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function y(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}var v=n(167),_=n(554),b=n(555),w=n(553),C=/^file:\/\/\/[a-zA-Z]:\//,x=function(){function e(t){var n,o;f(this,e),this.source=t,this.url=(n=t.url,"file:"===(o=w.parse(n)).protocol||o.host?o:/^[a-z]:[/\\]/i.test(n)?w.parse("file:///".concat(n)):(o.host||(o.protocol="file:"),o)),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequest=null,this._rangeRequestReaders=[]}return y(e,[{key:"getFullReader",value:function(){return(0,r.assert)(!this._fullRequest),this._fullRequest=this.isFsUrl?new P(this):new T(this),this._fullRequest}},{key:"getRangeReader",value:function(e,t){var n=this.isFsUrl?new D(this,e,t):new G(this,e,t);return this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(e){this._fullRequest&&this._fullRequest.cancel(e),this._rangeRequestReaders.slice(0).forEach((function(t){t.cancel(e)}))}}]),e}();t.PDFNodeStream=x;var S=function(){function e(t){f(this,e),this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;var n=t.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)(),this._headersCapability=(0,r.createPromiseCapability)()}var t;return y(e,[{key:"read",value:(t=h(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._readCapability.promise;case 2:if(!this._done){e.next=4;break}return e.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){e.next=6;break}throw this._storedError;case 6:if(null!==(t=this._readableStream.read())){e.next=10;break}return this._readCapability=(0,r.createPromiseCapability)(),e.abrupt("return",this.read());case 10:return this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),n=new Uint8Array(t).buffer,e.abrupt("return",{value:n,done:!1});case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}},{key:"_error",value:function(e){this._storedError=e,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(e){var t=this;this._readableStream=e,e.on("readable",(function(){t._readCapability.resolve()})),e.on("end",(function(){e.destroy(),t._done=!0,t._readCapability.resolve()})),e.on("error",(function(e){t._error(e)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),e}(),E=function(){function e(t){f(this,e),this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)();var n=t.source;this._isStreamingSupported=!n.disableStream}var t;return y(e,[{key:"read",value:(t=h(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._readCapability.promise;case 2:if(!this._done){e.next=4;break}return e.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){e.next=6;break}throw this._storedError;case 6:if(null!==(t=this._readableStream.read())){e.next=10;break}return this._readCapability=(0,r.createPromiseCapability)(),e.abrupt("return",this.read());case 10:return this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded}),n=new Uint8Array(t).buffer,e.abrupt("return",{value:n,done:!1});case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}},{key:"_error",value:function(e){this._storedError=e,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(e){var t=this;this._readableStream=e,e.on("readable",(function(){t._readCapability.resolve()})),e.on("end",(function(){e.destroy(),t._done=!0,t._readCapability.resolve()})),e.on("error",(function(e){t._error(e)})),this._storedError&&this._readableStream.destroy(this._storedError)}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),e}();function A(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}var T=function(e){function t(e){var n;f(this,t);var o=function(t){if(404===t.statusCode){var o=new r.MissingPDFException('Missing PDF "'.concat(n._url,'".'));return n._storedError=o,void n._headersCapability.reject(o)}n._headersCapability.resolve(),n._setReadableStream(t);var i=function(e){return n._readableStream.headers[e.toLowerCase()]},a=(0,s.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:e.isHttp,rangeChunkSize:n._rangeChunkSize,disableRange:n._disableRange}),l=a.allowRangeRequests,c=a.suggestedLength;n._isRangeSupported=l,n._contentLength=c||n._contentLength,n._filename=(0,s.extractFilenameFromHeader)(i)};return(n=c(this,d(t).call(this,e)))._request=null,"http:"===n._url.protocol?n._request=_.request(A(n._url,e.httpHeaders),o):n._request=b.request(A(n._url,e.httpHeaders),o),n._request.on("error",(function(e){n._storedError=e,n._headersCapability.reject(e)})),n._request.end(),n}return u(t,e),t}(S),G=function(e){function t(e,n,o){var i;for(var a in f(this,t),(i=c(this,d(t).call(this,e)))._httpHeaders={},e.httpHeaders){var s=e.httpHeaders[a];void 0!==s&&(i._httpHeaders[a]=s)}i._httpHeaders.Range="bytes=".concat(n,"-").concat(o-1);var l=function(e){if(404!==e.statusCode)i._setReadableStream(e);else{var t=new r.MissingPDFException('Missing PDF "'.concat(i._url,'".'));i._storedError=t}};return i._request=null,"http:"===i._url.protocol?i._request=_.request(A(i._url,i._httpHeaders),l):i._request=b.request(A(i._url,i._httpHeaders),l),i._request.on("error",(function(e){i._storedError=e})),i._request.end(),i}return u(t,e),t}(E),P=function(e){function t(e){var n;f(this,t),n=c(this,d(t).call(this,e));var o=decodeURIComponent(n._url.path);return C.test(n._url.href)&&(o=o.replace(/^\//,"")),v.lstat(o,(function(e,t){if(e)return"ENOENT"===e.code&&(e=new r.MissingPDFException('Missing PDF "'.concat(o,'".'))),n._storedError=e,void n._headersCapability.reject(e);n._contentLength=t.size,n._setReadableStream(v.createReadStream(o)),n._headersCapability.resolve()})),n}return u(t,e),t}(S),D=function(e){function t(e,n,o){var i;f(this,t),i=c(this,d(t).call(this,e));var a=decodeURIComponent(i._url.path);return C.test(i._url.href)&&(a=a.replace(/^\//,"")),i._setReadableStream(v.createReadStream(a,{start:n,end:o-1})),i}return u(t,e),t}(E)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=function(e,t){return 404===e||0===e&&/^file:/.test(t)?new o.MissingPDFException('Missing PDF "'+t+'".'):new o.UnexpectedResponseException("Unexpected server response ("+e+') while retrieving PDF "'+t+'".',e)},t.extractFilenameFromHeader=function(e){var t=e("Content-Disposition");if(t){var n=(0,i.getFilenameFromContentDispositionHeader)(t);if(/\.pdf$/i.test(n))return n}return null},t.validateRangeRequestCapabilities=function(e){var t=e.getResponseHeader,n=e.isHttp,i=e.rangeChunkSize,a=e.disableRange;(0,o.assert)(i>0,"Range chunk size must be larger than zero");var r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t("Content-Length"),10);return Number.isInteger(s)?(r.suggestedLength=s,s<=2*i||a||!n||"bytes"!==t("Accept-Ranges")||"identity"!==(t("Content-Encoding")||"identity")||(r.allowRangeRequests=!0),r):r},t.validateResponseStatus=function(e){return 200===e||206===e};var o=n(1),i=n(167)},function(e,t,n){"use strict";function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=function(e){var t=!0,n=r("filename\\*","i").exec(e);if(n){var i=c(n=n[1]);return l(i=u(i=d(i=unescape(i))))}if(n=function(e){for(var t,n=[],i=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");null!==(t=i.exec(e));){var a=o(t,4),s=a[1],l=a[2],u=a[3];if((s=parseInt(s,10))in n){if(0===s)break}else n[s]=[l,u]}var p=[];for(s=0;s<n.length&&s in n;++s){var g=o(n[s],2);l=g[0],u=c(u=g[1]),l&&(u=unescape(u),0===s&&(u=d(u))),p.push(u)}return p.join("")}(e))return l(u(n));if(n=r("filename","i").exec(e)){var a=c(n=n[1]);return l(a=u(a))}function r(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function s(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{var o=new TextDecoder(e,{fatal:!0}),i=Array.from(n,(function(e){return 255&e.charCodeAt(0)}));n=o.decode(new Uint8Array(i)),t=!1}catch(o){if(/^utf-?8$/i.test(e))try{n=decodeURIComponent(escape(n)),t=!1}catch(e){}}}return n}function l(e){return t&&/[\x80-\xff]/.test(e)&&(e=s("utf-8",e),t&&(e=s("iso-8859-1",e))),e}function c(e){if(e.startsWith('"')){for(var t=e.slice(1).split('\\"'),n=0;n<t.length;++n){var o=t[n].indexOf('"');-1!==o&&(t[n]=t[n].slice(0,o),t.length=n+1),t[n]=t[n].replace(/\\(.)/g,"$1")}e=t.join('"')}return e}function d(e){var t=e.indexOf("'");return-1===t?e:s(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function u(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(e,t,n,o){if("q"===n||"Q"===n)return s(t,o=(o=o.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})));try{o=atob(o)}catch(e){}return s(t,o)}))}return""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var o,i=(o=n(147))&&o.__esModule?o:{default:o},a=n(1),r=n(166);function s(e,t,n,o,i,a,r){try{var s=e[a](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function r(e){s(a,o,i,r,l,"next",e)}function l(e){s(a,o,i,r,l,"throw",e)}r(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function p(e,t,n){return{method:"GET",headers:e,signal:n&&n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}var g=function(){function e(t){c(this,e),this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return u(e,[{key:"getFullReader",value:function(){return(0,a.assert)(!this._fullRequestReader),this._fullRequestReader=new h(this),this._fullRequestReader}},{key:"getRangeReader",value:function(e,t){var n=new f(this,e,t);return this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(e){this._fullRequestReader&&this._fullRequestReader.cancel(e),this._rangeRequestReaders.slice(0).forEach((function(t){t.cancel(e)}))}}]),e}();t.PDFFetchStream=g;var h=function(){function e(t){var n=this;c(this,e),this._stream=t,this._reader=null,this._loaded=0,this._filename=null;var o=t.source;for(var i in this._withCredentials=o.withCredentials,this._contentLength=o.length,this._headersCapability=(0,a.createPromiseCapability)(),this._disableRange=o.disableRange||!1,this._rangeChunkSize=o.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!o.disableStream,this._isRangeSupported=!o.disableRange,this._headers=new Headers,this._stream.httpHeaders){var s=this._stream.httpHeaders[i];void 0!==s&&this._headers.append(i,s)}var l=o.url;fetch(l,p(this._headers,this._withCredentials,this._abortController)).then((function(e){if(!(0,r.validateResponseStatus)(e.status))throw(0,r.createResponseStatusError)(e.status,l);n._reader=e.body.getReader(),n._headersCapability.resolve();var t=function(t){return e.headers.get(t)},o=(0,r.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:n._stream.isHttp,rangeChunkSize:n._rangeChunkSize,disableRange:n._disableRange}),i=o.allowRangeRequests,s=o.suggestedLength;n._isRangeSupported=i,n._contentLength=s||n._contentLength,n._filename=(0,r.extractFilenameFromHeader)(t),!n._isStreamingSupported&&n._isRangeSupported&&n.cancel(new a.AbortException("streaming is disabled"))})).catch(this._headersCapability.reject),this.onProgress=null}var t;return u(e,[{key:"read",value:(t=l(i.default.mark((function e(){var t,n,o,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._headersCapability.promise;case 2:return e.next=4,this._reader.read();case 4:if(t=e.sent,n=t.value,!(o=t.done)){e.next=9;break}return e.abrupt("return",{value:n,done:o});case 9:return this._loaded+=n.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),a=new Uint8Array(n).buffer,e.abrupt("return",{value:a,done:!1});case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(e){this._reader&&this._reader.cancel(e),this._abortController&&this._abortController.abort()}},{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),e}(),f=function(){function e(t,n,o){var i=this;c(this,e),this._stream=t,this._reader=null,this._loaded=0;var s=t.source;for(var l in this._withCredentials=s.withCredentials,this._readCapability=(0,a.createPromiseCapability)(),this._isStreamingSupported=!s.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=new Headers,this._stream.httpHeaders){var d=this._stream.httpHeaders[l];void 0!==d&&this._headers.append(l,d)}var u=n+"-"+(o-1);this._headers.append("Range","bytes="+u);var g=s.url;fetch(g,p(this._headers,this._withCredentials,this._abortController)).then((function(e){if(!(0,r.validateResponseStatus)(e.status))throw(0,r.createResponseStatusError)(e.status,g);i._readCapability.resolve(),i._reader=e.body.getReader()})),this.onProgress=null}var t;return u(e,[{key:"read",value:(t=l(i.default.mark((function e(){var t,n,o,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._readCapability.promise;case 2:return e.next=4,this._reader.read();case 4:if(t=e.sent,n=t.value,!(o=t.done)){e.next=9;break}return e.abrupt("return",{value:n,done:o});case 9:return this._loaded+=n.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),a=new Uint8Array(n).buffer,e.abrupt("return",{value:a,done:!1});case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(e){this._reader&&this._reader.cancel(e),this._abortController&&this._abortController.abort()}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=f,t.NetworkManager=d;var o=s(n(147)),i=n(1),a=n(166),r=s(n(3));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,o,i,a,r){try{var s=e[a](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function r(e){l(a,o,i,r,s,"next",e)}function s(e){l(a,o,i,r,s,"throw",e)}r(void 0)}))}}function d(e,t){this.url=e,t=t||{},this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this.withCredentials=t.withCredentials||!1,this.getXhr=t.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null),this.loadedRequests=Object.create(null)}function u(e){var t=e.response;return"string"!=typeof t?t:(0,i.stringToBytes)(t).buffer}var p,g,h=function(){try{var e=new XMLHttpRequest;return e.open("GET",r.default.location.href),e.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===e.responseType}catch(e){return!1}}();function f(e){this._source=e,this._manager=new d(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}function m(e,t){this._manager=e;var n={onHeadersReceived:this._onHeadersReceived.bind(this),onProgressiveData:t.disableStream?null:this._onProgressiveData.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersReceivedCapability=(0,i.createPromiseCapability)(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}function y(e,t,n){this._manager=e;var o={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=e.requestRange(t,n,o),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}d.prototype={requestRange:function(e,t,n){var o={begin:e,end:t};for(var i in n)o[i]=n[i];return this.request(o)},requestFull:function(e){return this.request(e)},request:function(e){var t=this.getXhr(),n=this.currXhrId++,o=this.pendingRequests[n]={xhr:t};for(var i in t.open("GET",this.url),t.withCredentials=this.withCredentials,this.httpHeaders){var a=this.httpHeaders[i];void 0!==a&&t.setRequestHeader(i,a)}if(this.isHttp&&"begin"in e&&"end"in e){var r=e.begin+"-"+(e.end-1);t.setRequestHeader("Range","bytes="+r),o.expectedStatus=206}else o.expectedStatus=200;return h&&e.onProgressiveData?(t.responseType="moz-chunked-arraybuffer",o.onProgressiveData=e.onProgressiveData,o.mozChunked=!0):t.responseType="arraybuffer",e.onError&&(t.onerror=function(n){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),o.onHeadersReceived=e.onHeadersReceived,o.onDone=e.onDone,o.onError=e.onError,o.onProgress=e.onProgress,t.send(null),n},onProgress:function(e,t){var n=this.pendingRequests[e];if(n){if(n.mozChunked){var o=u(n.xhr);n.onProgressiveData(o)}var i=n.onProgress;i&&i(t)}},onStateChange:function(e,t){var n=this.pendingRequests[e];if(n){var o=n.xhr;if(o.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4===o.readyState&&e in this.pendingRequests)if(delete this.pendingRequests[e],0===o.status&&this.isHttp)n.onError&&n.onError(o.status);else{var i=o.status||200;if(200===i&&206===n.expectedStatus||i===n.expectedStatus){this.loadedRequests[e]=!0;var a=u(o);if(206===i){var r=o.getResponseHeader("Content-Range"),s=/bytes (\d+)-(\d+)\/(\d+)/.exec(r),l=parseInt(s[1],10);n.onDone({begin:l,chunk:a})}else n.onProgressiveData?n.onDone(null):a?n.onDone({begin:0,chunk:a}):n.onError&&n.onError(o.status)}else n.onError&&n.onError(o.status)}}},hasPendingRequests:function(){for(var e in this.pendingRequests)return!0;return!1},getRequestXhr:function(e){return this.pendingRequests[e].xhr},isStreamingRequest:function(e){return!!this.pendingRequests[e].onProgressiveData},isPendingRequest:function(e){return e in this.pendingRequests},isLoadedRequest:function(e){return e in this.loadedRequests},abortAllRequests:function(){for(var e in this.pendingRequests)this.abortRequest(0|e)},abortRequest:function(e){var t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}},f.prototype={_onRangeRequestReaderClosed:function(e){var t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)},getFullReader:function(){return(0,i.assert)(!this._fullRequestReader),this._fullRequestReader=new m(this._manager,this._source),this._fullRequestReader},getRangeReader:function(e,t){var n=new y(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n},cancelAllRequests:function(e){this._fullRequestReader&&this._fullRequestReader.cancel(e),this._rangeRequestReaders.slice(0).forEach((function(t){t.cancel(e)}))}},m.prototype={_onHeadersReceived:function(){var e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=function(e){return t.getResponseHeader(e)},o=(0,a.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),i=o.allowRangeRequests,r=o.suggestedLength;i&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(n);var s=this._manager;s.isStreamingRequest(e)?this._isStreamingSupported=!0:this._isRangeSupported&&s.abortRequest(e),this._headersReceivedCapability.resolve()},_onProgressiveData:function(e){this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._cachedChunks.push(e)},_onDone:function(e){e&&this._onProgressiveData(e.chunk),this._done=!0,this._cachedChunks.length>0||(this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[])},_onError:function(e){var t=this._url,n=(0,a.createResponseStatusError)(e,t);this._storedError=n,this._headersReceivedCapability.reject(n),this._requests.forEach((function(e){e.reject(n)})),this._requests=[],this._cachedChunks=[]},_onProgress:function(e){this.onProgress&&this.onProgress({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})},get filename(){return this._filename},get isRangeSupported(){return this._isRangeSupported},get isStreamingSupported(){return this._isStreamingSupported},get contentLength(){return this._contentLength},get headersReady(){return this._headersReceivedCapability.promise},read:(p=c(o.default.mark((function e(){var t,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._storedError){e.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){e.next=5;break}return t=this._cachedChunks.shift(),e.abrupt("return",{value:t,done:!1});case 5:if(!this._done){e.next=7;break}return e.abrupt("return",{value:void 0,done:!0});case 7:return n=(0,i.createPromiseCapability)(),this._requests.push(n),e.abrupt("return",n.promise);case 10:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)}),cancel:function(e){this._done=!0,this._headersReceivedCapability.reject(e),this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},y.prototype={_close:function(){this.onClosed&&this.onClosed(this)},_onDone:function(e){var t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0,this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[],this._close()},_onProgress:function(e){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:e.loaded})},get isStreamingSupported(){return!1},read:(g=c(o.default.mark((function e(){var t,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this._queuedChunk){e.next=4;break}return t=this._queuedChunk,this._queuedChunk=null,e.abrupt("return",{value:t,done:!1});case 4:if(!this._done){e.next=6;break}return e.abrupt("return",{value:void 0,done:!0});case 6:return n=(0,i.createPromiseCapability)(),this._requests.push(n),e.abrupt("return",n.promise);case 9:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)}),cancel:function(e){this._done=!0,this._requests.forEach((function(e){e.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}])},e.exports=a()}).call(this,n(207).Buffer,n(101),n(171))},,,,,,,,,,function(e,t,n){"use strict";var o=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.WINDOW_STATUS_BLOCKED=void 0,n(52),n(17),n(89),n(51),n(7),n(62),n(124),n(22);var i=n(1),a=o(n(340)),r=o(n(576)),s=n(837);const l=n(1216),c=n(504),{FILE_FORMATS:d}=n(9);t.WINDOW_STATUS_BLOCKED="window-blocked";function u(e){this._settings=e,this.setQueryLimit(10),this._currentFolder=null,this._folders={},this._actions=[],this._filterFileTypes=new Set,this.PREVIOUS_SELECTED_FOLDER_PATH=[],this.getPreviousSelectedFolder().then(e=>{e&&this.setCurrentFolder(e)})}i.GObject.inheritAndMix(u,i.GObject,[i.GEventTarget]),u.DriveEvent=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.source=e,this.type=t,this.data=n},i.GObject.inherit(u.DriveEvent,i.GEvent),u.DriveEvent.type=null,u.DriveEvent.source=null,u.DriveEvent.data=null,u.DriveEvent.Type={Added:0,UserUpdated:1,FolderSwitchRequired:2,FileDeleted:3},u.ExceptionCode={InvalidCredentials:1};class p extends r.default{constructor(e,t){super(e),this.code=t,this.__proto__=p.prototype,this.name="CloudException"}toString(){return"[Object CloudException]"}}function g(e){return e.type||e.mime}u.CloudException=p,u.prototype._driveSettings=null,u.prototype.setDriveSettings=function(e){this._driveSettings=l.from(e)},u.prototype.shouldOnlyListOwnedFiles=function(){return!!this._driveSettings&&this._driveSettings.onlyListFilesOwnedByUser},u.prototype._queryLimit=null,u.prototype._currentFolder=null,u.prototype.SORT_TYPES=s.GFilesPanelSortTypes,u.prototype.FILTER_FILE_TYPES=s.GFilesPanelFileTypesFilter,u.prototype._sortType=u.prototype.SORT_TYPES.UPDATED,u.prototype._filterFileTypes=null,u.prototype._sortDirection=s.GFilesPanelSortDirections.DESCEND,u.prototype._folders=null,u.prototype._corporateStorage=null,u.prototype._actions=null,u.prototype._defaultEmpyMessage=null,u.prototype.CURRENT_FOLDER_PROP="designer.filespanel.base-drive.current-folder",u.prototype.getUser=function(){throw Error("Not implemented!")},u.prototype._driveInstalled=!1,u.getInstance=function(){throw Error("Not implemented!")},u.prototype.hasUserProfile=function(){return!1},u.prototype.getSortType=function(){return this._sortType},u.prototype.setSortType=function(e){Object.values(this.SORT_TYPES).includes(e)&&(this._sortType=e)},u.prototype.getAvailableFileTypesFilter=function(){return this._driveSettings&&this._driveSettings.supportedFileFilters?this._driveSettings.supportedFileFilters:this.FILTER_FILE_TYPES},u.prototype.getSelectedFilterForFileTypes=function(){return Array.from(this._filterFileTypes)},u.prototype.addFileTypeToSelectedFilter=function(e){this._isFilterFileTypeSupported(e)&&this._filterFileTypes.add(e)},u.prototype.deleteFileTypeFromSelectedFilter=function(e){this._isFilterFileTypeSupported(e)&&this._filterFileTypes.delete(e)},u.prototype._isFilterFileTypeSupported=function(e){return this.getAvailableFileTypesFilter().some(t=>t.type===e)},u.prototype.clearAllFileTypesFromSelectedFilter=function(){this._filterFileTypes=new Set},u.prototype.getSortDirection=function(){return this._sortDirection},u.prototype.setSortDirection=function(e){Object.values(s.GFilesPanelSortDirections).includes(e)&&(this._sortDirection=e)},u.prototype.hasMoreItemsToLoad=function(){return!1},u.prototype.setQueryLimit=function(e){return this._queryLimit=parseInt(e,10),this},u.prototype.isInstalled=function(){return this._driveInstalled},u.prototype.install=function(e){return this._driveInstalled=!0,Promise.resolve()},u.prototype.uninstall=function(){return this._driveInstalled=!1,Promise.resolve()},u.prototype.getQueryLimit=function(){return this._queryLimit},u.prototype.setCurrentFolder=function(e){return this._currentFolder=e,gContainer.setProperty(this.CURRENT_FOLDER_PROP,JSON.stringify(e)),this},u.prototype.isFolderSharedWithMeFolder=function(e){return!1},u.prototype.getCurrentFolder=function(){return this._currentFolder},u.prototype.fetchFolders=function(e){throw Error("Not implemented!")},u.prototype.isLoadFoldersOnDemandSupported=function(){return!1},u.prototype.hasFolders=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.fetchFolders("name",e,1).then(e=>!!e&&e.length>0)},u.prototype.getFolders=function(){return this._folders},u.prototype.createFolder=function(e){throw Error("Not implemented!")},u.prototype.navigateToParentFolder=function(){throw Error("Not implemented!")},u.prototype.getFile=function(e){throw Error("Not implemented!")},u.prototype.getFolder=function(e){throw Error("Not implemented!")},u.prototype.getRawFile=function(e,t,n){throw Error("Not implemented!")},u.prototype.openFile=async function(e,t){return new Promise((e,t)=>{t("Not implemented!")})},u.prototype.saveNewFile=function(e,t){throw Error("Not implemented!")},u.prototype.fetchFiles=function(e,t,n){throw Error("Not implemented!")},u.prototype.fetchRecentFiles=async function(){return[]},u.prototype.filterSupportedFileFormats=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.getSupportedMIMETypes();return e.filter(e=>t.includes(e.getMimeType()))},u.prototype.renameItem=function(e,t){throw Error("Not implemented!")},u.prototype.isItemAllowedToBeRendered=function(e){throw Error("Not implemented!")},u.prototype.itemRequiresLazyUpdate=async function(e){return!1},u.prototype.getItemLazyUpdate=async function(e){return e},u.prototype.isFileAllowedToBeOpened=function(e){throw Error("Not implemented!")},u.prototype.deleteItem=function(e){throw Error("Not implemented!")},u.prototype.cutPaste=function(e){throw Error("Not implemented!")},u.prototype.fileMove=function(e,t){throw Error("Not implemented!")},u.prototype.copyPaste=function(e){throw Error("Not implemented!")},u.prototype.supportsCorporateStorage=function(){return!1},u.prototype.setCorporateStorage=async function(e){this._corporateStorage=e},u.prototype.initLastCorporateStorage=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";const n=this;async function o(e){if(!e)return null;const o=await n.getCorporateStorages();return o.length?o.find(n=>n[t]===e):null}async function i(e){n.setCorporateStorage(e);let t=await n.getPreviousSelectedFolder();n.setCurrentFolder(t||n.getRootFolder())}return e&&this.supportsCorporateStorage()?gContainer.getProperty(e).then(o).then(i):i(null)},u.prototype.saveLastTeamDriveId=function(e,t){if(!e)throw new a.default("Invalid arguments for saving last team drive id");return gContainer.setProperty(e,t),this},u.prototype.getCorporateStorage=function(){return this._corporateStorage},u.prototype.getCorporateStorages=async function(){return[]},u.prototype.isRootFolder=function(e){throw new Error("Not implemented!")},u.prototype.getRootFolder=function(){throw new Error("Not implemented!")},u.prototype.supportsSaveCollisionFlow=function(){return!1},u.prototype.requiresOverwriteCollisionHandling=function(){return!1},u.prototype.fileExists=async function(e,t,n){throw new Error("Not implemented!")},u.prototype.folderExists=function(e,t){throw new Error("Not implemented!")},u.prototype.getPreviousSelectedFolder=function(){return this.CURRENT_FOLDER_PROP?gContainer.getProperty(this.CURRENT_FOLDER_PROP).then(JSON.parse).catch(e=>{console.log("Current folder is not set",e.message)}):Promise.resolve(null)},u.prototype.clearPreviousSelectedFolder=function(){return gContainer.removeProperty(this.CURRENT_FOLDER_PROP)},u.prototype.getSupportedExtensions=function(){return this.getSupportedFileFormats().map(e=>{let{ext:t}=e;return t.toLowerCase()})},u.prototype.getSupportedMIMETypes=function(){return this.getSupportedFileFormats().map(e=>g(e))},u.prototype.filterTypesWithSearchString=function(e,t){if(!t||!e)return e;let n;if((t=t.toLowerCase()).startsWith(".")?n=t.slice(1):t.startsWith("*.")&&(n=t.slice(2)),!n)return e;const o=this.getSupportedFileFormats(),i=o.filter(t=>e.includes(g(t))).map(e=>e.ext).filter(e=>e.startsWith(n));if(i.length>0){return o.filter(e=>i.includes(e.ext)).map(g)}return[]},u.prototype.getSupportedFileFormats=function(){return this._driveSettings&&this._driveSettings.supportedFileFormats?this._driveSettings.supportedFileFormats:d},u.prototype.getDefaultFileFormat=function(){return this.getSupportedFileFormats().find(e=>e.default)},u.prototype.findFileFormatByExtension=function(e){return this.getSupportedFileFormats().find(t=>{let{ext:n}=t;return!!n&&n.toLowerCase()===e.toLowerCase()})},u.prototype.lookupByMimeType=function(e){const t=e.toLowerCase();return this.getSupportedFileFormats().find(e=>{const n=g(e);return!!n&&n.toLowerCase()===t})},u.prototype.getFileFormat=function(e){var t=this.findFileFormatByExtension(e.extension||e.ext);return t||(t=this.lookupByMimeType(e.type)),t},u.prototype.isFileSupported=function(e){return!(!e||!(this.getSupportedMIMETypes().includes(e.type)||this.getSupportedMIMETypes().includes(e.mimeType)||e.extension&&this.getSupportedExtensions().includes(e.extension.toLowerCase())))},u.prototype.canAccessFile=async function(){return!0},u.prototype.addAction=function(e){this._actions.push(e)},u.prototype.getActions=function(){return this._actions},u.prototype.setDefaultEmptyMessage=function(e){this._defaultEmpyMessage=e},u.prototype.getDefaultEmptyMessage=function(){return this._defaultEmpyMessage},u.prototype.generatePreviousSelectedFolderPath=function(){throw new Error("Not implemented!")},u.prototype.containsInPreviousPath=function(e){return this.PREVIOUS_SELECTED_FOLDER_PATH.find(t=>t===e.getId())},u.prototype.resetPreviousSelectedFolderPath=function(){this.PREVIOUS_SELECTED_FOLDER_PATH=[]},u.prototype.removeLoadedFolderFromPreviousPath=function(e){this.PREVIOUS_SELECTED_FOLDER_PATH=this.PREVIOUS_SELECTED_FOLDER_PATH.filter(t=>t!==e.getId())},u.prototype.hasTitleValidation=function(){return!1},u.prototype.getTitleValidator=function(){throw Error("NOT IMPLEMENTED")},u.prototype.loadExampleFiles=async function(){return Promise.resolve([])},u.prototype.isAssetsSharedWithMeFolder=function(){return!1},u.prototype.getSharedFilesWithMeFolder=function(){return null},u.prototype.getDriveIdPropertyName=function(){return"id"},u.Provider=c.Provider;t.default=u},function(e,t){e.exports={nodeEnv:"production",isBeta:!1,storeVendor:"",isCorel:!1,isTeams:"teams.coreldraw.app"===window.location.hostname}},function(e,t,n){"use strict";n(3);var o=n(1);function i(){}o.GObject.inherit(i,o.GEvent),i.prototype.toString=function(){return"[Object GMenuOpenEvent]"},i.EVENT=new i,e.exports=i},function(e,t,n){"use strict";var o=n(1);function i(e){this.user=e}o.GObject.inherit(i,o.GEvent),i.prototype.user=null,e.exports=i},function(e,t,n){"use strict";n(3);var o=n(1),i=n(378);function a(){i.call(this)}o.GObject.inherit(a,i),a.prototype.getOrientation=function(){return null},a.prototype.getMinimumWidth=function(){throw new Error("Not implemented.")},a.prototype.getDefaultWidth=function(){throw new Error("Not implemented.")},a.prototype.getSettingWidth=function(){return gDesigner.getSetting("sidebars_width_".concat(this.getId()),this.getDefaultWidth())},a.prototype.isResizeable=function(){return!1},a.prototype.isDeactivatable=function(){return!0},a.prototype.relayout=function(){},a.prototype.resize=function(){},a.prototype.init=function(e){},a.prototype.activate=function(){},a.prototype.isToolAllowed=function(e){return!0},a.prototype.deactivate=function(){},a.prototype.getTouchTools=function(e){let{disableContextSensitive:t=!1}=e;return null},a.prototype.updateBadge=function(e){return!1},a.prototype.toString=function(){return"[Object GSidebar]"},e.exports=a},function(e,t,n){"use strict";n(3);var o=n(1);function i(e,t){this.type=e,this.sidebar=t}o.GObject.inherit(i,o.GEvent),i.Type={Deactivated:10,Activated:11,ChildAdded:12,ChildRemoved:14},i.prototype.type=null,i.prototype.sidebar=null,i.prototype.toString=function(){return"[Object GSidebars.SidebarEvent]"},e.exports=i},function(e,t,n){"use strict";n(3);var o=n(1);function i(e){this.status=e}o.GObject.inherit(i,o.GEvent),i.Status={Init:0,Ready:1},i.prototype.status=null,i.prototype.toString=function(){return"[Object GApplicationStatusEvent]"},e.exports=i},function(e,t,n){"use strict";n(17),n(3),n(22);var o=n(1),i=n(13),a=n(34),r=n(61),s=n(9),l=n(16),c=n(97);function d(){d.TOOLTIP_CONFIG={[r.TOOLTIP_AREA.TOOLBAR]:r.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GClipAction","tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GClipAction","tooltip-description")),video:s.gApi.getRichTooltipVideoURL("Clip.mp4"),learnMore:"https://documentation.corelvector.com/organizing-your-designs/clipping-masking/"})}}o.GObject.inherit(d,c),d.ID="modify.clip",d.TITLE=new o.GLocaleKey("GClipAction","title"),d.TOOLTIP_CONFIG=null,d.prototype.getId=function(){return d.ID},d.prototype.getTitle=function(){return d.TITLE},d.prototype.getIcon=function(){return"gravit-icon-clip-circle"},d.prototype.getCategory=function(){return l.CATEGORY_MODIFY},d.prototype.getGroup=function(){return"structure-group"},d.prototype.isEnabled=function(){if(!c.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument();if(e){var t=e.getEditor().getIndividualSelection();return t&&t.length>1}return!1},d.prototype.getShortcut=function(){return[i.GKey.Constant.OPTION,i.GKey.Constant.META,"M"]},d.prototype.execute=function(e,t){var n=gDesigner.getActiveDocument().getEditor(),i=gDesigner.getActiveDocument().getScene(),r=o.GNode.order(n.getIndividualSelection().slice(),e),s=r.shift();if(!s.isLocked()){var l,c=s.getPaintBBox();t||n.beginTransaction();try{l=new Set;for(var d=0;d<r.length;++d)l.add(r[d].getParent());try{(0,a.blockChanges)(n,l,i,s);for(d=0;d<r.length;++d){var u=r[d];u.validateInsertion(s)&&u.getPaintBBox()&&c&&u.getPaintBBox().intersectsRect(c)&&(u.getParent().removeChild(u),s.appendChild(u))}}finally{(0,a.releaseChanges)(n,l,i,s),n.updateSelection(!1,[s])}}finally{t||n.commitTransaction(o.GLocale.get(new o.GLocaleKey("GClipAction","text.clip-selecion")))}}},d.prototype.getTooltipConfig=function(e){return e&&d.TOOLTIP_CONFIG[e]},d.prototype.toString=function(){return"[Object GClipAction]"},e.exports=d},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(61),r=n(16),s=n(97);function l(){l.TOOLTIP_CONFIG={[a.TOOLTIP_AREA.TOOLBAR]:a.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GConvertToPathAction","tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GConvertToPathAction","tooltip-description")),shortcut:l.SHORTCUT,learnMore:"https://documentation.corelvector.com/basics/modify-paths/#convert-to-path-raw-path"})}}o.GObject.inherit(l,s),l.ID="modify.converttopath",l.TITLE=new o.GLocaleKey("GConvertToPathAction","title"),l.SHORTCUT=[i.GKey.Constant.META,i.GKey.Constant.SHIFT,"P"],l.TOOLTIP_CONFIG=null,l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){return l.TITLE},l.prototype.getCategory=function(){return r.CATEGORY_MODIFY_PATH},l.prototype.getIcon=function(){return"gravit-icon-convert-to-path"},l.prototype.getGroup=function(){return"structure/modify"},l.prototype.getShortcut=function(){return l.SHORTCUT},l.prototype.isEnabled=function(){if(!s.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument();if(e){var t=e.getEditor().getSelection();if(t)for(var n=0;n<t.length;++n)if(!(t[n]instanceof o.GPath)&&!(t[n]instanceof o.GImage)&&!(t[n]instanceof o.GPathsGraph)&&(t[n]instanceof o.GPathBase||t[n].hasMixin(o.GVertexSource)&&!(t[n]instanceof o.GCompoundPath)))return!0}return!1},l.prototype.execute=function(){gDesigner.getActiveDocument().getEditor().convertSelectionToPaths()},l.prototype.getTooltipConfig=function(e){return e&&l.TOOLTIP_CONFIG[e]||null},l.prototype.toString=function(){return"[Object GConvertToPathAction]"},e.exports=l},function(e,t,n){"use strict";n(17),n(3),n(22);var o=n(1),i=n(13),a=n(34),r=n(61),s=n(16),l=n(97);function c(){c.TOOLTIP_CONFIG={[r.TOOLTIP_AREA.TOOLBAR]:r.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GGroupAction","tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GGroupAction","tooltip-description")),shortcut:c.SHORTCUT,learnMore:"https://documentation.corelvector.com/organizing-your-designs/groups/"})}}o.GObject.inherit(c,l),c.ID="modify.group",c.TITLE=new o.GLocaleKey("GGroupAction","title"),c.SHORTCUT=[i.GKey.Constant.META,"G"],c.TOOLTIP_CONFIG=null,c.prototype.getId=function(){return c.ID},c.prototype.getTitle=function(){return c.TITLE},c.prototype.getIcon=function(){return"gravit-icon-group"},c.prototype.getCategory=function(){return s.CATEGORY_MODIFY},c.prototype.getGroup=function(){return"structure-group"},c.prototype.getShortcut=function(){return c.SHORTCUT},c.prototype.isEnabled=function(){if(!l.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument();if(e){var t=e.getEditor().getIndividualSelection();if(t&&t.length>0)for(var n=new o.GGroup,i=t.length-1;i>=0;--i){var a=t[i];if(a.validateInsertion(n)&&!a.getParent().isLocked()&&n.validateInsertion(a.getParent()))return!0}}return!1},c.prototype.execute=function(){var e=gDesigner.getActiveDocument().getEditor(),t=o.GNode.order(e.getIndividualSelection().slice());e.beginTransaction();try{for(var n=new o.GGroup,i=[],r=0;r<t.length;++r){(p=t[r]).validateInsertion(n)&&i.push(p)}if(i.length>0){var s=i[i.length-1],l=s.getParent(),c=s.getNext();if(!l.isLocked()&&n.validateInsertion(l)){l.insertChild(n,c);var d,u=gDesigner.getActiveDocument().getScene();try{d=new Set;for(r=0;r<i.length;++r)d.add(i[r].getParent());(0,a.blockChanges)(e,d,u,n);for(r=0;r<i.length;++r){var p;(p=i[r]).getParent().removeChild(p),n.appendChild(p)}}finally{(0,a.releaseChanges)(e,d,u,n)}}e.updateSelection(!1,[n])}}finally{e.commitTransaction(o.GLocale.get(new o.GLocaleKey("GGroupAction","title")))}},c.prototype.getTooltipConfig=function(e){return e&&c.TOOLTIP_CONFIG[e]||null},c.prototype.toString=function(){return"[Object GGroupAction]"},e.exports=c},function(e,t,n){"use strict";var o=n(14),i=n(1),a=n(13),r=o(n(16)),s=o(n(27)),l=o(n(1257));class c extends l.default{static getActionSubId(e){return"".concat(c.ID,".").concat(e)}static getValidItems(e){let t=[];if(e instanceof i.GGroup||e instanceof i.GCompoundShape)for(let n=e.getFirstChild();null!==n;n=n.getNext()){const e=c.getValidItems(n);t=t.concat(e)}else e.hasMixin(i.GVertexSource)&&e.validateInsertion(new i.GCompoundShape)&&t.push(e);return t}getId(){return c.ID}getTitle(){return c.TITLE}getCategory(){return r.default.CATEGORY_MODIFY}getGroup(){return"structure-group"}isVisible(){return!1}getShortcut(){return[a.GKey.Constant.SHIFT,a.GKey.Constant.META,a.GKey.Constant.Y]}getIcon(){return super.getIcon.call(this)}isEnabled(){const e=gDesigner.getActiveDocument(),t=e&&e.getEditor(),n=t&&t.getIndividualSelection();if(!n||!n.length)return!1;let o=[];for(let e=0;e<n.length;++e){const t=n[e];if(o=o.concat(c.getValidItems(t)),o.length>1)return!0}if(1===o.length){const e=o[0];return e instanceof i.GCompoundShape||e.getParent()instanceof i.GCompoundShape}return!1}getShortcutHint(e){return s.default.prototype.getShortcutHint.call(this,e)}execute(){const e=c.getActionSubId(this.Type.Union);gDesigner.executeAction(e)}toString(){return"[Object GMergeMainAction]"}}c.ID="modify.merge",c.TITLE=new i.GLocaleKey("GMergeMainAction","title"),e.exports=c},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(16),r=n(27),s=n(151);const l=n(431);function c(){}o.GObject.inherit(c,r),c.ID="file.open",c.TITLE=new o.GLocaleKey("GOpenAction","title"),c.prototype.getId=function(){return c.ID},c.prototype.getTitle=function(){return c.TITLE},c.prototype.getCategory=function(){return a.CATEGORY_FILE},c.prototype.getGroup=function(){return"file-open"},c.prototype.getShortcut=function(){return[i.GKey.Constant.META,"O"]},c.prototype.isEnabled=function(e){return(e=e||gDesigner.getDefaultStorage()).canPromptOpen()&&gDesigner.getApplicationManager().isOpenFilesFromLocalEnabled()},c.prototype.isAvailable=function(){return i.GPlatform.webBrowser!==i.GPlatform.constructor.WebBrowser.Safari},c.prototype.execute=function(e,t){new l(()=>{(e=e||gDesigner.getDefaultStorage()).openPrompt(s.FileTypes.filter(e=>e.load),e=>{gDesigner.openDocument(e),t&&t()},!1)},()=>{gDesigner.stats("action-cancelled_anonymous",this.getId())})},c.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-touch-file-open":""},c.prototype.toString=function(){return"[Object GOpenAction]"},e.exports=c},function(e){e.exports=JSON.parse('[{"language":"English","keyValue":0,"abbreviation":"en-US","isDefault":true,"isAvailable":true,"realName":"English","translations":{"GBCP47LanguageTags":{"text.lang.abq":"Abaza","text.lang.ab":"Abkhazian","text.lang.ach":"Acholi","text.lang.acr":"Achi","text.lang.ady":"Adyghe","text.lang.af":"Afrikaans","text.lang.aa":"Afar","text.lang.ahg":"Agaw","text.lang.aio":"Aiton","text.lang.ak":"Akan","text.lang.x-hbotakb":"Batak Angkola","text.lang.gsw":"Alsatian","text.lang.alt":"Altai","text.lang.am":"Amharic","text.lang.ang":"Anglo-Saxon","text.lang.und-fonnapa":"Phonetic transcription—Americanist conventions","text.lang.ar":"Arabic","text.lang.an":"Aragonese","text.lang.aiw":"Aari","text.lang.rki":"Rakhine","text.lang.as":"Assamese","text.lang.ast":"Asturian","text.lang.ath":"Athapaskan languages","text.lang.x-hbotavn":"Avatime","text.lang.av":"Avar","text.lang.awa":"Awadhi","text.lang.ay":"Aymara","text.lang.azb":"Torki","text.lang.az":"Azerbaijani","text.lang.bfq":"Badaga","text.lang.bad":"Banda","text.lang.bfy":"Baghelkhandi","text.lang.x-hbotbal":"Balkar","text.lang.ban":"Balinese","text.lang.bar":"Bavarian","text.lang.bci":"Baulé","text.lang.bbc":"Batak Toba","text.lang.ber":"Berber","text.lang.bcq":"Bench","text.lang.x-hbotbcr":"Bible Cree","text.lang.bdy":"Bandjalang","text.lang.be":"Belarussian","text.lang.bem":"Bemba","text.lang.bn":"Bengali","text.lang.bgc":"Haryanvi","text.lang.bgq":"Bagri","text.lang.bg":"Bulgarian","text.lang.bhb":"Bhili","text.lang.bho":"Bhojpuri","text.lang.bik":"Bikol","text.lang.byn":"Bilen","text.lang.bi":"Bislama","text.lang.bjj":"Kanauji","text.lang.bla":"Blackfoot","text.lang.bal":"Baluchi","text.lang.blk":"Pa’o Karen","text.lang.bjt":"Balante","text.lang.bft":"Balti","text.lang.bm":"Bambara (Bamanankan)","text.lang.bai":"Bamileke","text.lang.bs":"Bosnian","text.lang.bpy":"Bishnupriya Manipuri","text.lang.br":"Breton","text.lang.brh":"Brahui","text.lang.bra":"Braj Bhasha","text.lang.my":"Burmese","text.lang.brx":"Bodo","text.lang.ba":"Bashkir","text.lang.bsk":"Burushaski","text.lang.x-hbotbtd":"Batak Dairi (Pakpak)","text.lang.beb":"Beti","text.lang.x-hbotbtk":"Batak languages","text.lang.x-hbotbtm":"Batak Mandailing","text.lang.bts":"Batak Simalungun","text.lang.x-hbotbtx":"Batak Karo","text.lang.x-hbotbtz":"Batak Alas-Kluet","text.lang.bug":"Bugis","text.lang.byv":"Medumba","text.lang.cak":"Kaqchikel","text.lang.ca":"Catalan","text.lang.cbk":"Zamboanga Chavacano","text.lang.cco":"Chinantec","text.lang.ceb":"Cebuano","text.lang.cgg":"Chiga","text.lang.ch":"Chamorro","text.lang.ce":"Chechen","text.lang.sgw":"Chaha Gurage","text.lang.hne":"Chattisgarhi","text.lang.ny":"Chichewa (Chewa, Nyanja)","text.lang.ckt":"Chukchi","text.lang.chk":"Chuukese","text.lang.cho":"Choctaw","text.lang.chp":"Chipewyan","text.lang.chr":"Cherokee","text.lang.cv":"Chuvash","text.lang.chy":"Cheyenne","text.lang.cja":"Western Cham","text.lang.cjm":"Eastern Cham","text.lang.swb":"Comorian","text.lang.cop":"Coptic","text.lang.kw":"Cornish","text.lang.co":"Corsican","text.lang.crp":"Creoles","text.lang.cr":"Cree","text.lang.crx":"Carrier","text.lang.crh":"Crimean Tatar","text.lang.csb":"Kashubian","text.lang.cu":"Church Slavonic","text.lang.cs":"Czech","text.lang.ctg":"Chittagonian","text.lang.cuk":"San Blas Kuna","text.lang.x-hbotdag":"Dagbani","text.lang.da":"Danish","text.lang.dar":"Dargwa","text.lang.dax":"Dayi","text.lang.cwd":"Woods Cree","text.lang.de":"German","text.lang.dgo":"Dogri (individual language)","text.lang.doi":"Dogri (macrolanguage)","text.lang.dhg":"Dhangu","text.lang.x-hbotdhv":"Divehi (Dhivehi, Maldivian)","text.lang.diq":"Dimli","text.lang.dv":"Divehi (Dhivehi, Maldivian)","text.lang.dje":"Zarma","text.lang.djr":"Djambarrpuyngu","text.lang.ada":"Dangme","text.lang.dnj":"Dan","text.lang.din":"Dinka","text.lang.prs":"Dari","text.lang.dwu":"Dhuwal","text.lang.dng":"Dungan","text.lang.dz":"Dzongkha","text.lang.igb":"Ebira","text.lang.crj":"Eastern Cree","text.lang.bin":"Edo","text.lang.efi":"Efik","text.lang.el":"Greek","text.lang.emk":"Eastern Maninkakan","text.lang.en":"English","text.lang.myv":"Erzya","text.lang.es":"Spanish","text.lang.esu":"Central Yupik","text.lang.et":"Estonian","text.lang.eu":"Basque","text.lang.evn":"Evenki","text.lang.eve":"Even","text.lang.ee":"Ewe","text.lang.acf":"French Antillean","text.lang.fan":"Fang","text.lang.fa":"Persian","text.lang.fat":"Fanti","text.lang.fi":"Finnish","text.lang.fj":"Fijian","text.lang.vls":"Dutch (Flemish)","text.lang.fmp":"Fe’fe’","text.lang.enf":"Forest Enets","text.lang.fon":"Fon","text.lang.fo":"Faroese","text.lang.fr":"French","text.lang.frc":"Cajun French","text.lang.fy":"Frisian","text.lang.fur":"Friulian","text.lang.frp":"Arpitan","text.lang.fuf":"Futa","text.lang.ff":"Fulah","text.lang.fuv":"Nigerian Fulfulde","text.lang.gaa":"Ga","text.lang.gd":"Scottish Gaelic (Gaelic)","text.lang.gag":"Gagauz","text.lang.gl":"Galician","text.lang.x-hbotgar":"Garshuni","text.lang.gbm":"Garhwali","text.lang.gez":"Geez","text.lang.gih":"Githabul","text.lang.niv":"Gilyak","text.lang.gil":"Kiribati (Gilbertese)","text.lang.gkp":"Kpelle (Guinea)","text.lang.glk":"Gilaki","text.lang.guk":"Gumuz","text.lang.gnn":"Gumatj","text.lang.gog":"Gogo","text.lang.gon":"Gondi","text.lang.kl":"Greenlandic","text.lang.grt":"Garo","text.lang.gn":"Guarani","text.lang.guc":"Wayuu","text.lang.guf":"Gupapuyngu","text.lang.gu":"Gujarati","text.lang.guz":"Gusii","text.lang.ht":"Haitian (Haitian Creole)","text.lang.cfm":"Halam (Falam Chin)","text.lang.hoj":"Harauti","text.lang.ha":"Hausa","text.lang.haw":"Hawaiian","text.lang.hay":"Haya","text.lang.haz":"Hazaragi","text.lang.amf":"Hammer-Banna","text.lang.hz":"Herero","text.lang.hil":"Hiligaynon","text.lang.hi":"Hindi","text.lang.mrj":"High Mari","text.lang.hmn":"Hmong","text.lang.ho":"Hiri Motu","text.lang.hnd":"Hindko","text.lang.hoc":"Ho","text.lang.har":"Harari","text.lang.hr":"Croatian","text.lang.hu":"Hungarian","text.lang.hyw":"Armenian","text.lang.hy":"Armenian East","text.lang.iba":"Iban","text.lang.ibb":"Ibibio","text.lang.ig":"Igbo","text.lang.io":"Ido","text.lang.ijo":"Ijo languages","text.lang.ie":"Interlingue","text.lang.ilo":"Ilokano","text.lang.ia":"Interlingua","text.lang.id":"Indonesian","text.lang.inh":"Ingush","text.lang.iu":"Inuktitut","text.lang.ik":"Inupiat","text.lang.und-fonipa":"Phonetic transcription—IPA conventions","text.lang.ga":"Irish","text.lang.ga-latg":"Irish Traditional","text.lang.is":"Icelandic","text.lang.smn":"Inari Sami","text.lang.it":"Italian","text.lang.he":"Hebrew","text.lang.jam":"Jamaican Creole","text.lang.ja":"Japanese","text.lang.jv":"Javanese","text.lang.jbo":"Lojban","text.lang.jct":"Krymchak","text.lang.yi":"Yiddish","text.lang.lad":"Ladino","text.lang.dyu":"Jula","text.lang.kbd":"Kabardian","text.lang.kab":"Kabyle","text.lang.kfr":"Kachchi","text.lang.kln":"Kalenjin","text.lang.kn":"Kannada","text.lang.krc":"Karachay","text.lang.ka":"Georgian","text.lang.x-hbotkaw":"Kawi (Old Javanese)","text.lang.kk":"Kazakh","text.lang.kde":"Makonde","text.lang.kea":"Kabuverdianu (Crioulo)","text.lang.ktb":"Kebena","text.lang.kek":"Kekchi","text.lang.und-geok":"Khutsuri Georgian","text.lang.kjh":"Khakass","text.lang.kca":"Khanty-Kazim","text.lang.km":"Khmer","text.lang.x-hbotkhs":"Khanty-Shurishkar","text.lang.x-hbotkht":"Khamti Shan","text.lang.x-hbotkhv":"Khanty-Vakhi","text.lang.khw":"Khowar","text.lang.ki":"Kikuyu (Gikuyu)","text.lang.ky":"Kirghiz (Kyrgyz)","text.lang.kqs":"Kisii","text.lang.kiu":"Kirmanjki","text.lang.kjd":"Southern Kiwai","text.lang.kjp":"Eastern Pwo Karen","text.lang.kjz":"Bumthangkha","text.lang.kex":"Kokni","text.lang.xal":"Kalmyk","text.lang.kam":"Kamba","text.lang.kfy":"Kumaoni","text.lang.kmw":"Komo","text.lang.kxc":"Komso","text.lang.kmz":"Khorasani Turkic","text.lang.kr":"Kanuri","text.lang.kfa":"Kodagu","text.lang.okm":"Korean Old Hangul","text.lang.kok":"Konkani","text.lang.kv":"Komi","text.lang.ktu":"Kikongo","text.lang.kg":"Kongo","text.lang.koi":"Komi-Permyak","text.lang.ko":"Korean","text.lang.kos":"Kosraean","text.lang.kpv":"Komi-Zyrian","text.lang.kpe":"Kpelle","text.lang.kri":"Krio","text.lang.kaa":"Karakalpak","text.lang.krl":"Karelian","text.lang.kdr":"Karaim","text.lang.kar":"Karen","text.lang.kqy":"Koorete","text.lang.ks":"Kashmiri","text.lang.ksh":"Ripuarian","text.lang.kha":"Khasi","text.lang.sjd":"Kildin Sami","text.lang.ksw":"S’gaw Karen","text.lang.kj":"Kuanyama","text.lang.kxu":"Kui","text.lang.kfx":"Kulvi","text.lang.kum":"Kumyk","text.lang.ku":"Kurdish","text.lang.kru":"Kurukh","text.lang.kdt":"Kuy","text.lang.kpy":"Koryak","text.lang.kyu":"Western Kayah","text.lang.lld":"Ladin","text.lang.bfu":"Lahuli","text.lang.lbe":"Lak","text.lang.lmn":"Lambani","text.lang.lo":"Lao","text.lang.la":"Latin","text.lang.lzz":"Laz","text.lang.x-hbotlcr":"L-Cree","text.lang.lbj":"Ladakhi","text.lang.x-hbotlef":"Lelemi","text.lang.lez":"Lezgi","text.lang.lij":"Ligurian","text.lang.li":"Limburgish","text.lang.ln":"Lingala","text.lang.lis":"Lisu","text.lang.ljp":"Lampung","text.lang.lki":"Laki","text.lang.mhr":"Low Mari","text.lang.lif":"Limbu","text.lang.lmo":"Lombard","text.lang.ngl":"Lomwe","text.lang.lom":"Loma","text.lang.bqi":"Luri","text.lang.dsb":"Lower Sorbian","text.lang.smj":"Lule Sami","text.lang.lt":"Lithuanian","text.lang.lb":"Luxembourgish","text.lang.lua":"Luba-Lulua","text.lang.lu":"Luba-Katanga","text.lang.lg":"Ganda","text.lang.luy":"Luyia","text.lang.luo":"Luo","text.lang.lv":"Latvian","text.lang.mad":"Madura","text.lang.mag":"Magahi","text.lang.mh":"Marshallese","text.lang.mpe":"Majang","text.lang.vmw":"Makhuwa","text.lang.ml":"Malayalam","text.lang.mam":"Mam","text.lang.mns":"Mansi","text.lang.arn":"Mapudungun","text.lang.mr":"Marathi","text.lang.mwr":"Marwari","text.lang.kmb":"Mbundu","text.lang.mbo":"Mbo","text.lang.mnc":"Manchu","text.lang.crm":"Moose Cree","text.lang.men":"Mende","text.lang.mdr":"Mandar","text.lang.mym":"Me’en","text.lang.mer":"Meru","text.lang.mfa":"Pattani Malay","text.lang.mfe":"Morisyen","text.lang.min":"Minangkabau","text.lang.lus":"Mizo","text.lang.mk":"Macedonian","text.lang.mak":"Makasar","text.lang.mkw":"Kituba","text.lang.mdy":"Male","text.lang.mg":"Malagasy","text.lang.mlq":"Malinke","text.lang.x-hbotmlr":"Malayalam Reformed","text.lang.ms":"Malay","text.lang.mnk":"Mandinka","text.lang.mn":"Mongolian","text.lang.mni":"Manipuri","text.lang.man":"Maninka","text.lang.gv":"Manx","text.lang.moh":"Mohawk","text.lang.mdf":"Moksha","text.lang.ro-md":"Moldavian","text.lang.mnw":"Mon","text.lang.ary":"Moroccan","text.lang.mos":"Mossi","text.lang.mi":"Maori","text.lang.mai":"Maithili","text.lang.mt":"Maltese","text.lang.unr":"Mundari","text.lang.mus":"Muscogee","text.lang.mwl":"Mirandese","text.lang.mww":"Hmong Daw","text.lang.myn":"Mayan","text.lang.mzn":"Mazanderani","text.lang.nag":"Naga-Assamese","text.lang.nah":"Nahuatl","text.lang.gld":"Nanai","text.lang.nap":"Neapolitan","text.lang.nsk":"Naskapi","text.lang.na":"Nauruan","text.lang.nv":"Navajo","text.lang.csw":"N-Cree","text.lang.nd":"Ndebele","text.lang.ndc":"Ndau","text.lang.ng":"Ndonga","text.lang.nds":"Low Saxon","text.lang.ne":"Nepali","text.lang.new":"Newari","text.lang.nga":"Ngbaka","text.lang.x-hbotngr":"Nagari","text.lang.x-hbotnhc":"Norway House Cree","text.lang.njz":"Nisi","text.lang.niu":"Niuean","text.lang.nyn":"Nyankole","text.lang.nqo":"N’Ko","text.lang.nl":"Dutch","text.lang.noe":"Nimadi","text.lang.nog":"Nogai","text.lang.no":"Norwegian","text.lang.nov":"Novial","text.lang.se":"Northern Sami","text.lang.nso":"Northern Sotho","text.lang.nod":"Northern Tai","text.lang.eo":"Esperanto","text.lang.nym":"Nyamwezi","text.lang.nn":"Norwegian Nynorsk (Nynorsk, Norwegian)","text.lang.nza":"Mbembe Tigon","text.lang.oc":"Occitan","text.lang.ojs":"Oji-Cree","text.lang.oj":"Ojibway","text.lang.or":"Odia (formerly Oriya)","text.lang.om":"Oromo","text.lang.os":"Ossetian","text.lang.sam":"Palestinian Aramaic","text.lang.pag":"Pangasinan","text.lang.pi":"Pali","text.lang.pam":"Pampangan","text.lang.pa":"Punjabi","text.lang.plp":"Palpa","text.lang.pap":"Papiamentu","text.lang.ps":"Pashto","text.lang.pau":"Palauan","text.lang.pcc":"Bouyei","text.lang.pcd":"Picard","text.lang.pdc":"Pennsylvania German","text.lang.el-polyton":"Polytonic Greek","text.lang.phk":"Phake","text.lang.pih":"Norfolk","text.lang.fil":"Filipino","text.lang.pce":"Palaung","text.lang.pl":"Polish","text.lang.pms":"Piemontese","text.lang.pnb":"Western Panjabi","text.lang.poh":"Pocomchi","text.lang.pon":"Pohnpeian","text.lang.pro":"Provençal / Old Provençal","text.lang.pt":"Portuguese","text.lang.pwo":"Western Pwo Karen","text.lang.bgr":"Chin","text.lang.quc":"K’iche’","text.lang.quh":"Quechua (Bolivia)","text.lang.qu":"Quechua","text.lang.qvi":"Quechua (Ecuador)","text.lang.qwh":"Quechua (Peru)","text.lang.raj":"Rajasthani","text.lang.rar":"Rarotongan","text.lang.bxr":"Russian Buriat","text.lang.atj":"R-Cree","text.lang.rej":"Rejang","text.lang.ria":"Riang","text.lang.rif":"Tarifit","text.lang.rit":"Ritarungo","text.lang.rkw":"Arakwal","text.lang.rm":"Romansh","text.lang.rmy":"Vlax Romani","text.lang.ro":"Romanian","text.lang.rom":"Romany","text.lang.rue":"Rusyn","text.lang.rtm":"Rotuman","text.lang.rw":"Kinyarwanda","text.lang.rn":"Rundi","text.lang.rup":"Aromanian","text.lang.ru":"Russian","text.lang.sck":"Sadri","text.lang.sa":"Sanskrit","text.lang.sas":"Sasak","text.lang.sat":"Santali","text.lang.x-hbotsay":"Sayisi","text.lang.scn":"Sicilian","text.lang.sco":"Scots","text.lang.scs":"North Slavey","text.lang.xan":"Sekota","text.lang.sel":"Selkup","text.lang.sga":"Old Irish","text.lang.sg":"Sango","text.lang.sgs":"Samogitian","text.lang.shi":"Tachelhit","text.lang.shn":"Shan","text.lang.sjo":"Sibe","text.lang.sid":"Sidamo","text.lang.stv":"Silte Gurage","text.lang.sms":"Skolt Sami","text.lang.sk":"Slovak","text.lang.den":"Slavey","text.lang.sl":"Slovenian","text.lang.so":"Somali","text.lang.sm":"Samoan","text.lang.seh":"Sena","text.lang.sn":"Shona","text.lang.sd":"Sindhi","text.lang.si":"Sinhala (Sinhalese)","text.lang.snk":"Soninke","text.lang.gru":"Sodo Gurage","text.lang.sop":"Songe","text.lang.st":"Southern Sotho","text.lang.sq":"Albanian","text.lang.sr":"Serbian","text.lang.sc":"Sardinian","text.lang.skr":"Saraiki","text.lang.srr":"Serer","text.lang.xsl":"South Slavey","text.lang.sma":"Southern Sami","text.lang.stq":"Saterland Frisian","text.lang.suk":"Sukuma","text.lang.su":"Sundanese","text.lang.suq":"Suri","text.lang.sva":"Svan","text.lang.sv":"Swedish","text.lang.aii":"Swadaya Aramaic","text.lang.sw":"Swahili","text.lang.ss":"Swati","text.lang.ngo":"Sutu","text.lang.sxu":"Upper Saxon","text.lang.syl":"Sylheti","text.lang.syr":"Syriac","text.lang.und-syre":"Syriac, Estrangela script-variant (equivalent to ISO 15924 \'Syre\')","text.lang.und-syrj":"Syriac, Western script-variant (equivalent to ISO 15924 \'Syrj\')","text.lang.und-syrn":"Syriac, Eastern script-variant (equivalent to ISO 15924 \'Syrn\')","text.lang.szl":"Silesian","text.lang.tab":"Tabasaran","text.lang.tg":"Tajiki","text.lang.ta":"Tamil","text.lang.tt":"Tatar","text.lang.x-hbottcr":"TH-Cree","text.lang.tdd":"Dehong Dai","text.lang.te":"Telugu","text.lang.tet":"Tetum","text.lang.tl":"Tagalog","text.lang.to":"Tongan","text.lang.tig":"Tigre","text.lang.ti":"Tigrinya","text.lang.th":"Thai","text.lang.ty":"Tahitian","text.lang.bo":"Tibetan","text.lang.tiv":"Tiv","text.lang.tk":"Turkmen","text.lang.tmh":"Tamashek","text.lang.tem":"Temne","text.lang.tn":"Tswana","text.lang.yrk":"Tundra Enets","text.lang.toi":"Tonga","text.lang.xwo":"Todo","text.lang.tod":"Toma","text.lang.tpi":"Tok Pisin","text.lang.tr":"Turkish","text.lang.ts":"Tsonga","text.lang.tsj":"Tshangla","text.lang.tru":"Turoyo Aramaic","text.lang.tcy":"Tumbuka","text.lang.tum":"Tulu","text.lang.tyv":"Tuvin","text.lang.tvl":"Tuvalu","text.lang.tw":"Twi","text.lang.tyz":"Tày","text.lang.tzm":"Tamazight","text.lang.tzo":"Tzotzil","text.lang.udm":"Udmurt","text.lang.uk":"Ukrainian","text.lang.umb":"Umbundu","text.lang.ur":"Urdu","text.lang.hsb":"Upper Sorbian","text.lang.ug":"Uyghur","text.lang.uz":"Uzbek","text.lang.vec":"Venetian","text.lang.ve":"Venda","text.lang.vi":"Vietnamese","text.lang.vo":"Volapük","text.lang.vro":"Võro","text.lang.wbm":"Wa","text.lang.wbr":"Wagdi","text.lang.war":"Waray-Waray","text.lang.x-hbotwci":"Waci Gbe","text.lang.crk":"West-Cree","text.lang.cy":"Welsh","text.lang.wo":"Wolof","text.lang.wa":"Walloon","text.lang.wtm":"Mewati","text.lang.khb":"Lü","text.lang.xh":"Xhosa","text.lang.xjb":"Minjangbal","text.lang.xkf":"Khengkha","text.lang.xog":"Soga","text.lang.xpe":"Kpelle (Liberia)","text.lang.sah":"Sakha","text.lang.yao":"Yao","text.lang.yap":"Yapese","text.lang.yo":"Yoruba","text.lang.x-hbotycr":"Y-Cree","text.lang.x-hbotyic":"Yi Classic","text.lang.ii":"Yi Modern","text.lang.zea":"Zealandic","text.lang.zgh":"Standard Moroccan Tamazight","text.lang.za":"Zhuang","text.lang.zh-hk":"Chinese, Traditional, Hong Kong SAR","text.lang.x-hbotzhp":"Chinese, Phonetic","text.lang.zh-hans":"Chinese, Simplified","text.lang.zh-hant":"Chinese, Traditional","text.lang.x-hbotzhtm":"Chinese, Traditional, Macao SAR","text.lang.zne":"Zande","text.lang.zu":"Zulu","text.lang.zza":"Zazaki"},"GMemoryManager":{"text.title":"%app is low on memory.","text.subtitle":"Please close a few files to free up some memory and avoid losing your progress."},"GBetaFlow":{"text.title":"You are using the beta version of %app.","text.message":"This is a pre-release version and may contain bugs, we strongly advise against using it for production work.","text.i-understand":"I understand"},"GSharepointOneDriveAuthenticator":{"text.please-hold-on":"Please hold on, we are logging you in."},"GSubAction":{"shortcut-hint-template":"%mainShortcutHint then %shortcutSubKeyHint"},"GSharePointCheckInAction":{"title":"Check In to SharePoint","text.doc-modified-save-before-check-in":"\'%title\' has been modified, please save it before doing the \'Check In\'."},"GSharePointCheckOutAction":{"title":"Check Out and Refresh from SharePoint","text.successul-checkout":"The document was succesfully checked out.","text.already-checkout":"The document is already checked out by you."},"GImportImageFromIOSAction":{"text.ios-files":"From Files","text.ios-photos":"From Photos"},"GIPadStorageDestinations":{"text.files":"Files","text.photos":"Photos"},"GIPadStorage":{"text.saving-to-photos-failed":"Exporting files requires access to Photos in iOS. Please go to “Settings > %app > Photos” and enable access.<br/>Note that this will reload the application, please ensure to save progress for your opened design files."},"GOpenQuickHelpScreenAction":{"title":"Show Quick Help"},"GSharePointStorage":{"text.error-failed-check-out-file":"Failed to check out the Sharepoint file, please be sure it\'s not check out by someone else to avoid losing your work"},"GQuickHelpScreen":{"text.menu":"Menu","text.open":"Open","text.save":"Save","text.undo-redo":"Undo/Redo","text.zoom":"Zoom","text.snapping":"Snapping","text.select":"Select","text.shapes":"Shapes","text.path":"Path","text.knife":"Knife","text.text":"Text","text.image":"Image","text.files":"Files","text.export":"Export","text.pages":"Pages","text.layers":"Layers","text.libraries":"Libraries","text.symbols":"Symbols","text.align-distribute":"Align and Distribute","text.transform":"Transform","text.document":"Document","text.appearance":"Appearance","text.fills":"Fills","text.borders":"Borders","text.effects":"Effects","text.comments":"Comments","text.modifier-keys":"Modifier Keys","text.nudge":"Nudge","text.copy":"Copy","text.paste":"Paste","text.delete":"Delete","text.select-deselect":"Select/Deselect All","text.arrange":"Arrange","text.fullscreen":"Fullscreen","text.group":"Group","text.ungroup":"Ungroup","text.convert-to-path":"Convert to Path","text.pinch-to-zoom":"Pinch to Zoom","text.drag-with-2-fingers":"Drag with 2 fingers to Pan","text.tap-and-hold":"Tap and Hold for Contextual menu"},"GAutoSave":{"text.notification-message-1":"Calm down, your file is being auto-saved.","text.notification-message-2":"Don’t worry, your progress is saved automatically.","text.notification-message-3":"We have your back, we are saving your design now.","text.failed-auto-saving":"We were unable to save your document right now, but don’t worry, we will try again soon.","text.alert-offline":"Auto-save isn’t available when being offline. Please download the file regularly to avoid losing progress.","text.alert-offline-desktop":"Auto-save isn’t available when being offline. Please save to a local file regularly to avoid losing progress.","text.alert-sync":"Please save this file to Corel Vector to enable Auto-save. ","text.alert-sync-sub-text":"Auto-save isn\'t available for unsaved files or locally saved files.<br />Please save or sync \\"%title\\" to Corel Vector to save your progress automatically and avoid losing progress. You can keep your file locally and sync it to the Cloud at any time from the “File“ menu.","text.alert-button.cancel":"Cancel","text.alert-button.save-to-cloud":"Save to Cloud","text.alert-cloud-reference-sync":"Auto-save isn\'t available for local files (“%title”). Please open the file from Corel Vector if you want to enable auto-save.","text.alert-cloud-reference-sync-sub-text":"Please make sure to save regularly, to avoid losing progress.","text.dialog-no-entries-created-waring.title":"This %storage file will be saved automatically, but no entries in the version history will be created. You can turn off this feature in the settings.","text.dialog-no-entries-created-waring.subtitle":"Please note that reloading this file discards all unsaved progress.","text.dialog-no-entries-created-waring.go-settings":"Go to Settings","text.dialog-file-updated-out-app-waring.title":"The file \\"%file-name\\" was modified outside of %app-name and can’t be auto-saved. Please consider saving it manually.","text.dialog-file-updated-out-app-waring.do-not-reload":"Don\'t reload","text.dialog-file-updated-out-app-waring.reload":"Reload with latest changes","text.dialog-inform-warn-feature.title":"Corel Vector can save your files automatically. Do you want to enable Auto-Save?","text.dialog-inform-warn-feature.text":"You can always change this behavior from the Settings in the Edit menu.","text.dialog-inform-warn-feature.cancel-button":"I will save my files manually","text.dialog-inform-warn-feature.enable-button":"Enable Auto-Save","text.dialog-auto-save-is-not-available-for-cdr-and-des.text":"Auto-save isn’t available for CorelDRAW (CDR, DES) files. Please make sure to save regularly to avoid losing progress or save as CDRAPP to enable auto-save.","text.dialog-auto-save-is-not-available-for-cdr-and-des.save-as-button":"Save as CDRAPP","text.dialog-auto-save-is-not-available-for-cdr-and-des.keep-cdr-button":"Keep CDR, DES"},"GFileReviewManager":{"text.cant-update-file-to-status":"Can\'t update to this status"},"GReviewDockerProperties":{"text.current-status":"Current status:","text.status-history":"Status history","text.please-share-to-start":"Please share the file to start the review process.","text.share-design-now":"Share the design now","text.review-title":"In review","text.review-description":"Reviewers give feedback.","text.reopen-title":"Reopen","text.reopened-title":"Reopened","text.reopen-description":"Review done, the design needs changes.","text.requested-approval-title":"All Done. Ready for Approval","text.request-approval-title":"Request Approval","text.request-approval-description":"All feedback is addressed. No pending changes.","text.approved-title":"Approved","text.approve-title":"Approve","text.approved-description":"No more changes are needed. File is ready for output.","text.request-approval-tooltip":"No Approver(s) assigned to this file. Please assign Approver(s) with the Share button.","text-please-save-share-to-start":"Please save and share the file to start the review process.","text.save-share-design-now":"Save and share the design now"},"GFileStatusHistoryDialog":{"text.status-history":"Status history","text.action-request-approval":"%name <highlight>requested approval</highlight> for this file","text.action-approved":"%name <highlight>approved</highlight> this file","text.action-reopened":"%name <highlight>reopened</highlight> this file","text.action-in-review":"%name <highlight>requested review</highlight> for this file"},"GCollaborativeTextPanel":{"text.send-changes-failed":"There was a problem applying your changes to this design. Please try again.","text.owner-message":"Please refer to CorelDRAW to make changes in this CDR file.","text.finish-editing-message":"Please double-click inside the text element to edit it. When you are ready, click “Finish Editing“ to complete your editing session.","text.send-changes-message":"Send the changes to the file owner?","text.request-access-message":"You can\'t currently edit text elements since there is an active editing session by %name. The file will be unlocked automatically when the other editor is done or you can request access.","text.update-available-message":"There is an updated version of this file. Do you want to reload now?","text.request-access":"Request Access","text.finish-editing":"Finish Editing","text.back-to-editing":"Back to editing","text.preview-changes":"Preview Changes","text.send-changes":"Send Changes","text.rendering-preview":"Rendering preview...","text.sending-changes":"Sending...","text.updating":"Updating...","text.wants-to-take-over":"%name wants to take over the text editing in this document. If you allow this you will be unable to edit text objects until %name finishes the edits.","text.save-my-edits-and-allow":"Save my edits and Allow","text.save-my-edits-and-close":"Save my edits and close","text.discard-my-edits-and-allow":"Discard my edits and Allow","text.discard-my-edits-and-close":"Discard my edits and close","text.decline":"Decline until I am done","text.update-now":"Update Now","text.request-has-been-sent":"A request has been sent to %name.","text.send-to-owner":"Send the changes to the file owner and notify him?","text.your-changes-were-applied":"Your changes were applied.","text.changes-you-made-are-not-saved":"You edited this document, but the changes you made are not saved. If you do not save them now they will be lost."},"GCollaborators":{"text.content-editor-tooltip":"%username can edit text in this design","text.you-are-offline":"You are offline","text.you-are-offline-tooltip":"You can’t co-edit this document or comment when you are offline.","text.reviewer-tooltip":"%username can review this design","text.content_editor-tooltip":"%username can edit text in this design","text.approver-tooltip":"%username can review and approve this design","text.owner-tooltip":"%username is the owner of this design","text.can-edit-tooltip":"%username can edit this design","text.can-comment-tooltip":"%username can comment on this design","text.can-edit-parts-tooltip":"%username can edit parts of this design"},"GCloudUtil":{"text.err-subscription-is-lifetime":"You already have a Lifetime subscription.","text.err-subscription-could-not-be-deactivated":"You already have an active subscription. <BR/>If you want to apply a new coupon code you need to cancel it in your <A>account settings</A>.","text.err-subscription-is-not-expired":"Your current subscription is good through %date.<BR/>You may only apply a coupon code to new or expired subscriptions.","text.err-subscription-is-active":"You already have an active subscription.<BR/>Even if you cancel it, your current subscription is good through %date.<BR/>You may only apply a coupon code to new or expired subscriptions."},"GMagnificationAction":{"text.actual-size":"Actual Size"},"GOpenAccountSettingsAction":{"title":"Account settings"},"GLogoutAction":{"title":"Log out"},"GToggleTouchAction":{"title":"Touch interface","title-disable":"Disable Touch Interface","text.try-this-feature-pro-tooltip-title":"Touch Interface","text.try-this-feature-pro-tooltip-description":"Show/hide the Interface optimized for touch-enabled devices."},"GExampleFilesAction":{"title":"Explore Example Files"},"GGoogleDrive":{"text.warning-message":"By default, only files that were created in Corel Vector will be shown here. To open additional files from your Google Drive, please use the button below. Please note that you need to select each folder and the included files separately so that they show up here.","text.add-files":"Open files...","text.you-have-not-added":"You haven’t opened files or saved files from/to your Google Drive yet.","text.add-additional-files":"Open Additional Files","text.all-files-tab-title":"All files","text.gravit-designer-tab-title":"Corel Vector files","text.team-drives-tab-title":"Team Drives files","text.selected-file-folder-not-added":"The selected file was added. You can find it easily from \\"Recent files\\" in \\"My Cloud.\\"","text.selected-files-folder-not-added":"The selected files were added. You can find them easily from \\"Recent files\\" in \\"My Cloud.\\"","text.selected-files-folder-not-added-additional":"Please note that you need to select the containing folder and its parents, so that it shows up here.","error.no-file-found":"Error occured. No file found","error.only-for-corporate":"Error. This feature is allowed only for corporate users","error.not-enough-parameters":"Error. Some parameters are not specified","error.google-api-error":"Error occured while processing request to Google Drive API. Please try again later or contact support from Help > Contact us."},"GAnnotations":{"text.page":"Page"},"GAnnotationPanel":{"text.document-approved-no-annotations-update":"The design was Approved and can\'t receive annotations update!","text.empty":"empty","text.unread-comment":"new","text.edit-comment":"Edit comment","text.reopen":"Reopen","text.resolve":"Resolve","text.edit":"Edit...","text.remove-annotation":"Remove annotation","text.remove-comment":"Remove comment","text.delete":"Delete","text.cancel":"Cancel","text.comment":"Reply","text.fill-contents":"Add comment","text.set-annotation-text":"Set annotation text","text.add-comment":"Add comment","text.write-annotation-here":"Type comment here","text.write-reply-here":"Type reply here","text.remove-empty-annotation":"Remove empty annotation","text.confirm-discard-annotation":"Please add some text or the comment can’t be saved. Do you want to discard?","text.marked-as-resolved":"Marked as resolved","text.re-opened":"Re-opened","text.confirm-remove":"Do you really want to remove this comment?","text.copy-permalink":"Copy Permalink","text.assign-resolve":"Done","text.assigned-to":"Assigned to&nbsp;","text.assign-to":"Assign to&nbsp;","text.additional-collaborators-all-reviewers-name":"All Reviewers","text.additional-collaborators-all-reviewers-show-text":"@reviewers","text.additional-collaborators-all-reviewers-role":"All Reviewers","text.additional-collaborators-all-approvers-name":"All Approvers","text.additional-collaborators-all-approvers-show-text":"@approvers","text.additional-collaborators-all-approvers-role":"All Approvers","text.additional-collaborators-all-content-editor-name":"All Co-editors","text.additional-collaborators-all-content-editor-show-text":"@coeditors","text.additional-collaborators-all-content-editor-role":"All Co-editors","text.additional-collaborators-all-co-author-name":"All Co-authors","text.additional-collaborators-all-co-author-show-text":"@coauthors","text.additional-collaborators-all-co-author-role":"All Co-authors","text.additional-collaborators-all-name":"All","text.additional-collaborators-all-show-text":"@all","text.additional-collaborators-all-role":"All","text.additional-collaborators-owner-name":"Owner","text.additional-collaborators-owner-show-text":"@owner","text.additional-collaborators-owner-role":"Owner"},"GAnnotationProperties":{"text.change-annotation-style":"Change annotation style","text.start-arrow":"Start arrow","text.end-arrow":"End arrow","text.tooltip-ellipse-tool":"Draw ellipses","text.tooltip-rectangle-tool":"Draw rectangles","text.tooltip-comment-tool":"Add notes","text.tooltip-pencil-tool":"Draw free-form lines and shapes","text.tooltip-highlighter-tool":"Highlight canvas areas","text.tooltip-arrow-tool":"Draw arrows and lines","text.tooltip-ellipse-fill":"Choose fill color","text.tooltip-ellipse-border":"Choose outline color","text.tooltip-ellipse-outline":"Set outline width","text.tooltip-ellipse-dropper-fill":"Pick fill color from canvas","text.tooltip-ellipse-dropper-border":"Pick outline color from canvas","text.tooltip-rectangle-fill":"Choose fill color","text.tooltip-rectangle-border":"Choose outline color","text.tooltip-rectangle-outline":"Set outline width","text.tooltip-rectangle-dropper-fill":"Pick fill color from canvas","text.tooltip-rectangle-dropper-border":"Pick outline color from canvas","text.tooltip-pencil-border":"Choose line color","text.tooltip-pencil-outline":"Set line width","text.tooltip-pencil-dropper-border":"Pick line color from canvas","text.tooltip-highlighter-border":"Choose highlight color","text.tooltip-highlighter-outline":"Set highlight width","text.tooltip-highlighter-dropper-border":"Pick highlight color from canvas","text.tooltip-arrow-border":"Choose line color","text.tooltip-arrow-outline":"Set line width","text.tooltip-arrow-dropper-border":"Pick line color from canvas","text.tooltip-comment-fill":"Choose note background color","text.tooltip-comment-dropper-fill":"Pick color from canvas"},"GAnnotationsSidebar":{"text.title":"Comments","text.show-updates":"Show updates","text.annotation-options":"Settings","text.show-resolved":"Show resolved","text.resolve-all-comments":"Resolve all comments","text.resolve-all":"Resolve all","text.notification":"Notification","text.notification-all-annotation":"All annotations","text.notification-assign-to-me":"Only assigned to me","text.notification-none":"None","text.save-file-tip":"This option is disabled until the file is saved to the Cloud.","text.hover-notification":"You can change the interval of notifications in the <span> Settings </span>"},"GTextAnnotation":{"text.new-annotation":"New annotation"},"GEditorOptions":{"text.anonymous-user":"Anonymous"},"GUseCouponAction":{"title":"Use Coupon","text.hava-coupon":"Have a coupon for Corel Vector? Enter it below.","text.invalid-coupon":"Invalid value, please inform a valid coupon!"},"GNotificationPanel":{"text.title-welcome":"Create a trial account","text.create-account":"Please %signup or %signin to try out the full functionality and save or export designs.","text.create-account-template":"Please %signup or %signin to try out the full functionality and save or export this template.","text.sign-up":"create a free account","text.sign-in":"log in","text.footer":"Learn more about %app."},"GDesigner":{"text.design-by":"Design by %name - %appname","text.preview-by":"Preview %name design in %appname online vector graphic design app. Preview the design and create a free account today!"},"GContainer":{"text.load-failed":"This design can’t be found or isn’t enabled for sharing.","text.request-permission":"Request permission to access.","text.not-memary-enough":"Not enough memory for saving, please free some memory before trying to save.","text.load-failed-from-link":"This file can\'t be opened by link, please open it directly from the Cloud.","text.load-failed-from-recent":"This file can\'t be opened from Recent files, please open it directly from the Cloud."},"GShareManager":{"text.auto-save-notification":"Comments/annotations were saved successfully to this CDR/DES file. It can now be opened with the latest changes in CorelDRAW. Please note that you need to save the file manually to include all changes to the design elements.","text.sent-request-email":"A request email has been sent.","text.cannot-request-access":"Cannot request access. Make sure the document exists and is shared with you.","text.file-can-not-be-accessed-title":"This file can\'t be accessed.","text.file-can-not-be-accessed-info":"The file either can\'t be found or it\'s not shared with you.","text.file-can-not-be-commented-title":"Your role is %role.","text.file-can-not-be-commented-info":"You don’t have permission to see comments on this design.","text.file-request-permission-to-comment":"Request Permission to Comment","text.file-request-access":"Request Access","text.template-shared-by":"This template was shared by %name.","text.shared-by":"This design was shared by %name.","text.save-warning":"The owner does not allow to save or download this file.","text.inspect-warning":"The owner only allows to view this file.","text.combined-warnings":"The owner does not allow to save or download this file and only allows to view it.","text.cant-comment":"You can view the design, but you can\'t add comments to the file.","text.new-role-is-viewer":"Your new role is Viewer. Now you can only preview this design.","text.new-role-is-reviewer":"Your new role is Reviewer. Now you can preview, comment and annotate this design.","text.new-role-is-approver":"Your new role is Approver. Now you can preview, comment and annotate this design, as well as approve the final revision.","text.new-role-is-content_editor":"Your new role is Content Editor. Now you can edit marked text objects in this design, as well as comment and annotate.","text.new-role-is-co_author":"Your new role is Co-Author. You can add and edit objects in this design, as well as comment and annotate. All changes will be saved in real-time.","text.new-role-is-developer":"Your new role is Developer. Now you can view, inspect, export assets or save a copy of this design."},"GShareDialog":{"text.participants-will-be-invited":"The participant(s) will be invited via email after you close the Share dialog.","text.you-can-not-invite-yourself":"You can’t share this file with yourself.","text.empty-email":"Email is not valid, please check if it\'s a correct address.","text.you-can-not-invite-user-from-another-domain":"Sharing design files with external users (outside the registered corporate domain) requires the file to be stored on Cloud. Save the file to the Cloud first to share with external users.","text.invalid-email":"%email is not valid, please check if it\'s a correct address.","text.resend-invitation-email":"Resend invitation email","text.resent-invitation-email":"The invitation was resent to %email.","text.sent-invitation-email":"An invitation was sent to %emails.","text.projects-left":"%number projects left in trial","text.role-required":"A role is required!","text.email-required":"An email is required!","text.public-share-link":"Everybody with the link:","text.private-share-placeholder":"Add email here to invite a participant ...","text.private-sharing":"Private Sharing","text.private-sharing-add":"Add","text.copied":"Copied","text.title":"Share File","text.subtitle-on":"Copy and share this link with your peers and stakeholders.","text.subtitle-off":"Turn on sharing to see the available options.","text.switch-on":"Sharing is On","text.switch-off":"Sharing is Off","text.allow-to-save-label":"Allow to Save","text.allow-to-save-info":"Everyone with the link will be able to download or save the file to his own account.","text.allow-to-inspect-label":"Allow to Inspect","text.allow-to-inspect-info":"Everyone with the link will be able to inspect the full layer structure of this file.","text.allow-to-comment-label":" ","text.allow-to-comment-info":" ","text.failed-copying-to-clipboard":"Failed copying to clipboard","text.copy":"Copy","text.options-description":"Allow everyone who has the link to:","text.private-share-no-options-left":"All users with email %email are already in the Private Sharing list.","text.error-change-role-failed":"External API didn\'t allow to change role","text.native-link-share-title":"","text.native-link-share-description":"","text.error-unsupported-native-link-share":"","text.error-unhandled-native-link-share":""},"GCDGSAssetShareDialog":{"text.participants-will-have-access-cdgs":"The participant(s) will have access to the assets in CorelDRAW."},"GShareAction":{"title":"Share File"},"GOpenSharedFileAction":{"title":"Open Shared File...","text.prompt-text":"Paste the shared design URL here: ","text.cancel":"Cancel","text.open":"Open","invalid-link":"Invalid link, please be sure to enter a valid share URL!"},"GCloudSynchronizationAction":{"text.syncing":"Syncing...","text.sync-to-cloud":"Sync File to Corel Vector...","text.unsync-from-cloud":"Unsync from Corel Vector...","text.last-synced-at":"Last synced at: %date"},"GPaymentDialog":{"text.default-title":"Corel Vector","text.dialog-dont-leave":"Wait Don’t Leave, Your Order has not Been Placed. <br>We cannot process your order until you fill in Your Info and Payment Info. <br>Once your Order is placed this window will close and you will be on your way to using Corel Vector.","text.cancel":"Cancel","text.finish-my-order":"Finish My Order","text.something-went-wrong":"Something is wrong","text.payment-not-confirmed":"We couldn\'t confirm your payment. <br>Please get in touch with our support via email: <a href=\'%link\'>%link</a>","text.canceled":"Canceled"},"GSystemDialog":{"text.cdr-warning-title":"Editing a CorelDRAW (CDR, DES) design","text.cdr-warning-label":"Important Note","text.cdr-warning-message":"CorelDRAW (CDR, DES) files are currently supported for annotating and adding content in CorelDRAW.app. All CorelDRAW drawing content will be displayed as a locked underlay. Any objects you create in CorelDRAW.app will be added to a new layer. When saving as CDR file the new layer(s) and its contents will be added to the CorelDRAW file while the original content will remain unchanged.","text.do-not-show-again":"Don\'t show this again","text.supported-touch-title":"It seems you are using a touch-enabled device. Do you want to switch to the touch-optimized interface?","text.supported-touch-footer":"You can switch to the touch interface at any time with “Touch interface” in the “View” menu.","text.unsupported-browser":"%app is optimized for the latest versions of Chrome, Firefox, Safari, and (new) Edge. Please try a supported web browser for an optimal experience.","text.unsupported-browser-touch":"%app is optimized for the latest versions of Safari on iOS and Chrome on Android. Please try a supported web browser for an optimal experience.","text.unsupported-screen-size":"Please note that %app may not work optimally on your device. For an optimal experience, it should be a device with a screen width of at least 1024 pixels width, 2 GB RAM and a CPU with 2.2 Ghz.","text.cdr-unsupported-objects-warning-title":"Save as CorelDRAW (CDR, DES) file","text.cdr-unsupported-objects-warning-label":"Unsupported objects","text.cdr-unsupported-objects-warning-message":"Your design contains objects that cannot be saved to CorelDRAW (CDR, DES) file format.","text.cdr-unsupported-objects-warning-option-0":"Keep appearance","text.cdr-unsupported-objects-warning-option-1":"Keep editable","text.cdr-unsupported-objects-warning-option-2":"Save as CDRAPP and keep objects editable","text.cdr-unsupported-objects-warning-option-3":"Omit incompatible objects","text.cdr-unsupported-objects-warning-option-0-tooltip":"Incompatible objects display accurately but won\'t be editable. Text will be converted to paths.","text.cdr-unsupported-objects-warning-option-1-tooltip":"Incompatible objects display accurately but won\'t be editable. Text appearance can change but will retain editing capabilities.","text.cdr-unsupported-objects-warning-option-3-tooltip":"Warning: Incompatible objects will not be saved and not available when opening the file again.","text.cdr-unsupported-objects-warning-details-label":"Details about affected pages/ layers","text.cdr-unsupported-object-warning-message":"%name is incompatible with the CorelDRAW (CDR, DES) format.You will be prompted to decide what to do with incompatible objects when saving the file as CorelDRAW (CDR, DES) file.","text.cdr-unsupported-object-warning-effect-name":"\\"%name\\" Effect","text.cdr-unsupported-object-warning-generic-name":"The object you\'re creating","text.unsupported-mobile-for-msteams":"CorelDRAW.app can not be run within the mobile application of Teams.","text.unsupported-mobile-for-msteams-new":"CorelDRAW.app is not optimized to run on mobile devices. It needs a screen resolution of at least 1024x768px.","text.unsupported-screen-size-msteams":"Please note that CorelDRAW.app may not work optimally on your device. For an optimal experience, it should have a screen resolution of at least 1024x768px.","text.unsupported-windows-size-msteams":"Please click on the \'Expand tab\' button on the top-right corner for the best experience."},"GCDRIntegrationEngine":{"text.cdr-unsupported-fonts":"This design may contain unsupported fonts (including styles and features).","text.cdr-unsupported-infinite-canvas":"Infinite Canvas","text.cdr-unsupported-blending-mode":"Blending mode","text.cdr-unsupported-blending-mode-layer":"Blending mode Fill/Border","text.cdr-unsupported-cmyk":"CMYK Color","text.cdr-unsupported-multiple-fills":"Multiple Object Fills","text.cdr-unsupported-multiple-borders":"Multiple Stroke Fills","text.cdr-unsupported-nonsolid-fills":"Non-Solid-Color Object Fill","text.cdr-unsupported-nonsolid-borders":"Non-Solid-Color Stroke Fill","text.cdr-background":"Background","text.cdr-unable-to-save-permission":"Unable to save file. Do you have permissions?","text.image-too-big":"The image you are trying to import is too large. Please resize and try again.","text.file-dimensions-too-big":"The dimensions of the pages contained in this CorelDRAW design are too big. Please decrease their size or the design’s dpi and try again.","text.blending-modes-currently-not-supported":"Blending modes are currently not supported when saving to CorelDRAW."},"GLocale":{"create":"Create","add":"Add","edit":"Edit","remove":"Remove","delete":"Delete","open":"Open","save":"Save","cancel":"Cancel","ok":"OK","yes":"Yes","no":"No","close":"Close","loading":"Loading","loading_of":"Loading of","saving":"Saving","saving_of":"Saving of","success":"Success","failure":"Failure","waiting":"Waiting","syncing":"Syncing"},"GFont":{"weight.thin":"Thin","weight.extra-light":"Extra-Light","weight.light":"Light","weight.regular":"Regular","weight.medium":"Medium","weight.semi-bold":"Semi-Bold","weight.bold":"Bold","weight.extra-bold":"Extra-Bold","weight.heavy":"Heavy","weight.thin-italic":"Thin Italic","weight.extra-light-italic":"Extra-Light Italic","weight.light-italic":"Light Italic","weight.regular-italic":"Regular Italic","weight.medium-italic":"Medium Italic","weight.semi-bold-italic":"Semi-Bold Italic","weight.bold-italic":"Bold Italic","weight.extra-bold-italic":"Extra-Bold Italic","weight.heavy-italic":"Heavy Italic"},"GImage":{"name":"Image","name.unsplash":"Unsplash Photo"},"GEllipse":{"name":"Ellipse","type.arc":"Open","type.chord":"Closed","type.pie":"Pie"},"GRectangle":{"name":"Rectangle"},"GCompoundShape":{"name":"Compound Shape"},"GLayer":{"name":"Layer"},"GGroup":{"name":"Group"},"GScene":{"name":"Scene","page":"Page"},"GPage":{"name":"Page"},"GSymbol":{"name":"Symbol"},"GPolygon":{"name":"Polygon"},"GPath":{"name":"Path"},"GCompoundPath":{"name":"Compound Path"},"GPathsGraph":{"name":"Graphic Network"},"GText":{"name":"Text"},"GCollabText":{"name":"Collaborative Text"},"GScenePaintConfiguration":{"paint.full":"Full","paint.fast":"Fast","paint.outline":"Outline","paint.output":"Output"},"GSlice":{"name":"Slice"},"GBlurEffect":{"name":"Blur"},"GShape":{"name":"Shape"},"GConnector":{"name":"Connector"},"GGLBlurEffect":{"name":"Blur"},"GGLBrightnessContrastEffect":{"name":"Brighness/contrast"},"GGLBulgePinchEffect":{"name":"Bulge"},"GGLColorHalfToneEffect":{"name":"Halftone"},"GGLDenoiseEffect":{"name":"Denoise"},"GGLDotScreenEffect":{"name":"Dot screen"},"GGLEdgeWorkEffect":{"name":"Edge work"},"GGLHexagonalEffect":{"name":"Hexagonal"},"GGLHueSaturationEffect":{"name":"Hue saturation"},"GGLInkEffect":{"name":"Ink"},"GGLLensBlurEffect":{"name":"Lens blur"},"GGLNoiseEffect":{"name":"Noise"},"GGLSepiaEffect":{"name":"Sepia"},"GGLSwirlEffect":{"name":"Swirl"},"GGLToonEffect":{"name":"Toon"},"GGLBloomEffect":{"name":"Bloom"},"GGLInnerGlowEffect":{"name":"Inner Glow"},"GGLOuterGlowEffect":{"name":"Outer Glow"},"GGLStrokeLayerEffect":{"name":"Stroke","text.outside":"Outside","text.inside":"Inside","text.center":"Center"},"GGLSketchEffect":{"name":"Sketch"},"GGLTiltShiftEffect":{"name":"Tilt shift"},"GGLTrueBlurEffect":{"name":"True blur (slow)"},"GGLUnsharpMaskEffect":{"name":"Unsharp mask"},"GGLVibranceEffect":{"name":"Vibrance"},"GGLVignetteEffect":{"name":"Vignette"},"GGLZoomBlurEffect":{"name":"Zoom blur"},"GGLRecolourEffect":{"name":"Recolor"},"GAdjustMultiEffect":{"name":"Adjust"},"GColorAdjustMultiEffect":{"name":"Color Adjust"},"GGLColorAdjustEffect":{"name":"Color Adjust"},"GColorGradingEffect":{"name":"Color Grading"},"GColorMatrixEffect":{"name":"Color Matrix"},"GColorTransformEffect":{"name":"Color Transform"},"GDropShadowEffect":{"name":"Drop Shadow"},"GContactShadowEffect":{"name":"Contact Shadow"},"GLongShadowEffect":{"name":"Long Shadow"},"GCurvedShadowEffect":{"name":"Curved Shadow"},"GGLBendEffect":{"name":"Bend"},"GGLDrunkEffect":{"name":"Alcohol"},"GGLFisheyeEffect":{"name":"Fisheye"},"GMirrorEffect":{"name":"Mirror"},"GInnerShadowEffect":{"name":"Inner Shadow"},"GOverlayEffect":{"name":"Overlay"},"GLength":{"unit.px":"Pixels","unit.mm":"Millimeters","unit.cm":"Centimeters","unit.in":"Inches","unit.pc":"Picas","unit.pt":"Points","unit.px.short":"px","unit.mm.short":"mm","unit.cm.short":"cm","unit.in.short":"in","unit.pc.short":"pc","unit.pt.short":"pt","unit.cc":"Ciceros","unit.dd":"Didots","unit.ft":"Feet","unit.yd":"Yards","unit.mi":"Miles","unit.km":"Kilometers","unit.m":"Meters","unit.H":"H","unit.Q":"Q","unit.cc.short":"cc","unit.dd.short":"dd","unit.ft.short":"ft","unit.yd.short":"yd","unit.mi.short":"mi","unit.km.short":"km","unit.m.short":"m","unit.H.short":"H","unit.Q.short":"Q"},"GStylable":{"layer.element":"Element","layer.fill":"Fill","layer.border":"Border","border-alignment.inside":"Inside","border-alignment.center":"Center","border-alignment.outside":"Outside","border-marker.circle":"Circle","border-marker.bullet":"Bullet","border-marker.diamond":"Diamond","border-marker.line":"Line","border-marker.linedouble":"Double Line","border-marker.arrow":"Arrow","border-marker.arrowfat":"Fat Arrow","border-marker.arrowline":"Line Arrow","border-marker.arrowdoubleline":"Double Line Arrow","border-marker.arrowlinebar":"Arrow Line Bar","border-marker.arrowpointer":"Arrow Pointer"},"GPaintCanvas":{"blend.normal":"Normal","blend.multiply":"Multiply","blend.screen":"Screen","blend.overlay":"Overlay","blend.darken":"Darken","blend.lighten":"Lighten","blend.colordodge":"Color Dodge","blend.colorburn":"Color Burn","blend.hardlight":"Hard Light","blend.softlight":"Soft Light","blend.difference":"Difference","blend.exclusion":"Exclusion","blend.hue":"Hue","blend.saturation":"Saturation","blend.color":"Color","blend.luminosity":"Luminosity","blend.linearburn":"Linear Burn","blend.lineardodge":"Linear Dodge","blend.linearlight":"Linear Light","blend.vividlight":"Vivid Light","blend.pinlight":"Pin Light","blend.divide":"Divide","blend.add":"Add","blend.subtract":"Subtract","blend.hardmix":"Hard Mix","blend.power":"Power","blend.harmonic":"Harmonic","blend.sin":"Sine","linecap.butt":"Butt","linecap.round":"Round","linecap.square":"Square","linejoin.bevel":"Bevel","linejoin.round":"Round","linejoin.miter":"Miter"},"GPathBase":{"corner.rounded":"Round","corner.inverse-rounded":"Round2","corner.bevel":"Bevel","corner.inset":"Inset","corner.fancy":"Fancy","anchor-point.mirror":"Mirrored","anchor-point.asymmetric":"Disconnected","anchor-point.symmetric":"Asymmetric","anchor-point.connector":"Connector"},"GSketchImport":{"text.unsupported-version":"Unsupported Version. Must be 43 or latest"},"GEPSParser":{"01":"Parts of the EPS file aren’t supported by Corel Vector. They are displayed with blue fills...","02":"Parts of the EPS file aren’t supported by Corel Vector. They are not imported...","03":"The file can\'t be loaded in a timely manner. Stopping...","04":"The file can\'t be loaded.","05":"File loading is canceled."},"GWebGLEffect":{"radius":"Radius","softness":"Softness","bend":"Bend","cov":"Cov","bloomIntensity":"Bloom Int.","baseIntensity":"Base Int.","bloomSaturation":"Bloom Sat.","baseSaturation":"Base Sat.","blurRadius":"Blur Rad.","bloomThreshold":"Bloom Thre.","clip":"Clip","brightness":"Brightness","contrast":"Contrast","centerX":"Center X","centerY":"Center Y","strength":"Strength","angle":"Angle","size":"Size","red":"Red","green":"Green","blue":"Blue","exponent":"Exponent","strengthX":"Strength X","strengthY":"Strength Y","scale":"Scale","hue":"Hue","saturation":"Saturation","intensity":"Intensity","color":"Color","opacity":"Opacity","amount":"Amount","width":"Width","shape":"Shape","ellyptical":"Ellyptical","placement":"Placement","startX":"Start X","startY":"Start Y","endX":"End X","endY":"End Y","gradientRadius":"Gradient Rad.","threshold":"Threshold","quantization":"Quantization"},"GSceneEditor":{"action.insert":"Insert","action.remove":"Remove","action.properties":"Change Properties"},"GPointerTool":{"name":"Pointer","tooltip-title":"Pointer tool","tooltip-description":"Click and drag to create a selection. Click an object to select it. Hold SHIFT to add/remove from selection. Hold ALT to select only objects fully enclosed in marqee"},"GSubSelectTool":{"name":"Subselect","tooltip-title":"Subselect tool","tooltip-description":"Click to select, edit, add and delete anchor points on a path. Click an object to select it."},"GLassoTool":{"name":"Lasso","tooltip-title":"Lasso tool","tooltip-description":"Click and drag to draw an area selecting many anchor points at once."},"GLayerTool":{"name":"Layer","tooltip-title":"Layer tool","tooltip-description":"Click to select objects within a Layer Group."},"GSliceTool":{"name":"Slice","tooltip-title":"Slice tool","tooltip-description":"Click and drag to define a specific area of your artwork to be exported as an asset."},"GPenTool":{"name":"Pen","tooltip-title":"Pen tool","tooltip-description":"Click and drag to create a starting point. Hold SHIFT to constrain it in 45°. Hold D to use Subselect tool."},"GBezigonTool":{"name":"Bezigon","tooltip-title":"Bezigon tool","tooltip-description":"Click and drag to create a starting point. Hold ALT to create a perfect curve. Hold SHIFT to constrain it in 45°."},"GFreehandTool":{"name":"Freehand","action.create-freehand-path":"Create freehand path","tooltip-title":"Freehand tool","tooltip-description":"Click and drag to start drawing. Hold D to use Subselect tool."},"GMagicTool":{"name":"Freehand shaping","tooltip-title":"Freehand shaping","tooltip-description":"Click and drag to add or subtract from an object."},"GKnifeTool":{"name":"Knife","action.cut-shape":"Cut shape(s)","tooltip-title":"Knife tool","tooltip-description":"Click a vector object to slice it."},"GLineTool":{"name":"Line","tooltip-title":"Create line","tooltip-description":"Click, drag and release to create a straight line. Hold ALT to create from center point. Hold SHIFT to constrain it in 45°."},"GRectangleTool":{"name":"Rectangle","tooltip-title":"Create rectangle","tooltip-description":"Click and drag to create a rectangle. Hold ALT to create from center point. Hold SHIFT to constrain proportions."},"GEllipseTool":{"name":"Ellipse","tooltip-title":"Create ellipse","tooltip-description":"Click and drag to create an ellipse. Hold ALT to create from center point. Hold SHIFT to constrain proportions."},"GPolygonTool":{"name":"Polygon","tooltip-title":"Create polygon","tooltip-description":"Click and drag to create a polygon. Hold ALT to create from center point. Hold SHIFT to constrain proportions."},"GTriangleTool":{"name":"Triangle","tooltip-title":"Create triangle","tooltip-description":"Click and drag to create a triangle. Hold ALT to create from center point. Hold SHIFT to constrain proportions."},"GStarTool":{"name":"Star","tooltip-title":"Create star","tooltip-description":"Click and drag to create a star. Hold ALT to create from center point. Hold SHIFT to constrain proportions."},"GTextTool":{"name":"Text","your-text-here":"Your text here","action.insert-text":"Insert text","tooltip-title":"Text tool","tooltip-description":"Click to create text. "},"GHandTool":{"name":"Pan","tooltip-title":"Pan tool","tooltip-description":"Click and drag to pan view."},"GZoomTool":{"name":"Zoom","tooltip-title":"Zoom tool","tooltip-description":"Click to zoom in about a point. Hold ALT and click to zoom out. Click and drag to create a zoom in area."},"GEditor":{"action.delete-selection":"Delete Selection","action.resize-selecion":"Resize Selection","action.transform-clone-selection":"Transform & Clone Selection","action.transform-selection":"Transform Selection","action.insert-elements":"Insert Element(s)","action.change-elements":"Change Elements","action.insert-image":"Insert Image(s)","action.convert-to-paths":"Convert to Path(s)","action.arrange-order":"Arrange Order","action.arrange-alignment":"Arrange Alignment","action.inline-editing":"Inline Editing","action.move":"Move","action.drag-style":"Drag Style"},"GGradientStyleEditor":{"text.gradient":"Gradient","action.add-gradient-stop":"Add Gradient Stop"},"GPathsGraphTool":{"action.append-point":"Append Point","action.insert-elements":"Insert Element(s)","action.insert-point":"Insert Point","action.move-point":"Move Point","action.delete-point":"Delete Point","action.modify-point-properties":"Modify Point Properties","action.modify-path-properties":"Modify Path Properties"},"GPathTool":{"action.append-point":"Append Point","action.insert-elements":"Insert Element(s)","action.insert-point":"Insert Point","action.move-point":"Move Point","action.delete-point":"Delete Point","action.modify-point-properties":"Modify Point Properties","action.modify-path-properties":"Modify Path Properties","action.join-paths":"Join Paths"},"GShapeTool":{"action.insert-elements":"Insert Element(s)"},"GSelectTool":{"action.insert-path-point":"Insert Path Point","action.transform-clone-selection":"Transform & Clone Selection","action.transform-selection":"Transform Selection","action.modify-element":"Modify %element","text.element":"Element"},"GCompoundShapeEditor":{"action.drop-pattern":"Drop Pattern"},"GImageEditor":{"action.crop-image":"Crop Image"},"GInlineTextEditor":{"action.modify-text-properties":"Modify text properties"},"GShapeEditor":{"action.drop-pattern":"Drop Pattern"},"GTextEditor":{"action.drop-font":"Drop Font","action.modify-text-properties":"Modify text properties","action.edit-text":"Edit text"},"GPageEditor":{"action.resize-pages":"Resize pages"},"GFillTool":{"action.modify-fill":"Modify Fill"},"GEditorWidget":{"action.remove-guide-line":"Remove guide line","action.change-guide-line":"Change guide line","action.add-guide-line":"Add guide line","action.insert-master-symbol":"Insert master symbol"},"GKey":{"key.1":"Space","key.2":"Enter","key.3":"Tab","key.4":"Backspace","key.5":"Control","key.5.short":"Ctrl","key.6":"Shift","key.7":"Alt","key.8":"Left","key.9":"Up","key.10":"Right","key.11":"Down","key.12":"Page Up","key.13":"Page Down","key.14":"Home","key.15":"End","key.16":"Insert","key.16.short":"Ins","key.17":"Delete","key.17.short":"Del","key.18":"Escape","key.18.short":"Esc","key.19":"Command","key.19.short":"Cmd","key.30":"F1","key.31":"F2","key.32":"F3","key.33":"F4","key.34":"F5","key.35":"F6","key.36":"F7","key.37":"F8","key.38":"F9","key.39":"F10","key.40":"F11","key.41":"F12"},"GPDFExport":{"text.wait":"Please wait! This might take a little while..."},"GInfo":{"text.title":"You haven\'t activated your account yet. Please do so until %date, or it will be deactivated.","text.resend-email":"Resend email here","text.email-sent":"Email sent.","text.email-sent-submessage":"Please be sure to also check the spam/junk folder of your email client.","text.something-went-wrong":"Something is wrong.","text.save-message":"Please save your file regularly, progress will be lost when you leave this tab.","text.check-in-message":"Please don’t forget to \\"Check In\\" the file, to allow collaborators to see your changes."},"GVersionHistoryProperties":{"error-loading":"Error while loading versions. Please try again in a few minutes.","title":"Version History","edit-version":"Edit this version","close-preview":"Close preview","preview":"Preview","restore":"Restore","text.current-version":"Current version","text.version":"Version %version","text.title-manual-save-tooltip-title":"These versions were saved manually","text.title-auto-save-tooltip-title":"These versions were created via auto-save","text.title-manual-save":"Manual Saves","text.title-auto-save":"Auto-Saves"},"GDeveloperDetailsAction":{"title":"Send Developer Details","message":"Please send the provided text file to our support team at <a href=\\"%link\\" title=\\"Support\\" target=\\"_blank\\">%link.</a>"},"GWarnLinkedImageDialog":{"warn-linked-image.text":"Linked images will not be available when opening your file on another computer or in the web app.","warn-linked-image.proceed":"Proceed","warn-linked-image.cancel":"Cancel","warn-linked-image.never-remind":"Don\'t show anymore"},"GEmbeddedLogin":{"text.title":"Welcome to Corel Vector","text.pop-has-been-blocked":"The pop-up has been blocked. To log in using your %provider credentials, please allow all %app pop-ups and reload this page, or click <a>here</a>."},"GLoginDialog":{"text.sign-in-title":"Please log in to your Corel Vector account to continue.","text.not-register":"Don\'t have an account yet?","text.sign-up":"Create your FREE account.","text.placeholder-sign-in-login":"Email","text.sign-in-login":"Username / Email address","text.placeholder-sign-in-password":"Password (min 6 chars.)","text.sign-in":"Log in","text.or":"- or -","text.sign-facebook":"Log In With Facebook","text.sign-google":"Log In With Google","text.signup-facebook":"Create Account With Facebook","text.signup-google":"Create Account With Google","text.forgot-password":"Forgot your password?","text.sign-up-title":"Create your FREE account then start designing.","text.already-registered":"Already have an account?","text.back-sign-in":"Go back to log in","text.placeholder-sign-up-email":"Your email","text.placeholder-sign-up-username":"Your username","text.placeholder-sign-up-password":"Choose a password (min 6 chars.)","text.agree":"I agree to the","text.terms-use":"Terms of Use","text.privacy-policy":"Privacy Policy","text.newsletter":"Subscribe me to the Corel Vector Newsletter","text.sign-up-now":"Start Now!","text.reset-password-title":"We will send a link to this email address to reset your password.","text.reset-password-header-title":"Reset password","text.reset-password-send":"Send Request","text.placeholder-reset-password-email":"Email","text.sign-up-thanks":"The account was created successfully. Please, check your email.<br><br>We have sent a confirmation to %email. Please click on the link in this email to activate your account.<br><br>If you don\'t activate your account in 3 days it will be automatically deactivated.","text.ok":"OK","text.login-dialog-title":"Start using Corel Vector","text.continue-without-loggin-in":"Continue without logging in","text.login-here":"Log in here.","text.placeholder-sign-up-first-name":"First Name","text.placeholder-sign-up-last-name":"Last Name","text.you-are-offline":"You are offline. Please reestablish your connection to proceed.","text.sign-in-button":"SIGN IN","text.sign-in-password":"Password","text.enterprise-sign-in-message":"CorelDRAW.app Enterprise users, sign in with your<br/> Microsoft 365 or Google Workspace account.<div class=\'highlight-top\'>*</div>","text.enterprise-login-message-1":"<div class=\'highlight\'>*</div> Note: CorelDRAW.app Enterprise sign-in is available exclusively to companies signed-up for a CorelDRAW.app Enterprise License.","text.enterprise-login-message-2":"If you are unsure whether or not you\'re eligible, consult your employer\'s IT administrator","text.enterprise-sign-microsoft":"Sign in with Microsoft 365","text.enterprise-sign-google":"Sign in with Google Workspace"},"GConfirmationDialog":{"text.confirm-info-save":"A confirmation with a summary of the order has been sent to %email. Your design will be saved now.","text.confirm-info-export":"A confirmation with a summary of the order has been sent to %email. Your design will be exported now.","text.confirm-save":"Save design","text.confirm-export":"Export design","text.confirm-resend":"Resend it here"},"GPaywallDialog":{"text.paywall-info":"You can continue to edit this design for free. If you want to save or export it, you need to pay","text.paywall-buy":"Buy now for","text.paywall-edit":"Edit for free","text.paywall-bought":"You already bought this product"},"GPurchasePanel":{"text.purchased-expires":"expires on %date","text.subscription-ends":"valid until %date","text.pro-subscription-lifetime":"%app Lifetime Subscription","text.pro-subscription":"%app Subscription","text.orderby-label":"Order By:","text.orderby-number":"Order number","text.orderby-name":"Name","text.orderby-price":"Price","text.orderby-date":"Date","text.orderno":"Order nº","text.purchased":"Purchased on","text.search-label":"Search Product","text.purchased-renews":"renews on","text.change-subscription":"Change subscription","text.placeholder-password":"Use %min-number to %max-number characters","text.placeholder-address":"Street name and number","text.empty-search":"Your search term didn’t match any product, please try again.","text.prompt-cancel-title":"Do you really want to cancel this subscription?","text.prompt-cancel-info":"When canceling your %app subscription you can use features until %date.<br/>After that, you need to purchase again.","text.prompt-activate-title":"Do you really want to activate this subscription?","text.prompt-activate-info":"Activating your subscription the next billing will be on %date","text.prompt-activate-label":"Activate","text.contact-partner-billing":"Please %partner% if you want to change your billing details or you have questions about your order.","text.contact-partner-cb":"contact our partner Cleverbridge","text.contact-partner-billing-alternative":"Please contact our partner %partner% if you want to change your billing details or you have questions about your order.","text.contact-partner-cleverbridge":"Cleverbridge"},"GProfileDialog":{"text.purchases":"Purchases","text.details":"Account details","text.change-password":"Change password","text.avatar-tooltip":"PNG or JPG, 100 kB. max.","text.avatar-size-too-big":"Please keep image under 100 kB"},"GChangePasswordPanel":{"text.change-password":"Choose your new password for %name","text.set-password":"Choose the password for %name","text.assign":"Assign New Password","text.new-password":"New password","text.confirm-password":"Confirm new password","text.placeholder-new-password":"New password","text.placeholder-confirm-password":"Confirm new password","text.reset-password-info":"Please choose a new password","text.set-password-info":"Please set a password for your account","text.reset-password-done":"Your password has been changed successfully.","text.new-password-tip":"Use %min-number to %max-number characters"},"GAccountPanel":{"text.user-email-message":"Changing your email address requires to activate your account again. It will be done after you have clicked on the link in the confirmation we have sent to %email.","text.contact":"Contact details","text.account-name":"Name","text.username":"Username","text.email":"Email","text.old-password":"Old Password","text.new-password":"New Password","text.billing":"Billing Address","text.address":"Address","text.city":"City","text.state":"State/Province/Region","text.zip":"ZIP","text.country":"Country","text.save":"Save","text.delete":"Delete Account","text.error":"Ooops! Something went wrong.","text.please-wait":"Please, wait...","text.success":"Details changed successfully","text.confirm-delete-account":"Do you really want to delete your Corel Vector account?","text.reset-password-info":"Please choose a new password","text.reset-password-done":"Your password has been changed successfully.","text.contact-partner-cb":"contact our partner Cleverbridge","text.contact-partner-billing":"Please %partner% if you want to change your billing details.","text.contact-partner-billing-alternative":"Please contact our partner %partner% if you want to change your billing details.","text.contact-partner-cleverbridge":"Cleverbridge","text.all-files-cloud":"all files in the Cloud","text.all-dicussion-comments":"all Corel Vector Discussion comments","text.purchased-items-and-sub":"all purchased items and subscriptions","text.action-cant-undone":"This action can\'t be undone!","text.first-name":"First name","text.last-name":"Last name","text.email-address":"Email address","text.delete-account-title":"Do you really want to delete your Corel Vector account?","text.delete-account-sub-title":"You will lose","text.delete-account-list-1":"all files in the Cloud","text.delete-account-list-2":"all Corel Vector Discussion comments","text.delete-account-list-3":"all purchased items and subscriptions","text.delete-account-action-cant-undone":"This action can\'t be undone!","text.name-usage-tips":"Your name will be used if you are adding a comment or annotation, your email address when receiving notifications.","text.update-name-link-text":"Update the user name in my Corel account.","text.view-your-account":"View your %partner% %icon%","text.account-view-link-text":"account settings on corel.com "},"GImportedFontsProvider":{"confirm.delete-font":"Are you sure you want to delete this font?"},"GLocalFontsProvider":{"text.permission-required-title":"Permission required to access system fonts!","text.permission-required-subtitle-edge":"To allow the app to access your system fonts, click on the padlock (🔒) icon in the address bar, next to the website name, then select the \'Allow\' option from the \'Fonts\' dropdown. Save your work & reload the website to begin using system fonts.","text.permission-required-subtitle-others":"To allow the app to access your system fonts, click on the padlock (🔒) icon in the address bar, next to the website name, then toggle the gray switch in the \'Fonts\' section. Save your work & reload the website to begin using system fonts.","text.current-browser-unsupported":"This browser does not support system fonts. This feature is available on Chrome, Edge & Opera."},"GAlignAction":{"title.align-left":"Align Left","title.align-center":"Align Center","title.align-right":"Align Right","title.align-top":"Align Top","title.align-middle":"Align Middle","title.align-bottom":"Align Bottom","title.align-justify-horizontal":"Same Width","title.align-justify-vertical":"Same Height","text.align-left-tooltip-title":"Align Left","text.align-left-tooltip-description":"Align all selected objects to the left side of the left-most object.","text.align-center-tooltip-title":"Align Center","text.align-center-tooltip-description":"Aligns all selected objects to the center of the selection bounding box.","text.align-right-tooltip-title":"Align Right","text.align-right-tooltip-description":"Align all selected objects to the right side of the right-most object.","text.align-top-tooltip-title":"Align Top","text.align-top-tooltip-description":"Align all selected objects to the top side of the top-most object.","text.align-middle-tooltip-title":"Align Middle","text.align-middle-tooltip-description":"Align all selected objects to the middle of the selection bounding box.","text.align-bottom-tooltip-title":"Align Bottom","text.align-bottom-tooltip-description":"Align selection to Bottom of a bounding box or page."},"GArrangeAction":{"title.send-front":"Bring to Front","title.bring-forward":"Bring Forward","title.send-backward":"Send Backward","title.send-back":"Send to Back","bring-forward-tooltip-title":"Bring element forward","bring-forward-tooltip-description":"Bring an element up in the layer hierarchy.","send-backward-tooltip-title":"Send element backward","send-backward-tooltip-description":"Send an element down in the layer hierarchy."},"GCancelCropAction":{"title":"Cancel Cropping"},"GClipAction":{"title":"Clip Selection","text.clip-selecion":"Clip Selection","tooltip-title":"Create a clip","tooltip-description":"Create a mask for an object. Click twice to edit the clipped object."},"GConnectLinesAction":{"title":"Connect Paths Lines"},"GConvertToPathAction":{"title":"Convert to Path","tooltip-title":"Convert to path","tooltip-description":"Convert the selected shape into a path."},"GConvertToRawPathAction":{"title":"Convert to Raw Path"},"GCreateNestedCompoundAction":{"title":"Create Nested Compound"},"GCreateSymbolAction":{"title":"Create Symbol","createsymbol.enternewname":"Enter new symbol name:","createsymbol.defaultname":"Symbol","common.nosymbolsdefined":"No symbols defined.","common.nosymbolsdefined-info":"Symbols let you reuse content in your design. Create a Symbol with the “+” icon from your selected element(s).","tooltip-title":"Create Symbol","tooltip-description":"Turn the element into a new Symbol."},"GCropAction":{"title":"Confirm Cropping"},"GDetachSymbolAction":{"title":"Detach Symbol Instance","text.number-detached":"Detach symbol %number"},"GResetInstanceAction":{"title":"Reset Instance"},"GCutCopyAction":{"title.cut":"Cut","title.copy":"Copy","text.cut-selection":"Cut Selection","text.security-issues":"<p>Due security permissions we can not access your system clipboard.<br/> Please use the following shortcut instead to %cutcopy:</p><p style=\'text-align: center;font-size:16px;margin-top: 20px\'>%shortcut</p>"},"GDeleteAction":{"title":"Delete"},"GDeselectAllAction":{"title":"Deselect All"},"GDistributeAction":{"title.horizontal":"Distribute Horizontally","title.vertical":"Distribute Vertically","text.horizontal-tooltip-title":"Distribute Horizontally ","text.horizontal-tooltip-description":"Distribute selected objects horizontally so that the distance between them is equal.","text.vertical-tooltip-title":"Distribute Vertically","text.vertical-tooltip-description":"Distribute selected objects vertically so that the distance between them is equal."},"GDuplicateAction":{"title":"Duplicate"},"GEditElementActon":{"title":"Edit Selection"},"GExportAction":{"title":"Advanced Export...","title.advanced-options":"Advanced Options...","text.save-before-export":"Do you want to save this file before exporting?","tooltip-title":"Export","tooltip-description":"Export your document or selection.","text.try-this-feature-pro-tooltip-title":"Advanced Export","text.try-this-feature-pro-tooltip-description":"Export your document or selection with advanced options.","text.try-export-pdf-advanced-setting-tooltip-title":"Advanced PDF Export","text.try-export-pdf-advanced-setting-tooltip-description":"Export your document or selection to a PDF with advanced options."},"GFitAllAction":{"title":"Fit All","tooltip-title":"Fit All","tooltip-description":"Click to fit all objects in the viewport to the screen."},"GFitCurrentLayerAction":{"title":"Fit Layer"},"GFitSelectionAction":{"title":"Fit Selection"},"GGroupAction":{"title":"Group Selection","tooltip-title":"Group items","tooltip-description":"Group selected elements."},"GInvertSelectionAction":{"title":"Invert Selection"},"GJoinPathsAction":{"title":"Join Paths"},"GMergeMainAction":{"title":"Create Compound"},"GMergeSubAction":{"title.union":"Union","title.difference":"Difference","title.intersect":"Intersect","title.subtract":"Subtract","tooltip.union.title":"Union","tooltip.union.description":"Merge the area of two elements.","tooltip.difference.title":"Difference","tooltip.difference.description":"Create a shape with the parts of the selected elements that don\'t overlap.","tooltip.intersect.title":"Intersect","tooltip.intersect.description":"Create a shape with the overlapping are of the selected elements.","tooltip.substract.title":"Subtract","tooltip.substract.description":"Subtract the are of the lower object.","transaction.merge":"Merge","transaction.combine":"Combine"},"GNewAction":{"title":"New Design..."},"GNewWindowAction":{"title":"New View"},"GNewClipboardAction":{"title":"New from Clipboard"},"GOffsetAction":{"title":"Expand/Shrink","text.dialog-prompt-message":"Enter a positive value for offset or negative for inset:","text.invalid-value":"Entered invalid number for offset value."},"GOriginalViewAction":{"title":"Original-View"},"GOutlineAction":{"title":"Convert to Outline","text.dialog-prompt-message":"Enter a positive value for the outline:","text.invalid-value":"Entered invalid number for outline value."},"GVectorizeBorderAction":{"title":"Vectorize Border","tooltip-title":"Vectorize Border","tooltip-description":"Convert a border into a shape."},"GVectorizeImageAction":{"title":"Vectorize Image"},"GConvertToImageAction":{"title":"Flatten"},"GAttachToPathAction":{"title":"Attach Text to Path"},"GDetachFromPathAction":{"title":"Detach Text from Path"},"GOutlineViewAction":{"title":"Outline View"},"GFastViewAction":{"title":"Fast View"},"GPaste":{"action.paste":"Paste","action.paste-image":"Paste Image"},"GPasteAction":{"title":"Paste","text.security-issues":"<p>Due security permissions we can not access your system clipboard.<br/>Please use the following shortcut instead to paste:</p><p style=\'text-align: center;font-size:16px;margin-top: 20px\'>%shortcut</p>"},"GPasteAndReplaceAction":{"title":"Paste and Replace"},"GEyeDropperAction":{"title.fill":"Choose a fill color","title.border":"Choose a border color"},"GEnterLayerGroupAction":{"title":"Enter layer group","title.reverse":"Leave layer group"},"GRenameLayerAction":{"title":"Rename a layer"},"GCycleThroughLayersAction":{"title.next":"Select next layer","title.previous":"Select previous layer","title":""},"GLockLayerAction":{"title":"Lock a layer"},"GToggleLayerVisibilityAction":{"title":"Hide a layer"},"GTogglePaintLayersVisibilityAction":{"title.fill":"Toggle fills","title.border":"Toggle borders"},"GChangeOpacityAction":{"title":"Change opacity","full-title":"Set opacity to %value"},"GCloseActiveWindowAction":{"title":"Close window"},"GChangeAnchorPointsJointTypeMainAction":{"title":"Change anchor point joint type"},"GChangeAnchorPointsJointTypeSubAction":{"title.straight":"Change anchor point joint type to Straight","title.mirrored":"Change anchor point joint type to Mirrored","title.disconnected":"Change anchor point joint type to Disconnected","title.connector":"Change anchor point joint type to Connector","title.asymmetric":"Change anchor point joint type to Asymmetric"},"GToggleMultiPageModeAction":{"title":"Toggle multipage mode"},"GChangeActivePageAction":{"title.next":"Select next page","title.previous":"Select previous page"},"GChangeActiveWindowAction":{"title.next":"Select next tab","title.previous":"Select previous tab"},"GSwapPaintLayersAction":{"title":"Swap fill and border"},"GCreateNewLayerAction":{"title":"Create new layer"},"GShowShortcutsAction":{"title":"Show Keyboard Shortcuts"},"GPasteInPlaceAction":{"title":"Paste In Place"},"GPasteInsideAction":{"title":"Paste Inside Selection"},"GPasteHereAction":{"title":"Paste Here"},"GPasteStyleAction":{"title":"Paste Style"},"GPrintAction":{"title":"Print...","printing-disabled":"Printing is disabled due to technical problems. Please export a PDF file and print it in your favorite PDF reader.","printing-warning":"This device doesn\'t support printing at high quality. If you want to have better quality, please export a PDF document instead and print in your application of choice."},"GRedoAction":{"title":"Redo","redo-action":"Redo %action","tooltip-title":"Redo","tooltip-description":"Redo last undone operation."},"GReverseOrderAction":{"title":"Reverse Order"},"GSaveAction":{"title":"Save","title-download":"Download","tooltip-title":"Save your document","tooltip-description":"Save your progress on the current file.","has-new-version-when-save-message":"There is a newer version of this file in the cloud. Should it still be saved or do you want to reload? Please note: Reloading may lose progress.","has-new-version-when-save-reload":"Reload","has-new-version-when-save-save":"Save"},"GSaveAllAction":{"title":"Save All"},"GSaveAsAction":{"title":"Save as...","text.save-common":"%title (.%fileExtension)","text.save-pdf":"%title (.%fileExtension) at %dpiValue%dpiString","text.dpi-value":"%dpiValue %dpiString","text.dpi":"dpi","text.try-this-feature-pro-tooltip-title":"Quickly export a PDF document at 300dpi."},"GOpenAction":{"title":"Open Local File..."},"GQuitAction":{"title":"Quit"},"GSharePoint":{"error.title-found-special-chars":"You have entered an invalid file/folder name: %fileName%. Some symbols that are not allowed: %symbols%. Also there are some additional restrictions. Please try again.","error.unknown":"Unknown Error"},"GOneDriveBusiness":{"error.no-file-found":"Error occured. No file found","error.processing-api":"Error occured while processing request to One Drive Business API. Please try again later or contact support from Help > Contact us.","error.not-enough-parameters":"Error. Some parameters are not specified","error.title-found-special-chars":"You have entered an invalid file/folder name: %fileName%. Some symbols that are not allowed: %symbols%. Also there are some additional restrictions. Please try again."},"GImportFontsAction":{"title":"Add Fonts...","text.try-this-feature-pro-tooltip-title":"Add Fonts","text.try-this-feature-pro-tooltip-description":"Add your custom fonts to Corel Vector. Find them in the “Imported” tab in the Font selector."},"GClearFontsAction":{"title":"Clear imported fonts..."},"GSelectAllAction":{"title":"Select All"},"GSettingsAction":{"title":"Settings..."},"GShowGridAction":{"title":"Show Grid"},"GShowGuideLinesAction":{"title":"Show Guide Lines"},"GShowSymbolLabelsAction":{"title":"Show Symbol Labels"},"GShowRulersAction":{"title":"Show Rulers"},"GShowSlicesAction":{"title":"Show Slices"},"GShowEffectsAction":{"title":"Show Effects"},"GShowSelectionHandlesAction":{"title":"Show Selection Handles"},"GSimplifyAction":{"title":"Simplify Path","text.tolerance":"&nbsp;&nbsp;&nbsp;% Tolerance","text.simplification":"Path simplification","text.invalid-value":"Entered invalid number for pixel tolerance."},"GSnapUnitAction":{"title.full":"Snap to Full Units","title.half":"Snap to Half Units"},"GSplitAction":{"title":"Ungroup Selection","tooltip-title":"Ungroup items","tooltip-description":"Ungroup selected group of elements."},"GSplitLineAction":{"title":"Break Curve"},"GSplitPathAction":{"title":"Split Path"},"GToggleSnapAction":{"title":"Use Snapping","tooltip-title":"Snap","tootlip-title-action":"Use Snapping","tooltip-description":"Click to enable snapping."},"GToggleSnapZonesAction":{"title":"Use Snap Zones","tooltip-title":"Snap zones","tooltip-description":"Click to enable use of snap zones."},"GTransformAction":{"title.rotate-45-left":"Rotate 45° Left","title.rotate-90-left":"Rotate 90° Left","title.rotate-180-left":"Rotate 180° Left","title.rotate-45-right":"Rotate 45° Right","title.rotate-90-right":"Rotate 90° Right","title.rotate-180-right":"Rotate 180° Right","title.flip-vertical":"Flip Vertical","title.flip-horizontal":"Flip Horizontal","flip-horizontal-tooltip-title":"Flip Horizontal","flip-horizontal-tooltip-description":"Flip an object horizontally.","flip-vertical-tooltip-title":"Flip Vertical","flip-vertical-tooltip-description":"Flip an object vertically.","rotate-90-left-tooltip-title":"Rotate left","rotate-90-left-tooltip-description":"Rotate 90° to the left.","rotate-90-right-tooltip-title":"Rotate right","rotate-90-right-tooltip-description":"Rotate an object 90° to the right."},"GUndoAction":{"title":"Undo","undo-action":"Undo %action","tooltip-title":"Undo","tooltip-description":"Revert last operation. Click multiple times to go even further in edit history."},"GZoomInAction":{"title":"Zoom in","tooltip-title":"Zoom in","tooltip-description":"Click to zoom in about a point."},"GZoomOutAction":{"title":"Zoom out","tooltip-title":"Zoom out","tooltip-description":"Click to zoom out about a point."},"GSelectByFontTypeAction":{"title":"Font Type"},"GSelectByBlendModeAction":{"title":"Blend Mode"},"GSelectByBorderWidthAction":{"title":"Border Width"},"GSelectByPaintLayerAction":{"title.fill":"Fill","title.border":"Border","title.fill_border":"Fill & Border"},"GSelectByShapeAction":{"title":"Shape"},"GSelectByTransparencyAction":{"title":"Transparency"},"GSelectByEffectAction":{"title":"Effect"},"GToggleSidebarAction":{"title":"Show %s Panel"},"GPlaceImportAction":{"title":"Place Image...","tooltip-title":"Place image","tooltip-description":"Import an image from your computer."},"GLinkImageAction":{"title":"Link Image...","tooltip-title":"Link image","tooltip-description":"Import an image with a link to the original on your computer."},"GPlayAction":{"title":"Play/Present...","text.exit-full-screen":"Press %key to exit full screen","text.esc":"esc"},"GToggleFullscreenAction":{"title":"Toggle Fullscreen...","fullscreen-banner":"Press Alt + Enter to exit fullscreen mode"},"GNewFromTemplateAction":{"title":"New Design from Template..."},"GGravitCloudAction":{"title.new":"New Cloud File","title.open":"Open from Cloud...","title.save":"Save","title.save-as":"Save to Cloud as..."},"GVersionsHistoryAction":{"title":"Show Version History","unsaved-modifications":"Please save your design before showing the version history to avoid losing progress","text.try-this-feature-pro-tooltip-title":"Show Version History","text.try-this-feature-pro-tooltip-description":"Show saved versions of the current design and access up to 20 past versions."},"GOpenLinkAction":{"title.blog":"Blog","title.changelog":"What\'s New","title.discussion":"Forum","title.tutorials":"Tutorials","title.contact-us":"Contact Us","title.feedback":"Give Feedback","title.user-guide":"User Guide","title.eula":"End User License Agreement","title.request-new-feature":"Request New Feature","text.join-community":"Join the Community","title.open-a-ticket":"Open a Ticket"},"GOpenRecentAction":{"title":"No Recent Files"},"GMaskWithShapeAction":{"title":"Mask with Shape","text.mask":"Mask"},"GPurchaseProAction":{"title":"UPGRADE NOW"},"GEnhancedTooltipsAction":{"title":"Display Enhanced Tooltips"},"GSymbolsSidebar":{"text.symbols":"Symbols","action.delete-symbol":"Delete Symbol","action.create-symbol":"Create New Symbol","title":"Symbols","text.delete-symbol-tooltip-title":"Delete Symbol","text.delete-symbol-tooltip-description":"Delete the selected symbol.","text.create-symbol-tooltip-title":"Create New Symbol","text.create-symbol-tooltip-description":"Turn the selected element into a new Symbol."},"GOutlineSidebar":{"title":"Layers","text.pages":"Pages","action.toggle-page-mode":"Toggle Single / Multipage Mode","action.delete-active-page":"Delete Active Page","action.create-new-page":"Create New Page","text.layers":"Layers","text.layer":"Layer","action.delete-layer-item":"Delete Layer or Item","action.new-layer":"New Layer","action.insert-page":"Insert Page","action.delete-page":"Delete Page","action.move-page":"Move Page","action.insert-layer":"Insert Layer","action.move-layer":"Move Layer/Item","text.multipage-alert":"One of your pages is set to Infinite Canvas. Please change to a fixed size to be able to enter Multipage mode.","text.confirm-delete-masterpage":"This page is currently used as a Master page. Do you want to delete?","action.change-active-page":"Change active page","text.multipage-tooltip-title":"Multipage mode","text.multipage-tooltip-description":"Show all pages of the document in a grid side by side.","text.delete-page-tooltip-title":"Delete page","text.delete-page-tooltip-description":"Delete the selected page.","text.create-new-page-tooltip-title":"Create new page","text.create-new-page-tooltip-description":"Create a new page with the properties of the currently selected one.","text.delete-layer-tooltip-title":"Delete layer","text.delete-layer-tooltip-description":"Delete selected object or layer.","text.new-layer-tooltip-title":"Create new layer","text.new-layer-tooltip-description":"Create a new layer group."},"GInspectorSidebar":{"title":"Inspector"},"GCategory":{"category.account":"Account","category.file":"File","category.file.save-as":"File/Save as","category.edit":"Edit","category.edit.paste":"Edit/Paste","category.edit.select-same":"Edit/Select Same","category.modify":"Modify","category.modify.combine":"Modify/Create Compound Shape","category.modify.arrange":"Modify/Arrange","category.modify.align":"Modify/Align","category.modify.transform":"Modify/Transform","category.modify.path":"Modify/Path","category.modify.symbol":"Modify/Symbol","category.view":"View","category.view.magnification":"View/Magnification","category.view.canvas":"View/Canvas","category.view.snap":"View/Snap to","category.help":"Help","category.file.gravit-cloud":"File/Corel Vector","category.help.language":"Help/Language","category.help.switchwebcdr":"Help/CDGS server","category.help.support":"Help/Support","category.help.learn":"Help/Learn","category.file.import":"File/Import","category.file.import.image":"File/Import/Place Image...","category.file.export":"File/Export","category.file.export.pdf":"File/Export/PDF Document (.pdf)","category.file.open-recent":"File/Open Recent","category.file.share":"File/Share","category.view.mode":"View/View Mode","category.help.beta_feedback":"Help/Beta Feedback"},"GDocument":{"text.cloud-file-modified":"\'%title\' has been modified, do you want to replace it?","text.default-document-name":"Untitled","file-type.cdrapp":"CorelDRAW Design","file-type.gvdesign":"Corel Vector Design","file-type.cdr":"CorelDRAW Document","file-type.des":"Corel DESIGNER Document","file-type.pdf":"PDF Document","file-type.ai":"Adobe Illustrator Artwork Document","file-type.png":"PNG Image","file-type.jpeg":"JPEG Image","file-type.svg":"Scalable Vector Graphics","file-type.svgz":"Compressed SVG","file-type.eps":"Encapsulated PostScript","file-type.sketch":"Sketch File","text.import-from-pdf":"Import Page(s) from PDF","text.import-from-ai":"Import Adobe Illustrator Artwork","text.ai-not-pdf-compatible":"This Adobe Illustrator file isn’t compatible with Corel Vector, please follow the instructions in the file.","text.import-from-eps":"Import EPS","title.save-gvdesign":"Save to Local File as...","title.download-gvdesign":"Download File","title.save-cdrapp":"Save to file...","title.download-cdrapp":"Download File...","text.sync-to-cloud-error":"Could not save to cloud","text.sync-from-cloud-error":"Could not load from cloud","text.image-too-big":"You are attempting to upload a huge image, that may impact the performance of Corel Vector.<br/>Please try to reduce the image size before importing (max. 10MB, 64 megapixels).","text.image-in-design-too-big":"The design contains image which is too big for the current working environment. It may be displayed incorrectly or impact the performance of Corel Vector.","text.error-reading-file":"Can’t open file. Please make sure that the file exists, you have proper read access to it, it is not in directory synced with OneDrive, and you have an active network connection.","text.unsupported-file-extension":"This file format isn’t supported by Corel Vector.","text.suggestion-open-image":"This file can’t be open directly. Please use “File > Import > Place Image...”","text.save-your-progress":"Save your progress to proceed","text.reload-warning":"We are currently doing some important maintenance work. Please save your design in the next five minutes to avoid loss of progress!","text.unsupported-sketch-version-50+":"This Sketch file was created in version 50+, which isn’t supported by Corel Vector yet.","text.default-export-author":"Corel Vector","text.default-export-producer":"Corel Vector PDF Exporter","text.opening-your-image":"Opening your image...","text.keep-fonts-eps":"Keep Font Information","text.account-deactivated":"Hi %name, we see that you haven’t activated your account yet. This is required in order to use %app. Please <a>click here</a> to get another activation email. In this email, follow the link to activate your account.","text.cannot-save":"Cannot save contents. Remove some layers or undo few steps and try again. And report us this bug!","title.save-cdr":"Save to CorelDRAW file...","title.save-des":"Save to Corel DESIGNER file...","title.download-cdr":"Download CorelDRAW File...","title.download-des":"Download Corel DESIGNER File...","text.saveing-error":"There was a problem saving your file. Please download it from File > Download to prevent losing progress. If the problem persists, please contact support via Help > Support > Contact us","text.save-no-space":"There was no enough space on your disk. Please free some space and try again"},"GEyeDropper":{"text.tooltip":"Pick a color from anywhere on the canvas","text.preview":"Move cursor into canvas."},"GFontsButton":{"text.web-fonts":"Web Fonts","text.system-fonts":"System Fonts","text.imported-fonts":"Imported Fonts"},"GLayerPanel":{"action.rename-layer":"Rename Layer/Item","action.toggle-outline":"Toggle Outline","action.toggle-layer-outline":"Toggle Layer Outline","action.toggle-layer-visibility":"Toggle Layer Visibility","action.change-layer-color":"Change Layer Color","action.reset-instance":"Reset instance"},"GPagePanel":{"action.rename-page":"Rename Page"},"GDesignerStyleEditor":{"text.style-attribution":"Shared Style Attribution","text.new-style":"New Style","text.style-editor":"Style Editor","text.style-creator":"Style Creator","text.style":"Style","text.fill":"Fill","text.border":"Border","text.effects":"Effects","text.text":"Text","action.create":"Create","text.style-organizer":"Style Organizer","action.finish":"Finish","text.no-style":"No Shared Style","action.create-new-style":"Create New Shared Style","action.organize-styles":"Organize Shared Styles"},"GCommonNames":{"text.file-not-supported":"This file format is not supported!","text.unknown-user":"Unknown","text.anonymous-user":"Anonymous","text.native-edit-menu":"Edit","text.replace":"Replace","text.plkt-no-size-changes":"This property can’t be changed","text.infinite-canvas-no-size-changes":"%name - this property can’t be changed with an infinite canvas","text.max-number-pages-cdr":"CorelDRAW doesn’t support more than 999 pages, please remove some.","text.original-drawing-cdr":"CorelDRAW original drawing","text.unsupported-fonts-cdr":"This design may contain unsupported fonts and the option “Save text layers as paths” from the Settings will be applied.","text.unsupported-infinite-canvas":"Pages with an infinite canvas are not supported. The page size will be trimmed to the existing elements.","text.ok":"Ok","text.open-cdr-large-file":"You are trying to open a large CorelDRAW design. It may take a while to load.","text.failed-open-cdr-large-file":"Your CorelDRAW design cannot be processed at this point, please try again later.","text.failed-open-cdr-max-dim":"The dimensions of the pages contained in this CorelDRAW design are too big. Please decrease their size or the design’s dpi and try again.","text.file-too-large-cannot-be-processed":"CorelDRAW designs bigger than 450 MB cannot be processed. Please remove objects and try again.","text.file-no-images-cannot-be-processed":"Could not download file because some images are missing.<br>Please retry and ensure that you have a proper Internet connection.","text.failed-open-cdr-facing-pages":"Facing pages are currently not supported. Please switch off this page layout setting in CorelDRAW and save the design again to show it properly.","text.download-large-cdr-file":"You are trying to download a large CorelDRAW design. This may take a while.","text.failed-download-large-cdr-file":"Your CorelDRAW design cannot be downloaded at this point. Please try again later or save or download to the CDRAPP format to keep your progress.","text.rgb":"RGB","text.rgb.r":"R","text.rgb.g":"G","text.rgb.b":"B","text.cmyk":"CMYK","text.cmyk.c":"C","text.cmyk.m":"M","text.cmyk.y":"Y","text.cmyk.k":"K","text.version":"Version","text.internal-version":"Internal version","text.build":"Build","text.commit":"Commit","text.save-before-logging-out":"Please save your designs before logging out to avoid losing progress.","text.dpi":"DPI","property-h":"H","property-w":"W","text.chrome-untitled":"Untitled","text.untitled-image":"Untitled image","text.maintenance-title":"We are currently updating Corel Vector to a new version.","text.maintenance-info":"It will be available again in a few minutes.","text.cancel":"Cancel","text.save":"Save","text.cancel-loading":"Cancel","text.loading":"Loading","text.saving":"Saving","text.loading-file":"Loading %name","text.saving-file":"Saving %name, please wait to avoid losing any progress.","text.inside":"Inside","text.none":"None","action.toggle-lock":"Toggle Locker","action.toggle-visibility":"Toggle Visibility","evenodd.non-zero":"Non-Zero (Fill Holes)","evenodd.even-odd":"Even-Odd (Keep Holes)","action.change-fill-rule":"Change fill rule","action.change-blending-mode":"Change blending mode","text.opacity":"Opacity","text.blending":"Blending","text.position":"Position","text.size":"Size","text.color":"Color","text.angle":"Angle","text.export":"Export","text.format":"Format","text.default":"Default","text.web":"Web","text.colors":"Colors","arrow-paste.alert":"Select a shape, copy it to clipboard then paste it as arrow here.","text.height":"Height","text.width":"Width","text.unit":"Unit","text.advanced":"Advanced","text.global":"Global","text.document":"Document","text.corner":"Corner","text.autoscale-corners":"Autoscale Corners","text.radius":"Radius","text.angles":"Angles","text.advanced-settings":"Advanced Settings","action.change-corners":"Change corners","text.grid":"Grid","text.background-color":"Background","text.left":"Left","text.top":"Top","text.outside":"Outside","action.rotate":"Rotate","action.move":"Move","action.apply":"Apply","text.document-modified":"The document \\"%title\\" has been modified, do you want to save it?","text.guide-lines":"Guide Lines","text.full-pixels":"Full Pixels","text.anchor-points":"Anchor Points","text.shapes":"Shapes","text.pages":"Pages","tool.pointer":"Pointer","tool.subselect":"Subselect","tool.lasso":"Lasso","tool.layer":"Layer","tool.slice":"Slice","tool.pen":"Pen","tool.bezigon":"Bezigon","tool.freehand":"Freehand","tool.magichand":"Magic Hand","tool.knife":"Knife","tool.line":"Line","tool.rectangle":"Rectangle","tool.ellipse":"Ellipse","tool.polygon":"Polygon","tool.triangle":"Triangle","tool.star":"Star","tool.text":"Text","tool.pan":"Pan","tool.zoom":"Zoom","text.bottom":"Bottom","text.right":"Right","text.page":"Page","text.active":"Active","text.loading-failed":"Loading has failed","text.syncing-failed":"Syncing has failed","text.unable-to-save":"Unable to save the document. Do you have the right permissions?","text.try-again":"Try again","text.merge":"Merge","text.finish":"Finish","action.sign-out":"Log out","text.snap-to":"Snap to","text.snap-to-action":"Snap to %action","texture.position.auto":"Auto","texture.position.top":"Top","texture.position.left":"Left","texture.position.center":"Center","texture.position.right":"Right","texture.position.bottom":"Bottom","texture.repeat.repeat":"Both","texture.repeat.repeat-x":"Horizontal","texture.repeat.repeat-y":"Vertical","texture.repeat.no-repeat":"None","texture.size.auto":"Auto","texture.size.contain":"Contain","texture.size.cover":"Cover","texture.size.percent":"Percent","texture.size.length":"Length","texture.scale.fill":"Fill","texture.scale.fit":"Fit","texture.scale.stretch":"Stretch","texture.scale.tile":"Tile","noise.type.original":"Original","noise.type.black":"Black","noise.type.white":"White","noise.type.color":"Color","text.synchronizing-file":"Synchronizing %name","text.synchronizing":"Synchronizing","text.downloading":"Downloading","text.downloading-file":"Downloading %name","text.synch-failed":"Sync failed! Retrying","text.failed-to-synch":"Failed to sync!","template.presentation":"Presentation","template.blog-graphic":"Blog Graphic","template.facebook-post":"Facebook Post","template.social-media":"Social Media","template.poster":"Poster","template.posters-and-banners":"Posters & Banners","template.books":"Books","template.marketing":"Marketing","template.calendars-and-planners":"Calendars & Planners","template.cards-and-invitations":"Cards & Invitations","template.subcategory.cover-photos":"Cover Photos","template.subcategory.posts":"Posts","template.subcategory.stories":"Stories","template.subcategory.profile-pictures-thumbnails":"Profile Pictures & Thumbnails","template.subcategory.book-layouts":"Book Layouts","template.subcategory.scrapbooks":"Scrapbooks","template.subcategory.business-cards":"Business Cards","template.subcategory.email-templates-headers":"Email Templates & Headers","template.subcategory.letterhead":"Letterhead","template.subcategory.presentation":"Presentation","template.subcategory.proposals-reports":"Proposals & Reports","template.subcategory.resumes":"Resumes","template.subcategory.calendars":"Calendars","template.subcategory.planners":"Planners","template.subcategory.greeting-cards":"Greeting Cards","template.subcategory.invitations":"Invitations","template.subcategory.postcards":"Postcards","template.subcategory.recipe-cards":"Recipe Cards","template.subcategory.brochures-flyers":"Brochures & Flyers","template.subcategory.catalogs-informational-books":"Catalogs & Informational Books","template.subcategory.certificates":"Certificates","template.subcategory.infographics":"Infographics & Mind maps","template.subcategory.labels-stickers":"Labels & Stickers","template.subcategory-logos":"Logos","template.subcategory.menus":"Menus","template.subcategory.newsletters":"Newsletters","template.subcategory.posters-signs-Banners":"Posters, Signs & Banners","template.a4":"A4","template.business":"Business","template.card":"Card","template.greeting-card":"Greeting Cards","template.advertisement":"Advertisements","template.menu-and-brochure":"Menus & Brochures","element.chart":"Charts","element.emoji":"Emojis","element.shape":"Shapes","element.icons":"Icons","element.line":"Lines","element.sticker":"Stickers","element.illustration":"Illustrations","element.frame":"Frames","element.icon":"Icons","element.image":"Unsplash Photos","element.ui":"Prototyping","element.ui.ios":"iOS","element.ui.material":"Material","element.ui.windows":"Windows","element.icon.ios":"iOS","element.icon.material":"Material","element.icon.windows":"Windows","element.all":"All","element.search":"Search","text.save-to-file":"Save to File","text.save-to-cloud":"Save to Cloud","text.back-to-top":"Back to top","element.illustration.realistic":"Realistic","element.illustration.line":"Line","element.illustration.color":"Color","element.illustration.solid":"Solid","element.illustration.x-ray":"X-Ray","element.icon.animals":"Animals","element.icon.arrows":"Arrows","element.icon.astrology":"Astrology","element.icon.city":"City","element.icon.fashion":"Fashion","element.icon.finance-and-business":"Finance And Business","element.icon.food-and-objects":"Food And Objects","element.icon.gaming-and-cinema":"Gaming And Cinema","element.icon.industry-and-military":"Industry And Military","element.icon.logos":"Logos","element.icon.music":"Music","element.icon.office-and-computer":"Office And Computer","element.icon.people-and-gestures":"People And Gestures","element.icon.prototyping-material":"Prototyping Material","element.icon.prototyping-windows":"Prototyping Windows","element.icon.prototyping-ios":"Prototyping iOs","element.icon.sports-and-healthcare":"Sports And Healthcare","element.icon.time-and-weather":"Time And Weather","element.icon.travel-and-holidays":"Travel And Holidays","element.icon.very-basic":"Very Basic","element.emoji.klex":"Klex","element.emoji.classic":"Classic","element.emoji.cube":"Cube","element.emoji.cone":"Cone","element.image.texture":"Textures","element.image.nature":"Nature","element.image.architecture":"Architecture","element.image.business":"Business","element.image.animals":"Animals","element.image.food":"Food","text.cloud-login":"Cloud login","text.save-to-cloud-failed":"An error has occurred while saving to cloud. Do you want to save your file on the computer to avoid losing work?","text.fail-import-swatch":"This swatches file is invalid and could not be imported","text.import-swatches":"Import Swatches","text.export-swatches":"Export Swatches","text.downloading-fonts":"Downloading fonts","text.fonts-downloaded":"Fonts downloaded! Restart the app","text.error-downloading":"Error downloading fonts! Try again","action.settings":"Account settings","text.image":"Image","electron.container.unsaved-documents":"Are you sure you want to quit as there are unsaved documents?","electron.container.confirm":"Confirm","electron.container.synchronizing-documents":"Please wait until the file has finished saving to avoid losing progress.","text.snap-to-grid":"Grid","text.snap-to-guide-lines":"Guide Lines","text.snap-to-full-pixels":"Full Pixels","text.snap-to-anchor-points":"Anchor Points","text.snap-to-shapes":"Shapes","text.snap-to-pages":"Pages","text.start-trial-now-button":"Start the %days-day trial now","text.license-trial-day-left":"Trial: %days day left","text.license-trial-days-left":"Trial: %days days left","text.license-trial-expires-today":"Trial expires today","text.license-trial-expired":"Trial expired","text.license-pro-expired":"Your subscription has expired","text.license-offline-title":"The offline mode of Corel Vector is a Corel Vector feature","text.license-offline-subtitle":"Please save your designs in order to avoid losing progress.","text.license-offline-expired-subtitle":"Please establish an internet connection to keep using Corel Vector.","text.license-offline-footer":"The app %close in %time min.","text.license-offline-footer-highlight":"will close automatically","text.pdf-export-error":"There was a problem exporting your file. Please contact support from Help > Contact us and include the original .gvdesign file.","text.email-sent-title":"Email sent.","text.email-sent-info":"Please be sure to also check the spam/junk folder of your email client.","text.something-wrong":"Something is wrong.","text.something-wrong.try-again":"Something went wrong, please try again.","text.dont-save":"Don\'t save","text.buy-now":"UPGRADE NOW","text.error-emtpy-infinite-canvas":"Saving and exporting designs with an empty infinite canvas is not allowed.","text.error-nothing-to-save":"Nothing to save.","text.error-saving-file":"Error occurred, file could not be saved. Please contact support.","text.running-out-of-cloud-space":"You are running out of Cloud space. Please delete some older files to keep working.","text.countdown-timer":"%minutesm %secondss","text.please-wait-avoid-losing-progress":"Please wait until the file has finished saving to avoid losing progress.","text.user-account-deactivated":"Hey %name,  we couldn\'t confirm your email address in the last 3 days.<br>Your account is now deactivated!","text.activating-your-account":"Thanks for activating your account.","text.activating-your-account-subtitle":"Please enjoy designing in Corel Vector.","text.checking-connectivity":"Checking connectivity...","element.child.name.realistic":"Realistic","element.child.name.linear":"Linear","element.child.name.multi-colored":"Multi-Colored","element.child.name.solid":"Solid","element.child.name.x-ray":"X-Ray","element.child.name.alphabet":"Alphabet","element.child.name.animals":"Animals","element.child.name.arrows":"Arrows","element.child.name.architecture":"Architecture","element.child.name.astrology":"Astrology","element.child.name.baby":"Baby","element.child.name.beauty":"Beauty","element.child.name.business":"Business","element.child.name.cinema":"Cinema","element.child.name.city":"City","element.child.name.clothing":"Clothing","element.child.name.computer-hardware":"Computer Hardware","element.child.name.crime":"Crime","element.child.name.culture":"Culture","element.child.name.diy":"DIY","element.child.name.data":"Data","element.child.name.drinks":"Drinks","element.child.name.ecommerce":"Ecommerce","element.child.name.editing":"Editing","element.child.name.events":"Events","element.child.name.experimental":"Experimental","element.child.name.fashion":"Fashion","element.child.name.files":"Files","element.child.name.films":"Films","element.child.name.finance":"Finance","element.child.name.flags":"Flags","element.child.name.folders":"Folders","element.child.name.food":"Food","element.child.name.free-popular":"Free Popular","element.child.name.gaming":"Gaming","element.child.name.hands":"Hands","element.child.name.health":"Health","element.child.name.healthcare":"Healthcare","element.child.name.holidays":"Holidays","element.child.name.household":"Household","element.child.name.industry":"Industry","element.child.name.logos":"Logos","element.child.name.maps":"Maps","element.child.name.media-controls":"Media Controls","element.child.name.messaging":"Messaging","element.child.name.military":"Military","element.child.name.mobile":"Mobile","element.child.name.music":"Music","element.child.name.nature":"Nature","element.child.name.network":"Network","element.child.name.operating-systems":"Operating Systems","element.child.name.people":"People","element.child.name.photo-and-video":"Photo and Video","element.child.name.plants":"Plants","element.child.name.printing":"Printing","element.child.name.profile":"Profile","element.child.name.programming":"Programming","element.child.name.science":"Science","element.child.name.security":"Security","element.child.name.shopping":"Shopping","element.child.name.social-media":"Social Media","element.child.name.sports":"Sports","element.child.name.spirituality":"Spirituality","element.child.name.textures":"Textures","element.child.name.time-and-date":"Time And Date","element.child.name.transport":"Transport","element.child.name.travel":"Travel","element.child.name.user-interface":"User Interface","element.child.name.wallpapers":"Wallpapers","element.child.name.weather":"Weather","element.child.name.klex":"Klex","element.child.name.classic":"Classic","element.child.name.cube":"Cube","element.child.name.cone":"Cone","element.child.name.current-events":"Current Events","text.try-out-coreldrawpp-pro":"Try out CorelDRAW.app PRO","text.cant-change-cdr-limitations":"This page property can’t be changed in the currently imported design due to certain limitations.","text.filename-is-not-correct":"You have entered an invalid file name: %filename. Please try again.","text.message-explore-cloud-templates":"You haven’t added anything to Corel Vector yet. <br>What about trying out these example files?","text.try-this-feature-pro-tooltip-text":"Upgrade to unlock this feature.","text.learn-more":"Learn more","text.page-toggle-lock-tooltip-title":"Lock page","text.page-toggle-lock-tooltip-description":"Lock all objects on the current page.","text.page-toggle-visibility-tooltip-title":"Toggle visibility","text.page-toggle-visibility-tooltip-description":"Hide all objects on the page.","text.layer-toggle-lock-tooltip-title":"Lock layer","text.layer-toggle-lock-tooltip-description":"Lock layer or element.","text.layer-toggle-visibility-tooltip-title":"Toggle visibility","text.layer-toggle-visibility-tooltip-description":"Hide layer or element.","text.layer-toggle-outline-tooltip-title":"Toggle outline","text.symbol-panel-symbol-tooltip-description":"Click to highlight master on canvas. Drag on canvas to place an instance","text.corner-radius-slider-tooltip-title":"Corner slider","text.corner-radius-slider-tooltip-description":"Click and drag to make the corners of the selected elemente rounded.","text.login-in-to-continue":"Please login to continue.","error.http.forbidden":"Error occurred. You are not allowed to perform this action.","text.library-load-more":"Load more..."},"GCloudTemplates":{"text.welcome":"Welcome","text.templates":"Templates"},"GAlignProperties":{"text.space-x":"Space X","text.space-y":"Space Y"},"GAppearanceProperties":{"title":"Appearance","text.darken-image":"Darken image","text.lighten-image":"Lighten image","text.boost-contrast":"Boost contrast","text.adjust-colors":"Adjust colors","text.invert-colors":"Invert colors","text.masking":"Masking","blending.mask":"Mask","blending.inverse-mask":"Inverse Mask","text.style":"Style","action.sync":"Sync","text.multiple-selection":"Multiple selection","text.no-style":"No Shared Style","text.opacity-slider-tooltip-title":"Opacity slider","text.opacity-slider-tooltip-description":"Click and drag to make to change the opacity of the selected element.","text.blend-tooltip-title":"Blending mode","text.blend-tooltip-description":"Click to choose how this object will blend with underlying objects. Modes that are not compatible with CSS/SVG/PDF are marked with an asterisk.","text.shared-styles-tooltip-title":"Shared styles","text.shared-styles-tooltip-description":"Click to chose a shared style or create a new one."},"GBoolOpProperties":{"action.modify-merge-mode":"Modify merge mode","text.boolean":"Compound","text.union":"Union","text.intersect":"Intersect","text.subtract":"Subtract","text.difference":"Difference"},"GBorderPaintLayerProperties":{"title":"Borders","text.subtract":"Subtract","text.difference":"Difference","option.custom":"Custom","text.ends":"Ends","text.joins":"Joins","text.dash":"Dash","text.gap":"Gap","text.outline":"Outline","text.autoscale-borders":"Autoscale Borders","text.advanced-stroke-settings":"Advanced stroke settings","action.remove-selected-border":"Remove Selected Border","action.remove-border":"Remove Border","action.add-border":"Add Border","action.duplicate-border":"Duplicate Border","action.move-border":"Move Border","action.change-border-properties":"Change Border Properties","text.start-arrow":"Start Arrow","text.end-arrow":"End Arrow","text.autoscale-borders-tooltip":"Only with Transform tool","text.marker-position":"Position","text.border-alignment.disabled":"Please remove Open Path shape from selection to use border alignment","text.advanced-stroke-settings-tooltip-title":"Advanced Border settings","text.advanced-stroke-settings-tooltip-description":"Change Border Caps, Position, Dashes and Arrowheads.","text.remove-border-tooltip-title":"Remove Selected Border","text.remove-border-tooltip-description":"Click to remove the selected border from the element.","text.add-border-tooltip-title":"Add Border","text.add-border-tooltip-description":"Click to add a new border to the selected element.","text.border-width-tooltip-title":"Border width","text.border-width-tooltip-description":"The width of the border in current document units.","text.copy-border":"The Border was copied to your clipboard.","text.miter-limit":"Miter limit","text.miter-limit-tooltip-description":"Value at which the sharp corners will be converted to beveled."},"GContextMenu":{"text.select-same":"Select Same","text.arrange":"Arrange","text.align":"Align","text.transform":"Transform","text.select":"Select","text.paste":"Paste","text.create-compound":"Create Compound","text.convert-to-path":"Convert to Path","text.create-symbol":"Create Symbol","text.go-to-master":"Go to Master","text.text":"Text","text.crop":"Crop","text.original-size":"Original Size","text.replace-image":"Replace Image...","text.image":"Image","page-panel.text.duplicate":"Duplicate Page","page-panel.text.copy":"Copy Page","page-panel.text.delete":"Delete Page","page-panel.text.export":"Export Page","fill-properties-panel.text.delete-fill":"Delete Fill","fill-properties-panel.text.copy-fill":"Copy Fill","border-properties-panel.text.advanced-settings":"Advanced Border Settings","border-properties-panel.text.delete-border":"Delete Border","border-properties-panel.text.copy-border":"Copy Border","effect-properties-panel.text.apply-to-element":"Apply to Whole Element","effect-properties-panel.text.apply-to-fill":"Apply to Fill Only","effect-properties-panel.text.apply-to-border":"Apply to Border Only","effect-properties-panel.text.copy-effect":"Copy Effect"},"GDimensionProperties":{"action.keep-ratio":"Keep Ratio","text.align":"Align","text.transform":"Transform","text.select":"Select","text.anchors":"Anchors","text.alignTitle":"ALIGN & DISTRIBUTE","text.setting":"Settings","text.sameWidth":"Same width","text.sameHeight":"Same height","text.fullUnit":"Snap to full unit","text.halfUnit":"Snap to half unit","action.anchor-left":"Anchor Left","action.anchor-center":"Anchor Center","action.anchor-right":"Anchor Right","action.anchor-top":"Anchor Top","action.anchor-middle":"Anchor Middle","action.anchor-bottom":"Anchor Bottom","action.change-size":"Change Size","action.change-anchor":"Change Anchor","text.property-x-y-tooltip-title":"Position of the element","text.property-x-y-tooltip-description":"Set X and Y axis coordinates for the position of the selected element.","text.property-w-h-tooltip-title":"Size of the element","text.property-w-h-tooltip-description":"Set width and height for the size of the selected element.","text.keep-ratio-tooltip-title":"Keep Ratio","text.keep-ratio-tooltip-description":"Keep the proportions between width and height.","text.transform-button-tooltip-title":"Transform tool","text.transform-button-tooltip-description":"Transform the selected element.","text.rotate-angle-tooltip-title":"Angle of Rotation","text.rotate-angle-tooltip-description":"Set an angle to rotate the seleted element.","text.anchor-left-tooltip-title":"Anchor to the Left","text.anchor-left-tooltip-description":"Anchor selected element to the left.","text.anchor-center-tooltip-title":"Anchor Center","text.anchor-center-tooltip-description":"Anchor selected element to the center.","text.anchor-right-tooltip-title":"Anchor to the Right","text.anchor-right-tooltip-description":"Anchor selected element to the right.","text.anchor-top-tooltip-title":"Anchor Top","text.anchor-top-tooltip-description":"Anchor selected element to the top.","text.anchor-middle-tooltip-title":"Anchor to the Middle","text.anchor-middle-tooltip-description":"Anchor selected element to the middle.","text.anchor-bottom-tooltip-title":"Anchor to the Bottom","text.anchor-bottom-tooltip-description":"Anchor selected element to the bottom.","text.transform-title":"TRANSFORM","text.transform-advanced":"ADVANCED TRANSFORM","text.transform-apply":"Apply Transformations"},"GEffectProperties":{"text.most-used":"Most Used","title":"Effects","action.add":"Add Effect","action.toggle-collapse":"Toggle Effect Collapse","action.toggle-visibility":"Toggle Effect Visibility","action.remove":"Remove Effect","action.change-layer":"Change Effect Layer","action.move":"Move Effect","action.duplicate":"Duplicate Effect","action.change-properties":"Change Effect Properties","text.applies-to":"Applies to","text.more":"More","text.blur":"Blur","text.bend":"Bend","text.softness":"Softness","text.coverage":"Coverage","text.offset":"Offset","text.length":"Length","text.density":"Density","text.fade":"Fade","text.load-acv":"Load ACV","text.padding":"Padding","text.artistic":"Artistic","text.adjust":"Adjust","text.other":"Other","text.shadow":"Shadow","text.distortion":"Distortion","text.blend":"Blend","text.height":"Height","text.color.gradient.grp.instagram":"Instagram","text.color.gradient.opt.1977":"1977","text.color.gradient.opt.brannan":"Brannan","text.color.gradient.opt.gotham":"Gotham","text.color.gradient.opt.hefe":"Hefe","text.color.gradient.opt.lord-kelvin":"Lord Kelvin","text.color.gradient.opt.nashville":"Nashville","text.color.gradient.opt.x-pro-ii":"X-PRO II","text.add-effect-tooltip-title":"Add Effect","text.add-effect-tooltip-description":"Click to choose an effect to be added to the selected element.","text.copy-effect":"The Effect was copied to your clipboard."},"GEllipseProperties":{"action.change-shape":"Change shape","action.change-angle":"Change angle","text.shape":"Shape","text.ellipse-to-center":"Ellipse set border allignment to center"},"GErrorHandler":{"text.breakfast":"It\'s time for breakfast. Please save your file and restart the app.","text.sorry":"Corel Vector unexpectedly ran into an error. Sorry about that, the error message was sent to us and we will fix it as soon as possible.","text.close":"Close"},"GExportDialog":{"text.warning":"Warning:","text.canvas-bigger-than-200-in":"The canvas is bigger than 200 inches and might not be opened correctly in some PDF viewers.","text.export-to":"Export to","text.do-not-downsample-images":"Don’t downsample bitmap images","text.do-not-downsample-images-info":"Downsampling will reduce image quality but create a smaller PDF document.","text.rasterize-unsupported-objects":"Rasterize unsupported objects by CorelDRAW","text.canvas":"Canvas","text.selection":"Selection","text.assets":"Assets","text.jpeg-quality":"JPEG Quality","text.color-mode":"Color Mode","text.with-effects":"With effects","text.export-as-curves":"Export text as curves","text.export-all":"Export all","text.exporting":"Exporting, please wait","text.medium-quality":"Medium Quality Print","text.high-quality":"High Quality Print","text.selection-warning":"Please select one or more shapes to export them.","text.assets-warning":"To export an asset, select one or more shapes and click on \\"Make exportable\\" on the inspector.","text.preparing-preview":"Preparing preview...","text.decimal-places-precision":"Decimal Places","text.page-background":"Use page color","text.custom-background":"Use custom color","text.no-background":"Transparent","text.preserve-svg-editing-capabilites":"Preserve editing capabilities for SVG files","text.preserve-svg-editing-capabilites-description":"This will ensure that SVGs exported from Corel Vector can be properly re-imported.","text.default-limit":"Due to technical limitations it isn’t possible to export designs larger than 4000 px (respectively 141 cm or 55.55 in) at 300 dpi. Please resize your design or choose less dpi and try again.","text.pdf-limit":"Due to technical limitations, your design can’t be exported – it contains images larger than %limit. Please resize your design and try again.","text.layer-as-id":"Retain attributes and add IDs","text.layer-as-id-info":"All class and type attributes are retained and element names are added as IDs.","text.want-save-before-export":"Do you want to save this file before exporting?"},"GExportProperties":{"text.make-exportable":"Make Exportable","action.create-slice":"Create Slice","action.add":"Add Export","action.create-slices":"Create Slice(s)","action.update-setting":"Update Export Setting","action.remove":"Remove Export","text.suffix":"Suffix","text.multiple":"Multiple","text.format":"Format","text.create-slice-tooltip-title":"Create slice","text.create-slice-tooltip-description":"Click and drag to create a slice to be exported as an asset.","text.add-export-tooltip-title":"Add Export","text.add-export-tooltip-description":"Turn a selected object into an exportable asset."},"GFillPaintLayerProperties":{"title":"Fills","action.advanced-settings":"Advanced Fill Settings","action.remove-selected":"Remove Selected Fill","action.remove":"Remove Fill","action.add":"Add Fill","text.fill-rule":"Fill-Rule","action.modify":"Modify Fill","action.change-properties":"Change Fill Properties","action.duplicate":"Duplicate Fill","action.move":"Move Fill","text.remove-layer-tooltip-title":"Remove selected fill","text.remove-layer-tooltip-description":"Click to remove the selected fill from the element.","text.add-layer-tooltip-title":"Add fill","text.add-layer-tooltip-description":"Click to add a new fill to the selected element.","text.fill-rule-tooltip-title":"Fill rule ","text.fill-rule-tooltip-description":"Winding fill rule define how holes in shapes are shown.","text.copy-fill":"The Fill was copied to your clipboard."},"GImageProperties":{"text.checking-profile":"Checking CMYK Profile","action.replace":"Replace","action.replace-image":"Replace Image","action.original-size":"Orig. Size","action.reset-size":"Reset Image Size","action.no-crop":"No crop","action.reset-cropping":"Reset Image Cropping","text.check-profile":"Check CMYK Profile","text.loading-profile":"Loading CMYK Profile","action.crop":"Crop"},"GMissingFontsDialog":{"text.fonts-missing":"Some fonts in the document are missing","text.fonts-not-found":"The following fonts are used, but cannot be found in Corel Vector","action.keep-fonts":"Keep Fonts","action.replace-fonts":"Replace Fonts","text.turn-disabled-function":"You can also try to turn on disabled functions or do it later in font browser"},"GNewDocumentDialog":{"text.connect":"Connect","text.resources":"Resources","text.set-theme":"Set your Theme","text.set-language":"Set your Language","text.discuss":"Discuss","text.whats-new":"What\'s new","text.blog":"Blog","text.welcome":"Welcome to Corel Vector","action.open-file":"Open File","text.restart-app":"Restart your app to apply changes!","text.changelog":"Changelog","text.start-option":"New Design","text.start-option-description":"Design creation starts here","text.templates-option":"New from Template","text.templates-option-description":"Create a new design based on a template","text.cloud-option":"Open from Corel Vector","text.cloud-option-description":"Open and manage your cloud files","text.local-option":"Open from Computer","text.local-option-description":"Open a locally saved file","action.create-canvas":"Create!","action.leave-empty-infinite":"Leave it empty for infinite canvas","text.templates-login-title":"Cloud Templates","text.templates-login-phrase1":"Get inspiration and quickly start a design over thousands of free","text.templates-login-phrase2":"pro-grade templates, designed and updated by our team.","text.cloud-login-title":"Introducing Corel Vector","text.cloud-login-phrase1":"Quickly create awesome graphics and share them with the world.","text.cloud-login-phrase2":"One account, one workspace and two awesome free tools.","text.cloud-login":"Login","text.cloud-signup":"Sign up","text.old-user-title":"Welcome back to Corel Vector!","text.old-user-p1-p1":"Create a ","text.old-user-p1-p2":"new design","text.old-user-p1-p3":" from zero using pre-made or custom sizes.","text.old-user-p2-p1":"You can quick start a design with a ","text.old-user-p2-p2":"pre-made template","text.old-user-p2-p3":" here.","text.old-user-p3-p1":"Corel Vector has evolved and is now even more powerful, but don\'t worry. All ","text.old-user-p3-p2":"your old files are still here","text.old-user-p3-p3":" in the same account and can be acessed over here with the","text.old-user-p3-p4":" same login and password.","text.chk-got-it":"I got it, don\'t display this message again.","text.btn-read-more":"Read more","text.btn-got-it":"Got it, start designing","text.recent-option":"Open Recent","text.recent-option-description":"Open a recent opened file","text.recent-option-empty":"No Recent Files","text.start-option-check":"Don\'t show anymore at startup","text.about":"About","text.try-out-pro":"Try out Corel Vector","text.start-free-trial":"Start a 15-day free trial of the advanced<br/> PRO features","text.example-files":"Example Files","text.option-not-available-in-view-mode":"This option is not available in Viewer Mode."},"GUnsupportedFeaturesDialog":{"text.title-unsupported":"This design contains features, that are not supported for SVG files. These features are:","text.checked-unsupported":"Don’t show anymore"},"GSymbolProperties":{"title":"Symbol","text.instance":"instance","text.symbol":"symbol","text.instances":"instances","text.symbols":"symbols","text.master":"master","text.instanceof":"instance of","text.chooseinstance":"Instance"},"GPageProperties":{"title":"Page","text.background":"Background","action.change-background":"Change page background","action.change-canvas-opacity":"Change canvas opacity","action.change-size":"Change page size","action.change-bleeding":"Change bleeding","action.change-margins":"Change margins","action.change-margin":"Change margin","action.equal-margin":"Equal Margins","action.assign-master-page":"Assign Master Page","text.bleed":"Bleed","text.margin":"Margin","text.master":"Master","text.size-custom":"Custom Size","text.size-infinite":"Infinite Canvas","text.size-trim":"Trim Canvas","text.clip-content":"Clip content","text.page-size":"Page Size","text.rotate-canvas":"Rotate Canvas","text.rotate-canvas-tooltip-title":"Rotate Canvas","text.rotate-canvas-tooltip-description":"Rotate the canvas to a portrait or landscape.","text.trim-canvas-tooltip-title":"Trim Canvas","text.trim-canvas-tooltip-description":"Trim the page size to fit the current content.","text.clip-content-tooltip-title":"Clip Content","text.clip-content-tooltip-description":"Hide objects that are outside of the current canvas area.","text.bleed-tooltip-title":"Bleed","text.bleed-tooltip-description":"Define a bleed size for printing purposes.","text.margin-tooltip-title":"Margin","text.margin-tooltip-description":"Define margin size. Click the link icon to set each margin individually.","text.master-tooltip-title":"Master page","text.master-tooltip-description":"Choose the page to be used as a master for current page."},"GPathProperties":{"action.modify-path-node-type":"Modify Path Node(s) Type","text.closed":"Closed","text.joint":"Joint","text.straight":"Straight","action.modify-path-properties":"Modify Path Properties","action.modify-point-properties":"Modify Point Properties"},"GPatternChooser":{"text.advanced":"Advanced Options","text.scale":"Scale","text.rgb-color":"RGB Color","text.hsb-color":"HSB Color","text.cmyk-color":"CMYK Color","action.system-color-picker":"System Color Picker","action.change-stops-order":"Change order of stops","action.rotate-gradient-left":"Rotate gradient left","action.rotate-gradient-right":"Rotate gradient right","text.swatches":"Swatches","text.in-use":"In use","text.mixer":"Mixer","text.hex":"Hex","text.automatic":"Automatic","text.intensity":"Intensity","text.type":"Type","action.choose-image":"Choose Image","action.set-transparency-mask":"Set as transparency mask","text.repeat":"Repeat","action.remove-swatch":"Remove Swatch","text.tints":"Tints","text.shades":"Shades","text.tones":"Tones","text.mixes":"Mixes","action.copy-color":"Copy Color","action.paste-color":"Paste Color","action.add-to-document-swatches":"Add to Document Swatches","action.add-to-global-swatches":"Add to Global Swatches","text.equal-swatch-alert":"An equal swatch was already added.","pattern-type.transparent":"Transparent","pattern-type.color":"Color Fill","pattern-type.lineargradient":"Linear Gradient","pattern-type.radialgradient":"Radial Gradient","pattern-type.angulargradient":"Angular Gradient","pattern-type.texture":"Texture Fill","pattern-type.noise":"Noise","pattern-type.backgroundfill":"Background Fill","text.error-on-loading":"Some error ocurred during loading.","text.color-picker-tooltip-title":"Choose a color","text.color-picker-tooltip-description":"Choose a color, gradient or texture for the selected element.","text.eyedropper-tooltip-title":"Pick a color from the canvas","text.eyedropper-tooltip-description":"Hover the eyedropper over the canvas to pick a color for the selected element.","action.add-swatch":"Add swatch"},"GPolygonProperties":{"action.change-radius":"Change radius","action.change-angle":"Change angle","action.change-corner-type":"Change corner type","action.change-corner-radius":"Change corner radius","text.points":"Points","text.plain-edges":"Plain Edges","text.corners":"Corners","action.change-polygon-size":"Change polygon size","action.change-polygon-points":"Change polygon points"},"GRectangleProperties":{"text.uniform-corner-smoothness":"Uniform Corner-Smoothness","text.horizontal-corner-smoothness":"Horizontal Corner-Smoothness","text.vertical-corner-smoothness":"Vertical Corner-Smoothness","text.corner-type":"Corner-Type","text.uniform-corners":"Uniform Corners","action.modify-rectangle-properties":"Modify Rectangle Properties"},"GSceneProperties":{"action.change-grid-settings":"Change grid settings","text.on":"On","text.isometric":"Isometric","text.off":"Off","action.change-canvas-unit":"Change canvas unit","cloud.sync":"Sync Cloud","cloud.sync.info":"Keep your designs always updated and synchronized working online and offline with Corel Vector.","cloud.sync.enable":"Enable Sync","cloud.sync.more":"Learn more","cloud.sync.label":"Cloud Synchronization","text.dpi":"DPI","action.change-canvas-dpi":"Change canvas dpi","text.unit-tooltip-title":"Units","text.unit-tooltip-description":"Define the measurement unit of the document.","text.dpi-tooltip-title":"Dots per Inch","text.grid-tooltip-title":"Grid","text.grid-tooltip-description-off":"Turn off the grid.","text.grid-tooltip-description-on":"Turn on the grid.","text.grid-tooltip-description-isometric":"Turn on the Isometric grid.","text.color-mode":"Color Mode","action.change-color-mode":"Change color mode","text.color-mode-tooltip-title":"Color Mode","text.color-mode-tooltip-description":"Set the default color mode that is used when picking the color of elements.","text.reminder":"Please note that switching the color mode doesn’t alter existing elements on the canvas and only sets it as the default color mode from now on."},"GSettingsDialog":{"setting.disable-scrubbing":"Disable changing values in numeric input fields with dragging.","setting.enable_steps_debug":"Allow steps import/export","setting.highlight-on-hover":"Highlight on hover","setting.highlight-on-hover-description":"Highlight shapes when hovering them with the mouse.","setting.show-coordinates":"Show coordinates tooltip","setting.show-coordinates-description":"Show current coordinates tooltip when creating or moving shapes.","setting.show-size":"Show size tooltip","setting.show-size-description":"Show current size tooltip when creating or resizing shapes.","setting.show-angle":"Show angle tooltip","setting.show-angle-description":"Show current rotation angle tooltip when rotating shapes.","setting.invert-selection-mode":"Invert selection mode","setting.invert-selection-mode-description":"Only select objects which are completely inside the selection area, hold alt-key to switch between two modes.","setting.auto-expand-layers":"Auto expand layers","setting.auto-expand-layers-description":"When set auto-expands the layer tree for the current selection.","setting.auto-save":"Enable auto-save","setting.auto-save-description":"Files are saved automatically - please choose the interval (minutes) on the right. Please note that this feature is only available for files saved or synced to Corel Vector.","setting.auto-save-warning":"Auto-save: Warning for unsaved/local files","setting.auto-save-warning-description":"Show warning to remind about saving/syncing files to Corel Vector to enable auto-save. ","setting.auto-save-not-support-for-cdr-warning":"Auto-save: Reminder for CorelDRAW (CDR, DES) files","setting.auto-save-not-support-for-cdr-warning-description":"Show message to remind about saving to the CorelDRAW file format regularly.","setting.change-theme":"Change the theme of Corel Vector","setting.enable-beta":"Enable Beta version","setting.enable-beta-description":"Please note that beta versions are not meant for production work and may contain bugs. Please report them at <a href=\'https://discuss.gravit.io/c/designer/beta\'>our forum</a>.","setting.store-textpath":"Save text layers as paths","setting.store-textpath-description":"Saving paths will increase the file size but not require the fonts to be available.","setting.decimals-num":"Rounding","setting.decimals-num-description":"Please switch on to be able to define the number of decimal places where values are rounded in input fields.","action.save-changes":"Save Changes","text.gravish":"Gravish","text.dark-theme":"Dark Theme","text.light-theme":"Light Theme","setting.disable-warning-unsupported-features":"Disable warning messages of unsupported features","setting.disable-warning-unsupported-features-description":"Whether to disable warning message about unsupported features on svg exporter or not.","setting.eps-outline-fonts":"Outline fonts in EPS import","setting.eps-outline-fonts-description":"Fonts will be outlined so that they are not required to display the file correctly. Switch off to keep font information and edit text layers.","setting.ui-toolbar-alignment":"Left-aligned icons in the toolbar.","setting.disable-cdr-warning":"Disable warning message on CorelDRAW (CDR, DES) file open","setting.disable-cdr-warning-description":"Hides the message when opening a CDR or DES file for annotation in CorelDRAW.app.","setting.disable-cdr-unsupported-effects":"Disable warning message on Save as CorelDRAW (CDR, DES) file","setting.disable-cdr-unsupported-effects-description":"Hides the warning message when saving to the CorelDRAW file format.","setting.disable-cdr-unsupported-effect":"Disable warning message when editing CorelDRAW (CDR, DES) files","setting.disable-cdr-unsupported-effect-description":"Hides the warning message when creating incompatible objects in a CorelDRAW design.","setting.disable-notifications":"Disable notifications","setting.disable-notifications-description":"Stop receiving email notifications for new comments or annotations (can be changed for every design individually in the comments panel).","setting.create-backup-copy-of-file":"Create a backup copy of files","setting.create-backup-copy-of-file-description":"For every file you save or export, a hidden backup copy will be created automatically.","setting.email-notifications":"Email notifications","setting.email-notifications-description":"Set frequency of email notifications for new activity within the document","setting.email-notifications-frequency-every10min":"Every 10 mins","setting.email-notifications-frequency-onceaday":"Once a day","setting.email-notifications-frequency-instantly":"Instantly","setting.email-notifications-frequency-never":"Never"},"GSliceProperties":{"text.trim-transparent-pixels":"Trim transparent pixels","action.modify-slice-properties":"Modify Slice Properties"},"GTextProperties":{"text.stylisticset":"Stylistic set","text.language":"Language","text.list-type":"List Type","text.marker-none":"None","text.marker-bulleted":"Bulleted","text.marker-numbered":"Numbered","text.latin":"Latin","text.adlam":"Adlam","text.arabic":"Arabic","text.armenian":"Armenian","text.avestan":"Avestan","text.balinese":"Balinese","text.bamum":"Bamum","text.batak":"Batak","text.bengali":"Bengali","text.brahmi":"Brahmi","text.buginese":"Buginese","text.buhid":"Buhid","text.cham":"Cham","text.cherokee":"Cherokee","text.coptic":"Coptic","text.cyrillic":"Cyrillic","text.devanagari":"Devanagari","text.georgian":"Georgian","text.greek":"Greek","text.hangul":"Hangul","text.hebrew":"Hebrew","text.javanese":"Javanese","text.kaithi":"Kaithi","text.kannada":"Kannada","text.katakana":"Katakana","text.khmer":"Khmer","text.lao":"Lao","text.lepcha":"Lepcha","text.limbu":"Limbu","text.linear_b":"Linear_b","text.malayalam":"Malayalam","text.mandaic":"Mandaic","text.mongolian":"Mongolian","text.myanmar":"Myanmar","text.old_persian":"Old_persian","text.osmanya":"Osmanya","text.phoenician":"Phoenician","text.runic":"Runic","text.sundanese":"Sundanese","text.syriac":"Syriac","text.tagalog":"Tagalog","text.tai_le":"Tai_le","text.tai_tham":"Tai_tham","text.tai_viet":"Tai_viet","text.telugu":"Telugu","text.thai":"Thai","text.tibetan":"Tibetan","text.yi":"Yi","text.auto":"Auto","text.fix":"Fix","text.scale-content":"Autoscale Font","action.modify-text-properties":"Modify Text Properties","text.weight":"Weight","text.alignment":"Alignment","action.justify":"Justify","text.vertical":"Vertical","text.spacing":"Spacing","text.char":"Char","text.word":"Word","text.line":"Line","text.sizing":"Sizing","text.orientation":"Orientation","text.script":"Script","text.variant":"Variant","text.on-path":"On Path","text.reverse":"Reverse","text.distance":"Distance","text.edit":"The font is not available, continue to edit it?","text.transform":"Transform","text.transform-uppercase":"Uppercase","text.transform-capitalize":"Capitalize","text.transform-lowercase":"Lowercase","text.transform-smallcaps":"Small Caps","text.advanced-text-settings":"Advanced Settings","text.decoration":"Decoration","text.decoration-bold":"Bold","text.decoration-italic":"Italic","text.decoration-underline":"Underline","text.decoration-strikethrough":"Strikethrough","text.paragraph":"Paragraph","text.paragraph-indent":"Indent","text.paragraph-spacing":"Spacing After","text.typography":"Typography","text.typography-subscript":"Subscript","text.typography-superscript":"Superscript","text.typography-ligatures":"Ligatures","text.typography-fractions":"Fractions","text.orientation-ltr":"Left-to-right","text.orientation-rtl":"Right-to-left","text.orientation-ttb":"Top-to-bottom","text.decoration-strikeout":"Strikethrough","text.mixed":"Mixed","text.size":"Size","text.color":"Color","text.advanced-properties-icon-tooltip-title":"Advanced Text Properties","text.advanced-properties-icon-tooltip-description":"Manage advanced typography properties (Sub and Super script, Fractions, Ligatures, Change Case, Paragraph indent and spacing)."},"GToolbar":{"text.shared":"Shared","text.share":"Share","text.snap":"Snap","text.view":"View","text.select":"Select","text.path":"Path","text.shape":"Shape","text.text":"Text","text.group":"Group","text.clip":"Clip","text.split":"Ungroup","text.zoom":"Zoom","text.merge":"Create Compound Shape","text.zoom-button-tooltip-title":"Zoom","text.undoList-button-tooltip-title":"Extended undo list","text.undoList-button-tooltip-description":"See a list of actions performed lately to roll back to an older version of your design.<br/>","text.comment-toggle":"Comment Toggle","text.comment-on":"Show comments and annotations.","text.comment-off":"Hide comments and annotations."},"GTransformProperties":{"title":"Transform","text.advanced-transform-settings":"Advanced settings","text.scale":"Scale","text.skew":"Skew","text.copies":"Copies","action.apply-transformation":"Apply Transformation","text.move-tooltip-title":"Move element","text.move-tooltip-description":"Set a number to move the selected element horizontally or vertically.","text.scale-tooltip-title":"Scale element","text.scale-tooltip-description":"Set a number to adjust width and height of the selected element.","text.rotate-tooltip-title":"Rotate element","text.rotate-tooltip-description":"Set an angle to rotate the seleted element.","text.rotate-axis-tooltip-title":"Rotate along axis","text.rotate-axis-tooltip-description":"Set an angle for the reflect axis.","text.skew-tooltip-title":"Skew element","text.skew-tooltip-description":"Set an angle to slant the selected element along one of the axis.","text.copies-tooltip-title":"Copy element","text.copies-tooltip-description":"Set a number to make copies of the selected element.","text.transdorm-origin-tooltip-title":"Transdorm origin","text.transdorm-origin-tooltip-description":"Set the origin point for transformations"},"GFilesPanel":{"text.file-can-not-be-accessed-missing-permissions":"This file has view restrictions set by the owner, you are not allowed to open it.","text.assets-shared-with-me":"Assets shared with me","text.please-inform-valid-file-name":"Please, inform a valid file name","text.title-recent-files":"Recent Files","text.title-all-files":"My Cloud","text.option-isnt-available":"This option isn’t available for Cloud Drives","text.google-drive-corporate":"Google Drive","text.sharepoint-corporate":"SharePoint","text.onedrivebusiness-corporate":"OneDrive Business","text.downloading-files":"Downloading file(s)...","text.info-cdr":"CDR: All existing CorelDRAW drawing content will be maintained when opening in CorelDRAW. Drawing content added in CorelDRAW.app will be editable in CorelDRAW, but will be locked when opening the CDR file in CorelDRAW.app again.","text.info-cdrapp":"CDRAPP: The internal file format of CorelDRAW.app. All content added in CorelDRAW.app will be maintained and remains editable. Existing CorelDRAW drawing content will be maintained as a locked underlay. This file format can’t be opened in CorelDRAW.","text.info-sharepoint-cdrapp-not-available":"Saving to the CDRAPP file format isn’t supported for SharePoint yet. Please choose DES or CDR format instead.","action.new-folder":"New folder","action.new-folder-tooltip":"Creates a new folder in the current location","action.cut":"Cut","action.cut-tooltip":"Cut/Paste the current selection","action.copy":"Copy","action.copy-tooltip":"Copy/Paste the current selection","action.delete-tooltip":"Delete the current selection","action.cancel-tooltip":"Cancel and go back to editing your design.","text.delete-confirm":"You want to delete the current selection? This operation cannot be reverted!","text.sort-date":"Sort by Creation Date","text.sort-name":"Sort by Name","action.back":"Back","action.back-tooltip":"Return to previous folder","action.my-cloud":"My Cloud","action.my-cloud-tooltip":"Return to the main directory","action.open":"Open","action.rename":"Rename","text.updated":"Updated","text.name":"Name","text.creation-date":"Creation Date","text.created":"Created","text.ascending":"Ascending","text.descending":"Descending","text.large-mode":"Large preview","text.last-saved":"Last saved","action.open-design":"Open","action.delete-button":"Delete","action.card-view-button":"Card view","action.list-view-button":"List view","text.search-not-found":"No files match your search term, please try again.","text.search-placeholder":"Search File","action.open-containing-folder":"Open containing folder","action.sort":"Sorting","action.download-tooltip":"Download files","action.download-tooltip-format":"Download %format Files","action.download-title":"Download","action.download-title-format":"Download %format","action.maximize-window":"Maximize window","action.minimize-window":"Minimize window","action.close-window":"Close window","text.untitled":"Untitled","text.error-download-single-file":"Error occurred. File cannot be downloaded. Please contact support.","text.error-download-multiple-files":"Some files could not be downloaded. Please contact support.","text.error-fetching-files":"Error occurred, files could not be loaded. Please contact support.","text.error-fetching-folders":"Error occurred, folders could not be loaded. Please contact support.","text.error-creating-folder":"Error occurred, folder could not be created. Please contact support.","text.error-saving-file":"Error occurred, file could not be saved. Please contact support.","text.error-deleting":"Error occurred, could not delete item. Please contact support.","text.error-renaming":"Error occurred, could not rename item. Please contact support.","text.error-moving":"Error occurred, could not move items. Please contact support.","text.info-des":"DES: All existing Corel DESIGNER drawing content will be maintained when opening in Corel DESIGNER. Drawing content added in CorelDRAW.app will be editable in Corel DESIGNER, but will be locked when opening the DES file in CorelDRAW.app again. The Corel DESIGNER %version DES file format will be used.","text.file-already-exists-on-current-location":"%filename already exists in the current location. Do you want to create a new file with the same name?","text.folder-already-exists-on-current-location":"%foldername already exists in the current location. Do you want to create a new folder with the same name?","text.new-file-name-invalid":"The new file name is invalid","text.selection-multiple":"%selection %multiple","text.multiple":"multiple","text.cloud":"Cloud","text.filter-type-gvdesign":"GVDESIGN","text.filter-type-symbol":"Symbols","text.filter-type-styles":"Styles","text.filter-type-cdr":"CDR","text.filter-type-des":"DES","text.filter-type-cdrapp":"CDRAPP","action.filter":"Filtering","action.clear":"Clear"},"GDashboardFilesPanel":{"text.confirm-file-overwrite":"You selected a file when saving, do you want to continue and replace this file? Replacing it will overwrite its current content.","text.not-allowed-select-different-format-overwrite":"It is not allowed to select different file formats when saving symbols."},"GNewFilePrompt":{"text.name-document":"Please name your folder","action.create":"Create"},"GPresets":{"text.android-mobile":"Android mobile","preset-title.print":"Print","preset-sub-title.print":"Paper Size","preset.4a0":"4A0","preset.2a0":"2A0","preset.a0":"A0","preset.a1":"A1","preset.a2":"A2","preset.a3":"A3","preset.a4":"A4","preset.a5":"A5","preset.a6":"A6","preset.a7":"A7","preset.a8":"A8","preset.a9":"A9","preset.a10":"A10","preset.us-letter-portrait":"US-Letter Portrait","preset.us-letter-landscape":"US-Letter Landscape","preset.business-card":"Business Card","preset.flyer":"Flyer","preset.postcard":"Postcard","preset.book-cover":"Book Cover","preset-title.web":"Web/Desktop","preset-sub-title.web":"Screen Size","preset.blog-cover":"Blog Cover","preset.blog-graphic":"Blog Graphic","preset.website-small":"Website - Small","preset.website-normal":"Website - Normal","preset.website-medium":"Website - Medium","preset.website-large":"Website - Large","preset.website-huge":"Website - Huge","preset.full-website":"Full Website","preset-title.social":"Social Media","preset-sub-title.social":"Banner/Post Size","preset.facebook-cover":"Facebook Cover","preset.facebook-profile":"Facebook Profile","preset.facebook-story":"Facebook Story","preset.twitter-cover":"Twitter Cover","preset.youtube-cover":"YouTube Cover","preset.google-cover":"Google+ Cover","preset.google-business-profile":"Google My Business Profile","preset.google-business-cover":"Google My Business Cover","preset.google-business-post":"Google My Business Post","preset.linkedin-cover":"LinkedIn Cover","preset.linkedin-profile":"LinkedIn Profile","preset.linkedin-post":"LinkedIn Post","preset.twitch-cover":"Twitch Cover","preset.twitter-post":"Twitter Post","preset.twitter-profile":"Twitter Profile","preset.twitter-story":"Twitter Story","preset.facebook-post":"Facebook Post","preset.facebook-app":"Facebook App","preset.facebook-ad":"Facebook Ad","preset.blog-post":"Blog Post","preset.instagram-post":"Instagram Post","preset.instagram-profile":"Instagram Profile","preset.instagram-story":"Instagram Story","preset.instagram-thumbnail":"Instagram Thumbnail","preset.tumblr-graphic":"Tumblr Graphic","preset.pinterest-pin":"Pinterest Pin","preset.twitch-video":"Twitch Video","preset.linkedin-banner":"LinkedIn Banner","preset.dribble-shot":"Dribbble Shot","preset-title.screen":"Devices","preset-sub-title.screen":"Device Type","preset-title.merch":"Print on Demand","preset-sub-title.merch":"Item Type","preset.amazon-shirt-pullover":"Amazon Shirt/Pullover","preset.amazon-shirt":"Amazon Shirt","preset.amazon-pullover":"Amazon Pullover Back","preset.amazon-popsocket":"Amazon Popsocket","preset.teepublic-shirt":"Teepublic T-Shirt","preset.cafepress-shirt":"Cafepress T-Shirt","preset.redbubble-shirt":"Redbubble T-Shirt","preset.redbubble-shirt-standard":"Redbubble Standard","preset.redbubble-shirt-long":"Redbubble Long","preset.instagram-stories":""},"GLibrarySidebar":{"title":"Libraries","text.connect":"Connect to the internet to access the Library"},"GDocumentChooser":{"text.cloud.sync.title":"Cloud Synchronization","text.cloud.sync.subtitle":"We found a divergence in the hosted file, please choose the file version that you want to keep using.","text.cloud.online":"(Cloud)","text.cloud.offline":"(Local File)","text.cloud.newer-file":"(Newer file)","text.cloud.unavailable":"Unavailable"},"GItemProperties":{"text.click-through":"Click-through this element","text.scale-with-content":"Autoscale Clipped Shapes"},"GFrameProperties":{"text.frame":"Frame","text.switch-frame":"Turn On Frame Mode","text.frame-off":"Turn Off Frame Mode"},"GGroupFrameProperties":{"text.group":"Group","text.frame":"Frame","text.switch-frame":"Switch to Frame","text.switch-group":"Switch to Group"},"GOpenWelcomeScreenAction":{"title":"Show Welcome Screen"},"GCheckForUpdatesAction":{"title":"Check for Updates"},"GLoginPanel":{"text.title":"Let\'s get started!","text.subtitle":"We hope you have enjoyed using Corel Vector so far. Please create an account with our Corel Vector to continue.","text.login":"Login","text.signup":"Sign up"},"GSoftwareUpdatePanel":{"title":"Software Update","text.update-not-available":"There is currently no update available. You are using the latest version (%currentVersion)","text.download-ready":"Download ready,&nbsp;<a>install Corel Vector %newVersion now!</a>","text.download-progress":"Downloading Corel Vector %newVersion","text.update-available":"There\'s a new version available (%newVersion). You\'re currently using %currentVersion.&nbsp;","text.update-error":"Failed to update the application, please, try again later!","text.after-update":"You are now running Corel Vector %currentVersion.&nbsp;","text.see-release-notes":"See release notes","text.update-now":"Update Now!","text.force-update-information-time":"The app <span>will close automatically</span> in %minutes min.","text.force-new-version-available":"There’s a new version available (%newVersion)","text.force-message-avoid-losing-progress":"It will be installed automatically, please save your designs in order to avoid losing progress.","text.ok":"OK","text.dialog-unsaved-documents":"You have unsaved changes. Please save your designs in order to avoid losing progress.","text.updating":"Updating..."},"GApplicationManager":{"text.license-change-spectator-title":"You are now in Viewer Mode. You can only preview, open, and print designs. If you are unsure about this change, please contact your IT administrator.","text.license-change-spectator-losing-progress":"Please save your designs in order to avoid losing progress.","text.license-change-spectator-update-time":"The app <span>will automatically update</span> in %minutes min.","text.ok":"OK"},"GOfflineDialog":{"title.unavailable-feature":"This feature is not available while you are offline. Please establish an internet connection to continue.","text.offline-title":"Hey %name, please <strong>establish an internet connection with your device</strong> in order to verify your subscription details.","text.offline-title-retry":"Hey %name, in order to complete your request we need an internet connection. Please <strong>connect your device</strong> and click on “Retry.”","text.display-name-in-case-missing":"there","text.offline-subtitle":"If we are unable to connect in the next %days days, we will disable all features until an internet connection is present.","text.offline-check":"Check later","text.offline-retry":"Retry","text.offline-cancel":"Cancel","text.offline-footer":"If you have questions, please <a href=\'%link\' target=\'_blank\'>contact us here.</a>"},"GSaveStepsAction":{"title":"Save steps"},"GImportStepsAction":{"title":"Import steps"},"GInstallToDesktopAction":{"title":"Install to Desktop"},"GInstallPwaDialog":{"text.title":"Install Corel Vector to your desktop","text.description-text":"Corel Vector now comes as a PWA (Progressive Web App), that runs like a regular desktop application, no download required. It gives you everything you know (and love) from the current web app, but doesn’t require an internet connection ","text.description-pro-link":"(subscription required)","action.install-button":"Install","action.not-now-button":"Not now","text.footer-main-text":"After installing, the PWA is available as a regular desktop application and can also be found in ","action.footer-link-text":"Chrome apps","action.footer-more-information":"More information here","text.end-sentence-dot":".","text.pwa-requires":"<span>The PWA requires</span><span><a href=\'https://www.google.com/chrome\' target=\'_blank\'>Google Chrome</a> or <a href=\'https://www.microsoft.com/en-us/edge\' target=\'_blank\'>Microsoft Edge</a></span><span>in order to work.</span>"},"GShortcutsDialog":{"text.title":"Keyboard Shortcuts"},"GSetupSystemDate":{"title":"Setup System date","text.reset":"Reset"},"GTranslationToolAction":{"title":"Translation Tool"},"GFilesPanelViewBase":{"text.connect-cloud-drive":"Connect Cloud Drive","text.connect-new-cloud-drive":"Connect new Cloud drive...","text.cloud-connection-options":"Google Drive, iCloud, DropBox, OneDrive","text.add-new-cloud-drive":"Add new Cloud drive","text.connect-cloud-drive-text":"Connect %name","text.add-new-drive-text":"Add new %name Account","text.add-new-drive-suffix":"Account","text.edit-drive-title":"Edit Cloud Drive","text.button-edit-cloud-drive-disconnect":"Disconnect","text.error-validation-fill-all-fields":"Please fill next fields correctly: %fields","text.error-incorrect-configuration":"Either you\'ve not finished the login process, or there is an error in Account data","text.button-add-cloud-drive-save":"Save","text.button-add-cloud-drive-cancel":"Cancel","text.add-new-account-field-tenant":"Tenant","text.add-new-account-field-client-id":"Client ID","text.add-new-account-field-domain":"Domain","text.add-new-account-field-name":"Name","text.my-drive":"My Drive","text.personal-google-drive":"Personal Google Drive","text.refresh-drive-content":"Refresh Cloud Content","text.info-sharepoint-unavailable-safari":"SharePoint currently isn’t supported in your web browser, please try Chrome or Firefox instead.","text.show-more":"Show more ...","text.collaborators":"Collaborators","text.share-by":"Shared by <span>%name</span>","text.comments":"Comments","text.comment":"Comment","text.status":"Status","text.shared":"Shared","text.share-this-file":"Share this file","text.created":"Created %createdTime","text.can-only-share-by-owner":"This file can’t be shared by you, this is only possible for files where you are the owner."},"GFilesPanelViewSharepoint":{"action.checkout":"Check out","action.checkout-open":"Check out and open","action.checkin":"Check in","action.discard-check-out":"Discard check out","text.error-could-not-discard-check-out":"Could not discard check out","text.discard-check-out-warning-description":"If you discard your check out, you will lose all changes made to the document. Are you sure you want to discard your check out?","text.checkin-comment":"Enter comment for Check In","text.error-file-cant-be-opened":"File cannot be opened","text.error-could-not-connect-to-instance":"Could not connect to SharePoint instance","text.error-could-not-check-in":"Could not check in","text.error-could-not-check-out-open":"Could not check out and open","text.error-could-not-check-out":"Could not check out","text.error-loading-sharepoint-user-info":"Error loading SharePoint user info: %error","text.error-file-is-already-checked-out-by-someone-else":"This file is already in use.","text.choose-checkin-type":"What kind of version would like to check in?","text.checkin-type-minor":"Minor version (draft)","text.checkin-type-major":"Major version (publish)","text.checkin-type-overwrite":"Overwrite the current minor version","text.third-party-cookie-warning-message":"Please change your browser settings to <a href=\'%link\'>allow third-party cookies</a> and then try again.","text.third-party-cookie-warning-message-try-again":"Try again","text.no-access-to-download-some-selected-files":"You don\'t have permission to access some of the selected files. These files won\'t be downloaded.","text.no-access-to-download-all-selected-files":"You don\'t have permission to access the selected files.","text.button-proceed":"Proceed"},"GDashboardSharepointAuthenticator":{"text.please-close-already-authenticated":"Please close this window, you have been successfully authenticated."},"GDashboardManager":{"text.failed-get-file":"Failed to get file, please try again later!"},"GExternalStorage":{"text.error-file-cant-be-null":"File can not be null","text.error-window-blocked":"Window is blocked","text.error-window-blocked-alternative":"Please allow pop-ups for Corel Vector in browser settings to continue."},"GHeader":{"action.context-menu.duplicate":"Duplicate","action.context-menu.close-other":"Close Other Files","text.close-other-tabs-confirmation":"Do you really want to close all other files?","text.close-all-tabs-confirmation":"Do you really want to close all files?","action.context-menu.close-all":"Close All"},"GUserNameConfigDialog":{"text.ok":"OK","text.dialog-title":"Hi! Nice to meet you...","text.name-usage-tips":"Please enter your full name so that we identify you when adding comments or annotations.","text.first-name":"First Name","text.last-name":"Last Name"},"GMSTeamsAuthenticator":{"text.offline":"It seems like there is a connection issue. Please try again later.","text.onedrive-business-error":"You don’t seem to be signed in with an account that is allowed to access OneDrive Business inside of CorelDRAW.app, please ask your domain administrator to configure access or sign in using a valid account.","text.sharepoint-error":"You don’t seem to be signed in with an account that is allowed to access SharePoint inside of CorelDRAW.app, please ask your domain administrator to configure access or sign in using a valid account.","text.not_registered":"You don’t seem to signed in with an account that is allowed to access CorelDRAW.app, please sign in using a valid account.","text.sharepoint-onedrive-business-error":"You don’t seem to be signed in with an account that is allowed to access SharePoint and OneDrive Business inside of CorelDRAW.app, please ask your domain administrator to configure access or sign in using a valid account.","text.failed-to-open-window":"It seems your browser is blocking pop-ups, please see the icon in the address bar. Please click “Authenticate” to try again.","text.cancelled-by-user":"We couldn\'t log you in, please try again to be able to use CorelDRAW.app.","text.unknown":"Unknown error, Please contact support.","text.authenticate":"Authenticate","text.try-again":"Try again","text.error_no_client_id":"Your user isn\'t properly configured for accessing CorelDRAW.app on Microsoft Teams, please contact your IT administrator","text.error_user_not_registered":"To sign in to CorelDRAW.app for Teams for creating or editing designs, you must have a licensed copy or an active trial of CorelDRAW Graphics Suite or CorelDRAW Technical Suite (version 2019 or newer).<br />Please ensure:<br /><ol><li>You have Enterprise License of Corel Draw Graphics Suite.</li><li>You can sign in to CorelDRAW.app with your account via MSO365 option on <a href=\'https://coreldraw.app/?enterprise\' target=\'_blank\'>Enterprise  sign in page</a>.</li></ol> Please visit <a href=\'https://www.coreldraw.com/\' target=\'_blank\'>www.coreldraw.com</a> for more information.","text.error_empty_hash":"Error occured: Empty Request Hash. Please try to reload Tab/Application.","text.error_no_command_found":"Error occured: No Commands Found in Hash. Please try to reload Tab/Application.","text.error_incorrect_hash_command":"Error occured: Wrong Hash Command. Please try to reload Tab/Application"},"GMSTeamsConfigRenderer":{"text.main-title":"Please select an option:","text.new-file-option":"Create New File","text.template-option":"New from Template","text.template-category-view-title":"Select template category","text.template-view-title":"Select template of \\"%category\\" category (%width×%height %unit)","text.create-button":"Create","text.warnings-header":"Warnings:","text.new-file-select-preset":"Select predefined size","text.existing-file-option":"Open Existing File","text.file-name-label":"Enter File Name","text.file-name-placeholder":"New CDA File Name","text.file-extension-label":"Select File Format","text.existing-file-view-title":"Choose a file","text.existing-file-shared-on":"Shared on:","text.existing-files-no-results":"No items found for this chat/channel. Please create new file or choose another chat/channel","text.existing-file-no-permission":"This file can\'t be selected, be sure you have the right permissions!","text.error-not-authenticated-existing-files":"We could not load your existing files because of authentication error. Please try again later or contact your administrator","text.error-not-authenticated":"We could not authenticate you. Please try again later or contact your administrator","text.error-user-doesnt-exist":"This user doesn\'t exist. Please contact your domain administrator","text.error-could-not-create-new-file":"Could not create new file.","text.error-conflict-file":"The filename is already used. Please go back and change it!","text.error-file-name-empty":"File name should not be empty. Please fill it in.","text.error-file-name-rules":"The file name cannot contain \'/\', \'\\\\\', \'|\' illegal characters. Please modify it.","text.error-create-file-request":"Create File request error","text.go-back-button":"‹ Go back","text.go-back-to-configuration-button":"‹ Go back to the file configuration","text.warning-could-not-share-new-file":"Could not share new file","text.warning-could-not-post-new-file-to-chat":"Could not post new file to chat","text.long-creation-time-notification":"Please wait! This might take a while.","text.file-created-successfully":"The file was saved successfully! Please click on Save to finish. ↓","text.filename-default":"Untitled-1"},"GMSTeamsOneDriveBusinessProvider":{"text.error-no-personal-chats-folder":"Could not find MS Teams Personal Chats folder"},"GUnshareButton":{"text.unshare-with-me":"Unshare with me"},"GToggleFillsAction":{"title":""},"GUnshareWithMeAction":{"title":"Unshare with me"},"GChangeAnchorPointsJointTypeAction":{"title":""},"GBanner":{"text.access-expire":"Your access to Corel Vector has expired. Unlock continued access to these flexible tools by visiting our website to <a target=\'_blank\' href=\'%link\'>subscribe today</a>"}},"translationsExtended":{},"translationsExtendedTemporary":{},"translationsTemporary":{},"etag":"608b3df09c02803797a2015c99192c33"},{"language":"German","keyValue":1,"abbreviation":"de-DE","isDefault":false,"isAvailable":true,"realName":"Deutsch","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Chinese","keyValue":2,"abbreviation":"zh-CN","isDefault":false,"isAvailable":true,"realName":"簡體中文","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Portuguese","keyValue":3,"abbreviation":"pt-BR","isDefault":false,"isAvailable":true,"realName":"Português","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Spanish","keyValue":4,"abbreviation":"es-ES","isDefault":false,"isAvailable":true,"realName":"Español","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"French","keyValue":5,"abbreviation":"fr-FR","isDefault":false,"isAvailable":true,"realName":"Français","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Polish","keyValue":6,"abbreviation":"pl-PL","isDefault":false,"isAvailable":true,"realName":"Polski","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Russian","keyValue":7,"abbreviation":"ru-RU","isDefault":false,"isAvailable":true,"realName":"Русский","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Turkish","keyValue":8,"abbreviation":"tr-TR","isDefault":false,"isAvailable":true,"realName":"Türkçe","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Czech","keyValue":9,"abbreviation":"cs-CZ","isDefault":false,"isAvailable":true,"realName":"Čeština","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"ChineseTaiwan","keyValue":10,"abbreviation":"zh-TW","isDefault":false,"isAvailable":true,"realName":"繁體中文","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Italian","keyValue":11,"abbreviation":"it-IT","isDefault":false,"isAvailable":true,"realName":"Italiano","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Japanese","keyValue":12,"abbreviation":"ja-JP","isDefault":false,"isAvailable":true,"realName":"日本語","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Dutch","keyValue":13,"abbreviation":"nl-NL","isDefault":false,"isAvailable":true,"realName":"Nederlands","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Swedish","keyValue":14,"abbreviation":"sv-SE","isDefault":false,"isAvailable":true,"realName":"Swedish","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}}]')},function(e){e.exports=JSON.parse('[{"language":"English","keyValue":0,"abbreviation":"en-US","isDefault":true,"isAvailable":true,"realName":"English","translations":{"GLoggedIn":{"text.you-were-logged-in":"You were logged in successfully","text.you-can-close-this-page":"You can close this page and return to the desktop application of Corel Vector."},"GShareRoles":{"text.role-no-access-name":"No Access","text.role-no-access-description":"Don\'t have access to this design","text.role-owner-name":"Owner","text.role-viewer-name":"Viewer","text.role-viewer-description":"Can open and view the design","text.role-viewer-description-alt":"Now you can only view this file.","text.role-viewer-invitation-message":"%name invited you to view","text.role-viewer-invitation-info":"You can View the design, but can’t edit, annotate or export.","text.role-viewer-status":"You can only preview this design.","text.role-developer-name":"Developer","text.role-developer-description":"Can inspect elements, save and export","text.role-developer-description-alt":"Now you can inspect, save and export this file.","text.role-developer-invitation-message":"%name invited you to inspect","text.role-developer-invitation-info":"You can View, Inspect, Export assets or Save a copy of this design.","text.role-developer-status":"You can inspect and save a copy of this design, as well as export.","text.role-reviewer-name":"Reviewer","text.role-reviewer-description":"Can comment on the design and annotate","text.role-reviewer-description-alt":"Now you can view, comment and annotate this file.","text.role-reviewer-invitation-message":"%name invited you to review","text.role-reviewer-invitation-info":"You can View and Comment/Annotate on this design.","text.role-reviewer-status":"You can preview, comment and annotate this design.","text.role-approver-name":"Approver","text.role-approver-description":"Can approve the file","text.role-approver-description-alt":"Now you can view, comment and annotate this file, as well as approve the final revision.","text.role-approver-invitation-message":"%name invited you to review/approve the following design:","text.role-approver-invitation-info":"You can comment and annotate this design as well as approve the final version. Please check the “Comments” docker on the right to find all the necessary tools.","text.role-approver-status":"You can preview, comment and annotate this design, as well as approve the final revision.","text.role-co-author-name":"Co-Author","text.role-co-author-description":"Can edit the design","text.role-co-author-description-alt":"Now you can edit this file","text.role-co-author-invitation-message":"%name invited you to collaborate on","text.role-co-author-invitation-info":"You can edit elements from this design. Your changes will be saved back to original file in real-time.","text.role-co-author-status":"You can add and edit objects in this design, as well as comment and annotate. All changes will be saved in real-time.","text.role-content-editor-name":"Content editor","text.role-content-editor-description":"Can edit selected text content","text.role-content-editor-description-alt":"Now you can edit marked text objects in this file, as well as comment and annotate.","text.role-content-editor-invitation-message":"%name invited you to edit content on the following design:","text.role-content-editor-invitation-info":"You can edit marked text elements from this design. Double-click on marked text elements to edit them. Use the “Finish Editing” button to preview and save your changes.","text.role-content-editor-status":"You can edit marked text objects in this design, as well as comment and annotate.","text.invitation-message-cdss-csl":"%name has shared the following file with you:","text.invitation-info-cdss-csl":"Use these assets in your designs by linking the file to your document from the Assets docker."},"GNotifications":{"email-subject.corporate-license-changed":"Your CorelDRAW.app Corporate License was changed","email-subject.new-comment-annotation":"New comment/annotation (%file)","email-subject.new-reply":"New reply (%file)","email-subject.comment-annotation-assigned":"A comment/annotation was assigned to you (%file)","email-subject.comment-annotation-resolved":"A comment/annotation was resolved (%file)","email-subject.comment-annotation-reopened":"A comment/annotation was reopened (%file)","email-subject.comment-annotation-edited":"A comment/annotation was edited (%file)","email-subject.comment-annotation-deleted":"A comment/annotation was deleted (%file)","email-subject.comment-annotation-mentioned":"You were mentioned in a comment/annotation (%file)","email-subject.reply-assigned":"A reply was assigned to you (%file)","email-subject.reply-edited":"A reply was edited (%file)","email-subject.reply-deleted":"A reply was deleted (%file)","email-subject.reply-mentioned":"You were mentioned in a reply (%file)","email-subject.design-approved":"Design was approved (%file)","email-subject.design-reopened":"Design was reopened (%file)","email-subject.design-in-review":"Design was set back to review (%file)","email-subject.design-updated":"There is an updated version of the design (%file)","email-subject.design-request-approval":"Design approval was requested (%file)","email-subject.design-request-comment":"New request to comment (%file)","email-subject.design-request-access":"New access request (%file)","email-subject.role-changed":"Your role was changed to \\"%role\\" (%file)","email-subject.content-editor-text-changes":"There are new text changes (%file)","email-subject.design-user-request":"%user wants to have the following permissions to your design \\"%file\\": %permissions"},"GReminderDialogFactory":{"text.unknown-date":"(Unknown)","text.remaining-days":"%days days left in your trial","text.remaining-day":"1 day left in your trial","text.expires-today":"Your trial expires today"},"GServerTranslations":{"MAGIC_LINK_INVALID_TOKEN":"Invalid token!","MAGIC_LINK_FAILED_ACTIVATE":"Failed to activate magic link","MAGIC_LINK_FAILED_CREATING":"Failed to create magic link","MAGIC_LINK_FILE_NOT_ALLOW_ACCESS":"You are not allowed to access this design.","MAGIC_LINK_INVALID_INFO":"Invalid information","MAGIC_LINK_EMAIL_SENT":"Magic link was sent to your email account!","MAGIC_LINK_EMAIL_SUBJECT":"Your guest sign-in link (%file)","ACTION_INSERT":"added","ACTION_REMOVE":"deleted","ACTION_EDIT":"edited","ACTION_RESOLVE":"resolved","ACTION_REOPEN":"reopened","ACTION_APPROVE":"approved","ACTION_ASSIGN":"assigned","OPEN_IN_APP":"Open in %app","email-template-share-file-subject":"%from has shared a design with you (%file)","email-template-share-file-open-design":"Open the design","email-template-share-file-invited":"%name invited you to collaborate on","email-template-share-file-learn-more":"Learn more about how collaboration works in Corel Vector User Guide.","email-template-unshare-file-subject":"The file %file was unshared from you","CIRCULAR_REFERENCE_ERROR":"Can’t perform this command, it’s not allowed to paste a folder inside itself","COREL_ERROR_1001":"Error: There are no subscriptions in your records.","COREL_ERROR_1005":"Error: Invalid Credentials.","COREL_ERROR_1008":"Error: Unexpected Error.","COREL_ERROR_1009":"Error: Profile not Found.","DUPLICATE_VALUE":"Already Exists.","INVALID_VALUE":"Invalid Value","INVALID_USERNAME":"Invalid username, it must contain at least 3 characters among numbers, letters and _ or -.","INVALID_FIRST_NAME":"Invalid first name, some characters are not allowed.","INVALID_LAST_NAME":"Invalid last name, some characters are not allowed.","USERNAME_ALREADY_EXISTS":"The username already exists.","INVALID_EMAIL":"Invalid or nonexistent email.","INVALID_PASSWORD_IS_REQUIRED":"A password is required.","INVALID_PASSWORD_TOO_SHORT":"A minimum of %number characters is required for password.","INVALID_PASSWORD_TOO_LONG":"A maximum of %number characters is required for password.","INVALID_PASSWORD_NO_DIGITS":"A password must contain digits.","INVALID_PASSWORD_NO_LOWERCASE":"A password must contain lower case characters.","INVALID_PASSWORD_NO_UPPERCASE":"A password must contain upper case characters.","INVALID_PASSWORD_NO_SPECIAL_CHARACTERS":"A password must contain special characters.","BLOCKED_COUNTRY":"Sorry, this product is not available in your country.","EMAIL_ALREADY_EXISTS":"Email already exists.","EMAIL_NOT_EXISTS":"Email doesn\'t exist.","PASSWORD_NOT_EXISTS":"You don\'t have a password yet. Please click on \\"Forgot your password?\\" to create one.","USER_NOT_EXISTS":"User do not exist.","WRONG_PASSWORD":"The password is wrong.","GREETING":"Howdy","AUTH_GREETING_PLEASE_CLOSE_ALREADY_AUTHENTICATED":"Please close this window, you have been successfully authenticated.","GOODBYE":"Good Bye","PASSWORD_DO_NOT_MATCH":"Passwords do not match.","EMAIL_OR_USERNAME_NOT_EXISTS":"This email or username doesn\'t exist","REACHED_LIMIT_FOR_ACTION":"You have reached the limit for this action in the last %number hours. Please, check your email or try again later","NOT_AUTH":"Not Authorized","NOT_FOUND":"Nothing Here","INSUFFICIENT_PERMISSIONS":"You don\'t have the permission","USER_PASSWORD_DO_NOT_MATCH":"Your email/username and password don\'t match. Please try again!","CONTACT_SUPPORT":"Contact support","NEED_HELP":"Need help?","LOGIN__LOGIN":"Email or Username","LOGIN__EMAIL":"Email","LOGIN__PASSWORD":"Password","LOGIN__PASSWORD_FORGOT":"Forgot password?","LOGIN__REMEMBER_ME":"Remember me","LOGIN__ACTION":"Login","LOGIN__NOT_YET_REGISTERED":"New to Corel Vector? ","LOGIN__SIGNUP_NOW":"Create an Account","LOGIN__OAUTH":"Sign in with","LOGIN__EULA_ACCEPT":"Accept","LOGIN__EULA_DECLINE":"Decline","AVATAR_IMAGE_TOO_BIG":"Please keep image under 100 kB and use PNG or JPG format","SIGNUP__YOUR_USERNAME":"Your Username","SIGNUP__YOUR_NAME":"Your Name","SIGNUP__YOUR_EMAIL_ADDRESS":"Your Email","SIGNUP__YOUR_PASSWORD":"Choose a password (min. 6 chars)","SIGNUP__EMAIL_NOT_GIVEN_AWAY":"We promise not to misuse it!","SIGNUP__PASSWORD":"Password","SIGNUP__START_NOW":"Start Now!","SIGNUP__ALREADY_REGISTERED_QUESTION":"Already registered?","SIGNUP__GO_TO_LOGIN":"Go back to login","CONFIRM_EMAIL__INVALID_TOKEN":"Sorry the email confirmation link is expired","CONFIRM_EMAIL__MAIL_SENT":"An Email has been sent for activating the account. Please also check the SPAM Folder. <br><a href=\\"%serverUrl/resend-confirm-email\\" target=\\"_blank\\">Click here if you want to receive another email!</a>","CONFIRM_EMAIL__MAIL_SUBJECT":"Activate Your Account","CONFIRM_EMAIL__SUCCESS":"Email confirmed successfully","CONFIRM_EMAIL__EMAIL_ALREADY_CONFIRMD":"Your account was already confirmed!","FOLLOWUP_EMAIL__MAIL_SUBJECT":"Activate Your Corel Vector Account","RESEND_CONFIRM_EMAIL__SUBMIT":"Resend Email","RESEND_CONFIRM_EMAIL__HELP":"We will send at this email a link to confirm your email, or","RESEND_CONFIRM_EMAIL__MAIL_SENT":"An email has been sent for activating the account, if it exists. Please also check the SPAM Folder.","RESET_PASSWORD__TITLE":"Reset Password","RESET_PASSWORD__HELP":"We will send at this email a link to reset your password, or","RESET_PASSWORD__INVALID_TOKEN":"Sorry the password reset link is expired","RESET_PASSWORD__REQUEST_RESET":"Reset Password Now","RESET_PASSWORD__REMEMBER":"Remember your password again?","RESET_PASSWORD__GO_TO_LOGIN":"Login","RESET_PASSWORD__MAIL_SENT":"An email has been sent to this account if it exists. Please also check the SPAM folder.","RESET_PASSWORD__SET_NEW_TITLE":"Choose your new password for","RESET_PASSWORD__NEW_PASSWORD":"New password","RESET_PASSWORD__NEW_PASSWORD_CONFIRM":"Confirm new password","RESET_PASSWORD__SUBMIT":"Send request","RESET_PASSWORD__SET_NEW_PASSWORD":"Assign new password","RESET_PASSWORD__SUCCESS":"Your new password was successfully assigned.","RESET_PASSWORD__MAIL_SUBJECT":"Reset your password","RESET_PASSWORD__MAIL_TITLE":"Please follow this link to reset the password for your account:","RESET_PASSWORD__MAIL_ACTION":"Assign new password","CHANGE_PASSWORD_PASSWORDS_DO_NOT_MATCH":"Passwords do not match.","CHANGE_PASSWORD_INVALID_OLD_PASSWORD":"The old password is invalid.","PLEASE_INFORM_BOTH_PASSWORD_OLD_AND_NEW":"Please, inform both new and old password if you want to change it!","SUBSCRIPTIONS_MUST_BE_CANCELED":"There is an active subscription. Subscriptions must be cancelled to proceed it.","CONTENTPROVIDERINTERFACE_ERROR_FETCHING_FILE":"Failed to fetch the file","CONTENTPROVIDERINTERFACE_ERROR_SEARCHING_CONTENT":"Failed to search for content","CONTENTPROVIDERINTERFACE_ERROR_FETCHING_CONTENT_DETAILS":"Failed to retrive the content\'s detail","INVALID_COREL_LOGIN":"Invalid Corel account name/password","COREL_PROFILE_ID_ALREADY_EXISTS":"This Corel account is already assigned to a CorelDRAW account","COREL__LOGIN":"Corel Account Name","COREL__PASSWORD":"Corel Account Password","COREL__ACTION":"Login","COREL__CANCEL_ACTION":"Cancel","ENTERPRISE_INVALID_LOGIN":"This account isn’t recognized for accessing CorelDRAW.app Enterprise. If you are unsure whether or not you\'re eligible, consult your employer\'s IT administrator.","NO_SUBSCRIPTIONS":"There are no subscriptions in your records.","PROFILE_NOT_FOUND":"Corel account doesn\'t exist","UNEXPECTED_ERROR":"Unexpected error","email-template-default-thanks1":"Thanks,","email-template-default-thanks2":"the Corel Vector Team","email-template-default-copyright":"Copyright &copy; %year Corel Corporation. All rights reserved.","email-template-default-facebook-title":"Facebook","email-template-default-instagram-title":"Instagram","email-template-default-twitter-title":"Twitter","email-template-default-facebook-url":"https://www.facebook.com/GravitDesigner/","email-template-default-instagram-url":"https://www.instagram.com/gravitdesigner","email-template-default-twitter-url":"https://twitter.com/gravitdesigner","email-template-confirm-email-welcome1":"Welcome, %name!","email-template-confirm-email-welcome2":"Welcome to Corel Vector, %name!","email-template-confirm-email-msg1":"Thanks for joining</br>&nbsp;Corel Vector","email-template-confirm-email-msg2":"Just one small step before you start. Click the button below to activate your account, and happy designing!","email-template-confirm-email-msg3":"Please activate your account by clicking below.","email-template-confirm-email-successfully-purchased":"You successfully purchased a Corel Vector subscription! Please activate your account by clicking below.","email-template-confirm-email-activate1":"ACTIVATE ACCOUNT","email-template-confirm-email-activate2":"Activate Your Account","email-template-confirm-email-maycopy":"You may copy/paste this link into your browser:","email-template-followup-email-title":"Corel Vector","email-template-followup-email-msg":"You signed up for Corel Vector and you haven\'t activated your account yet! <span class=\'highlight\'><a href=\'%link\'>Activate your account today</a></span> to get designing today.","email-template-followup-email-quote":"“Every time I use @GravitDesigner, my toes curl in excitement. How is this free? If even one person reading this tweet needs an SVG editor, I hope to heaven they check out Corel Vector.” - @rvanarsdale","email-template-followup-email-activate":"Activate My Account","email-template-reset-password-welcome":"Hi, %name!","email-template-reset-password-msg1":"Looks like you forgot your password...","email-template-reset-password-msg2":"... don\'t worry, it happens.","email-template-reset-password-msg3":"To reset your password, click on the button below:","email-template-reset-password-reset":"RESET PASSWORD","email-template-reset-password-maycopy":"You may copy/paste this link into your browser:","email-template-reset-password-msg-footer":"If you didn\'t request to change your password, </br>that\'s ok, just ignore this email.","email-template-notification-new":"new","email-template-notification-action-msg-design":"%name has %action the following design:","email-template-notification-action-msg-design-in-review":"%name has set the design to be reviewed again:","email-template-notification-action-msg-design-request-approval":"%name has requested approval for the following design:","email-template-notification-action-msg-comment-annotation":"%name has %action a comment/annotation in the following design:","email-template-notification-action-msg-mention-comment-annotation":"%name has mentioned you in a comment/annotation in the following design:","email-template-notification-action-msg-replied-comment-annotation":"%name has replied to your comment/annotation in the following design:","email-template-notification-action-msg-reply":"%name has %action a reply in the following design:","email-template-notification-action-msg-mention-reply":"%name has mentioned you in a reply in the following design:","email-template-notification-action-msg-file-updated":"%name has added an updated version of the following design:","email-template-notification-action-msg-role-change":"Your role was changed to %role by %owner. %permissions","email-template-notification-action-msg-corporate-license-change":"You are now in <b>Viewer Mode</b>. You can only preview, open, and print designs. If you are unsure about this change, please contact your IT administrator.","email-template-notification-action-msg-request-commenting":"%name has requested commenting access for the following design:","email-template-notification-action-msg-request-access":"%name has requested viewing access for the following design:","email-template-notification-action-msg-updated-text":"%name has updated text content inside the following design:","email-template-notification-empty-comment":"This annotation doesn\'t have a comment yet","email-template-notification-reopened-comment":"Re-opened","email-template-notification-resolved-comment":"Marked as resolved","email-template-notification-assigned-comment":"Assigned the comment to you","email-template-notification-request-commenting-subtext":"You can allow commenting by changing the assigned role of this user to \\"Reviewer\\" or \\"Approver\\" in the Share dialog.","email-template-notification-request-access-subtext":"You can allow access by adding this user’s email address in the Share dialog and assign an appropriate role.","email-template-notification-updated-version-subtext":"Please download this file though File → Save as… and open it in CorelDRAW.","email-template-notification-recent-updates":"Here are the recent updates to %file:","email-template-notification-edit-changes":"New annotations, replies and mentions:","email-template-notification-action-changes":"Assigned, resolved, reopened comments:","email-template-notification-approval-flow-changes":"Approval flow state changes:","email-template-notification-permission-requests":"Permission requests:","email-template-magiclink-action-msg":"Please click on the link below to access the design as a guest:","email-template-magiclink-subtext":"Please note, that this link will be valid only one week and can be used only once. After that, you need to fill in your information again and send a new sign-in link by clicking on the design link above.","email-template-file-unshare-action-msg":"The file %file was unshared by %name.","email-template-file-unshare-subtext":"You have lost access to it.","ENTERPRISE_ACCOUNTS_DISABLED":"Enterprise accounts are disabled","ENTERPRISE_ACCOUNT_DEACTIVATED":"Your account has been deactivated. Ask your IT for access.","SPECIAL_LINK_NEEDED_ACTIVATE_ACCOUNT":"Special link needed to activate account","LICENSE_ALREADY_REACHED_MAXIMUM_USER_COUNT":"Your license already reached maximum user count","CORPORATE_DOMAIN_DEACTIVATED":"Corporate domain deactivated","CORPORATE_DOMAIN_EXPIRED":"Corporate domain expired","CORPORATE_CUSTOMER_DOESNT_EXIST":"Corporate customer does not exist","CORPORATE_DOMAIN_DOESNT_EXIST":"Corporate domain does not exist","EMPTY_EMAIL":"Empty email","GOOGLE_DRIVE_FAILED_GETTING_CONFIG":"Failed getting Google Drive configuration","COUPON_ALREADY_PRO":"You already have a license!","COUPON_INVALID":"Coupon invalid. Please check your coupon and try again!","COUPON_REDEEMED":"Coupon already redeemed!","COUPON_USAGE_EXCEEDED":"Usage limit exceeded for coupon!","COUPON_FAILED_ACTIVATING":"Failed activating coupon!","COUPON_ACTIVATED":"Coupon activated!","email-template-confirm-email-welcome":"Welcome, %name!","email-template-confirm-email-activate":"ACTIVATE ACCOUNT","magic_link_file_no_access":"The file either can’t be found or it’s not shared with you.","magic_link_email_already_in_use":"%email is already in use, please check if it’s a correct address.","corporate_domain_not_allowed_sign_in_as_guest":"%email belongs to a registered Corporate domain and it\'s not allowed to Sign in as Guest, please use the default login method.","RESTRICT_ASSET_SHARE_ERROR":"This email is not associated with a valid CorelDRAW user. Please check the email and try again.","INVALID_PASSWORD":"A minimum of 6 characters is required for password."},"GLoginDialog":{"text.continue":"Continue","text.continue-to-purchase":"Continue to Purchase","text.continue-to-day-trial":"Continue to %days-day Trial","text.continue-to-free-trial":"Continue to Free Trial","text.title":"Welcome to Corel Vector","text.title-title":"Thank you for choosing Corel Vector,","text.title-title-account-created":"Thank you for choosing Corel Vector!","text.title-subtitle":"please create an account or sign in to continue","text.title-title-anonymous":"Thank you for trying out Corel Vector.","text.title-subtitle-anonymous":"Please create an account or log in to continue.","text.pro-title":"Become a PRO","text.pro-subtitle":"Experience the full power of Corel Vector with advanced features and streamlined workflows tailored for Professionals","text.pro-topic-1":"Desktop apps with offline access","text.pro-topic-2":"Professional export workflow with PDF at 300dpi and advanced SVG options","text.pro-topic-3":"1GB of file storage","text.pro-topic-4":"An ever-growing library of professionally designed Templates, UI Kits, and other design assets","text.pro-topic-5":"CMYK color space, Manage Colors with swatches","text.pro-topic-6":"Make changes in your design quickly through Shared styles, Color swatches, and Master pages","text.pro-topic-7":"Use custom and system fonts","text.pro-topic-8":"and much, much more...","text.pro-learn-more":"Learn more about PRO here","text.pro-offer-title":"Introductory offer valid for 90 DAYS","text.pro-offer-price":"Get Corel Vector now for just %price/Mo.","text.pro-offer-info":"will be billed annually (until %date)","text.pro-info":"Regular price after %date is %price/mo., billed annually. You can cancel your subscription at all times (but no money is refunded and the subscription runs until the end of the period).","text.pro-subinfo":"Learn more about pricing and features of PRO here.","text.placeholder-sign-in-login":"Email or Username","text.placeholder-sign-in-password":"Password","text.sign-in-title":"Log In","text.sign-in-button":"Log In","text.sign-in-login":"Username / Email address","text.sign-in-password":"Password","text.forgot-password":"Forgot your password?","text.or":"or login with","text.sign-facebook":"Facebook","text.sign-google":"Google","text.not-register":"Not registered yet?","text.sign-up":"Create account","text.sign-info":"With your free account you can try out all PRO features for %days days. After the trial period is over, you can continue using the free version of Corel Vector for as long as you like. Enjoy!","text.not-register-subtitle":"Create an account to begin your free trial!","text.create-account-info":"By logging in with my Facebook or Google account<br /> I agree to the <a href=\'https://www.corel.com/terms/\'>Terms of Use</a>. My personal data will be processed in accordance with the descriptions of the <a href=\'%privacy-link\'>Privacy Statement</a>","text.sign-up-title":"Register","text.agree":"I agree to the ","text.terms-use":"Terms of Use","text.eula":"End User License Agreement","text.agreement":"I agree to the %terms-of-use and %end-user-license-agreement.","text.privacy-statement":"My personal data will be processed in accordance with the descriptions of the ","text.privacy-statement-link":"Privacy Statement.","text.info-privacy-statement":"All information is confidential and will not be shared with any 3rd party. ","text.info-privacy-statement-link":"Privacy Policy","text.newsletter":"Get critical software updates and exclusive offers.","text.sign-up-email":"Email Address","text.sign-up-username":"Username","text.sign-up-password":"Password","text.sign-up-password-min-max":"(use %min-number to %max-number chars.)","text.sign-up-password-min":"","text.sign-up-now":"Begin trial","text.sign-up-already":"Already have an account?","text.sign-up-go-back":"Go back to login.","text.reset-password-send":"Send Request","text.welcome-back":"Welcome back, %name!","text.special-offer":"Special offer for you!","text.go-pro":"GO PRO NOW FOR JUST %price/mo.","text.hey":"Hey %name,<br>Thank you for being a Corel Vector user!","text.valid-until":"VALID UNTIL %date","text.buy-now":"BUY NOW for %price.","text.default-info":"Will be billed annually and will auto-renew on %date until you cancel your subscription in your <a data-cmd=\'settings\'>account settings</a>.You will keep that low price on a yearly basis for as long as you auto-renew your subscription.","text.default-info-promo":"Regular price after %date is %price, billed annually.<br><br>You can cancel your subscription at all times (but no money is refunded and the subscription runs until the end of the period).","text.title-xmas-title":"This Holiday Season","text.title-xmas-subtitle":"Unwrap the Gift of a New Design Tool","text.tooltip-trouble-login":"If you have trouble logging in, please contact us at %support-link","text.create-free-account":"Create free account","text.title-create-account":"Create an account to begin your %days day free trial.","text.first-name":"First name","text.last-name":"Last name","text.account-created":"Your account was successfully created!","text.confirmation-account-created":"We have sent a confirmation to <strong>%email</strong>.","text.confirmation-account-created-subtitle":"Please click on the link in the email to activate your account and begin your %days day trial of Corel Vector","text.confirmation-account-created-subtitle-select":"<br><br>To continue, please select an option below:","text.confirmation-account-created-explain-trial":"When the trial is over, you will be able to use the free version of Corel Vector for as long as you like.","text.email-not-received-part-1":"If you didn\'t receive the email, please be sure to check the spam/junk folder of your email client. Otherwise, you can","text.email-not-received-part-2":"send the activation email again here.","text.confirmation-account-created-free":"Start with the free version of Corel Vector now and use your free trial of PRO at a later date.","text.ok":"ok","text.or2":"or","text.try-out-trial-text":"Try Out Corel Vector For %days Days","text.get-started-free-button":"Get Started Free","text.topic-title-1":"Easy to learn and use","text.topic-content-1":"A flexible interface, hundreds of templates, and thousands of stock photos, fonts, graphics, and more make it easy to get started.","text.topic-title-2":"Access from anywhere","text.topic-content-2":"Work across your preferred platforms and touch-enabled devices, and keep your designs safe, synced, and available with unlimited cloud storage.","text.topic-title-3":"Unleash your creativity","text.topic-content-3":"Leverage powerful tools for vector editing, multi-page layout designs, text and typography, non-destructive filters and effects, and so much more.","text.xmas-topic-1":"Click Create FREE Account.","text.xmas-topic-2":"Finish your purchase in two clicks using the in app cart.","text.xmas-topic-3":"Get started using Corel Vector!","text.xmas-header":"Unlock the full power of your<br> photos & harness your creativity with a flexible, professional<br> vector design app.","text.xmas-header-2":"It\'s as easy as 1-2-3!","text.xmas-discount":"<span>Get it Today & Save %discount <mark>— Only %price</mark><span>`","text.pro-info-header":"Dive into fast, flexible, powerful vector editing and graphic design tools.","text.pro-info-header-anonymous":"Corel Vector is a full-featured vector graphic design app that works on ALL platforms.","text.offer-1-title":"Get Started Designing Like a PRO","text.offer-1-subtitle":"Explore these Powerful Tools to Unleash your Creativity.","text.offer-1-topic-1":"Import your existing EPS files and keep working on them.","text.offer-1-topic-2":"Create your personal design system with color swatches and shared styles.","text.offer-1-topic-3":"Employ advanced symbol features like nesting and overrides.","text.offer-1-topic-4":"Discover the powerful Bezigon tool, that makes drawing perfect curves a snap.","text.offer-1-action-title":"Learn more","text.offer-1-buy-now":"BUY NOW","text.learn-more":"LEARN MORE","text.terms-use-privacy-policy-separator":"&","text.privacy-policy":"Privacy Policy","text.select-option":"Please Select an Option to Continue","text.version":"Version: <b>%version</b>"},"GReminderDialog":{"text.pro-expire-title":"Hey %name, just a friendly reminder that your Corel Vector subscription will <strong>expire next %timeunit</strong> on %date.<br>We hope that you are enjoying enhanced PRO experience so far!","text.pro-expire-subtitle":"Extend your subscription","text.pro-expired-title":"Hey %name, your Corel Vector subscription <mark>has now expired.</mark>","text.pro-expired-subtitle":"Renew your subscription","text.trial-expired-title":"Hey %name, your Corel Vector <mark>trial period has expired.</mark>","text.trial-expired-subtitle":"Upgrade to PRO","text.trial-expired-subtitle-promo":"UPGRADE TO PRO WITH THIS LIMITED TIME OFFER","text.default-info":"Will be billed annually and will auto-renew on %date until you cancel your subscription in your <a data-cmd=\'settings\'>account settings</a>.","text.default-info-promo":"Will be billed annually and will auto-renew on %date until you cancel your subscription in your <a data-cmd=\'settings\'>account settings</a>. You will keep that low price on a yearly basis for as long as you auto-renew your subscription.","text.default-subinfo":"You can cancel your subscription at all times (but no money is refunded<br>and the subscription runs until the end of the period).","text.default-subinfo-promo":"Regular price after %date is %price, billed annually. You can cancel your subscription at all times (but no money is refunded and the subscription runs until the end of the period).","text.buy-now":"BUY NOW for %price.","text.buy-now-offline":"BUY NOW","text.pro-dismiss-info":"If you click on \\"Dismiss\\", all <a data-cmd=\'learnmore\'>PRO features</a> will be disabled and your account<br>will be downgraded to the free version.","text.pro-dismiss-subinfo":"You can continue using Corel Vector for free as long as you want. Your Cloud files that exceed the limit of %limit will be kept for one more week before they are deleted permanently. You can renew your subscription at any time at your <a data-cmd=\'settings\'>account settings</a>.","text.pro-dismiss-title":"DISMISS","text.month":"month","text.days":"days","text.continue-as-free":"Continue with Corel Vector Free","text.your-pro-subscription":"Your Corel Vector subscription","text.your-subscription-expires-date":"will <mark>expire on %date</mark>","text.subscription-expires-today":"Your Corel Vector subscription expires <mark>today</mark>","text.subscription-expired":"Your Corel Vector subscription has <mark>expired</mark>","text.trial-expired":"Your Corel Vector <mark>Trial has Expired!</mark>","text.upgrade-screen":"All the design power you need, wherever you are!"},"GCommonNames":{"text.template-header-normal":" ","text.template-header-promo":"LIMITED TIME SPECIAL OFFER","text.template-header-final":"THIS IS YOUR FINAL CHANCE","text.template-header-offline":" ","text.template-title-normal":"GET COREL VECTOR NOW FOR %price.","text.template-title-promo":"GET COREL VECTOR NOW JUST FOR %price.","text.template-title-offline":"GET COREL VECTOR NOW.","text.template-content-normal":"Will be billed annually and will auto-renew on %nextBillingDate until you cancel your subscription in your <a data-cmd=\'settings\'>account settings</a>.","text.template-content-promo":"Will be billed annually and will auto-renew on %nextBillingDate until you cancel your subscription in your <a data-cmd=\'settings\'>account settings</a>.<br>You will keep that low price on a yearly basis for as long as you auto-renew your subscription.","text.template-content-offline":"Will be billed annually and will auto-renew until you cancel your subscription in your <a data-cmd=\'settings\'>account settings.</a>","text.template-footer-promo":"HURRY UP! THIS OFFER <strong>%expire.</strong>","text.template-footer-normal":" ","text.template-footer-offline":" ","text.unknown-user":"Unknown"},"GCorelLoginDialog":{"text.title-title":"Welcome to CorelDRAW.app","text.title-subtitle":"At home, at work, or on the go, this powerful vector illustration web app makes doing what you love more accessible than ever.","text.placeholder-sign-in-login":"Email or Username","text.placeholder-sign-in-password":"Password","text.sign-in-title":"Licensed User Sign-in","text.sign-in-subtitle":"Use your CorelDRAW authentication credentials (version 2019 or newer) to sign in.","text.sign-in-button":"Sign in with license","text.sign-in-login-word":"(Corel customer account user name)","text.sign-in-login":"Email Address","text.sign-in-password":"Password","text.forgot-password":"Forgot your password?","text.or":"or sign in with one click","text.sign-microsoft":"Sign in with Microsoft 365","text.sign-google":"Sign in with Google Workspace","text.sign-up-email":"Email Address","text.reset-password-send":"Send Request","text.sign-up-go-back":"Go back to sign-in.","text.get-started":"Get Started","text.get-started-text":"To sign in to CorelDRAW.app for creating or editing designs, <b>you must have a licensed copy</b> or an active trial of CorelDRAW Graphics Suite or CorelDRAW Technical Suite (version 2019 or newer).","text.learn-more":"LEARN MORE","text.enterprise-sign-in":"CorelDRAW.app Enterprise Sign-in","text.enterprise-sign-in-message":"CorelDRAW.app Enterprise users, sign in with your Microsoft 365 or Google Workspace account.","text.enterprise-login-header":"Welcome to CorelDRAW.app Enterprise","text.enterprise-login-header-subtitle":"At work, or on the go, this powerful vector illustration web app makes doing what you love more accessible than ever.","text.enterprise-login-sign-in":"Sign In","text.enterprise-login-coporate-account":"Use your corporate user account<div class=\'highlight\'>*</div> to sign in to CorelDRAW.app Enterprise","text.enterprise-login-message-1":"<div class=\'highlight\'>*</div> Note: CorelDRAW.app Enterprise sign-in is available exclusively to companies signed-up for a CorelDRAW.app Enterprise License.","text.enterprise-login-message-2":"If you are unsure whether or not you\'re eligible, consult your employer\'s IT administrator","text.enterprise-login-not-enterprise-user":"Not a CorelDRAW.app Enterprise User?","text.enterprise-login-go-to-sign-in":"Go to the CorelDRAW.app sign-in page","text.guest-sign-in-title":"Guest Sign-In","text.guest-sign-in-stubtitle":"Please provide your credentials to identify you in the shared file","text.guest-sign-in-text":"Please use the Guest Sign-In to access the shared design if you don\'t have a licensed copy or active trial of CorelDRAW Graphics Suite or CorelDRAW Technical Suite (version 2019 or newer).","text.guest-sign-in":"Sign in as guest","text.guest-sign-in-first-name":"First Name","text.guest-sign-in-last-name":"Last Name","text.guest-sign-in-send-link":"SEND SIGN-IN LINK","text.guest-sign-in-resend-link":"RESEND SIGN-IN LINK","text.guest-sign-in-node":"<div class=\'highlight\'>*</div> Note: Clicking on the button sends a link to your provided email address, that directly signs you in when clicked.","text.guest-sign-in-send-success":"A link was sent to your email account, please click on it to access this design as a guest.","text.guest-sign-in-send-success-tip":"If you didn\'t receive the email, please be sure to check the spam/junk folder of your email client or Resend Sign-in link below."},"GOfferDialogV1":{"text.offerdialog-v1-title":"Keep creating with fast, powerful, flexible tools that work the way you do.","text.offerdialog-v1-topic-1":"Intuitive vector toolset for sharp and vivid vector graphics at any size","text.offerdialog-v1-topic-2":"Object transformation and distribution tools for snap-to-grid precision","text.offerdialog-v1-topic-3":"Keep your designs safe, synced, and available across platforms with unlimited cloud storage","text.offerdialog-v1-topic-4":"Dozens of non-destructive filters, effects, and image editing tools","text.offerdialog-v1-topic-5":"Accessible everywhere, including touch-enabled devices","text.offerdialog-v1-topic-6":"Powerful text and typography capabilities","text.offerdialog-v1-topic-7":"Easy to learn and use","text.offerdialog-v1-topic-8":"Wide range of format compatibility ensures you can import files from almost anywhere","text.offerdialog-v1-topic-9":"Thousands of templates and stock photos, graphics, fonts, and more","text.offerdialog-v1-default-title":"Corel Vector","text.share-file-sub-title-1":"Stay connected with colleagues and clients as remote work becomes our new normal.","text.share-file-sub-title-2":"Get even more power for designing on the go with CorelDRAW.app PRO:","text.share-file-dashboard-sub-title":"Design on the go with more professional tools:","text.share-file-topic-1":"Share design files with colleagues and clients.","text.share-file-topic-2":"Gather real-time comments and annotations from one or many contributors, right within your shared CorelDRAW design file.","text.share-file-topic-3":"Get unlimited Cloud storage to bring your ideas to life.","text.share-file-topic-4":"Use the web app with any major browser to design and export in CMYK","text.share-file-topic-5":"Export your designs with up to 300dpi and advanced options.","text.share-file-topic-6":"No internet connection required: Use CorelDRAW.app PRO offline.","text.share-file-topic-7":"Design and export in CMYK from start to finish.","text.share-file-title":"Benefit from CorelDRAW design sharing and more with a CorelDRAW.app PRO subscription.","text.share-file-dashboard-title":"Don’t Lose Your Super Power, Keep these Professional Tools","text.loyal-users":"EXCLUSIVE LIMITED TIME OFFER ONLY FOR OUR LOYAL COREL VECTOR USERS!","text.upgrade-tip":"When your access expires, you will also lose access to your projects until you upgrade. Please ensure you download your files before your access expires.","text.footer-promo-title":"Save %discount on Your Corel Vector Subscription when you Buy Now","text.footer-promo-buy":"BUY NOW","text.footer-normal-title":"Go PRO and Get a 1 Year Subscription to Corel Vector for only %price per year.","text.footer-normal-buy":"BUY NOW","text.footer-offline-title":"Go PRO and Get a 1 Year Subscription to Corel Vector.","text.footer-offline-buy":"BUY NOW","text.footer-buy-now":"BUY NOW","text.year":"/year","text.start-trial-button":"Start the 15-day trial now","text.start-trial-caption":"During the trial, you can try all of the features of Corel Vector. Once complete, you will return to the free version.","text.offerdialog-v1-ipad-layout-title":"This feature requires a CorelDRAW.app PRO account","text.offerdialog-v1-ipad-layout-content-title":"CorelDRAW.app’s PRO features are made for design professionals","text.offerdialog-v1-ipad-layout-topic-1":"Get unlimited cloud storage.","text.offerdialog-v1-ipad-layout-topic-2":"Export your designs at up to 300dpi and with advanced options.","text.offerdialog-v1-ipad-layout-topic-3":"Reuse existing elements with symbols and share styles.","text.offerdialog-v1-ipad-layout-topic-4":"Design and export in CMYK from start to finish.","text.offerdialog-v1-ipad-layout-topic-5":"Access system/device fonts or import your own fonts.","text.offerdialog-v1-ipad-layout-topic-6":"No internet connection required: Use CorelDRAW.app offline.","text.offerdialog-v1-ipad-layout-topic-7":"Import your existing EPS files."},"GOfflineDialog":{"text.have-questions":"If you have questions, please <a href=\'%link\' target=\'_blank\'>contact us here.</a>","text.retry-connection":"Hey %name, in order to complete your request we need an internet connection. Please <strong>connect your device</strong> and click on \\"Retry.\\"","text.retry":"Retry","text.cancel":"Cancel"},"GPaywallDialog":{"text.offerdialog-v1-subscribe-title-1":"To use this or other PRO features","text.offerdialog-v1-subscribe-title-2":"<mark>you have to subscribe</mark> to Corel Vector","text.offerdialog-v1-subscribe-share-file-title-1":"To share design files with clients and colleagues","text.offerdialog-v1-subscribe-share-file-title-2":"<mark>you have to subscribe</mark> to CorelDRAW.app PRO","text.offerdialog-v1-subscribe-share-file-dashboard-title":"To use this or other PRO features you have to <mark>subscribe</mark> to CorelDRAW.app PRO","text.remaining-days":"Your access to Corel Vector expires in <mark>%days days</mark>","text.remaining-day":"Your access to Corel Vector expires in <mark>%day day</mark>","text.expires-today":"Your access to Corel Vector expires today","text.trial-message1":"<strong>Unleash your creativity</strong> with a large set of templates and icons in the libraries, choose from a wide selection of fonts or bring in your own typefaces. Over 30 effects and 20 blend modes will give you all the freedom for your next creative project.","text.trial-message2":"<strong>Revolutionize the way you work</strong> with powerful anchoring for responsive layouts or advanced vector tools for your next icon or logo design. Symbols, shared styles and color swatches let you reuse existing elements to create your own design system.","text.trial-message-3":"Go PRO before it\'s too late.","text.pretrial-title":"Get Started Designing Like a PRO","text.pretrial-subtitle":"Explore these Powerful Tools to Unleash your Creativity.","text.learn-more":"Learn more","text.access-message1":"<strong>Upgrade today</strong> and secure continued access to this web-based vector graphics app that empowers you to create on any device. Keep your designs safe, synced, and available across platforms with unlimited storage space in the cloud."},"GSharePointModel":{"error.refresh-token-invalid":"Please, relogin to get access to the SharePoint"},"GGoogleDrive":{"text.all-files-tab-title":"All files","text.gravit-designer-tab-title":"Corel Vector files","text.team-drives-tab-title":"Team Drives files"},"SearchWidget":{"text.no-exact-matches-search-term":"No exact matches for “%searchTerm”. Showing results for similar words or characters instead."}},"translationsExtended":{},"translationsExtendedTemporary":{},"translationsTemporary":{},"etag":"20c27defafb5102a26d035ad1194634b"},{"language":"German","keyValue":1,"abbreviation":"de-DE","isDefault":false,"isAvailable":true,"realName":"Deutsch","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Chinese","keyValue":2,"abbreviation":"zh-CN","isDefault":false,"isAvailable":true,"realName":"中文","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Portuguese","keyValue":3,"abbreviation":"pt-BR","isDefault":false,"isAvailable":true,"realName":"Português","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Spanish","keyValue":4,"abbreviation":"es-ES","isDefault":false,"isAvailable":true,"realName":"Español","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"French","keyValue":5,"abbreviation":"fr-FR","isDefault":false,"isAvailable":true,"realName":"Français","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Polish","keyValue":6,"abbreviation":"pl-PL","isDefault":false,"isAvailable":true,"realName":"Polski","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Russian","keyValue":7,"abbreviation":"ru-RU","isDefault":false,"isAvailable":true,"realName":"Русский","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Turkish","keyValue":8,"abbreviation":"tr-TR","isDefault":false,"isAvailable":true,"realName":"Türkçe","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Czech","keyValue":9,"abbreviation":"cs-CZ","isDefault":false,"isAvailable":true,"realName":"Čeština","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"ChineseTaiwan","keyValue":10,"abbreviation":"zh-TW","isDefault":false,"isAvailable":true,"realName":"中文 Taiwan","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Italian","keyValue":11,"abbreviation":"it-IT","isDefault":false,"isAvailable":true,"realName":"Italiano","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Japanese","keyValue":12,"abbreviation":"ja-JP","isDefault":false,"isAvailable":true,"realName":"日本語","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Dutch","keyValue":13,"abbreviation":"nl-NL","isDefault":false,"isAvailable":true,"realName":"Nederlands","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Swedish","keyValue":14,"abbreviation":"sv-SE","isDefault":false,"isAvailable":true,"realName":"Swedish","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}}]')},function(e){e.exports=JSON.parse("[]")},function(e,t,n){var o={"./glangulargradientshader":349,"./glangulargradientshader.js":349,"./glbendblurshader":302,"./glbendblurshader.js":302,"./glbendshader":458,"./glbendshader.js":458,"./glblendshader":331,"./glblendshader.js":331,"./glbloomshader":459,"./glbloomshader.js":459,"./glblurshader":193,"./glblurshader.js":193,"./glbrightnesscontrastshader":460,"./glbrightnesscontrastshader.js":460,"./glbulgepinchshader":461,"./glbulgepinchshader.js":461,"./glclipblurshader":350,"./glclipblurshader.js":350,"./glcoloradjustshader":462,"./glcoloradjustshader.js":462,"./glcolorhalftoneshader":463,"./glcolorhalftoneshader.js":463,"./gldenoiseshader":464,"./gldenoiseshader.js":464,"./gldotscreenshader":465,"./gldotscreenshader.js":465,"./gldrunkshader":466,"./gldrunkshader.js":466,"./gledgeworkshader":467,"./gledgeworkshader.js":467,"./glfisheyeshader":468,"./glfisheyeshader.js":468,"./glhexagonalshader":469,"./glhexagonalshader.js":469,"./glhuesaturationshader":470,"./glhuesaturationshader.js":470,"./glinkshader":471,"./glinkshader.js":471,"./glinnerglowshader":472,"./glinnerglowshader.js":472,"./gllensblurshader":473,"./gllensblurshader.js":473,"./glnoiseshader":474,"./glnoiseshader.js":474,"./glouterglowshader":475,"./glouterglowshader.js":475,"./glrecolourshader":476,"./glrecolourshader.js":476,"./glsepiashader":477,"./glsepiashader.js":477,"./glsketchshader":478,"./glsketchshader.js":478,"./glstrokelayershader":479,"./glstrokelayershader.js":479,"./glswirlshader":480,"./glswirlshader.js":480,"./gltiltshiftshader":481,"./gltiltshiftshader.js":481,"./gltoonshader":482,"./gltoonshader.js":482,"./gltrueblurshader":483,"./gltrueblurshader.js":483,"./glunsharpmaskshader":484,"./glunsharpmaskshader.js":484,"./glvibranceshader":485,"./glvibranceshader.js":485,"./glvignetteshader":486,"./glvignetteshader.js":486,"./glwarpshader":487,"./glwarpshader.js":487,"./glzoomblurshader":488,"./glzoomblurshader.js":488};function i(e){var t=a(e);return n(t)}function a(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=a,e.exports=i,i.id=796},,function(e,t,n){(function(e,o){var i=n(553),a=n(644).spawn,r=n(167);t.XMLHttpRequest=function(){"use strict";var t,s,l=this,c=n(554),d=n(555),u={},p=!1,g={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},h={},f={},m=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],y=["TRACE","TRACK","CONNECT"],v=!1,_=!1,b={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null,this.withCredentials=!1;this.open=function(e,t,n,o,i){if(this.abort(),_=!1,!function(e){return e&&-1===y.indexOf(e)}(e))throw new Error("SecurityError: Request method not allowed");u={method:e,url:t.toString(),async:"boolean"!=typeof n||n,user:o||null,password:i||null},w(this.OPENED)},this.setDisableHeaderCheck=function(e){p=e},this.setRequestHeader=function(e,t){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(function(e){return p||e&&-1===m.indexOf(e.toLowerCase())}(e)){if(v)throw new Error("INVALID_STATE_ERR: send flag is true");e=f[e.toLowerCase()]||e,f[e.toLowerCase()]=e,h[e]=h[e]?h[e]+", "+t:t}else console.warn('Refused to set unsafe header "'+e+'"')},this.getResponseHeader=function(e){return"string"==typeof e&&this.readyState>this.OPENED&&s&&s.headers&&s.headers[e.toLowerCase()]&&!_?s.headers[e.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||_)return"";var e="";for(var t in s.headers)"set-cookie"!==t&&"set-cookie2"!==t&&(e+=t+": "+s.headers[t]+"\r\n");return e.substr(0,e.length-2)},this.getRequestHeader=function(e){return"string"==typeof e&&f[e.toLowerCase()]?h[f[e.toLowerCase()]]:""},this.send=function(n){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(v)throw new Error("INVALID_STATE_ERR: send has already been called");var p,m=!1,y=!1,b=i.parse(u.url);switch(b.protocol){case"https:":m=!0;case"http:":p=b.hostname;break;case"file:":y=!0;break;case void 0:case null:case"":p="localhost";break;default:throw new Error("Protocol not supported.")}if(y){if("GET"!==u.method)throw new Error("XMLHttpRequest: Only GET method is supported");if(u.async)r.readFile(b.pathname,"utf8",(function(e,t){e?l.handleError(e):(l.status=200,l.responseText=t,w(l.DONE))}));else try{this.responseText=r.readFileSync(b.pathname,"utf8"),this.status=200,w(l.DONE)}catch(e){this.handleError(e)}}else{var C=b.port||(m?443:80),x=b.pathname+(b.search?b.search:"");for(var S in g)f[S.toLowerCase()]||(h[S]=g[S]);if(h.Host=p,m&&443===C||80===C||(h.Host+=":"+b.port),u.user){void 0===u.password&&(u.password="");var E=new e(u.user+":"+u.password);h.Authorization="Basic "+E.toString("base64")}"GET"===u.method||"HEAD"===u.method?n=null:n?(h["Content-Length"]=e.isBuffer(n)?n.length:e.byteLength(n),h["Content-Type"]||(h["Content-Type"]="text/plain;charset=UTF-8")):"POST"===u.method&&(h["Content-Length"]=0);var A={host:p,port:C,path:x,method:u.method,headers:h,agent:!1,withCredentials:l.withCredentials};if(_=!1,u.async){var T=m?d.request:c.request;v=!0,l.dispatchEvent("readystatechange");var G=function(e){l.handleError(e)};t=T(A,(function e(n){if(301!==(s=n).statusCode&&302!==s.statusCode&&303!==s.statusCode&&307!==s.statusCode)s.setEncoding("utf8"),w(l.HEADERS_RECEIVED),l.status=s.statusCode,s.on("data",(function(e){e&&(l.responseText+=e),v&&w(l.LOADING)})),s.on("end",(function(){v&&(w(l.DONE),v=!1)})),s.on("error",(function(e){l.handleError(e)}));else{u.url=s.headers.location;var o=i.parse(u.url);p=o.hostname;var a={hostname:o.hostname,port:o.port,path:o.path,method:303===s.statusCode?"GET":u.method,headers:h,withCredentials:l.withCredentials};(t=T(a,e).on("error",G)).end()}})).on("error",G),n&&t.write(n),t.end(),l.dispatchEvent("loadstart")}else{var P=".node-xmlhttprequest-content-"+o.pid,D=".node-xmlhttprequest-sync-"+o.pid;r.writeFileSync(D,"","utf8");for(var L="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(m?"s":"")+".request;var options = "+JSON.stringify(A)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+P+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText}}), 'utf8');fs.unlinkSync('"+D+"');});response.on('error', function(error) {fs.writeFileSync('"+P+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+D+"');});}).on('error', function(error) {fs.writeFileSync('"+P+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+D+"');});"+(n?"req.write('"+JSON.stringify(n).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",I=a(o.argv[0],["-e",L]);r.existsSync(D););var k=JSON.parse(r.readFileSync(P,"utf8"));I.stdin.end(),r.unlinkSync(P),k.err?l.handleError(k.err):(s=k.data,l.status=k.data.statusCode,l.responseText=k.data.text,w(l.DONE))}}},this.handleError=function(e){this.status=0,this.statusText=e,this.responseText=e.stack,_=!0,w(this.DONE),this.dispatchEvent("error")},this.abort=function(){t&&(t.abort(),t=null),h=g,this.status=0,this.responseText="",this.responseXML="",_=!0,this.readyState===this.UNSENT||this.readyState===this.OPENED&&!v||this.readyState===this.DONE||(v=!1,w(this.DONE)),this.readyState=this.UNSENT,this.dispatchEvent("abort")},this.addEventListener=function(e,t){e in b||(b[e]=[]),b[e].push(t)},this.removeEventListener=function(e,t){e in b&&(b[e]=b[e].filter((function(e){return e!==t})))},this.dispatchEvent=function(e){if("function"==typeof l["on"+e]&&l["on"+e](),e in b)for(var t=0,n=b[e].length;t<n;t++)b[e][t].call(l)};var w=function(e){e!=l.LOADING&&l.readyState===e||(l.readyState=e,(u.async||l.readyState<l.OPENED||l.readyState===l.DONE)&&l.dispatchEvent("readystatechange"),l.readyState!==l.DONE||_||(l.dispatchEvent("load"),l.dispatchEvent("loadend")))}}}).call(this,n(207).Buffer,n(171))},,function(e){e.exports=JSON.parse('[{"language":"English","keyValue":0,"abbreviation":"en-US","isDefault":true,"isAvailable":true,"realName":"English","translations":{"GBCP47LanguageTags":{"text.lang.abq":"Abaza","text.lang.ab":"Abkhazian","text.lang.ach":"Acholi","text.lang.acr":"Achi","text.lang.ady":"Adyghe","text.lang.af":"Afrikaans","text.lang.aa":"Afar","text.lang.ahg":"Agaw","text.lang.aio":"Aiton","text.lang.ak":"Akan","text.lang.x-hbotakb":"Batak Angkola","text.lang.gsw":"Alsatian","text.lang.alt":"Altai","text.lang.am":"Amharic","text.lang.ang":"Anglo-Saxon","text.lang.und-fonnapa":"Phonetic transcription—Americanist conventions","text.lang.ar":"Arabic","text.lang.an":"Aragonese","text.lang.aiw":"Aari","text.lang.rki":"Rakhine","text.lang.as":"Assamese","text.lang.ast":"Asturian","text.lang.ath":"Athapaskan languages","text.lang.x-hbotavn":"Avatime","text.lang.av":"Avar","text.lang.awa":"Awadhi","text.lang.ay":"Aymara","text.lang.azb":"Torki","text.lang.az":"Azerbaijani","text.lang.bfq":"Badaga","text.lang.bad":"Banda","text.lang.bfy":"Baghelkhandi","text.lang.x-hbotbal":"Balkar","text.lang.ban":"Balinese","text.lang.bar":"Bavarian","text.lang.bci":"Baulé","text.lang.bbc":"Batak Toba","text.lang.ber":"Berber","text.lang.bcq":"Bench","text.lang.x-hbotbcr":"Bible Cree","text.lang.bdy":"Bandjalang","text.lang.be":"Belarussian","text.lang.bem":"Bemba","text.lang.bn":"Bengali","text.lang.bgc":"Haryanvi","text.lang.bgq":"Bagri","text.lang.bg":"Bulgarian","text.lang.bhb":"Bhili","text.lang.bho":"Bhojpuri","text.lang.bik":"Bikol","text.lang.byn":"Bilen","text.lang.bi":"Bislama","text.lang.bjj":"Kanauji","text.lang.bla":"Blackfoot","text.lang.bal":"Baluchi","text.lang.blk":"Pa’o Karen","text.lang.bjt":"Balante","text.lang.bft":"Balti","text.lang.bm":"Bambara (Bamanankan)","text.lang.bai":"Bamileke","text.lang.bs":"Bosnian","text.lang.bpy":"Bishnupriya Manipuri","text.lang.br":"Breton","text.lang.brh":"Brahui","text.lang.bra":"Braj Bhasha","text.lang.my":"Burmese","text.lang.brx":"Bodo","text.lang.ba":"Bashkir","text.lang.bsk":"Burushaski","text.lang.x-hbotbtd":"Batak Dairi (Pakpak)","text.lang.beb":"Beti","text.lang.x-hbotbtk":"Batak languages","text.lang.x-hbotbtm":"Batak Mandailing","text.lang.bts":"Batak Simalungun","text.lang.x-hbotbtx":"Batak Karo","text.lang.x-hbotbtz":"Batak Alas-Kluet","text.lang.bug":"Bugis","text.lang.byv":"Medumba","text.lang.cak":"Kaqchikel","text.lang.ca":"Catalan","text.lang.cbk":"Zamboanga Chavacano","text.lang.cco":"Chinantec","text.lang.ceb":"Cebuano","text.lang.cgg":"Chiga","text.lang.ch":"Chamorro","text.lang.ce":"Chechen","text.lang.sgw":"Chaha Gurage","text.lang.hne":"Chattisgarhi","text.lang.ny":"Chichewa (Chewa, Nyanja)","text.lang.ckt":"Chukchi","text.lang.chk":"Chuukese","text.lang.cho":"Choctaw","text.lang.chp":"Chipewyan","text.lang.chr":"Cherokee","text.lang.cv":"Chuvash","text.lang.chy":"Cheyenne","text.lang.cja":"Western Cham","text.lang.cjm":"Eastern Cham","text.lang.swb":"Comorian","text.lang.cop":"Coptic","text.lang.kw":"Cornish","text.lang.co":"Corsican","text.lang.crp":"Creoles","text.lang.cr":"Cree","text.lang.crx":"Carrier","text.lang.crh":"Crimean Tatar","text.lang.csb":"Kashubian","text.lang.cu":"Church Slavonic","text.lang.cs":"Czech","text.lang.ctg":"Chittagonian","text.lang.cuk":"San Blas Kuna","text.lang.x-hbotdag":"Dagbani","text.lang.da":"Danish","text.lang.dar":"Dargwa","text.lang.dax":"Dayi","text.lang.cwd":"Woods Cree","text.lang.de":"German","text.lang.dgo":"Dogri (individual language)","text.lang.doi":"Dogri (macrolanguage)","text.lang.dhg":"Dhangu","text.lang.x-hbotdhv":"Divehi (Dhivehi, Maldivian)","text.lang.diq":"Dimli","text.lang.dv":"Divehi (Dhivehi, Maldivian)","text.lang.dje":"Zarma","text.lang.djr":"Djambarrpuyngu","text.lang.ada":"Dangme","text.lang.dnj":"Dan","text.lang.din":"Dinka","text.lang.prs":"Dari","text.lang.dwu":"Dhuwal","text.lang.dng":"Dungan","text.lang.dz":"Dzongkha","text.lang.igb":"Ebira","text.lang.crj":"Eastern Cree","text.lang.bin":"Edo","text.lang.efi":"Efik","text.lang.el":"Greek","text.lang.emk":"Eastern Maninkakan","text.lang.en":"English","text.lang.myv":"Erzya","text.lang.es":"Spanish","text.lang.esu":"Central Yupik","text.lang.et":"Estonian","text.lang.eu":"Basque","text.lang.evn":"Evenki","text.lang.eve":"Even","text.lang.ee":"Ewe","text.lang.acf":"French Antillean","text.lang.fan":"Fang","text.lang.fa":"Persian","text.lang.fat":"Fanti","text.lang.fi":"Finnish","text.lang.fj":"Fijian","text.lang.vls":"Dutch (Flemish)","text.lang.fmp":"Fe’fe’","text.lang.enf":"Forest Enets","text.lang.fon":"Fon","text.lang.fo":"Faroese","text.lang.fr":"French","text.lang.frc":"Cajun French","text.lang.fy":"Frisian","text.lang.fur":"Friulian","text.lang.frp":"Arpitan","text.lang.fuf":"Futa","text.lang.ff":"Fulah","text.lang.fuv":"Nigerian Fulfulde","text.lang.gaa":"Ga","text.lang.gd":"Scottish Gaelic (Gaelic)","text.lang.gag":"Gagauz","text.lang.gl":"Galician","text.lang.x-hbotgar":"Garshuni","text.lang.gbm":"Garhwali","text.lang.gez":"Geez","text.lang.gih":"Githabul","text.lang.niv":"Gilyak","text.lang.gil":"Kiribati (Gilbertese)","text.lang.gkp":"Kpelle (Guinea)","text.lang.glk":"Gilaki","text.lang.guk":"Gumuz","text.lang.gnn":"Gumatj","text.lang.gog":"Gogo","text.lang.gon":"Gondi","text.lang.kl":"Greenlandic","text.lang.grt":"Garo","text.lang.gn":"Guarani","text.lang.guc":"Wayuu","text.lang.guf":"Gupapuyngu","text.lang.gu":"Gujarati","text.lang.guz":"Gusii","text.lang.ht":"Haitian (Haitian Creole)","text.lang.cfm":"Halam (Falam Chin)","text.lang.hoj":"Harauti","text.lang.ha":"Hausa","text.lang.haw":"Hawaiian","text.lang.hay":"Haya","text.lang.haz":"Hazaragi","text.lang.amf":"Hammer-Banna","text.lang.hz":"Herero","text.lang.hil":"Hiligaynon","text.lang.hi":"Hindi","text.lang.mrj":"High Mari","text.lang.hmn":"Hmong","text.lang.ho":"Hiri Motu","text.lang.hnd":"Hindko","text.lang.hoc":"Ho","text.lang.har":"Harari","text.lang.hr":"Croatian","text.lang.hu":"Hungarian","text.lang.hyw":"Armenian","text.lang.hy":"Armenian East","text.lang.iba":"Iban","text.lang.ibb":"Ibibio","text.lang.ig":"Igbo","text.lang.io":"Ido","text.lang.ijo":"Ijo languages","text.lang.ie":"Interlingue","text.lang.ilo":"Ilokano","text.lang.ia":"Interlingua","text.lang.id":"Indonesian","text.lang.inh":"Ingush","text.lang.iu":"Inuktitut","text.lang.ik":"Inupiat","text.lang.und-fonipa":"Phonetic transcription—IPA conventions","text.lang.ga":"Irish","text.lang.ga-latg":"Irish Traditional","text.lang.is":"Icelandic","text.lang.smn":"Inari Sami","text.lang.it":"Italian","text.lang.he":"Hebrew","text.lang.jam":"Jamaican Creole","text.lang.ja":"Japanese","text.lang.jv":"Javanese","text.lang.jbo":"Lojban","text.lang.jct":"Krymchak","text.lang.yi":"Yiddish","text.lang.lad":"Ladino","text.lang.dyu":"Jula","text.lang.kbd":"Kabardian","text.lang.kab":"Kabyle","text.lang.kfr":"Kachchi","text.lang.kln":"Kalenjin","text.lang.kn":"Kannada","text.lang.krc":"Karachay","text.lang.ka":"Georgian","text.lang.x-hbotkaw":"Kawi (Old Javanese)","text.lang.kk":"Kazakh","text.lang.kde":"Makonde","text.lang.kea":"Kabuverdianu (Crioulo)","text.lang.ktb":"Kebena","text.lang.kek":"Kekchi","text.lang.und-geok":"Khutsuri Georgian","text.lang.kjh":"Khakass","text.lang.kca":"Khanty-Kazim","text.lang.km":"Khmer","text.lang.x-hbotkhs":"Khanty-Shurishkar","text.lang.x-hbotkht":"Khamti Shan","text.lang.x-hbotkhv":"Khanty-Vakhi","text.lang.khw":"Khowar","text.lang.ki":"Kikuyu (Gikuyu)","text.lang.ky":"Kirghiz (Kyrgyz)","text.lang.kqs":"Kisii","text.lang.kiu":"Kirmanjki","text.lang.kjd":"Southern Kiwai","text.lang.kjp":"Eastern Pwo Karen","text.lang.kjz":"Bumthangkha","text.lang.kex":"Kokni","text.lang.xal":"Kalmyk","text.lang.kam":"Kamba","text.lang.kfy":"Kumaoni","text.lang.kmw":"Komo","text.lang.kxc":"Komso","text.lang.kmz":"Khorasani Turkic","text.lang.kr":"Kanuri","text.lang.kfa":"Kodagu","text.lang.okm":"Korean Old Hangul","text.lang.kok":"Konkani","text.lang.kv":"Komi","text.lang.ktu":"Kikongo","text.lang.kg":"Kongo","text.lang.koi":"Komi-Permyak","text.lang.ko":"Korean","text.lang.kos":"Kosraean","text.lang.kpv":"Komi-Zyrian","text.lang.kpe":"Kpelle","text.lang.kri":"Krio","text.lang.kaa":"Karakalpak","text.lang.krl":"Karelian","text.lang.kdr":"Karaim","text.lang.kar":"Karen","text.lang.kqy":"Koorete","text.lang.ks":"Kashmiri","text.lang.ksh":"Ripuarian","text.lang.kha":"Khasi","text.lang.sjd":"Kildin Sami","text.lang.ksw":"S’gaw Karen","text.lang.kj":"Kuanyama","text.lang.kxu":"Kui","text.lang.kfx":"Kulvi","text.lang.kum":"Kumyk","text.lang.ku":"Kurdish","text.lang.kru":"Kurukh","text.lang.kdt":"Kuy","text.lang.kpy":"Koryak","text.lang.kyu":"Western Kayah","text.lang.lld":"Ladin","text.lang.bfu":"Lahuli","text.lang.lbe":"Lak","text.lang.lmn":"Lambani","text.lang.lo":"Lao","text.lang.la":"Latin","text.lang.lzz":"Laz","text.lang.x-hbotlcr":"L-Cree","text.lang.lbj":"Ladakhi","text.lang.x-hbotlef":"Lelemi","text.lang.lez":"Lezgi","text.lang.lij":"Ligurian","text.lang.li":"Limburgish","text.lang.ln":"Lingala","text.lang.lis":"Lisu","text.lang.ljp":"Lampung","text.lang.lki":"Laki","text.lang.mhr":"Low Mari","text.lang.lif":"Limbu","text.lang.lmo":"Lombard","text.lang.ngl":"Lomwe","text.lang.lom":"Loma","text.lang.bqi":"Luri","text.lang.dsb":"Lower Sorbian","text.lang.smj":"Lule Sami","text.lang.lt":"Lithuanian","text.lang.lb":"Luxembourgish","text.lang.lua":"Luba-Lulua","text.lang.lu":"Luba-Katanga","text.lang.lg":"Ganda","text.lang.luy":"Luyia","text.lang.luo":"Luo","text.lang.lv":"Latvian","text.lang.mad":"Madura","text.lang.mag":"Magahi","text.lang.mh":"Marshallese","text.lang.mpe":"Majang","text.lang.vmw":"Makhuwa","text.lang.ml":"Malayalam","text.lang.mam":"Mam","text.lang.mns":"Mansi","text.lang.arn":"Mapudungun","text.lang.mr":"Marathi","text.lang.mwr":"Marwari","text.lang.kmb":"Mbundu","text.lang.mbo":"Mbo","text.lang.mnc":"Manchu","text.lang.crm":"Moose Cree","text.lang.men":"Mende","text.lang.mdr":"Mandar","text.lang.mym":"Me’en","text.lang.mer":"Meru","text.lang.mfa":"Pattani Malay","text.lang.mfe":"Morisyen","text.lang.min":"Minangkabau","text.lang.lus":"Mizo","text.lang.mk":"Macedonian","text.lang.mak":"Makasar","text.lang.mkw":"Kituba","text.lang.mdy":"Male","text.lang.mg":"Malagasy","text.lang.mlq":"Malinke","text.lang.x-hbotmlr":"Malayalam Reformed","text.lang.ms":"Malay","text.lang.mnk":"Mandinka","text.lang.mn":"Mongolian","text.lang.mni":"Manipuri","text.lang.man":"Maninka","text.lang.gv":"Manx","text.lang.moh":"Mohawk","text.lang.mdf":"Moksha","text.lang.ro-md":"Moldavian","text.lang.mnw":"Mon","text.lang.ary":"Moroccan","text.lang.mos":"Mossi","text.lang.mi":"Maori","text.lang.mai":"Maithili","text.lang.mt":"Maltese","text.lang.unr":"Mundari","text.lang.mus":"Muscogee","text.lang.mwl":"Mirandese","text.lang.mww":"Hmong Daw","text.lang.myn":"Mayan","text.lang.mzn":"Mazanderani","text.lang.nag":"Naga-Assamese","text.lang.nah":"Nahuatl","text.lang.gld":"Nanai","text.lang.nap":"Neapolitan","text.lang.nsk":"Naskapi","text.lang.na":"Nauruan","text.lang.nv":"Navajo","text.lang.csw":"N-Cree","text.lang.nd":"Ndebele","text.lang.ndc":"Ndau","text.lang.ng":"Ndonga","text.lang.nds":"Low Saxon","text.lang.ne":"Nepali","text.lang.new":"Newari","text.lang.nga":"Ngbaka","text.lang.x-hbotngr":"Nagari","text.lang.x-hbotnhc":"Norway House Cree","text.lang.njz":"Nisi","text.lang.niu":"Niuean","text.lang.nyn":"Nyankole","text.lang.nqo":"N’Ko","text.lang.nl":"Dutch","text.lang.noe":"Nimadi","text.lang.nog":"Nogai","text.lang.no":"Norwegian","text.lang.nov":"Novial","text.lang.se":"Northern Sami","text.lang.nso":"Northern Sotho","text.lang.nod":"Northern Tai","text.lang.eo":"Esperanto","text.lang.nym":"Nyamwezi","text.lang.nn":"Norwegian Nynorsk (Nynorsk, Norwegian)","text.lang.nza":"Mbembe Tigon","text.lang.oc":"Occitan","text.lang.ojs":"Oji-Cree","text.lang.oj":"Ojibway","text.lang.or":"Odia (formerly Oriya)","text.lang.om":"Oromo","text.lang.os":"Ossetian","text.lang.sam":"Palestinian Aramaic","text.lang.pag":"Pangasinan","text.lang.pi":"Pali","text.lang.pam":"Pampangan","text.lang.pa":"Punjabi","text.lang.plp":"Palpa","text.lang.pap":"Papiamentu","text.lang.ps":"Pashto","text.lang.pau":"Palauan","text.lang.pcc":"Bouyei","text.lang.pcd":"Picard","text.lang.pdc":"Pennsylvania German","text.lang.el-polyton":"Polytonic Greek","text.lang.phk":"Phake","text.lang.pih":"Norfolk","text.lang.fil":"Filipino","text.lang.pce":"Palaung","text.lang.pl":"Polish","text.lang.pms":"Piemontese","text.lang.pnb":"Western Panjabi","text.lang.poh":"Pocomchi","text.lang.pon":"Pohnpeian","text.lang.pro":"Provençal / Old Provençal","text.lang.pt":"Portuguese","text.lang.pwo":"Western Pwo Karen","text.lang.bgr":"Chin","text.lang.quc":"K’iche’","text.lang.quh":"Quechua (Bolivia)","text.lang.qu":"Quechua","text.lang.qvi":"Quechua (Ecuador)","text.lang.qwh":"Quechua (Peru)","text.lang.raj":"Rajasthani","text.lang.rar":"Rarotongan","text.lang.bxr":"Russian Buriat","text.lang.atj":"R-Cree","text.lang.rej":"Rejang","text.lang.ria":"Riang","text.lang.rif":"Tarifit","text.lang.rit":"Ritarungo","text.lang.rkw":"Arakwal","text.lang.rm":"Romansh","text.lang.rmy":"Vlax Romani","text.lang.ro":"Romanian","text.lang.rom":"Romany","text.lang.rue":"Rusyn","text.lang.rtm":"Rotuman","text.lang.rw":"Kinyarwanda","text.lang.rn":"Rundi","text.lang.rup":"Aromanian","text.lang.ru":"Russian","text.lang.sck":"Sadri","text.lang.sa":"Sanskrit","text.lang.sas":"Sasak","text.lang.sat":"Santali","text.lang.x-hbotsay":"Sayisi","text.lang.scn":"Sicilian","text.lang.sco":"Scots","text.lang.scs":"North Slavey","text.lang.xan":"Sekota","text.lang.sel":"Selkup","text.lang.sga":"Old Irish","text.lang.sg":"Sango","text.lang.sgs":"Samogitian","text.lang.shi":"Tachelhit","text.lang.shn":"Shan","text.lang.sjo":"Sibe","text.lang.sid":"Sidamo","text.lang.stv":"Silte Gurage","text.lang.sms":"Skolt Sami","text.lang.sk":"Slovak","text.lang.den":"Slavey","text.lang.sl":"Slovenian","text.lang.so":"Somali","text.lang.sm":"Samoan","text.lang.seh":"Sena","text.lang.sn":"Shona","text.lang.sd":"Sindhi","text.lang.si":"Sinhala (Sinhalese)","text.lang.snk":"Soninke","text.lang.gru":"Sodo Gurage","text.lang.sop":"Songe","text.lang.st":"Southern Sotho","text.lang.sq":"Albanian","text.lang.sr":"Serbian","text.lang.sc":"Sardinian","text.lang.skr":"Saraiki","text.lang.srr":"Serer","text.lang.xsl":"South Slavey","text.lang.sma":"Southern Sami","text.lang.stq":"Saterland Frisian","text.lang.suk":"Sukuma","text.lang.su":"Sundanese","text.lang.suq":"Suri","text.lang.sva":"Svan","text.lang.sv":"Swedish","text.lang.aii":"Swadaya Aramaic","text.lang.sw":"Swahili","text.lang.ss":"Swati","text.lang.ngo":"Sutu","text.lang.sxu":"Upper Saxon","text.lang.syl":"Sylheti","text.lang.syr":"Syriac","text.lang.und-syre":"Syriac, Estrangela script-variant (equivalent to ISO 15924 \'Syre\')","text.lang.und-syrj":"Syriac, Western script-variant (equivalent to ISO 15924 \'Syrj\')","text.lang.und-syrn":"Syriac, Eastern script-variant (equivalent to ISO 15924 \'Syrn\')","text.lang.szl":"Silesian","text.lang.tab":"Tabasaran","text.lang.tg":"Tajiki","text.lang.ta":"Tamil","text.lang.tt":"Tatar","text.lang.x-hbottcr":"TH-Cree","text.lang.tdd":"Dehong Dai","text.lang.te":"Telugu","text.lang.tet":"Tetum","text.lang.tl":"Tagalog","text.lang.to":"Tongan","text.lang.tig":"Tigre","text.lang.ti":"Tigrinya","text.lang.th":"Thai","text.lang.ty":"Tahitian","text.lang.bo":"Tibetan","text.lang.tiv":"Tiv","text.lang.tk":"Turkmen","text.lang.tmh":"Tamashek","text.lang.tem":"Temne","text.lang.tn":"Tswana","text.lang.yrk":"Tundra Enets","text.lang.toi":"Tonga","text.lang.xwo":"Todo","text.lang.tod":"Toma","text.lang.tpi":"Tok Pisin","text.lang.tr":"Turkish","text.lang.ts":"Tsonga","text.lang.tsj":"Tshangla","text.lang.tru":"Turoyo Aramaic","text.lang.tcy":"Tumbuka","text.lang.tum":"Tulu","text.lang.tyv":"Tuvin","text.lang.tvl":"Tuvalu","text.lang.tw":"Twi","text.lang.tyz":"Tày","text.lang.tzm":"Tamazight","text.lang.tzo":"Tzotzil","text.lang.udm":"Udmurt","text.lang.uk":"Ukrainian","text.lang.umb":"Umbundu","text.lang.ur":"Urdu","text.lang.hsb":"Upper Sorbian","text.lang.ug":"Uyghur","text.lang.uz":"Uzbek","text.lang.vec":"Venetian","text.lang.ve":"Venda","text.lang.vi":"Vietnamese","text.lang.vo":"Volapük","text.lang.vro":"Võro","text.lang.wbm":"Wa","text.lang.wbr":"Wagdi","text.lang.war":"Waray-Waray","text.lang.x-hbotwci":"Waci Gbe","text.lang.crk":"West-Cree","text.lang.cy":"Welsh","text.lang.wo":"Wolof","text.lang.wa":"Walloon","text.lang.wtm":"Mewati","text.lang.khb":"Lü","text.lang.xh":"Xhosa","text.lang.xjb":"Minjangbal","text.lang.xkf":"Khengkha","text.lang.xog":"Soga","text.lang.xpe":"Kpelle (Liberia)","text.lang.sah":"Sakha","text.lang.yao":"Yao","text.lang.yap":"Yapese","text.lang.yo":"Yoruba","text.lang.x-hbotycr":"Y-Cree","text.lang.x-hbotyic":"Yi Classic","text.lang.ii":"Yi Modern","text.lang.zea":"Zealandic","text.lang.zgh":"Standard Moroccan Tamazight","text.lang.za":"Zhuang","text.lang.zh-hk":"Chinese, Traditional, Hong Kong SAR","text.lang.x-hbotzhp":"Chinese, Phonetic","text.lang.zh-hans":"Chinese, Simplified","text.lang.zh-hant":"Chinese, Traditional","text.lang.x-hbotzhtm":"Chinese, Traditional, Macao SAR","text.lang.zne":"Zande","text.lang.zu":"Zulu","text.lang.zza":"Zazaki"},"GMemoryManager":{"text.title":"%app is low on memory.","text.subtitle":"Please close a few files to free up some memory and avoid losing your progress."},"GBetaFlow":{"text.title":"You are using the beta version of %app.","text.message":"This is a pre-release version and may contain bugs, we strongly advise against using it for production work.","text.i-understand":"I understand"},"GSharepointOneDriveAuthenticator":{"text.please-hold-on":"Please hold on, we are logging you in."},"GSubAction":{"shortcut-hint-template":"%mainShortcutHint then %shortcutSubKeyHint"},"GSharePointCheckInAction":{"title":"Check In to SharePoint","text.doc-modified-save-before-check-in":"\'%title\' has been modified, please save it before doing the \'Check In\'."},"GSharePointCheckOutAction":{"title":"Check Out and Refresh from SharePoint","text.successul-checkout":"The document was succesfully checked out.","text.already-checkout":"The document is already checked out by you."},"GImportImageFromIOSAction":{"text.ios-files":"From Files","text.ios-photos":"From Photos"},"GIPadStorageDestinations":{"text.files":"Files","text.photos":"Photos"},"GIPadStorage":{"text.saving-to-photos-failed":"Exporting files requires access to Photos in iOS. Please go to “Settings > %app > Photos” and enable access.<br/>Note that this will reload the application, please ensure to save progress for your opened design files."},"GOpenQuickHelpScreenAction":{"title":"Show Quick Help"},"GSharePointStorage":{"text.error-failed-check-out-file":"Failed to check out the Sharepoint file, please be sure it\'s not check out by someone else to avoid losing your work"},"GQuickHelpScreen":{"text.menu":"Menu","text.open":"Open","text.save":"Save","text.undo-redo":"Undo/Redo","text.zoom":"Zoom","text.snapping":"Snapping","text.select":"Select","text.shapes":"Shapes","text.path":"Path","text.knife":"Knife","text.text":"Text","text.image":"Image","text.files":"Files","text.export":"Export","text.pages":"Pages","text.layers":"Layers","text.libraries":"Libraries","text.symbols":"Symbols","text.align-distribute":"Align and Distribute","text.transform":"Transform","text.document":"Document","text.appearance":"Appearance","text.fills":"Fills","text.borders":"Borders","text.effects":"Effects","text.comments":"Comments","text.modifier-keys":"Modifier Keys","text.nudge":"Nudge","text.copy":"Copy","text.paste":"Paste","text.delete":"Delete","text.select-deselect":"Select/Deselect All","text.arrange":"Arrange","text.fullscreen":"Fullscreen","text.group":"Group","text.ungroup":"Ungroup","text.convert-to-path":"Convert to Path","text.pinch-to-zoom":"Pinch to Zoom","text.drag-with-2-fingers":"Drag with 2 fingers to Pan","text.tap-and-hold":"Tap and Hold for Contextual menu"},"GAutoSave":{"text.notification-message-1":"Calm down, your file is being auto-saved.","text.notification-message-2":"Don’t worry, your progress is saved automatically.","text.notification-message-3":"We have your back, we are saving your design now.","text.failed-auto-saving":"We were unable to save your document right now, but don’t worry, we will try again soon.","text.alert-offline":"Auto-save isn’t available when being offline. Please download the file regularly to avoid losing progress.","text.alert-offline-desktop":"Auto-save isn’t available when being offline. Please save to a local file regularly to avoid losing progress.","text.alert-sync":"Please save this file to Corel Vector to enable Auto-save. ","text.alert-sync-sub-text":"Auto-save isn\'t available for unsaved files or locally saved files.<br />Please save or sync \\"%title\\" to Corel Vector to save your progress automatically and avoid losing progress. You can keep your file locally and sync it to the Cloud at any time from the “File“ menu.","text.alert-button.cancel":"Cancel","text.alert-button.save-to-cloud":"Save to Cloud","text.alert-cloud-reference-sync":"Auto-save isn\'t available for local files (“%title”). Please open the file from Corel Vector if you want to enable auto-save.","text.alert-cloud-reference-sync-sub-text":"Please make sure to save regularly, to avoid losing progress.","text.dialog-no-entries-created-waring.title":"This %storage file will be saved automatically, but no entries in the version history will be created. You can turn off this feature in the settings.","text.dialog-no-entries-created-waring.subtitle":"Please note that reloading this file discards all unsaved progress.","text.dialog-no-entries-created-waring.go-settings":"Go to Settings","text.dialog-file-updated-out-app-waring.title":"The file \\"%file-name\\" was modified outside of %app-name and can’t be auto-saved. Please consider saving it manually.","text.dialog-file-updated-out-app-waring.do-not-reload":"Don\'t reload","text.dialog-file-updated-out-app-waring.reload":"Reload with latest changes","text.dialog-inform-warn-feature.title":"Corel Vector can save your files automatically. Do you want to enable Auto-Save?","text.dialog-inform-warn-feature.text":"You can always change this behavior from the Settings in the Edit menu.","text.dialog-inform-warn-feature.cancel-button":"I will save my files manually","text.dialog-inform-warn-feature.enable-button":"Enable Auto-Save","text.dialog-auto-save-is-not-available-for-cdr-and-des.text":"Auto-save isn’t available for CorelDRAW (CDR, DES) files. Please make sure to save regularly to avoid losing progress or save as CDRAPP to enable auto-save.","text.dialog-auto-save-is-not-available-for-cdr-and-des.save-as-button":"Save as CDRAPP","text.dialog-auto-save-is-not-available-for-cdr-and-des.keep-cdr-button":"Keep CDR, DES"},"GFileReviewManager":{"text.cant-update-file-to-status":"Can\'t update to this status"},"GReviewDockerProperties":{"text.current-status":"Current status:","text.status-history":"Status history","text.please-share-to-start":"Please share the file to start the review process.","text.share-design-now":"Share the design now","text.review-title":"In review","text.review-description":"Reviewers give feedback.","text.reopen-title":"Reopen","text.reopened-title":"Reopened","text.reopen-description":"Review done, the design needs changes.","text.requested-approval-title":"All Done. Ready for Approval","text.request-approval-title":"Request Approval","text.request-approval-description":"All feedback is addressed. No pending changes.","text.approved-title":"Approved","text.approve-title":"Approve","text.approved-description":"No more changes are needed. File is ready for output.","text.request-approval-tooltip":"No Approver(s) assigned to this file. Please assign Approver(s) with the Share button.","text-please-save-share-to-start":"Please save and share the file to start the review process.","text.save-share-design-now":"Save and share the design now"},"GFileStatusHistoryDialog":{"text.status-history":"Status history","text.action-request-approval":"%name <highlight>requested approval</highlight> for this file","text.action-approved":"%name <highlight>approved</highlight> this file","text.action-reopened":"%name <highlight>reopened</highlight> this file","text.action-in-review":"%name <highlight>requested review</highlight> for this file"},"GCollaborativeTextPanel":{"text.send-changes-failed":"There was a problem applying your changes to this design. Please try again.","text.owner-message":"Please refer to CorelDRAW to make changes in this CDR file.","text.finish-editing-message":"Please double-click inside the text element to edit it. When you are ready, click “Finish Editing“ to complete your editing session.","text.send-changes-message":"Send the changes to the file owner?","text.request-access-message":"You can\'t currently edit text elements since there is an active editing session by %name. The file will be unlocked automatically when the other editor is done or you can request access.","text.update-available-message":"There is an updated version of this file. Do you want to reload now?","text.request-access":"Request Access","text.finish-editing":"Finish Editing","text.back-to-editing":"Back to editing","text.preview-changes":"Preview Changes","text.send-changes":"Send Changes","text.rendering-preview":"Rendering preview...","text.sending-changes":"Sending...","text.updating":"Updating...","text.wants-to-take-over":"%name wants to take over the text editing in this document. If you allow this you will be unable to edit text objects until %name finishes the edits.","text.save-my-edits-and-allow":"Save my edits and Allow","text.save-my-edits-and-close":"Save my edits and close","text.discard-my-edits-and-allow":"Discard my edits and Allow","text.discard-my-edits-and-close":"Discard my edits and close","text.decline":"Decline until I am done","text.update-now":"Update Now","text.request-has-been-sent":"A request has been sent to %name.","text.send-to-owner":"Send the changes to the file owner and notify him?","text.your-changes-were-applied":"Your changes were applied.","text.changes-you-made-are-not-saved":"You edited this document, but the changes you made are not saved. If you do not save them now they will be lost."},"GCollaborators":{"text.content-editor-tooltip":"%username can edit text in this design","text.you-are-offline":"You are offline","text.you-are-offline-tooltip":"You can’t co-edit this document or comment when you are offline.","text.reviewer-tooltip":"%username can review this design","text.content_editor-tooltip":"%username can edit text in this design","text.approver-tooltip":"%username can review and approve this design","text.owner-tooltip":"%username is the owner of this design","text.can-edit-tooltip":"%username can edit this design","text.can-comment-tooltip":"%username can comment on this design","text.can-edit-parts-tooltip":"%username can edit parts of this design"},"GCloudUtil":{"text.err-subscription-is-lifetime":"You already have a Lifetime subscription.","text.err-subscription-could-not-be-deactivated":"You already have an active subscription. <BR/>If you want to apply a new coupon code you need to cancel it in your <A>account settings</A>.","text.err-subscription-is-not-expired":"Your current subscription is good through %date.<BR/>You may only apply a coupon code to new or expired subscriptions.","text.err-subscription-is-active":"You already have an active subscription.<BR/>Even if you cancel it, your current subscription is good through %date.<BR/>You may only apply a coupon code to new or expired subscriptions."},"GMagnificationAction":{"text.actual-size":"Actual Size"},"GOpenAccountSettingsAction":{"title":"Account settings"},"GLogoutAction":{"title":"Log out"},"GToggleTouchAction":{"title":"Touch interface","title-disable":"Disable Touch Interface","text.try-this-feature-pro-tooltip-title":"Touch Interface","text.try-this-feature-pro-tooltip-description":"Show/hide the Interface optimized for touch-enabled devices."},"GExampleFilesAction":{"title":"Explore Example Files"},"GGoogleDrive":{"text.warning-message":"By default, only files that were created in Corel Vector will be shown here. To open additional files from your Google Drive, please use the button below. Please note that you need to select each folder and the included files separately so that they show up here.","text.add-files":"Open files...","text.you-have-not-added":"You haven’t opened files or saved files from/to your Google Drive yet.","text.add-additional-files":"Open Additional Files","text.all-files-tab-title":"All files","text.gravit-designer-tab-title":"Corel Vector files","text.team-drives-tab-title":"Team Drives files","text.selected-file-folder-not-added":"The selected file was added. You can find it easily from \\"Recent files\\" in \\"My Cloud.\\"","text.selected-files-folder-not-added":"The selected files were added. You can find them easily from \\"Recent files\\" in \\"My Cloud.\\"","text.selected-files-folder-not-added-additional":"Please note that you need to select the containing folder and its parents, so that it shows up here.","error.no-file-found":"Error occured. No file found","error.only-for-corporate":"Error. This feature is allowed only for corporate users","error.not-enough-parameters":"Error. Some parameters are not specified","error.google-api-error":"Error occured while processing request to Google Drive API. Please try again later or contact support from Help > Contact us."},"GAnnotations":{"text.page":"Page"},"GAnnotationPanel":{"text.document-approved-no-annotations-update":"The design was Approved and can\'t receive annotations update!","text.empty":"empty","text.unread-comment":"new","text.edit-comment":"Edit comment","text.reopen":"Reopen","text.resolve":"Resolve","text.edit":"Edit...","text.remove-annotation":"Remove annotation","text.remove-comment":"Remove comment","text.delete":"Delete","text.cancel":"Cancel","text.comment":"Reply","text.fill-contents":"Add comment","text.set-annotation-text":"Set annotation text","text.add-comment":"Add comment","text.write-annotation-here":"Type comment here","text.write-reply-here":"Type reply here","text.remove-empty-annotation":"Remove empty annotation","text.confirm-discard-annotation":"Please add some text or the comment can’t be saved. Do you want to discard?","text.marked-as-resolved":"Marked as resolved","text.re-opened":"Re-opened","text.confirm-remove":"Do you really want to remove this comment?","text.copy-permalink":"Copy Permalink","text.assign-resolve":"Done","text.assigned-to":"Assigned to&nbsp;","text.assign-to":"Assign to&nbsp;","text.additional-collaborators-all-reviewers-name":"All Reviewers","text.additional-collaborators-all-reviewers-show-text":"@reviewers","text.additional-collaborators-all-reviewers-role":"All Reviewers","text.additional-collaborators-all-approvers-name":"All Approvers","text.additional-collaborators-all-approvers-show-text":"@approvers","text.additional-collaborators-all-approvers-role":"All Approvers","text.additional-collaborators-all-content-editor-name":"All Co-editors","text.additional-collaborators-all-content-editor-show-text":"@coeditors","text.additional-collaborators-all-content-editor-role":"All Co-editors","text.additional-collaborators-all-co-author-name":"All Co-authors","text.additional-collaborators-all-co-author-show-text":"@coauthors","text.additional-collaborators-all-co-author-role":"All Co-authors","text.additional-collaborators-all-name":"All","text.additional-collaborators-all-show-text":"@all","text.additional-collaborators-all-role":"All","text.additional-collaborators-owner-name":"Owner","text.additional-collaborators-owner-show-text":"@owner","text.additional-collaborators-owner-role":"Owner"},"GAnnotationProperties":{"text.change-annotation-style":"Change annotation style","text.start-arrow":"Start arrow","text.end-arrow":"End arrow","text.tooltip-ellipse-tool":"Draw ellipses","text.tooltip-rectangle-tool":"Draw rectangles","text.tooltip-comment-tool":"Add notes","text.tooltip-pencil-tool":"Draw free-form lines and shapes","text.tooltip-highlighter-tool":"Highlight canvas areas","text.tooltip-arrow-tool":"Draw arrows and lines","text.tooltip-ellipse-fill":"Choose fill color","text.tooltip-ellipse-border":"Choose outline color","text.tooltip-ellipse-outline":"Set outline width","text.tooltip-ellipse-dropper-fill":"Pick fill color from canvas","text.tooltip-ellipse-dropper-border":"Pick outline color from canvas","text.tooltip-rectangle-fill":"Choose fill color","text.tooltip-rectangle-border":"Choose outline color","text.tooltip-rectangle-outline":"Set outline width","text.tooltip-rectangle-dropper-fill":"Pick fill color from canvas","text.tooltip-rectangle-dropper-border":"Pick outline color from canvas","text.tooltip-pencil-border":"Choose line color","text.tooltip-pencil-outline":"Set line width","text.tooltip-pencil-dropper-border":"Pick line color from canvas","text.tooltip-highlighter-border":"Choose highlight color","text.tooltip-highlighter-outline":"Set highlight width","text.tooltip-highlighter-dropper-border":"Pick highlight color from canvas","text.tooltip-arrow-border":"Choose line color","text.tooltip-arrow-outline":"Set line width","text.tooltip-arrow-dropper-border":"Pick line color from canvas","text.tooltip-comment-fill":"Choose note background color","text.tooltip-comment-dropper-fill":"Pick color from canvas"},"GAnnotationsSidebar":{"text.title":"Comments","text.show-updates":"Show updates","text.annotation-options":"Settings","text.show-resolved":"Show resolved","text.resolve-all-comments":"Resolve all comments","text.resolve-all":"Resolve all","text.notification":"Notification","text.notification-all-annotation":"All annotations","text.notification-assign-to-me":"Only assigned to me","text.notification-none":"None","text.save-file-tip":"This option is disabled until the file is saved to the Cloud.","text.hover-notification":"You can change the interval of notifications in the <span> Settings </span>"},"GTextAnnotation":{"text.new-annotation":"New annotation"},"GEditorOptions":{"text.anonymous-user":"Anonymous"},"GUseCouponAction":{"title":"Use Coupon","text.hava-coupon":"Have a coupon for Corel Vector? Enter it below.","text.invalid-coupon":"Invalid value, please inform a valid coupon!"},"GNotificationPanel":{"text.title-welcome":"Create a trial account","text.create-account":"Please %signup or %signin to try out the full functionality and save or export designs.","text.create-account-template":"Please %signup or %signin to try out the full functionality and save or export this template.","text.sign-up":"create a free account","text.sign-in":"log in","text.footer":"Learn more about %app."},"GDesigner":{"text.design-by":"Design by %name - %appname","text.preview-by":"Preview %name design in %appname online vector graphic design app. Preview the design and create a free account today!"},"GContainer":{"text.load-failed":"This design can’t be found or isn’t enabled for sharing.","text.request-permission":"Request permission to access.","text.not-memary-enough":"Not enough memory for saving, please free some memory before trying to save.","text.load-failed-from-link":"This file can\'t be opened by link, please open it directly from the Cloud.","text.load-failed-from-recent":"This file can\'t be opened from Recent files, please open it directly from the Cloud."},"GShareManager":{"text.auto-save-notification":"Comments/annotations were saved successfully to this CDR/DES file. It can now be opened with the latest changes in CorelDRAW. Please note that you need to save the file manually to include all changes to the design elements.","text.sent-request-email":"A request email has been sent.","text.cannot-request-access":"Cannot request access. Make sure the document exists and is shared with you.","text.file-can-not-be-accessed-title":"This file can\'t be accessed.","text.file-can-not-be-accessed-info":"The file either can\'t be found or it\'s not shared with you.","text.file-can-not-be-commented-title":"Your role is %role.","text.file-can-not-be-commented-info":"You don’t have permission to see comments on this design.","text.file-request-permission-to-comment":"Request Permission to Comment","text.file-request-access":"Request Access","text.template-shared-by":"This template was shared by %name.","text.shared-by":"This design was shared by %name.","text.save-warning":"The owner does not allow to save or download this file.","text.inspect-warning":"The owner only allows to view this file.","text.combined-warnings":"The owner does not allow to save or download this file and only allows to view it.","text.cant-comment":"You can view the design, but you can\'t add comments to the file.","text.new-role-is-viewer":"Your new role is Viewer. Now you can only preview this design.","text.new-role-is-reviewer":"Your new role is Reviewer. Now you can preview, comment and annotate this design.","text.new-role-is-approver":"Your new role is Approver. Now you can preview, comment and annotate this design, as well as approve the final revision.","text.new-role-is-content_editor":"Your new role is Content Editor. Now you can edit marked text objects in this design, as well as comment and annotate.","text.new-role-is-co_author":"Your new role is Co-Author. You can add and edit objects in this design, as well as comment and annotate. All changes will be saved in real-time.","text.new-role-is-developer":"Your new role is Developer. Now you can view, inspect, export assets or save a copy of this design."},"GShareDialog":{"text.participants-will-be-invited":"The participant(s) will be invited via email after you close the Share dialog.","text.you-can-not-invite-yourself":"You can’t share this file with yourself.","text.empty-email":"Email is not valid, please check if it\'s a correct address.","text.you-can-not-invite-user-from-another-domain":"Sharing design files with external users (outside the registered corporate domain) requires the file to be stored on Cloud. Save the file to the Cloud first to share with external users.","text.invalid-email":"%email is not valid, please check if it\'s a correct address.","text.resend-invitation-email":"Resend invitation email","text.resent-invitation-email":"The invitation was resent to %email.","text.sent-invitation-email":"An invitation was sent to %emails.","text.projects-left":"%number projects left in trial","text.role-required":"A role is required!","text.email-required":"An email is required!","text.public-share-link":"Everybody with the link:","text.private-share-placeholder":"Add email here to invite a participant ...","text.private-sharing":"Private Sharing","text.private-sharing-add":"Add","text.copied":"Copied","text.title":"Share File","text.subtitle-on":"Copy and share this link with your peers and stakeholders.","text.subtitle-off":"Turn on sharing to see the available options.","text.switch-on":"Sharing is On","text.switch-off":"Sharing is Off","text.allow-to-save-label":"Allow to Save","text.allow-to-save-info":"Everyone with the link will be able to download or save the file to his own account.","text.allow-to-inspect-label":"Allow to Inspect","text.allow-to-inspect-info":"Everyone with the link will be able to inspect the full layer structure of this file.","text.allow-to-comment-label":" ","text.allow-to-comment-info":" ","text.failed-copying-to-clipboard":"Failed copying to clipboard","text.copy":"Copy","text.options-description":"Allow everyone who has the link to:","text.private-share-no-options-left":"All users with email %email are already in the Private Sharing list.","text.error-change-role-failed":"External API didn\'t allow to change role","text.native-link-share-title":"","text.native-link-share-description":"","text.error-unsupported-native-link-share":"","text.error-unhandled-native-link-share":""},"GCDGSAssetShareDialog":{"text.participants-will-have-access-cdgs":"The participant(s) will have access to the assets in CorelDRAW."},"GShareAction":{"title":"Share File"},"GOpenSharedFileAction":{"title":"Open Shared File...","text.prompt-text":"Paste the shared design URL here: ","text.cancel":"Cancel","text.open":"Open","invalid-link":"Invalid link, please be sure to enter a valid share URL!"},"GCloudSynchronizationAction":{"text.syncing":"Syncing...","text.sync-to-cloud":"Sync File to Corel Vector...","text.unsync-from-cloud":"Unsync from Corel Vector...","text.last-synced-at":"Last synced at: %date"},"GPaymentDialog":{"text.default-title":"Corel Vector","text.dialog-dont-leave":"Wait Don’t Leave, Your Order has not Been Placed. <br>We cannot process your order until you fill in Your Info and Payment Info. <br>Once your Order is placed this window will close and you will be on your way to using Corel Vector.","text.cancel":"Cancel","text.finish-my-order":"Finish My Order","text.something-went-wrong":"Something is wrong","text.payment-not-confirmed":"We couldn\'t confirm your payment. <br>Please get in touch with our support via email: <a href=\'%link\'>%link</a>","text.canceled":"Canceled"},"GSystemDialog":{"text.cdr-warning-title":"Editing a CorelDRAW (CDR, DES) design","text.cdr-warning-label":"Important Note","text.cdr-warning-message":"CorelDRAW (CDR, DES) files are currently supported for annotating and adding content in CorelDRAW.app. All CorelDRAW drawing content will be displayed as a locked underlay. Any objects you create in CorelDRAW.app will be added to a new layer. When saving as CDR file the new layer(s) and its contents will be added to the CorelDRAW file while the original content will remain unchanged.","text.do-not-show-again":"Don\'t show this again","text.supported-touch-title":"It seems you are using a touch-enabled device. Do you want to switch to the touch-optimized interface?","text.supported-touch-footer":"You can switch to the touch interface at any time with “Touch interface” in the “View” menu.","text.unsupported-browser":"%app is optimized for the latest versions of Chrome, Firefox, Safari, and (new) Edge. Please try a supported web browser for an optimal experience.","text.unsupported-browser-touch":"%app is optimized for the latest versions of Safari on iOS and Chrome on Android. Please try a supported web browser for an optimal experience.","text.unsupported-screen-size":"Please note that %app may not work optimally on your device. For an optimal experience, it should be a device with a screen width of at least 1024 pixels width, 2 GB RAM and a CPU with 2.2 Ghz.","text.cdr-unsupported-objects-warning-title":"Save as CorelDRAW (CDR, DES) file","text.cdr-unsupported-objects-warning-label":"Unsupported objects","text.cdr-unsupported-objects-warning-message":"Your design contains objects that cannot be saved to CorelDRAW (CDR, DES) file format.","text.cdr-unsupported-objects-warning-option-0":"Keep appearance","text.cdr-unsupported-objects-warning-option-1":"Keep editable","text.cdr-unsupported-objects-warning-option-2":"Save as CDRAPP and keep objects editable","text.cdr-unsupported-objects-warning-option-3":"Omit incompatible objects","text.cdr-unsupported-objects-warning-option-0-tooltip":"Incompatible objects display accurately but won\'t be editable. Text will be converted to paths.","text.cdr-unsupported-objects-warning-option-1-tooltip":"Incompatible objects display accurately but won\'t be editable. Text appearance can change but will retain editing capabilities.","text.cdr-unsupported-objects-warning-option-3-tooltip":"Warning: Incompatible objects will not be saved and not available when opening the file again.","text.cdr-unsupported-objects-warning-details-label":"Details about affected pages/ layers","text.cdr-unsupported-object-warning-message":"%name is incompatible with the CorelDRAW (CDR, DES) format.You will be prompted to decide what to do with incompatible objects when saving the file as CorelDRAW (CDR, DES) file.","text.cdr-unsupported-object-warning-effect-name":"\\"%name\\" Effect","text.cdr-unsupported-object-warning-generic-name":"The object you\'re creating","text.unsupported-mobile-for-msteams":"CorelDRAW.app can not be run within the mobile application of Teams.","text.unsupported-mobile-for-msteams-new":"CorelDRAW.app is not optimized to run on mobile devices. It needs a screen resolution of at least 1024x768px.","text.unsupported-screen-size-msteams":"Please note that CorelDRAW.app may not work optimally on your device. For an optimal experience, it should have a screen resolution of at least 1024x768px.","text.unsupported-windows-size-msteams":"Please click on the \'Expand tab\' button on the top-right corner for the best experience."},"GCDRIntegrationEngine":{"text.cdr-unsupported-fonts":"This design may contain unsupported fonts (including styles and features).","text.cdr-unsupported-infinite-canvas":"Infinite Canvas","text.cdr-unsupported-blending-mode":"Blending mode","text.cdr-unsupported-blending-mode-layer":"Blending mode Fill/Border","text.cdr-unsupported-cmyk":"CMYK Color","text.cdr-unsupported-multiple-fills":"Multiple Object Fills","text.cdr-unsupported-multiple-borders":"Multiple Stroke Fills","text.cdr-unsupported-nonsolid-fills":"Non-Solid-Color Object Fill","text.cdr-unsupported-nonsolid-borders":"Non-Solid-Color Stroke Fill","text.cdr-background":"Background","text.cdr-unable-to-save-permission":"Unable to save file. Do you have permissions?","text.image-too-big":"The image you are trying to import is too large. Please resize and try again.","text.file-dimensions-too-big":"The dimensions of the pages contained in this CorelDRAW design are too big. Please decrease their size or the design’s dpi and try again.","text.blending-modes-currently-not-supported":"Blending modes are currently not supported when saving to CorelDRAW."},"GLocale":{"create":"Create","add":"Add","edit":"Edit","remove":"Remove","delete":"Delete","open":"Open","save":"Save","cancel":"Cancel","ok":"OK","yes":"Yes","no":"No","close":"Close","loading":"Loading","loading_of":"Loading of","saving":"Saving","saving_of":"Saving of","success":"Success","failure":"Failure","waiting":"Waiting","syncing":"Syncing"},"GFont":{"weight.thin":"Thin","weight.extra-light":"Extra-Light","weight.light":"Light","weight.regular":"Regular","weight.medium":"Medium","weight.semi-bold":"Semi-Bold","weight.bold":"Bold","weight.extra-bold":"Extra-Bold","weight.heavy":"Heavy","weight.thin-italic":"Thin Italic","weight.extra-light-italic":"Extra-Light Italic","weight.light-italic":"Light Italic","weight.regular-italic":"Regular Italic","weight.medium-italic":"Medium Italic","weight.semi-bold-italic":"Semi-Bold Italic","weight.bold-italic":"Bold Italic","weight.extra-bold-italic":"Extra-Bold Italic","weight.heavy-italic":"Heavy Italic"},"GImage":{"name":"Image","name.unsplash":"Unsplash Photo"},"GEllipse":{"name":"Ellipse","type.arc":"Open","type.chord":"Closed","type.pie":"Pie"},"GRectangle":{"name":"Rectangle"},"GCompoundShape":{"name":"Compound Shape"},"GLayer":{"name":"Layer"},"GGroup":{"name":"Group"},"GScene":{"name":"Scene","page":"Page"},"GPage":{"name":"Page"},"GSymbol":{"name":"Symbol"},"GPolygon":{"name":"Polygon"},"GPath":{"name":"Path"},"GCompoundPath":{"name":"Compound Path"},"GPathsGraph":{"name":"Graphic Network"},"GText":{"name":"Text"},"GCollabText":{"name":"Collaborative Text"},"GScenePaintConfiguration":{"paint.full":"Full","paint.fast":"Fast","paint.outline":"Outline","paint.output":"Output"},"GSlice":{"name":"Slice"},"GBlurEffect":{"name":"Blur"},"GShape":{"name":"Shape"},"GConnector":{"name":"Connector"},"GGLBlurEffect":{"name":"Blur"},"GGLBrightnessContrastEffect":{"name":"Brighness/contrast"},"GGLBulgePinchEffect":{"name":"Bulge"},"GGLColorHalfToneEffect":{"name":"Halftone"},"GGLDenoiseEffect":{"name":"Denoise"},"GGLDotScreenEffect":{"name":"Dot screen"},"GGLEdgeWorkEffect":{"name":"Edge work"},"GGLHexagonalEffect":{"name":"Hexagonal"},"GGLHueSaturationEffect":{"name":"Hue saturation"},"GGLInkEffect":{"name":"Ink"},"GGLLensBlurEffect":{"name":"Lens blur"},"GGLNoiseEffect":{"name":"Noise"},"GGLSepiaEffect":{"name":"Sepia"},"GGLSwirlEffect":{"name":"Swirl"},"GGLToonEffect":{"name":"Toon"},"GGLBloomEffect":{"name":"Bloom"},"GGLInnerGlowEffect":{"name":"Inner Glow"},"GGLOuterGlowEffect":{"name":"Outer Glow"},"GGLStrokeLayerEffect":{"name":"Stroke","text.outside":"Outside","text.inside":"Inside","text.center":"Center"},"GGLSketchEffect":{"name":"Sketch"},"GGLTiltShiftEffect":{"name":"Tilt shift"},"GGLTrueBlurEffect":{"name":"True blur (slow)"},"GGLUnsharpMaskEffect":{"name":"Unsharp mask"},"GGLVibranceEffect":{"name":"Vibrance"},"GGLVignetteEffect":{"name":"Vignette"},"GGLZoomBlurEffect":{"name":"Zoom blur"},"GGLRecolourEffect":{"name":"Recolor"},"GAdjustMultiEffect":{"name":"Adjust"},"GColorAdjustMultiEffect":{"name":"Color Adjust"},"GGLColorAdjustEffect":{"name":"Color Adjust"},"GColorGradingEffect":{"name":"Color Grading"},"GColorMatrixEffect":{"name":"Color Matrix"},"GColorTransformEffect":{"name":"Color Transform"},"GDropShadowEffect":{"name":"Drop Shadow"},"GContactShadowEffect":{"name":"Contact Shadow"},"GLongShadowEffect":{"name":"Long Shadow"},"GCurvedShadowEffect":{"name":"Curved Shadow"},"GGLBendEffect":{"name":"Bend"},"GGLDrunkEffect":{"name":"Alcohol"},"GGLFisheyeEffect":{"name":"Fisheye"},"GMirrorEffect":{"name":"Mirror"},"GInnerShadowEffect":{"name":"Inner Shadow"},"GOverlayEffect":{"name":"Overlay"},"GLength":{"unit.px":"Pixels","unit.mm":"Millimeters","unit.cm":"Centimeters","unit.in":"Inches","unit.pc":"Picas","unit.pt":"Points","unit.px.short":"px","unit.mm.short":"mm","unit.cm.short":"cm","unit.in.short":"in","unit.pc.short":"pc","unit.pt.short":"pt","unit.cc":"Ciceros","unit.dd":"Didots","unit.ft":"Feet","unit.yd":"Yards","unit.mi":"Miles","unit.km":"Kilometers","unit.m":"Meters","unit.H":"H","unit.Q":"Q","unit.cc.short":"cc","unit.dd.short":"dd","unit.ft.short":"ft","unit.yd.short":"yd","unit.mi.short":"mi","unit.km.short":"km","unit.m.short":"m","unit.H.short":"H","unit.Q.short":"Q"},"GStylable":{"layer.element":"Element","layer.fill":"Fill","layer.border":"Border","border-alignment.inside":"Inside","border-alignment.center":"Center","border-alignment.outside":"Outside","border-marker.circle":"Circle","border-marker.bullet":"Bullet","border-marker.diamond":"Diamond","border-marker.line":"Line","border-marker.linedouble":"Double Line","border-marker.arrow":"Arrow","border-marker.arrowfat":"Fat Arrow","border-marker.arrowline":"Line Arrow","border-marker.arrowdoubleline":"Double Line Arrow","border-marker.arrowlinebar":"Arrow Line Bar","border-marker.arrowpointer":"Arrow Pointer"},"GPaintCanvas":{"blend.normal":"Normal","blend.multiply":"Multiply","blend.screen":"Screen","blend.overlay":"Overlay","blend.darken":"Darken","blend.lighten":"Lighten","blend.colordodge":"Color Dodge","blend.colorburn":"Color Burn","blend.hardlight":"Hard Light","blend.softlight":"Soft Light","blend.difference":"Difference","blend.exclusion":"Exclusion","blend.hue":"Hue","blend.saturation":"Saturation","blend.color":"Color","blend.luminosity":"Luminosity","blend.linearburn":"Linear Burn","blend.lineardodge":"Linear Dodge","blend.linearlight":"Linear Light","blend.vividlight":"Vivid Light","blend.pinlight":"Pin Light","blend.divide":"Divide","blend.add":"Add","blend.subtract":"Subtract","blend.hardmix":"Hard Mix","blend.power":"Power","blend.harmonic":"Harmonic","blend.sin":"Sine","linecap.butt":"Butt","linecap.round":"Round","linecap.square":"Square","linejoin.bevel":"Bevel","linejoin.round":"Round","linejoin.miter":"Miter"},"GPathBase":{"corner.rounded":"Round","corner.inverse-rounded":"Round2","corner.bevel":"Bevel","corner.inset":"Inset","corner.fancy":"Fancy","anchor-point.mirror":"Mirrored","anchor-point.asymmetric":"Disconnected","anchor-point.symmetric":"Asymmetric","anchor-point.connector":"Connector"},"GSketchImport":{"text.unsupported-version":"Unsupported Version. Must be 43 or latest"},"GEPSParser":{"01":"Parts of the EPS file aren’t supported by Corel Vector. They are displayed with blue fills...","02":"Parts of the EPS file aren’t supported by Corel Vector. They are not imported...","03":"The file can\'t be loaded in a timely manner. Stopping...","04":"The file can\'t be loaded.","05":"File loading is canceled."},"GWebGLEffect":{"radius":"Radius","softness":"Softness","bend":"Bend","cov":"Cov","bloomIntensity":"Bloom Int.","baseIntensity":"Base Int.","bloomSaturation":"Bloom Sat.","baseSaturation":"Base Sat.","blurRadius":"Blur Rad.","bloomThreshold":"Bloom Thre.","clip":"Clip","brightness":"Brightness","contrast":"Contrast","centerX":"Center X","centerY":"Center Y","strength":"Strength","angle":"Angle","size":"Size","red":"Red","green":"Green","blue":"Blue","exponent":"Exponent","strengthX":"Strength X","strengthY":"Strength Y","scale":"Scale","hue":"Hue","saturation":"Saturation","intensity":"Intensity","color":"Color","opacity":"Opacity","amount":"Amount","width":"Width","shape":"Shape","ellyptical":"Ellyptical","placement":"Placement","startX":"Start X","startY":"Start Y","endX":"End X","endY":"End Y","gradientRadius":"Gradient Rad.","threshold":"Threshold","quantization":"Quantization"},"GSceneEditor":{"action.insert":"Insert","action.remove":"Remove","action.properties":"Change Properties"},"GPointerTool":{"name":"Pointer","tooltip-title":"Pointer tool","tooltip-description":"Click and drag to create a selection. Click an object to select it. Hold SHIFT to add/remove from selection. Hold ALT to select only objects fully enclosed in marqee"},"GSubSelectTool":{"name":"Subselect","tooltip-title":"Subselect tool","tooltip-description":"Click to select, edit, add and delete anchor points on a path. Click an object to select it."},"GLassoTool":{"name":"Lasso","tooltip-title":"Lasso tool","tooltip-description":"Click and drag to draw an area selecting many anchor points at once."},"GLayerTool":{"name":"Layer","tooltip-title":"Layer tool","tooltip-description":"Click to select objects within a Layer Group."},"GSliceTool":{"name":"Slice","tooltip-title":"Slice tool","tooltip-description":"Click and drag to define a specific area of your artwork to be exported as an asset."},"GPenTool":{"name":"Pen","tooltip-title":"Pen tool","tooltip-description":"Click and drag to create a starting point. Hold SHIFT to constrain it in 45°. Hold D to use Subselect tool."},"GBezigonTool":{"name":"Bezigon","tooltip-title":"Bezigon tool","tooltip-description":"Click and drag to create a starting point. Hold ALT to create a perfect curve. Hold SHIFT to constrain it in 45°."},"GFreehandTool":{"name":"Freehand","action.create-freehand-path":"Create freehand path","tooltip-title":"Freehand tool","tooltip-description":"Click and drag to start drawing. Hold D to use Subselect tool."},"GMagicTool":{"name":"Freehand shaping","tooltip-title":"Freehand shaping","tooltip-description":"Click and drag to add or subtract from an object."},"GKnifeTool":{"name":"Knife","action.cut-shape":"Cut shape(s)","tooltip-title":"Knife tool","tooltip-description":"Click a vector object to slice it."},"GLineTool":{"name":"Line","tooltip-title":"Create line","tooltip-description":"Click, drag and release to create a straight line. Hold ALT to create from center point. Hold SHIFT to constrain it in 45°."},"GRectangleTool":{"name":"Rectangle","tooltip-title":"Create rectangle","tooltip-description":"Click and drag to create a rectangle. Hold ALT to create from center point. Hold SHIFT to constrain proportions."},"GEllipseTool":{"name":"Ellipse","tooltip-title":"Create ellipse","tooltip-description":"Click and drag to create an ellipse. Hold ALT to create from center point. Hold SHIFT to constrain proportions."},"GPolygonTool":{"name":"Polygon","tooltip-title":"Create polygon","tooltip-description":"Click and drag to create a polygon. Hold ALT to create from center point. Hold SHIFT to constrain proportions."},"GTriangleTool":{"name":"Triangle","tooltip-title":"Create triangle","tooltip-description":"Click and drag to create a triangle. Hold ALT to create from center point. Hold SHIFT to constrain proportions."},"GStarTool":{"name":"Star","tooltip-title":"Create star","tooltip-description":"Click and drag to create a star. Hold ALT to create from center point. Hold SHIFT to constrain proportions."},"GTextTool":{"name":"Text","your-text-here":"Your text here","action.insert-text":"Insert text","tooltip-title":"Text tool","tooltip-description":"Click to create text. "},"GHandTool":{"name":"Pan","tooltip-title":"Pan tool","tooltip-description":"Click and drag to pan view."},"GZoomTool":{"name":"Zoom","tooltip-title":"Zoom tool","tooltip-description":"Click to zoom in about a point. Hold ALT and click to zoom out. Click and drag to create a zoom in area."},"GEditor":{"action.delete-selection":"Delete Selection","action.resize-selecion":"Resize Selection","action.transform-clone-selection":"Transform & Clone Selection","action.transform-selection":"Transform Selection","action.insert-elements":"Insert Element(s)","action.change-elements":"Change Elements","action.insert-image":"Insert Image(s)","action.convert-to-paths":"Convert to Path(s)","action.arrange-order":"Arrange Order","action.arrange-alignment":"Arrange Alignment","action.inline-editing":"Inline Editing","action.move":"Move","action.drag-style":"Drag Style"},"GGradientStyleEditor":{"text.gradient":"Gradient","action.add-gradient-stop":"Add Gradient Stop"},"GPathsGraphTool":{"action.append-point":"Append Point","action.insert-elements":"Insert Element(s)","action.insert-point":"Insert Point","action.move-point":"Move Point","action.delete-point":"Delete Point","action.modify-point-properties":"Modify Point Properties","action.modify-path-properties":"Modify Path Properties"},"GPathTool":{"action.append-point":"Append Point","action.insert-elements":"Insert Element(s)","action.insert-point":"Insert Point","action.move-point":"Move Point","action.delete-point":"Delete Point","action.modify-point-properties":"Modify Point Properties","action.modify-path-properties":"Modify Path Properties","action.join-paths":"Join Paths"},"GShapeTool":{"action.insert-elements":"Insert Element(s)"},"GSelectTool":{"action.insert-path-point":"Insert Path Point","action.transform-clone-selection":"Transform & Clone Selection","action.transform-selection":"Transform Selection","action.modify-element":"Modify %element","text.element":"Element"},"GCompoundShapeEditor":{"action.drop-pattern":"Drop Pattern"},"GImageEditor":{"action.crop-image":"Crop Image"},"GInlineTextEditor":{"action.modify-text-properties":"Modify text properties"},"GShapeEditor":{"action.drop-pattern":"Drop Pattern"},"GTextEditor":{"action.drop-font":"Drop Font","action.modify-text-properties":"Modify text properties","action.edit-text":"Edit text"},"GPageEditor":{"action.resize-pages":"Resize pages"},"GFillTool":{"action.modify-fill":"Modify Fill"},"GEditorWidget":{"action.remove-guide-line":"Remove guide line","action.change-guide-line":"Change guide line","action.add-guide-line":"Add guide line","action.insert-master-symbol":"Insert master symbol"},"GKey":{"key.1":"Space","key.2":"Enter","key.3":"Tab","key.4":"Backspace","key.5":"Control","key.5.short":"Ctrl","key.6":"Shift","key.7":"Alt","key.8":"Left","key.9":"Up","key.10":"Right","key.11":"Down","key.12":"Page Up","key.13":"Page Down","key.14":"Home","key.15":"End","key.16":"Insert","key.16.short":"Ins","key.17":"Delete","key.17.short":"Del","key.18":"Escape","key.18.short":"Esc","key.19":"Command","key.19.short":"Cmd","key.30":"F1","key.31":"F2","key.32":"F3","key.33":"F4","key.34":"F5","key.35":"F6","key.36":"F7","key.37":"F8","key.38":"F9","key.39":"F10","key.40":"F11","key.41":"F12"},"GPDFExport":{"text.wait":"Please wait! This might take a little while..."},"GInfo":{"text.title":"You haven\'t activated your account yet. Please do so until %date, or it will be deactivated.","text.resend-email":"Resend email here","text.email-sent":"Email sent.","text.email-sent-submessage":"Please be sure to also check the spam/junk folder of your email client.","text.something-went-wrong":"Something is wrong.","text.save-message":"Please save your file regularly, progress will be lost when you leave this tab.","text.check-in-message":"Please don’t forget to \\"Check In\\" the file, to allow collaborators to see your changes."},"GVersionHistoryProperties":{"error-loading":"Error while loading versions. Please try again in a few minutes.","title":"Version History","edit-version":"Edit this version","close-preview":"Close preview","preview":"Preview","restore":"Restore","text.current-version":"Current version","text.version":"Version %version","text.title-manual-save-tooltip-title":"These versions were saved manually","text.title-auto-save-tooltip-title":"These versions were created via auto-save","text.title-manual-save":"Manual Saves","text.title-auto-save":"Auto-Saves"},"GDeveloperDetailsAction":{"title":"Send Developer Details","message":"Please send the provided text file to our support team at <a href=\\"%link\\" title=\\"Support\\" target=\\"_blank\\">%link.</a>"},"GWarnLinkedImageDialog":{"warn-linked-image.text":"Linked images will not be available when opening your file on another computer or in the web app.","warn-linked-image.proceed":"Proceed","warn-linked-image.cancel":"Cancel","warn-linked-image.never-remind":"Don\'t show anymore"},"GEmbeddedLogin":{"text.title":"Welcome to Corel Vector","text.pop-has-been-blocked":"The pop-up has been blocked. To log in using your %provider credentials, please allow all %app pop-ups and reload this page, or click <a>here</a>."},"GLoginDialog":{"text.sign-in-title":"Please log in to your Corel Vector account to continue.","text.not-register":"Don\'t have an account yet?","text.sign-up":"Create your FREE account.","text.placeholder-sign-in-login":"Email","text.sign-in-login":"Username / Email address","text.placeholder-sign-in-password":"Password (min 6 chars.)","text.sign-in":"Log in","text.or":"- or -","text.sign-facebook":"Log In With Facebook","text.sign-google":"Log In With Google","text.signup-facebook":"Create Account With Facebook","text.signup-google":"Create Account With Google","text.forgot-password":"Forgot your password?","text.sign-up-title":"Create your FREE account then start designing.","text.already-registered":"Already have an account?","text.back-sign-in":"Go back to log in","text.placeholder-sign-up-email":"Your email","text.placeholder-sign-up-username":"Your username","text.placeholder-sign-up-password":"Choose a password (min 6 chars.)","text.agree":"I agree to the","text.terms-use":"Terms of Use","text.privacy-policy":"Privacy Policy","text.newsletter":"Subscribe me to the Corel Vector Newsletter","text.sign-up-now":"Start Now!","text.reset-password-title":"We will send a link to this email address to reset your password.","text.reset-password-header-title":"Reset password","text.reset-password-send":"Send Request","text.placeholder-reset-password-email":"Email","text.sign-up-thanks":"The account was created successfully. Please, check your email.<br><br>We have sent a confirmation to %email. Please click on the link in this email to activate your account.<br><br>If you don\'t activate your account in 3 days it will be automatically deactivated.","text.ok":"OK","text.login-dialog-title":"Start using Corel Vector","text.continue-without-loggin-in":"Continue without logging in","text.login-here":"Log in here.","text.placeholder-sign-up-first-name":"First Name","text.placeholder-sign-up-last-name":"Last Name","text.you-are-offline":"You are offline. Please reestablish your connection to proceed.","text.sign-in-button":"SIGN IN","text.sign-in-password":"Password","text.enterprise-sign-in-message":"CorelDRAW.app Enterprise users, sign in with your<br/> Microsoft 365 or Google Workspace account.<div class=\'highlight-top\'>*</div>","text.enterprise-login-message-1":"<div class=\'highlight\'>*</div> Note: CorelDRAW.app Enterprise sign-in is available exclusively to companies signed-up for a CorelDRAW.app Enterprise License.","text.enterprise-login-message-2":"If you are unsure whether or not you\'re eligible, consult your employer\'s IT administrator","text.enterprise-sign-microsoft":"Sign in with Microsoft 365","text.enterprise-sign-google":"Sign in with Google Workspace"},"GConfirmationDialog":{"text.confirm-info-save":"A confirmation with a summary of the order has been sent to %email. Your design will be saved now.","text.confirm-info-export":"A confirmation with a summary of the order has been sent to %email. Your design will be exported now.","text.confirm-save":"Save design","text.confirm-export":"Export design","text.confirm-resend":"Resend it here"},"GPaywallDialog":{"text.paywall-info":"You can continue to edit this design for free. If you want to save or export it, you need to pay","text.paywall-buy":"Buy now for","text.paywall-edit":"Edit for free","text.paywall-bought":"You already bought this product"},"GPurchasePanel":{"text.purchased-expires":"expires on %date","text.subscription-ends":"valid until %date","text.pro-subscription-lifetime":"%app Lifetime Subscription","text.pro-subscription":"%app Subscription","text.orderby-label":"Order By:","text.orderby-number":"Order number","text.orderby-name":"Name","text.orderby-price":"Price","text.orderby-date":"Date","text.orderno":"Order nº","text.purchased":"Purchased on","text.search-label":"Search Product","text.purchased-renews":"renews on","text.change-subscription":"Change subscription","text.placeholder-password":"Use %min-number to %max-number characters","text.placeholder-address":"Street name and number","text.empty-search":"Your search term didn’t match any product, please try again.","text.prompt-cancel-title":"Do you really want to cancel this subscription?","text.prompt-cancel-info":"When canceling your %app subscription you can use features until %date.<br/>After that, you need to purchase again.","text.prompt-activate-title":"Do you really want to activate this subscription?","text.prompt-activate-info":"Activating your subscription the next billing will be on %date","text.prompt-activate-label":"Activate","text.contact-partner-billing":"Please %partner% if you want to change your billing details or you have questions about your order.","text.contact-partner-cb":"contact our partner Cleverbridge","text.contact-partner-billing-alternative":"Please contact our partner %partner% if you want to change your billing details or you have questions about your order.","text.contact-partner-cleverbridge":"Cleverbridge"},"GProfileDialog":{"text.purchases":"Purchases","text.details":"Account details","text.change-password":"Change password","text.avatar-tooltip":"PNG or JPG, 100 kB. max.","text.avatar-size-too-big":"Please keep image under 100 kB"},"GChangePasswordPanel":{"text.change-password":"Choose your new password for %name","text.set-password":"Choose the password for %name","text.assign":"Assign New Password","text.new-password":"New password","text.confirm-password":"Confirm new password","text.placeholder-new-password":"New password","text.placeholder-confirm-password":"Confirm new password","text.reset-password-info":"Please choose a new password","text.set-password-info":"Please set a password for your account","text.reset-password-done":"Your password has been changed successfully.","text.new-password-tip":"Use %min-number to %max-number characters"},"GAccountPanel":{"text.user-email-message":"Changing your email address requires to activate your account again. It will be done after you have clicked on the link in the confirmation we have sent to %email.","text.contact":"Contact details","text.account-name":"Name","text.username":"Username","text.email":"Email","text.old-password":"Old Password","text.new-password":"New Password","text.billing":"Billing Address","text.address":"Address","text.city":"City","text.state":"State/Province/Region","text.zip":"ZIP","text.country":"Country","text.save":"Save","text.delete":"Delete Account","text.error":"Ooops! Something went wrong.","text.please-wait":"Please, wait...","text.success":"Details changed successfully","text.confirm-delete-account":"Do you really want to delete your Corel Vector account?","text.reset-password-info":"Please choose a new password","text.reset-password-done":"Your password has been changed successfully.","text.contact-partner-cb":"contact our partner Cleverbridge","text.contact-partner-billing":"Please %partner% if you want to change your billing details.","text.contact-partner-billing-alternative":"Please contact our partner %partner% if you want to change your billing details.","text.contact-partner-cleverbridge":"Cleverbridge","text.all-files-cloud":"all files in the Cloud","text.all-dicussion-comments":"all Corel Vector Discussion comments","text.purchased-items-and-sub":"all purchased items and subscriptions","text.action-cant-undone":"This action can\'t be undone!","text.first-name":"First name","text.last-name":"Last name","text.email-address":"Email address","text.delete-account-title":"Do you really want to delete your Corel Vector account?","text.delete-account-sub-title":"You will lose","text.delete-account-list-1":"all files in the Cloud","text.delete-account-list-2":"all Corel Vector Discussion comments","text.delete-account-list-3":"all purchased items and subscriptions","text.delete-account-action-cant-undone":"This action can\'t be undone!","text.name-usage-tips":"Your name will be used if you are adding a comment or annotation, your email address when receiving notifications.","text.update-name-link-text":"Update the user name in my Corel account.","text.view-your-account":"View your %partner% %icon%","text.account-view-link-text":"account settings on corel.com "},"GImportedFontsProvider":{"confirm.delete-font":"Are you sure you want to delete this font?"},"GLocalFontsProvider":{"text.permission-required-title":"Permission required to access system fonts!","text.permission-required-subtitle-edge":"To allow the app to access your system fonts, click on the padlock (🔒) icon in the address bar, next to the website name, then select the \'Allow\' option from the \'Fonts\' dropdown. Save your work & reload the website to begin using system fonts.","text.permission-required-subtitle-others":"To allow the app to access your system fonts, click on the padlock (🔒) icon in the address bar, next to the website name, then toggle the gray switch in the \'Fonts\' section. Save your work & reload the website to begin using system fonts.","text.current-browser-unsupported":"This browser does not support system fonts. This feature is available on Chrome, Edge & Opera."},"GAlignAction":{"title.align-left":"Align Left","title.align-center":"Align Center","title.align-right":"Align Right","title.align-top":"Align Top","title.align-middle":"Align Middle","title.align-bottom":"Align Bottom","title.align-justify-horizontal":"Same Width","title.align-justify-vertical":"Same Height","text.align-left-tooltip-title":"Align Left","text.align-left-tooltip-description":"Align all selected objects to the left side of the left-most object.","text.align-center-tooltip-title":"Align Center","text.align-center-tooltip-description":"Aligns all selected objects to the center of the selection bounding box.","text.align-right-tooltip-title":"Align Right","text.align-right-tooltip-description":"Align all selected objects to the right side of the right-most object.","text.align-top-tooltip-title":"Align Top","text.align-top-tooltip-description":"Align all selected objects to the top side of the top-most object.","text.align-middle-tooltip-title":"Align Middle","text.align-middle-tooltip-description":"Align all selected objects to the middle of the selection bounding box.","text.align-bottom-tooltip-title":"Align Bottom","text.align-bottom-tooltip-description":"Align selection to Bottom of a bounding box or page."},"GArrangeAction":{"title.send-front":"Bring to Front","title.bring-forward":"Bring Forward","title.send-backward":"Send Backward","title.send-back":"Send to Back","bring-forward-tooltip-title":"Bring element forward","bring-forward-tooltip-description":"Bring an element up in the layer hierarchy.","send-backward-tooltip-title":"Send element backward","send-backward-tooltip-description":"Send an element down in the layer hierarchy."},"GCancelCropAction":{"title":"Cancel Cropping"},"GClipAction":{"title":"Clip Selection","text.clip-selecion":"Clip Selection","tooltip-title":"Create a clip","tooltip-description":"Create a mask for an object. Click twice to edit the clipped object."},"GConnectLinesAction":{"title":"Connect Paths Lines"},"GConvertToPathAction":{"title":"Convert to Path","tooltip-title":"Convert to path","tooltip-description":"Convert the selected shape into a path."},"GConvertToRawPathAction":{"title":"Convert to Raw Path"},"GCreateNestedCompoundAction":{"title":"Create Nested Compound"},"GCreateSymbolAction":{"title":"Create Symbol","createsymbol.enternewname":"Enter new symbol name:","createsymbol.defaultname":"Symbol","common.nosymbolsdefined":"No symbols defined.","common.nosymbolsdefined-info":"Symbols let you reuse content in your design. Create a Symbol with the “+” icon from your selected element(s).","tooltip-title":"Create Symbol","tooltip-description":"Turn the element into a new Symbol."},"GCropAction":{"title":"Confirm Cropping"},"GDetachSymbolAction":{"title":"Detach Symbol Instance","text.number-detached":"Detach symbol %number"},"GResetInstanceAction":{"title":"Reset Instance"},"GCutCopyAction":{"title.cut":"Cut","title.copy":"Copy","text.cut-selection":"Cut Selection","text.security-issues":"<p>Due security permissions we can not access your system clipboard.<br/> Please use the following shortcut instead to %cutcopy:</p><p style=\'text-align: center;font-size:16px;margin-top: 20px\'>%shortcut</p>"},"GDeleteAction":{"title":"Delete"},"GDeselectAllAction":{"title":"Deselect All"},"GDistributeAction":{"title.horizontal":"Distribute Horizontally","title.vertical":"Distribute Vertically","text.horizontal-tooltip-title":"Distribute Horizontally ","text.horizontal-tooltip-description":"Distribute selected objects horizontally so that the distance between them is equal.","text.vertical-tooltip-title":"Distribute Vertically","text.vertical-tooltip-description":"Distribute selected objects vertically so that the distance between them is equal."},"GDuplicateAction":{"title":"Duplicate"},"GEditElementActon":{"title":"Edit Selection"},"GExportAction":{"title":"Advanced Export...","title.advanced-options":"Advanced Options...","text.save-before-export":"Do you want to save this file before exporting?","tooltip-title":"Export","tooltip-description":"Export your document or selection.","text.try-this-feature-pro-tooltip-title":"Advanced Export","text.try-this-feature-pro-tooltip-description":"Export your document or selection with advanced options.","text.try-export-pdf-advanced-setting-tooltip-title":"Advanced PDF Export","text.try-export-pdf-advanced-setting-tooltip-description":"Export your document or selection to a PDF with advanced options."},"GFitAllAction":{"title":"Fit All","tooltip-title":"Fit All","tooltip-description":"Click to fit all objects in the viewport to the screen."},"GFitCurrentLayerAction":{"title":"Fit Layer"},"GFitSelectionAction":{"title":"Fit Selection"},"GGroupAction":{"title":"Group Selection","tooltip-title":"Group items","tooltip-description":"Group selected elements."},"GInvertSelectionAction":{"title":"Invert Selection"},"GJoinPathsAction":{"title":"Join Paths"},"GMergeMainAction":{"title":"Create Compound"},"GMergeSubAction":{"title.union":"Union","title.difference":"Difference","title.intersect":"Intersect","title.subtract":"Subtract","tooltip.union.title":"Union","tooltip.union.description":"Merge the area of two elements.","tooltip.difference.title":"Difference","tooltip.difference.description":"Create a shape with the parts of the selected elements that don\'t overlap.","tooltip.intersect.title":"Intersect","tooltip.intersect.description":"Create a shape with the overlapping are of the selected elements.","tooltip.substract.title":"Subtract","tooltip.substract.description":"Subtract the are of the lower object.","transaction.merge":"Merge","transaction.combine":"Combine"},"GNewAction":{"title":"New Design..."},"GNewWindowAction":{"title":"New View"},"GNewClipboardAction":{"title":"New from Clipboard"},"GOffsetAction":{"title":"Expand/Shrink","text.dialog-prompt-message":"Enter a positive value for offset or negative for inset:","text.invalid-value":"Entered invalid number for offset value."},"GOriginalViewAction":{"title":"Original-View"},"GOutlineAction":{"title":"Convert to Outline","text.dialog-prompt-message":"Enter a positive value for the outline:","text.invalid-value":"Entered invalid number for outline value."},"GVectorizeBorderAction":{"title":"Vectorize Border","tooltip-title":"Vectorize Border","tooltip-description":"Convert a border into a shape."},"GVectorizeImageAction":{"title":"Vectorize Image"},"GConvertToImageAction":{"title":"Flatten"},"GAttachToPathAction":{"title":"Attach Text to Path"},"GDetachFromPathAction":{"title":"Detach Text from Path"},"GOutlineViewAction":{"title":"Outline View"},"GFastViewAction":{"title":"Fast View"},"GPaste":{"action.paste":"Paste","action.paste-image":"Paste Image"},"GPasteAction":{"title":"Paste","text.security-issues":"<p>Due security permissions we can not access your system clipboard.<br/>Please use the following shortcut instead to paste:</p><p style=\'text-align: center;font-size:16px;margin-top: 20px\'>%shortcut</p>"},"GPasteAndReplaceAction":{"title":"Paste and Replace"},"GEyeDropperAction":{"title.fill":"Choose a fill color","title.border":"Choose a border color"},"GEnterLayerGroupAction":{"title":"Enter layer group","title.reverse":"Leave layer group"},"GRenameLayerAction":{"title":"Rename a layer"},"GCycleThroughLayersAction":{"title.next":"Select next layer","title.previous":"Select previous layer","title":""},"GLockLayerAction":{"title":"Lock a layer"},"GToggleLayerVisibilityAction":{"title":"Hide a layer"},"GTogglePaintLayersVisibilityAction":{"title.fill":"Toggle fills","title.border":"Toggle borders"},"GChangeOpacityAction":{"title":"Change opacity","full-title":"Set opacity to %value"},"GCloseActiveWindowAction":{"title":"Close window"},"GChangeAnchorPointsJointTypeMainAction":{"title":"Change anchor point joint type"},"GChangeAnchorPointsJointTypeSubAction":{"title.straight":"Change anchor point joint type to Straight","title.mirrored":"Change anchor point joint type to Mirrored","title.disconnected":"Change anchor point joint type to Disconnected","title.connector":"Change anchor point joint type to Connector","title.asymmetric":"Change anchor point joint type to Asymmetric"},"GToggleMultiPageModeAction":{"title":"Toggle multipage mode"},"GChangeActivePageAction":{"title.next":"Select next page","title.previous":"Select previous page"},"GChangeActiveWindowAction":{"title.next":"Select next tab","title.previous":"Select previous tab"},"GSwapPaintLayersAction":{"title":"Swap fill and border"},"GCreateNewLayerAction":{"title":"Create new layer"},"GShowShortcutsAction":{"title":"Show Keyboard Shortcuts"},"GPasteInPlaceAction":{"title":"Paste In Place"},"GPasteInsideAction":{"title":"Paste Inside Selection"},"GPasteHereAction":{"title":"Paste Here"},"GPasteStyleAction":{"title":"Paste Style"},"GPrintAction":{"title":"Print...","printing-disabled":"Printing is disabled due to technical problems. Please export a PDF file and print it in your favorite PDF reader.","printing-warning":"This device doesn\'t support printing at high quality. If you want to have better quality, please export a PDF document instead and print in your application of choice."},"GRedoAction":{"title":"Redo","redo-action":"Redo %action","tooltip-title":"Redo","tooltip-description":"Redo last undone operation."},"GReverseOrderAction":{"title":"Reverse Order"},"GSaveAction":{"title":"Save","title-download":"Download","tooltip-title":"Save your document","tooltip-description":"Save your progress on the current file.","has-new-version-when-save-message":"There is a newer version of this file in the cloud. Should it still be saved or do you want to reload? Please note: Reloading may lose progress.","has-new-version-when-save-reload":"Reload","has-new-version-when-save-save":"Save"},"GSaveAllAction":{"title":"Save All"},"GSaveAsAction":{"title":"Save as...","text.save-common":"%title (.%fileExtension)","text.save-pdf":"%title (.%fileExtension) at %dpiValue%dpiString","text.dpi-value":"%dpiValue %dpiString","text.dpi":"dpi","text.try-this-feature-pro-tooltip-title":"Quickly export a PDF document at 300dpi."},"GOpenAction":{"title":"Open Local File..."},"GQuitAction":{"title":"Quit"},"GSharePoint":{"error.title-found-special-chars":"You have entered an invalid file/folder name: %fileName%. Some symbols that are not allowed: %symbols%. Also there are some additional restrictions. Please try again.","error.unknown":"Unknown Error"},"GOneDriveBusiness":{"error.no-file-found":"Error occured. No file found","error.processing-api":"Error occured while processing request to One Drive Business API. Please try again later or contact support from Help > Contact us.","error.not-enough-parameters":"Error. Some parameters are not specified","error.title-found-special-chars":"You have entered an invalid file/folder name: %fileName%. Some symbols that are not allowed: %symbols%. Also there are some additional restrictions. Please try again."},"GImportFontsAction":{"title":"Add Fonts...","text.try-this-feature-pro-tooltip-title":"Add Fonts","text.try-this-feature-pro-tooltip-description":"Add your custom fonts to Corel Vector. Find them in the “Imported” tab in the Font selector."},"GClearFontsAction":{"title":"Clear imported fonts..."},"GSelectAllAction":{"title":"Select All"},"GSettingsAction":{"title":"Settings..."},"GShowGridAction":{"title":"Show Grid"},"GShowGuideLinesAction":{"title":"Show Guide Lines"},"GShowSymbolLabelsAction":{"title":"Show Symbol Labels"},"GShowRulersAction":{"title":"Show Rulers"},"GShowSlicesAction":{"title":"Show Slices"},"GShowEffectsAction":{"title":"Show Effects"},"GShowSelectionHandlesAction":{"title":"Show Selection Handles"},"GSimplifyAction":{"title":"Simplify Path","text.tolerance":"&nbsp;&nbsp;&nbsp;% Tolerance","text.simplification":"Path simplification","text.invalid-value":"Entered invalid number for pixel tolerance."},"GSnapUnitAction":{"title.full":"Snap to Full Units","title.half":"Snap to Half Units"},"GSplitAction":{"title":"Ungroup Selection","tooltip-title":"Ungroup items","tooltip-description":"Ungroup selected group of elements."},"GSplitLineAction":{"title":"Break Curve"},"GSplitPathAction":{"title":"Split Path"},"GToggleSnapAction":{"title":"Use Snapping","tooltip-title":"Snap","tootlip-title-action":"Use Snapping","tooltip-description":"Click to enable snapping."},"GToggleSnapZonesAction":{"title":"Use Snap Zones","tooltip-title":"Snap zones","tooltip-description":"Click to enable use of snap zones."},"GTransformAction":{"title.rotate-45-left":"Rotate 45° Left","title.rotate-90-left":"Rotate 90° Left","title.rotate-180-left":"Rotate 180° Left","title.rotate-45-right":"Rotate 45° Right","title.rotate-90-right":"Rotate 90° Right","title.rotate-180-right":"Rotate 180° Right","title.flip-vertical":"Flip Vertical","title.flip-horizontal":"Flip Horizontal","flip-horizontal-tooltip-title":"Flip Horizontal","flip-horizontal-tooltip-description":"Flip an object horizontally.","flip-vertical-tooltip-title":"Flip Vertical","flip-vertical-tooltip-description":"Flip an object vertically.","rotate-90-left-tooltip-title":"Rotate left","rotate-90-left-tooltip-description":"Rotate 90° to the left.","rotate-90-right-tooltip-title":"Rotate right","rotate-90-right-tooltip-description":"Rotate an object 90° to the right."},"GUndoAction":{"title":"Undo","undo-action":"Undo %action","tooltip-title":"Undo","tooltip-description":"Revert last operation. Click multiple times to go even further in edit history."},"GZoomInAction":{"title":"Zoom in","tooltip-title":"Zoom in","tooltip-description":"Click to zoom in about a point."},"GZoomOutAction":{"title":"Zoom out","tooltip-title":"Zoom out","tooltip-description":"Click to zoom out about a point."},"GSelectByFontTypeAction":{"title":"Font Type"},"GSelectByBlendModeAction":{"title":"Blend Mode"},"GSelectByBorderWidthAction":{"title":"Border Width"},"GSelectByPaintLayerAction":{"title.fill":"Fill","title.border":"Border","title.fill_border":"Fill & Border"},"GSelectByShapeAction":{"title":"Shape"},"GSelectByTransparencyAction":{"title":"Transparency"},"GSelectByEffectAction":{"title":"Effect"},"GToggleSidebarAction":{"title":"Show %s Panel"},"GPlaceImportAction":{"title":"Place Image...","tooltip-title":"Place image","tooltip-description":"Import an image from your computer."},"GLinkImageAction":{"title":"Link Image...","tooltip-title":"Link image","tooltip-description":"Import an image with a link to the original on your computer."},"GPlayAction":{"title":"Play/Present...","text.exit-full-screen":"Press %key to exit full screen","text.esc":"esc"},"GToggleFullscreenAction":{"title":"Toggle Fullscreen...","fullscreen-banner":"Press Alt + Enter to exit fullscreen mode"},"GNewFromTemplateAction":{"title":"New Design from Template..."},"GGravitCloudAction":{"title.new":"New Cloud File","title.open":"Open from Cloud...","title.save":"Save","title.save-as":"Save to Cloud as..."},"GVersionsHistoryAction":{"title":"Show Version History","unsaved-modifications":"Please save your design before showing the version history to avoid losing progress","text.try-this-feature-pro-tooltip-title":"Show Version History","text.try-this-feature-pro-tooltip-description":"Show saved versions of the current design and access up to 20 past versions."},"GOpenLinkAction":{"title.blog":"Blog","title.changelog":"What\'s New","title.discussion":"Forum","title.tutorials":"Tutorials","title.contact-us":"Contact Us","title.feedback":"Give Feedback","title.user-guide":"User Guide","title.eula":"End User License Agreement","title.request-new-feature":"Request New Feature","text.join-community":"Join the Community","title.open-a-ticket":"Open a Ticket"},"GOpenRecentAction":{"title":"No Recent Files"},"GMaskWithShapeAction":{"title":"Mask with Shape","text.mask":"Mask"},"GPurchaseProAction":{"title":"UPGRADE NOW"},"GEnhancedTooltipsAction":{"title":"Display Enhanced Tooltips"},"GSymbolsSidebar":{"text.symbols":"Symbols","action.delete-symbol":"Delete Symbol","action.create-symbol":"Create New Symbol","title":"Symbols","text.delete-symbol-tooltip-title":"Delete Symbol","text.delete-symbol-tooltip-description":"Delete the selected symbol.","text.create-symbol-tooltip-title":"Create New Symbol","text.create-symbol-tooltip-description":"Turn the selected element into a new Symbol."},"GOutlineSidebar":{"title":"Layers","text.pages":"Pages","action.toggle-page-mode":"Toggle Single / Multipage Mode","action.delete-active-page":"Delete Active Page","action.create-new-page":"Create New Page","text.layers":"Layers","text.layer":"Layer","action.delete-layer-item":"Delete Layer or Item","action.new-layer":"New Layer","action.insert-page":"Insert Page","action.delete-page":"Delete Page","action.move-page":"Move Page","action.insert-layer":"Insert Layer","action.move-layer":"Move Layer/Item","text.multipage-alert":"One of your pages is set to Infinite Canvas. Please change to a fixed size to be able to enter Multipage mode.","text.confirm-delete-masterpage":"This page is currently used as a Master page. Do you want to delete?","action.change-active-page":"Change active page","text.multipage-tooltip-title":"Multipage mode","text.multipage-tooltip-description":"Show all pages of the document in a grid side by side.","text.delete-page-tooltip-title":"Delete page","text.delete-page-tooltip-description":"Delete the selected page.","text.create-new-page-tooltip-title":"Create new page","text.create-new-page-tooltip-description":"Create a new page with the properties of the currently selected one.","text.delete-layer-tooltip-title":"Delete layer","text.delete-layer-tooltip-description":"Delete selected object or layer.","text.new-layer-tooltip-title":"Create new layer","text.new-layer-tooltip-description":"Create a new layer group."},"GInspectorSidebar":{"title":"Inspector"},"GCategory":{"category.account":"Account","category.file":"File","category.file.save-as":"File/Save as","category.edit":"Edit","category.edit.paste":"Edit/Paste","category.edit.select-same":"Edit/Select Same","category.modify":"Modify","category.modify.combine":"Modify/Create Compound Shape","category.modify.arrange":"Modify/Arrange","category.modify.align":"Modify/Align","category.modify.transform":"Modify/Transform","category.modify.path":"Modify/Path","category.modify.symbol":"Modify/Symbol","category.view":"View","category.view.magnification":"View/Magnification","category.view.canvas":"View/Canvas","category.view.snap":"View/Snap to","category.help":"Help","category.file.gravit-cloud":"File/Corel Vector","category.help.language":"Help/Language","category.help.switchwebcdr":"Help/CDGS server","category.help.support":"Help/Support","category.help.learn":"Help/Learn","category.file.import":"File/Import","category.file.import.image":"File/Import/Place Image...","category.file.export":"File/Export","category.file.export.pdf":"File/Export/PDF Document (.pdf)","category.file.open-recent":"File/Open Recent","category.file.share":"File/Share","category.view.mode":"View/View Mode","category.help.beta_feedback":"Help/Beta Feedback"},"GDocument":{"text.cloud-file-modified":"\'%title\' has been modified, do you want to replace it?","text.default-document-name":"Untitled","file-type.cdrapp":"CorelDRAW Design","file-type.gvdesign":"Corel Vector Design","file-type.cdr":"CorelDRAW Document","file-type.des":"Corel DESIGNER Document","file-type.pdf":"PDF Document","file-type.ai":"Adobe Illustrator Artwork Document","file-type.png":"PNG Image","file-type.jpeg":"JPEG Image","file-type.svg":"Scalable Vector Graphics","file-type.svgz":"Compressed SVG","file-type.eps":"Encapsulated PostScript","file-type.sketch":"Sketch File","text.import-from-pdf":"Import Page(s) from PDF","text.import-from-ai":"Import Adobe Illustrator Artwork","text.ai-not-pdf-compatible":"This Adobe Illustrator file isn’t compatible with Corel Vector, please follow the instructions in the file.","text.import-from-eps":"Import EPS","title.save-gvdesign":"Save to Local File as...","title.download-gvdesign":"Download File","title.save-cdrapp":"Save to file...","title.download-cdrapp":"Download File...","text.sync-to-cloud-error":"Could not save to cloud","text.sync-from-cloud-error":"Could not load from cloud","text.image-too-big":"You are attempting to upload a huge image, that may impact the performance of Corel Vector.<br/>Please try to reduce the image size before importing (max. 10MB, 64 megapixels).","text.image-in-design-too-big":"The design contains image which is too big for the current working environment. It may be displayed incorrectly or impact the performance of Corel Vector.","text.error-reading-file":"Can’t open file. Please make sure that the file exists, you have proper read access to it, it is not in directory synced with OneDrive, and you have an active network connection.","text.unsupported-file-extension":"This file format isn’t supported by Corel Vector.","text.suggestion-open-image":"This file can’t be open directly. Please use “File > Import > Place Image...”","text.save-your-progress":"Save your progress to proceed","text.reload-warning":"We are currently doing some important maintenance work. Please save your design in the next five minutes to avoid loss of progress!","text.unsupported-sketch-version-50+":"This Sketch file was created in version 50+, which isn’t supported by Corel Vector yet.","text.default-export-author":"Corel Vector","text.default-export-producer":"Corel Vector PDF Exporter","text.opening-your-image":"Opening your image...","text.keep-fonts-eps":"Keep Font Information","text.account-deactivated":"Hi %name, we see that you haven’t activated your account yet. This is required in order to use %app. Please <a>click here</a> to get another activation email. In this email, follow the link to activate your account.","text.cannot-save":"Cannot save contents. Remove some layers or undo few steps and try again. And report us this bug!","title.save-cdr":"Save to CorelDRAW file...","title.save-des":"Save to Corel DESIGNER file...","title.download-cdr":"Download CorelDRAW File...","title.download-des":"Download Corel DESIGNER File...","text.saveing-error":"There was a problem saving your file. Please download it from File > Download to prevent losing progress. If the problem persists, please contact support via Help > Support > Contact us","text.save-no-space":"There was no enough space on your disk. Please free some space and try again"},"GEyeDropper":{"text.tooltip":"Pick a color from anywhere on the canvas","text.preview":"Move cursor into canvas."},"GFontsButton":{"text.web-fonts":"Web Fonts","text.system-fonts":"System Fonts","text.imported-fonts":"Imported Fonts"},"GLayerPanel":{"action.rename-layer":"Rename Layer/Item","action.toggle-outline":"Toggle Outline","action.toggle-layer-outline":"Toggle Layer Outline","action.toggle-layer-visibility":"Toggle Layer Visibility","action.change-layer-color":"Change Layer Color","action.reset-instance":"Reset instance"},"GPagePanel":{"action.rename-page":"Rename Page"},"GDesignerStyleEditor":{"text.style-attribution":"Shared Style Attribution","text.new-style":"New Style","text.style-editor":"Style Editor","text.style-creator":"Style Creator","text.style":"Style","text.fill":"Fill","text.border":"Border","text.effects":"Effects","text.text":"Text","action.create":"Create","text.style-organizer":"Style Organizer","action.finish":"Finish","text.no-style":"No Shared Style","action.create-new-style":"Create New Shared Style","action.organize-styles":"Organize Shared Styles"},"GCommonNames":{"text.file-not-supported":"This file format is not supported!","text.unknown-user":"Unknown","text.anonymous-user":"Anonymous","text.native-edit-menu":"Edit","text.replace":"Replace","text.plkt-no-size-changes":"This property can’t be changed","text.infinite-canvas-no-size-changes":"%name - this property can’t be changed with an infinite canvas","text.max-number-pages-cdr":"CorelDRAW doesn’t support more than 999 pages, please remove some.","text.original-drawing-cdr":"CorelDRAW original drawing","text.unsupported-fonts-cdr":"This design may contain unsupported fonts and the option “Save text layers as paths” from the Settings will be applied.","text.unsupported-infinite-canvas":"Pages with an infinite canvas are not supported. The page size will be trimmed to the existing elements.","text.ok":"Ok","text.open-cdr-large-file":"You are trying to open a large CorelDRAW design. It may take a while to load.","text.failed-open-cdr-large-file":"Your CorelDRAW design cannot be processed at this point, please try again later.","text.failed-open-cdr-max-dim":"The dimensions of the pages contained in this CorelDRAW design are too big. Please decrease their size or the design’s dpi and try again.","text.file-too-large-cannot-be-processed":"CorelDRAW designs bigger than 450 MB cannot be processed. Please remove objects and try again.","text.file-no-images-cannot-be-processed":"Could not download file because some images are missing.<br>Please retry and ensure that you have a proper Internet connection.","text.failed-open-cdr-facing-pages":"Facing pages are currently not supported. Please switch off this page layout setting in CorelDRAW and save the design again to show it properly.","text.download-large-cdr-file":"You are trying to download a large CorelDRAW design. This may take a while.","text.failed-download-large-cdr-file":"Your CorelDRAW design cannot be downloaded at this point. Please try again later or save or download to the CDRAPP format to keep your progress.","text.rgb":"RGB","text.rgb.r":"R","text.rgb.g":"G","text.rgb.b":"B","text.cmyk":"CMYK","text.cmyk.c":"C","text.cmyk.m":"M","text.cmyk.y":"Y","text.cmyk.k":"K","text.version":"Version","text.internal-version":"Internal version","text.build":"Build","text.commit":"Commit","text.save-before-logging-out":"Please save your designs before logging out to avoid losing progress.","text.dpi":"DPI","property-h":"H","property-w":"W","text.chrome-untitled":"Untitled","text.untitled-image":"Untitled image","text.maintenance-title":"We are currently updating Corel Vector to a new version.","text.maintenance-info":"It will be available again in a few minutes.","text.cancel":"Cancel","text.save":"Save","text.cancel-loading":"Cancel","text.loading":"Loading","text.saving":"Saving","text.loading-file":"Loading %name","text.saving-file":"Saving %name, please wait to avoid losing any progress.","text.inside":"Inside","text.none":"None","action.toggle-lock":"Toggle Locker","action.toggle-visibility":"Toggle Visibility","evenodd.non-zero":"Non-Zero (Fill Holes)","evenodd.even-odd":"Even-Odd (Keep Holes)","action.change-fill-rule":"Change fill rule","action.change-blending-mode":"Change blending mode","text.opacity":"Opacity","text.blending":"Blending","text.position":"Position","text.size":"Size","text.color":"Color","text.angle":"Angle","text.export":"Export","text.format":"Format","text.default":"Default","text.web":"Web","text.colors":"Colors","arrow-paste.alert":"Select a shape, copy it to clipboard then paste it as arrow here.","text.height":"Height","text.width":"Width","text.unit":"Unit","text.advanced":"Advanced","text.global":"Global","text.document":"Document","text.corner":"Corner","text.autoscale-corners":"Autoscale Corners","text.radius":"Radius","text.angles":"Angles","text.advanced-settings":"Advanced Settings","action.change-corners":"Change corners","text.grid":"Grid","text.background-color":"Background","text.left":"Left","text.top":"Top","text.outside":"Outside","action.rotate":"Rotate","action.move":"Move","action.apply":"Apply","text.document-modified":"The document \\"%title\\" has been modified, do you want to save it?","text.guide-lines":"Guide Lines","text.full-pixels":"Full Pixels","text.anchor-points":"Anchor Points","text.shapes":"Shapes","text.pages":"Pages","tool.pointer":"Pointer","tool.subselect":"Subselect","tool.lasso":"Lasso","tool.layer":"Layer","tool.slice":"Slice","tool.pen":"Pen","tool.bezigon":"Bezigon","tool.freehand":"Freehand","tool.magichand":"Magic Hand","tool.knife":"Knife","tool.line":"Line","tool.rectangle":"Rectangle","tool.ellipse":"Ellipse","tool.polygon":"Polygon","tool.triangle":"Triangle","tool.star":"Star","tool.text":"Text","tool.pan":"Pan","tool.zoom":"Zoom","text.bottom":"Bottom","text.right":"Right","text.page":"Page","text.active":"Active","text.loading-failed":"Loading has failed","text.syncing-failed":"Syncing has failed","text.unable-to-save":"Unable to save the document. Do you have the right permissions?","text.try-again":"Try again","text.merge":"Merge","text.finish":"Finish","action.sign-out":"Log out","text.snap-to":"Snap to","text.snap-to-action":"Snap to %action","texture.position.auto":"Auto","texture.position.top":"Top","texture.position.left":"Left","texture.position.center":"Center","texture.position.right":"Right","texture.position.bottom":"Bottom","texture.repeat.repeat":"Both","texture.repeat.repeat-x":"Horizontal","texture.repeat.repeat-y":"Vertical","texture.repeat.no-repeat":"None","texture.size.auto":"Auto","texture.size.contain":"Contain","texture.size.cover":"Cover","texture.size.percent":"Percent","texture.size.length":"Length","texture.scale.fill":"Fill","texture.scale.fit":"Fit","texture.scale.stretch":"Stretch","texture.scale.tile":"Tile","noise.type.original":"Original","noise.type.black":"Black","noise.type.white":"White","noise.type.color":"Color","text.synchronizing-file":"Synchronizing %name","text.synchronizing":"Synchronizing","text.downloading":"Downloading","text.downloading-file":"Downloading %name","text.synch-failed":"Sync failed! Retrying","text.failed-to-synch":"Failed to sync!","template.presentation":"Presentation","template.blog-graphic":"Blog Graphic","template.facebook-post":"Facebook Post","template.social-media":"Social Media","template.poster":"Poster","template.posters-and-banners":"Posters & Banners","template.books":"Books","template.marketing":"Marketing","template.calendars-and-planners":"Calendars & Planners","template.cards-and-invitations":"Cards & Invitations","template.subcategory.cover-photos":"Cover Photos","template.subcategory.posts":"Posts","template.subcategory.stories":"Stories","template.subcategory.profile-pictures-thumbnails":"Profile Pictures & Thumbnails","template.subcategory.book-layouts":"Book Layouts","template.subcategory.scrapbooks":"Scrapbooks","template.subcategory.business-cards":"Business Cards","template.subcategory.email-templates-headers":"Email Templates & Headers","template.subcategory.letterhead":"Letterhead","template.subcategory.presentation":"Presentation","template.subcategory.proposals-reports":"Proposals & Reports","template.subcategory.resumes":"Resumes","template.subcategory.calendars":"Calendars","template.subcategory.planners":"Planners","template.subcategory.greeting-cards":"Greeting Cards","template.subcategory.invitations":"Invitations","template.subcategory.postcards":"Postcards","template.subcategory.recipe-cards":"Recipe Cards","template.subcategory.brochures-flyers":"Brochures & Flyers","template.subcategory.catalogs-informational-books":"Catalogs & Informational Books","template.subcategory.certificates":"Certificates","template.subcategory.infographics":"Infographics & Mind maps","template.subcategory.labels-stickers":"Labels & Stickers","template.subcategory-logos":"Logos","template.subcategory.menus":"Menus","template.subcategory.newsletters":"Newsletters","template.subcategory.posters-signs-Banners":"Posters, Signs & Banners","template.a4":"A4","template.business":"Business","template.card":"Card","template.greeting-card":"Greeting Cards","template.advertisement":"Advertisements","template.menu-and-brochure":"Menus & Brochures","element.chart":"Charts","element.emoji":"Emojis","element.shape":"Shapes","element.icons":"Icons","element.line":"Lines","element.sticker":"Stickers","element.illustration":"Illustrations","element.frame":"Frames","element.icon":"Icons","element.image":"Unsplash Photos","element.ui":"Prototyping","element.ui.ios":"iOS","element.ui.material":"Material","element.ui.windows":"Windows","element.icon.ios":"iOS","element.icon.material":"Material","element.icon.windows":"Windows","element.all":"All","element.search":"Search","text.save-to-file":"Save to File","text.save-to-cloud":"Save to Cloud","text.back-to-top":"Back to top","element.illustration.realistic":"Realistic","element.illustration.line":"Line","element.illustration.color":"Color","element.illustration.solid":"Solid","element.illustration.x-ray":"X-Ray","element.icon.animals":"Animals","element.icon.arrows":"Arrows","element.icon.astrology":"Astrology","element.icon.city":"City","element.icon.fashion":"Fashion","element.icon.finance-and-business":"Finance And Business","element.icon.food-and-objects":"Food And Objects","element.icon.gaming-and-cinema":"Gaming And Cinema","element.icon.industry-and-military":"Industry And Military","element.icon.logos":"Logos","element.icon.music":"Music","element.icon.office-and-computer":"Office And Computer","element.icon.people-and-gestures":"People And Gestures","element.icon.prototyping-material":"Prototyping Material","element.icon.prototyping-windows":"Prototyping Windows","element.icon.prototyping-ios":"Prototyping iOs","element.icon.sports-and-healthcare":"Sports And Healthcare","element.icon.time-and-weather":"Time And Weather","element.icon.travel-and-holidays":"Travel And Holidays","element.icon.very-basic":"Very Basic","element.emoji.klex":"Klex","element.emoji.classic":"Classic","element.emoji.cube":"Cube","element.emoji.cone":"Cone","element.image.texture":"Textures","element.image.nature":"Nature","element.image.architecture":"Architecture","element.image.business":"Business","element.image.animals":"Animals","element.image.food":"Food","text.cloud-login":"Cloud login","text.save-to-cloud-failed":"An error has occurred while saving to cloud. Do you want to save your file on the computer to avoid losing work?","text.fail-import-swatch":"This swatches file is invalid and could not be imported","text.import-swatches":"Import Swatches","text.export-swatches":"Export Swatches","text.downloading-fonts":"Downloading fonts","text.fonts-downloaded":"Fonts downloaded! Restart the app","text.error-downloading":"Error downloading fonts! Try again","action.settings":"Account settings","text.image":"Image","electron.container.unsaved-documents":"Are you sure you want to quit as there are unsaved documents?","electron.container.confirm":"Confirm","electron.container.synchronizing-documents":"Please wait until the file has finished saving to avoid losing progress.","text.snap-to-grid":"Grid","text.snap-to-guide-lines":"Guide Lines","text.snap-to-full-pixels":"Full Pixels","text.snap-to-anchor-points":"Anchor Points","text.snap-to-shapes":"Shapes","text.snap-to-pages":"Pages","text.start-trial-now-button":"Start the %days-day trial now","text.license-trial-day-left":"Trial: %days day left","text.license-trial-days-left":"Trial: %days days left","text.license-trial-expires-today":"Trial expires today","text.license-trial-expired":"Trial expired","text.license-pro-expired":"Your subscription has expired","text.license-offline-title":"The offline mode of Corel Vector is a Corel Vector feature","text.license-offline-subtitle":"Please save your designs in order to avoid losing progress.","text.license-offline-expired-subtitle":"Please establish an internet connection to keep using Corel Vector.","text.license-offline-footer":"The app %close in %time min.","text.license-offline-footer-highlight":"will close automatically","text.pdf-export-error":"There was a problem exporting your file. Please contact support from Help > Contact us and include the original .gvdesign file.","text.email-sent-title":"Email sent.","text.email-sent-info":"Please be sure to also check the spam/junk folder of your email client.","text.something-wrong":"Something is wrong.","text.something-wrong.try-again":"Something went wrong, please try again.","text.dont-save":"Don\'t save","text.buy-now":"UPGRADE NOW","text.error-emtpy-infinite-canvas":"Saving and exporting designs with an empty infinite canvas is not allowed.","text.error-nothing-to-save":"Nothing to save.","text.error-saving-file":"Error occurred, file could not be saved. Please contact support.","text.running-out-of-cloud-space":"You are running out of Cloud space. Please delete some older files to keep working.","text.countdown-timer":"%minutesm %secondss","text.please-wait-avoid-losing-progress":"Please wait until the file has finished saving to avoid losing progress.","text.user-account-deactivated":"Hey %name,  we couldn\'t confirm your email address in the last 3 days.<br>Your account is now deactivated!","text.activating-your-account":"Thanks for activating your account.","text.activating-your-account-subtitle":"Please enjoy designing in Corel Vector.","text.checking-connectivity":"Checking connectivity...","element.child.name.realistic":"Realistic","element.child.name.linear":"Linear","element.child.name.multi-colored":"Multi-Colored","element.child.name.solid":"Solid","element.child.name.x-ray":"X-Ray","element.child.name.alphabet":"Alphabet","element.child.name.animals":"Animals","element.child.name.arrows":"Arrows","element.child.name.architecture":"Architecture","element.child.name.astrology":"Astrology","element.child.name.baby":"Baby","element.child.name.beauty":"Beauty","element.child.name.business":"Business","element.child.name.cinema":"Cinema","element.child.name.city":"City","element.child.name.clothing":"Clothing","element.child.name.computer-hardware":"Computer Hardware","element.child.name.crime":"Crime","element.child.name.culture":"Culture","element.child.name.diy":"DIY","element.child.name.data":"Data","element.child.name.drinks":"Drinks","element.child.name.ecommerce":"Ecommerce","element.child.name.editing":"Editing","element.child.name.events":"Events","element.child.name.experimental":"Experimental","element.child.name.fashion":"Fashion","element.child.name.files":"Files","element.child.name.films":"Films","element.child.name.finance":"Finance","element.child.name.flags":"Flags","element.child.name.folders":"Folders","element.child.name.food":"Food","element.child.name.free-popular":"Free Popular","element.child.name.gaming":"Gaming","element.child.name.hands":"Hands","element.child.name.health":"Health","element.child.name.healthcare":"Healthcare","element.child.name.holidays":"Holidays","element.child.name.household":"Household","element.child.name.industry":"Industry","element.child.name.logos":"Logos","element.child.name.maps":"Maps","element.child.name.media-controls":"Media Controls","element.child.name.messaging":"Messaging","element.child.name.military":"Military","element.child.name.mobile":"Mobile","element.child.name.music":"Music","element.child.name.nature":"Nature","element.child.name.network":"Network","element.child.name.operating-systems":"Operating Systems","element.child.name.people":"People","element.child.name.photo-and-video":"Photo and Video","element.child.name.plants":"Plants","element.child.name.printing":"Printing","element.child.name.profile":"Profile","element.child.name.programming":"Programming","element.child.name.science":"Science","element.child.name.security":"Security","element.child.name.shopping":"Shopping","element.child.name.social-media":"Social Media","element.child.name.sports":"Sports","element.child.name.spirituality":"Spirituality","element.child.name.textures":"Textures","element.child.name.time-and-date":"Time And Date","element.child.name.transport":"Transport","element.child.name.travel":"Travel","element.child.name.user-interface":"User Interface","element.child.name.wallpapers":"Wallpapers","element.child.name.weather":"Weather","element.child.name.klex":"Klex","element.child.name.classic":"Classic","element.child.name.cube":"Cube","element.child.name.cone":"Cone","element.child.name.current-events":"Current Events","text.try-out-coreldrawpp-pro":"Try out CorelDRAW.app PRO","text.cant-change-cdr-limitations":"This page property can’t be changed in the currently imported design due to certain limitations.","text.filename-is-not-correct":"You have entered an invalid file name: %filename. Please try again.","text.message-explore-cloud-templates":"You haven’t added anything to Corel Vector yet. <br>What about trying out these example files?","text.try-this-feature-pro-tooltip-text":"Upgrade to unlock this feature.","text.learn-more":"Learn more","text.page-toggle-lock-tooltip-title":"Lock page","text.page-toggle-lock-tooltip-description":"Lock all objects on the current page.","text.page-toggle-visibility-tooltip-title":"Toggle visibility","text.page-toggle-visibility-tooltip-description":"Hide all objects on the page.","text.layer-toggle-lock-tooltip-title":"Lock layer","text.layer-toggle-lock-tooltip-description":"Lock layer or element.","text.layer-toggle-visibility-tooltip-title":"Toggle visibility","text.layer-toggle-visibility-tooltip-description":"Hide layer or element.","text.layer-toggle-outline-tooltip-title":"Toggle outline","text.symbol-panel-symbol-tooltip-description":"Click to highlight master on canvas. Drag on canvas to place an instance","text.corner-radius-slider-tooltip-title":"Corner slider","text.corner-radius-slider-tooltip-description":"Click and drag to make the corners of the selected elemente rounded.","text.login-in-to-continue":"Please login to continue.","error.http.forbidden":"Error occurred. You are not allowed to perform this action.","text.library-load-more":"Load more..."},"GCloudTemplates":{"text.welcome":"Welcome","text.templates":"Templates"},"GAlignProperties":{"text.space-x":"Space X","text.space-y":"Space Y"},"GAppearanceProperties":{"title":"Appearance","text.darken-image":"Darken image","text.lighten-image":"Lighten image","text.boost-contrast":"Boost contrast","text.adjust-colors":"Adjust colors","text.invert-colors":"Invert colors","text.masking":"Masking","blending.mask":"Mask","blending.inverse-mask":"Inverse Mask","text.style":"Style","action.sync":"Sync","text.multiple-selection":"Multiple selection","text.no-style":"No Shared Style","text.opacity-slider-tooltip-title":"Opacity slider","text.opacity-slider-tooltip-description":"Click and drag to make to change the opacity of the selected element.","text.blend-tooltip-title":"Blending mode","text.blend-tooltip-description":"Click to choose how this object will blend with underlying objects. Modes that are not compatible with CSS/SVG/PDF are marked with an asterisk.","text.shared-styles-tooltip-title":"Shared styles","text.shared-styles-tooltip-description":"Click to chose a shared style or create a new one."},"GBoolOpProperties":{"action.modify-merge-mode":"Modify merge mode","text.boolean":"Compound","text.union":"Union","text.intersect":"Intersect","text.subtract":"Subtract","text.difference":"Difference"},"GBorderPaintLayerProperties":{"title":"Borders","text.subtract":"Subtract","text.difference":"Difference","option.custom":"Custom","text.ends":"Ends","text.joins":"Joins","text.dash":"Dash","text.gap":"Gap","text.outline":"Outline","text.autoscale-borders":"Autoscale Borders","text.advanced-stroke-settings":"Advanced stroke settings","action.remove-selected-border":"Remove Selected Border","action.remove-border":"Remove Border","action.add-border":"Add Border","action.duplicate-border":"Duplicate Border","action.move-border":"Move Border","action.change-border-properties":"Change Border Properties","text.start-arrow":"Start Arrow","text.end-arrow":"End Arrow","text.autoscale-borders-tooltip":"Only with Transform tool","text.marker-position":"Position","text.border-alignment.disabled":"Please remove Open Path shape from selection to use border alignment","text.advanced-stroke-settings-tooltip-title":"Advanced Border settings","text.advanced-stroke-settings-tooltip-description":"Change Border Caps, Position, Dashes and Arrowheads.","text.remove-border-tooltip-title":"Remove Selected Border","text.remove-border-tooltip-description":"Click to remove the selected border from the element.","text.add-border-tooltip-title":"Add Border","text.add-border-tooltip-description":"Click to add a new border to the selected element.","text.border-width-tooltip-title":"Border width","text.border-width-tooltip-description":"The width of the border in current document units.","text.copy-border":"The Border was copied to your clipboard.","text.miter-limit":"Miter limit","text.miter-limit-tooltip-description":"Value at which the sharp corners will be converted to beveled."},"GContextMenu":{"text.select-same":"Select Same","text.arrange":"Arrange","text.align":"Align","text.transform":"Transform","text.select":"Select","text.paste":"Paste","text.create-compound":"Create Compound","text.convert-to-path":"Convert to Path","text.create-symbol":"Create Symbol","text.go-to-master":"Go to Master","text.text":"Text","text.crop":"Crop","text.original-size":"Original Size","text.replace-image":"Replace Image...","text.image":"Image","page-panel.text.duplicate":"Duplicate Page","page-panel.text.copy":"Copy Page","page-panel.text.delete":"Delete Page","page-panel.text.export":"Export Page","fill-properties-panel.text.delete-fill":"Delete Fill","fill-properties-panel.text.copy-fill":"Copy Fill","border-properties-panel.text.advanced-settings":"Advanced Border Settings","border-properties-panel.text.delete-border":"Delete Border","border-properties-panel.text.copy-border":"Copy Border","effect-properties-panel.text.apply-to-element":"Apply to Whole Element","effect-properties-panel.text.apply-to-fill":"Apply to Fill Only","effect-properties-panel.text.apply-to-border":"Apply to Border Only","effect-properties-panel.text.copy-effect":"Copy Effect"},"GDimensionProperties":{"action.keep-ratio":"Keep Ratio","text.align":"Align","text.transform":"Transform","text.select":"Select","text.anchors":"Anchors","text.alignTitle":"ALIGN & DISTRIBUTE","text.setting":"Settings","text.sameWidth":"Same width","text.sameHeight":"Same height","text.fullUnit":"Snap to full unit","text.halfUnit":"Snap to half unit","action.anchor-left":"Anchor Left","action.anchor-center":"Anchor Center","action.anchor-right":"Anchor Right","action.anchor-top":"Anchor Top","action.anchor-middle":"Anchor Middle","action.anchor-bottom":"Anchor Bottom","action.change-size":"Change Size","action.change-anchor":"Change Anchor","text.property-x-y-tooltip-title":"Position of the element","text.property-x-y-tooltip-description":"Set X and Y axis coordinates for the position of the selected element.","text.property-w-h-tooltip-title":"Size of the element","text.property-w-h-tooltip-description":"Set width and height for the size of the selected element.","text.keep-ratio-tooltip-title":"Keep Ratio","text.keep-ratio-tooltip-description":"Keep the proportions between width and height.","text.transform-button-tooltip-title":"Transform tool","text.transform-button-tooltip-description":"Transform the selected element.","text.rotate-angle-tooltip-title":"Angle of Rotation","text.rotate-angle-tooltip-description":"Set an angle to rotate the seleted element.","text.anchor-left-tooltip-title":"Anchor to the Left","text.anchor-left-tooltip-description":"Anchor selected element to the left.","text.anchor-center-tooltip-title":"Anchor Center","text.anchor-center-tooltip-description":"Anchor selected element to the center.","text.anchor-right-tooltip-title":"Anchor to the Right","text.anchor-right-tooltip-description":"Anchor selected element to the right.","text.anchor-top-tooltip-title":"Anchor Top","text.anchor-top-tooltip-description":"Anchor selected element to the top.","text.anchor-middle-tooltip-title":"Anchor to the Middle","text.anchor-middle-tooltip-description":"Anchor selected element to the middle.","text.anchor-bottom-tooltip-title":"Anchor to the Bottom","text.anchor-bottom-tooltip-description":"Anchor selected element to the bottom.","text.transform-title":"TRANSFORM","text.transform-advanced":"ADVANCED TRANSFORM","text.transform-apply":"Apply Transformations"},"GEffectProperties":{"text.most-used":"Most Used","title":"Effects","action.add":"Add Effect","action.toggle-collapse":"Toggle Effect Collapse","action.toggle-visibility":"Toggle Effect Visibility","action.remove":"Remove Effect","action.change-layer":"Change Effect Layer","action.move":"Move Effect","action.duplicate":"Duplicate Effect","action.change-properties":"Change Effect Properties","text.applies-to":"Applies to","text.more":"More","text.blur":"Blur","text.bend":"Bend","text.softness":"Softness","text.coverage":"Coverage","text.offset":"Offset","text.length":"Length","text.density":"Density","text.fade":"Fade","text.load-acv":"Load ACV","text.padding":"Padding","text.artistic":"Artistic","text.adjust":"Adjust","text.other":"Other","text.shadow":"Shadow","text.distortion":"Distortion","text.blend":"Blend","text.height":"Height","text.color.gradient.grp.instagram":"Instagram","text.color.gradient.opt.1977":"1977","text.color.gradient.opt.brannan":"Brannan","text.color.gradient.opt.gotham":"Gotham","text.color.gradient.opt.hefe":"Hefe","text.color.gradient.opt.lord-kelvin":"Lord Kelvin","text.color.gradient.opt.nashville":"Nashville","text.color.gradient.opt.x-pro-ii":"X-PRO II","text.add-effect-tooltip-title":"Add Effect","text.add-effect-tooltip-description":"Click to choose an effect to be added to the selected element.","text.copy-effect":"The Effect was copied to your clipboard."},"GEllipseProperties":{"action.change-shape":"Change shape","action.change-angle":"Change angle","text.shape":"Shape","text.ellipse-to-center":"Ellipse set border allignment to center"},"GErrorHandler":{"text.breakfast":"It\'s time for breakfast. Please save your file and restart the app.","text.sorry":"Corel Vector unexpectedly ran into an error. Sorry about that, the error message was sent to us and we will fix it as soon as possible.","text.close":"Close"},"GExportDialog":{"text.warning":"Warning:","text.canvas-bigger-than-200-in":"The canvas is bigger than 200 inches and might not be opened correctly in some PDF viewers.","text.export-to":"Export to","text.do-not-downsample-images":"Don’t downsample bitmap images","text.do-not-downsample-images-info":"Downsampling will reduce image quality but create a smaller PDF document.","text.rasterize-unsupported-objects":"Rasterize unsupported objects by CorelDRAW","text.canvas":"Canvas","text.selection":"Selection","text.assets":"Assets","text.jpeg-quality":"JPEG Quality","text.color-mode":"Color Mode","text.with-effects":"With effects","text.export-as-curves":"Export text as curves","text.export-all":"Export all","text.exporting":"Exporting, please wait","text.medium-quality":"Medium Quality Print","text.high-quality":"High Quality Print","text.selection-warning":"Please select one or more shapes to export them.","text.assets-warning":"To export an asset, select one or more shapes and click on \\"Make exportable\\" on the inspector.","text.preparing-preview":"Preparing preview...","text.decimal-places-precision":"Decimal Places","text.page-background":"Use page color","text.custom-background":"Use custom color","text.no-background":"Transparent","text.preserve-svg-editing-capabilites":"Preserve editing capabilities for SVG files","text.preserve-svg-editing-capabilites-description":"This will ensure that SVGs exported from Corel Vector can be properly re-imported.","text.default-limit":"Due to technical limitations it isn’t possible to export designs larger than 4000 px (respectively 141 cm or 55.55 in) at 300 dpi. Please resize your design or choose less dpi and try again.","text.pdf-limit":"Due to technical limitations, your design can’t be exported – it contains images larger than %limit. Please resize your design and try again.","text.layer-as-id":"Retain attributes and add IDs","text.layer-as-id-info":"All class and type attributes are retained and element names are added as IDs.","text.want-save-before-export":"Do you want to save this file before exporting?"},"GExportProperties":{"text.make-exportable":"Make Exportable","action.create-slice":"Create Slice","action.add":"Add Export","action.create-slices":"Create Slice(s)","action.update-setting":"Update Export Setting","action.remove":"Remove Export","text.suffix":"Suffix","text.multiple":"Multiple","text.format":"Format","text.create-slice-tooltip-title":"Create slice","text.create-slice-tooltip-description":"Click and drag to create a slice to be exported as an asset.","text.add-export-tooltip-title":"Add Export","text.add-export-tooltip-description":"Turn a selected object into an exportable asset."},"GFillPaintLayerProperties":{"title":"Fills","action.advanced-settings":"Advanced Fill Settings","action.remove-selected":"Remove Selected Fill","action.remove":"Remove Fill","action.add":"Add Fill","text.fill-rule":"Fill-Rule","action.modify":"Modify Fill","action.change-properties":"Change Fill Properties","action.duplicate":"Duplicate Fill","action.move":"Move Fill","text.remove-layer-tooltip-title":"Remove selected fill","text.remove-layer-tooltip-description":"Click to remove the selected fill from the element.","text.add-layer-tooltip-title":"Add fill","text.add-layer-tooltip-description":"Click to add a new fill to the selected element.","text.fill-rule-tooltip-title":"Fill rule ","text.fill-rule-tooltip-description":"Winding fill rule define how holes in shapes are shown.","text.copy-fill":"The Fill was copied to your clipboard."},"GImageProperties":{"text.checking-profile":"Checking CMYK Profile","action.replace":"Replace","action.replace-image":"Replace Image","action.original-size":"Orig. Size","action.reset-size":"Reset Image Size","action.no-crop":"No crop","action.reset-cropping":"Reset Image Cropping","text.check-profile":"Check CMYK Profile","text.loading-profile":"Loading CMYK Profile","action.crop":"Crop"},"GMissingFontsDialog":{"text.fonts-missing":"Some fonts in the document are missing","text.fonts-not-found":"The following fonts are used, but cannot be found in Corel Vector","action.keep-fonts":"Keep Fonts","action.replace-fonts":"Replace Fonts","text.turn-disabled-function":"You can also try to turn on disabled functions or do it later in font browser"},"GNewDocumentDialog":{"text.connect":"Connect","text.resources":"Resources","text.set-theme":"Set your Theme","text.set-language":"Set your Language","text.discuss":"Discuss","text.whats-new":"What\'s new","text.blog":"Blog","text.welcome":"Welcome to Corel Vector","action.open-file":"Open File","text.restart-app":"Restart your app to apply changes!","text.changelog":"Changelog","text.start-option":"New Design","text.start-option-description":"Design creation starts here","text.templates-option":"New from Template","text.templates-option-description":"Create a new design based on a template","text.cloud-option":"Open from Corel Vector","text.cloud-option-description":"Open and manage your cloud files","text.local-option":"Open from Computer","text.local-option-description":"Open a locally saved file","action.create-canvas":"Create!","action.leave-empty-infinite":"Leave it empty for infinite canvas","text.templates-login-title":"Cloud Templates","text.templates-login-phrase1":"Get inspiration and quickly start a design over thousands of free","text.templates-login-phrase2":"pro-grade templates, designed and updated by our team.","text.cloud-login-title":"Introducing Corel Vector","text.cloud-login-phrase1":"Quickly create awesome graphics and share them with the world.","text.cloud-login-phrase2":"One account, one workspace and two awesome free tools.","text.cloud-login":"Login","text.cloud-signup":"Sign up","text.old-user-title":"Welcome back to Corel Vector!","text.old-user-p1-p1":"Create a ","text.old-user-p1-p2":"new design","text.old-user-p1-p3":" from zero using pre-made or custom sizes.","text.old-user-p2-p1":"You can quick start a design with a ","text.old-user-p2-p2":"pre-made template","text.old-user-p2-p3":" here.","text.old-user-p3-p1":"Corel Vector has evolved and is now even more powerful, but don\'t worry. All ","text.old-user-p3-p2":"your old files are still here","text.old-user-p3-p3":" in the same account and can be acessed over here with the","text.old-user-p3-p4":" same login and password.","text.chk-got-it":"I got it, don\'t display this message again.","text.btn-read-more":"Read more","text.btn-got-it":"Got it, start designing","text.recent-option":"Open Recent","text.recent-option-description":"Open a recent opened file","text.recent-option-empty":"No Recent Files","text.start-option-check":"Don\'t show anymore at startup","text.about":"About","text.try-out-pro":"Try out Corel Vector","text.start-free-trial":"Start a 15-day free trial of the advanced<br/> PRO features","text.example-files":"Example Files","text.option-not-available-in-view-mode":"This option is not available in Viewer Mode."},"GUnsupportedFeaturesDialog":{"text.title-unsupported":"This design contains features, that are not supported for SVG files. These features are:","text.checked-unsupported":"Don’t show anymore"},"GSymbolProperties":{"title":"Symbol","text.instance":"instance","text.symbol":"symbol","text.instances":"instances","text.symbols":"symbols","text.master":"master","text.instanceof":"instance of","text.chooseinstance":"Instance"},"GPageProperties":{"title":"Page","text.background":"Background","action.change-background":"Change page background","action.change-canvas-opacity":"Change canvas opacity","action.change-size":"Change page size","action.change-bleeding":"Change bleeding","action.change-margins":"Change margins","action.change-margin":"Change margin","action.equal-margin":"Equal Margins","action.assign-master-page":"Assign Master Page","text.bleed":"Bleed","text.margin":"Margin","text.master":"Master","text.size-custom":"Custom Size","text.size-infinite":"Infinite Canvas","text.size-trim":"Trim Canvas","text.clip-content":"Clip content","text.page-size":"Page Size","text.rotate-canvas":"Rotate Canvas","text.rotate-canvas-tooltip-title":"Rotate Canvas","text.rotate-canvas-tooltip-description":"Rotate the canvas to a portrait or landscape.","text.trim-canvas-tooltip-title":"Trim Canvas","text.trim-canvas-tooltip-description":"Trim the page size to fit the current content.","text.clip-content-tooltip-title":"Clip Content","text.clip-content-tooltip-description":"Hide objects that are outside of the current canvas area.","text.bleed-tooltip-title":"Bleed","text.bleed-tooltip-description":"Define a bleed size for printing purposes.","text.margin-tooltip-title":"Margin","text.margin-tooltip-description":"Define margin size. Click the link icon to set each margin individually.","text.master-tooltip-title":"Master page","text.master-tooltip-description":"Choose the page to be used as a master for current page."},"GPathProperties":{"action.modify-path-node-type":"Modify Path Node(s) Type","text.closed":"Closed","text.joint":"Joint","text.straight":"Straight","action.modify-path-properties":"Modify Path Properties","action.modify-point-properties":"Modify Point Properties"},"GPatternChooser":{"text.advanced":"Advanced Options","text.scale":"Scale","text.rgb-color":"RGB Color","text.hsb-color":"HSB Color","text.cmyk-color":"CMYK Color","action.system-color-picker":"System Color Picker","action.change-stops-order":"Change order of stops","action.rotate-gradient-left":"Rotate gradient left","action.rotate-gradient-right":"Rotate gradient right","text.swatches":"Swatches","text.in-use":"In use","text.mixer":"Mixer","text.hex":"Hex","text.automatic":"Automatic","text.intensity":"Intensity","text.type":"Type","action.choose-image":"Choose Image","action.set-transparency-mask":"Set as transparency mask","text.repeat":"Repeat","action.remove-swatch":"Remove Swatch","text.tints":"Tints","text.shades":"Shades","text.tones":"Tones","text.mixes":"Mixes","action.copy-color":"Copy Color","action.paste-color":"Paste Color","action.add-to-document-swatches":"Add to Document Swatches","action.add-to-global-swatches":"Add to Global Swatches","text.equal-swatch-alert":"An equal swatch was already added.","pattern-type.transparent":"Transparent","pattern-type.color":"Color Fill","pattern-type.lineargradient":"Linear Gradient","pattern-type.radialgradient":"Radial Gradient","pattern-type.angulargradient":"Angular Gradient","pattern-type.texture":"Texture Fill","pattern-type.noise":"Noise","pattern-type.backgroundfill":"Background Fill","text.error-on-loading":"Some error ocurred during loading.","text.color-picker-tooltip-title":"Choose a color","text.color-picker-tooltip-description":"Choose a color, gradient or texture for the selected element.","text.eyedropper-tooltip-title":"Pick a color from the canvas","text.eyedropper-tooltip-description":"Hover the eyedropper over the canvas to pick a color for the selected element.","action.add-swatch":"Add swatch"},"GPolygonProperties":{"action.change-radius":"Change radius","action.change-angle":"Change angle","action.change-corner-type":"Change corner type","action.change-corner-radius":"Change corner radius","text.points":"Points","text.plain-edges":"Plain Edges","text.corners":"Corners","action.change-polygon-size":"Change polygon size","action.change-polygon-points":"Change polygon points"},"GRectangleProperties":{"text.uniform-corner-smoothness":"Uniform Corner-Smoothness","text.horizontal-corner-smoothness":"Horizontal Corner-Smoothness","text.vertical-corner-smoothness":"Vertical Corner-Smoothness","text.corner-type":"Corner-Type","text.uniform-corners":"Uniform Corners","action.modify-rectangle-properties":"Modify Rectangle Properties"},"GSceneProperties":{"action.change-grid-settings":"Change grid settings","text.on":"On","text.isometric":"Isometric","text.off":"Off","action.change-canvas-unit":"Change canvas unit","cloud.sync":"Sync Cloud","cloud.sync.info":"Keep your designs always updated and synchronized working online and offline with Corel Vector.","cloud.sync.enable":"Enable Sync","cloud.sync.more":"Learn more","cloud.sync.label":"Cloud Synchronization","text.dpi":"DPI","action.change-canvas-dpi":"Change canvas dpi","text.unit-tooltip-title":"Units","text.unit-tooltip-description":"Define the measurement unit of the document.","text.dpi-tooltip-title":"Dots per Inch","text.grid-tooltip-title":"Grid","text.grid-tooltip-description-off":"Turn off the grid.","text.grid-tooltip-description-on":"Turn on the grid.","text.grid-tooltip-description-isometric":"Turn on the Isometric grid.","text.color-mode":"Color Mode","action.change-color-mode":"Change color mode","text.color-mode-tooltip-title":"Color Mode","text.color-mode-tooltip-description":"Set the default color mode that is used when picking the color of elements.","text.reminder":"Please note that switching the color mode doesn’t alter existing elements on the canvas and only sets it as the default color mode from now on."},"GSettingsDialog":{"setting.disable-scrubbing":"Disable changing values in numeric input fields with dragging.","setting.enable_steps_debug":"Allow steps import/export","setting.highlight-on-hover":"Highlight on hover","setting.highlight-on-hover-description":"Highlight shapes when hovering them with the mouse.","setting.show-coordinates":"Show coordinates tooltip","setting.show-coordinates-description":"Show current coordinates tooltip when creating or moving shapes.","setting.show-size":"Show size tooltip","setting.show-size-description":"Show current size tooltip when creating or resizing shapes.","setting.show-angle":"Show angle tooltip","setting.show-angle-description":"Show current rotation angle tooltip when rotating shapes.","setting.invert-selection-mode":"Invert selection mode","setting.invert-selection-mode-description":"Only select objects which are completely inside the selection area, hold alt-key to switch between two modes.","setting.auto-expand-layers":"Auto expand layers","setting.auto-expand-layers-description":"When set auto-expands the layer tree for the current selection.","setting.auto-save":"Enable auto-save","setting.auto-save-description":"Files are saved automatically - please choose the interval (minutes) on the right. Please note that this feature is only available for files saved or synced to Corel Vector.","setting.auto-save-warning":"Auto-save: Warning for unsaved/local files","setting.auto-save-warning-description":"Show warning to remind about saving/syncing files to Corel Vector to enable auto-save. ","setting.auto-save-not-support-for-cdr-warning":"Auto-save: Reminder for CorelDRAW (CDR, DES) files","setting.auto-save-not-support-for-cdr-warning-description":"Show message to remind about saving to the CorelDRAW file format regularly.","setting.change-theme":"Change the theme of Corel Vector","setting.enable-beta":"Enable Beta version","setting.enable-beta-description":"Please note that beta versions are not meant for production work and may contain bugs. Please report them at <a href=\'https://discuss.gravit.io/c/designer/beta\'>our forum</a>.","setting.store-textpath":"Save text layers as paths","setting.store-textpath-description":"Saving paths will increase the file size but not require the fonts to be available.","setting.decimals-num":"Rounding","setting.decimals-num-description":"Please switch on to be able to define the number of decimal places where values are rounded in input fields.","action.save-changes":"Save Changes","text.gravish":"Gravish","text.dark-theme":"Dark Theme","text.light-theme":"Light Theme","setting.disable-warning-unsupported-features":"Disable warning messages of unsupported features","setting.disable-warning-unsupported-features-description":"Whether to disable warning message about unsupported features on svg exporter or not.","setting.eps-outline-fonts":"Outline fonts in EPS import","setting.eps-outline-fonts-description":"Fonts will be outlined so that they are not required to display the file correctly. Switch off to keep font information and edit text layers.","setting.ui-toolbar-alignment":"Left-aligned icons in the toolbar.","setting.disable-cdr-warning":"Disable warning message on CorelDRAW (CDR, DES) file open","setting.disable-cdr-warning-description":"Hides the message when opening a CDR or DES file for annotation in CorelDRAW.app.","setting.disable-cdr-unsupported-effects":"Disable warning message on Save as CorelDRAW (CDR, DES) file","setting.disable-cdr-unsupported-effects-description":"Hides the warning message when saving to the CorelDRAW file format.","setting.disable-cdr-unsupported-effect":"Disable warning message when editing CorelDRAW (CDR, DES) files","setting.disable-cdr-unsupported-effect-description":"Hides the warning message when creating incompatible objects in a CorelDRAW design.","setting.disable-notifications":"Disable notifications","setting.disable-notifications-description":"Stop receiving email notifications for new comments or annotations (can be changed for every design individually in the comments panel).","setting.create-backup-copy-of-file":"Create a backup copy of files","setting.create-backup-copy-of-file-description":"For every file you save or export, a hidden backup copy will be created automatically.","setting.email-notifications":"Email notifications","setting.email-notifications-description":"Set frequency of email notifications for new activity within the document","setting.email-notifications-frequency-every10min":"Every 10 mins","setting.email-notifications-frequency-onceaday":"Once a day","setting.email-notifications-frequency-instantly":"Instantly","setting.email-notifications-frequency-never":"Never"},"GSliceProperties":{"text.trim-transparent-pixels":"Trim transparent pixels","action.modify-slice-properties":"Modify Slice Properties"},"GTextProperties":{"text.stylisticset":"Stylistic set","text.language":"Language","text.list-type":"List Type","text.marker-none":"None","text.marker-bulleted":"Bulleted","text.marker-numbered":"Numbered","text.latin":"Latin","text.adlam":"Adlam","text.arabic":"Arabic","text.armenian":"Armenian","text.avestan":"Avestan","text.balinese":"Balinese","text.bamum":"Bamum","text.batak":"Batak","text.bengali":"Bengali","text.brahmi":"Brahmi","text.buginese":"Buginese","text.buhid":"Buhid","text.cham":"Cham","text.cherokee":"Cherokee","text.coptic":"Coptic","text.cyrillic":"Cyrillic","text.devanagari":"Devanagari","text.georgian":"Georgian","text.greek":"Greek","text.hangul":"Hangul","text.hebrew":"Hebrew","text.javanese":"Javanese","text.kaithi":"Kaithi","text.kannada":"Kannada","text.katakana":"Katakana","text.khmer":"Khmer","text.lao":"Lao","text.lepcha":"Lepcha","text.limbu":"Limbu","text.linear_b":"Linear_b","text.malayalam":"Malayalam","text.mandaic":"Mandaic","text.mongolian":"Mongolian","text.myanmar":"Myanmar","text.old_persian":"Old_persian","text.osmanya":"Osmanya","text.phoenician":"Phoenician","text.runic":"Runic","text.sundanese":"Sundanese","text.syriac":"Syriac","text.tagalog":"Tagalog","text.tai_le":"Tai_le","text.tai_tham":"Tai_tham","text.tai_viet":"Tai_viet","text.telugu":"Telugu","text.thai":"Thai","text.tibetan":"Tibetan","text.yi":"Yi","text.auto":"Auto","text.fix":"Fix","text.scale-content":"Autoscale Font","action.modify-text-properties":"Modify Text Properties","text.weight":"Weight","text.alignment":"Alignment","action.justify":"Justify","text.vertical":"Vertical","text.spacing":"Spacing","text.char":"Char","text.word":"Word","text.line":"Line","text.sizing":"Sizing","text.orientation":"Orientation","text.script":"Script","text.variant":"Variant","text.on-path":"On Path","text.reverse":"Reverse","text.distance":"Distance","text.edit":"The font is not available, continue to edit it?","text.transform":"Transform","text.transform-uppercase":"Uppercase","text.transform-capitalize":"Capitalize","text.transform-lowercase":"Lowercase","text.transform-smallcaps":"Small Caps","text.advanced-text-settings":"Advanced Settings","text.decoration":"Decoration","text.decoration-bold":"Bold","text.decoration-italic":"Italic","text.decoration-underline":"Underline","text.decoration-strikethrough":"Strikethrough","text.paragraph":"Paragraph","text.paragraph-indent":"Indent","text.paragraph-spacing":"Spacing After","text.typography":"Typography","text.typography-subscript":"Subscript","text.typography-superscript":"Superscript","text.typography-ligatures":"Ligatures","text.typography-fractions":"Fractions","text.orientation-ltr":"Left-to-right","text.orientation-rtl":"Right-to-left","text.orientation-ttb":"Top-to-bottom","text.decoration-strikeout":"Strikethrough","text.mixed":"Mixed","text.size":"Size","text.color":"Color","text.advanced-properties-icon-tooltip-title":"Advanced Text Properties","text.advanced-properties-icon-tooltip-description":"Manage advanced typography properties (Sub and Super script, Fractions, Ligatures, Change Case, Paragraph indent and spacing)."},"GToolbar":{"text.shared":"Shared","text.share":"Share","text.snap":"Snap","text.view":"View","text.select":"Select","text.path":"Path","text.shape":"Shape","text.text":"Text","text.group":"Group","text.clip":"Clip","text.split":"Ungroup","text.zoom":"Zoom","text.merge":"Create Compound Shape","text.zoom-button-tooltip-title":"Zoom","text.undoList-button-tooltip-title":"Extended undo list","text.undoList-button-tooltip-description":"See a list of actions performed lately to roll back to an older version of your design.<br/>","text.comment-toggle":"Comment Toggle","text.comment-on":"Show comments and annotations.","text.comment-off":"Hide comments and annotations."},"GTransformProperties":{"title":"Transform","text.advanced-transform-settings":"Advanced settings","text.scale":"Scale","text.skew":"Skew","text.copies":"Copies","action.apply-transformation":"Apply Transformation","text.move-tooltip-title":"Move element","text.move-tooltip-description":"Set a number to move the selected element horizontally or vertically.","text.scale-tooltip-title":"Scale element","text.scale-tooltip-description":"Set a number to adjust width and height of the selected element.","text.rotate-tooltip-title":"Rotate element","text.rotate-tooltip-description":"Set an angle to rotate the seleted element.","text.rotate-axis-tooltip-title":"Rotate along axis","text.rotate-axis-tooltip-description":"Set an angle for the reflect axis.","text.skew-tooltip-title":"Skew element","text.skew-tooltip-description":"Set an angle to slant the selected element along one of the axis.","text.copies-tooltip-title":"Copy element","text.copies-tooltip-description":"Set a number to make copies of the selected element.","text.transdorm-origin-tooltip-title":"Transdorm origin","text.transdorm-origin-tooltip-description":"Set the origin point for transformations"},"GFilesPanel":{"text.file-can-not-be-accessed-missing-permissions":"This file has view restrictions set by the owner, you are not allowed to open it.","text.assets-shared-with-me":"Assets shared with me","text.please-inform-valid-file-name":"Please, inform a valid file name","text.title-recent-files":"Recent Files","text.title-all-files":"My Cloud","text.option-isnt-available":"This option isn’t available for Cloud Drives","text.google-drive-corporate":"Google Drive","text.sharepoint-corporate":"SharePoint","text.onedrivebusiness-corporate":"OneDrive Business","text.downloading-files":"Downloading file(s)...","text.info-cdr":"CDR: All existing CorelDRAW drawing content will be maintained when opening in CorelDRAW. Drawing content added in CorelDRAW.app will be editable in CorelDRAW, but will be locked when opening the CDR file in CorelDRAW.app again.","text.info-cdrapp":"CDRAPP: The internal file format of CorelDRAW.app. All content added in CorelDRAW.app will be maintained and remains editable. Existing CorelDRAW drawing content will be maintained as a locked underlay. This file format can’t be opened in CorelDRAW.","text.info-sharepoint-cdrapp-not-available":"Saving to the CDRAPP file format isn’t supported for SharePoint yet. Please choose DES or CDR format instead.","action.new-folder":"New folder","action.new-folder-tooltip":"Creates a new folder in the current location","action.cut":"Cut","action.cut-tooltip":"Cut/Paste the current selection","action.copy":"Copy","action.copy-tooltip":"Copy/Paste the current selection","action.delete-tooltip":"Delete the current selection","action.cancel-tooltip":"Cancel and go back to editing your design.","text.delete-confirm":"You want to delete the current selection? This operation cannot be reverted!","text.sort-date":"Sort by Creation Date","text.sort-name":"Sort by Name","action.back":"Back","action.back-tooltip":"Return to previous folder","action.my-cloud":"My Cloud","action.my-cloud-tooltip":"Return to the main directory","action.open":"Open","action.rename":"Rename","text.updated":"Updated","text.name":"Name","text.creation-date":"Creation Date","text.created":"Created","text.ascending":"Ascending","text.descending":"Descending","text.large-mode":"Large preview","text.last-saved":"Last saved","action.open-design":"Open","action.delete-button":"Delete","action.card-view-button":"Card view","action.list-view-button":"List view","text.search-not-found":"No files match your search term, please try again.","text.search-placeholder":"Search File","action.open-containing-folder":"Open containing folder","action.sort":"Sorting","action.download-tooltip":"Download files","action.download-tooltip-format":"Download %format Files","action.download-title":"Download","action.download-title-format":"Download %format","action.maximize-window":"Maximize window","action.minimize-window":"Minimize window","action.close-window":"Close window","text.untitled":"Untitled","text.error-download-single-file":"Error occurred. File cannot be downloaded. Please contact support.","text.error-download-multiple-files":"Some files could not be downloaded. Please contact support.","text.error-fetching-files":"Error occurred, files could not be loaded. Please contact support.","text.error-fetching-folders":"Error occurred, folders could not be loaded. Please contact support.","text.error-creating-folder":"Error occurred, folder could not be created. Please contact support.","text.error-saving-file":"Error occurred, file could not be saved. Please contact support.","text.error-deleting":"Error occurred, could not delete item. Please contact support.","text.error-renaming":"Error occurred, could not rename item. Please contact support.","text.error-moving":"Error occurred, could not move items. Please contact support.","text.info-des":"DES: All existing Corel DESIGNER drawing content will be maintained when opening in Corel DESIGNER. Drawing content added in CorelDRAW.app will be editable in Corel DESIGNER, but will be locked when opening the DES file in CorelDRAW.app again. The Corel DESIGNER %version DES file format will be used.","text.file-already-exists-on-current-location":"%filename already exists in the current location. Do you want to create a new file with the same name?","text.folder-already-exists-on-current-location":"%foldername already exists in the current location. Do you want to create a new folder with the same name?","text.new-file-name-invalid":"The new file name is invalid","text.selection-multiple":"%selection %multiple","text.multiple":"multiple","text.cloud":"Cloud","text.filter-type-gvdesign":"GVDESIGN","text.filter-type-symbol":"Symbols","text.filter-type-styles":"Styles","text.filter-type-cdr":"CDR","text.filter-type-des":"DES","text.filter-type-cdrapp":"CDRAPP","action.filter":"Filtering","action.clear":"Clear"},"GDashboardFilesPanel":{"text.confirm-file-overwrite":"You selected a file when saving, do you want to continue and replace this file? Replacing it will overwrite its current content.","text.not-allowed-select-different-format-overwrite":"It is not allowed to select different file formats when saving symbols."},"GNewFilePrompt":{"text.name-document":"Please name your folder","action.create":"Create"},"GPresets":{"text.android-mobile":"Android mobile","preset-title.print":"Print","preset-sub-title.print":"Paper Size","preset.4a0":"4A0","preset.2a0":"2A0","preset.a0":"A0","preset.a1":"A1","preset.a2":"A2","preset.a3":"A3","preset.a4":"A4","preset.a5":"A5","preset.a6":"A6","preset.a7":"A7","preset.a8":"A8","preset.a9":"A9","preset.a10":"A10","preset.us-letter-portrait":"US-Letter Portrait","preset.us-letter-landscape":"US-Letter Landscape","preset.business-card":"Business Card","preset.flyer":"Flyer","preset.postcard":"Postcard","preset.book-cover":"Book Cover","preset-title.web":"Web/Desktop","preset-sub-title.web":"Screen Size","preset.blog-cover":"Blog Cover","preset.blog-graphic":"Blog Graphic","preset.website-small":"Website - Small","preset.website-normal":"Website - Normal","preset.website-medium":"Website - Medium","preset.website-large":"Website - Large","preset.website-huge":"Website - Huge","preset.full-website":"Full Website","preset-title.social":"Social Media","preset-sub-title.social":"Banner/Post Size","preset.facebook-cover":"Facebook Cover","preset.facebook-profile":"Facebook Profile","preset.facebook-story":"Facebook Story","preset.twitter-cover":"Twitter Cover","preset.youtube-cover":"YouTube Cover","preset.google-cover":"Google+ Cover","preset.google-business-profile":"Google My Business Profile","preset.google-business-cover":"Google My Business Cover","preset.google-business-post":"Google My Business Post","preset.linkedin-cover":"LinkedIn Cover","preset.linkedin-profile":"LinkedIn Profile","preset.linkedin-post":"LinkedIn Post","preset.twitch-cover":"Twitch Cover","preset.twitter-post":"Twitter Post","preset.twitter-profile":"Twitter Profile","preset.twitter-story":"Twitter Story","preset.facebook-post":"Facebook Post","preset.facebook-app":"Facebook App","preset.facebook-ad":"Facebook Ad","preset.blog-post":"Blog Post","preset.instagram-post":"Instagram Post","preset.instagram-profile":"Instagram Profile","preset.instagram-story":"Instagram Story","preset.instagram-thumbnail":"Instagram Thumbnail","preset.tumblr-graphic":"Tumblr Graphic","preset.pinterest-pin":"Pinterest Pin","preset.twitch-video":"Twitch Video","preset.linkedin-banner":"LinkedIn Banner","preset.dribble-shot":"Dribbble Shot","preset-title.screen":"Devices","preset-sub-title.screen":"Device Type","preset-title.merch":"Print on Demand","preset-sub-title.merch":"Item Type","preset.amazon-shirt-pullover":"Amazon Shirt/Pullover","preset.amazon-shirt":"Amazon Shirt","preset.amazon-pullover":"Amazon Pullover Back","preset.amazon-popsocket":"Amazon Popsocket","preset.teepublic-shirt":"Teepublic T-Shirt","preset.cafepress-shirt":"Cafepress T-Shirt","preset.redbubble-shirt":"Redbubble T-Shirt","preset.redbubble-shirt-standard":"Redbubble Standard","preset.redbubble-shirt-long":"Redbubble Long","preset.instagram-stories":""},"GLibrarySidebar":{"title":"Libraries","text.connect":"Connect to the internet to access the Library"},"GDocumentChooser":{"text.cloud.sync.title":"Cloud Synchronization","text.cloud.sync.subtitle":"We found a divergence in the hosted file, please choose the file version that you want to keep using.","text.cloud.online":"(Cloud)","text.cloud.offline":"(Local File)","text.cloud.newer-file":"(Newer file)","text.cloud.unavailable":"Unavailable"},"GItemProperties":{"text.click-through":"Click-through this element","text.scale-with-content":"Autoscale Clipped Shapes"},"GFrameProperties":{"text.frame":"Frame","text.switch-frame":"Turn On Frame Mode","text.frame-off":"Turn Off Frame Mode"},"GGroupFrameProperties":{"text.group":"Group","text.frame":"Frame","text.switch-frame":"Switch to Frame","text.switch-group":"Switch to Group"},"GOpenWelcomeScreenAction":{"title":"Show Welcome Screen"},"GCheckForUpdatesAction":{"title":"Check for Updates"},"GLoginPanel":{"text.title":"Let\'s get started!","text.subtitle":"We hope you have enjoyed using Corel Vector so far. Please create an account with our Corel Vector to continue.","text.login":"Login","text.signup":"Sign up"},"GSoftwareUpdatePanel":{"title":"Software Update","text.update-not-available":"There is currently no update available. You are using the latest version (%currentVersion)","text.download-ready":"Download ready,&nbsp;<a>install Corel Vector %newVersion now!</a>","text.download-progress":"Downloading Corel Vector %newVersion","text.update-available":"There\'s a new version available (%newVersion). You\'re currently using %currentVersion.&nbsp;","text.update-error":"Failed to update the application, please, try again later!","text.after-update":"You are now running Corel Vector %currentVersion.&nbsp;","text.see-release-notes":"See release notes","text.update-now":"Update Now!","text.force-update-information-time":"The app <span>will close automatically</span> in %minutes min.","text.force-new-version-available":"There’s a new version available (%newVersion)","text.force-message-avoid-losing-progress":"It will be installed automatically, please save your designs in order to avoid losing progress.","text.ok":"OK","text.dialog-unsaved-documents":"You have unsaved changes. Please save your designs in order to avoid losing progress.","text.updating":"Updating..."},"GApplicationManager":{"text.license-change-spectator-title":"You are now in Viewer Mode. You can only preview, open, and print designs. If you are unsure about this change, please contact your IT administrator.","text.license-change-spectator-losing-progress":"Please save your designs in order to avoid losing progress.","text.license-change-spectator-update-time":"The app <span>will automatically update</span> in %minutes min.","text.ok":"OK"},"GOfflineDialog":{"title.unavailable-feature":"This feature is not available while you are offline. Please establish an internet connection to continue.","text.offline-title":"Hey %name, please <strong>establish an internet connection with your device</strong> in order to verify your subscription details.","text.offline-title-retry":"Hey %name, in order to complete your request we need an internet connection. Please <strong>connect your device</strong> and click on “Retry.”","text.display-name-in-case-missing":"there","text.offline-subtitle":"If we are unable to connect in the next %days days, we will disable all features until an internet connection is present.","text.offline-check":"Check later","text.offline-retry":"Retry","text.offline-cancel":"Cancel","text.offline-footer":"If you have questions, please <a href=\'%link\' target=\'_blank\'>contact us here.</a>"},"GSaveStepsAction":{"title":"Save steps"},"GImportStepsAction":{"title":"Import steps"},"GInstallToDesktopAction":{"title":"Install to Desktop"},"GInstallPwaDialog":{"text.title":"Install Corel Vector to your desktop","text.description-text":"Corel Vector now comes as a PWA (Progressive Web App), that runs like a regular desktop application, no download required. It gives you everything you know (and love) from the current web app, but doesn’t require an internet connection ","text.description-pro-link":"(subscription required)","action.install-button":"Install","action.not-now-button":"Not now","text.footer-main-text":"After installing, the PWA is available as a regular desktop application and can also be found in ","action.footer-link-text":"Chrome apps","action.footer-more-information":"More information here","text.end-sentence-dot":".","text.pwa-requires":"<span>The PWA requires</span><span><a href=\'https://www.google.com/chrome\' target=\'_blank\'>Google Chrome</a> or <a href=\'https://www.microsoft.com/en-us/edge\' target=\'_blank\'>Microsoft Edge</a></span><span>in order to work.</span>"},"GShortcutsDialog":{"text.title":"Keyboard Shortcuts"},"GSetupSystemDate":{"title":"Setup System date","text.reset":"Reset"},"GTranslationToolAction":{"title":"Translation Tool"},"GFilesPanelViewBase":{"text.connect-cloud-drive":"Connect Cloud Drive","text.connect-new-cloud-drive":"Connect new Cloud drive...","text.cloud-connection-options":"Google Drive, iCloud, DropBox, OneDrive","text.add-new-cloud-drive":"Add new Cloud drive","text.connect-cloud-drive-text":"Connect %name","text.add-new-drive-text":"Add new %name Account","text.add-new-drive-suffix":"Account","text.edit-drive-title":"Edit Cloud Drive","text.button-edit-cloud-drive-disconnect":"Disconnect","text.error-validation-fill-all-fields":"Please fill next fields correctly: %fields","text.error-incorrect-configuration":"Either you\'ve not finished the login process, or there is an error in Account data","text.button-add-cloud-drive-save":"Save","text.button-add-cloud-drive-cancel":"Cancel","text.add-new-account-field-tenant":"Tenant","text.add-new-account-field-client-id":"Client ID","text.add-new-account-field-domain":"Domain","text.add-new-account-field-name":"Name","text.my-drive":"My Drive","text.personal-google-drive":"Personal Google Drive","text.refresh-drive-content":"Refresh Cloud Content","text.info-sharepoint-unavailable-safari":"SharePoint currently isn’t supported in your web browser, please try Chrome or Firefox instead.","text.show-more":"Show more ...","text.collaborators":"Collaborators","text.share-by":"Shared by <span>%name</span>","text.comments":"Comments","text.comment":"Comment","text.status":"Status","text.shared":"Shared","text.share-this-file":"Share this file","text.created":"Created %createdTime","text.can-only-share-by-owner":"This file can’t be shared by you, this is only possible for files where you are the owner."},"GFilesPanelViewSharepoint":{"action.checkout":"Check out","action.checkout-open":"Check out and open","action.checkin":"Check in","action.discard-check-out":"Discard check out","text.error-could-not-discard-check-out":"Could not discard check out","text.discard-check-out-warning-description":"If you discard your check out, you will lose all changes made to the document. Are you sure you want to discard your check out?","text.checkin-comment":"Enter comment for Check In","text.error-file-cant-be-opened":"File cannot be opened","text.error-could-not-connect-to-instance":"Could not connect to SharePoint instance","text.error-could-not-check-in":"Could not check in","text.error-could-not-check-out-open":"Could not check out and open","text.error-could-not-check-out":"Could not check out","text.error-loading-sharepoint-user-info":"Error loading SharePoint user info: %error","text.error-file-is-already-checked-out-by-someone-else":"This file is already in use.","text.choose-checkin-type":"What kind of version would like to check in?","text.checkin-type-minor":"Minor version (draft)","text.checkin-type-major":"Major version (publish)","text.checkin-type-overwrite":"Overwrite the current minor version","text.third-party-cookie-warning-message":"Please change your browser settings to <a href=\'%link\'>allow third-party cookies</a> and then try again.","text.third-party-cookie-warning-message-try-again":"Try again","text.no-access-to-download-some-selected-files":"You don\'t have permission to access some of the selected files. These files won\'t be downloaded.","text.no-access-to-download-all-selected-files":"You don\'t have permission to access the selected files.","text.button-proceed":"Proceed"},"GDashboardSharepointAuthenticator":{"text.please-close-already-authenticated":"Please close this window, you have been successfully authenticated."},"GDashboardManager":{"text.failed-get-file":"Failed to get file, please try again later!"},"GExternalStorage":{"text.error-file-cant-be-null":"File can not be null","text.error-window-blocked":"Window is blocked","text.error-window-blocked-alternative":"Please allow pop-ups for Corel Vector in browser settings to continue."},"GHeader":{"action.context-menu.duplicate":"Duplicate","action.context-menu.close-other":"Close Other Files","text.close-other-tabs-confirmation":"Do you really want to close all other files?","text.close-all-tabs-confirmation":"Do you really want to close all files?","action.context-menu.close-all":"Close All"},"GUserNameConfigDialog":{"text.ok":"OK","text.dialog-title":"Hi! Nice to meet you...","text.name-usage-tips":"Please enter your full name so that we identify you when adding comments or annotations.","text.first-name":"First Name","text.last-name":"Last Name"},"GMSTeamsAuthenticator":{"text.offline":"It seems like there is a connection issue. Please try again later.","text.onedrive-business-error":"You don’t seem to be signed in with an account that is allowed to access OneDrive Business inside of CorelDRAW.app, please ask your domain administrator to configure access or sign in using a valid account.","text.sharepoint-error":"You don’t seem to be signed in with an account that is allowed to access SharePoint inside of CorelDRAW.app, please ask your domain administrator to configure access or sign in using a valid account.","text.not_registered":"You don’t seem to signed in with an account that is allowed to access CorelDRAW.app, please sign in using a valid account.","text.sharepoint-onedrive-business-error":"You don’t seem to be signed in with an account that is allowed to access SharePoint and OneDrive Business inside of CorelDRAW.app, please ask your domain administrator to configure access or sign in using a valid account.","text.failed-to-open-window":"It seems your browser is blocking pop-ups, please see the icon in the address bar. Please click “Authenticate” to try again.","text.cancelled-by-user":"We couldn\'t log you in, please try again to be able to use CorelDRAW.app.","text.unknown":"Unknown error, Please contact support.","text.authenticate":"Authenticate","text.try-again":"Try again","text.error_no_client_id":"Your user isn\'t properly configured for accessing CorelDRAW.app on Microsoft Teams, please contact your IT administrator","text.error_user_not_registered":"To sign in to CorelDRAW.app for Teams for creating or editing designs, you must have a licensed copy or an active trial of CorelDRAW Graphics Suite or CorelDRAW Technical Suite (version 2019 or newer).<br />Please ensure:<br /><ol><li>You have Enterprise License of Corel Draw Graphics Suite.</li><li>You can sign in to CorelDRAW.app with your account via MSO365 option on <a href=\'https://coreldraw.app/?enterprise\' target=\'_blank\'>Enterprise  sign in page</a>.</li></ol> Please visit <a href=\'https://www.coreldraw.com/\' target=\'_blank\'>www.coreldraw.com</a> for more information.","text.error_empty_hash":"Error occured: Empty Request Hash. Please try to reload Tab/Application.","text.error_no_command_found":"Error occured: No Commands Found in Hash. Please try to reload Tab/Application.","text.error_incorrect_hash_command":"Error occured: Wrong Hash Command. Please try to reload Tab/Application"},"GMSTeamsConfigRenderer":{"text.main-title":"Please select an option:","text.new-file-option":"Create New File","text.template-option":"New from Template","text.template-category-view-title":"Select template category","text.template-view-title":"Select template of \\"%category\\" category (%width×%height %unit)","text.create-button":"Create","text.warnings-header":"Warnings:","text.new-file-select-preset":"Select predefined size","text.existing-file-option":"Open Existing File","text.file-name-label":"Enter File Name","text.file-name-placeholder":"New CDA File Name","text.file-extension-label":"Select File Format","text.existing-file-view-title":"Choose a file","text.existing-file-shared-on":"Shared on:","text.existing-files-no-results":"No items found for this chat/channel. Please create new file or choose another chat/channel","text.existing-file-no-permission":"This file can\'t be selected, be sure you have the right permissions!","text.error-not-authenticated-existing-files":"We could not load your existing files because of authentication error. Please try again later or contact your administrator","text.error-not-authenticated":"We could not authenticate you. Please try again later or contact your administrator","text.error-user-doesnt-exist":"This user doesn\'t exist. Please contact your domain administrator","text.error-could-not-create-new-file":"Could not create new file.","text.error-conflict-file":"The filename is already used. Please go back and change it!","text.error-file-name-empty":"File name should not be empty. Please fill it in.","text.error-file-name-rules":"The file name cannot contain \'/\', \'\\\\\', \'|\' illegal characters. Please modify it.","text.error-create-file-request":"Create File request error","text.go-back-button":"‹ Go back","text.go-back-to-configuration-button":"‹ Go back to the file configuration","text.warning-could-not-share-new-file":"Could not share new file","text.warning-could-not-post-new-file-to-chat":"Could not post new file to chat","text.long-creation-time-notification":"Please wait! This might take a while.","text.file-created-successfully":"The file was saved successfully! Please click on Save to finish. ↓","text.filename-default":"Untitled-1"},"GMSTeamsOneDriveBusinessProvider":{"text.error-no-personal-chats-folder":"Could not find MS Teams Personal Chats folder"},"GUnshareButton":{"text.unshare-with-me":"Unshare with me"},"GToggleFillsAction":{"title":""},"GUnshareWithMeAction":{"title":"Unshare with me"},"GChangeAnchorPointsJointTypeAction":{"title":""},"GBanner":{"text.access-expire":"Your access to Corel Vector has expired. Unlock continued access to these flexible tools by visiting our website to <a target=\'_blank\' href=\'%link\'>subscribe today</a>"}},"translationsExtended":{},"translationsExtendedTemporary":{},"translationsTemporary":{},"etag":"608b3df09c02803797a2015c99192c33"},{"language":"German","keyValue":1,"abbreviation":"de-DE","isDefault":false,"isAvailable":true,"realName":"Deutsch","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Chinese","keyValue":2,"abbreviation":"zh-CN","isDefault":false,"isAvailable":true,"realName":"簡體中文","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Portuguese","keyValue":3,"abbreviation":"pt-BR","isDefault":false,"isAvailable":true,"realName":"Português","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Spanish","keyValue":4,"abbreviation":"es-ES","isDefault":false,"isAvailable":true,"realName":"Español","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"French","keyValue":5,"abbreviation":"fr-FR","isDefault":false,"isAvailable":true,"realName":"Français","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Polish","keyValue":6,"abbreviation":"pl-PL","isDefault":false,"isAvailable":true,"realName":"Polski","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Russian","keyValue":7,"abbreviation":"ru-RU","isDefault":false,"isAvailable":true,"realName":"Русский","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Turkish","keyValue":8,"abbreviation":"tr-TR","isDefault":false,"isAvailable":true,"realName":"Türkçe","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Czech","keyValue":9,"abbreviation":"cs-CZ","isDefault":false,"isAvailable":true,"realName":"Čeština","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"ChineseTaiwan","keyValue":10,"abbreviation":"zh-TW","isDefault":false,"isAvailable":true,"realName":"繁體中文","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Italian","keyValue":11,"abbreviation":"it-IT","isDefault":false,"isAvailable":true,"realName":"Italiano","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Japanese","keyValue":12,"abbreviation":"ja-JP","isDefault":false,"isAvailable":true,"realName":"日本語","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Dutch","keyValue":13,"abbreviation":"nl-NL","isDefault":false,"isAvailable":true,"realName":"Nederlands","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Swedish","keyValue":14,"abbreviation":"sv-SE","isDefault":false,"isAvailable":true,"realName":"Swedish","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}}]')},function(e){e.exports=JSON.parse('[{"language":"English","keyValue":0,"abbreviation":"en-US","isDefault":true,"isAvailable":true,"realName":"English","translations":{"GLoggedIn":{"text.you-were-logged-in":"You were logged in successfully","text.you-can-close-this-page":"You can close this page and return to the desktop application of Corel Vector."},"GShareRoles":{"text.role-no-access-name":"No Access","text.role-no-access-description":"Don\'t have access to this design","text.role-owner-name":"Owner","text.role-viewer-name":"Viewer","text.role-viewer-description":"Can open and view the design","text.role-viewer-description-alt":"Now you can only view this file.","text.role-viewer-invitation-message":"%name invited you to view","text.role-viewer-invitation-info":"You can View the design, but can’t edit, annotate or export.","text.role-viewer-status":"You can only preview this design.","text.role-developer-name":"Developer","text.role-developer-description":"Can inspect elements, save and export","text.role-developer-description-alt":"Now you can inspect, save and export this file.","text.role-developer-invitation-message":"%name invited you to inspect","text.role-developer-invitation-info":"You can View, Inspect, Export assets or Save a copy of this design.","text.role-developer-status":"You can inspect and save a copy of this design, as well as export.","text.role-reviewer-name":"Reviewer","text.role-reviewer-description":"Can comment on the design and annotate","text.role-reviewer-description-alt":"Now you can view, comment and annotate this file.","text.role-reviewer-invitation-message":"%name invited you to review","text.role-reviewer-invitation-info":"You can View and Comment/Annotate on this design.","text.role-reviewer-status":"You can preview, comment and annotate this design.","text.role-approver-name":"Approver","text.role-approver-description":"Can approve the file","text.role-approver-description-alt":"Now you can view, comment and annotate this file, as well as approve the final revision.","text.role-approver-invitation-message":"%name invited you to review/approve the following design:","text.role-approver-invitation-info":"You can comment and annotate this design as well as approve the final version. Please check the “Comments” docker on the right to find all the necessary tools.","text.role-approver-status":"You can preview, comment and annotate this design, as well as approve the final revision.","text.role-co-author-name":"Co-Author","text.role-co-author-description":"Can edit the design","text.role-co-author-description-alt":"Now you can edit this file","text.role-co-author-invitation-message":"%name invited you to collaborate on","text.role-co-author-invitation-info":"You can edit elements from this design. Your changes will be saved back to original file in real-time.","text.role-co-author-status":"You can add and edit objects in this design, as well as comment and annotate. All changes will be saved in real-time.","text.role-content-editor-name":"Content editor","text.role-content-editor-description":"Can edit selected text content","text.role-content-editor-description-alt":"Now you can edit marked text objects in this file, as well as comment and annotate.","text.role-content-editor-invitation-message":"%name invited you to edit content on the following design:","text.role-content-editor-invitation-info":"You can edit marked text elements from this design. Double-click on marked text elements to edit them. Use the “Finish Editing” button to preview and save your changes.","text.role-content-editor-status":"You can edit marked text objects in this design, as well as comment and annotate.","text.invitation-message-cdss-csl":"%name has shared the following file with you:","text.invitation-info-cdss-csl":"Use these assets in your designs by linking the file to your document from the Assets docker."},"GNotifications":{"email-subject.corporate-license-changed":"Your CorelDRAW.app Corporate License was changed","email-subject.new-comment-annotation":"New comment/annotation (%file)","email-subject.new-reply":"New reply (%file)","email-subject.comment-annotation-assigned":"A comment/annotation was assigned to you (%file)","email-subject.comment-annotation-resolved":"A comment/annotation was resolved (%file)","email-subject.comment-annotation-reopened":"A comment/annotation was reopened (%file)","email-subject.comment-annotation-edited":"A comment/annotation was edited (%file)","email-subject.comment-annotation-deleted":"A comment/annotation was deleted (%file)","email-subject.comment-annotation-mentioned":"You were mentioned in a comment/annotation (%file)","email-subject.reply-assigned":"A reply was assigned to you (%file)","email-subject.reply-edited":"A reply was edited (%file)","email-subject.reply-deleted":"A reply was deleted (%file)","email-subject.reply-mentioned":"You were mentioned in a reply (%file)","email-subject.design-approved":"Design was approved (%file)","email-subject.design-reopened":"Design was reopened (%file)","email-subject.design-in-review":"Design was set back to review (%file)","email-subject.design-updated":"There is an updated version of the design (%file)","email-subject.design-request-approval":"Design approval was requested (%file)","email-subject.design-request-comment":"New request to comment (%file)","email-subject.design-request-access":"New access request (%file)","email-subject.role-changed":"Your role was changed to \\"%role\\" (%file)","email-subject.content-editor-text-changes":"There are new text changes (%file)","email-subject.design-user-request":"%user wants to have the following permissions to your design \\"%file\\": %permissions"},"GReminderDialogFactory":{"text.unknown-date":"(Unknown)","text.remaining-days":"%days days left in your trial","text.remaining-day":"1 day left in your trial","text.expires-today":"Your trial expires today"},"GServerTranslations":{"MAGIC_LINK_INVALID_TOKEN":"Invalid token!","MAGIC_LINK_FAILED_ACTIVATE":"Failed to activate magic link","MAGIC_LINK_FAILED_CREATING":"Failed to create magic link","MAGIC_LINK_FILE_NOT_ALLOW_ACCESS":"You are not allowed to access this design.","MAGIC_LINK_INVALID_INFO":"Invalid information","MAGIC_LINK_EMAIL_SENT":"Magic link was sent to your email account!","MAGIC_LINK_EMAIL_SUBJECT":"Your guest sign-in link (%file)","ACTION_INSERT":"added","ACTION_REMOVE":"deleted","ACTION_EDIT":"edited","ACTION_RESOLVE":"resolved","ACTION_REOPEN":"reopened","ACTION_APPROVE":"approved","ACTION_ASSIGN":"assigned","OPEN_IN_APP":"Open in %app","email-template-share-file-subject":"%from has shared a design with you (%file)","email-template-share-file-open-design":"Open the design","email-template-share-file-invited":"%name invited you to collaborate on","email-template-share-file-learn-more":"Learn more about how collaboration works in Corel Vector User Guide.","email-template-unshare-file-subject":"The file %file was unshared from you","CIRCULAR_REFERENCE_ERROR":"Can’t perform this command, it’s not allowed to paste a folder inside itself","COREL_ERROR_1001":"Error: There are no subscriptions in your records.","COREL_ERROR_1005":"Error: Invalid Credentials.","COREL_ERROR_1008":"Error: Unexpected Error.","COREL_ERROR_1009":"Error: Profile not Found.","DUPLICATE_VALUE":"Already Exists.","INVALID_VALUE":"Invalid Value","INVALID_USERNAME":"Invalid username, it must contain at least 3 characters among numbers, letters and _ or -.","INVALID_FIRST_NAME":"Invalid first name, some characters are not allowed.","INVALID_LAST_NAME":"Invalid last name, some characters are not allowed.","USERNAME_ALREADY_EXISTS":"The username already exists.","INVALID_EMAIL":"Invalid or nonexistent email.","INVALID_PASSWORD_IS_REQUIRED":"A password is required.","INVALID_PASSWORD_TOO_SHORT":"A minimum of %number characters is required for password.","INVALID_PASSWORD_TOO_LONG":"A maximum of %number characters is required for password.","INVALID_PASSWORD_NO_DIGITS":"A password must contain digits.","INVALID_PASSWORD_NO_LOWERCASE":"A password must contain lower case characters.","INVALID_PASSWORD_NO_UPPERCASE":"A password must contain upper case characters.","INVALID_PASSWORD_NO_SPECIAL_CHARACTERS":"A password must contain special characters.","BLOCKED_COUNTRY":"Sorry, this product is not available in your country.","EMAIL_ALREADY_EXISTS":"Email already exists.","EMAIL_NOT_EXISTS":"Email doesn\'t exist.","PASSWORD_NOT_EXISTS":"You don\'t have a password yet. Please click on \\"Forgot your password?\\" to create one.","USER_NOT_EXISTS":"User do not exist.","WRONG_PASSWORD":"The password is wrong.","GREETING":"Howdy","AUTH_GREETING_PLEASE_CLOSE_ALREADY_AUTHENTICATED":"Please close this window, you have been successfully authenticated.","GOODBYE":"Good Bye","PASSWORD_DO_NOT_MATCH":"Passwords do not match.","EMAIL_OR_USERNAME_NOT_EXISTS":"This email or username doesn\'t exist","REACHED_LIMIT_FOR_ACTION":"You have reached the limit for this action in the last %number hours. Please, check your email or try again later","NOT_AUTH":"Not Authorized","NOT_FOUND":"Nothing Here","INSUFFICIENT_PERMISSIONS":"You don\'t have the permission","USER_PASSWORD_DO_NOT_MATCH":"Your email/username and password don\'t match. Please try again!","CONTACT_SUPPORT":"Contact support","NEED_HELP":"Need help?","LOGIN__LOGIN":"Email or Username","LOGIN__EMAIL":"Email","LOGIN__PASSWORD":"Password","LOGIN__PASSWORD_FORGOT":"Forgot password?","LOGIN__REMEMBER_ME":"Remember me","LOGIN__ACTION":"Login","LOGIN__NOT_YET_REGISTERED":"New to Corel Vector? ","LOGIN__SIGNUP_NOW":"Create an Account","LOGIN__OAUTH":"Sign in with","LOGIN__EULA_ACCEPT":"Accept","LOGIN__EULA_DECLINE":"Decline","AVATAR_IMAGE_TOO_BIG":"Please keep image under 100 kB and use PNG or JPG format","SIGNUP__YOUR_USERNAME":"Your Username","SIGNUP__YOUR_NAME":"Your Name","SIGNUP__YOUR_EMAIL_ADDRESS":"Your Email","SIGNUP__YOUR_PASSWORD":"Choose a password (min. 6 chars)","SIGNUP__EMAIL_NOT_GIVEN_AWAY":"We promise not to misuse it!","SIGNUP__PASSWORD":"Password","SIGNUP__START_NOW":"Start Now!","SIGNUP__ALREADY_REGISTERED_QUESTION":"Already registered?","SIGNUP__GO_TO_LOGIN":"Go back to login","CONFIRM_EMAIL__INVALID_TOKEN":"Sorry the email confirmation link is expired","CONFIRM_EMAIL__MAIL_SENT":"An Email has been sent for activating the account. Please also check the SPAM Folder. <br><a href=\\"%serverUrl/resend-confirm-email\\" target=\\"_blank\\">Click here if you want to receive another email!</a>","CONFIRM_EMAIL__MAIL_SUBJECT":"Activate Your Account","CONFIRM_EMAIL__SUCCESS":"Email confirmed successfully","CONFIRM_EMAIL__EMAIL_ALREADY_CONFIRMD":"Your account was already confirmed!","FOLLOWUP_EMAIL__MAIL_SUBJECT":"Activate Your Corel Vector Account","RESEND_CONFIRM_EMAIL__SUBMIT":"Resend Email","RESEND_CONFIRM_EMAIL__HELP":"We will send at this email a link to confirm your email, or","RESEND_CONFIRM_EMAIL__MAIL_SENT":"An email has been sent for activating the account, if it exists. Please also check the SPAM Folder.","RESET_PASSWORD__TITLE":"Reset Password","RESET_PASSWORD__HELP":"We will send at this email a link to reset your password, or","RESET_PASSWORD__INVALID_TOKEN":"Sorry the password reset link is expired","RESET_PASSWORD__REQUEST_RESET":"Reset Password Now","RESET_PASSWORD__REMEMBER":"Remember your password again?","RESET_PASSWORD__GO_TO_LOGIN":"Login","RESET_PASSWORD__MAIL_SENT":"An email has been sent to this account if it exists. Please also check the SPAM folder.","RESET_PASSWORD__SET_NEW_TITLE":"Choose your new password for","RESET_PASSWORD__NEW_PASSWORD":"New password","RESET_PASSWORD__NEW_PASSWORD_CONFIRM":"Confirm new password","RESET_PASSWORD__SUBMIT":"Send request","RESET_PASSWORD__SET_NEW_PASSWORD":"Assign new password","RESET_PASSWORD__SUCCESS":"Your new password was successfully assigned.","RESET_PASSWORD__MAIL_SUBJECT":"Reset your password","RESET_PASSWORD__MAIL_TITLE":"Please follow this link to reset the password for your account:","RESET_PASSWORD__MAIL_ACTION":"Assign new password","CHANGE_PASSWORD_PASSWORDS_DO_NOT_MATCH":"Passwords do not match.","CHANGE_PASSWORD_INVALID_OLD_PASSWORD":"The old password is invalid.","PLEASE_INFORM_BOTH_PASSWORD_OLD_AND_NEW":"Please, inform both new and old password if you want to change it!","SUBSCRIPTIONS_MUST_BE_CANCELED":"There is an active subscription. Subscriptions must be cancelled to proceed it.","CONTENTPROVIDERINTERFACE_ERROR_FETCHING_FILE":"Failed to fetch the file","CONTENTPROVIDERINTERFACE_ERROR_SEARCHING_CONTENT":"Failed to search for content","CONTENTPROVIDERINTERFACE_ERROR_FETCHING_CONTENT_DETAILS":"Failed to retrive the content\'s detail","INVALID_COREL_LOGIN":"Invalid Corel account name/password","COREL_PROFILE_ID_ALREADY_EXISTS":"This Corel account is already assigned to a CorelDRAW account","COREL__LOGIN":"Corel Account Name","COREL__PASSWORD":"Corel Account Password","COREL__ACTION":"Login","COREL__CANCEL_ACTION":"Cancel","ENTERPRISE_INVALID_LOGIN":"This account isn’t recognized for accessing CorelDRAW.app Enterprise. If you are unsure whether or not you\'re eligible, consult your employer\'s IT administrator.","NO_SUBSCRIPTIONS":"There are no subscriptions in your records.","PROFILE_NOT_FOUND":"Corel account doesn\'t exist","UNEXPECTED_ERROR":"Unexpected error","email-template-default-thanks1":"Thanks,","email-template-default-thanks2":"the Corel Vector Team","email-template-default-copyright":"Copyright &copy; %year Corel Corporation. All rights reserved.","email-template-default-facebook-title":"Facebook","email-template-default-instagram-title":"Instagram","email-template-default-twitter-title":"Twitter","email-template-default-facebook-url":"https://www.facebook.com/GravitDesigner/","email-template-default-instagram-url":"https://www.instagram.com/gravitdesigner","email-template-default-twitter-url":"https://twitter.com/gravitdesigner","email-template-confirm-email-welcome1":"Welcome, %name!","email-template-confirm-email-welcome2":"Welcome to Corel Vector, %name!","email-template-confirm-email-msg1":"Thanks for joining</br>&nbsp;Corel Vector","email-template-confirm-email-msg2":"Just one small step before you start. Click the button below to activate your account, and happy designing!","email-template-confirm-email-msg3":"Please activate your account by clicking below.","email-template-confirm-email-successfully-purchased":"You successfully purchased a Corel Vector subscription! Please activate your account by clicking below.","email-template-confirm-email-activate1":"ACTIVATE ACCOUNT","email-template-confirm-email-activate2":"Activate Your Account","email-template-confirm-email-maycopy":"You may copy/paste this link into your browser:","email-template-followup-email-title":"Corel Vector","email-template-followup-email-msg":"You signed up for Corel Vector and you haven\'t activated your account yet! <span class=\'highlight\'><a href=\'%link\'>Activate your account today</a></span> to get designing today.","email-template-followup-email-quote":"“Every time I use @GravitDesigner, my toes curl in excitement. How is this free? If even one person reading this tweet needs an SVG editor, I hope to heaven they check out Corel Vector.” - @rvanarsdale","email-template-followup-email-activate":"Activate My Account","email-template-reset-password-welcome":"Hi, %name!","email-template-reset-password-msg1":"Looks like you forgot your password...","email-template-reset-password-msg2":"... don\'t worry, it happens.","email-template-reset-password-msg3":"To reset your password, click on the button below:","email-template-reset-password-reset":"RESET PASSWORD","email-template-reset-password-maycopy":"You may copy/paste this link into your browser:","email-template-reset-password-msg-footer":"If you didn\'t request to change your password, </br>that\'s ok, just ignore this email.","email-template-notification-new":"new","email-template-notification-action-msg-design":"%name has %action the following design:","email-template-notification-action-msg-design-in-review":"%name has set the design to be reviewed again:","email-template-notification-action-msg-design-request-approval":"%name has requested approval for the following design:","email-template-notification-action-msg-comment-annotation":"%name has %action a comment/annotation in the following design:","email-template-notification-action-msg-mention-comment-annotation":"%name has mentioned you in a comment/annotation in the following design:","email-template-notification-action-msg-replied-comment-annotation":"%name has replied to your comment/annotation in the following design:","email-template-notification-action-msg-reply":"%name has %action a reply in the following design:","email-template-notification-action-msg-mention-reply":"%name has mentioned you in a reply in the following design:","email-template-notification-action-msg-file-updated":"%name has added an updated version of the following design:","email-template-notification-action-msg-role-change":"Your role was changed to %role by %owner. %permissions","email-template-notification-action-msg-corporate-license-change":"You are now in <b>Viewer Mode</b>. You can only preview, open, and print designs. If you are unsure about this change, please contact your IT administrator.","email-template-notification-action-msg-request-commenting":"%name has requested commenting access for the following design:","email-template-notification-action-msg-request-access":"%name has requested viewing access for the following design:","email-template-notification-action-msg-updated-text":"%name has updated text content inside the following design:","email-template-notification-empty-comment":"This annotation doesn\'t have a comment yet","email-template-notification-reopened-comment":"Re-opened","email-template-notification-resolved-comment":"Marked as resolved","email-template-notification-assigned-comment":"Assigned the comment to you","email-template-notification-request-commenting-subtext":"You can allow commenting by changing the assigned role of this user to \\"Reviewer\\" or \\"Approver\\" in the Share dialog.","email-template-notification-request-access-subtext":"You can allow access by adding this user’s email address in the Share dialog and assign an appropriate role.","email-template-notification-updated-version-subtext":"Please download this file though File → Save as… and open it in CorelDRAW.","email-template-notification-recent-updates":"Here are the recent updates to %file:","email-template-notification-edit-changes":"New annotations, replies and mentions:","email-template-notification-action-changes":"Assigned, resolved, reopened comments:","email-template-notification-approval-flow-changes":"Approval flow state changes:","email-template-notification-permission-requests":"Permission requests:","email-template-magiclink-action-msg":"Please click on the link below to access the design as a guest:","email-template-magiclink-subtext":"Please note, that this link will be valid only one week and can be used only once. After that, you need to fill in your information again and send a new sign-in link by clicking on the design link above.","email-template-file-unshare-action-msg":"The file %file was unshared by %name.","email-template-file-unshare-subtext":"You have lost access to it.","ENTERPRISE_ACCOUNTS_DISABLED":"Enterprise accounts are disabled","ENTERPRISE_ACCOUNT_DEACTIVATED":"Your account has been deactivated. Ask your IT for access.","SPECIAL_LINK_NEEDED_ACTIVATE_ACCOUNT":"Special link needed to activate account","LICENSE_ALREADY_REACHED_MAXIMUM_USER_COUNT":"Your license already reached maximum user count","CORPORATE_DOMAIN_DEACTIVATED":"Corporate domain deactivated","CORPORATE_DOMAIN_EXPIRED":"Corporate domain expired","CORPORATE_CUSTOMER_DOESNT_EXIST":"Corporate customer does not exist","CORPORATE_DOMAIN_DOESNT_EXIST":"Corporate domain does not exist","EMPTY_EMAIL":"Empty email","GOOGLE_DRIVE_FAILED_GETTING_CONFIG":"Failed getting Google Drive configuration","COUPON_ALREADY_PRO":"You already have a license!","COUPON_INVALID":"Coupon invalid. Please check your coupon and try again!","COUPON_REDEEMED":"Coupon already redeemed!","COUPON_USAGE_EXCEEDED":"Usage limit exceeded for coupon!","COUPON_FAILED_ACTIVATING":"Failed activating coupon!","COUPON_ACTIVATED":"Coupon activated!","email-template-confirm-email-welcome":"Welcome, %name!","email-template-confirm-email-activate":"ACTIVATE ACCOUNT","magic_link_file_no_access":"The file either can’t be found or it’s not shared with you.","magic_link_email_already_in_use":"%email is already in use, please check if it’s a correct address.","corporate_domain_not_allowed_sign_in_as_guest":"%email belongs to a registered Corporate domain and it\'s not allowed to Sign in as Guest, please use the default login method.","RESTRICT_ASSET_SHARE_ERROR":"This email is not associated with a valid CorelDRAW user. Please check the email and try again.","INVALID_PASSWORD":"A minimum of 6 characters is required for password."},"GLoginDialog":{"text.continue":"Continue","text.continue-to-purchase":"Continue to Purchase","text.continue-to-day-trial":"Continue to %days-day Trial","text.continue-to-free-trial":"Continue to Free Trial","text.title":"Welcome to Corel Vector","text.title-title":"Thank you for choosing Corel Vector,","text.title-title-account-created":"Thank you for choosing Corel Vector!","text.title-subtitle":"please create an account or sign in to continue","text.title-title-anonymous":"Thank you for trying out Corel Vector.","text.title-subtitle-anonymous":"Please create an account or log in to continue.","text.pro-title":"Become a PRO","text.pro-subtitle":"Experience the full power of Corel Vector with advanced features and streamlined workflows tailored for Professionals","text.pro-topic-1":"Desktop apps with offline access","text.pro-topic-2":"Professional export workflow with PDF at 300dpi and advanced SVG options","text.pro-topic-3":"1GB of file storage","text.pro-topic-4":"An ever-growing library of professionally designed Templates, UI Kits, and other design assets","text.pro-topic-5":"CMYK color space, Manage Colors with swatches","text.pro-topic-6":"Make changes in your design quickly through Shared styles, Color swatches, and Master pages","text.pro-topic-7":"Use custom and system fonts","text.pro-topic-8":"and much, much more...","text.pro-learn-more":"Learn more about PRO here","text.pro-offer-title":"Introductory offer valid for 90 DAYS","text.pro-offer-price":"Get Corel Vector now for just %price/Mo.","text.pro-offer-info":"will be billed annually (until %date)","text.pro-info":"Regular price after %date is %price/mo., billed annually. You can cancel your subscription at all times (but no money is refunded and the subscription runs until the end of the period).","text.pro-subinfo":"Learn more about pricing and features of PRO here.","text.placeholder-sign-in-login":"Email or Username","text.placeholder-sign-in-password":"Password","text.sign-in-title":"Log In","text.sign-in-button":"Log In","text.sign-in-login":"Username / Email address","text.sign-in-password":"Password","text.forgot-password":"Forgot your password?","text.or":"or login with","text.sign-facebook":"Facebook","text.sign-google":"Google","text.not-register":"Not registered yet?","text.sign-up":"Create account","text.sign-info":"With your free account you can try out all PRO features for %days days. After the trial period is over, you can continue using the free version of Corel Vector for as long as you like. Enjoy!","text.not-register-subtitle":"Create an account to begin your free trial!","text.create-account-info":"By logging in with my Facebook or Google account<br /> I agree to the <a href=\'https://www.corel.com/terms/\'>Terms of Use</a>. My personal data will be processed in accordance with the descriptions of the <a href=\'%privacy-link\'>Privacy Statement</a>","text.sign-up-title":"Register","text.agree":"I agree to the ","text.terms-use":"Terms of Use","text.eula":"End User License Agreement","text.agreement":"I agree to the %terms-of-use and %end-user-license-agreement.","text.privacy-statement":"My personal data will be processed in accordance with the descriptions of the ","text.privacy-statement-link":"Privacy Statement.","text.info-privacy-statement":"All information is confidential and will not be shared with any 3rd party. ","text.info-privacy-statement-link":"Privacy Policy","text.newsletter":"Get critical software updates and exclusive offers.","text.sign-up-email":"Email Address","text.sign-up-username":"Username","text.sign-up-password":"Password","text.sign-up-password-min-max":"(use %min-number to %max-number chars.)","text.sign-up-password-min":"","text.sign-up-now":"Begin trial","text.sign-up-already":"Already have an account?","text.sign-up-go-back":"Go back to login.","text.reset-password-send":"Send Request","text.welcome-back":"Welcome back, %name!","text.special-offer":"Special offer for you!","text.go-pro":"GO PRO NOW FOR JUST %price/mo.","text.hey":"Hey %name,<br>Thank you for being a Corel Vector user!","text.valid-until":"VALID UNTIL %date","text.buy-now":"BUY NOW for %price.","text.default-info":"Will be billed annually and will auto-renew on %date until you cancel your subscription in your <a data-cmd=\'settings\'>account settings</a>.You will keep that low price on a yearly basis for as long as you auto-renew your subscription.","text.default-info-promo":"Regular price after %date is %price, billed annually.<br><br>You can cancel your subscription at all times (but no money is refunded and the subscription runs until the end of the period).","text.title-xmas-title":"This Holiday Season","text.title-xmas-subtitle":"Unwrap the Gift of a New Design Tool","text.tooltip-trouble-login":"If you have trouble logging in, please contact us at %support-link","text.create-free-account":"Create free account","text.title-create-account":"Create an account to begin your %days day free trial.","text.first-name":"First name","text.last-name":"Last name","text.account-created":"Your account was successfully created!","text.confirmation-account-created":"We have sent a confirmation to <strong>%email</strong>.","text.confirmation-account-created-subtitle":"Please click on the link in the email to activate your account and begin your %days day trial of Corel Vector","text.confirmation-account-created-subtitle-select":"<br><br>To continue, please select an option below:","text.confirmation-account-created-explain-trial":"When the trial is over, you will be able to use the free version of Corel Vector for as long as you like.","text.email-not-received-part-1":"If you didn\'t receive the email, please be sure to check the spam/junk folder of your email client. Otherwise, you can","text.email-not-received-part-2":"send the activation email again here.","text.confirmation-account-created-free":"Start with the free version of Corel Vector now and use your free trial of PRO at a later date.","text.ok":"ok","text.or2":"or","text.try-out-trial-text":"Try Out Corel Vector For %days Days","text.get-started-free-button":"Get Started Free","text.topic-title-1":"Easy to learn and use","text.topic-content-1":"A flexible interface, hundreds of templates, and thousands of stock photos, fonts, graphics, and more make it easy to get started.","text.topic-title-2":"Access from anywhere","text.topic-content-2":"Work across your preferred platforms and touch-enabled devices, and keep your designs safe, synced, and available with unlimited cloud storage.","text.topic-title-3":"Unleash your creativity","text.topic-content-3":"Leverage powerful tools for vector editing, multi-page layout designs, text and typography, non-destructive filters and effects, and so much more.","text.xmas-topic-1":"Click Create FREE Account.","text.xmas-topic-2":"Finish your purchase in two clicks using the in app cart.","text.xmas-topic-3":"Get started using Corel Vector!","text.xmas-header":"Unlock the full power of your<br> photos & harness your creativity with a flexible, professional<br> vector design app.","text.xmas-header-2":"It\'s as easy as 1-2-3!","text.xmas-discount":"<span>Get it Today & Save %discount <mark>— Only %price</mark><span>`","text.pro-info-header":"Dive into fast, flexible, powerful vector editing and graphic design tools.","text.pro-info-header-anonymous":"Corel Vector is a full-featured vector graphic design app that works on ALL platforms.","text.offer-1-title":"Get Started Designing Like a PRO","text.offer-1-subtitle":"Explore these Powerful Tools to Unleash your Creativity.","text.offer-1-topic-1":"Import your existing EPS files and keep working on them.","text.offer-1-topic-2":"Create your personal design system with color swatches and shared styles.","text.offer-1-topic-3":"Employ advanced symbol features like nesting and overrides.","text.offer-1-topic-4":"Discover the powerful Bezigon tool, that makes drawing perfect curves a snap.","text.offer-1-action-title":"Learn more","text.offer-1-buy-now":"BUY NOW","text.learn-more":"LEARN MORE","text.terms-use-privacy-policy-separator":"&","text.privacy-policy":"Privacy Policy","text.select-option":"Please Select an Option to Continue","text.version":"Version: <b>%version</b>"},"GReminderDialog":{"text.pro-expire-title":"Hey %name, just a friendly reminder that your Corel Vector subscription will <strong>expire next %timeunit</strong> on %date.<br>We hope that you are enjoying enhanced PRO experience so far!","text.pro-expire-subtitle":"Extend your subscription","text.pro-expired-title":"Hey %name, your Corel Vector subscription <mark>has now expired.</mark>","text.pro-expired-subtitle":"Renew your subscription","text.trial-expired-title":"Hey %name, your Corel Vector <mark>trial period has expired.</mark>","text.trial-expired-subtitle":"Upgrade to PRO","text.trial-expired-subtitle-promo":"UPGRADE TO PRO WITH THIS LIMITED TIME OFFER","text.default-info":"Will be billed annually and will auto-renew on %date until you cancel your subscription in your <a data-cmd=\'settings\'>account settings</a>.","text.default-info-promo":"Will be billed annually and will auto-renew on %date until you cancel your subscription in your <a data-cmd=\'settings\'>account settings</a>. You will keep that low price on a yearly basis for as long as you auto-renew your subscription.","text.default-subinfo":"You can cancel your subscription at all times (but no money is refunded<br>and the subscription runs until the end of the period).","text.default-subinfo-promo":"Regular price after %date is %price, billed annually. You can cancel your subscription at all times (but no money is refunded and the subscription runs until the end of the period).","text.buy-now":"BUY NOW for %price.","text.buy-now-offline":"BUY NOW","text.pro-dismiss-info":"If you click on \\"Dismiss\\", all <a data-cmd=\'learnmore\'>PRO features</a> will be disabled and your account<br>will be downgraded to the free version.","text.pro-dismiss-subinfo":"You can continue using Corel Vector for free as long as you want. Your Cloud files that exceed the limit of %limit will be kept for one more week before they are deleted permanently. You can renew your subscription at any time at your <a data-cmd=\'settings\'>account settings</a>.","text.pro-dismiss-title":"DISMISS","text.month":"month","text.days":"days","text.continue-as-free":"Continue with Corel Vector Free","text.your-pro-subscription":"Your Corel Vector subscription","text.your-subscription-expires-date":"will <mark>expire on %date</mark>","text.subscription-expires-today":"Your Corel Vector subscription expires <mark>today</mark>","text.subscription-expired":"Your Corel Vector subscription has <mark>expired</mark>","text.trial-expired":"Your Corel Vector <mark>Trial has Expired!</mark>","text.upgrade-screen":"All the design power you need, wherever you are!"},"GCommonNames":{"text.template-header-normal":" ","text.template-header-promo":"LIMITED TIME SPECIAL OFFER","text.template-header-final":"THIS IS YOUR FINAL CHANCE","text.template-header-offline":" ","text.template-title-normal":"GET COREL VECTOR NOW FOR %price.","text.template-title-promo":"GET COREL VECTOR NOW JUST FOR %price.","text.template-title-offline":"GET COREL VECTOR NOW.","text.template-content-normal":"Will be billed annually and will auto-renew on %nextBillingDate until you cancel your subscription in your <a data-cmd=\'settings\'>account settings</a>.","text.template-content-promo":"Will be billed annually and will auto-renew on %nextBillingDate until you cancel your subscription in your <a data-cmd=\'settings\'>account settings</a>.<br>You will keep that low price on a yearly basis for as long as you auto-renew your subscription.","text.template-content-offline":"Will be billed annually and will auto-renew until you cancel your subscription in your <a data-cmd=\'settings\'>account settings.</a>","text.template-footer-promo":"HURRY UP! THIS OFFER <strong>%expire.</strong>","text.template-footer-normal":" ","text.template-footer-offline":" ","text.unknown-user":"Unknown"},"GCorelLoginDialog":{"text.title-title":"Welcome to CorelDRAW.app","text.title-subtitle":"At home, at work, or on the go, this powerful vector illustration web app makes doing what you love more accessible than ever.","text.placeholder-sign-in-login":"Email or Username","text.placeholder-sign-in-password":"Password","text.sign-in-title":"Licensed User Sign-in","text.sign-in-subtitle":"Use your CorelDRAW authentication credentials (version 2019 or newer) to sign in.","text.sign-in-button":"Sign in with license","text.sign-in-login-word":"(Corel customer account user name)","text.sign-in-login":"Email Address","text.sign-in-password":"Password","text.forgot-password":"Forgot your password?","text.or":"or sign in with one click","text.sign-microsoft":"Sign in with Microsoft 365","text.sign-google":"Sign in with Google Workspace","text.sign-up-email":"Email Address","text.reset-password-send":"Send Request","text.sign-up-go-back":"Go back to sign-in.","text.get-started":"Get Started","text.get-started-text":"To sign in to CorelDRAW.app for creating or editing designs, <b>you must have a licensed copy</b> or an active trial of CorelDRAW Graphics Suite or CorelDRAW Technical Suite (version 2019 or newer).","text.learn-more":"LEARN MORE","text.enterprise-sign-in":"CorelDRAW.app Enterprise Sign-in","text.enterprise-sign-in-message":"CorelDRAW.app Enterprise users, sign in with your Microsoft 365 or Google Workspace account.","text.enterprise-login-header":"Welcome to CorelDRAW.app Enterprise","text.enterprise-login-header-subtitle":"At work, or on the go, this powerful vector illustration web app makes doing what you love more accessible than ever.","text.enterprise-login-sign-in":"Sign In","text.enterprise-login-coporate-account":"Use your corporate user account<div class=\'highlight\'>*</div> to sign in to CorelDRAW.app Enterprise","text.enterprise-login-message-1":"<div class=\'highlight\'>*</div> Note: CorelDRAW.app Enterprise sign-in is available exclusively to companies signed-up for a CorelDRAW.app Enterprise License.","text.enterprise-login-message-2":"If you are unsure whether or not you\'re eligible, consult your employer\'s IT administrator","text.enterprise-login-not-enterprise-user":"Not a CorelDRAW.app Enterprise User?","text.enterprise-login-go-to-sign-in":"Go to the CorelDRAW.app sign-in page","text.guest-sign-in-title":"Guest Sign-In","text.guest-sign-in-stubtitle":"Please provide your credentials to identify you in the shared file","text.guest-sign-in-text":"Please use the Guest Sign-In to access the shared design if you don\'t have a licensed copy or active trial of CorelDRAW Graphics Suite or CorelDRAW Technical Suite (version 2019 or newer).","text.guest-sign-in":"Sign in as guest","text.guest-sign-in-first-name":"First Name","text.guest-sign-in-last-name":"Last Name","text.guest-sign-in-send-link":"SEND SIGN-IN LINK","text.guest-sign-in-resend-link":"RESEND SIGN-IN LINK","text.guest-sign-in-node":"<div class=\'highlight\'>*</div> Note: Clicking on the button sends a link to your provided email address, that directly signs you in when clicked.","text.guest-sign-in-send-success":"A link was sent to your email account, please click on it to access this design as a guest.","text.guest-sign-in-send-success-tip":"If you didn\'t receive the email, please be sure to check the spam/junk folder of your email client or Resend Sign-in link below."},"GOfferDialogV1":{"text.offerdialog-v1-title":"Keep creating with fast, powerful, flexible tools that work the way you do.","text.offerdialog-v1-topic-1":"Intuitive vector toolset for sharp and vivid vector graphics at any size","text.offerdialog-v1-topic-2":"Object transformation and distribution tools for snap-to-grid precision","text.offerdialog-v1-topic-3":"Keep your designs safe, synced, and available across platforms with unlimited cloud storage","text.offerdialog-v1-topic-4":"Dozens of non-destructive filters, effects, and image editing tools","text.offerdialog-v1-topic-5":"Accessible everywhere, including touch-enabled devices","text.offerdialog-v1-topic-6":"Powerful text and typography capabilities","text.offerdialog-v1-topic-7":"Easy to learn and use","text.offerdialog-v1-topic-8":"Wide range of format compatibility ensures you can import files from almost anywhere","text.offerdialog-v1-topic-9":"Thousands of templates and stock photos, graphics, fonts, and more","text.offerdialog-v1-default-title":"Corel Vector","text.share-file-sub-title-1":"Stay connected with colleagues and clients as remote work becomes our new normal.","text.share-file-sub-title-2":"Get even more power for designing on the go with CorelDRAW.app PRO:","text.share-file-dashboard-sub-title":"Design on the go with more professional tools:","text.share-file-topic-1":"Share design files with colleagues and clients.","text.share-file-topic-2":"Gather real-time comments and annotations from one or many contributors, right within your shared CorelDRAW design file.","text.share-file-topic-3":"Get unlimited Cloud storage to bring your ideas to life.","text.share-file-topic-4":"Use the web app with any major browser to design and export in CMYK","text.share-file-topic-5":"Export your designs with up to 300dpi and advanced options.","text.share-file-topic-6":"No internet connection required: Use CorelDRAW.app PRO offline.","text.share-file-topic-7":"Design and export in CMYK from start to finish.","text.share-file-title":"Benefit from CorelDRAW design sharing and more with a CorelDRAW.app PRO subscription.","text.share-file-dashboard-title":"Don’t Lose Your Super Power, Keep these Professional Tools","text.loyal-users":"EXCLUSIVE LIMITED TIME OFFER ONLY FOR OUR LOYAL COREL VECTOR USERS!","text.upgrade-tip":"When your access expires, you will also lose access to your projects until you upgrade. Please ensure you download your files before your access expires.","text.footer-promo-title":"Save %discount on Your Corel Vector Subscription when you Buy Now","text.footer-promo-buy":"BUY NOW","text.footer-normal-title":"Go PRO and Get a 1 Year Subscription to Corel Vector for only %price per year.","text.footer-normal-buy":"BUY NOW","text.footer-offline-title":"Go PRO and Get a 1 Year Subscription to Corel Vector.","text.footer-offline-buy":"BUY NOW","text.footer-buy-now":"BUY NOW","text.year":"/year","text.start-trial-button":"Start the 15-day trial now","text.start-trial-caption":"During the trial, you can try all of the features of Corel Vector. Once complete, you will return to the free version.","text.offerdialog-v1-ipad-layout-title":"This feature requires a CorelDRAW.app PRO account","text.offerdialog-v1-ipad-layout-content-title":"CorelDRAW.app’s PRO features are made for design professionals","text.offerdialog-v1-ipad-layout-topic-1":"Get unlimited cloud storage.","text.offerdialog-v1-ipad-layout-topic-2":"Export your designs at up to 300dpi and with advanced options.","text.offerdialog-v1-ipad-layout-topic-3":"Reuse existing elements with symbols and share styles.","text.offerdialog-v1-ipad-layout-topic-4":"Design and export in CMYK from start to finish.","text.offerdialog-v1-ipad-layout-topic-5":"Access system/device fonts or import your own fonts.","text.offerdialog-v1-ipad-layout-topic-6":"No internet connection required: Use CorelDRAW.app offline.","text.offerdialog-v1-ipad-layout-topic-7":"Import your existing EPS files."},"GOfflineDialog":{"text.have-questions":"If you have questions, please <a href=\'%link\' target=\'_blank\'>contact us here.</a>","text.retry-connection":"Hey %name, in order to complete your request we need an internet connection. Please <strong>connect your device</strong> and click on \\"Retry.\\"","text.retry":"Retry","text.cancel":"Cancel"},"GPaywallDialog":{"text.offerdialog-v1-subscribe-title-1":"To use this or other PRO features","text.offerdialog-v1-subscribe-title-2":"<mark>you have to subscribe</mark> to Corel Vector","text.offerdialog-v1-subscribe-share-file-title-1":"To share design files with clients and colleagues","text.offerdialog-v1-subscribe-share-file-title-2":"<mark>you have to subscribe</mark> to CorelDRAW.app PRO","text.offerdialog-v1-subscribe-share-file-dashboard-title":"To use this or other PRO features you have to <mark>subscribe</mark> to CorelDRAW.app PRO","text.remaining-days":"Your access to Corel Vector expires in <mark>%days days</mark>","text.remaining-day":"Your access to Corel Vector expires in <mark>%day day</mark>","text.expires-today":"Your access to Corel Vector expires today","text.trial-message1":"<strong>Unleash your creativity</strong> with a large set of templates and icons in the libraries, choose from a wide selection of fonts or bring in your own typefaces. Over 30 effects and 20 blend modes will give you all the freedom for your next creative project.","text.trial-message2":"<strong>Revolutionize the way you work</strong> with powerful anchoring for responsive layouts or advanced vector tools for your next icon or logo design. Symbols, shared styles and color swatches let you reuse existing elements to create your own design system.","text.trial-message-3":"Go PRO before it\'s too late.","text.pretrial-title":"Get Started Designing Like a PRO","text.pretrial-subtitle":"Explore these Powerful Tools to Unleash your Creativity.","text.learn-more":"Learn more","text.access-message1":"<strong>Upgrade today</strong> and secure continued access to this web-based vector graphics app that empowers you to create on any device. Keep your designs safe, synced, and available across platforms with unlimited storage space in the cloud."},"GSharePointModel":{"error.refresh-token-invalid":"Please, relogin to get access to the SharePoint"},"GGoogleDrive":{"text.all-files-tab-title":"All files","text.gravit-designer-tab-title":"Corel Vector files","text.team-drives-tab-title":"Team Drives files"},"SearchWidget":{"text.no-exact-matches-search-term":"No exact matches for “%searchTerm”. Showing results for similar words or characters instead."}},"translationsExtended":{},"translationsExtendedTemporary":{},"translationsTemporary":{},"etag":"20c27defafb5102a26d035ad1194634b"},{"language":"German","keyValue":1,"abbreviation":"de-DE","isDefault":false,"isAvailable":true,"realName":"Deutsch","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Chinese","keyValue":2,"abbreviation":"zh-CN","isDefault":false,"isAvailable":true,"realName":"中文","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Portuguese","keyValue":3,"abbreviation":"pt-BR","isDefault":false,"isAvailable":true,"realName":"Português","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Spanish","keyValue":4,"abbreviation":"es-ES","isDefault":false,"isAvailable":true,"realName":"Español","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"French","keyValue":5,"abbreviation":"fr-FR","isDefault":false,"isAvailable":true,"realName":"Français","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Polish","keyValue":6,"abbreviation":"pl-PL","isDefault":false,"isAvailable":true,"realName":"Polski","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Russian","keyValue":7,"abbreviation":"ru-RU","isDefault":false,"isAvailable":true,"realName":"Русский","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Turkish","keyValue":8,"abbreviation":"tr-TR","isDefault":false,"isAvailable":true,"realName":"Türkçe","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Czech","keyValue":9,"abbreviation":"cs-CZ","isDefault":false,"isAvailable":true,"realName":"Čeština","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"ChineseTaiwan","keyValue":10,"abbreviation":"zh-TW","isDefault":false,"isAvailable":true,"realName":"中文 Taiwan","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Italian","keyValue":11,"abbreviation":"it-IT","isDefault":false,"isAvailable":true,"realName":"Italiano","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Japanese","keyValue":12,"abbreviation":"ja-JP","isDefault":false,"isAvailable":true,"realName":"日本語","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Dutch","keyValue":13,"abbreviation":"nl-NL","isDefault":false,"isAvailable":true,"realName":"Nederlands","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}},{"language":"Swedish","keyValue":14,"abbreviation":"sv-SE","isDefault":false,"isAvailable":true,"realName":"Swedish","translations":{},"translationsExtended":{},"translationsTemporary":{},"translationsExtendedTemporary":{}}]')},function(e){e.exports=JSON.parse("[]")},function(e,t,n){(function(e){!function(e){var t=function(){try{return!!Symbol.iterator}catch(e){return!1}}(),n=function(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n},o=function(e){return encodeURIComponent(e).replace(/%20/g,"+")},i=function(e){return decodeURIComponent(String(e).replace(/\+/g," "))};(function(){try{var t=e.URLSearchParams;return"a=1"===new t("?a=1").toString()&&"function"==typeof t.prototype.set&&"function"==typeof t.prototype.entries}catch(e){return!1}})()||function(){var i=function(e){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var t=typeof e;if("undefined"===t);else if("string"===t)""!==e&&this._fromString(e);else if(e instanceof i){var n=this;e.forEach((function(e,t){n.append(t,e)}))}else{if(null===e||"object"!==t)throw new TypeError("Unsupported input's type for URLSearchParams");if("[object Array]"===Object.prototype.toString.call(e))for(var o=0;o<e.length;o++){var a=e[o];if("[object Array]"!==Object.prototype.toString.call(a)&&2===a.length)throw new TypeError("Expected [string, any] as entry at index "+o+" of URLSearchParams's input");this.append(a[0],a[1])}else for(var r in e)e.hasOwnProperty(r)&&this.append(r,e[r])}},a=i.prototype;a.append=function(e,t){e in this._entries?this._entries[e].push(String(t)):this._entries[e]=[String(t)]},a.delete=function(e){delete this._entries[e]},a.get=function(e){return e in this._entries?this._entries[e][0]:null},a.getAll=function(e){return e in this._entries?this._entries[e].slice(0):[]},a.has=function(e){return e in this._entries},a.set=function(e,t){this._entries[e]=[String(t)]},a.forEach=function(e,t){var n;for(var o in this._entries)if(this._entries.hasOwnProperty(o)){n=this._entries[o];for(var i=0;i<n.length;i++)e.call(t,n[i],o,this)}},a.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),n(e)},a.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),n(e)},a.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),n(e)},t&&(a[Symbol.iterator]=a.entries),a.toString=function(){var e=[];return this.forEach((function(t,n){e.push(o(n)+"="+o(t))})),e.join("&")},e.URLSearchParams=i}();var a=e.URLSearchParams.prototype;"function"!=typeof a.sort&&(a.sort=function(){var e=this,t=[];this.forEach((function(n,o){t.push([o,n]),e._entries||e.delete(o)})),t.sort((function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0})),e._entries&&(e._entries={});for(var n=0;n<t.length;n++)this.append(t[n][0],t[n][1])}),"function"!=typeof a._fromString&&Object.defineProperty(a,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(e){if(this._entries)this._entries={};else{var t=[];this.forEach((function(e,n){t.push(n)}));for(var n=0;n<t.length;n++)this.delete(t[n])}var o,a=(e=e.replace(/^\?/,"")).split("&");for(n=0;n<a.length;n++)o=a[n].split("="),this.append(i(o[0]),o.length>1?i(o[1]):"")}})}(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this),function(e){if(function(){try{var t=new e.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href&&t.searchParams}catch(e){return!1}}()||function(){var t=e.URL,n=function(t,n){"string"!=typeof t&&(t=String(t)),n&&"string"!=typeof n&&(n=String(n));var o,i=document;if(n&&(void 0===e.location||n!==e.location.href)){n=n.toLowerCase(),(o=(i=document.implementation.createHTMLDocument("")).createElement("base")).href=n,i.head.appendChild(o);try{if(0!==o.href.indexOf(n))throw new Error(o.href)}catch(e){throw new Error("URL unable to set base "+n+" due to "+e)}}var a=i.createElement("a");a.href=t,o&&(i.body.appendChild(a),a.href=a.href);var r=i.createElement("input");if(r.type="url",r.value=t,":"===a.protocol||!/:/.test(a.href)||!r.checkValidity()&&!n)throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:a});var s=new e.URLSearchParams(this.search),l=!0,c=!0,d=this;["append","delete","set"].forEach((function(e){var t=s[e];s[e]=function(){t.apply(s,arguments),l&&(c=!1,d.search=s.toString(),c=!0)}})),Object.defineProperty(this,"searchParams",{value:s,enumerable:!0});var u=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==u&&(u=this.search,c&&(l=!1,this.searchParams._fromString(this.search),l=!0))}})},o=n.prototype;["hash","host","hostname","port","protocol"].forEach((function(e){!function(e){Object.defineProperty(o,e,{get:function(){return this._anchorElement[e]},set:function(t){this._anchorElement[e]=t},enumerable:!0})}(e)})),Object.defineProperty(o,"search",{get:function(){return this._anchorElement.search},set:function(e){this._anchorElement.search=e,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(o,{toString:{get:function(){var e=this;return function(){return e.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(e){this._anchorElement.href=e,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(e){this._anchorElement.pathname=e},enumerable:!0},origin:{get:function(){var e={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],t=this._anchorElement.port!=e&&""!==this._anchorElement.port;return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(t?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(e){},enumerable:!0},username:{get:function(){return""},set:function(e){},enumerable:!0}}),n.createObjectURL=function(e){return t.createObjectURL.apply(t,arguments)},n.revokeObjectURL=function(e){return t.revokeObjectURL.apply(t,arguments)},e.URL=n}(),void 0!==e.location&&!("origin"in e.location)){var t=function(){return e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")};try{Object.defineProperty(e.location,"origin",{get:t,enumerable:!0})}catch(n){setInterval((function(){e.location.origin=t()}),100)}}}(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this)}).call(this,n(101))},,,,,,,,,,,,,function(e,t){String.prototype.codePointAt||function(){"use strict";var e=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(e){}return n}(),t=function(e){if(null==this)throw TypeError();var t=String(this),n=t.length,o=e?Number(e):0;if(o!=o&&(o=0),!(o<0||o>=n)){var i,a=t.charCodeAt(o);return a>=55296&&a<=56319&&n>o+1&&(i=t.charCodeAt(o+1))>=56320&&i<=57343?1024*(a-55296)+i-56320+65536:a}};e?e(String.prototype,"codePointAt",{value:t,configurable:!0,writable:!0}):String.prototype.codePointAt=t}()},,,,function(e,t,n){"use strict";n(89),n(28);var o=n(1);function i(e,t,n,i){this._dialog=$("<div></div>"),this._replacedFonts={},this.opened=!1,this._document=e,this._callbacks=[],this._keepFontsButton=$("<button>"+o.GLocale.get(new o.GLocaleKey("GMissingFontsDialog","action.keep-fonts"))+"</button>").on("click",()=>this._keepFonts()),this._hasFakeTextNodes()||(this._keepFontsButton.addClass("g-disabled"),this._keepFontsButton.attr("disabled",!0)),i&&this._callbacks.push(i),$("<div></div>").addClass("title").text(o.GLocale.get(new o.GLocaleKey("GMissingFontsDialog","text.fonts-missing"))).appendTo(this._dialog),$("<div></div>").addClass("subtitle").text(o.GLocale.get(new o.GLocaleKey("GMissingFontsDialog","text.fonts-not-found"))).appendTo(this._dialog),this._fontsContainer=$("<div></div>").addClass("fonts-container").appendTo(this._dialog),this.setMissingFonts(t);var a=[];a.push(this._keepFontsButton),e&&a.unshift($("<button>"+o.GLocale.get(new o.GLocaleKey("GMissingFontsDialog","action.replace-fonts"))+"</button>").on("click",this._replaceFonts.bind(this))),this.setProviderEnablers(n),this._dialog.gDialog({releaseOnClose:!0,className:"g-missingfonts-dialog",buttons:a})}o.GObject.inherit(i,o.GObject),i.prototype.getMissingFonts=function(){var e=[];return this._fontsContainer.find(".postscriptname").each((t,n)=>e.push($(n).data("font"))),e},i.prototype.setProviderEnablers=function(e){if(e&&e.length>0){$("<div></div>").addClass("subtitle").text(o.GLocale.get(new o.GLocaleKey("GMissingFontsDialog","text.turn-disabled-function"))+":").css({marginTop:"5px"}).appendTo(this._dialog);for(var t=0;t<e.length;t++)$(e[t]).appendTo(this._dialog)}},i.prototype.setMissingFonts=function(e){if(e){var t=Object.keys(this._replacedFonts);if(Array.isArray(e)){var n=gDesigner.getWorkspace().getFontManager().getDefaultFont();this._keepFontsButton.show(),e.forEach(e=>{this._replacedFonts[e]=n.getFamily()})}else this._keepFontsButton.hide(),Object.keys(e).forEach(t=>{this._replacedFonts[t]=e[t]});var o=this;Object.keys(this._replacedFonts).forEach(e=>{if(!(t.indexOf(e)>=0)){var i=$("<div></div>").addClass("font-row").appendTo(this._fontsContainer);$("<div></div>").addClass("postscriptname").data("font",e).text(e).appendTo(i),$("<input/>").addClass("g-select").data("font",e).attr("type","button").gFontsButton({assignFontCallback:function(e,t){o._replacedFonts[t.data("font")]=e}}).val(o._replacedFonts[e]||n.getFamily()).appendTo(i)}})}else this._keepFontsButton.hide()},i.prototype.open=function(e){var t=e||o.GLocale.get(new o.GLocaleKey("GMissingFontsDialog","action.keep-fonts"));this._keepFontsButton.text(t),this.opened=!0,this._dialog.gDialog("open",!1)},i.prototype.close=function(e){this.opened=!1,this._callbacks.forEach(t=>{t(e?this._replacedFonts:null)}),this._dialog.gDialog("close")},i.prototype._keepFonts=function(){gDesigner.stats("missingfonts_keep_fonts");var e=this._document.getScene();if(e){var t=e.getProperty("cst")||[];Object.keys(this._replacedFonts).forEach(e=>{!t.indexOf(e)>=0&&t.push(e)}),e.setProperty("cst",t),this.close()}else this.close()},i.prototype._hasFakeTextNodes=function(){var e=!1;const t=this._document&&this._document.getScene();return t&&t.acceptChildren(t=>{if(t instanceof o.GText&&(t.isFakeText()||t.hasEmbeddedFonts()))return e=!0,!1}),e},i.prototype._replaceFonts=function(){gDesigner.stats("missingfonts_replace_fonts"),this._document.getScene().acceptChildren(e=>{if(e instanceof o.GText)if(e.isFakeText()||!e.$fontFamilies)e.replaceFonts(this._replacedFonts,e.hasEmbeddedFonts());else{var t=gDesigner.getWorkspace().getFontManager().getDefaultFont(),n=Object.keys(this._replacedFonts),i=e.getContent();i&&(i.forEach((o,i)=>{var a=e.$fontFamilies&&e.$fontFamilies[i]||o.fontFamily;-1!==n.indexOf(a)&&(o.fontFamily=this._replacedFonts[a]||t.getFamily())}),e._runsDirty=!0,e.$content=JSON.stringify(i),e.setText(i),e.repaint())}else if(e instanceof o.GStyle){var a=e.getProperty("_tff");this._replacedFonts instanceof o.GFont?e.setProperties(["_tff","_tfs","_tfw"],[this._replacedFonts.getFamily(),this._replacedFonts.getStyle(),this._replacedFonts.getWeight()]):a&&this._replacedFonts[a]&&e.setProperty("_tff",this._replacedFonts[a])}}),this.close(!0)},e.exports=i},function(e,t,n){"use strict";n(1016);var o=n(30),i=n(714);o({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==i},{trimStart:i})},function(e,t,n){"use strict";n(3);var o=n(1),i=n(16),a=n(27);function r(){}o.GObject.inherit(r,a),r.ID="file.open-recent",r.TITLE=new o.GLocaleKey("GOpenRecentAction","title"),r.prototype.getId=function(){return r.ID},r.prototype.getTitle=function(){return r.TITLE},r.prototype.getCategory=function(){return i.CATEGORY_FILE_OPEN_RECENT},r.prototype.getGroup=function(){return"file-open/open-recent"},r.prototype.isEnabled=function(e){return!1},r.prototype.execute=function(){},r.prototype.toString=function(){return"[Object GOpenRecentAction]"},e.exports=r},function(e,t,n){"use strict";var o=n(45),i={"gravit-cloud":"gravit-icon-cloud","modify.merge":"gravit-icon-merge-union","view.play":"gravit-icon-presentation","edit.paste.in-place":"gravit-icon-paste-in-place","file.install-to-desktop":"gravit-icon-install"};i["arrange.align."+o.GEditor.ArrangeAlignType.AlignLeft]='<svg class="align-svg" xmlns="http://www.w3.org/2000/svg" style="isolation:isolate" viewBox="53 2 20 20" width="20" height="20"><rect id="align-area" x="62" y="9" width="4" height="12" transform="rotate(-90 64 15)" fill="#FFF"/><rect id="align-area" x="60" y="5" width="4" height="8" transform="rotate(-90 62 9)" fill="#FFF"/><rect id="align-shape" x="54" y="3" width="2" height="18" transform="rotate(-180 55 12)" fill="#3A98FF"/></svg>',i["arrange.align."+o.GEditor.ArrangeAlignType.AlignCenter]='<svg class="align-svg" xmlns="http://www.w3.org/2000/svg" style="isolation:isolate" viewBox="77 2 20 20" width="20" height="20"><rect id="align-shape" x="86" y="3" width="2" height="18" transform="rotate(180 87 12)" fill="#3A98FF"/><rect id="align-area" x="85" y="3" width="4" height="12" transform="rotate(90 87 9)" fill="#FFF"/><rect id="align-area" x="85" y="11" width="4" height="8" transform="rotate(90 87 15)" fill="#FFF"/></svg>',i["arrange.align."+o.GEditor.ArrangeAlignType.AlignRight]='<svg class="align-svg" xmlns="http://www.w3.org/2000/svg" style="isolation:isolate" viewBox="103 2 20 20" width="20" height="20"><rect id="align-area" x="110" y="9" width="4" height="12" transform="rotate(90 112 15)" fill="#FFF"/><rect id="align-area" x="112" y="5" width="4" height="8" transform="rotate(90 114 9)" fill="#FFF"/><rect id="align-shape" x="120" y="3" width="2" height="18" transform="rotate(180 121 12)" fill="#3A98FF"/></svg>',i["arrange.align."+o.GEditor.ArrangeAlignType.AlignTop]='<svg class="align-svg" xmlns="http://www.w3.org/2000/svg" style="isolation:isolate" viewBox="128 2 20 20" width="20" height="20"><rect id="align-area" x="133" y="7" width="4" height="12" fill="#FFF"/><rect id="align-area" x="139" y="7" width="4" height="8" fill="#FFF"/><rect id="align-shape" x="137" y="-5" width="2" height="18" transform="rotate(-90 138 4)" fill="#3A98FF"/></svg>',i["arrange.align."+o.GEditor.ArrangeAlignType.AlignMiddle]='<svg class="align-svg" xmlns="http://www.w3.org/2000/svg" style="isolation:isolate" viewBox="156 1.9999999999999982 20 20" width="20" height="20"><rect id="align-shape" x="165" y="3" width="2" height="18" transform="rotate(90 166 12)" fill="#3A98FF"/><rect id="align-area" x="161" y="6" width="4" height="12" transform="rotate(-180 163 12)" fill="#FFF"/><rect id="align-area" x="167" y="8" width="4" height="8" transform="rotate(-180 169 12)" fill="#FFF"/></svg>',i["arrange.align."+o.GEditor.ArrangeAlignType.AlignBottom]='<svg class="align-svg" xmlns="http://www.w3.org/2000/svg" style="isolation:isolate" viewBox="181 2 20 20" width="20" height="20"><rect id="align-area" x="186" y="5" width="4" height="12" transform="rotate(180 188 11)" fill="#FFF"/><rect id="align-area" x="192" y="9" width="4" height="8" transform="rotate(180 194 13)" fill="#FFF"/><rect id="align-shape" x="190" y="11" width="2" height="18" transform="rotate(-90 191 20)" fill="#3A98FF"/></svg>',i["arrange.order."+o.GEditor.ArrangeOrderType.BringForward]="gravit-icon-bring-front",i["arrange.order."+o.GEditor.ArrangeOrderType.SendBackward]="gravit-icon-bring-back",i["arrange.order."+o.GEditor.ArrangeOrderType.SendToFront]="gravit-icon-send-to-front",i["arrange.order."+o.GEditor.ArrangeOrderType.SendToBack]="gravit-icon-send-to-back",e.exports=i},function(e,t,n){"use strict";var o=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t.updateFileFn=t.syncImagesToCloud=t.listFilesFn=t.fetchRequest=t.default=t.createFileAndGetSignedPutUrlsFn=void 0,n(17),n(169),n(89),n(26),n(7),n(18),n(3),n(124),n(204),n(177),n(178),n(179),n(180),n(22),n(106);var i=o(n(213));const a=n(420),r=t.syncImagesToCloud=async function(e,t,n,o,r,s,l,c,d){try{var u=new i.default;const S=o.length;for(var p=0;p<S;++p){var g=o[p];if(g.cloud){u.addEntry(new i.default.Entry(g.cloud,g.uuid,g.references));continue}var h=/^data:.{0,255};base64,/i.exec(g.value);if(!h)continue;var f=a(g.value);let l=await e({md5:f}),E=l?l[0]:null;if(E)u.addEntry(new i.default.Entry(i.default.CLOUD_PROTOCOL+"://id="+E.id,g.uuid,g.references));else if(g.references>0){for(var m=t,y=0;y<n.length;++y){var v=n[y],_=i.default.PROTOCOL+"://"+g.uuid;if((v.url+"").startsWith(i.default.PROTOCOL)&&v.url===_){v.name&&(m=v.name);break}}var b=g.value,w=h[1]||"application/octet-stream";let e;function C(e,t,n){var o,i=e.split(",");try{o=atob(i[1])}catch(e){o=""}for(var a=o.length,r=new Uint8Array(a);a--;)r[a]=o.charCodeAt(a);return new File([r],t,{type:n})}({urls:e,file:E}=await r(m,w));var x=C(b,c+"-"+E.id+".txt",w);let o={method:"PUT",headers:{"Cache-Control":"public, max-age=31536000"},body:x};w&&(o.headers=Object.assign(o.headers,{"Content-Type":w}));if(!(await fetch(e.url,o)).ok)throw new Error("failed to upload");await s(x,E.id,f),u.addEntry(new i.default.Entry(i.default.CLOUD_PROTOCOL+"://id="+E.id,g.uuid,g.references)),d&&d(p/S)}}return l&&l(u)}catch(e){return Promise.reject(e)}},s=(e,t,n)=>{var o=n&&n.method||"GET",i=n&&n.body&&JSON.stringify(n.body),a=Object.assign({"Content-Type":"application/json",Accept:"json",Authorization:t||""},n&&n.headers);if(n&&n.query){var r=n.query,s=new URLSearchParams;for(var l in r)s.append(l,r[l]);e=e+"/?"+s.toString()}var c={credentials:"include",headers:a,method:o};return i&&"GET"!==o&&(c.body=i),fetch(e,c).then(e=>e.json())};t.fetchRequest=s;t.listFilesFn=(e,t,n)=>s("".concat(n,"/file"),t,{query:e});t.createFileAndGetSignedPutUrlsFn=async function(e,t,n,o){var i={method:"POST",body:{name:e,type:t,trashed:null}};const a=await s("".concat(n,"/file"),o,i);var r={method:"PUT",body:{id:a.id,type:t}};return{urls:await s("".concat(n,"/file/").concat(a.id,"/urls"),o,r),file:a}},t.updateFileFn=async function(e,t,n,o,i,a,r){const l=a&&r?await r(e):null;return await s("".concat(o,"/file/").concat(t),i,{method:"PUT",body:{md5:n,trashed:!1,sha256:l}})};t.default={syncImagesToCloud:r}},function(e,t,n){"use strict";n(26);var o=n(217);const{License:i,LicenseType:a,DateAPI:r}=n(9),{defaultUserSettings:{license:{offlineCountdown:s,offlineExpirationTime:l}}}=n(9).defaultUserSettings,c=n(764),d=n(1076);e.exports=class{static newLicense(e){return c.updateLicense(e),this._newLicense(e)}static newDefaultLicense(){return this._newLicense({license:a.Default})}static newOfflineLicense(){const e=c.getLicense();if(e){const t=r.addTime(r.addTime(new Date(e.lastUpdate),e.offlineExpirationTime||l),e.offlineCountdown||s);return this._newLicense(Object.assign(e,{offline:!0,offlineExpire:t}))}return this._newLicense({license:a.Default,offline:!0})}static _newLicense(e){return this._isDevLicense()?new d(e):new i(e)}static _isDevLicense(){if(o.IS_TRUNK)return!0;if(o.IS_RC){const e=gDesigner.getSyncUser();return!!e&&!e.isDeactivated()&&e.isEmailVerified()&&e.isGravitAccount()}return!1}}},function(e,t,n){"use strict";var o=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t.cdrFormatVersionToReleaseYear=function(e){return parseFloat(e)+2e3-2},t.prepareCDRforSaving=t.default=void 0,t.releaseYearToCdrFormatVersion=function(e){return e&&e>=2020?e-2e3+2:0},n(181),n(7);var i=n(1),a=o(n(203)),r=o(n(78));const s=n(1078),l=t.prepareCDRforSaving=async function(e,t,n,o,l){if(!gDesigner.getCDRIntegrationEngine())return t(),!1;const c=await gDesigner.getUser();n.userName=c?c.getFullUserName():i.GLocale.get(new i.GLocaleKey("GDocument","text.default-export-author"));const d=n=>{if(n.status!==r.default.Saving&&e.removeEventListener(a.default,d),n.status===r.default.SaveFailed){let e="unexpected";try{if(n.data&&n.data instanceof s&&n.data.errCode==s.Type.TooBigFileSize){e="expected.too-big-file-size";let n=new Error(this.getTitle()+": "+i.GLocale.get(new i.GLocaleKey("GCommonNames","text.file-too-large-cannot-be-processed")));n.code=507,t(n)}}finally{gDesigner.stats("filespanel_export_cdr-failed",e)}}else n.status===r.default.Saved&&gDesigner.stats("filespanel_export_cdr-ok")};return e.addEventListener(a.default,d),gDesigner.getCDRIntegrationEngine().saveCDRDocument(e,n,async e=>{l(e)},t,o)};t.default={prepareCDRforSaving:l}},function(e,t,n){"use strict";n(540);var o=n(14);n(17),n(89),n(26),n(7),n(18),n(3),n(29),n(22),n(117),n(106);var i=n(1),a=n(34),r=n(575),s=o(n(766)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var r=i?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(o,a,r):o[a]=e[a]}return o.default=e,n&&n.set(e,o),o}(n(768)),c=o(n(576));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}const u=n(1085),p=n(577),{HTTP_STATUS_CODES:g}=n(9);function h(e){this.setTokenIssuer(e)}h.TRIAL_UNTIL_FAIL=3,h.isUsageLimitError=function(e){return!(!e||!e.error)&&(Number(e.error.code)===g.FORBIDDEN&&e.error.errors.some(e=>"usageLimits"===e.domain))},h.ExceptionCode={LoginAborted:1};class f extends c.default{constructor(e,t){super(e),this.code=t,this.__proto__=f.prototype,this.name="GoogleDriveException"}toString(){return"[Object GoogleDriveException]"}}h.GoogleDriveException=f,h.prototype.setTokenIssuer=function(e){this._tokenIssuer=e},h.prototype.getTokenIssuerSettings=function(){return this._tokenIssuer?this._tokenIssuer.getSettings():null},h.prototype.getSettings=function(){return this.getTokenIssuerSettings()},h.prototype.getAccessToken=async function(){return this._tokenIssuer&&(this._accessToken=await this._tokenIssuer.get()),this._accessToken},h.prototype.upload=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.DefaultUploadType,i=arguments.length>4?arguments[4]:void 0;switch(o){case h.UploadType.Simple:return this._simpleUpload(e,t,n);case h.UploadType.Resumable:return this._resumableUpload(e,t,n,i)}},h.prototype.isCorporate=function(){if(!this.getTokenIssuerSettings())throw"No Token Issuer for Google";return this.getTokenIssuerSettings().corporate},h.prototype.getCorporateProviderName=function(){return"google"},h.prototype.getFilePermissions=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.getTokenIssuerSettings()||!this.getTokenIssuerSettings().corporate)return Promise.reject(i.GLocale.get(new i.GLocaleKey("GGoogleDrive","error.only-for-corporate")));if(!e)return Promise.reject(i.GLocale.get(new i.GLocaleKey("GGoogleDrive","error.no-file-found")));let n=[];const o=await this.getAccessToken(),a={fields:"*",supportsAllDrives:!0,pageSize:50};return new Promise((i,r)=>{!function l(c){const d=new URL("https://www.googleapis.com/drive/v3/files/".concat(e,"/permissions")),u=Object.assign({},a);c&&(u.pageToken=c);for(var p in u)d.searchParams.append(p,u[p]);return fetch(d.toString(),{method:"GET",headers:new Headers({Authorization:"Bearer ".concat(o)})}).then(e=>e.json()).then(e=>{const{permissions:o,nextPageToken:a}=e;o.length&&(n=n.concat(o)),a?setTimeout((function(){l(a)})):i(t?n:n.map(e=>{let{emailAddress:t,role:n}=e;return{email:t,role:s.default[n],externalRole:n}}))}).catch(e=>r(e))}()})},h.prototype.createOrUpdateUserShare=async function(e,t){if(!e)return Promise.reject(i.GLocale.get(new i.GLocaleKey("GGoogleDrive","error.no-file-found")));if(!this.getTokenIssuerSettings()||!this.getTokenIssuerSettings().corporate)return Promise.reject(i.GLocale.get(new i.GLocaleKey("GGoogleDrive","error.only-for-corporate")));const{role:n,emailAddress:o}=t;if(!n||!o)return Promise.reject(i.GLocale.get(new i.GLocaleKey("GGoogleDrive","error.not-enough-parameters")));const a=await this.getShareIdForEmail(e,o).catch(()=>[]),r={type:"user",emailAddress:o,role:l.default[n.id]};if(a&&a.length>0){const t=await this.removeShare(e,a[0]);if(t.error){const{error:{errors:[{message:e}]}}=t;return Promise.reject(e)}if(r.role===l.NoAccessId)return t}return this._createShare(e,r).then(e=>{if(e.error){const{error:{errors:[{message:t}]}}=e;return Promise.reject(t)}return e})},h.prototype.createDomainShare=function(e,t){if(!e)return Promise.reject(i.GLocale.get(new i.GLocaleKey("GGoogleDrive","error.no-file-found")));if(!this.getTokenIssuerSettings()||!this.getTokenIssuerSettings().corporate)return Promise.reject(i.GLocale.get(new i.GLocaleKey("GGoogleDrive","error.only-for-corporate")));const{role:n,domain:o}=t;if(!n||!o)return Promise.reject(i.GLocale.get(new i.GLocaleKey("GGoogleDrive","error.not-enough-parameters")));const a={type:"domain",domain:o,role:l.default[n.id],allowFileDiscovery:!0};return this._createShare(e,a)},h.prototype._createShare=async function(e,t){if(!this.getTokenIssuerSettings()||!this.getTokenIssuerSettings().corporate)return Promise.reject(i.GLocale.get(new i.GLocaleKey("GGoogleDrive","error.only-for-corporate")));const n=new URL("https://www.googleapis.com/drive/v3/files/".concat(e,"/permissions")),o=await this.getAccessToken(),a={fields:"*",supportsAllDrives:!0,sendNotificationEmail:!1};for(var r in a)n.searchParams.append(r,a[r]);return fetch(n.toString(),{method:"POST",headers:new Headers({Authorization:"Bearer ".concat(o),"Content-Type":"application/json"}),body:JSON.stringify(t)}).then(e=>e.json())},h.prototype.getShareIdForEmail=async function(e,t){return this.getTokenIssuerSettings()&&this.getTokenIssuerSettings().corporate?(await this.getFilePermissions(e,!0)).filter(e=>{let{emailAddress:n}=e;return n===t}):Promise.reject(i.GLocale.get(new i.GLocaleKey("GGoogleDrive","error.only-for-corporate")))},h.prototype.removeShare=async function(e,t){let{id:n}=t;if(!this.getTokenIssuerSettings()||!this.getTokenIssuerSettings().corporate)return Promise.reject(i.GLocale.get(new i.GLocaleKey("GGoogleDrive","error.only-for-corporate")));const o=new URL("https://www.googleapis.com/drive/v3/files/".concat(e,"/permissions/").concat(n)),a=await this.getAccessToken(),r={fields:"*",supportsAllDrives:!0};for(var s in r)o.searchParams.append(s,r[s]);return fetch(o.toString(),{method:"DELETE",headers:new Headers({Authorization:"Bearer ".concat(a)})}).then(e=>204!==e.status?e.json():e)},h.prototype._simpleUpload=async function(e,t,n){const o=await this.getAccessToken();return new Promise((i,a)=>{var r=new FormData;r.append("metadata",new Blob([JSON.stringify(n)],{type:"application/json"})),r.append("file",t);var s=new URL("https://www.googleapis.com/upload/drive/v3/files/".concat(e||"")),l={uploadType:"multipart",fields:"*"};for(var c in n.hasOwnProperty("driveId")&&(l.supportsAllDrives=!0),l)s.searchParams.append(c,l[c]);fetch(s.toString(),{method:e?"PATCH":"POST",headers:new Headers({Authorization:"Bearer ".concat(o)}),body:r}).then(e=>e.json()).then(e=>{i(e)}).catch(e=>{console.error(e),a(e)})})},h.prototype._resumableUpload=async function(e,t,n,o){const i=await this.getAccessToken();return new Promise((a,r)=>{var s=n.mimeType||"application/octet-stream";const l={fields:"*"};n.hasOwnProperty("driveId")&&(l.supportsAllDrives=!0),new u({file:t,fileId:e,token:i,contentType:s,metadata:n,params:l,onComplete:function(e){var t;try{t="string"==typeof e?JSON.parse(e):e}catch(n){t=e}a(t)},onError:function(e){r(e)},onProgress:function(e){o&&o(e.loaded/e.total)}}).upload()})},h.prototype._request=async function(e,t,n,o){o="number"==typeof o?o:0;const i=await this.getAccessToken(),r={Authorization:"Bearer ".concat(i)},s=t.headers?Object.assign(r,t.headers):r;return delete t.headers,fetch(e,Object.assign({headers:new Headers(s),signal:n},t)).then(async i=>{if(!i.ok){var r=await i.json();return i.status===g.UNAUTHORIZED&&(await gContainer.getGoogleAPI().signIn(),0===o)?this._request(e,t,n,++o):i.status===g.FORBIDDEN&&h.isUsageLimitError(r)&&o<h.TRIAL_UNTIL_FAIL?(await(0,a.sleep)(1e3*Math.pow(1+o,2)),this._request(e,t,n,++o)):Promise.reject(r)}return i})},h.prototype._requestWithProgress=async function(e,t,n,o,i){i="number"==typeof i?i:0;const s=await this.getAccessToken(),l={Authorization:"Bearer ".concat(s)},c=t.headers?Object.assign(l,t.headers):l;delete t.headers;const d=await fetch(e,Object.assign({headers:new Headers(c),signal:n},t));if(!d.ok){var u=await d.json();return d.status===g.UNAUTHORIZED&&(await gContainer.getGoogleAPI().signIn(),0===i)?this._requestWithProgress(e,t,n,o,++i):d.status===g.FORBIDDEN&&h.isUsageLimitError(u)&&i<h.TRIAL_UNTIL_FAIL?(await(0,a.sleep)(1e3*Math.pow(1+i,2)),this._requestWithProgress(e,t,n,o,++i)):Promise.reject(u)}return(0,r.readResponseWithProgress)(d,o,!0)},h.prototype.getFile=function(e,t,n,o){var i=new URL("https://www.googleapis.com/drive/v3/files/".concat(e,"?alt=media"));for(var a in t)i.searchParams.append(a,t[a]);return this._requestWithProgress(i.toString(),{method:"GET"},n,o).then(e=>e.blob())},h.prototype.getFileDetails=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n=new URL("https://www.googleapis.com/drive/v3/files/".concat(e,"?fields=*"));for(var o in t)n.searchParams.append(o,t[o]);return this._request(n.toString(),{method:"GET"}).then(e=>e.ok?e.json():e.json().then(e=>Promise.reject(e)))},h.prototype.fileExists=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getFileDetails(e,t).then(()=>!0).catch(e=>{if(e.error){if(e.error.code===g.NOT_FOUND)return!1;const t=new Error(e.error.message);throw t.code=e.error.code,t}throw new Error})},h.prototype.updateFileDetails=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.keys(t).length<1)return Promise.resolve();var o=new URL("https://www.googleapis.com/drive/v3/files/".concat(e));for(var i in n)o.searchParams.append(i,n[i]);return this._request(o.toString(),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},h.prototype.searchFiles=function(e){var t=new URL("https://www.googleapis.com/drive/v3/files");for(var n in e)t.searchParams.append(n,e[n]);return this._request(t.toString(),{method:"GET"}).then(e=>e.json())},h.prototype.searchTeamDrives=function(e){var t=new URL("https://www.googleapis.com/drive/v3/drives");for(var n in e)t.searchParams.append(n,e[n]);return this._request(t.toString(),{method:"GET"}).then(e=>e.json())},h.prototype.getAccountByEmail=function(e){if(!e||e.indexOf("@")<=0)return Promise.reject(i.GLocale.get(new i.GLocaleKey("GShareDialog","text.invalid-email")).replace("%email",e));var t=new URL("https://www.googleapis.com/admin/directory/v1/users/".concat(e,"?viewType=domain_public"));return this._request(t.toString(),{method:"GET"}).then(e=>e.json())},h.prototype.supportsEmailDomainCheck=async function(){const e=await this.getTokenInfo().catch(()=>null);if(!e)return!1;const{scope:t}=e;return Array.isArray(t)?t.some(e=>n(e)):n(t);function n(e){return e.indexOf("admin.directory.user")>=0}},h.prototype.getTokenInfo=async function(){var e=new URL("https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=".concat(await this.getAccessToken()));return this._request(e.toString(),{method:"GET"}).then(e=>e.json())},h.MimeType={Folder:"application/vnd.google-apps.folder"},h.Kind={TeamDrive:"drive#teamDrive",Drive:"drive#drive"},h.UploadType={Simple:"simple",Resumable:"resumeable"},h.DefaultUploadType=h.UploadType.Resumable,h.CloudToGoogleRoleMap=l.default,h.GoogleToCloudRoleMap=s.default,h.SearchEngine={Sorts:{Ascending:"",Descending:"desc"},OrderBy:{CreatedTime:"createdTime",ModifiedTime:"modifiedTime",Name:"name",ViewedByMeTime:"viewedByMeTime"}},h.build=function(e){if(!e){if(!gContainer.getGoogleAPI().isLoaded())throw Error("Google Drive Client not loaded!");e=gContainer.getGoogleAPI().getTokenConfiguration({corporate:!1,accountId:this._accountId})}return new h(new p(e))},e.exports=h},,,function(e,t,n){"use strict";var o=n(35),i=n(263),a=n(49),r=n(112),s=n(98),l=n(1362),c=n(56),d=n(152),u=n(264);i("search",(function(e,t,n){return[function(t){var n=s(this),i=r(t)?void 0:d(t,e);return i?o(i,t,n):new RegExp(t)[e](c(n))},function(e){var o=a(this),i=c(e),r=n(t,o,i);if(r.done)return r.value;var s=o.lastIndex;l(s,0)||(o.lastIndex=0);var d=u(o,i);return l(o.lastIndex,s)||(o.lastIndex=s),null===d?-1:d.index}]}))},,,,,,function(e,t,n){"use strict";n(181),n(3);var o=n(1);function i(){}i.prototype.OPACITY_DEFAULT={min:0,max:100,custom:!0,cssClass:"opacity"};var a=function(e,t){var n=$(e).data("options").min;return(t-n)/($(e).data("options").max-n)*100},r=function(e,t){$(e).trigger(t)},s=function(e,t,n){var o=function(e,t,n){var o=$(e).data("options").min,i=$(e).data("options").max,a=$(e).find(".g-input-slider-track"),r=$(e).find(".g-input-slider-thumb"),s=a.width();t||(t=r.offset().left-a.offset().left);var l=100*t/s;l<0?l=0:l>100&&(l=100),n&&r.css("left",l+"%");var c=l*(i-o)/100+o;return c>i?c=i:c<o&&(c=o),c}(e,t,n);$(e).attr("value",o),l(e,a(e,o)),r(e,"input")},l=function(e,t){$(e).data("options").generic&&($(e).find(".g-input-slider-track .g-input-slider-background").remove(),$(e).find(".g-input-slider-track").append($("<div/>").addClass("g-input-slider-background").css({width:t+"%"})))};var c={init:function(e,t){return this.each((function(){t||(t=this);var n,o=e.min,i=e.max;e.generic=!e.background&&!e.custom,!e.maxDecimal&&e.step&&(e.maxDecimal=(n=e.step,Math.floor(n)===n?0:n.toString().split(".")[1].length||0));var l=50;l<o?l=o:l>i&&(l=i);var c=e.generic?10:8;$(t).addClass("g-input-slider").addClass(e.generic?"generic":"custom").addClass(e.cssClass?e.cssClass:"").attr("value",l).attr("min",o).attr("max",i).data("options",e),e.generic||$(t).css("background",e.background);var d=$("<div></div>").addClass("g-input-slider-track").addClass(e.generic?"generic":"custom"),u=$("<div></div>").addClass("g-input-slider-thumb").addClass(e.generic?"generic":"custom");e.richTooltipConfig&&u.gRichTooltip(e.richTooltipConfig),d.append(u);var p=!1,g=function(e){if("disabled"!==$(t).attr("disabled")){var n=e.clientX,o=$(t).offset().left;s(t,n=n-o-c/2,!0)}};$(d).on("mousedown",(function(e){1==e.which&&(p=!0,$(u).addClass("active"),e.isTrusted&&g(e))})),$(t).on("mousedown",(function(e){1==e.which&&(p=!0,$(u).addClass("active"),e.isTrusted&&g(e))}));let h=!1;$(u).on("mousedown",()=>{h=!0});let f=!1;$(t).on("touchstart",()=>{f=!1}),$(t).on("touchmove",()=>{f=!0}),$(window).on("mousemove",(function(e){p&&(e.isTrusted||h)&&(g(e),e.preventDefault())})).mouseup((function(e){h=!1,p&&(f||(e=>!e.originalEvent.cancelable)(e)||g(e),p=!1,"disabled"!==$(t).attr("disabled")&&function(e){$(e).find(".g-input-slider-thumb").css("left",a(e,$(e).attr("value"))+"%"),r(e,"change")}(t),$(u).removeClass("active"))})),$(t).append(d)}))},value:function(e){var t=$(this);if(t.data("options")){var n=t.data("options").min,i=t.data("options").max,r=t.data("options").maxDecimal?t.data("options").maxDecimal:0;if(void 0===e)return isNaN(t.attr("value"))?parseFloat(t.attr("value")):o.GUtil.formatNumber(t.attr("value"),r);isNaN(e)||(e=o.GUtil.formatNumber(e,r)),e>i?e=i:e<n&&(e=n);var s=a(this,e);t.find(".g-input-slider-thumb").css("left",s+"%"),l(this,s),t.attr("value",e)}return this},minValue:function(){return $(this).data("options").min},maxValue:function(){return $(this).data("options").max},disabled:function(){return arguments.length?$(this).attr("disabled",arguments[0]):$(this).attr("disabled")}};e.exports=i,$.fn.gInputSlider=function(e){return c[e]?c[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):c.init.apply(this,arguments)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GFilesPanelSortTypes=t.GFilesPanelSortDirections=t.GFilesPanelFileTypesFilter=t.GFilesPanelClipboardModes=void 0;const o=n(39),i=(t.GFilesPanelFileTypesFilter=[{id:"gvdesign",name:new o("GFilesPanel","text.filter-type-gvdesign"),type:"application/gravit+design"}],t.GFilesPanelSortTypes={UPDATED:"updated",NAME:"name",CREATED:"created"}),a=t.GFilesPanelSortDirections={ASCEND:!0,DESCEND:!1},r=t.GFilesPanelClipboardModes={DEFAULT:1,COPY:2,CUT:3};t.default={GFilesPanelSortTypes:i,GFilesPanelSortDirections:a,GFilesPanelClipboardModes:r}},function(e,t,n){"use strict";const o=n(1220),i=n(77),{Runtime:a,msTeamsMode:r}=n(9),{storeVendor:s}=n(782),l="darwin",c="win32",d="linux";class u{static getRuntimeCode(){const e=u.getRuntime();return e&&e.code}static getRuntime(){let e;if(r)e=a.TeamsApp;else if(gContainer.getRuntime()===i.Runtime.PWA)e=a.PWA,s===o.GooglePlay&&(e=a.PWAPlayStore);else if(gContainer.getRuntime()===i.Runtime.Browser)e=a.Browser;else if(gContainer.getRuntime()===i.Runtime.Electron){var t=gContainer.getPlatform();e=t===l?a.Mac:t===c?a.Windows:t===d?a.Linux:t,s&&(s===o.Apple?e=a.AppleStore:s===o.Windows&&(e=a.WindowsStore))}else gContainer.getRuntime()===i.Runtime.Chrome?(e=a.ChromeApp,s===o.ChromeWeb&&(e=a.ChromeWebStore)):gContainer.getRuntime()===i.Runtime.IPad&&(e=a.iPadOS);return e}}e.exports=u},function(e,t,n){"use strict";n(17),n(26),n(7),n(18),n(3),n(29),n(28),n(22),n(117),n(106);var o=n(1),i=n(247),a=n(34);const{gApi:r,GLoginDialog:s,DESIGNER:{TITLE:l}={}}=n(9),c=n(77),d=n(1228),u=n(838),p=function(e){return gContainer.signWithOAuth(e)};function g(e){this._closeCallback=e}function h(e){this._callback=e,this._loginConfiguration={}}o.GObject.inherit(g,s.Impl),g.prototype.openOAuth=function(e){let{dialog:t,provider:n}=e;p(n).then(e=>t._postLogin(e)).catch(e=>t._handleError(e))},g.prototype.openPurchaseFlow=async function(e){let{dialog:t,options:n={}}=e;await gDesigner.openPaymentDialog(null,n).catch(()=>null),t.close()},g.prototype.openExternalLink=function(e){let{link:t}=e;gContainer.openExternalLink(null,t)},g.prototype.close=function(){this._closeCallback()},g.prototype.getLanguage=function(){return o.GLocale.getLanguage()},o.GObject.inherit(h,o.GObject),h.prototype._callback=null,h.prototype._newTitle=null,h.prototype._oldTitle=null,h.prototype._loginConfiguration=null,h.prototype._popupInfo=null,h.prototype.open=function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=u.getRuntimeCode();this._loginConfiguration=Object.assign({runtime:n},t);const{anonymous:i=!1,animate:a=!1,version:l="",options:c={}}=t;let h;if(this._oldTitle=document.title,this._newTitle=o.GLocale.get(new o.GLocaleKey("GEmbeddedLogin","text.title")),document.title=this._newTitle,gDesigner.isOffline()){this._frame=$("<div></div>").addClass("cross-frame").toggleClass("g-anonymous",i).appendTo($("body"));const e=new g(()=>this.close());new s({impl:e,gApi:r,origin:location.origin,anonymous:i,version:l,options:c,runtime:n}).open(this._frame)}else{const t=this._buildURL(this._loginConfiguration);this._crossFrame=new d({className:i?"g-anonymous":"",oauth:e=>p(e.provider).then(e=>this._crossFrame.postMessage({cmd:"postLogin",user:e},"*")).catch(t=>this._handleOAuthError(e.provider,t)),close:function(){let{token:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.close(t)}}).open(t),a&&(h=this._crossFrame.getFrame(),h.css({position:"fixed",height:"300%"}),h.on("load",f))}function f(){h&&(h.animate({height:"100%"},"slow"),h.off("load",f))}},h.prototype._handleOAuthError=function(e,t){t&&t.code===r.ERROR_CODES.ERR_POPUP_HAS_BEEN_BLOCKED?this._showPopupInfo(e):this._crossFrame.postMessage({cmd:"error",error:t},"*")},h.prototype._showPopupInfo=function(e){this._popupInfo&&this._popupInfo.remove();const t=e.charAt(0).toUpperCase()+e.slice(1);this._popupInfo=$("<div/>").addClass("g-embedded-login").addClass("popup-info").append($("<div/>").addClass("container").append($("<div/>").addClass("message").html(o.GLocale.get(new o.GLocaleKey("GEmbeddedLogin","text.pop-has-been-blocked")).replace("%provider",t).replace("%app",l))).append($("<img/>").addClass("close-button").attr("src","assets/icon/login/close.svg").on("click",()=>{this._popupInfo.remove()}))),this._popupInfo.find("a").on("click",t=>{t.preventDefault(),this._popupInfo.remove(),p(e).then(e=>{this._crossFrame.postMessage({cmd:"postLogin",user:e},"*")}).catch(e=>{this._crossFrame.postMessage({cmd:"error",error:e},"*")})}),this._popupInfo.appendTo($("body"))},h.prototype._buildURL=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{anonymous:t=!1,signup:n=!1,closeable:s=!0,flow:l,options:d={},runtime:u}=e;let p,g,h,f;if(gContainer.getRuntime()===c.Runtime.Electron){const e=gContainer.getPlatform();"darwin"!==e&&"win32"!==e||(p=window.btoa("designer://")),g=(0,a.stringToBase64String)(gDesigner.getAssetsURL())}else g=(0,a.stringToBase64String)(location.origin);const m=new URL("".concat(r.url,"/pro/login")),y=m.searchParams,v=gDesigner.getSignupOptions();v&&Object.entries(v).forEach(e=>{let[t,n]=e;n&&y.set(t,n)}),g&&y.set("webUrl",g),p&&y.set("appUrl",p),(gDesigner.showCreateAccount()||n||v)&&y.set("newuser",!0),gDesigner.enterpriseLoginForm()&&y.set("enterprise","1"),t&&y.set("anonymous",t),s||y.set("closeable",s),l&&y.set("flow",l),gContainer.shouldBypassEmailVerification()&&y.set("bypassEmailVerification",!0),u&&y.set("runtime",u);var _=new URL(window.location.href);if(_.searchParams)h=_.searchParams.get("token"),f=_.searchParams.get("d");else{for(var b,w={};b=i.GRegex.URLQuery.NextParameter.exec(window.location.href);)w[b[1]]=b[2];h=w.token,f=w.d}return h&&y.set("token",h),f&&y.set("d",f),Object.keys(d).forEach(e=>{y.set(e,d[e])}),y.set("lang",o.GLocale.getLanguage()),m.toString()},h.prototype.close=async function(e){e&&r.setAuthorizationToken&&r.setAuthorizationToken(e);const t=await gDesigner.getUser();t&&(this._isDeactivatedUser(t)?this._handleDeactivatedUser(t):(document.title===this._newTitle&&(document.title=this._oldTitle),this._crossFrame?this._crossFrame.close():this._frame&&this._frame.remove(),this._callback&&this._callback(t)))},h.prototype._isDeactivatedUser=function(e){return(!this._loginConfiguration.anonymous||!gContainer.shouldBypassEmailVerification())&&e.isDeactivated()},h.prototype._handleDeactivatedUser=function(e){if(this._crossFrame){const{flow:e}=this._loginConfiguration;if("purchase_flow_new"===e){const e=this._buildURL(Object.assign(this._loginConfiguration,{flow:void 0}));this._crossFrame.getFrame().attr("src",e)}}gDesigner.openDeactivatedUserDialog(e)},e.exports=h},function(e,t,n){"use strict";n(26),n(3);var o=n(1),i=n(13),a=n(61),r=n(16),s=n(27),l=n(1488),c=n(431),d=n(432);const u=n(78),p=n(37);function g(e){this._options=e||null,g.TOOLTIP_CONFIG={[a.TOOLTIP_AREA.TOOLBAR]:a.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GExportAction","tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GExportAction","tooltip-description")),shortcut:g.SHORTCUT,learnMore:"https://documentation.corelvector.com/import-export/export/"}),[a.TOOLTIP_AREA.MAIN_MENU.TRY_PRO_COMMON]:a.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GExportAction","text.try-this-feature-pro-tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GExportAction","text.try-this-feature-pro-tooltip-description")),learnMore:"https://documentation.corelvector.com/import-export/export/#advanced-export",upgradeToProStatsValue:"file.export",middle:!1,side:!0}),[a.TOOLTIP_AREA.MAIN_MENU.TRY_EXP_PDF_ADVANCED_SETTING]:a.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GExportAction","text.try-export-pdf-advanced-setting-tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GExportAction","text.try-export-pdf-advanced-setting-tooltip-description")),learnMore:"https://documentation.corelvector.com/import-export/export/#advanced-export",upgradeToProStatsValue:"file.export.pdf",middle:!1,side:!0})},this._initProTooltip()}o.GObject.inherit(g,s),g.ID="file.export",g.TITLE=new o.GLocaleKey("GExportAction","title"),g.SHORTCUT=[i.GKey.Constant.SHIFT,i.GKey.Constant.META,"E"],g.TOOLTIP_CONFIG=null,g.prototype._initProTooltip=function(){g.TOOLTIP_CONFIG[a.TOOLTIP_AREA.TOOLBAR]=a.GRichTooltipConfig.from(Object.assign(g.TOOLTIP_CONFIG[a.TOOLTIP_AREA.TOOLBAR].getConfig(),{isPro:gDesigner.isProTooltipNeeded(g.ID)}))},g.prototype.getId=function(){return this._options&&this._options.format?g.ID+"."+this._options.format:g.ID},g.prototype.getTitle=function(){return this._options?new o.GLocaleKey("GExportAction","title.advanced-options"):g.TITLE},g.prototype.getGroupIcon=function(){return this._options?null:"gravit-icon-export"},g.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-export":null},g.prototype.getCategory=function(){return this._options&&"pdf"==this._options.format?r.CATEGORY_FILE_EXPORT_PDF:r.CATEGORY_FILE_EXPORT},g.prototype.getGroup=function(){return this._options?"export/file-type/export":"export/export"},g.prototype.isPro=function(){return!0},g.prototype.getShortcut=function(){return this._options?null:g.SHORTCUT},g.prototype.isEnabled=function(){if(!gDesigner.getApplicationManager().isExportEnabled())return!1;return!!gDesigner.getActiveDocument()},g.prototype.execute=function(){const e=arguments[0],t=gDesigner.getActiveDocument(),n=this;function i(t){new l(t,n._options||e,n.getId()).open()}t&&t.isCommercialProductFile()?t.openPaywall(this.getId()):t.hasPagesWithInfiniteEmptyCanvas()?p.alert(o.GLocale.get(new o.GLocaleKey("GCommonNames","text.error-emtpy-infinite-canvas"))):new c(()=>{$(".g-export-dialog").length||(t.isNew()?p.confirm(o.GLocale.get(new o.GLocaleKey("GExportAction","text.save-before-export")),e=>{e?gDesigner.executeAction(d.ID,[t,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{documentStatus:t=null}=e;t&&t===u.Saved&&i(gDesigner.getActiveDocument())},!0],"unsavedhandler"):i(t)},o.GLocale.get(new o.GLocaleKey("GLocale","no")),o.GLocale.get(new o.GLocaleKey("GLocale","yes"))):i(t))},()=>{gDesigner.stats("action-cancelled_anonymous",this.getId())})},g.prototype.getTooltipArea=function(){return this._options&&"pdf"===this._options.format?a.TOOLTIP_AREA.MAIN_MENU.TRY_EXP_PDF_ADVANCED_SETTING:a.TOOLTIP_AREA.MAIN_MENU.TRY_PRO_COMMON},g.prototype.getTooltipConfig=function(e){return this._options?"pdf"===this._options.format&&e&&g.TOOLTIP_CONFIG[e]||null:e&&g.TOOLTIP_CONFIG[e]||null},g.prototype.toString=function(){return"[Object GExportAction]"},e.exports=g},function(e,t,n){"use strict";var o=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t.lookupByMimeType=t.lookupByExtension=t.default=t.TYPES=t.FILE_MIME_TYPES=t.FILE_EXTENSIONS=t.DEFAULT_TYPE=void 0,n(52),n(17),n(158),n(89),n(26),n(51),n(7),n(62),n(28),n(22);var i=n(1),a=n(9),r=o(n(111)),s=o(n(206)),l=o(n(151)),c=o(n(78)),d=o(n(781)),u=n(575);const p=n(143),{FILE_FORMATS:g,FOLDER_FORMAT:h,MAX_FOLDER_DEPTH_FOR_CLOUD:f}=n(9);let m;function y(){d.default.apply(this,arguments),this.CURRENT_FOLDER=this.getRootFolder(),this.FOLDERS={},this.QUERY_LIMIT=10,this.EXAMPLE_FILES_CACHE=[],this.getPreviousSelectedFolder().then(e=>{e&&this.setCurrentFolder(e)}),this.setDefaultEmptyMessage({title:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.message-explore-cloud-templates"))})}i.GObject.inherit(y,d.default),y.prototype.CURRENT_FOLDER_PROP="designer.filespanel.cloud-drive.current-folder",y.getInstance=function(){return m||(m=new y),m},y.prototype.getPreviousSelectedFolder=function(){return d.default.prototype.getPreviousSelectedFolder.apply(this,arguments).then(e=>e?this._convertToFolderElement(e):e)},y.prototype.setQueryLimit=function(e){return this.QUERY_LIMIT=parseInt(e,10),this},y.prototype.setCurrentFolder=function(e){return this.CURRENT_FOLDER=e,gContainer.setProperty(this.CURRENT_FOLDER_PROP,JSON.stringify(e)),this},y.prototype.isRootFolder=function(e){return!(e=void 0!==e?e:this.getCurrentFolder())||e&&"object"==typeof e&&!e.id},y.prototype.getRootFolder=function(){return p.from({id:null,name:i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.my-cloud"))})},y.prototype.getFolder=function(e){return a.gApi.getFile(e.id||e).then(e=>this._convertToFolderElement(e))},y.prototype.getCurrentFolder=function(){return this.CURRENT_FOLDER},y.prototype.buildFoldersHierarchy=function(e){var t={},n=new Set,o={};if(!e.length)return t;for(let t=0;t<e.length;t++){let n=r.default.definePath(e[t]);o[n]=e[t]}function i(e){let t=new Set;for(;e&&e.parent;){if(e.id===e.parent)return console.warn("Invalid folder"),e.parent=null,[];if(t.has(e.parent))return console.warn("Invalid folder"),e.parent=null,[];t.add(e.parent),e=o[e.parent]}return[...t]}return e.forEach(e=>{if(n.has(e.id))return;let o={path:i(e),folder:e};if(o.path.length>f)for(let e=0;e<o.path.length-f;e++)n.add(o.path[e]);else t[e.id]=o}),t},y.prototype.isLoadFoldersOnDemandSupported=function(){return!0},y.prototype.fetchFolders=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Object.keys(this.FOLDERS).length||await this._buildFolderStructure(e),this.isRootFolder(t)&&this.generatePreviousSelectedFolderPath(),t=t||this.CURRENT_FOLDER,a.gApi.listFiles({type:h,parent:this._extractId(t),sort:e+"",limit:n>0?n:100,skip:o}).then(e=>this._convertToFolderElement(e))},y.prototype._convertToFolderElement=function(e){const t=e=>{var t=p.from(e);return t.setItemType(p.Type.Folder),t.setPermissions([p.Permission.Open,p.Permission.Copy,p.Permission.Editing,p.Permission.Rename,p.Permission.CutPaste,p.Permission.Delete]),t};return e instanceof Array?e.map(t):t(e)},y.prototype._buildFolderStructure=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc";if(Object.keys(this.FOLDERS).length)return;const t=await a.gApi.listFiles({type:h,parent:"*",sort:e+"",limit:Number.MAX_SAFE_INTEGER});this.FOLDERS=this.buildFoldersHierarchy(t),!this.CURRENT_FOLDER||this.FOLDERS[this.CURRENT_FOLDER.id]||this.isRootFolder(this.CURRENT_FOLDER)||this._isCustomFolder(this.CURRENT_FOLDER)||this.setCurrentFolder(null)},y.prototype._isCustomFolder=function(e){return!1},y.prototype.getFolders=function(){return this.FOLDERS},y.prototype.createFolder=function(e){return r.default.createFolder(e,this.CURRENT_FOLDER)},y.prototype.navigateToParentFolder=function(){var e=this.CURRENT_FOLDER&&this.CURRENT_FOLDER.parent?this.FOLDERS[this.CURRENT_FOLDER.parent].folder:null;return this.setCurrentFolder(e),this},y.prototype.getFile=function(e){return a.gApi.getFile(e,!0).then(e=>r.default.convertToCloudItem(e))},y.prototype.getRawFile=async function(e,t,n){const o=await a.gApi.getFileExtended(e.id),i=await fetch(o.getFileDataURL(),{signal:t});return(0,u.readResponseWithProgress)(i,n.progress,!0).then(e=>e.blob())},y.prototype.openFile=function(e,t){return new Promise(async(n,o)=>{try{const o=await s.default.from(gDesigner.getDefaultStorage(),e,void 0,void 0,e.autosave);gDesigner.openDocument(o,t),n()}catch(e){o(e)}})},y.prototype.saveNewFile=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;n=n||_.ext.toUpperCase();var u=e.getScene();if(e.hasPagesWithInfiniteEmptyCanvas())return Promise.reject({message:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.error-emtpy-infinite-canvas")),dontExtend:!0});let p=gDesigner.getWindows().getActiveWindow().getView();const g=p.getZoom(),h=p.getScrollX(),f=p.getScrollY(),m=u.getActivePage(),y=m.getReferenceId(),v=u.getActivePage().getGeometryBBox();return a.gApi.createFile({name:t,parent:this._extractId(this.CURRENT_FOLDER),type:(b(n)||_).type,app:"designer",unit:u.getProperty("ut"),width:v.getWidth(),height:v.getHeight(),trashed:null}).then(async a=>{a.type===_.type&&u.setCloudSynchronization(a.id);const m=a.type!==_.type;await e.saveAnnotations(m),o=e.updateSaveOptionsLastModifiedDate(o);var v=await s.default.from(gDesigner.getDefaultStorage(),a.id);e.setStorageItem(v);var b=new l.default(v);return b.deserializeData(i.GNode.serialize(u,o)).then(async()=>(e.getFileFormatVersion()&&b.setFileFormatVersion(e.getFileFormatVersion()),await b.saveAnnotations(m,!0),(u=b.getScene()).iteratePages(e=>{if(e.getReferenceId()===y)return u.setActivePage(e),!1}),gDesigner.addDocument(b),d?d(c.default.Loaded):gDesigner.removeDocument(e,null,!0),p=gDesigner.getWindows().getActiveWindow().getView(),p.transform(h,f,g),o=b.updateSaveOptionsLastModifiedDate(o),i.GUtil.prepareForSaving(u,n),r.default.performSave(b,()=>{b.getFileFormatVersion()&&b.getStorageItem().storeFileFormatVersion(b.getFileFormatVersion()),d&&d(c.default.Saved)},()=>{d&&d(c.default.SaveFailed)},o),e.isCloudFile()||e.setTitle(t),a)).catch(e=>(console.error(e),new Promise((e,t)=>{t(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.error-saving-file")))})))}).catch(e=>(console.error(e),new Promise((e,t)=>{t(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.error-saving-file")))})))},y.prototype.fetchRecentFiles=function(){const e=this._getFileTypesForFilter().map(e=>({type:e}));return r.default.getRecentStorageItems(e).then(e=>this._convertAndUpdateCloudItems(e))},y.prototype.fetchFiles=function(e,t,n){var o={type:this._getFileTypesForFilter().join("|"),parent:this._extractId(this.CURRENT_FOLDER),limit:this.QUERY_LIMIT+"",skip:t+"",sort:n+""};return e&&(o.name=e,o.parent="*"),a.gApi.listFiles(o).then(e=>this._convertAndUpdateCloudItems(e))},y.prototype._convertAndUpdateCloudItems=function(e){return r.default.convertToCloudItem(e)},y.prototype._getFileTypesForFilter=function(){const e=this.getSelectedFilterForFileTypes();return 0!==e.length?e:this.getSupportedMIMETypes()},y.prototype.renameItem=function(e,t){return a.gApi.updateFile(e.id,{name:t})},y.prototype.isItemAllowedToBeRendered=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!(!t&&!n)||r.default.definePath(this.CURRENT_FOLDER)===e.parent},y.prototype.deleteItem=function(e){return a.gApi.updateFile(e.id,{trashed:!0}).then(()=>a.gApi.deleteFile(e.id))},y.prototype.cutPaste=function(e){var t=r.default.definePath(this.CURRENT_FOLDER);return r.default.changePathTree(e,t)},y.prototype.fileMove=function(e,t){return r.default.changePathTree([e],t.id)},y.prototype.copyPaste=function(e){const t=r.default.definePath(this.CURRENT_FOLDER);return Promise.all(e.map(async e=>{const{id:n}=await a.gApi.copyFile(e.id,{parent:t});return{id:n,parent:t}}))},y.prototype.supportsSaveCollisionFlow=function(){return!0},y.prototype._extractId=function(e){return e?"string"==typeof e?e||null:e.id||null:null},y.prototype.fileExists=async function(e,t,n){n=n||this.CURRENT_FOLDER;var o={type:this.getSupportedFileFormats().find(e=>e.ext.toLocaleLowerCase()===t.toLocaleLowerCase()).type,parent:this._extractId(n),name:'"'.concat(e,'"')};return a.gApi.listFiles(o).then(e=>!!e.length)},y.prototype.folderExists=function(e,t){return t=t||this.CURRENT_FOLDER,a.gApi.listFiles({type:h,parent:this._extractId(t),name:'"'.concat(e,'"')}).then(e=>!!e.length)},y.prototype.generatePreviousSelectedFolderPath=function(){if(!this.PREVIOUS_SELECTED_FOLDER_PATH.length&&this.CURRENT_FOLDER){const e=this.FOLDERS&&this.FOLDERS[this.CURRENT_FOLDER.getId()];if(!e)return;this.PREVIOUS_SELECTED_FOLDER_PATH=this.PREVIOUS_SELECTED_FOLDER_PATH.concat(e.path),this.PREVIOUS_SELECTED_FOLDER_PATH.find(t=>t===e.folder.id)||this.PREVIOUS_SELECTED_FOLDER_PATH.push(e.folder.id)}},y.prototype.loadExampleFiles=async function(){0===this.EXAMPLE_FILES_CACHE.length&&(this.EXAMPLE_FILES_CACHE=await a.gApi.getExampleFiles().catch(()=>[]));const e=this.getSelectedFilterForFileTypes();let t=this.EXAMPLE_FILES_CACHE;return 0!==e.length&&(t=t.filter(e=>this._getFileTypesForFilter().includes(e.type))),t.map(e=>{let t=p.from(e);return t.setPermissions([p.Permission.Open]),t})};t.default=y;const v=t.TYPES=Object.assign({FOLDER:h},g.reduce((e,t)=>(e[t.ext.toUpperCase()+"_FILE"]=t,e),{})),_=t.DEFAULT_TYPE=Object.values(v).find(e=>e.default);t.FILE_EXTENSIONS=g.map(e=>{let{ext:t}=e;return t.toUpperCase()}),t.FILE_MIME_TYPES=g.map(e=>{let{type:t}=e;return t});t.lookupByMimeType=e=>Object.values(v).find(t=>{let{type:n}=t;return!!n&&n.toLowerCase()===e.toLowerCase()});const b=e=>Object.values(v).find(t=>{let{ext:n}=t;return!!n&&n.toLowerCase()===e.toLowerCase()});t.lookupByExtension=b},function(e,t,n){"use strict";e.exports={Info:{id:"info"},Header:{id:"header"},Toolbar:{id:"toolbar"},Panels:{id:"panels"},Footer:{id:"footer"},LeftSidebars:{id:"left-sidebars"},RightSidebars:{id:"right-sidebars"},Windows:{id:"windows"},AssistantBar:{id:"assistant-bar"},Banner:{id:"banner"},Overlay:{id:"overlay"}}},function(e,t,n){"use strict";n(17),n(158),n(3),n(22);var o=n(45),i=n(1),a=n(71),r=n(588),s=n(785),l=n(379),c=n(1137),d=n(1237),u=n(1139),p=n(1238),g=n(1240),h=n(1241),f=n(1242),m=n(1245),y=n(1246),v=n(1247),_=n(1248),b=n(1249),w=n(1250),C=n(1503),x=n(1136);const S=n(125),E=n(185),A=n(786);function T(){s.call(this),this._propertyPanels=[],this._touchTools=[]}i.GObject.inherit(T,s),T.ACCORDIONS=[c.prototype.toString(),d.prototype.toString(),u.prototype.toString(),p.prototype.toString()],T.APPEARANCE_PROPERTIES=[w.prototype.toString(),y.prototype.toString(),m.prototype.toString(),h.prototype.toString(),b.prototype.toString(),f.prototype.toString(),v.prototype.toString(),_.prototype.toString(),g.prototype.toString(),c.prototype.toString()],T.ID=E.SidebarsIds.GInspectorSidebar,T.TITLE=new i.GLocaleKey("GInspectorSidebar","title"),T.prototype._touchTools=null,T.prototype._htmlElement=null,T.prototype._propertyPanels=null,T.prototype._document=null,T.prototype._elements=null,T.prototype._transformMode=!1,T.prototype._appearancePanel=null,T.prototype._versionHistoryPanel=null,T.prototype._versionHistoryProperties=null,T.prototype._versionHistoryMode=!1,T.prototype.getId=function(){return T.ID},T.prototype.getTitle=function(){return T.TITLE},T.prototype.isEnabled=function(){return!!this._document},T.prototype.isVisible=function(){return!(!gDesigner.getApplicationManager().isInspectEnabled()&&gDesigner.getActiveDocument())},T.prototype.getOrientation=function(){return l.Orientation.Right},T.prototype.getMinimumWidth=function(){return 300},T.prototype.isResizeable=function(){return!1},T.prototype.getDefaultWidth=function(){return 300},T.prototype.init=function(e){s.prototype.init.call(this,e),this._htmlElement=e;var t=$("<div></div>").addClass("panels scrolling-panels").appendTo(this._htmlElement),n=$("<div></div>").addClass("panels sticky-panels").appendTo(this._htmlElement),o=$("<div></div>").addClass("toolbar appearance-toolbar");this._appearancePanel=$("<div></div>").css("display","none").addClass("properties-panel").addClass("appearance-properties-panel"),$("<label></label>").addClass("appearance-toolbar-title").text(i.GLocale.get(new i.GLocaleKey("GAppearanceProperties","title"))).appendTo(o);for(var a=function(e){var i=e.isSticky()?n:t,a=$("<div></div>").css("display","none").addClass("properties-panel"),r=$("<hr/>"),s=$("<div></div>").addClass("toolbar");if($.inArray(e.toString(),T.APPEARANCE_PROPERTIES)>-1){var l=$("<div></div>").addClass("appearance-property-panel");e.init(l,o),r.appendTo(l),this._appearancePanel.append(l),o.appendTo(i),this._appearancePanel.appendTo(i),s=o,a=l}else r.appendTo(i),e.init(a,s),""!==s.html()?s.appendTo(i):s=null,a.appendTo(i);this._propertyPanels.push({panel:a,toolbar:s,divider:r,properties:e})}.bind(this),r=0;r<gravit.properties.length;++r)a(gravit.properties[r]);this._activeTool(gDesigner.getToolManager().getActiveTool()),this._updatePropertyPanels(),this._initVersionHistoryPanel(),gDesigner.getRightSidebars().addEventListener(A,this._sidebarEvent,this),gDesigner.addEventListener(S,this._settingChanged,this)},T.prototype._getPropertyPanel=function(e){return this._propertyPanels.find(t=>t.properties instanceof e)||null},T.prototype.openFillPatternChooser=function(){const e=this._getPropertyPanel(d);e&&e.properties.openPatternChooser()},T.prototype.openBorderPatternChooser=function(){const e=this._getPropertyPanel(u);e&&e.properties.openPatternChooser()},T.prototype.openFillEyeDropper=function(e,t){const n=this._getPropertyPanel(d);n&&n.properties.openEyeDropper(e,t)},T.prototype.openBorderEyeDropper=function(e,t){const n=this._getPropertyPanel(u);n&&n.properties.openEyeDropper(e,t)},T.prototype.openTextColorEyeDropper=function(e,t){const n=this._getPropertyPanel(b);n&&n.properties.openEyeDropper(e,t)},T.prototype.setPathPointsNodeType=function(e){const t=this._getPropertyPanel(m);t&&t.properties.assignNodeType(e)},T.prototype._sidebarEvent=function(e){gDesigner.isTouchEnabled()&&e.type===A.Type.Activated&&e.sidebar&&e.sidebar.getId()===E.SidebarsIds.GAnnotationsSidebar&&this._updatePropertyPanels()},T.prototype.activate=function(){gDesigner.addEventListener(a,this._documentEvent,this),gDesigner.getToolManager().addEventListener(o.GToolManager.ToolChangedEvent,this._toolChangedEvent,this);var e=gDesigner.getActiveDocument();e&&this._activateDocument(e)},T.prototype.deactivate=function(){gDesigner.removeEventListener(a,this._documentEvent,this),gDesigner.getToolManager().removeEventListener(o.GToolManager.ToolChangedEvent,this._toolChangedEvent,this),this._document&&this._deactivateDocument()},T.prototype._initVersionHistoryPanel=function(){this._versionHistoryPanel=$("<div />").css("display","none").addClass("panels history-panel").appendTo(this._htmlElement);var e=$("<div></div>").addClass("properties-panel version-history-panel"),t=$("<div></div>").addClass("toolbar");this._versionHistoryProperties=new C,this._versionHistoryProperties.init(e,t),this._versionHistoryPanel.append(t).append(e),gDesigner.addEventListener(x,this._updateVersionsPanel,this)},T.prototype._updateVersionsPanel=function(e){if(e.type===x.Type.Enable){var t;switch(this._versionHistoryMode=!0,this.getOrientation()){case l.Orientation.Left:t=gDesigner.getLeftSidebars();break;case l.Orientation.Right:t=gDesigner.getRightSidebars()}t.setActiveSidebar(this.getId()),gDesigner.setPartVisible(t.getSidebarsPart(),!0),this._htmlElement.find(".panels").css("display","none"),this._versionHistoryPanel.appendTo(this._htmlElement),this._versionHistoryPanel.css("display","")}else e.type===x.Type.Disable&&(this._versionHistoryMode=!1,this._htmlElement.find(".panels").css("display",""),this._versionHistoryPanel.css("display","none"),this._updatePropertyPanels(!1));gDesigner.isTouchEnabled()&&this._updateVersionsPanelTouch()},T.prototype._documentEvent=function(e){e.type===a.Type.Activated?this._activateDocument(e.document):e.type===a.Type.Deactivated?this._deactivateDocument():e.type===a.Type.StorageItemUpdated&&this._updatePropertyPanels(!1,e.data?e.data:null)},T.prototype._activateDocument=function(e){this._document&&this._deactivateDocument(),this._document=e;var t=this._document.getScene(),n=this._document.getEditor();gDesigner.getToolManager().addEventListener(o.GToolManager.ToolChangedEvent,this._updateFromToolOrSelection,this),n.addEventListener(o.GEditor.SelectionChangedEvent,this._updateFromToolOrSelection,this),t.addEventListener(i.GNode.AfterFlagChangeEvent,this._afterFlagChangeEvent,this),this._updateFromToolOrSelection(),this.trigger(r.UPDATE_EVENT)},T.prototype._deactivateDocument=function(){var e=this._document.getScene(),t=this._document.getEditor();gDesigner.getToolManager().removeEventListener(o.GToolManager.ToolChangedEvent,this._updateFromToolOrSelection,this),t.removeEventListener(o.GEditor.SelectionChangedEvent,this._updateFromToolOrSelection,this),e.removeEventListener(i.GNode.AfterFlagChangeEvent,this._afterFlagChangeEvent,this),this._document=null,this._elements=null,this._updatePropertyPanels(!0),this.trigger(r.UPDATE_EVENT)},T.prototype._toolChangedEvent=function(e){var t=e.previousTool,n=e.newTool;t&&t instanceof o.GSelectTool&&(e.light||this._updateTransformMode(!1),t.removeEventListener(o.GSelectTool.Event,this._selectToolEvent,this)),this._activeTool(n)},T.prototype._activeTool=function(e){e&&e instanceof o.GSelectTool&&e.addEventListener(o.GSelectTool.Event,this._selectToolEvent,this)},T.prototype._selectToolEvent=function(e){e.type===o.GSelectTool.Event.Type.EditModeChanged&&this._updateTransformMode(e.args.mode===o.GSelectTool.EditMode.Transform)},T.prototype._updateTransformMode=function(e){e!==this._transformMode&&(this._transformMode=e,this._updatePropertyPanels(!1))},T.prototype._afterFlagChangeEvent=function(e){e.node instanceof i.GPage&&e.flag===i.GNode.Flag.Active&&!this._document.getEditor().hasSelection()&&this._updateFromToolOrSelection()},T.prototype._updateFromToolOrSelection=function(e){var t=this._document.getEditor();if(this._document&&t&&(this._elements=t.getSelection(),this._elements&&this._elements.length&&(this._elements=t.filterIndividualElements(this._elements.filter(e=>!e.hasMixin(i.GAnnotation)))),!this._elements||0===this._elements.length)){var n=gDesigner.getToolManager().getActiveTool(),a=null;n instanceof o.GItemTool&&(a=n.getDefaultStyle())?this._elements=[a]:this._elements=[this._document.getScene().getActivePage()]}this._updatePropertyPanels(!1)},T.prototype._updatePropertyPanels=function(e,t){var n=!1,o=null,i=null;this._touchTools=[];for(var a=0;a<this._propertyPanels.length;++a){var r=this._propertyPanels[a],s=r.properties,l=s.isAvailable(this._transformMode);if(l&&(l=r.properties.update(e?null:this._document,this._elements?this._elements:null,t||null)),l){const e=r.properties.getTouchTools();e&&(this._touchTools=this._touchTools.concat(e))}r.panel.css("display",l?"":"none"),r.toolbar&&(r.toolbar.css("display",l?"":"none"),s instanceof _&&l&&(i=r.toolbar),$.inArray(r.properties.toString(),T.ACCORDIONS)>-1&&l&&(r.toolbar.addClass("appearance-panel-toggle-btn").gAccordion("init",".properties-panel","label"),this._htmlElement.find(".appearance-panel-toggle-btn button.g-accordion")[gDesigner.isTouchEnabled()?"hide":"show"]()));var c=l&&n&&s.isGroup(o);r.divider.css("display",c?"":"none"),n=n||l,l&&(o=s,this._appearancePanel.css("display",""));const d=this._isPropertiesEnabled(r.properties);r.toolbar&&r.toolbar.toggleClass("g-disabled",!d),r.panel&&r.panel.toggleClass("g-disabled",!d)}i&&gDesigner.isTouchEnabled()&&i.css("display","");var d=$("<hr/>").addClass("appearance-divider");0===$(".appearance-divider").length&&$(".appearance-toolbar:first").before(d),$(".appearance-divider").css("display","none"===$(".appearance-toolbar:first").css("display")?"none":""),$(".appearance-properties-panel >div >hr:visible:last").css("display","none"),$(".sidebar-inspector").find(".toolbar").removeClass("last-toolbar"),$(".sidebar-inspector").find(".toolbar").filter(":visible").filter(":last").addClass("last-toolbar"),gDesigner.isTouchEnabled()&&this._fireUpdateEvent(),this._updateUI()},T.prototype._updateUI=function(){let e=this._htmlElement.find(".group-frame-property-panel"),t=this._htmlElement.find(".frame-property-panel"),n=this._htmlElement.find(".item-property-panel"),o=this._htmlElement.find(".symbol-instance-toolbar"),i=this._htmlElement.find(".symbol-instance-panel"),a=null;a=gDesigner.isTouchEnabled()?this._htmlElement.find(".appearance-properties-panel .appearance-property-panel:last-child"):this._htmlElement.find(".scene-properties-panel").next(),a&&(i.insertAfter(a),o.insertAfter(a),n.next().insertAfter(a),n.insertAfter(a),t.next().insertAfter(a),t.insertAfter(a),e.next().insertAfter(a),e.insertAfter(a))},T.prototype._settingChanged=function(e){"touch"===e.key&&(this._htmlElement.find(".appearance-panel-toggle-btn button.g-accordion")[gDesigner.isTouchEnabled()?"hide":"show"](),this._updateUI(),this._updatePropertyPanels())},T.prototype._isPropertiesEnabled=function(e){return!0},T.prototype.getTouchTools=function(){let{disableContextSensitive:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?this._getAllTouchTools():this._touchTools},T.prototype._getAllTouchTools=function(){return[...new Set(this._propertyPanels.reduce((e,t)=>{const n=t.properties.getTouchTools();return n&&(e=e.concat(n)),e},[]))]},T.prototype.toString=function(){return"[Object GInspectorSidebar]"},n(1504)(T),e.exports=T},function(e,t,n){"use strict";var o=n(30),i=n(25),a=n(120),r=n(1499),s=n(1500),l=n(20),c=RangeError,d=String,u=Math.floor,p=i(s),g=i("".slice),h=i(1..toFixed),f=function(e,t,n){return 0===t?n:t%2==1?f(e,t-1,n*e):f(e*e,t/2,n)},m=function(e,t,n){for(var o=-1,i=n;++o<6;)i+=t*e[o],e[o]=i%1e7,i=u(i/1e7)},y=function(e,t){for(var n=6,o=0;--n>=0;)o+=e[n],e[n]=u(o/t),o=o%t*1e7},v=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var o=d(e[t]);n=""===n?o:n+p("0",7-o.length)+o}return n};o({target:"Number",proto:!0,forced:l((function(){return"0.000"!==h(8e-5,3)||"1"!==h(.9,0)||"1.25"!==h(1.255,2)||"1000000000000000128"!==h(0xde0b6b3a7640080,0)}))||!l((function(){h({})}))},{toFixed:function(e){var t,n,o,i,s=r(this),l=a(e),u=[0,0,0,0,0,0],h="",_="0";if(l<0||l>20)throw new c("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return d(s);if(s<0&&(h="-",s=-s),s>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(s*f(2,69,1))-69)<0?s*f(2,-t,1):s/f(2,t,1),n*=4503599627370496,(t=52-t)>0){for(m(u,0,n),o=l;o>=7;)m(u,1e7,0),o-=7;for(m(u,f(10,o,1),0),o=t-1;o>=23;)y(u,1<<23),o-=23;y(u,1<<o),m(u,1,1),y(u,2),_=v(u)}else m(u,0,n),m(u,1<<-t,0),_=v(u)+p("0",l);return _=l>0?h+((i=_.length)<=l?"0."+p("0",l-i)+_:g(_,0,i-l)+"."+g(_,i-l)):h+_}})},function(e,t,n){"use strict";n(3);var o=n(45),i=n(1),a=n(13),r=n(61),s=n(16),l=n(27);function c(e){this._type=e,this._title=new i.GLocaleKey("GAlignAction","title."+e),c.TOOLTIP_CONFIG={[r.TOOLTIP_AREA.SIDEBAR]:{[o.GEditor.ArrangeAlignType.AlignLeft]:r.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GAlignAction","text.align-left-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GAlignAction","text.align-left-tooltip-description")),learnMore:"https://documentation.corelvector.com/arrange-objects/align/#align-left"}),[o.GEditor.ArrangeAlignType.AlignCenter]:r.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GAlignAction","text.align-center-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GAlignAction","text.align-center-tooltip-description")),learnMore:"https://documentation.corelvector.com/arrange-objects/align/#align-center"}),[o.GEditor.ArrangeAlignType.AlignRight]:r.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GAlignAction","text.align-right-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GAlignAction","text.align-right-tooltip-description")),learnMore:"https://documentation.corelvector.com/arrange-objects/align/#align-right"}),[o.GEditor.ArrangeAlignType.AlignTop]:r.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GAlignAction","text.align-top-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GAlignAction","text.align-top-tooltip-description")),learnMore:"https://documentation.corelvector.com/arrange-objects/align/#align-top"}),[o.GEditor.ArrangeAlignType.AlignMiddle]:r.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GAlignAction","text.align-middle-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GAlignAction","text.align-middle-tooltip-description")),learnMore:"https://documentation.corelvector.com/arrange-objects/align/#align-middle"}),[o.GEditor.ArrangeAlignType.AlignBottom]:r.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GAlignAction","text.align-bottom-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GAlignAction","text.align-bottom-tooltip-description")),learnMore:"https://documentation.corelvector.com/arrange-objects/align/#align-bottom"})}}}i.GObject.inherit(c,l),c.ID="arrange.align",c.TOOLTIP_CONFIG=null,c.prototype._type=null,c.prototype._title=null,c.prototype.getId=function(){return c.ID+"."+this._type},c.prototype.getTitle=function(){return this._title},c.prototype.getCategory=function(){return s.CATEGORY_MODIFY_ALIGN},c.prototype.getGroup=function(){var e="";switch(this._type){case o.GEditor.ArrangeAlignType.AlignLeft:case o.GEditor.ArrangeAlignType.AlignCenter:case o.GEditor.ArrangeAlignType.AlignRight:e="horizontal";break;case o.GEditor.ArrangeAlignType.AlignTop:case o.GEditor.ArrangeAlignType.AlignMiddle:case o.GEditor.ArrangeAlignType.AlignBottom:e="vertical";break;case o.GEditor.ArrangeAlignType.AlignJustifyHorizontal:case o.GEditor.ArrangeAlignType.AlignJustifyVertical:e="justify"}return"arrange/align-"+e},c.prototype.getShortcut=function(){const e=[a.GKey.Constant.OPTION];switch(this._type){case o.GEditor.ArrangeAlignType.AlignLeft:return e.concat("A");case o.GEditor.ArrangeAlignType.AlignCenter:return e.concat("H");case o.GEditor.ArrangeAlignType.AlignRight:return e.concat("D");case o.GEditor.ArrangeAlignType.AlignTop:return e.concat("W");case o.GEditor.ArrangeAlignType.AlignMiddle:return e.concat("V");case o.GEditor.ArrangeAlignType.AlignBottom:return e.concat("S");default:return null}},c.prototype.isEnabled=function(e,t,n){var o=gDesigner.getActiveDocument()?gDesigner.getActiveDocument().getEditor():null;return!(!(e=e||(o?o.getIndividualSelection():null))||!e.length)},c.prototype.execute=function(e,t,n){var i=gDesigner.getActiveDocument()?gDesigner.getActiveDocument().getEditor():null;if(e=e||(i?i.getIndividualSelection():null),i&&e&&1===e.length&&!n){var a=o.GElementEditor.getEditor(e[0]);if(!a||!a.isAlignPartsAllowed())if(i.getScene().isFixedSized())n=i.getScene().getActivePage().getGeometryBBox();else n=i.getScene().getPaintBBox()}gDesigner.getActiveDocument().getEditor().arrangeAlign(this._type,e,t,n)},c.prototype._isAlignOnlyCategory=function(){switch(this._type){case o.GEditor.ArrangeAlignType.AlignLeft:case o.GEditor.ArrangeAlignType.AlignCenter:case o.GEditor.ArrangeAlignType.AlignRight:case o.GEditor.ArrangeAlignType.AlignTop:case o.GEditor.ArrangeAlignType.AlignMiddle:case o.GEditor.ArrangeAlignType.AlignBottom:return!0;default:return!1}},c.prototype.getTooltipConfig=function(e){return e&&c.TOOLTIP_CONFIG[e]&&c.TOOLTIP_CONFIG[e][this._type]||null},c.prototype.toString=function(){return"[Object GAlignAction]"},e.exports=c},function(e,t,n){"use strict";n(314),n(3);var o=n(45),i=n(1),a=n(61),r=n(16),s=n(27);function l(e){this._type=e,this._title=new i.GLocaleKey("GDistributeAction","title."+e),l.TOOLTIP_CONFIG={[a.TOOLTIP_AREA.SIDEBAR]:{[l.Type.Horizontal]:a.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GDistributeAction","text.horizontal-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GDistributeAction","text.horizontal-tooltip-description")),learnMore:"https://documentation.corelvector.com/arrange-objects/distribute/"}),[l.Type.Vertical]:a.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GDistributeAction","text.vertical-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GDistributeAction","text.vertical-tooltip-description")),learnMore:"https://documentation.corelvector.com/arrange-objects/distribute/"})}}}i.GObject.inherit(l,s),l.Type={Horizontal:"horizontal",Vertical:"vertical"},l.TOOLTIP_CONFIG=null,l.ID="arrange.distribute",l.prototype._type=null,l.prototype._title=null,l.prototype.getId=function(){return l.ID+"."+this._type},l.prototype.getTitle=function(){return this._title},l.prototype.getIcon=function(){switch(this._type){case l.Type.Horizontal:return'<svg class="align-svg" xmlns="http://www.w3.org/2000/svg" style="isolation:isolate" viewBox="3 2 20 20" width="20" height="20"><rect id="align-area" x="4" y="6" width="4" height="12" fill="#FFF"/><rect id="align-area" x="18" y="8" width="4" height="8" fill="#FFF"/><rect id="align-shape" x="10" y="3" width="2" height="18" fill="#3A98FF"/><rect id="align-shape" x="14" y="3" width="2" height="18" fill="#3A98FF"/></svg>';case l.Type.Vertical:return'<svg class="align-svg" xmlns="http://www.w3.org/2000/svg" style="isolation:isolate" viewBox="28 2 20 20" width="20" height="20"><rect id="align-area" x="36" y="13" width="4" height="12" transform="rotate(-90 38 19)" fill="#FFF"/><rect id="align-area" x="36" y="1" width="4" height="8" transform="rotate(-90 38 5)" fill="#FFF"/><rect id="align-shape" x="37" y="5" width="2" height="18" transform="rotate(-90 38 14)" fill="#3A98FF"/><rect id="align-shape" x="37" y="1" width="2" height="18" transform="rotate(-90 38 10)" fill="#3A98FF"/></svg>';default:return null}},l.prototype.getCategory=function(){return r.CATEGORY_MODIFY_ALIGN},l.prototype.getGroup=function(){return"arrange/align-distribute"},l.prototype.getShortcut=function(){return null},l.prototype.isEnabled=function(e,t,n){return!!(e=e||(gDesigner.getActiveDocument()?gDesigner.getActiveDocument().getEditor().getIndividualSelection():null))&&(t?e.length>1:n>0?e.length>=2:e.length>2)},l.prototype.execute=function(e,t,n){var a=gDesigner.getActiveDocument(),r=a.getScene();e||(e=a.getEditor().getSelection());var s=e=a.getEditor().filterIndividualElements(e);e=[];for(let t=0;t<s.length;++t){var c=s[t];if(c.hasMixin(i.GElement.Transform)){var d=c.getGeometryBBox();if(!d||d.getWidth()+d.getHeight()===0)continue;e.push({elbbox:d,element:c})}}if(!t)for(let n=0;n<e.length;++n)t=t?t.united(e[n].elbbox):e[n].elbbox;if(t&&!t.isEmpty())if(this._type===l.Type.Horizontal){e.sort((function(e,t){return e.elbbox.getX()+e.elbbox.getWidth()/2-t.elbbox.getX()-t.elbbox.getWidth()/2}));let a=null;if(!n)if(e.length>1){let o=0;for(let t=0;t<e.length;++t)o+=e[t].elbbox.getWidth();o<=t.getWidth()?n=(t.getWidth()-o)/(e.length-1):a=(t.getWidth()-e[0].elbbox.getWidth()/2-e[e.length-1].elbbox.getWidth()/2)/(e.length-1)}else n=0;o.GEditor.tryRunTransaction(r,function(){var o=t.getX();if(null===a)for(let t=0;t<e.length;++t)o!==e[t].elbbox.getX()&&e[t].element.transform(new i.GTransform(1,0,0,1,o-e[t].elbbox.getX(),0),!0),o+=e[t].elbbox.getWidth()+n;else{var r=o+e[0].elbbox.getWidth()/2;for(let t=0;t<e.length;++t){var s=r+a*t-e[t].elbbox.getWidth()/2;s!==e[t].elbbox.getX()&&e[t].element.transform(new i.GTransform(1,0,0,1,s-e[t].elbbox.getX(),0),!0)}}}.bind(this),i.GLocale.get(this.getTitle()))}else if(this._type===l.Type.Vertical){e.sort((function(e,t){return e.elbbox.getY()+e.elbbox.getHeight()/2-(t.elbbox.getY()+t.elbbox.getHeight()/2)}));let a=null;if(!n)if(e.length>1){let o=0;for(let t=0;t<e.length;++t)o+=e[t].elbbox.getHeight();o<=t.getHeight()?n=(t.getHeight()-o)/(e.length-1):a=(t.getHeight()-e[0].elbbox.getHeight()/2-e[e.length-1].elbbox.getHeight()/2)/(e.length-1)}else n=0;o.GEditor.tryRunTransaction(r,function(){var o=t.getY();if(null===a)for(let t=0;t<e.length;++t)o!==e[t].elbbox.getY()&&e[t].element.transform(new i.GTransform(1,0,0,1,0,o-e[t].elbbox.getY()),!0),o+=e[t].elbbox.getHeight()+n;else{var r=o+e[0].elbbox.getHeight()/2;for(let t=0;t<e.length;++t){var s=r+a*t-e[t].elbbox.getHeight()/2;s!==e[t].elbbox.getX()&&e[t].element.transform(new i.GTransform(1,0,0,1,0,s-e[t].elbbox.getY()),!0)}}}.bind(this),i.GLocale.get(this.getTitle()))}},l.prototype.getTooltipConfig=function(e){return e&&l.TOOLTIP_CONFIG[e]&&l.TOOLTIP_CONFIG[e][this._type]||null},l.prototype.toString=function(){return"[Object GDistributeAction]"},e.exports=l},function(e,t,n){"use strict";var o=n(1);function i(e){this.type=e}o.GObject.inherit(i,o.GEvent),i.prototype.type=null,i.Type={Updated:0},e.exports=i},function(e,t,n){"use strict";n(3);var o=n(45),i=n(1),a=n(13),r=n(9),s=n(61),l=n(16),c=n(27);function d(e){this._type=e,this._title=new i.GLocaleKey("GArrangeAction","title."+e),d.TOOLTIP_CONFIG={[s.TOOLTIP_AREA.TOOLBAR]:{[o.GEditor.ArrangeOrderType.BringForward]:s.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GArrangeAction","bring-forward-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GArrangeAction","bring-forward-tooltip-description")),shortcut:d.SHORTCUT[o.GEditor.ArrangeOrderType.BringForward],video:r.gApi.getRichTooltipVideoURL("Bring_Forward.mp4"),learnMore:"https://documentation.corelvector.com/arrange-objects/stacking-order/"}),[o.GEditor.ArrangeOrderType.SendBackward]:s.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GArrangeAction","send-backward-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GArrangeAction","send-backward-tooltip-description")),shortcut:d.SHORTCUT[o.GEditor.ArrangeOrderType.SendBackward],video:r.gApi.getRichTooltipVideoURL("Send_Backward.mp4"),learnMore:"https://documentation.corelvector.com/arrange-objects/stacking-order/"})}}}i.GObject.inherit(d,c),d.SHORTCUT={[o.GEditor.ArrangeOrderType.SendToFront]:[a.GKey.Constant.SHIFT,a.GKey.Constant.META,a.GKey.Constant.UP],[o.GEditor.ArrangeOrderType.BringForward]:[a.GKey.Constant.META,a.GKey.Constant.UP],[o.GEditor.ArrangeOrderType.SendBackward]:[a.GKey.Constant.META,a.GKey.Constant.DOWN],[o.GEditor.ArrangeOrderType.SendToBack]:[a.GKey.Constant.SHIFT,a.GKey.Constant.META,a.GKey.Constant.DOWN]},d.TOOLTIP_CONFIG=null,d.ID="arrange.order",d.prototype._type=null,d.prototype._title=null,d.prototype.getId=function(){return d.ID+"."+this._type},d.prototype.getTitle=function(){return this._title},d.prototype.getCategory=function(){return l.CATEGORY_MODIFY_ARRANGE},d.prototype.getGroup=function(){return"arrange/arrange"},d.prototype.getShortcut=function(){return d.SHORTCUT[this._type]||null},d.prototype.isEnabled=function(e){return(e=e||(gDesigner.getActiveDocument()?gDesigner.getActiveDocument().getEditor().getIndividualSelection():null))&&e.length>0},d.prototype.execute=function(e){gDesigner.getActiveDocument().getEditor().arrangeOrder(this._type,e,!1)},d.prototype.getTooltipConfig=function(e){return e&&d.TOOLTIP_CONFIG[e]&&d.TOOLTIP_CONFIG[e][this._type]||null},d.prototype.toString=function(){return"[Object GArrangeAction]"},e.exports=d},function(e,t,n){"use strict";n(17),n(3),n(22);var o=n(1),i=n(13),a=n(34),r=n(61),s=n(16),l=n(97);function c(){c.TOOLTIP_CONFIG={[r.TOOLTIP_AREA.TOOLBAR]:r.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GSplitAction","tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GSplitAction","tooltip-description")),shortcut:c.SHORTCUT,learnMore:"https://documentation.corelvector.com/organizing-your-designs/groups/"})}}o.GObject.inherit(c,l),c.ID="modify.split",c.TITLE=new o.GLocaleKey("GSplitAction","title"),c.SHORTCUT=[i.GKey.Constant.SHIFT,i.GKey.Constant.META,"G"],c.TOOLTIP_CONFIG=null,c.prototype.getId=function(){return c.ID},c.prototype.getTitle=function(){return c.TITLE},c.prototype.getIcon=function(){return"gravit-icon-ungroup"},c.prototype.getCategory=function(){return s.CATEGORY_MODIFY},c.prototype.getGroup=function(){return"structure-group"},c.prototype.getShortcut=function(){return c.SHORTCUT},c.prototype.isEnabled=function(){if(!l.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument();if(e){var t=e.getEditor().getIndividualSelection();if(t)for(var n=0;n<t.length;++n){var i=t[n];if(i instanceof o.GGroup||i instanceof o.GCompoundShape||i instanceof o.GSymbol&&!i.getMasterSymbol()||i instanceof o.GShape&&null!==i.getFirstChild())return!0}}return!1},c.prototype.execute=function(){var e=gDesigner.getActiveDocument().getEditor(),t=e.getIndividualSelection().slice();e.beginTransaction();try{var n,i,r=[],s=gDesigner.getActiveDocument().getScene();e.clearSelection();try{i=new Set;for(var l=0;l<t.length;++l)((n=t[l])instanceof o.GShape&&null!==n.getFirstChild()||n instanceof o.GGroup||n instanceof o.GCompoundShape||n instanceof o.GSymbol&&!n.getMasterSymbol())&&i.add(n.getParent());(0,a.blockChanges)(e,i,s);for(l=0;l<t.length;++l)if((n=t[l])instanceof o.GGroup||n instanceof o.GCompoundShape||n instanceof o.GSymbol&&!n.getMasterSymbol()){var d=n.getParent(),u=n.getChildren();try{n.beginUpdate();for(var p=0;p<u.length;++p){var g=u[p];n.removeChild(g),d.insertChild(g,n),r.push(g)}}finally{n.endUpdate()}d.removeChild(n)}else if(n instanceof o.GShape&&null!==n.getFirstChild()){d=n.getParent(),u=n.getChildren();try{n.beginUpdate();for(p=u.length-1;p>=0;--p){g=u[p];n.removeChild(g),d.insertChild(g,n.getNext()),r.push(g)}}finally{n.endUpdate()}r.push(n)}else r.push(n)}finally{(0,a.releaseChanges)(e,i,s)}r.length>0&&e.updateSelection(!1,r)}finally{e.commitTransaction(o.GLocale.get(c.TITLE))}},c.prototype.getTooltipConfig=function(e){return e&&c.TOOLTIP_CONFIG[e]||null},c.prototype.toString=function(){return"[Object GSplitAction]"},e.exports=c},function(e,t,n){"use strict";n(3);var o=n(45),i=n(1),a=n(61),r=n(16),s=n(27);function l(e){this._type=e,this._title=new i.GLocaleKey("GTransformAction","title."+e),l.TOOLTIP_CONFIG={[a.TOOLTIP_AREA.TOOLBAR]:{[l.Type.Rotate45Left]:null,[l.Type.Rotate90Left]:a.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GTransformAction","rotate-90-left-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GTransformAction","rotate-90-left-tooltip-description")),learnMore:"https://documentation.corelvector.com/basics/moving-transforming-and-arranging-objects/#rotating-objects"}),[l.Type.Rotate180Left]:null,[l.Type.Rotate45Right]:null,[l.Type.Rotate90Right]:a.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GTransformAction","rotate-90-right-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GTransformAction","rotate-90-right-tooltip-description")),learnMore:"https://documentation.corelvector.com/basics/moving-transforming-and-arranging-objects/#rotating-objects"}),[l.Type.Rotate180Right]:null,[l.Type.FlipVertical]:a.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GTransformAction","flip-vertical-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GTransformAction","flip-vertical-tooltip-description")),learnMore:"https://documentation.corelvector.com/basics/moving-transforming-and-arranging-objects/#flipping-objects"}),[l.Type.FlipHorizontal]:a.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GTransformAction","flip-horizontal-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GTransformAction","flip-horizontal-tooltip-description")),learnMore:"https://documentation.corelvector.com/basics/moving-transforming-and-arranging-objects/#flipping-objects"})}}}i.GObject.inherit(l,s),l.Type={Rotate45Left:"rotate-45-left",Rotate90Left:"rotate-90-left",Rotate180Left:"rotate-180-left",Rotate45Right:"rotate-45-right",Rotate90Right:"rotate-90-right",Rotate180Right:"rotate-180-right",FlipVertical:"flip-vertical",FlipHorizontal:"flip-horizontal"},l.TOOLTIP_CONFIG=null,l.ID="arrange.transform",l.prototype._type=null,l.prototype._title=null,l.prototype.getId=function(){return l.ID+"."+this._type},l.prototype.getTitle=function(){return this._title},l.prototype.getIcon=function(){switch(this._type){case l.Type.Rotate90Left:case l.Type.Rotate90Right:return"gravit-icon-rotate";case l.Type.FlipVertical:return"gravit-icon-flip-vertical";case l.Type.FlipHorizontal:return"gravit-icon-flip-horizontal";default:return null}},l.prototype.getCategory=function(){return r.CATEGORY_MODIFY_TRANSFORM},l.prototype.getGroup=function(){var e="";switch(this._type){case l.Type.Rotate45Left:case l.Type.Rotate90Left:case l.Type.Rotate180Left:e="rotate-left";break;case l.Type.Rotate45Right:case l.Type.Rotate90Right:case l.Type.Rotate180Right:e="rotate-right";break;case l.Type.FlipVertical:case l.Type.FlipHorizontal:e="flip"}return"arrange/transform-"+e},l.prototype.getShortcut=function(){return null},l.prototype.isEnabled=function(e){let t=e||(gDesigner.getActiveDocument()?gDesigner.getActiveDocument().getEditor().getSelection():null)||[];return t=t.filter(e=>{var t=o.GElementEditor.getEditor(e);return t&&(t.hasFlag(o.GBoxEditor.Flag.RotateCorners)||t.hasFlag(o.GBoxEditor.Flag.RotateHandle))}),t.length>0},l.prototype.execute=function(e){var t=gDesigner.getActiveDocument(),n=t.getScene();e||(e=t.getEditor().getSelection()),e=(e=t.getEditor().filterIndividualElements(e)).filter(e=>{var t=o.GElementEditor.getEditor(e);return t&&(t.hasFlag(o.GBoxEditor.Flag.RotateCorners)||t.hasFlag(o.GBoxEditor.Flag.RotateHandle))});var a=o.GEditor.getGroupGeometryBBox(e);a&&o.GEditor.tryRunTransaction(n,function(){for(var t=0;t<e.length;++t){var n=e[t];if(n.hasMixin(i.GElement.Transform)&&a){var o=a.getSide(i.GRect.Side.CENTER),r=0,s=1,c=1;switch(this._type){case l.Type.Rotate45Left:r=-45;break;case l.Type.Rotate90Left:r=-90;break;case l.Type.Rotate180Left:r=-180;break;case l.Type.Rotate45Right:r=45;break;case l.Type.Rotate90Right:r=90;break;case l.Type.Rotate180Right:r=180;break;case l.Type.FlipVertical:c=-1;break;case l.Type.FlipHorizontal:s=-1}var d=(new i.GTransform).translated(-o.getX(),-o.getY()).scaled(s,c).rotated(i.GMath.toRadians(r)).translated(o.getX(),o.getY());n.transform(d,!0)}}}.bind(this),i.GLocale.get(this.getTitle()))},l.prototype.getTooltipConfig=function(e){return e&&l.TOOLTIP_CONFIG[e]&&l.TOOLTIP_CONFIG[e][this._type]||null},l.prototype.toString=function(){return"[Object GTransformAction]"},e.exports=l},function(e,t,n){"use strict";n(17),n(3),n(22);var o=n(1),i=n(34),a=n(61),r=n(16),s=n(97);function l(){l.TOOLTIP_CONFIG={[a.TOOLTIP_AREA.TOOLBAR]:a.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GVectorizeBorderAction","tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GVectorizeBorderAction","tooltip-description")),learnMore:"https://documentation.corelvector.com/basics/modify-paths/#vectorize-borders"})}}o.GObject.inherit(l,s),l.ID="modify.vectorize",l.TITLE=new o.GLocaleKey("GVectorizeBorderAction","title"),l.TOOLTIP_CONFIG=null,l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){return l.TITLE},l.prototype.getCategory=function(){return r.CATEGORY_MODIFY_PATH},l.prototype.getGroup=function(){return"structure/modify"},l.prototype.getIcon=function(){return"gravit-icon-vectorize-border"},l.prototype.isEnabled=function(){if(!s.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument()?gDesigner.getActiveDocument().getEditor().getIndividualSelection():null,t=!1;if(e)for(var n=0;!t&&n<e.length;++n)if(!(e[n]instanceof o.GImage)&&e[n].hasMixin(o.GVertexSource)&&e[n].hasMixin(o.GStylable)){var i=e[n].getPaintLayers(),a=i?i.getBorderLayers(!0):null;t=a&&a.length>=1}return t},l.prototype.execute=function(){var e,t=gDesigner.getActiveDocument(),n=t?t.getEditor():null,a=(t&&t.getScene(),n?n.getIndividualSelection():null),r=[];if(a)for(var s=0;s<a.length;++s){var l=a[s];!l.hasMixin(o.GVertexSource)||l instanceof o.GImage||!l.hasMixin(o.GStylable)||r.push(l)}if(r.length){var c=function(e,t){if(t instanceof o.GPath)e.getPaths().appendChild(t);else for(var n,i=t.cloneSubPaths(),a=i.getFirstChild();null!==a;a=n)n=a.getNext(),i.removeChild(a),e.getPaths().appendChild(a)};n.beginTransaction();try{var d,u=[],p=function(e){var t=e.getProperty("_ba"),n=e.getProperty("_bw");n=n||1;var i,a=t==o.GStylable.BorderAlignment.Center?.5*n:n,r=new o.GVertexOffsetter(o.GPathUtil.makeClockWise(d),a,t!=o.GStylable.BorderAlignment.Outside,t!=o.GStylable.BorderAlignment.Inside,0,e.getProperty("_blc"),e.getProperty("_bml"));if(t==o.GStylable.BorderAlignment.Center)i=o.GPathUtil.createPathFromVertexSource(r);else{var s=o.GPathUtil.createPathFromVertexSource(d),l=o.GPathUtil.createPathFromVertexSource(r);s&&(i=new o.GCompoundPath,c(i,s),l&&c(i,l))}return i&&(o.GElement.prototype.assignFrom.call(i,d),i.getPaintLayers().clearLayers(),e.$_pt&&i.getPaintLayers().appendChild(new o.GStylable.FillPaintLayer(e.$_pt))),i};e=new Set;for(s=0;s<r.length;++s){var g=r[s].getParent();g&&e.add(g)}try{(0,i.blockChanges)(n,e);for(s=0;s<r.length;++s){var h=(d=r[s]).getParent(),f=d.getNext(),m=null,y=d.getPaintLayers().getBorderLayers(!0);if(y.length>1)o.GUtil.each(y,(function(e,t){var n=p(t);n&&(m||(m=new o.GGroup),m.appendChild(n))}));else if(1==y.length){var v=y.pop();m=p(v)}m?(h.insertChild(m,f),u.push(m),h.removeChild(d)):u.push(d)}}finally{(0,i.releaseChanges)(n,e),u.length&&n.updateSelection(!1,u)}}finally{n.commitTransaction(o.GLocale.get(this.getTitle()))}}},l.prototype.getTooltipConfig=function(e){return e&&l.TOOLTIP_CONFIG[e]||null},l.prototype.toString=function(){return"[Object GVectorizeBorderAction]"},e.exports=l},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(16),r=n(97);function s(){}o.GObject.inherit(s,r),s.ID="modify.split-path",s.TITLE=new o.GLocaleKey("GSplitPathAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return a.CATEGORY_MODIFY_PATH},s.prototype.getGroup=function(){return"structure/path"},s.prototype.getShortcut=function(){return[i.GKey.Constant.SHIFT,i.GKey.Constant.META,"J"]},s.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-split-path":null},s.prototype.isEnabled=function(){var e=gDesigner.getActiveDocument();if(e){var t=e.getEditor().getSelection();if(t)for(var n=0;n<t.length;++n)if(t[n]instanceof o.GCompoundPath)return!0}return!1},s.prototype.execute=function(){if(!r.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument().getEditor(),t=e.getSelection().slice();if(t&&t.length){e.beginTransaction();try{for(var n=[],i=0;i<t.length;++i){var a=t[i];if(a instanceof o.GCompoundPath){var s=new o.GRectangle;o.GElement.prototype.assignFrom.call(s,a);var l=e.splitCompoundPath(a);if(l&&l.length)for(var c=0;c<l.length;++c){var d=l[c];o.GElement.prototype.assignFrom.call(d,s),n.push(d)}}}n.length&&e.updateSelection(!1,n)}finally{e.commitTransaction(o.GLocale.get(this.getTitle()))}}},s.prototype.toString=function(){return"[Object GSplitPathAction]"},e.exports=s},function(e,t,n){"use strict";n(18),n(3),n(29);var o=n(1),i=n(13),a=n(16),r=n(97);function s(){}o.GObject.inherit(s,r),s.ID="modify.detachsymbol",s.TITLE=new o.GLocaleKey("GDetachSymbolAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return a.CATEGORY_MODIFY_SYMBOL},s.prototype.getGroup=function(){return"structure/modify"},s.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-detach-symbol":null},s.prototype.getShortcut=function(){return[i.GKey.Constant.SHIFT,i.GKey.Constant.META,i.GKey.Constant.F8]},s.prototype.isEnabled=function(){if(!r.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument();if(e){var t=e.getEditor().getIndividualSelection();if(t&&t.length)for(var n=t.length-1;n>=0;--n){var i=t[n];if(i instanceof o.GSymbol&&!i.isMaster()&&i.getMasterSymbol())return!0}}return!1},s.prototype.execute=function(){var e=gDesigner.getActiveDocument().getEditor(),t=o.GNode.order(e.getIndividualSelection().slice());if(t.length&&t[0].getScene()){e.beginTransaction();try{for(var n=0,i=0;i<t.length;++i){var a=t[i];a instanceof o.GSymbol&&a.detach()&&n++}}finally{e.commitTransaction(o.GLocale.get(new o.GLocaleKey("GDetachSymbolAction","text.number-detached")).replace("%number",n>1?"s":""))}}},s.prototype.toString=function(){return"[Object GDetachSymbolAction]"},e.exports=s},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(16),r=n(97);function s(){}o.GObject.inherit(s,r),s.ID="edit.paste.style",s.TITLE=new o.GLocaleKey("GPasteStyleAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return a.CATEGORY_EDIT_PASTE},s.prototype.getGroup=function(){return"ccp/paste"},s.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-paste-style":null},s.prototype.getShortcut=function(){return[i.GKey.Constant.F4]},s.prototype.isEnabled=function(){if(!r.prototype.isEnabled.call(this))return!1;var e=gDesigner.getClipboardMimeTypes();if(e&&e.indexOf(o.GNode.MIME_TYPE)>=0){var t=gDesigner.getActiveDocument();if(t){var n=t.getEditor().getIndividualSelection();if(n)for(var i=0;i<n.length;++i)if(n[i].hasMixin(o.GStylable))return!0}}return!1},s.prototype.execute=function(){var e=o.GNode.deserialize(gDesigner.getClipboardContent(o.GNode.MIME_TYPE));if((e=gDesigner.getActiveDocument().filterUnrestrictedCommercialFileElements(e))&&e.length>0){for(var t=null,n=0;n<e.length;++n)if(e[n].hasMixin(o.GStylable)){t=e[n];break}if(!t)return;var i=gDesigner.getActiveDocument().getEditor(),a=i.getIndividualSelection();t instanceof o.GText&&gDesigner.getActiveDocument().getScene().getActivePage().appendChild(t),i.beginTransaction();try{for(n=0;n<a.length;++n){var r=a[n];r.hasMixin(o.GStylable)&&r.assignStyleFrom(t)}}finally{i.commitTransaction(o.GLocale.get(this.getTitle())),t instanceof o.GText&&gDesigner.getActiveDocument().getScene().getActivePage().removeChild(t)}}},s.prototype.toString=function(){return"[Object GPasteStyleAction]"},e.exports=s},function(e,t,n){"use strict";n(3),n(28);var o=n(1),i=n(13);const a=n(16),r=n(97);function s(){}o.GObject.inherit(s,r),s.ID="edit.paste.replace",s.TITLE=new o.GLocaleKey("GPasteAndReplaceAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-paste-and-replace":null},s.prototype.getCategory=function(){return a.CATEGORY_EDIT_PASTE},s.prototype.getGroup=function(){return"ccp/paste"},s.prototype.getShortcut=function(){return[i.GKey.Constant.OPTION,i.GKey.Constant.COMMAND,"V"]},s.prototype.isEnabled=function(){if(!r.prototype.isEnabled.call(this))return!1;const e=gDesigner.getActiveDocument(),t=e&&e.getEditor(),n=t&&t.getSelection();if(n&&n.length>0){if(document.queryCommandSupported("paste"))return!0;const e=gDesigner.getClipboardMimeTypes();if(e&&e.indexOf(o.GNode.MIME_TYPE)>=0)return!0}return!1},s.prototype.execute=function(){gDesigner.getPaste().assignCallback(this._paste.bind(this)),!gDesigner.isTouchDevice()&&document.execCommand("paste")||(gDesigner.getPaste().assignCallback(null),this._paste(o.GNode.deserialize(gDesigner.getClipboardContent(o.GNode.MIME_TYPE))))},s.prototype._paste=function(e){if(e&&e.length>0){const t=gDesigner.getActiveDocument();if(!t)return;const n=t&&t.getEditor();if(!n||!n.hasSelection())return;const i=t.filterUnrestrictedCommercialFileElements(e.filter(e=>e instanceof o.GElement));if(i.length>0){n.beginTransaction();try{let e=[];const t=n.getSelection().slice();this._fixTexts(i),t.forEach(t=>{const n=this._replace(t,i);n&&n.length>0&&(e=e.concat(n))}),n.insertElements(e,!0,!0,!1,!0)}finally{n.commitTransaction(o.GLocale.get(this.getTitle()))}}}},s.prototype._fixTexts=function(e){const t=gDesigner.getActiveDocument(),n=t&&t.getEditor();n&&e.forEach(e=>{e.accept(t=>{if(t instanceof o.GText)return n.insertElements([e],!0,!0,!1),e.getParent().removeChild(e),!1})})},s.prototype._replace=function(e,t){const n=this._getBoundingBox(t);if(!n)return;const i=e.getGeometryBBox(),a=new o.GTransform(1,0,0,1,i.getX()-n.getX(),i.getY()-n.getY()),r=this._clone(t);return r.forEach(e=>{e.hasMixin(o.GElement.Transform)&&e.transform(a,!0)}),e.getParent().removeChild(e),r},s.prototype._clone=function(e){return e.map(e=>e.clone())},s.prototype._getBoundingBox=function(e){let t;return e.forEach(e=>{const n=e.getGeometryBBox();n&&!n.isEmpty()&&(t=t?t.united(n):n)}),t},s.prototype.toString=function(){return"[Object GPasteAndReplaceAction]"},e.exports=s},function(e,t,n){"use strict";n(3);n(45);var o=n(1),i=n(13),a=n(16),r=n(27);n(37);function s(){}o.GObject.inherit(s,r),s.ID="paste.paste",s.TITLE=new o.GLocaleKey("GPasteAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getIcon=function(){return"gravit-icon-paste"},s.prototype.getCategory=function(){return a.CATEGORY_EDIT_PASTE},s.prototype.getGroup=function(){return"ccp/paste"},s.prototype.getShortcut=function(){return[i.GKey.Constant.META,"V"]},s.prototype.isEnabled=function(){return!!gDesigner.getActiveDocument()},s.prototype.executeFromShortcut=function(){var e=gDesigner.getPaste(),t=null;return e&&(e.assignCallback(null),t=e.getArea()),document.activeElement&&$(document.activeElement).is(":editable")&&!gDesigner.isGravitIME(document.activeElement)||t&&(e.setAllowFocus(!0),t.focus()),!1},s.prototype.execute=function(){gDesigner.getPaste().pasteFromClipboard().catch(e=>{this._pasteFromInternalClipboard()})},s.prototype._pasteFromInternalClipboard=function(){gDesigner.getClipboardContent(o.GNode.MIME_TYPE)&&(gDesigner.getPaste().assignCallback(null),gDesigner.getPaste().handlePasteData({[o.GNode.MIME_TYPE]:gDesigner.getClipboardContent(o.GNode.MIME_TYPE)}))},s.prototype.toString=function(){return"[Object GPasteAction]"},e.exports=s},function(e,t,n){"use strict";var o=n(14),i=n(9),a=o(n(1556));e.exports=class{constructor(e){this._target=e,this._lastTouchStartEvent=0,this._touchmoved=!1,this._touchStartX=0,this._touchStartY=0,this._handleEventBound=this._tryHandleEvent.bind(this),this._handleScrollEventBound=this._handleScrollEvent.bind(this),this._gestureHelper=new a.default,this.activate(e)}addGesture(e){this._gestureHelper.addGesture(e)}setDelayedTouchEventsEnabled(e){this._gestureHelper.setDelayedTouchEventsEnabled(e)}setClickSuppressionEnabled(e){this._gestureHelper.setClickSuppressionEnabled(e),document.removeEventListener("scroll",this._handleScrollEventBound,!0),e&&document.addEventListener("scroll",this._handleScrollEventBound,!0)}activate(e){this.deactivate(this._target),this._target=e,this._target&&(this._target.addEventListener("touchstart",this._handleEventBound),this._target.addEventListener("touchmove",this._handleEventBound),this._target.addEventListener("touchend",this._handleEventBound),this._target.addEventListener("touchcancel",this._handleEventBound),this._target.addEventListener("gesturestart",this._handleEventBound))}deactivate(e){const t=e||this._target;t&&(t.removeEventListener("touchstart",this._handleEventBound),t.removeEventListener("touchmove",this._handleEventBound),t.removeEventListener("touchend",this._handleEventBound),t.removeEventListener("touchcancel",this._handleEventBound),t.removeEventListener("gesturestart",this._handleEventBound)),document.removeEventListener("scroll",this._handleScrollEventBound,!0),this._target&&delete this._target}_tryHandleEvent(e){this._shouldHandle(e)&&this._handleEvent(e)}_handleEvent(e){switch(e.type){case"touchstart":this._touchStart(e);break;case"touchmove":this._touchMove(e);break;case"touchend":this._touchEnd(e);break;case"touchcancel":this._touchCancel(e);break;case"gesturestart":this._gestureStart(e)}}_touchStart(e){const t=e.targetTouches[0]||e.changedTouches[0];t?(this._touchStartX=t.clientX,this._touchStartY=t.clientY):(this._touchStartX=0,this._touchStartY=0),this._touchmoved=!1,this._gestureHelper.touchStart(e)}_touchMove(e){this._touchmoved=this._wasMoved(e),this._touchmoved&&this._gestureHelper.touchMove(e)}_touchEnd(e){this._touchmoved=!1,this._gestureHelper.touchEnd(e)}_touchCancel(e){this._gestureHelper.touchCancel(e)}_gestureStart(e){this._gestureHelper.gestureStart(e)}_handleScrollEvent(e){this._gestureHelper.scroll(e)}_wasMoved(e){const t=e.changedTouches[0],{clientX:n,clientY:o}=t;return!(Math.abs(n-this._touchStartX)<i.MIN_TOUCH_MOVE_DISTANCE&&Math.abs(o-this._touchStartY)<i.MIN_TOUCH_MOVE_DISTANCE)}_shouldHandle(e){return!e.defaultPrevented}}},function(e,t,n){"use strict";n(26);var o=n(1),i=n(13);const a=n(859);class r extends a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._lastClickPoint=null,this._lastClickEventTime=0,this._config=Object.assign({doubleTapDetection:r.DetectionMode.Target,doubleTapThreshold:0,doubleTapDelay:100},e)}canActivate(){return!0}start(e,t){this._doubleTapTouches=null,e.areThereTwoTouchPointsOnTheTarget()&&(this._doubleTapTouches=Array.from(e.getOriginalEvent().targetTouches)),this._doubleTapTouches||this._config.doubleTapDetection!==r.DetectionMode.Nearby||(this._doubleTapTouches=this._getTwoTouchPointsNearby(e.getOriginalEvent().touches)),this._doubleTapTouches?this._doubleTapTime=Date.now():e.iterateChangedTouches(e=>{this._dispatchEventFromTouch("mousedown",e,i.GMouseEvent.BUTTON_LEFT,!t.isSwiping())})}end(e,t){if(this._doubleTapTouches){return void(this._doubleTapTouches.every(e=>!t.hasActiveIdentifier(e))&&(this._doubleTapTouches=null,Date.now()-this._doubleTapTime<=this._config.doubleTapDelay&&e.iterateChangedTouches(e=>{this._dispatchEventFromTouch("mouseup",e)})))}if(e.iterateChangedTouches(e=>{this._dispatchEventFromTouch("mouseup",e,i.GMouseEvent.BUTTON_LEFT,!t.isSwiping())}),t.isSwiping())return;const n=Date.now();e.iterateChangedTouches(e=>{this._dispatchEventFromTouch("click",e)});const a=e.getOriginalEvent().changedTouches[0];a&&(this._doubleTapTouches||this._isDblClick(a,n)&&this._dispatchEventFromTouch("dblclick",a),this._lastClickEventTime=n,this._lastClickPoint=new o.GPoint(a.screenX,a.screenY))}cancel(e){e.iterateChangedTouches(e=>{this._dispatchEventFromTouch("mouseup",e)})}_isDblClick(e,t){if(this._lastClickPoint&&this._lastClickEventTime){if(o.GMath.ptDist(e.screenX,e.screenY,this._lastClickPoint.getX(),this._lastClickPoint.getY())<=25){if(t-this._lastClickEventTime<=300)return!0}}return!1}_getTwoTouchPointsNearby(e){const t=e.length;if(t>1)for(let n=0;n<t;n++)for(let i=n+1;i<t;i++){const t=e[n],a=e[i];if(o.GMath.ptDist(t.screenX,t.screenY,a.screenX,a.screenY)<=this._config.doubleTapThreshold)return[t,a]}return null}}r.DetectionMode={Target:0,Nearby:1},e.exports=r},function(e,t,n){"use strict";var o=n(13);e.exports=class{canActivate(){return!1}activate(e,t){this._active=!0}deactivate(e,t){this._active=!1}isActive(){return this._active}start(e,t){}move(e,t){}end(e,t){}cancel(e,t){}gesture(e,t){}_dispatchEventFromTouch(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.GMouseEvent.BUTTON_LEFT,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const a=document.createEvent("MouseEvent");a.initMouseEvent(e,!0,i,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,n,null),t.target.dispatchEvent(a)}}},function(e,t){e.exports=require("electron")},function(e,t,n){"use strict";var o=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t.getCollabInfo=c,t.handleCollabsData=async function(e){if(!gDesigner.getActiveDocument()||!gDesigner.getActiveDocument().getStorageItem())return;let t=[];const n=e?await e:gDesigner.getShareManager().getCollaboratorsCached(gDesigner.getActiveDocument());if(n&&n.length)for(let e=0;e<n.length;e++){let o=n[e];if(!o.getRole().is(i.ShareRoles.Viewer)&&!o.getRole().is(i.ShareRoles.NoAccess)){let e=await c(o.getUID());t.push(a.default.createUserMention(o,e))}}let o,s,l,d,u=[];if(t.length){o=t.filter(e=>e.getRole().is(i.ShareRoles.Reviewer)),s=t.filter(e=>e.getRole().is(i.ShareRoles.Approver)),l=t.filter(e=>e.getRole().is(i.ShareRoles.CoAuthor)),d=t.filter(e=>e.getRole().is(i.ShareRoles.Owner));const e=(0,r.createAdditionalMentions)();o&&o.length&&u.push(e.MENTION_ALL_REVIEWERS),s&&s.length&&u.push(e.MENTION_ALL_APPROVERS),l&&l.length&&u.push(e.MENTION_ALL_CO_AUTHORS),d&&d.length&&u.push(e.MENTION_OWNER),u.push(e.MENTION_ALL)}return{data:t,allReviewers:o,allApprovers:s,allCoAuthors:l,owner:d,additionalMentions:u}},t.replaceAdditionalCollabShowTextBeforeSend=function(e){const t=(0,r.createAdditionalMentions)();return this._mentionsCollection.forEach(n=>{n.id===t.MENTION_ALL.id?e.replace(t.MENTION_ALL.showText,t.MENTION_ALL.id):n.id===t.MENTION_OWNER.id?e.replace(t.MENTION_OWNER.showText,t.MENTION_OWNER.id):n.id===t.MENTION_ALL_REVIEWERS.id?e.replace(t.MENTION_ALL_REVIEWERS.showText,t.MENTION_ALL_REVIEWERS.id):n.id===t.MENTION_ALL_APPROVERS.id?e.replace(t.MENTION_ALL_APPROVERS.showText,t.MENTION_ALL_APPROVERS.id):n.id===t.MENTION_ALL_CO_AUTHORS.id&&e.replace(t.MENTION_ALL_CO_AUTHORS.showText,t.MENTION_ALL_CO_AUTHORS.id)}),e},t.showAssigneeRow=function(e){if(!e||!e.length)return;e.mentionsInput("getMentions",e=>{if(this._mentionsCollection=e,this._mentionsCollection.length){this._assigneeRow.show();let e=this._mentionsCollection.reduce((e,t)=>{let n=[],o=e.map(e=>e.id);return n=t.id===s.MENTION_ALL_REVIEWERS.id&&this._mentionData&&this._mentionData.allReviewers&&this._mentionData.allReviewers.length?this._mentionData.allReviewers.filter(e=>!o.includes(e.id)):t.id===s.MENTION_ALL_APPROVERS.id&&this._mentionData&&this._mentionData.allApprovers&&this._mentionData.allApprovers.length?this._mentionData.allApprovers.filter(e=>!o.includes(e.id)):t.id===s.MENTION_ALL_CO_AUTHORS.id&&this._mentionData&&this._mentionData.allCoAuthors&&this._mentionData.allCoAuthors.length?this._mentionData.allCoAuthors.filter(e=>!o.includes(e.id)):t.id===s.MENTION_ALL.id?this._data.filter(e=>!o.includes(e.id)):t.id===s.MENTION_OWNER.id&&this._owner&&this._owner.length?this._owner.filter(e=>!o.includes(e.id)):o.includes(t.id)?[]:[t],e.push(...n),e},[]);if(1===e.length)this._assigneeSelector.hide(),this._onlyOneAssignee.html(e[0].name),this._onlyOneAssignee.show();else{this._onlyOneAssignee.hide();let t=this._assigneeSelector.find("select");t.find("option").remove(),e.forEach(e=>{t.append($("<option>").attr("value",e.id).text(e.name))}),this._assigneeSelector.show()}d.call(this,e[0].id)}else this._assigneeRow.hide(),this._shouldAssign=!1,this._assigneeCheckBox.prop("checked",this._shouldAssign)})},t.updateAssignee=d,n(52),n(17),n(158),n(7),n(18),n(62),n(29),n(28),n(22);var i=n(9),a=o(n(862)),r=n(1328);const s=(0,r.createAdditionalMentions)(),l={};async function c(e){return l.hasOwnProperty(e)||(l[e]=i.gApi.getUser(e,!0).catch(()=>null)),l[e]}function d(e){e&&e.length&&(this._assignees=[e])}},function(e,t,n){"use strict";n(26);const o=n(166);class i extends o{constructor(){let{id:e,name:t,last_name:n,email:o,showText:i,avatar:a,role:r,fontWeight:s="normal",type:l="contact",trigger:c="@",additional:d=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({id:e,name:t,last_name:n,email:o,showText:i,avatar:a,fontWeight:s,type:l,trigger:c}),this.value="",this._role=r,this._additional=d}setValue(e){this.value=e}getFullUserName(){return this._additional?this.name:super.getFullUserName()}static createUserMention(e,t){let n=e.getFirstName();return new i({id:e.getUID(),name:n,last_name:e.getLastName(),showText:"@"+e.getFullUserName(),avatar:t?t.avatar:"assets/icon/notification-icon.svg",role:e.getRole(),email:e.getEmail()})}static clone(e){const t=new i;return Object.assign(t,e),t}}e.exports=i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GGoogleAPI=t.GDefaultGoogleAPI=void 0,n(17),n(26),n(7),n(22);var o=n(9),i=n(1);class a{isLoaded(){return!0}init(){let{appId:e,apiKey:t,clientId:n,discoveryDocs:o,scope:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};throw"Not implemented"}isSignedIn(){throw"Not implemented"}listenSignInStateChanges(e){}install(e){}signIn(){throw"Not implemented"}signOut(){throw"Not implemented"}getTokenConfiguration(e){throw"Not implemented"}loadFilePicker(){throw"Not implemented"}openFilePicker(e,t){throw"Not implemented"}getBasicProfile(){throw"Not implemented"}getAccessToken(){throw"Not implemented"}getRefreshToken(){throw"Not implemented"}}t.GGoogleAPI=a;t.GDefaultGoogleAPI=new class extends a{isLoaded(){return!!window.gapi}async init(){let{appId:e,apiKey:t,clientId:n,discoveryDocs:o,scope:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._appId=e,this._apiKey=t,this._clientId=n,this._discoveryDocs=o,this._scope=a,await new Promise((e,t)=>{gapi.load("client",{callback:e,onerror:t})}),await gapi.client.init({apiKey:t,discoveryDocs:o}),new Promise(async(e,t)=>{try{const t=await gContainer.getProperty("googleapi_auth_email_hint");this._tokenClient=google.accounts.oauth2.initTokenClient({client_id:n,scope:a,prompt:"",callback:"",hint:t||"",error_callback:()=>location.reload()}),e()}catch(e){t(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.loading-failed")))}})}async isSignedIn(){if(this.isLoaded()){const e=await gContainer.getProperty("googleapi_auth_key");return fetch("https://www.googleapis.com/oauth2/v3/tokeninfo?access_token=".concat(e&&e.access_token)).then(e=>e.json()).then(e=>!!e.email).catch(()=>!1)}return!1}install(e){const t=[],n=t=>new Promise((n,o)=>{let i=document.createElement("script");i.async=!0,i.src=t,i.onload=n,i.onerror=o,(e||document.getElementsByTagName("head")[0]).appendChild(i)});return t.push(n("https://apis.google.com/js/api.js")),t.push(n("https://accounts.google.com/gsi/client")),Promise.all(t)}async signIn(){return await gContainer.setProperty("googleapi_auth_key",null),new Promise(async(e,t)=>{try{const n=await gContainer.getProperty("googleapi_auth_email_hint");this._tokenClient.callback=async n=>{n.error&&t();const o=gapi.client.getToken(),i={access_token:o.access_token,expires_at:1e3*o.expires_in+Date.now()};await gContainer.setProperty("googleapi_auth_key",i),e()},this._tokenClient.requestAccessToken({prompt:"",hint:n||""})}catch(e){t(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.loading-failed")))}})}async signOut(){this._picker&&delete this._picker;const e=await gContainer.getProperty("googleapi_auth_key");await google.accounts.oauth2.revoke(e&&e.access_token),gapi.client.setToken(null),gContainer.setProperty("googleapi_auth_key",null),gContainer.setProperty("googleapi_auth_email_hint",null)}async getTokenConfiguration(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=await gContainer.getProperty("googleapi_auth_key");return Object.assign(e,{accessToken:t.access_token,expires:t.expires_at,corporate:!1})}async loadFilePicker(){return new Promise((e,t)=>{gapi.load("picker",{timeout:2e4,callback:e,ontimeout:()=>t(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.loading-failed"))),onerror:()=>t(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.loading-failed")))})})}async openFilePicker(e,t){try{await this.isSignedIn()||await this.signIn();const t=(await gContainer.getProperty("googleapi_auth_key")).access_token;this._picker&&delete this._picker,this._picker=(0,o.GooglePickerBuilder)({appId:this._appId,apiKey:this._apiKey,accessToken:t,language:i.GLocale.getLanguage()}),this._picker.setCallback(t=>{t.action===google.picker.Action.PICKED&&e(t.docs)}),this._picker.setVisible(!0)}catch(e){t&&t(e)}}async getBasicProfile(){await this.isSignedIn()||await this.signIn();const e=await gContainer.getProperty("googleapi_auth_key");return fetch("https://www.googleapis.com/oauth2/v3/userinfo?access_token=".concat(e&&e.access_token)).then(e=>e.json()).then(e=>(e.email&&gContainer.setProperty("googleapi_auth_email_hint",e.email),{email:e.email,imageUrl:e.picture,name:e.name})).catch(()=>reject(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.loading-failed"))))}async getAccessToken(){await this.isSignedIn()||await this.signIn();const e=await gContainer.getProperty("googleapi_auth_key");return{expires:e.expires_at,accessToken:e.access_token}}}},function(e,t,n){"use strict";var o=n(14);n(17),n(7),n(124),n(22);var i=n(1),a=n(9),r=o(n(519));class s{static async setLanguage(e){try{const t=i.GLocale.getTranslations(),n=i.GTranslation.Projects.Cloud,o=i.GTranslation.Projects.Designer,r=t.find(t=>t.keyValue===e);if(!r)return;const s=await this._fetchTranslation(o,r),l=await this._fetchTranslation(n,r);i.GLocale.replaceValues(o,e,s.translations),i.GLocale.replaceValues(n,e,l.translations),i.GLocale.setLanguage(e),a.GLocaleFactory.setLanguage(e),a.gApi.setLanguage(e)}catch(e){}}static async _shouldFetchTranslation(e,t){if(t.keyValue===i.GLocale.getLanguage())try{const n=await fetch(await this._getCDNURL(e,t),{method:"HEAD"}).then(e=>{if(e.ok)return e.headers.get("etag")});if(this._isEtagsEqual(n,t.etag))return!1}catch(e){}return!0}static _isEtagsEqual(e,t){return e.startsWith("W/")&&(e=e.substring(3,e.length-1)),e===t}static async _fetchTranslation(e,t){if(!await this._shouldFetchTranslation(e,t))return;return await fetch(await this._getCDNURL(e,t)).then(e=>e.json())}static async _getCDNURL(e,t){const n=t.abbreviation,o=e.toLowerCase(),i="".concat(n,"/").concat(o);let s=this.translationsCacheMap.get(i);return s||(s=this.translationsCacheMap.set(i,new r.default(()=>a.gApi.fetchTranslationsURL(n,o).then(e=>e.url).catch(()=>null))).get(i)),await s.get()}}s.translationsCacheMap=new Map,e.exports=s},function(e,t,n){"use strict";var o=n(173),i=TypeError;e.exports=function(e,t){if(!delete e[t])throw new i("Cannot delete property "+o(t)+" of "+o(e))}},function(e,t,n){"use strict";var o=n(30),i=n(714);o({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==i},{trimLeft:i})},function(e,t,n){"use strict";var o=n(81).f;e.exports=function(e,t,n){n in e||o(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})}},function(e,t,n){"use strict";n(338)("Float64",(function(e){return function(t,n,o){return e(this,t,n,o)}}))},function(e,t,n){"use strict";n.r(t),n.d(t,"encode",(function(){return a})),n.d(t,"decode",(function(){return r})),n.d(t,"trim",(function(){return s})),n.d(t,"isBase64",(function(){return l})),n.d(t,"isUrlSafeBase64",(function(){return c}));const o={"+":"-","/":"_"},i={"-":"+",_:"/",".":"="},a=e=>e.replace(/[+/]/g,e=>o[e]),r=e=>e.replace(/[-_.]/g,e=>i[e]),s=e=>e.replace(/[.=]{1,2}$/,""),l=e=>/^[A-Za-z0-9+/]*[=]{0,2}$/.test(e),c=e=>/^[A-Za-z0-9_-]*[.=]{0,2}$/.test(e)},function(e,t,n){var o;e.exports=(o=n(47),n(366),n(1021),n(1022),n(256),n(257),n(520),n(715),n(1023),n(716),n(1024),n(1025),n(1026),n(521),n(1027),n(219),n(90),n(1028),n(1029),n(1030),n(1031),n(1032),n(1033),n(1034),n(1035),n(1036),n(1037),n(1038),n(1039),n(1040),n(1041),n(1042),n(1043),o)},function(e,t,n){var o;e.exports=(o=n(47),function(){if("function"==typeof ArrayBuffer){var e=o.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,o=[],i=0;i<n;i++)o[i>>>2]|=e[i]<<24-i%4*8;t.call(this,o,n)}else t.apply(this,arguments)}).prototype=e}}(),o.lib.WordArray)},function(e,t,n){var o;e.exports=(o=n(47),function(){var e=o,t=e.lib.WordArray,n=e.enc;function i(e){return e<<8&4278255360|e>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],i=0;i<n;i+=2){var a=t[i>>>2]>>>16-i%4*8&65535;o.push(String.fromCharCode(a))}return o.join("")},parse:function(e){for(var n=e.length,o=[],i=0;i<n;i++)o[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return t.create(o,2*n)}},n.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],a=0;a<n;a+=2){var r=i(t[a>>>2]>>>16-a%4*8&65535);o.push(String.fromCharCode(r))}return o.join("")},parse:function(e){for(var n=e.length,o=[],a=0;a<n;a++)o[a>>>1]|=i(e.charCodeAt(a)<<16-a%2*16);return t.create(o,2*n)}}}(),o.enc.Utf16)},function(e,t,n){var o,i,a,r,s,l;e.exports=(l=n(47),n(715),i=(o=l).lib.WordArray,a=o.algo,r=a.SHA256,s=a.SHA224=r.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}}),o.SHA224=r._createHelper(s),o.HmacSHA224=r._createHmacHelper(s),l.SHA224)},function(e,t,n){var o,i,a,r,s,l,c,d;e.exports=(d=n(47),n(366),n(716),i=(o=d).x64,a=i.Word,r=i.WordArray,s=o.algo,l=s.SHA512,c=s.SHA384=l.extend({_doReset:function(){this._hash=new r.init([new a.init(3418070365,3238371032),new a.init(1654270250,914150663),new a.init(2438529370,812702999),new a.init(355462360,4144912697),new a.init(1731405415,4290775857),new a.init(2394180231,1750603025),new a.init(3675008525,1694076839),new a.init(1203062813,3204075428)])},_doFinalize:function(){var e=l._doFinalize.call(this);return e.sigBytes-=16,e}}),o.SHA384=l._createHelper(c),o.HmacSHA384=l._createHmacHelper(c),d.SHA384)},function(e,t,n){var o;e.exports=(o=n(47),n(366),function(e){var t=o,n=t.lib,i=n.WordArray,a=n.Hasher,r=t.x64.Word,s=t.algo,l=[],c=[],d=[];!function(){for(var e=1,t=0,n=0;n<24;n++){l[e+5*t]=(n+1)*(n+2)/2%64;var o=(2*e+3*t)%5;e=t%5,t=o}for(e=0;e<5;e++)for(t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var i=1,a=0;a<24;a++){for(var s=0,u=0,p=0;p<7;p++){if(1&i){var g=(1<<p)-1;g<32?u^=1<<g:s^=1<<g-32}128&i?i=i<<1^113:i<<=1}d[a]=r.create(s,u)}}();var u=[];!function(){for(var e=0;e<25;e++)u[e]=r.create()}();var p=s.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new r.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,o=this.blockSize/2,i=0;i<o;i++){var a=e[t+2*i],r=e[t+2*i+1];a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),r=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),(G=n[i]).high^=r,G.low^=a}for(var s=0;s<24;s++){for(var p=0;p<5;p++){for(var g=0,h=0,f=0;f<5;f++)g^=(G=n[p+5*f]).high,h^=G.low;var m=u[p];m.high=g,m.low=h}for(p=0;p<5;p++){var y=u[(p+4)%5],v=u[(p+1)%5],_=v.high,b=v.low;for(g=y.high^(_<<1|b>>>31),h=y.low^(b<<1|_>>>31),f=0;f<5;f++)(G=n[p+5*f]).high^=g,G.low^=h}for(var w=1;w<25;w++){var C=(G=n[w]).high,x=G.low,S=l[w];S<32?(g=C<<S|x>>>32-S,h=x<<S|C>>>32-S):(g=x<<S-32|C>>>64-S,h=C<<S-32|x>>>64-S);var E=u[c[w]];E.high=g,E.low=h}var A=u[0],T=n[0];for(A.high=T.high,A.low=T.low,p=0;p<5;p++)for(f=0;f<5;f++){var G=n[w=p+5*f],P=u[w],D=u[(p+1)%5+5*f],L=u[(p+2)%5+5*f];G.high=P.high^~D.high&L.high,G.low=P.low^~D.low&L.low}G=n[0];var I=d[s];G.high^=I.high,G.low^=I.low}},_doFinalize:function(){var t=this._data,n=t.words,o=(this._nDataBytes,8*t.sigBytes),a=32*this.blockSize;n[o>>>5]|=1<<24-o%32,n[(e.ceil((o+1)/a)*a>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var r=this._state,s=this.cfg.outputLength/8,l=s/8,c=[],d=0;d<l;d++){var u=r[d],p=u.high,g=u.low;p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),g=16711935&(g<<8|g>>>24)|4278255360&(g<<24|g>>>8),c.push(g),c.push(p)}return new i.init(c,s)},clone:function(){for(var e=a.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});t.SHA3=a._createHelper(p),t.HmacSHA3=a._createHmacHelper(p)}(Math),o.SHA3)},function(e,t,n){var o;e.exports=(o=n(47),function(e){var t=o,n=t.lib,i=n.WordArray,a=n.Hasher,r=t.algo,s=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=i.create([0,1518500249,1859775393,2400959708,2840853838]),p=i.create([1352829926,1548603684,1836072691,2053994217,0]),g=r.RIPEMD160=a.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var o=t+n,i=e[o];e[o]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var a,r,g,b,w,C,x,S,E,A,T,G=this._hash.words,P=u.words,D=p.words,L=s.words,I=l.words,k=c.words,O=d.words;for(C=a=G[0],x=r=G[1],S=g=G[2],E=b=G[3],A=w=G[4],n=0;n<80;n+=1)T=a+e[t+L[n]]|0,T+=n<16?h(r,g,b)+P[0]:n<32?f(r,g,b)+P[1]:n<48?m(r,g,b)+P[2]:n<64?y(r,g,b)+P[3]:v(r,g,b)+P[4],T=(T=_(T|=0,k[n]))+w|0,a=w,w=b,b=_(g,10),g=r,r=T,T=C+e[t+I[n]]|0,T+=n<16?v(x,S,E)+D[0]:n<32?y(x,S,E)+D[1]:n<48?m(x,S,E)+D[2]:n<64?f(x,S,E)+D[3]:h(x,S,E)+D[4],T=(T=_(T|=0,O[n]))+A|0,C=A,A=E,E=_(S,10),S=x,x=T;T=G[1]+g+E|0,G[1]=G[2]+b+A|0,G[2]=G[3]+w+C|0,G[3]=G[4]+a+x|0,G[4]=G[0]+r+S|0,G[0]=T},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,a=i.words,r=0;r<5;r++){var s=a[r];a[r]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function h(e,t,n){return e^t^n}function f(e,t,n){return e&t|~e&n}function m(e,t,n){return(e|~t)^n}function y(e,t,n){return e&n|t&~n}function v(e,t,n){return e^(t|~n)}function _(e,t){return e<<t|e>>>32-t}t.RIPEMD160=a._createHelper(g),t.HmacRIPEMD160=a._createHmacHelper(g)}(Math),o.RIPEMD160)},function(e,t,n){var o,i,a,r,s,l,c,d,u;e.exports=(u=n(47),n(520),n(521),i=(o=u).lib,a=i.Base,r=i.WordArray,s=o.algo,l=s.SHA1,c=s.HMAC,d=s.PBKDF2=a.extend({cfg:a.extend({keySize:4,hasher:l,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,o=c.create(n.hasher,e),i=r.create(),a=r.create([1]),s=i.words,l=a.words,d=n.keySize,u=n.iterations;s.length<d;){var p=o.update(t).finalize(a);o.reset();for(var g=p.words,h=g.length,f=p,m=1;m<u;m++){f=o.finalize(f),o.reset();for(var y=f.words,v=0;v<h;v++)g[v]^=y[v]}i.concat(p),l[0]++}return i.sigBytes=4*d,i}}),o.PBKDF2=function(e,t,n){return d.create(n).compute(e,t)},u.PBKDF2)},function(e,t,n){var o;e.exports=(o=n(47),n(90),o.mode.CFB=function(){var e=o.lib.BlockCipherMode.extend();function t(e,t,n,o){var i=this._iv;if(i){var a=i.slice(0);this._iv=void 0}else a=this._prevBlock;o.encryptBlock(a,0);for(var r=0;r<n;r++)e[t+r]^=a[r]}return e.Encryptor=e.extend({processBlock:function(e,n){var o=this._cipher,i=o.blockSize;t.call(this,e,n,i,o),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var o=this._cipher,i=o.blockSize,a=e.slice(n,n+i);t.call(this,e,n,i,o),this._prevBlock=a}}),e}(),o.mode.CFB)},function(e,t,n){var o,i,a;e.exports=(a=n(47),n(90),a.mode.CTR=(o=a.lib.BlockCipherMode.extend(),i=o.Encryptor=o.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,i=this._iv,a=this._counter;i&&(a=this._counter=i.slice(0),this._iv=void 0);var r=a.slice(0);n.encryptBlock(r,0),a[o-1]=a[o-1]+1|0;for(var s=0;s<o;s++)e[t+s]^=r[s]}}),o.Decryptor=i,o),a.mode.CTR)},function(e,t,n){var o;e.exports=(o=n(47),n(90),o.mode.CTRGladman=function(){var e=o.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,n=e>>8&255,o=255&e;255===t?(t=0,255===n?(n=0,255===o?o=0:++o):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=o}else e+=1<<24;return e}var n=e.Encryptor=e.extend({processBlock:function(e,n){var o=this._cipher,i=o.blockSize,a=this._iv,r=this._counter;a&&(r=this._counter=a.slice(0),this._iv=void 0),function(e){0===(e[0]=t(e[0]))&&(e[1]=t(e[1]))}(r);var s=r.slice(0);o.encryptBlock(s,0);for(var l=0;l<i;l++)e[n+l]^=s[l]}});return e.Decryptor=n,e}(),o.mode.CTRGladman)},function(e,t,n){var o,i,a;e.exports=(a=n(47),n(90),a.mode.OFB=(o=a.lib.BlockCipherMode.extend(),i=o.Encryptor=o.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,i=this._iv,a=this._keystream;i&&(a=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(a,0);for(var r=0;r<o;r++)e[t+r]^=a[r]}}),o.Decryptor=i,o),a.mode.OFB)},function(e,t,n){var o,i;e.exports=(i=n(47),n(90),i.mode.ECB=((o=i.lib.BlockCipherMode.extend()).Encryptor=o.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),o.Decryptor=o.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),o),i.mode.ECB)},function(e,t,n){var o;e.exports=(o=n(47),n(90),o.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,o=4*t,i=o-n%o,a=n+i-1;e.clamp(),e.words[a>>>2]|=i<<24-a%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},o.pad.Ansix923)},function(e,t,n){var o;e.exports=(o=n(47),n(90),o.pad.Iso10126={pad:function(e,t){var n=4*t,i=n-e.sigBytes%n;e.concat(o.lib.WordArray.random(i-1)).concat(o.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},o.pad.Iso10126)},function(e,t,n){var o;e.exports=(o=n(47),n(90),o.pad.Iso97971={pad:function(e,t){e.concat(o.lib.WordArray.create([2147483648],1)),o.pad.ZeroPadding.pad(e,t)},unpad:function(e){o.pad.ZeroPadding.unpad(e),e.sigBytes--}},o.pad.Iso97971)},function(e,t,n){var o;e.exports=(o=n(47),n(90),o.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(t[n>>>2]>>>24-n%4*8&255);)n--;e.sigBytes=n+1}},o.pad.ZeroPadding)},function(e,t,n){var o;e.exports=(o=n(47),n(90),o.pad.NoPadding={pad:function(){},unpad:function(){}},o.pad.NoPadding)},function(e,t,n){var o,i,a,r;e.exports=(r=n(47),n(90),i=(o=r).lib.CipherParams,a=o.enc.Hex,o.format.Hex={stringify:function(e){return e.ciphertext.toString(a)},parse:function(e){var t=a.parse(e);return i.create({ciphertext:t})}},r.format.Hex)},function(e,t,n){var o;e.exports=(o=n(47),n(256),n(257),n(219),n(90),function(){var e=o,t=e.lib.BlockCipher,n=e.algo,i=[],a=[],r=[],s=[],l=[],c=[],d=[],u=[],p=[],g=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,o=0;for(t=0;t<256;t++){var h=o^o<<1^o<<2^o<<3^o<<4;h=h>>>8^255&h^99,i[n]=h,a[h]=n;var f=e[n],m=e[f],y=e[m],v=257*e[h]^16843008*h;r[n]=v<<24|v>>>8,s[n]=v<<16|v>>>16,l[n]=v<<8|v>>>24,c[n]=v,v=16843009*y^65537*m^257*f^16843008*n,d[h]=v<<24|v>>>8,u[h]=v<<16|v>>>16,p[h]=v<<8|v>>>24,g[h]=v,n?(n=f^e[e[e[y^f]]],o^=e[e[o]]):n=o=1}}();var h=[0,1,2,4,8,16,32,64,128,27,54],f=n.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,o=4*((this._nRounds=n+6)+1),a=this._keySchedule=[],r=0;r<o;r++)if(r<n)a[r]=t[r];else{var s=a[r-1];r%n?n>6&&r%n==4&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=i[(s=s<<8|s>>>24)>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=h[r/n|0]<<24),a[r]=a[r-n]^s}for(var l=this._invKeySchedule=[],c=0;c<o;c++)r=o-c,s=c%4?a[r]:a[r-4],l[c]=c<4||r<=4?s:d[i[s>>>24]]^u[i[s>>>16&255]]^p[i[s>>>8&255]]^g[i[255&s]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,r,s,l,c,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,d,u,p,g,a),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,o,i,a,r,s){for(var l=this._nRounds,c=e[t]^n[0],d=e[t+1]^n[1],u=e[t+2]^n[2],p=e[t+3]^n[3],g=4,h=1;h<l;h++){var f=o[c>>>24]^i[d>>>16&255]^a[u>>>8&255]^r[255&p]^n[g++],m=o[d>>>24]^i[u>>>16&255]^a[p>>>8&255]^r[255&c]^n[g++],y=o[u>>>24]^i[p>>>16&255]^a[c>>>8&255]^r[255&d]^n[g++],v=o[p>>>24]^i[c>>>16&255]^a[d>>>8&255]^r[255&u]^n[g++];c=f,d=m,u=y,p=v}f=(s[c>>>24]<<24|s[d>>>16&255]<<16|s[u>>>8&255]<<8|s[255&p])^n[g++],m=(s[d>>>24]<<24|s[u>>>16&255]<<16|s[p>>>8&255]<<8|s[255&c])^n[g++],y=(s[u>>>24]<<24|s[p>>>16&255]<<16|s[c>>>8&255]<<8|s[255&d])^n[g++],v=(s[p>>>24]<<24|s[c>>>16&255]<<16|s[d>>>8&255]<<8|s[255&u])^n[g++],e[t]=f,e[t+1]=m,e[t+2]=y,e[t+3]=v},keySize:8});e.AES=t._createHelper(f)}(),o.AES)},function(e,t,n){var o;e.exports=(o=n(47),n(256),n(257),n(219),n(90),function(){var e=o,t=e.lib,n=t.WordArray,i=t.BlockCipher,a=e.algo,r=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],u=a.DES=i.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var o=r[n]-1;t[n]=e[o>>>5]>>>31-o%32&1}for(var i=this._subKeys=[],a=0;a<16;a++){var c=i[a]=[],d=l[a];for(n=0;n<24;n++)c[n/6|0]|=t[(s[n]-1+d)%28]<<31-n%6,c[4+(n/6|0)]|=t[28+(s[n+24]-1+d)%28]<<31-n%6;for(c[0]=c[0]<<1|c[0]>>>31,n=1;n<7;n++)c[n]=c[n]>>>4*(n-1)+3;c[7]=c[7]<<5|c[7]>>>27}var u=this._invSubKeys=[];for(n=0;n<16;n++)u[n]=i[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],p.call(this,4,252645135),p.call(this,16,65535),g.call(this,2,858993459),g.call(this,8,16711935),p.call(this,1,1431655765);for(var o=0;o<16;o++){for(var i=n[o],a=this._lBlock,r=this._rBlock,s=0,l=0;l<8;l++)s|=c[l][((r^i[l])&d[l])>>>0];this._lBlock=r,this._rBlock=a^s}var u=this._lBlock;this._lBlock=this._rBlock,this._rBlock=u,p.call(this,1,1431655765),g.call(this,8,16711935),g.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function p(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function g(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=i._createHelper(u);var h=a.TripleDES=i.extend({_doReset:function(){var e=this._key.words;this._des1=u.createEncryptor(n.create(e.slice(0,2))),this._des2=u.createEncryptor(n.create(e.slice(2,4))),this._des3=u.createEncryptor(n.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=i._createHelper(h)}(),o.TripleDES)},function(e,t,n){var o;e.exports=(o=n(47),n(256),n(257),n(219),n(90),function(){var e=o,t=e.lib.StreamCipher,n=e.algo,i=n.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,o=this._S=[],i=0;i<256;i++)o[i]=i;i=0;for(var a=0;i<256;i++){var r=i%n,s=t[r>>>2]>>>24-r%4*8&255;a=(a+o[i]+s)%256;var l=o[i];o[i]=o[a],o[a]=l}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=a.call(this)},keySize:8,ivSize:0});function a(){for(var e=this._S,t=this._i,n=this._j,o=0,i=0;i<4;i++){n=(n+e[t=(t+1)%256])%256;var a=e[t];e[t]=e[n],e[n]=a,o|=e[(e[t]+e[n])%256]<<24-8*i}return this._i=t,this._j=n,o}e.RC4=t._createHelper(i);var r=n.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)a.call(this)}});e.RC4Drop=t._createHelper(r)}(),o.RC4)},function(e,t,n){var o;e.exports=(o=n(47),n(256),n(257),n(219),n(90),function(){var e=o,t=e.lib.StreamCipher,n=e.algo,i=[],a=[],r=[],s=n.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var o=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)l.call(this);for(n=0;n<8;n++)i[n]^=o[n+4&7];if(t){var a=t.words,r=a[0],s=a[1],c=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),d=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=c>>>16|4294901760&d,p=d<<16|65535&c;for(i[0]^=c,i[1]^=u,i[2]^=d,i[3]^=p,i[4]^=c,i[5]^=u,i[6]^=d,i[7]^=p,n=0;n<4;n++)l.call(this)}},_doProcessBlock:function(e,t){var n=this._X;l.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var o=0;o<4;o++)i[o]=16711935&(i[o]<<8|i[o]>>>24)|4278255360&(i[o]<<24|i[o]>>>8),e[t+o]^=i[o]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,n=0;n<8;n++){var o=e[n]+t[n],i=65535&o,s=o>>>16,l=((i*i>>>17)+i*s>>>15)+s*s,c=((4294901760&o)*o|0)+((65535&o)*o|0);r[n]=l^c}e[0]=r[0]+(r[7]<<16|r[7]>>>16)+(r[6]<<16|r[6]>>>16)|0,e[1]=r[1]+(r[0]<<8|r[0]>>>24)+r[7]|0,e[2]=r[2]+(r[1]<<16|r[1]>>>16)+(r[0]<<16|r[0]>>>16)|0,e[3]=r[3]+(r[2]<<8|r[2]>>>24)+r[1]|0,e[4]=r[4]+(r[3]<<16|r[3]>>>16)+(r[2]<<16|r[2]>>>16)|0,e[5]=r[5]+(r[4]<<8|r[4]>>>24)+r[3]|0,e[6]=r[6]+(r[5]<<16|r[5]>>>16)+(r[4]<<16|r[4]>>>16)|0,e[7]=r[7]+(r[6]<<8|r[6]>>>24)+r[5]|0}e.Rabbit=t._createHelper(s)}(),o.Rabbit)},function(e,t,n){var o;e.exports=(o=n(47),n(256),n(257),n(219),n(90),function(){var e=o,t=e.lib.StreamCipher,n=e.algo,i=[],a=[],r=[],s=n.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)l.call(this);for(i=0;i<8;i++)o[i]^=n[i+4&7];if(t){var a=t.words,r=a[0],s=a[1],c=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),d=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=c>>>16|4294901760&d,p=d<<16|65535&c;for(o[0]^=c,o[1]^=u,o[2]^=d,o[3]^=p,o[4]^=c,o[5]^=u,o[6]^=d,o[7]^=p,i=0;i<4;i++)l.call(this)}},_doProcessBlock:function(e,t){var n=this._X;l.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var o=0;o<4;o++)i[o]=16711935&(i[o]<<8|i[o]>>>24)|4278255360&(i[o]<<24|i[o]>>>8),e[t+o]^=i[o]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,n=0;n<8;n++){var o=e[n]+t[n],i=65535&o,s=o>>>16,l=((i*i>>>17)+i*s>>>15)+s*s,c=((4294901760&o)*o|0)+((65535&o)*o|0);r[n]=l^c}e[0]=r[0]+(r[7]<<16|r[7]>>>16)+(r[6]<<16|r[6]>>>16)|0,e[1]=r[1]+(r[0]<<8|r[0]>>>24)+r[7]|0,e[2]=r[2]+(r[1]<<16|r[1]>>>16)+(r[0]<<16|r[0]>>>16)|0,e[3]=r[3]+(r[2]<<8|r[2]>>>24)+r[1]|0,e[4]=r[4]+(r[3]<<16|r[3]>>>16)+(r[2]<<16|r[2]>>>16)|0,e[5]=r[5]+(r[4]<<8|r[4]>>>24)+r[3]|0,e[6]=r[6]+(r[5]<<16|r[5]>>>16)+(r[4]<<16|r[4]>>>16)|0,e[7]=r[7]+(r[6]<<8|r[6]>>>24)+r[5]|0}e.RabbitLegacy=t._createHelper(s)}(),o.RabbitLegacy)},function(e,t,n){"use strict";n(276);const{GObject:o,GLocale:i}=n(1),a=n(1045);function r(e){let{id:t,level:n=0,name:o,description:i,status:r,pro:s=!1,assignable:l=!0,permissions:c}=e;a.call(this),this.id=t,this.name=o,this.description=i,this.status=r,this.pro=s,this.permissions=c,this.assignable=l,this.level=n}o.inheritAndMix(r,o,[a]),r.prototype.getPermissions=function(){return this.permissions},r.prototype.getDescription=function(){return this.description},r.prototype.getStatus=function(){return this.status},r.prototype.getName=function(){return this.name},r.prototype.getId=function(){return this.id},r.prototype.setId=function(e){this.id=e},r.prototype.getName=function(){return this.name},r.prototype.getLevel=function(){return this.level},r.prototype.isPro=function(){return this.pro},r.prototype.equals=function(e){return e.getId()===this.getId()},r.prototype.hasPermission=function(e){return!!this.permissions[e]},r.prototype.applyPermissions=function(e){this.permissions.applyFrom(e)},r.prototype.isAssignable=function(){return this.assignable},r.prototype.is=function(e){return this.getId()===e.id},e.exports=r},function(e,t,n){"use strict";n(17),n(7),n(28),n(22);const{GObject:o}=n(1),i=n(1046);function a(){this._resourceMap=new i,this._controlSubjectState={locked:!1}}o.inherit(a,o),a.prototype._controlSubjectState=null,a.prototype.lockPermissions=function(){this._controlSubjectState.locked=!0,Object.freeze(this._controlSubjectState),Object.freeze(this._resourceMap)},a.prototype.grant=function(e,t){if(this._controlSubjectState.locked)return this;if((e=e instanceof Array?e:[e]).some(e=>this._resourceMap.has(e)))throw"Can't override an existing resource";return e.forEach(e=>this._resourceMap.set(e,t)),this},a.prototype.revoke=function(e){return this._controlSubjectState.locked||(e=e instanceof Array?e:[e]).forEach(e=>{this._resourceMap.has(e)&&this._resourceMap.delete(e)}),this},a.prototype.can=function(e){return e=e instanceof Array?e:[e],Promise.all(e.map(async e=>{if(!this._resourceMap.has(e))return!1;var t=this._resourceMap.get(e);return!t||!!await t(this,e)})).then(e=>e.every(e=>!!e))},a.prototype.canSync=function(e){return(e=e instanceof Array?e:[e]).every(e=>{if(!this._resourceMap.has(e))return!1;const t=this._resourceMap.get(e);if(!t)return!0;return!!t(this,e)})},a.prototype.extend=function(e){if(this._controlSubjectState.locked)return this;if(!(e instanceof a))throw"Not a valid instance to extend";const t=o(this._resourceMap),n=o(e._resourceMap);return this._resourceMap=new i(...t,...n),this;function o(e){return e instanceof Map?e:new Map(Object.entries(e))}},e.exports=a},function(e,t,n){"use strict";function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t&&this._updateFromArguments(t)}n(17),n(22),o.prototype._updateFromArguments=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const o=new Map(...t);var i=!1;const a=0,r=1,s=o.entries();let l=s.next();do{if(i=l.done,l.value){const e=l.value[a],t=l.value[r];this[e]=t,l=s.next()}}while(!i)},o.prototype.has=function(e){return this.hasOwnProperty(e)},o.prototype.delete=function(e){this.isFrozen()||delete this[e]},o.prototype.set=function(e,t){this.isFrozen()||(this[e]=t)},o.prototype.get=function(e){return this[e]},o.prototype.isFrozen=function(){return Object.isFrozen(this)},Object.freeze(o.prototype),e.exports=o},function(e,t,n){"use strict";n(26);const{GObject:o}=n(1);class i{constructor(e){Object.assign(this,e)}}o.inherit(i,o),i.prototype.applyFrom=function(e){Object.assign(this,e)},e.exports=i},function(e,t,n){"use strict";const{ShareRoles:{CoAuthor:o,Developer:i,Reviewer:a,Approver:r,Owner:s},GFileReviewActions:{ACTION_REQUEST_REVIEW:l,ACTION_REQUEST_APPROVAL:c,ACTION_REOPEN:d,ACTION_APPROVE:u}}=n(9),p=n(419);e.exports={[r.id]:[l,d,u,p.RESOLVE_COMMENT_ANNOTATION,p.RESOLVE_ALL_COMMENT_ANNOTATION,p.REOPEN_COMMENT_ANNOTATION],[o.id]:[p.DELETE_COMMENT_ANNOTATION],[i.id]:[p.DELETE_COMMENT_ANNOTATION,p.RESOLVE_COMMENT_ANNOTATION,p.REOPEN_COMMENT_ANNOTATION],[a.id]:[],[s.id]:[l,c,p.DELETE_COMMENT_ANNOTATION,p.RESOLVE_COMMENT_ANNOTATION,p.REOPEN_COMMENT_ANNOTATION]}},function(e,t,n){"use strict";e.exports={DELETE_COMMENT_ANNOTATION:"DELETE_COMMENT_ANNOTATION",RESOLVE_COMMENT_ANNOTATION:"RESOLVE_COMMENT_ANNOTATION",RESOLVE_ALL_COMMENT_ANNOTATION:"RESOLVE_ALL_COMMENT_ANNOTATION",REOPEN_COMMENT_ANNOTATION:"REOPEN_COMMENT_ANNOTATION"}},function(e,t,n){"use strict";const o=n(240);e.exports={NEWDOCUMENTDIALOG:{HR_UNDER_PRESETS:!1},OFFLINEDIALOG:{HAS_FOOTER:!0},PATHPROPERTIES:{PATH_JOIN_CLASS:""},PURCHASEPANEL:{HAS_PRODUCT_DESCRIPTION:!0,HAS_HIGHLIGHT:!1},SCENEPROPERTIES:{HAS_LOGO_UNDER_SYNC:!0},DESIGNER:{HIGHLIGHT_COLOR:void 0,GUIDELINE_COLOR:void 0,GUIDELINEHINT_COLOR:void 0,DISTANCEHELPER_COLOR:void 0,HIGHLIGHTOUTLINE_COLOR:void 0},USERLOGIN:{loadLogo:()=>$("<div/>").addClass("cloud-logo").load(o["cloud-logo"],()=>{}),OVERLAY_CLASS:""},BRAND_COLOR:"#d72e63",SHOW_BETA_BRANDING:!0}},function(e,t,n){"use strict";const o=new Proxy({},{get:(e,t)=>void 0!==e[t]?e[t]:t});e.exports=o},function(e){e.exports=JSON.parse('[{"family":"Noto Sans Adlam","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansAdlam-Regular.ttf"}],"preview":"assets/font/noto/NotoSansAdlam-Regular.svg","scripts":["ADLAM"]},{"family":"Noto Sans Arabic","fonts":[{"weight":700,"style":"N","url":"assets/font/noto/NotoSansArabic-Bold.ttf"},{"weight":400,"style":"N","url":"assets/font/noto/NotoSansArabic-Regular.ttf"}],"preview":"assets/font/noto/NotoSansArabic-Regular.svg","scripts":["ARABIC"]},{"family":"Noto Sans Armenian","fonts":[{"weight":700,"style":"N","url":"assets/font/noto/NotoSansArmenian-Bold.ttf"},{"weight":400,"style":"N","url":"assets/font/noto/NotoSansArmenian-Regular.ttf"}],"preview":"assets/font/noto/NotoSansArmenian-Regular.svg","scripts":["ARMENIAN"]},{"family":"Noto Sans Avestan","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansAvestan-Regular.ttf"}],"preview":"assets/font/noto/NotoSansAvestan-Regular.svg","scripts":["AVESTAN"]},{"family":"Noto Sans Balinese","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansBalinese-Regular.ttf"}],"preview":"assets/font/noto/NotoSansBalinese-Regular.svg","scripts":["BALINESE"]},{"family":"Noto Sans Bamum","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansBamum-Regular.ttf"}],"preview":"assets/font/noto/NotoSansBamum-Regular.svg","scripts":["BAMUM"]},{"family":"Noto Sans Batak","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansBatak-Regular.ttf"}],"preview":"assets/font/noto/NotoSansBatak-Regular.svg","scripts":["BATAK"]},{"family":"Noto Sans Bengali","fonts":[{"weight":700,"style":"N","url":"assets/font/noto/NotoSansBengali-Bold.ttf"},{"weight":400,"style":"N","url":"assets/font/noto/NotoSansBengali-Regular.ttf"}],"preview":"assets/font/noto/NotoSansBengali-Regular.svg","scripts":["BENGALI"]},{"family":"Noto Sans Brahmi","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansBrahmi-Regular.ttf"}],"preview":"assets/font/noto/NotoSansBrahmi-Regular.svg","scripts":["BRAHMI"]},{"family":"Noto Sans Buginese","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansBuginese-Regular.ttf"}],"preview":"assets/font/noto/NotoSansBuginese-Regular.svg","scripts":["BUGINESE"]},{"family":"Noto Sans Buhid","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansBuhid-Regular.ttf"}],"preview":"assets/font/noto/NotoSansBuhid-Regular.svg","scripts":["BUHID"]},{"family":"Noto Sans Cham","fonts":[{"weight":700,"style":"N","url":"assets/font/noto/NotoSansCham-Bold.ttf"},{"weight":400,"style":"N","url":"assets/font/noto/NotoSansCham-Regular.ttf"}],"preview":"assets/font/noto/NotoSansCham-Regular.svg","scripts":["CHAM"]},{"family":"Noto Sans Cherokee","fonts":[{"weight":700,"style":"N","url":"assets/font/noto/NotoSansCherokee-Bold.ttf"},{"weight":400,"style":"N","url":"assets/font/noto/NotoSansCherokee-Regular.ttf"}],"preview":"assets/font/noto/NotoSansCherokee-Regular.svg","scripts":["CHEROKEE"]},{"family":"Noto Sans CJK JP","fonts":[{"weight":700,"style":"N","url":"assets/font/noto/NotoSansCJKjp-Bold.otf"},{"weight":400,"style":"N","url":"assets/font/noto/NotoSansCJKjp-Regular.otf"}],"preview":"assets/font/noto/NotoSansCJKjp-Regular.svg","scripts":["KATAKANA","HIRAGANA"]},{"family":"Noto Sans CJK KR","fonts":[{"weight":700,"style":"N","url":"assets/font/noto/NotoSansCJKkr-Bold.otf"},{"weight":400,"style":"N","url":"assets/font/noto/NotoSansCJKkr-Regular.otf"}],"preview":"assets/font/noto/NotoSansCJKkr-Regular.svg","scripts":["HANGUL"]},{"family":"Noto Sans Coptic","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansCoptic-Regular.ttf"}],"preview":"assets/font/noto/NotoSansCoptic-Regular.svg","scripts":["COPTIC"]},{"family":"Noto Sans Devanagari","fonts":[{"weight":700,"style":"N","url":"assets/font/noto/NotoSansDevanagari-Bold.ttf"},{"weight":400,"style":"N","url":"assets/font/noto/NotoSansDevanagari-Regular.ttf"}],"preview":"assets/font/noto/NotoSansDevanagari-Regular.svg","scripts":["DEVANAGARI"]},{"family":"Noto Sans Georgian","fonts":[{"weight":700,"style":"N","url":"assets/font/noto/NotoSansGeorgian-Bold.ttf"},{"weight":400,"style":"N","url":"assets/font/noto/NotoSansGeorgian-Regular.ttf"}],"preview":"assets/font/noto/NotoSansGeorgian-Regular.svg","scripts":["GEORGIAN"]},{"family":"Noto Sans Hebrew","fonts":[{"weight":700,"style":"N","url":"assets/font/noto/NotoSansHebrew-Bold.ttf"},{"weight":400,"style":"N","url":"assets/font/noto/NotoSansHebrew-Regular.ttf"}],"preview":"assets/font/noto/NotoSansHebrew-Regular.svg","scripts":["HEBREW"]},{"family":"Noto Sans Javanese","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansJavanese-Regular.ttf"}],"preview":"assets/font/noto/NotoSansJavanese-Regular.svg","scripts":["JAVANESE"]},{"family":"Noto Sans Kaithi","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansKaithi-Regular.ttf"}],"preview":"assets/font/noto/NotoSansKaithi-Regular.svg","scripts":["KAITHI"]},{"family":"Noto Sans Kannada","fonts":[{"weight":700,"style":"N","url":"assets/font/noto/NotoSansKannada-Bold.ttf"},{"weight":400,"style":"N","url":"assets/font/noto/NotoSansKannada-Regular.ttf"}],"preview":"assets/font/noto/NotoSansKannada-Regular.svg","scripts":["KANNADA"]},{"family":"Noto Sans Khmer","fonts":[{"weight":700,"style":"N","url":"assets/font/noto/NotoSansKhmer-Bold.ttf"},{"weight":400,"style":"N","url":"assets/font/noto/NotoSansKhmer-Regular.ttf"}],"preview":"assets/font/noto/NotoSansKhmer-Regular.svg","scripts":["KHMER"]},{"family":"Noto Sans Lao","fonts":[{"weight":700,"style":"N","url":"assets/font/noto/NotoSansLao-Bold.ttf"},{"weight":400,"style":"N","url":"assets/font/noto/NotoSansLao-Regular.ttf"}],"preview":"assets/font/noto/NotoSansLao-Regular.svg","scripts":["LAO"]},{"family":"Noto Sans Lepcha","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansLepcha-Regular.ttf"}],"preview":"assets/font/noto/NotoSansLepcha-Regular.svg","scripts":["LEPCHA"]},{"family":"Noto Sans Limbu","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansLimbu-Regular.ttf"}],"preview":"assets/font/noto/NotoSansLimbu-Regular.svg","scripts":["LIMBU"]},{"family":"Noto Sans Linear B","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansLinearB-Regular.ttf"}],"preview":"assets/font/noto/NotoSansLinearB-Regular.svg","scripts":["LINEAR_B"]},{"family":"Noto Sans Malayalam","fonts":[{"weight":700,"style":"N","url":"assets/font/noto/NotoSansMalayalam-Bold.ttf"},{"weight":400,"style":"N","url":"assets/font/noto/NotoSansMalayalam-Regular.ttf"}],"preview":"assets/font/noto/NotoSansMalayalam-Regular.svg","scripts":["MALAYALAM"]},{"family":"Noto Sans Mandaic","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansMandaic-Regular.ttf"}],"preview":"assets/font/noto/NotoSansMandaic-Regular.svg","scripts":["MANDAIC"]},{"family":"Noto Sans Mongolian","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansMongolian-Regular.ttf"}],"preview":"assets/font/noto/NotoSansMongolian-Regular.svg","scripts":["MONGOLIAN"]},{"family":"Noto Sans Myanmar","fonts":[{"weight":700,"style":"N","url":"assets/font/noto/NotoSansMyanmar-Bold.ttf"},{"weight":400,"style":"N","url":"assets/font/noto/NotoSansMyanmar-Regular.ttf"}],"preview":"assets/font/noto/NotoSansMyanmar-Regular.svg","scripts":["MYANMAR"]},{"family":"Noto Sans Old Persian","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansOldPersian-Regular.ttf"}],"preview":"assets/font/noto/NotoSansOldPersian-Regular.svg","scripts":["OLD_PERSIAN"]},{"family":"Noto Sans Osmanya","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansOsmanya-Regular.ttf"}],"preview":"assets/font/noto/NotoSansOsmanya-Regular.svg","scripts":["OSMANYA"]},{"family":"Noto Sans Phoenician","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansPhoenician-Regular.ttf"}],"preview":"assets/font/noto/NotoSansPhoenician-Regular.svg","scripts":["PHOENICIAN"]},{"family":"Noto Sans Runic","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansRunic-Regular.ttf"}],"preview":"assets/font/noto/NotoSansRunic-Regular.svg","scripts":["RUNIC"]},{"family":"Noto Sans Sundanese","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansSundanese-Regular.ttf"}],"preview":"assets/font/noto/NotoSansSundanese-Regular.svg","scripts":["SUNDANESE"]},{"family":"Noto Sans Syriac Eastern","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansSyriacEastern-Regular.ttf"}],"preview":"assets/font/noto/NotoSansSyriacEastern-Regular.svg","scripts":["SYRIAC"]},{"family":"Noto Sans Syriac Estrangela","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansSyriacEstrangela-Regular.ttf"}],"preview":"assets/font/noto/NotoSansSyriacEstrangela-Regular.svg","scripts":["SYRIAC"]},{"family":"Noto Sans Syriac Western","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansSyriacWestern-Regular.ttf"}],"preview":"assets/font/noto/NotoSansSyriacWestern-Regular.svg","scripts":["SYRIAC"]},{"family":"Noto Sans Tagalog","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansTagalog-Regular.ttf"}],"preview":"assets/font/noto/NotoSansTagalog-Regular.svg","scripts":["TAGALOG"]},{"family":"Noto Sans Tai Tham","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansTaiTham-Regular.ttf"}],"preview":"assets/font/noto/NotoSansTaiTham-Regular.svg","scripts":["TAI_THAM"]},{"family":"Noto Sans Tai Viet","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansTaiViet-Regular.ttf"}],"preview":"assets/font/noto/NotoSansTaiViet-Regular.svg","scripts":["TAI_VIET"]},{"family":"Noto Sans Telugu","fonts":[{"weight":700,"style":"N","url":"assets/font/noto/NotoSansTelugu-Bold.ttf"},{"weight":400,"style":"N","url":"assets/font/noto/NotoSansTelugu-Regular.ttf"}],"preview":"assets/font/noto/NotoSansTelugu-Regular.svg","scripts":["TELUGU"]},{"family":"Noto Sans Thai","fonts":[{"weight":700,"style":"N","url":"assets/font/noto/NotoSansThai-Bold.ttf"},{"weight":400,"style":"N","url":"assets/font/noto/NotoSansThai-Regular.ttf"}],"preview":"assets/font/noto/NotoSansThai-Regular.svg","scripts":["THAI"]},{"family":"Noto Sans Tibetan","fonts":[{"weight":700,"style":"N","url":"assets/font/noto/NotoSansTibetan-Bold.ttf"},{"weight":400,"style":"N","url":"assets/font/noto/NotoSansTibetan-Regular.ttf"}],"preview":"assets/font/noto/NotoSansTibetan-Regular.svg","scripts":["TIBETAN"]},{"family":"Noto Sans Yi","fonts":[{"weight":400,"style":"N","url":"assets/font/noto/NotoSansYi-Regular.ttf"}],"preview":"assets/font/noto/NotoSansYi-Regular.svg","scripts":["YI"]}]')},,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(7);const o=n(143),i=n(206),a=n(539);function r(){}r.createStorageItem=async function(e){let t=null;switch(e.storage){case o.Storage.Gravit:t=await i.from(gDesigner.getDefaultStorage(),e);break;case o.Storage.GoogleDrive:t=await new a.Item(gDesigner.getDefaultStorage(),e)}return t};t.default=r},function(e,t,n){"use strict";e.exports=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;this._status=e,this._statusText=t}isAuthorized(){return!!this._status}getStatusText(){return this._statusText}hasStatusText(){return!!this._statusText}}},function(e,t,n){"use strict";const o=n(143),i=n(9);e.exports=class{static createFrom(e){let t=!1;e instanceof o&&(t=!0);var n=o.from(e);n.setItemType(o.Type.File),t||n.setPermissions([o.Permission.Open,o.Permission.Copy,o.Permission.Editing,o.Permission.Rename,o.Permission.CutPaste,o.Permission.Delete,o.Permission.Download]),n.autosave?(n.setPreviewURL(n.autosave_url_t),n.setModificationTime(e.autosave_updated)):(n.setPreviewURL(n.url_t||n.url_s),n.setModificationTime(e.updated));const a=i.FILE_FORMATS.find(e=>{const t=n.getMimeType();return!(!t||e.type.toLowerCase()!==t.toLowerCase())||e.ext.toLowerCase()===n.getExtension()});return n.setMimeType(a.type),n.ext=a.ext,n.extension=a.ext,n.storage=o.Storage.Gravit,n}}},function(e,t,n){"use strict";n(17),n(7),n(18),n(99),n(3),n(29),n(22);var o=n(9),i=n(1),a=n(9);const r=n(77),s=n(37),l=n(166);function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.Forms.SignIn;this._callback=e,this._init(t)}i.GObject.inherit(c,i.GObject),c.Forms={SignIn:"sign-in",SignUp:"sign-up",ResetPassword:"reset-password",Thanks:"thanks"},c.prototype._init=async function(e){this._dialog=$("<div></div>").gDialog({releaseOnClose:!0,className:"g-login-dialog"}),this._container=$("<div></div>").addClass("container").appendTo(this._dialog),this._buildSignIn(),await this._buildSignUp(),this._buildResetPassword(),this._activatePanel(e)},c.prototype._buildSignIn=function(){let e=$("<div></div>").addClass("panel "+c.Forms.SignIn).appendTo(this._container),t=$("<div></div>").addClass("header").appendTo(e);$("<div></div>").addClass("logo").appendTo(t),$("<div></div>").addClass("text").text(i.GLocale.get(gDesigner.getStoreVendor()?new i.GLocaleKey("GLoginDialog","text.login-dialog-title"):new i.GLocaleKey("GLoginDialog","text.sign-in"))).appendTo(t);let n=$("<div></div>").addClass("body").appendTo(e);$("<div></div>").addClass("title").addClass("simple").append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.sign-in-title")))).appendTo(n);let s=$("<div></div>").addClass("subtitle").appendTo(n);gDesigner.getStoreVendor()&&s.append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.not-register")))).append($("<span></span>").addClass("link").addClass("panel").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.sign-up"))).on("click",()=>{gDesigner.stats("login-signup_create-account_open"),this._activatePanel(c.Forms.SignUp)}));let d=$("<div></div>").addClass("message").append($("<span></span>")).appendTo(n);const u=this._createMessageHandler(d);let p=$("<form></form>").attr("id","signin-form").appendTo(n);p.on("submit",e=>{gDesigner.stats("login-signup_login_login"),u(""),e.preventDefault();const t=$(e.target),n=t.find('input[data-property="email"]').val(),i=t.find('input[data-property="password"]').val();return o.gApi.signin({email:n,password:i,app:"designer"}).then(()=>{o.gApi.getUser().then(e=>{this.close(),this._callback(new l(e))}).catch(e=>this._handlerError(e,u))}).catch(e=>this._handlerError(e,u)),!1}),a.HAS_ENTERPRISE?$("<label>").addClass("label").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.placeholder-sign-in-login"))).appendTo(p):$("<label>").addClass("label").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.sign-in-login"))).appendTo(p),$("<input>").attr("type","text").attr("data-property","email").attr("required",!0).appendTo(p),$("<label>").addClass("label").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.sign-in-password"))).appendTo(p);let g=this._createPasswordInput(),h=$("<span></span>").addClass("forgot-password").append($("<span></span>").addClass("txt").addClass("link").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.forgot-password"))).on("click",()=>{gDesigner.stats("login-signup_login_forgot-password"),a.FORGOT_PWD_LINK?gContainer.openExternalLink(null,"https://idp.corel.com/idp/accountForgotPwd.jsp"):this._activatePanel(c.Forms.ResetPassword)})),f=$("<button></button>").addClass("sign-in").attr("type","submit").append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog",a.HAS_ENTERPRISE?"text.sign-in-button":"text.sign-in")))).appendTo(p);a.HAS_ENTERPRISE?(h.appendTo(p),g.appendTo(p),f.appendTo(p)):(g.appendTo(p),$("<div>").addClass("login-button-row").append(h).append(f).appendTo(p));let m=$("<div></div>").addClass("oauth-buttons");if(a.HAS_ENTERPRISE){let e=$("<div></div>").addClass("enterprise-sign-in").appendTo(n),t=$("<div></div>").addClass("content").appendTo(e);t.append($("<div></div>").addClass("header").append($("<div><div/>").addClass("subtitle").html(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.enterprise-sign-in-message"))))),m.append(this._createGoogleButton(new i.GLocaleKey("GLoginDialog","text.enterprise-sign-google")).attr("tabindex",1)).append(this._createMicrosoftButton(new i.GLocaleKey("GLoginDialog","text.enterprise-sign-microsoft")).attr("tabindex",2)).appendTo(t),m.appendTo(t),$("<div></div>").addClass("footer").append($("<span></span>").addClass("message").html(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.enterprise-login-message-1")))).append($("<span></span>").addClass("message").html(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.enterprise-login-message-2")))).appendTo(t)}else{gContainer.getRuntime()!==r.Runtime.Chrome&&($("<div></div>").addClass("sep").append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.or")))).appendTo(n),m.append(this._createFacebookButton(new i.GLocaleKey("GLoginDialog","text.sign-facebook")).attr("tabindex",1)).append(this._createGoogleButton(new i.GLocaleKey("GLoginDialog","text.sign-google")).attr("tabindex",2)).appendTo(n)),gDesigner.getStoreVendor()&&$("<footer></footer>").append($("<span></span>").addClass("link").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.continue-without-loggin-in"))).on("click",()=>{this.close(),this._callback(null)})).appendTo(e)}return e},c.prototype._createGoogleButton=function(e){return $("<button></button>").addClass("sign-google oauth column-layout").append($("<span></span>").addClass("icon").addClass("gravit-icon-google")).append($("<span></span>").addClass("txt").text(i.GLocale.get(e))).on("click",()=>{let e=this._getStatMappedForm();gDesigner.stats("login-signup_".concat(e,"_login-google")),this._oauth("google")})},c.prototype._createFacebookButton=function(e){return $("<button></button>").addClass("sign-facebook oauth column-layout").append($("<span></span>").addClass("icon").addClass("gravit-icon-facebook")).append($("<span></span>").addClass("txt").text(i.GLocale.get(e))).on("click",()=>{let e=this._getStatMappedForm();gDesigner.stats("login-signup_".concat(e,"_login-facebook")),this._oauth("facebook")})},c.prototype._createMicrosoftButton=function(e){return $("<button></button>").addClass("sign-microsoft oauth column-layout").append($("<span></span>").addClass("icon").addClass("gravit-icon-microsoft")).append($("<span></span>").addClass("txt").text(i.GLocale.get(e))).on("click",()=>{let e=this._getStatMappedForm();gDesigner.stats("login-signup_".concat(e,"_login-microsoft")),this._oauth("microsoft")})},c.prototype._buildSignUp=async function(){let e=$("<div></div>").addClass("panel "+c.Forms.SignUp).appendTo(this._container),t=$("<div></div>").addClass("header").appendTo(e);$("<div></div>").addClass("logo").appendTo(t),$("<div></div>").addClass("text").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.login-dialog-title"))).appendTo(t);let n=$("<div></div>").addClass("body").appendTo(e);$("<div></div>").addClass("title").addClass("simple").append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.sign-up-title")))).appendTo(n),$("<div></div>").addClass("subtitle").append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.already-registered")))).append($("<span></span>").addClass("link").addClass("panel").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.login-here"))).on("click",()=>{gDesigner.stats("login-signup_create-account_back-to-login"),this._activatePanel(c.Forms.SignIn)})).appendTo(n);let a=$("<div></div>").addClass("message").append($("<span></span>")).appendTo(n);const s=this._createMessageHandler(a),d=gContainer.getRuntime()===r.Runtime.Electron;let u=$("<form></form>").attr("id","signup-form").appendTo(n);const p=void 0!==window.grecaptcha&&/^(prod|trunk)/.test("production")&&"localhost"!==location.hostname&&!d,g=async e=>{const t=u.find('input[data-property="email"]').val(),n=u.find('input[data-property="firstname"]').val()+" "+u.find('input[data-property="lastname"]').val(),i=u.find('input[data-property="password"]').val();var a=e;const g=u.find('input[data-property="newsletter"]').is(":checked");let h,f;if(d&&(a=await gContainer.generateGoogleRecaptchaToken()),gContainer.getRuntime()===r.Runtime.Electron){const e=gContainer.getPlatform();"darwin"!==e&&"win32"!==e||(h="designer://"),f=gDesigner.getAssetsURL()}else f=location.origin;o.gApi.signup({email:t,name:n,password:i,app:"designer",recaptcha:a,newsletter:g,appUrl:h,webUrl:f}).then(()=>{o.gApi.getUser().then(e=>{e=new l(e),this._buildThanksSignup(e),this._activatePanel(c.Forms.Thanks),this._callback(e)}).catch(e=>this._handlerError(e,s))}).catch(e=>{if(e&&e.errors){const t=new Map(e.errors);s(Array.from(t.values()).join("<br>"))}else s(e.message||"");p&&grecaptcha.reset(this._recaptchaWidget)})};u.on("submit",e=>(gDesigner.stats("login-signup_create-account_create-account"),s(""),e.preventDefault(),p?grecaptcha.execute(this._recaptchaWidget):g(),!1)),$("<label>").addClass("label").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.placeholder-sign-up-email"))).appendTo(u),$("<input>").attr("type","email").attr("data-property","email").attr("autofocus",!0).attr("required",!0).attr("title",i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.placeholder-sign-up-email"))).appendTo(u);let h=$("<div></div>").addClass("input-group").appendTo(u);$("<span>").append($("<label>").addClass("label").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.placeholder-sign-up-first-name")))).append($("<input>").attr("type","text").attr("data-property","firstname").attr("required",!0).attr("title",i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.placeholder-sign-up-first-name")))).appendTo(h),$("<span>").append($("<label>").addClass("label").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.placeholder-sign-up-last-name")))).append($("<input>").attr("type","text").attr("data-property","lastname").attr("required",!0).attr("title",i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.placeholder-sign-up-last-name")))).appendTo(h),$("<label>").addClass("label").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.placeholder-sign-up-password"))).appendTo(u),this._createPasswordInput().appendTo(u),$("<label></label>").append($("<input>").attr("type","checkbox").on("change",e=>{let t=$(e.target).is(":checked");gDesigner.stats("login-signup_create-account_i-agree",t),u.find('button[type="submit"]').prop("disabled",!t).toggleClass("g-disabled",!t)})).append($("<div></div>").append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.agree")))).append($("<span></span>").addClass("link").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.terms-use"))).on("click",e=>(gDesigner.stats("login-signup_create-account_terms-of-use"),gContainer.openExternalLink(e,"https://www.corel.com/en/terms-of-use"),!1))).append($("<span></span>").text("&")).append($("<span></span>").addClass("link").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.privacy-policy"))).on("click",e=>(gDesigner.stats("login-signup_create-account_privacy-policy"),gContainer.openExternalLink(e,"https://www.corel.com/en/corel-privacy-policy"),!1)))).appendTo(u),$("<label></label>").append($("<input>").attr("type","checkbox").attr("data-property","newsletter").prop("checked",!1)).on("change",e=>{gDesigner.stats("login-signup_create-account_subscribe",$(e.target).is(":checked"))}).append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.newsletter")))).appendTo(u);let f=await o.gApi.recaptchaKey();if(p){let e=$(grecaptchaWidget);this._recaptchaWidget=grecaptcha.render(e[0],{sitekey:f,callback:g,size:"invisible"})}$("<button></button>").attr("type","submit").addClass("sign-in").append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.sign-up-now")))).addClass("g-disabled").prop("disabled",!0).appendTo(u),gContainer.getRuntime()!==r.Runtime.Chrome&&($("<div></div>").addClass("sep").append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.or")))).appendTo(n),$("<div></div>").addClass("oauth-buttons").append(this._createFacebookButton(new i.GLocaleKey("GLoginDialog","text.sign-facebook"))).append(this._createGoogleButton(new i.GLocaleKey("GLoginDialog","text.sign-google"))).appendTo(n));let m=$("<span></span>").addClass("link");return gDesigner.getStoreVendor()&&m.text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.continue-without-loggin-in"))).on("click",()=>{this.close(),this._callback(null)}),$("<footer></footer>").append(m).append(m).appendTo(e),e},c.prototype._buildResetPassword=function(){let e=$("<div></div>").addClass("panel "+c.Forms.ResetPassword).appendTo(this._container),t=$("<div></div>").addClass("header").appendTo(e);$("<div></div>").addClass("logo").appendTo(t),$("<div></div>").addClass("text").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.reset-password-header-title"))).appendTo(t);let n=$("<div></div>").addClass("body").appendTo(e);$("<div></div>").addClass("title").addClass("simple").append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.reset-password-title")))).appendTo(n);let a=$("<div></div>").addClass("message").append($("<span></span>")).appendTo(n);const s=this._createMessageHandler(a);let l=$("<form></form>").attr("id","reset-password-form").appendTo(n);return l.on("submit",e=>{gDesigner.stats("login-signup_forgot-password_send-request"),s(""),e.preventDefault();const t=l.find('input[data-property="email"]').val(),n=location.href;let i,a;if(gContainer.getRuntime()===r.Runtime.Electron){const e=gContainer.getPlatform();"darwin"!==e&&"win32"!==e||(i="designer://"),a=gDesigner.getAssetsURL()}else a=location.origin;return o.gApi.resetPassword({email:t,redirect:n,appUrl:i,webUrl:a}).then(e=>{s(e&&e.message,"info")}).catch(e=>this._handlerError(e,s)),!1}),$("<label>").addClass("label").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.sign-in-login"))).appendTo(l),$("<input>").attr("type","email").attr("data-property","email").attr("autofocus",!0).attr("required",!0).attr("title",i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.placeholder-reset-password-email"))).appendTo(l),$("<div>").addClass("login-button-row").append($("<span></span>").addClass("link").text("‹ "+i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.back-sign-in"))).on("click",()=>{gDesigner.stats("login-signup_forgot-password_back-to-login"),this._activatePanel(c.Forms.SignIn)})).append($("<button></button>").attr("type","submit").append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.reset-password-send"))))).appendTo(l),e},c.prototype._buildThanksSignup=function(e){let t=$("<div></div>").addClass("panel "+c.Forms.Thanks).appendTo(this._container),n=$("<div></div>").addClass("header").appendTo(t);$("<div></div>").addClass("logo").appendTo(n),$("<div></div>").addClass("text").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.login-dialog-title"))).appendTo(n);let o=$("<div></div>").addClass("body").appendTo(t);return $("<div></div>").addClass("title").append($("<span></span>").html(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.sign-up-thanks")).replace("%email",e.getEmail()))).appendTo(o),$("<button></button>").append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.ok")))).on("click",this.close.bind(this)).appendTo(o),t},c.prototype._createMessageHandler=function(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";e.removeClass("error info show"),t&&e.addClass("show").addClass(n).find("span").text(t)}},c.prototype._activatePanel=function(e){this._activePanel=e,this._container.find(".panel.g-active").removeClass("g-active"),this._container.find(".panel."+e).addClass("g-active")},c.prototype._oauth=function(e,t){o.gApi.popup("/auth/"+e).then(e=>{this.close(),this._callback(e)}).catch(e=>this._handlerError(e,t))},c.prototype._handlerError=function(e,t){t(e&&e.message||e&&e.errors.toString()||"")},c.prototype._createPasswordInput=function(){let e=$("<div></div>").addClass("input-field"),t=$("<input>").attr("type","password").attr("required",!0).attr("data-property","password").appendTo(e);return $("<span></span>").addClass("icon").addClass("gravit-icon-hide").on("click",e=>{$(e.target).closest("span").toggleClass("gravit-icon-display gravit-icon-hide").hasClass("gravit-icon-hide")?t.attr("type","password"):t.attr("type","text")}).appendTo(e),e},c.prototype._getStatMappedForm=function(){let e=null;switch(this._activePanel){case c.Forms.SignIn:e="login";break;case c.Forms.SignUp:e="create-account";break;case c.Forms.ResetPassword:e="forgot-password";break;case c.Forms.Thanks:e="account-created";break;default:e="login"}return e},c.prototype.open=function(){gDesigner.isOfflineAsync().then(e=>{e?s.alert(i.GLocale.get(new i.GLocaleKey("GLoginDialog","text.you-are-offline"))):this._dialog.gDialog("open",!1)})},c.prototype.close=function(){this._dialog.gDialog("close")},e.exports=c},function(e,t,n){"use strict";n(3);var o=n(574);const{isUTS:i,UTStoCDA:a}=n(1072);function r(e,t,n,r){if(!t)throw new o("GCloudAnnotations: no cloud annotations id");if(!e)throw new o("GCloudAnnotations: empty cloud annotations result",t);if(null===e.annotationsCollection&&(e.annotationsCollection=[]),!e.annotationsCollection||!i(e.annotationsCollection)&&!(e.annotationsCollection instanceof Array))throw new o("GCloudAnnotations: no annotationsCollection inside cloud annotations",t);if(!e.lastUpdateTime&&0!==e.lastUpdateTime)throw new o("GCloudAnnotations: no lastUpdateTime inside cloud annotations",t);this.annotationsCollection=e.annotationsCollection,i(this.annotationsCollection)?(this.annotationsCollection=a(this.annotationsCollection),r&&(r.hasUTS=!0)):r&&(r.hasUTS=!1),this.lastUpdateTime=new Date(e.lastUpdateTime).getTime(),this.cid=t,n&&(this.accessToken=n)}r.prototype.annotationsCollection=null,r.prototype.lastUpdateTime=null,r.prototype.cid=null,r.prototype.accessToken=null,r.prototype.toString=function(){return"[GCloudAnnotations]"},e.exports=r},,,,function(e,t,n){"use strict";n(7);var o=n(9);const i=n(278),a=n(825);e.exports=class{constructor(){this._isListening=!1}async checkLicense(){let e;if(gDesigner.isOffline())e=a.newOfflineLicense();else try{e=a.newLicense(await o.gApi.license.get())}catch(t){e=a.newDefaultLicense(),console.info("CheckLicense","exception",t)}this._setApplicationLicense(e)}async _listenLicense(){if(!this._isListening)try{if(!gDesigner.isOffline()){await gDesigner.getUser()&&!gDesigner.isAnonymous()&&(o.gApi.license.listen(e=>{this._setApplicationLicense(a.newLicense(e))}),this._isListening=!0)}}catch(e){console.info("LicenseChanged","exception",e)}}_setApplicationLicense(e){gDesigner.setLicense(e)}async start(){gDesigner.addEventListener(i,this._userLoggedEvent,this),$(window).on("online",this.checkLicense.bind(this)),$(window).on("offline",this.checkLicense.bind(this));try{await this.checkLicense()}catch(e){console.error(e)}try{this._listenLicense()}catch(e){console.error(e)}setInterval(this.checkLicense.bind(this),o.DateAPI.daysToMilliseconds(1))}_userLoggedEvent(){this.checkLicense(),this._listenLicense()}}},function(e,t,n){"use strict";var o=n(9);class i extends o.License{isExpired(e){return super.isExpired(e||gDesigner.now())}isSpecialPriceExpired(e){return super.isSpecialPriceExpired(e||gDesigner.now())}isOfflinePeriodExpired(e){return super.isOfflinePeriodExpired(e||gDesigner.now())}}e.exports=i},function(e,t,n){"use strict";n(7);var o=n(1),i=n(111);e.exports=function(e){e.CommercialProduct=function(t,n,o,i){e.Item.call(this,t,n,o,i)},o.GObject.inherit(e.CommercialProduct,e.Item),e.CommercialProduct.prototype.read=function(e,t,n){i.loadDesignData(this._id,!1).then(t=>{e(t.data)}).catch(t)},e.CommercialProduct.prototype.getPrice=async function(){throw Error("Not implemented")},e.CommercialProduct.prototype.getFormattedPrice=async function(){throw Error("Not implemented")}}},function(e,t,n){"use strict";function o(e,t){null!=e?o.Type.hasOwnProperty(e)?this.errCode=o.Type[e]:this.errCode=o.Type.UnknownError:null!=t&&t>0&&t<=o.Type.UnknownError&&(this.errCode=t)}o.Type={MaxBitmapDim:1,FacingPages:2,OddEvenLayers:3,OtherClientErr:4,TooBigFileSize:5,NoImages:6,UnknownError:7},o.MaxFileSize=471859200,o.prototype.errCode=null,e.exports=o},function(e,t,n){"use strict";var o,i=n(765),a=n(23),r=n(25),s=n(272),l=n(541),c=n(1083),d=n(1084),u=n(55),p=n(79).enforce,g=n(20),h=n(437),f=Object,m=Array.isArray,y=f.isExtensible,v=f.isFrozen,_=f.isSealed,b=f.freeze,w=f.seal,C=!a.ActiveXObject&&"ActiveXObject"in a,x=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},S=c("WeakMap",x,d),E=S.prototype,A=r(E.set);if(h)if(C){o=d.getConstructor(x,"WeakMap",!0),l.enable();var T=r(E.delete),G=r(E.has),P=r(E.get);s(E,{delete:function(e){if(u(e)&&!y(e)){var t=p(this);return t.frozen||(t.frozen=new o),T(this,e)||t.frozen.delete(e)}return T(this,e)},has:function(e){if(u(e)&&!y(e)){var t=p(this);return t.frozen||(t.frozen=new o),G(this,e)||t.frozen.has(e)}return G(this,e)},get:function(e){if(u(e)&&!y(e)){var t=p(this);return t.frozen||(t.frozen=new o),G(this,e)?P(this,e):t.frozen.get(e)}return P(this,e)},set:function(e,t){if(u(e)&&!y(e)){var n=p(this);n.frozen||(n.frozen=new o),G(this,e)?A(this,e,t):n.frozen.set(e,t)}else A(this,e,t);return this}})}else i&&g((function(){var e=b([]);return A(new S,e,1),!v(e)}))&&s(E,{set:function(e,t){var n;return m(e)&&(v(e)?n=b:_(e)&&(n=w)),A(this,e,t),n&&n(e),this}})},function(e,t,n){"use strict";var o=n(108),i=n(172),a=n(228).f,r=n(145),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"Window"===o(e)?function(e){try{return a(e)}catch(e){return r(s)}}(e):a(i(e))}},function(e,t,n){"use strict";var o=n(20),i=n(55),a=n(108),r=n(1082),s=Object.isExtensible,l=o((function(){s(1)}));e.exports=l||r?function(e){return!!i(e)&&((!r||"ArrayBuffer"!==a(e))&&(!s||s(e)))}:s},function(e,t,n){"use strict";var o=n(20);e.exports=o((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},function(e,t,n){"use strict";var o=n(30),i=n(23),a=n(25),r=n(261),s=n(72),l=n(541),c=n(262),d=n(153),u=n(31),p=n(112),g=n(55),h=n(20),f=n(328),m=n(126),y=n(274);e.exports=function(e,t,n){var v=-1!==e.indexOf("Map"),_=-1!==e.indexOf("Weak"),b=v?"set":"add",w=i[e],C=w&&w.prototype,x=w,S={},E=function(e){var t=a(C[e]);s(C,e,"add"===e?function(e){return t(this,0===e?0:e),this}:"delete"===e?function(e){return!(_&&!g(e))&&t(this,0===e?0:e)}:"get"===e?function(e){return _&&!g(e)?void 0:t(this,0===e?0:e)}:"has"===e?function(e){return!(_&&!g(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(r(e,!u(w)||!(_||C.forEach&&!h((function(){(new w).entries().next()})))))x=n.getConstructor(t,e,v,b),l.enable();else if(r(e,!0)){var A=new x,T=A[b](_?{}:-0,1)!==A,G=h((function(){A.has(1)})),P=f((function(e){new w(e)})),D=!_&&h((function(){for(var e=new w,t=5;t--;)e[b](t,t);return!e.has(-0)}));P||((x=t((function(e,t){d(e,C);var n=y(new w,e,x);return p(t)||c(t,n[b],{that:n,AS_ENTRIES:v}),n}))).prototype=C,C.constructor=x),(G||D)&&(E("delete"),E("has"),v&&E("get")),(D||T)&&E(b),_&&C.clear&&delete C.clear}return S[e]=x,o({global:!0,constructor:!0,forced:x!==w},S),m(x,e),_||n.setStrong(x,e,v),x}},function(e,t,n){"use strict";var o=n(25),i=n(272),a=n(541).getWeakData,r=n(153),s=n(49),l=n(112),c=n(55),d=n(262),u=n(334),p=n(58),g=n(79),h=g.set,f=g.getterFor,m=u.find,y=u.findIndex,v=o([].splice),_=0,b=function(e){return e.frozen||(e.frozen=new w)},w=function(){this.entries=[]},C=function(e,t){return m(e.entries,(function(e){return e[0]===t}))};w.prototype={get:function(e){var t=C(this,e);if(t)return t[1]},has:function(e){return!!C(this,e)},set:function(e,t){var n=C(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=y(this.entries,(function(t){return t[0]===e}));return~t&&v(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var u=e((function(e,i){r(e,g),h(e,{type:t,id:_++,frozen:void 0}),l(i)||d(i,e[o],{that:e,AS_ENTRIES:n})})),g=u.prototype,m=f(t),y=function(e,t,n){var o=m(e),i=a(s(t),!0);return!0===i?b(o).set(t,n):i[o.id]=n,e};return i(g,{delete:function(e){var t=m(this);if(!c(e))return!1;var n=a(e);return!0===n?b(t).delete(e):n&&p(n,t.id)&&delete n[t.id]},has:function(e){var t=m(this);if(!c(e))return!1;var n=a(e);return!0===n?b(t).has(e):n&&p(n,t.id)}}),i(g,n?{get:function(e){var t=m(this);if(c(e)){var n=a(e);return!0===n?b(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return y(this,e,t)}}:{add:function(e){return y(this,e,!0)}}),u}}},function(t,n,o){"use strict";o(89),o(51),o(18),o(138);var i=function(){this.interval=1e3,this.maxInterval=6e4};i.prototype.retry=function(e){setTimeout(e,this.interval),this.interval=this.nextInterval_()},i.prototype.reset=function(){this.interval=1e3},i.prototype.nextInterval_=function(){var e=2*this.interval+this.getRandomInt_(0,1e3);return Math.min(e,this.maxInterval)},i.prototype.getRandomInt_=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)};var a=function(e){var t=function(){};if(this.file=e.file,this.contentType=e.contentType||this.file.type||"application/octet-stream",this.metadata=e.metadata||{name:this.file.name,mimeType:this.contentType},this.token=e.token,this.onComplete=e.onComplete||t,this.onProgress=e.onProgress||t,this.onError=e.onError||t,this.offset=e.offset||0,this.chunkSize=e.chunkSize||0,this.retryHandler=new i,this.url=e.url,!this.url){var n=e.params||{};n.uploadType="resumable",this.url=this.buildUrl_(e.fileId,n,e.baseUrl)}this.httpMethod=e.fileId?"PATCH":"POST"};a.prototype.upload=function(){var e=new XMLHttpRequest;e.open(this.httpMethod,this.url,!0),e.setRequestHeader("Authorization","Bearer "+this.token),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("X-Upload-Content-Length",this.file.size),e.setRequestHeader("X-Upload-Content-Type",this.contentType),e.onload=function(){if(e.status<400){var t=e.getResponseHeader("Location");this.url=t,this.sendFile_()}else this.onUploadError_(e)}.bind(this),e.onerror=this.onUploadError_.bind(this,e),e.send(JSON.stringify(this.metadata))},a.prototype.sendFile_=function(){var e=this.file,t=this.file.size;(this.offset||this.chunkSize)&&(this.chunkSize&&(t=Math.min(this.offset+this.chunkSize,this.file.size)),e=e.slice(this.offset,t));var n=new XMLHttpRequest;n.open("PUT",this.url,!0),n.setRequestHeader("Content-Type",this.contentType),n.setRequestHeader("Content-Range","bytes "+this.offset+"-"+(t-1)+"/"+this.file.size),n.setRequestHeader("X-Upload-Content-Type",this.file.type),n.upload&&n.upload.addEventListener("progress",this.onProgress),n.onload=this.onContentUploadSuccess_.bind(this,n),n.onerror=this.onContentUploadError_.bind(this,n),n.send(e)},a.prototype.resume_=function(){var e=new XMLHttpRequest;e.open("PUT",this.url,!0),e.setRequestHeader("Content-Range","bytes */"+this.file.size),e.setRequestHeader("X-Upload-Content-Type",this.file.type),e.upload&&e.upload.addEventListener("progress",this.onProgress),e.onload=this.onContentUploadSuccess_.bind(this,e),e.onerror=this.onContentUploadError_.bind(this,e),e.send()},a.prototype.extractRange_=function(e){var t=e.getResponseHeader("Range");t&&(this.offset=parseInt(t.match(/\d+/g).pop(),10)+1)},a.prototype.onContentUploadSuccess_=function(t){200==t.status||201==t.status?this.onComplete(t.response):308==t.status?(this.extractRange_(t),this.retryHandler.reset(),this.sendFile_()):this.onContentUploadError_(e)},a.prototype.onContentUploadError_=function(e){e.status&&e.status<500?this.onError(e.response):this.retryHandler.retry(this.resume_.bind(this))},a.prototype.onUploadError_=function(e){this.onError(e.response)},a.prototype.buildQuery_=function(e){return e=e||{},Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")},a.prototype.buildUrl_=function(e,t,n){var o=n||"https://www.googleapis.com/upload/drive/v3/files/";e&&(o+=e);var i=this.buildQuery_(t);return i&&(o+="?"+i),o},t.exports=a},,,,,,function(e,t,n){(function(t,n,o){!function(t){e.exports=t()}((function(){var e,i,a;return function e(t,n,o){function i(r,s){if(!n[r]){if(!t[r]){var l="function"==typeof _dereq_&&_dereq_;if(!s&&l)return l(r,!0);if(a)return a(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[r]={exports:{}};t[r][0].call(d.exports,(function(e){var n=t[r][1][e];return i(n||e)}),d,d.exports,e,t,n,o)}return n[r].exports}for(var a="function"==typeof _dereq_&&_dereq_,r=0;r<o.length;r++)i(o[r]);return i}({1:[function(e,t,n){"use strict";t.exports=function(e){var t=e._SomePromiseArray;function n(e){var n=new t(e),o=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),o}e.any=function(e){return n(e)},e.prototype.any=function(){return n(this)}}},{}],2:[function(e,t,n){"use strict";var o;try{throw new Error}catch(e){o=e}var i=e("./schedule.js"),a=e("./queue.js"),r=e("./util.js");function s(){this._isTickUsed=!1,this._lateQueue=new a(16),this._normalQueue=new a(16),this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=i.isStatic?i(this.drainQueues):i}function l(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function c(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function d(e){this._normalQueue._pushOne(e),this._queueTick()}s.prototype.disableTrampolineIfNecessary=function(){r.hasDevTools&&(this._trampolineEnabled=!1)},s.prototype.enableTrampoline=function(){this._trampolineEnabled||(this._trampolineEnabled=!0,this._schedule=function(e){setTimeout(e,0)})},s.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0},s.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout((function(){e(t)}),0);else try{this._schedule((function(){e(t)}))}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}},r.hasDevTools?(i.isStatic&&(i=function(e){setTimeout(e,0)}),s.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?l.call(this,e,t,n):this._schedule((function(){setTimeout((function(){e.call(t,n)}),100)}))},s.prototype.invoke=function(e,t,n){this._trampolineEnabled?c.call(this,e,t,n):this._schedule((function(){e.call(t,n)}))},s.prototype.settlePromises=function(e){this._trampolineEnabled?d.call(this,e):this._schedule((function(){e._settlePromises()}))}):(s.prototype.invokeLater=l,s.prototype.invoke=c,s.prototype.settlePromises=d),s.prototype.invokeFirst=function(e,t,n){this._normalQueue.unshift(e,t,n),this._queueTick()},s.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var n=e.shift(),o=e.shift();t.call(n,o)}else t._settlePromises()}},s.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},s.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},s.prototype._reset=function(){this._isTickUsed=!1},t.exports=new s,t.exports.firstLineError=o},{"./queue.js":28,"./schedule.js":31,"./util.js":38}],3:[function(e,t,n){"use strict";t.exports=function(e,t,n){var o=function(e,t){this._reject(t)},i=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(o,o,null,this,e)},a=function(e,t){this._isPending()&&this._resolveCallback(t.target)},r=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(o){var s=n(o),l=new e(t);l._propagateFrom(this,1);var c=this._target();if(l._setBoundTo(s),s instanceof e){var d={promiseRejectionQueued:!1,promise:l,target:c,bindingPromise:s};c._then(t,i,l._progress,l,d),s._then(a,r,l._progress,l,d)}else l._resolveCallback(c);return l},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=131072|this._bitField,this._boundTo=e):this._bitField=-131073&this._bitField},e.prototype._isBound=function(){return 131072==(131072&this._bitField)},e.bind=function(o,i){var a=n(o),r=new e(t);return r._setBoundTo(a),a instanceof e?a._then((function(){r._resolveCallback(i)}),r._reject,r._progress,r,null):r._resolveCallback(i),r}}},{}],4:[function(e,t,n){"use strict";var o;"undefined"!=typeof Promise&&(o=Promise);var i=e("./promise.js")();i.noConflict=function(){try{Promise===i&&(Promise=o)}catch(e){}return i},t.exports=i},{"./promise.js":23}],5:[function(e,t,n){"use strict";var o=Object.create;if(o){var i=o(null),a=o(null);i[" size"]=a[" size"]=0}t.exports=function(t){var n=e("./util.js"),o=n.canEvaluate;n.isIdentifier;function i(e){return function(e,o){var i;if(null!=e&&(i=e[o]),"function"!=typeof i){var a="Object "+n.classString(e)+" has no method '"+n.toString(o)+"'";throw new t.TypeError(a)}return i}(e,this.pop()).apply(e,this)}function a(e){return e[this]}function r(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}t.prototype.call=function(e){for(var t=arguments.length,n=new Array(t-1),o=1;o<t;++o)n[o-1]=arguments[o];return n.push(e),this._then(i,void 0,void 0,n,void 0)},t.prototype.get=function(e){var t;if("number"==typeof e)t=r;else if(o){var n=(void 0)(e);t=null!==n?n:a}else t=a;return this._then(t,void 0,void 0,e,void 0)}}},{"./util.js":38}],6:[function(e,t,n){"use strict";t.exports=function(t){var n=e("./errors.js"),o=e("./async.js"),i=n.CancellationError;t.prototype._cancel=function(e){if(!this.isCancellable())return this;for(var t,n=this;void 0!==(t=n._cancellationParent)&&t.isCancellable();)n=t;this._unsetCancellable(),n._target()._rejectCallback(e,!1,!0)},t.prototype.cancel=function(e){return this.isCancellable()?(void 0===e&&(e=new i),o.invokeLater(this._cancel,this,e),this):this},t.prototype.cancellable=function(){return this._cancellable()||(o.enableTrampoline(),this._setCancellable(),this._cancellationParent=void 0),this},t.prototype.uncancellable=function(){var e=this.then();return e._unsetCancellable(),e},t.prototype.fork=function(e,t,n){var o=this._then(e,t,n,void 0,void 0);return o._setCancellable(),o._cancellationParent=void 0,o}}},{"./async.js":2,"./errors.js":13}],7:[function(e,n,o){"use strict";n.exports=function(){var n,o=e("./async.js"),i=e("./util.js"),a=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/,r=null,s=null,l=!1;function c(e){this._parent=e;var t=this._length=1+(void 0===e?0:e._length);m(this,c),t>32&&this.uncycle()}function d(e){for(var t=[],n=0;n<e.length;++n){var o=e[n],i=r.test(o)||"    (No stack trace)"===o,a=i&&p(o);i&&!a&&(l&&" "!==o.charAt(0)&&(o="    "+o),t.push(o))}return t}function u(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e.toString();if(/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+function(e){if(e.length<41)return e;return e.substr(0,38)+"..."}(t)+">, no stack trace)"}i.inherits(c,Error),c.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},o=0,i=this;void 0!==i;++o)t.push(i),i=i._parent;for(o=(e=this._length=o)-1;o>=0;--o){var a=t[o].stack;void 0===n[a]&&(n[a]=o)}for(o=0;o<e;++o){var r=n[t[o].stack];if(void 0!==r&&r!==o){r>0&&(t[r-1]._parent=void 0,t[r-1]._length=1),t[o]._parent=void 0,t[o]._length=1;var s=o>0?t[o-1]:this;r<e-1?(s._parent=t[r+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var l=s._length+1,c=o-2;c>=0;--c)t[c]._length=l,l++;return}}}},c.prototype.parent=function(){return this._parent},c.prototype.hasParent=function(){return void 0!==this._parent},c.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=c.parseStackAndMessage(e),n=t.message,o=[t.stack],a=this;void 0!==a;)o.push(d(a.stack.split("\n"))),a=a._parent;!function(e){for(var t=e[0],n=1;n<e.length;++n){for(var o=e[n],i=t.length-1,a=t[i],r=-1,s=o.length-1;s>=0;--s)if(o[s]===a){r=s;break}for(s=r;s>=0;--s){var l=o[s];if(t[i]!==l)break;t.pop(),i--}t=o}}(o),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(o),i.notEnumerableProp(e,"stack",function(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");n<t.length&&(t[n]=t[n].join("\n"));return e+"\n"+t.join("\n")}(n,o)),i.notEnumerableProp(e,"__stackCleaned__",!0)}},c.parseStackAndMessage=function(e){var t=e.stack;return{message:e.toString(),stack:d(t="string"==typeof t&&t.length>0?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var o=t[n];if("    (No stack trace)"===o||r.test(o))break}return n>0&&(t=t.slice(n)),t}(e):["    (No stack trace)"])}},c.formatAndLogError=function(e,t){if("undefined"!=typeof console){var o;if("object"==typeof e||"function"==typeof e){var i=e.stack;o=t+s(i,e)}else o=t+String(e);"function"==typeof n?n(o):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(o)}},c.unhandledRejection=function(e){c.formatAndLogError(e,"^--- With additional stack trace: ")},c.isSupported=function(){return"function"==typeof m},c.fireRejectionEvent=function(e,t,n,i){var a=!1;try{"function"==typeof t&&(a=!0,"rejectionHandled"===e?t(i):t(n,i))}catch(e){o.throwLater(e)}var r=!1;try{r=y(e,n,i)}catch(e){r=!0,o.throwLater(e)}var s=!1;if(f)try{s=f(e.toLowerCase(),{reason:n,promise:i})}catch(e){s=!0,o.throwLater(e)}r||a||s||"unhandledRejection"!==e||c.formatAndLogError(n,"Unhandled rejection ")};var p=function(){return!1},g=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function h(e){var t=e.match(g);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}c.setBounds=function(e,t){if(c.isSupported()){for(var n,o,i=e.stack.split("\n"),r=t.stack.split("\n"),s=-1,l=-1,d=0;d<i.length;++d){if(u=h(i[d])){n=u.fileName,s=u.line;break}}for(d=0;d<r.length;++d){var u;if(u=h(r[d])){o=u.fileName,l=u.line;break}}s<0||l<0||!n||!o||n!==o||s>=l||(p=function(e){if(a.test(e))return!0;var t=h(e);return!!(t&&t.fileName===n&&s<=t.line&&t.line<=l)})}};var f,m=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():u(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit=Error.stackTraceLimit+6,r=e,s=t;var n=Error.captureStackTrace;return p=function(e){return a.test(e)},function(e,t){Error.stackTraceLimit=Error.stackTraceLimit+6,n(e,t),Error.stackTraceLimit=Error.stackTraceLimit-6}}var o,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return r=/@/,s=t,l=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){o="stack"in e}return!("stack"in i)&&o&&"number"==typeof Error.stackTraceLimit?(r=e,s=t,function(e){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit=Error.stackTraceLimit-6}):(s=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?u(t):t.toString()},null)}(),y=function(){if(i.isNode)return function(e,n,o){return"rejectionHandled"===e?t.emit(e,o):t.emit(e,n,o)};var e=!1,n=!0;try{var o=new self.CustomEvent("test");e=o instanceof CustomEvent}catch(e){}if(!e)try{var a=document.createEvent("CustomEvent");a.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(a)}catch(e){n=!1}n&&(f=function(t,n){var o;return e?o=new self.CustomEvent(t,{detail:n,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(o=document.createEvent("CustomEvent")).initCustomEvent(t,!1,!0,n),!!o&&!self.dispatchEvent(o)});var r={};return r.unhandledRejection="onunhandledRejection".toLowerCase(),r.rejectionHandled="onrejectionHandled".toLowerCase(),function(e,t,n){var o=r[e],i=self[o];return!!i&&("rejectionHandled"===e?i.call(self,n):i.call(self,t,n),!0)}}();return"undefined"!=typeof console&&void 0!==console.warn&&(n=function(e){console.warn(e)},i.isNode&&t.stderr.isTTY?n=function(e){t.stderr.write("[31m"+e+"[39m\n")}:i.isNode||"string"!=typeof(new Error).stack||(n=function(e){console.warn("%c"+e,"color: red")})),c}},{"./async.js":2,"./util.js":38}],8:[function(e,t,n){"use strict";t.exports=function(t){var n=e("./util.js"),o=e("./errors.js"),i=n.tryCatch,a=n.errorObj,r=e("./es5.js").keys,s=o.TypeError;function l(e,t,n){this._instances=e,this._callback=t,this._promise=n}function c(e,t){var n={},o=i(e).call(n,t);return o===a?o:r(n).length?(a.e=new s("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"),a):o}return l.prototype.doFilter=function(e){for(var n=this._callback,o=this._promise._boundValue(),r=0,s=this._instances.length;r<s;++r){var l=this._instances[r],d=l===Error||null!=l&&l.prototype instanceof Error;if(d&&e instanceof l)return(u=i(n).call(o,e))===a?(t.e=u.e,t):u;if("function"==typeof l&&!d){var u,p=c(l,e);if(p===a){e=a.e;break}if(p)return(u=i(n).call(o,e))===a?(t.e=u.e,t):u}}return t.e=e,t},l}},{"./errors.js":13,"./es5.js":14,"./util.js":38}],9:[function(e,t,n){"use strict";t.exports=function(e,t,n){var o=[];function i(){this._trace=new t(a())}function a(){var e=o.length-1;if(e>=0)return o[e]}return i.prototype._pushContext=function(){n()&&void 0!==this._trace&&o.push(this._trace)},i.prototype._popContext=function(){n()&&void 0!==this._trace&&o.pop()},e.prototype._peekContext=a,e.prototype._pushContext=i.prototype._pushContext,e.prototype._popContext=i.prototype._popContext,function(){if(n())return new i}}},{}],10:[function(e,t,n){"use strict";t.exports=function(t,n){var o,i,a=t._getDomain,r=e("./async.js"),s=e("./errors.js").Warning,l=e("./util.js"),c=l.canAttachTrace,d=l.isNode&&(!!Object({NODE_ENV:"production",APP_VERSION:"3.14.3",APP_VERSION_FRIENDLY:"i015.3",IS_BETA:!1,BUILD_NUM:"8500",COMMIT_SHA:"909c789fc3610bd90e44795045e4885666443254",STORE_VENDOR:"",IS_COREL:!1,IS_TRUNK:!1,IS_PROD:!0}).BLUEBIRD_DEBUG||!1);return l.isNode&&0==Object({NODE_ENV:"production",APP_VERSION:"3.14.3",APP_VERSION_FRIENDLY:"i015.3",IS_BETA:!1,BUILD_NUM:"8500",COMMIT_SHA:"909c789fc3610bd90e44795045e4885666443254",STORE_VENDOR:"",IS_COREL:!1,IS_TRUNK:!1,IS_PROD:!0}).BLUEBIRD_DEBUG&&(d=!1),d&&r.disableTrampolineIfNecessary(),t.prototype._ignoreRejections=function(){this._unsetRejectionIsUnhandled(),this._bitField=16777216|this._bitField},t.prototype._ensurePossibleRejectionHandled=function(){0==(16777216&this._bitField)&&(this._setRejectionIsUnhandled(),r.invokeLater(this._notifyUnhandledRejection,this,void 0))},t.prototype._notifyUnhandledRejectionIsHandled=function(){n.fireRejectionEvent("rejectionHandled",o,void 0,this)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified(),n.fireRejectionEvent("unhandledRejection",i,e,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},t.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},t.prototype._setCarriedStackTrace=function(e){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=e},t.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},t.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},t.prototype._captureStackTrace=function(){return d&&(this._trace=new n(this._peekContext())),this},t.prototype._attachExtraTrace=function(e,t){if(d&&c(e)){var o=this._trace;if(void 0!==o&&t&&(o=o._parent),void 0!==o)o.attachExtraTrace(e);else if(!e.__stackCleaned__){var i=n.parseStackAndMessage(e);l.notEnumerableProp(e,"stack",i.message+"\n"+i.stack.join("\n")),l.notEnumerableProp(e,"__stackCleaned__",!0)}}},t.prototype._warn=function(e){var t=new s(e),o=this._peekContext();if(o)o.attachExtraTrace(t);else{var i=n.parseStackAndMessage(t);t.stack=i.message+"\n"+i.stack.join("\n")}n.formatAndLogError(t,"")},t.onPossiblyUnhandledRejection=function(e){var t=a();i="function"==typeof e?null===t?e:t.bind(e):void 0},t.onUnhandledRejectionHandled=function(e){var t=a();o="function"==typeof e?null===t?e:t.bind(e):void 0},t.longStackTraces=function(){if(r.haveItemsQueued()&&!1===d)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");(d=n.isSupported())&&r.disableTrampolineIfNecessary()},t.hasLongStackTraces=function(){return d&&n.isSupported()},n.isSupported()||(t.longStackTraces=function(){},d=!1),function(){return d}}},{"./async.js":2,"./errors.js":13,"./util.js":38}],11:[function(e,t,n){"use strict";var o=e("./util.js").isPrimitive;t.exports=function(e){var t=function(){return this},n=function(){throw this},i=function(){},a=function(){throw void 0},r=function(e,t){return 1===t?function(){throw e}:2===t?function(){return e}:void 0};e.prototype.return=e.prototype.thenReturn=function(n){return void 0===n?this.then(i):o(n)?this._then(r(n,2),void 0,void 0,void 0,void 0):(n instanceof e&&n._ignoreRejections(),this._then(t,void 0,void 0,n,void 0))},e.prototype.throw=e.prototype.thenThrow=function(e){return void 0===e?this.then(a):o(e)?this._then(r(e,1),void 0,void 0,void 0,void 0):this._then(n,void 0,void 0,e,void 0)}}},{"./util.js":38}],12:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.reduce;e.prototype.each=function(e){return n(this,e,null,t)},e.each=function(e,o){return n(e,o,null,t)}}},{}],13:[function(e,t,n){"use strict";var o,i,a=e("./es5.js"),r=a.freeze,s=e("./util.js"),l=s.inherits,c=s.notEnumerableProp;function d(e,t){function n(o){if(!(this instanceof n))return new n(o);c(this,"message","string"==typeof o?o:t),c(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return l(n,Error),n}var u=d("Warning","warning"),p=d("CancellationError","cancellation error"),g=d("TimeoutError","timeout error"),h=d("AggregateError","aggregate error");try{o=TypeError,i=RangeError}catch(e){o=d("TypeError","type error"),i=d("RangeError","range error")}for(var f="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),m=0;m<f.length;++m)"function"==typeof Array.prototype[f[m]]&&(h.prototype[f[m]]=Array.prototype[f[m]]);a.defineProperty(h.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),h.prototype.isOperational=!0;var y=0;function v(e){if(!(this instanceof v))return new v(e);c(this,"name","OperationalError"),c(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(c(this,"message",e.message),c(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}h.prototype.toString=function(){var e=Array(4*y+1).join(" "),t="\n"+e+"AggregateError of:\n";y++,e=Array(4*y+1).join(" ");for(var n=0;n<this.length;++n){for(var o=this[n]===this?"[Circular AggregateError]":this[n]+"",i=o.split("\n"),a=0;a<i.length;++a)i[a]=e+i[a];t+=(o=i.join("\n"))+"\n"}return y--,t},l(v,Error);var _=Error.__BluebirdErrorTypes__;_||(_=r({CancellationError:p,TimeoutError:g,OperationalError:v,RejectionError:v,AggregateError:h}),c(Error,"__BluebirdErrorTypes__",_)),t.exports={Error:Error,TypeError:o,RangeError:i,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:u}},{"./es5.js":14,"./util.js":38}],14:[function(e,t,n){var o=function(){"use strict";return void 0===this}();if(o)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:o,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,a={}.toString,r={}.constructor.prototype,s=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t};t.exports={isArray:function(e){try{return"[object Array]"===a.call(e)}catch(e){return!1}},keys:s,names:s,defineProperty:function(e,t,n){return e[t]=n.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return r}},isES5:o,propertyIsWritable:function(){return!0}}}},{}],15:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,o){return n(this,e,o,t)},e.filter=function(e,o,i){return n(e,o,i,t)}}},{}],16:[function(e,t,n){"use strict";t.exports=function(t,n,o){var i=e("./util.js"),a=i.isPrimitive,r=i.thrower;function s(){return this}function l(){throw this}function c(e,t,n){var o,i;return o=a(t)?n?(i=t,function(){return i}):function(e){return function(){throw e}}(t):n?s:l,e._then(o,r,void 0,t,void 0)}function d(e){var i=this.promise,a=this.handler,r=i._isBound()?a.call(i._boundValue()):a();if(void 0!==r){var s=o(r,i);if(s instanceof t)return c(s=s._target(),e,i.isFulfilled())}return i.isRejected()?(n.e=e,n):e}function u(e){var n=this.promise,i=this.handler,a=n._isBound()?i.call(n._boundValue(),e):i(e);if(void 0!==a){var r=o(a,n);if(r instanceof t)return c(r=r._target(),e,!0)}return e}t.prototype._passThroughHandler=function(e,t){if("function"!=typeof e)return this.then();var n={promise:this,handler:e};return this._then(t?d:u,t?d:void 0,void 0,n,void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThroughHandler(e,!0)},t.prototype.tap=function(e){return this._passThroughHandler(e,!1)}}},{"./util.js":38}],17:[function(e,t,n){"use strict";t.exports=function(t,n,o,i){var a=e("./errors.js").TypeError,r=e("./util.js"),s=r.errorObj,l=r.tryCatch,c=[];function d(e,n,i,a){(this._promise=new t(o))._captureStackTrace(),this._stack=a,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(c):c}d.prototype.promise=function(){return this._promise},d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},d.prototype._continue=function(e){if(e===s)return this._promise._rejectCallback(e.e,!1,!0);var n=e.value;if(!0===e.done)this._promise._resolveCallback(n);else{var o=i(n,this._promise);if(!(o instanceof t)&&null===(o=function(e,n,o){for(var a=0;a<n.length;++a){o._pushContext();var r=l(n[a])(e);if(o._popContext(),r===s){o._pushContext();var c=t.reject(s.e);return o._popContext(),c}var d=i(r,o);if(d instanceof t)return d}return null}(o,this._yieldHandlers,this._promise)))return void this._throw(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",n)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o._then(this._next,this._throw,void 0,this,null)}},d.prototype._throw=function(e){this._promise._attachExtraTrace(e),this._promise._pushContext();var t=l(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._next=function(e){this._promise._pushContext();var t=l(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},t.coroutine=function(e,t){if("function"!=typeof e)throw new a("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var n=Object(t).yieldHandler,o=d,i=(new Error).stack;return function(){var t=e.apply(this,arguments),a=new o(void 0,void 0,n,i);return a._generator=t,a._next(void 0),a.promise()}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new a("fn must be a function\n\n    See http://goo.gl/916lJJ\n");c.push(e)},t.spawn=function(e){if("function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var o=new d(e,this),i=o.promise();return o._run(t.spawn),i}}},{"./errors.js":13,"./util.js":38}],18:[function(e,t,n){"use strict";t.exports=function(t,n,o,i){var a=e("./util.js");a.canEvaluate,a.tryCatch,a.errorObj;t.join=function(){var e,t=arguments.length-1;t>0&&"function"==typeof arguments[t]&&(e=arguments[t]);for(var o=arguments.length,i=new Array(o),a=0;a<o;++a)i[a]=arguments[a];e&&i.pop();var r=new n(i).promise();return void 0!==e?r.spread(e):r}}},{"./util.js":38}],19:[function(e,t,n){"use strict";t.exports=function(t,n,o,i,a){var r=t._getDomain,s=e("./async.js"),l=e("./util.js"),c=l.tryCatch,d=l.errorObj,u={},p=[];function g(e,t,n,o){this.constructor$(e),this._promise._captureStackTrace();var i=r();this._callback=null===i?t:i.bind(t),this._preservedValues=o===a?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:p,s.invoke(h,this,void 0)}function h(){this._init$(void 0,-2)}function f(e,t,n,o){var i="object"==typeof n&&null!==n?n.concurrency:0;return new g(e,t,i="number"==typeof i&&isFinite(i)&&i>=1?i:0,o)}l.inherits(g,n),g.prototype._init=function(){},g.prototype._promiseFulfilled=function(e,n){var o=this._values,a=this.length(),r=this._preservedValues,s=this._limit;if(o[n]===u){if(o[n]=e,s>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(s>=1&&this._inFlight>=s)return o[n]=e,void this._queue.push(n);null!==r&&(r[n]=e);var l=this._callback,p=this._promise._boundValue();this._promise._pushContext();var g=c(l).call(p,e,n,a);if(this._promise._popContext(),g===d)return this._reject(g.e);var h=i(g,this._promise);if(h instanceof t){if((h=h._target())._isPending())return s>=1&&this._inFlight++,o[n]=u,h._proxyPromiseArray(this,n);if(!h._isFulfilled())return this._reject(h._reason());g=h._value()}o[n]=g}++this._totalResolved>=a&&(null!==r?this._filter(o,r):this._resolve(o))},g.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var o=e.pop();this._promiseFulfilled(n[o],o)}},g.prototype._filter=function(e,t){for(var n=t.length,o=new Array(n),i=0,a=0;a<n;++a)e[a]&&(o[i++]=t[a]);o.length=i,this._resolve(o)},g.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return"function"!=typeof e?o("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):f(this,e,t,null).promise()},t.map=function(e,t,n,i){return"function"!=typeof t?o("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):f(e,t,n,i).promise()}}},{"./async.js":2,"./util.js":38}],20:[function(e,t,n){"use strict";t.exports=function(t,n,o,i){var a=e("./util.js"),r=a.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return function(){var o=new t(n);o._captureStackTrace(),o._pushContext();var i=r(e).apply(this,arguments);return o._popContext(),o._resolveFromSyncValue(i),o}},t.attempt=t.try=function(e,o,s){if("function"!=typeof e)return i("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var l=new t(n);l._captureStackTrace(),l._pushContext();var c=a.isArray(o)?r(e).apply(s,o):r(e).call(s,o);return l._popContext(),l._resolveFromSyncValue(c),l},t.prototype._resolveFromSyncValue=function(e){e===a.errorObj?this._rejectCallback(e.e,!1,!0):this._resolveCallback(e,!0)}}},{"./util.js":38}],21:[function(e,t,n){"use strict";t.exports=function(t){var n=e("./util.js"),o=e("./async.js"),i=n.tryCatch,a=n.errorObj;function r(e,t){if(!n.isArray(e))return s.call(this,e,t);var r=i(t).apply(this._boundValue(),[null].concat(e));r===a&&o.throwLater(r.e)}function s(e,t){var n=this._boundValue(),r=void 0===e?i(t).call(n,null):i(t).call(n,null,e);r===a&&o.throwLater(r.e)}function l(e,t){if(!e){var n=this._target()._getCarriedStackTrace();n.cause=e,e=n}var r=i(t).call(this._boundValue(),e);r===a&&o.throwLater(r.e)}t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var n=s;void 0!==t&&Object(t).spread&&(n=r),this._then(n,l,void 0,this,e)}return this}}},{"./async.js":2,"./util.js":38}],22:[function(e,t,n){"use strict";t.exports=function(t,n){var o=e("./util.js"),i=e("./async.js"),a=o.tryCatch,r=o.errorObj;t.prototype.progressed=function(e){return this._then(void 0,void 0,e,void 0,void 0)},t.prototype._progress=function(e){this._isFollowingOrFulfilledOrRejected()||this._target()._progressUnchecked(e)},t.prototype._progressHandlerAt=function(e){return 0===e?this._progressHandler0:this[(e<<2)+e-5+2]},t.prototype._doProgressWith=function(e){var n=e.value,i=e.handler,s=e.promise,l=e.receiver,c=a(i).call(l,n);if(c===r){if(null!=c.e&&"StopProgressPropagation"!==c.e.name){var d=o.canAttachTrace(c.e)?c.e:new Error(o.toString(c.e));s._attachExtraTrace(d),s._progress(c.e)}}else c instanceof t?c._then(s._progress,null,null,s,void 0):s._progress(c)},t.prototype._progressUnchecked=function(e){for(var o=this._length(),a=this._progress,r=0;r<o;r++){var s=this._progressHandlerAt(r),l=this._promiseAt(r);if(l instanceof t)"function"==typeof s?i.invoke(this._doProgressWith,this,{handler:s,promise:l,receiver:this._receiverAt(r),value:e}):i.invoke(a,l,e);else{var c=this._receiverAt(r);"function"==typeof s?s.call(c,e,l):c instanceof n&&!c._isResolved()&&c._promiseProgressed(e,l)}}}}},{"./async.js":2,"./util.js":38}],23:[function(e,n,o){"use strict";n.exports=function(){var o,i=function(){return new u("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")},a=function(){return new E.PromiseInspection(this._target())},r=function(e){return E.reject(new u(e))},s=e("./util.js");o=s.isNode?function(){var e=t.domain;return void 0===e&&(e=null),e}:function(){return null},s.notEnumerableProp(E,"_getDomain",o);var l={},c=e("./async.js"),d=e("./errors.js"),u=E.TypeError=d.TypeError;E.RangeError=d.RangeError,E.CancellationError=d.CancellationError,E.TimeoutError=d.TimeoutError,E.OperationalError=d.OperationalError,E.RejectionError=d.OperationalError,E.AggregateError=d.AggregateError;var p=function(){},g={},h={e:null},f=e("./thenables.js")(E,p),m=e("./promise_array.js")(E,p,f,r),y=e("./captured_trace.js")(),v=e("./debuggability.js")(E,y),_=e("./context.js")(E,y,v),b=e("./catch_filter.js")(h),w=e("./promise_resolver.js"),C=w._nodebackForPromise,x=s.errorObj,S=s.tryCatch;function E(e){if("function"!=typeof e)throw new u("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");if(this.constructor!==E)throw new u("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,e!==p&&this._resolveFromResolver(e)}function A(e){var t=new E(p);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._progressHandler0=e,t._promise0=e,t._receiver0=e,t._settledValue=e}return E.prototype.toString=function(){return"[object Promise]"},E.prototype.caught=E.prototype.catch=function(e){var t=arguments.length;if(t>1){var n,o=new Array(t-1),i=0;for(n=0;n<t-1;++n){var a=arguments[n];if("function"!=typeof a)return E.reject(new u("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));o[i++]=a}o.length=i;var r=new b(o,e=arguments[n],this);return this._then(void 0,r.doFilter,void 0,r,void 0)}return this._then(void 0,e,void 0,void 0,void 0)},E.prototype.reflect=function(){return this._then(a,a,void 0,this,void 0)},E.prototype.then=function(e,t,n){if(v()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var o=".then() only accepts functions but was passed: "+s.classString(e);arguments.length>1&&(o+=", "+s.classString(t)),this._warn(o)}return this._then(e,t,n,void 0,void 0)},E.prototype.done=function(e,t,n){this._then(e,t,n,void 0,void 0)._setIsFinal()},E.prototype.spread=function(e,t){return this.all()._then(e,t,void 0,g,void 0)},E.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},E.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},E.prototype.all=function(){return new m(this).promise()},E.prototype.error=function(e){return this.caught(s.originatesFromRejection,e)},E.getNewLibraryCopy=n.exports,E.is=function(e){return e instanceof E},E.fromNode=function(e){var t=new E(p),n=S(e)(C(t));return n===x&&t._rejectCallback(n.e,!0,!0),t},E.all=function(e){return new m(e).promise()},E.defer=E.pending=function(){var e=new E(p);return new w(e)},E.cast=function(e){var t=f(e);if(!(t instanceof E)){var n=t;(t=new E(p))._fulfillUnchecked(n)}return t},E.resolve=E.fulfilled=E.cast,E.reject=E.rejected=function(e){var t=new E(p);return t._captureStackTrace(),t._rejectCallback(e,!0),t},E.setScheduler=function(e){if("function"!=typeof e)throw new u("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var t=c._schedule;return c._schedule=e,t},E.prototype._then=function(e,t,n,i,a){var r=void 0!==a,s=r?a:new E(p);r||(s._propagateFrom(this,5),s._captureStackTrace());var l=this._target();l!==this&&(void 0===i&&(i=this._boundTo),r||s._setIsMigrated());var d=l._addCallbacks(e,t,n,s,i,o());return l._isResolved()&&!l._isSettlePromisesQueued()&&c.invoke(l._settlePromiseAtPostResolution,l,d),s},E.prototype._settlePromiseAtPostResolution=function(e){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(e)},E.prototype._length=function(){return 131071&this._bitField},E.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},E.prototype._isFollowing=function(){return 536870912==(536870912&this._bitField)},E.prototype._setLength=function(e){this._bitField=-131072&this._bitField|131071&e},E.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},E.prototype._setRejected=function(){this._bitField=134217728|this._bitField},E.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},E.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},E.prototype._isFinal=function(){return(33554432&this._bitField)>0},E.prototype._cancellable=function(){return(67108864&this._bitField)>0},E.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},E.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},E.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},E.prototype._unsetIsMigrated=function(){this._bitField=-4194305&this._bitField},E.prototype._isMigrated=function(){return(4194304&this._bitField)>0},E.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[5*e-5+4];if(t!==l)return void 0===t&&this._isBound()?this._boundValue():t},E.prototype._promiseAt=function(e){return 0===e?this._promise0:this[5*e-5+3]},E.prototype._fulfillmentHandlerAt=function(e){return 0===e?this._fulfillmentHandler0:this[5*e-5+0]},E.prototype._rejectionHandlerAt=function(e){return 0===e?this._rejectionHandler0:this[5*e-5+1]},E.prototype._boundValue=function(){var e=this._boundTo;return void 0!==e&&e instanceof E?e.isFulfilled()?e.value():void 0:e},E.prototype._migrateCallbacks=function(e,t){var n=e._fulfillmentHandlerAt(t),o=e._rejectionHandlerAt(t),i=e._progressHandlerAt(t),a=e._promiseAt(t),r=e._receiverAt(t);a instanceof E&&a._setIsMigrated(),void 0===r&&(r=l),this._addCallbacks(n,o,i,a,r,null)},E.prototype._addCallbacks=function(e,t,n,o,i,a){var r=this._length();if(r>=131066&&(r=0,this._setLength(0)),0===r)this._promise0=o,void 0!==i&&(this._receiver0=i),"function"!=typeof e||this._isCarryingStackTrace()||(this._fulfillmentHandler0=null===a?e:a.bind(e)),"function"==typeof t&&(this._rejectionHandler0=null===a?t:a.bind(t)),"function"==typeof n&&(this._progressHandler0=null===a?n:a.bind(n));else{var s=5*r-5;this[s+3]=o,this[s+4]=i,"function"==typeof e&&(this[s+0]=null===a?e:a.bind(e)),"function"==typeof t&&(this[s+1]=null===a?t:a.bind(t)),"function"==typeof n&&(this[s+2]=null===a?n:a.bind(n))}return this._setLength(r+1),r},E.prototype._setProxyHandlers=function(e,t){var n=this._length();if(n>=131066&&(n=0,this._setLength(0)),0===n)this._promise0=t,this._receiver0=e;else{var o=5*n-5;this[o+3]=t,this[o+4]=e}this._setLength(n+1)},E.prototype._proxyPromiseArray=function(e,t){this._setProxyHandlers(e,t)},E.prototype._resolveCallback=function(e,t){if(!this._isFollowingOrFulfilledOrRejected()){if(e===this)return this._rejectCallback(i(),!1,!0);var n=f(e,this);if(!(n instanceof E))return this._fulfill(e);var o=1|(t?4:0);this._propagateFrom(n,o);var a=n._target();if(a._isPending()){for(var r=this._length(),s=0;s<r;++s)a._migrateCallbacks(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(a)}else a._isFulfilled()?this._fulfillUnchecked(a._value()):this._rejectUnchecked(a._reason(),a._getCarriedStackTrace())}},E.prototype._rejectCallback=function(e,t,n){n||s.markAsOriginatingFromRejection(e);var o=s.ensureErrorObject(e),i=o===e;this._attachExtraTrace(o,!!t&&i),this._reject(e,i?void 0:o)},E.prototype._resolveFromResolver=function(e){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,o=S(e)((function(e){null!==t&&(t._resolveCallback(e),t=null)}),(function(e){null!==t&&(t._rejectCallback(e,n),t=null)}));n=!1,this._popContext(),void 0!==o&&o===x&&null!==t&&(t._rejectCallback(o.e,!0,!0),t=null)},E.prototype._settlePromiseFromHandler=function(e,t,n,o){var a;if(!o._isRejected())if(o._pushContext(),a=t!==g||this._isRejected()?S(e).call(t,n):S(e).apply(this._boundValue(),n),o._popContext(),a===x||a===o||a===h){var r=a===o?i():a.e;o._rejectCallback(r,!1,!0)}else o._resolveCallback(a)},E.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},E.prototype._followee=function(){return this._rejectionHandler0},E.prototype._setFollowee=function(e){this._rejectionHandler0=e},E.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},E.prototype._propagateFrom=function(e,t){(1&t)>0&&e._cancellable()&&(this._setCancellable(),this._cancellationParent=e),(4&t)>0&&e._isBound()&&this._setBoundTo(e._boundTo)},E.prototype._fulfill=function(e){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(e)},E.prototype._reject=function(e,t){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(e,t)},E.prototype._settlePromiseAt=function(e){var t=this._promiseAt(e),n=t instanceof E;if(n&&t._isMigrated())return t._unsetIsMigrated(),c.invoke(this._settlePromiseAt,this,e);var o=this._isFulfilled()?this._fulfillmentHandlerAt(e):this._rejectionHandlerAt(e),i=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,a=this._settledValue,r=this._receiverAt(e);this._clearCallbackDataAtIndex(e),"function"==typeof o?n?this._settlePromiseFromHandler(o,r,a,t):o.call(r,a,t):r instanceof m?r._isResolved()||(this._isFulfilled()?r._promiseFulfilled(a,t):r._promiseRejected(a,t)):n&&(this._isFulfilled()?t._fulfill(a):t._reject(a,i)),e>=4&&4==(31&e)&&c.invokeLater(this._setLength,this,0)},E.prototype._clearCallbackDataAtIndex=function(e){if(0===e)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var t=5*e-5;this[t+3]=this[t+4]=this[t+0]=this[t+1]=this[t+2]=void 0}},E.prototype._isSettlePromisesQueued=function(){return-1073741824==(-1073741824&this._bitField)},E.prototype._setSettlePromisesQueued=function(){this._bitField=-1073741824|this._bitField},E.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},E.prototype._queueSettlePromises=function(){c.settlePromises(this),this._setSettlePromisesQueued()},E.prototype._fulfillUnchecked=function(e){if(e===this){var t=i();return this._attachExtraTrace(t),this._rejectUnchecked(t,void 0)}this._setFulfilled(),this._settledValue=e,this._cleanValues(),this._length()>0&&this._queueSettlePromises()},E.prototype._rejectUncheckedCheckError=function(e){var t=s.ensureErrorObject(e);this._rejectUnchecked(e,t===e?void 0:t)},E.prototype._rejectUnchecked=function(e,t){if(e===this){var n=i();return this._attachExtraTrace(n),this._rejectUnchecked(n)}this._setRejected(),this._settledValue=e,this._cleanValues(),this._isFinal()?c.throwLater((function(e){throw"stack"in e&&c.invokeFirst(y.unhandledRejection,void 0,e),e}),void 0===t?e:t):(void 0!==t&&t!==e&&this._setCarriedStackTrace(t),this._length()>0?this._queueSettlePromises():this._ensurePossibleRejectionHandled())},E.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var e=this._length(),t=0;t<e;t++)this._settlePromiseAt(t)},s.notEnumerableProp(E,"_makeSelfResolutionError",i),e("./progress.js")(E,m),e("./method.js")(E,p,f,r),e("./bind.js")(E,p,f),e("./finally.js")(E,h,f),e("./direct_resolve.js")(E),e("./synchronous_inspection.js")(E),e("./join.js")(E,m,f,p),E.version="2.11.0",E.Promise=E,e("./map.js")(E,m,r,f,p),e("./cancel.js")(E),e("./using.js")(E,r,f,_),e("./generators.js")(E,r,p,f),e("./nodeify.js")(E),e("./call_get.js")(E),e("./props.js")(E,m,f,r),e("./race.js")(E,p,f,r),e("./reduce.js")(E,m,r,f,p),e("./settle.js")(E,m),e("./some.js")(E,m,r),e("./promisify.js")(E,p),e("./any.js")(E),e("./each.js")(E,p),e("./timers.js")(E,p),e("./filter.js")(E,p),s.toFastProperties(E),s.toFastProperties(E.prototype),A({a:1}),A({b:2}),A({c:3}),A(1),A((function(){})),A(void 0),A(!1),A(new E(p)),y.setBounds(c.firstLineError,s.lastLineError),E}},{"./any.js":1,"./async.js":2,"./bind.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./context.js":9,"./debuggability.js":10,"./direct_resolve.js":11,"./each.js":12,"./errors.js":13,"./filter.js":15,"./finally.js":16,"./generators.js":17,"./join.js":18,"./map.js":19,"./method.js":20,"./nodeify.js":21,"./progress.js":22,"./promise_array.js":24,"./promise_resolver.js":25,"./promisify.js":26,"./props.js":27,"./race.js":29,"./reduce.js":30,"./settle.js":32,"./some.js":33,"./synchronous_inspection.js":34,"./thenables.js":35,"./timers.js":36,"./using.js":37,"./util.js":38}],24:[function(e,t,n){"use strict";t.exports=function(t,n,o,i){var a=e("./util.js").isArray;function r(e){var o,i=this._promise=new t(n);e instanceof t&&(o=e,i._propagateFrom(o,5)),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return r.prototype.length=function(){return this._length},r.prototype.promise=function(){return this._promise},r.prototype._init=function e(n,r){var s=o(this._values,this._promise);if(s instanceof t){if(s=s._target(),this._values=s,!s._isFulfilled())return s._isPending()?void s._then(e,this._reject,void 0,this,r):void this._reject(s._reason());if(s=s._value(),!a(s)){var l=new t.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(l)}}else if(!a(s))return void this._promise._reject(i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());if(0!==s.length){var c=this.getActualLength(s.length);this._length=c,this._values=this.shouldCopyValues()?new Array(c):this._values;for(var d=this._promise,u=0;u<c;++u){var p=this._isResolved(),g=o(s[u],d);g instanceof t?(g=g._target(),p?g._ignoreRejections():g._isPending()?g._proxyPromiseArray(this,u):g._isFulfilled()?this._promiseFulfilled(g._value(),u):this._promiseRejected(g._reason(),u)):p||this._promiseFulfilled(g,u)}}else-5===r?this._resolveEmptyArray():this._resolve(function(e){switch(e){case-2:return[];case-3:return{}}}(r))},r.prototype._isResolved=function(){return null===this._values},r.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},r.prototype.__hardReject__=r.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1,!0)},r.prototype._promiseProgressed=function(e,t){this._promise._progress({index:t,value:e})},r.prototype._promiseFulfilled=function(e,t){this._values[t]=e,++this._totalResolved>=this._length&&this._resolve(this._values)},r.prototype._promiseRejected=function(e,t){this._totalResolved++,this._reject(e)},r.prototype.shouldCopyValues=function(){return!0},r.prototype.getActualLength=function(e){return e},r}},{"./util.js":38}],25:[function(e,t,n){"use strict";var o=e("./util.js"),i=o.maybeWrapAsError,a=e("./errors.js"),r=a.TimeoutError,s=a.OperationalError,l=o.haveGetters,c=e("./es5.js");var d,u=/^(?:name|message|stack|cause)$/;function p(e){var t;if(function(e){return e instanceof Error&&c.getPrototypeOf(e)===Error.prototype}(e)){(t=new s(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var n=c.keys(e),i=0;i<n.length;++i){var a=n[i];u.test(a)||(t[a]=e[a])}return t}return o.markAsOriginatingFromRejection(e),e}function g(e){return function(t,n){if(null!==e){if(t){var o=p(i(t));e._attachExtraTrace(o),e._reject(o)}else if(arguments.length>2){for(var a=arguments.length,r=new Array(a-1),s=1;s<a;++s)r[s-1]=arguments[s];e._fulfill(r)}else e._fulfill(n);e=null}}}if(d=l?function(e){this.promise=e}:function(e){this.promise=e,this.asCallback=g(e),this.callback=this.asCallback},l){var h={get:function(){return g(this.promise)}};c.defineProperty(d.prototype,"asCallback",h),c.defineProperty(d.prototype,"callback",h)}d._nodebackForPromise=g,d.prototype.toString=function(){return"[object PromiseResolver]"},d.prototype.resolve=d.prototype.fulfill=function(e){if(!(this instanceof d))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._resolveCallback(e)},d.prototype.reject=function(e){if(!(this instanceof d))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._rejectCallback(e)},d.prototype.progress=function(e){if(!(this instanceof d))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._progress(e)},d.prototype.cancel=function(e){this.promise.cancel(e)},d.prototype.timeout=function(){this.reject(new r("timeout"))},d.prototype.isResolved=function(){return this.promise.isResolved()},d.prototype.toJSON=function(){return this.promise.toJSON()},t.exports=d},{"./errors.js":13,"./es5.js":14,"./util.js":38}],26:[function(e,t,n){"use strict";t.exports=function(t,n){var o={},i=e("./util.js"),a=e("./promise_resolver.js")._nodebackForPromise,r=i.withAppended,s=i.maybeWrapAsError,l=i.canEvaluate,c=e("./errors").TypeError,d={__isPromisified__:!0},u=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),p=function(e){return i.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function g(e){return!u.test(e)}function h(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function f(e,t,n){var o=i.getDataPropertyOrDefault(e,t+n,d);return!!o&&h(o)}function m(e,t,n,o){for(var a=i.inheritedDataKeys(e),r=[],s=0;s<a.length;++s){var l=a[s],d=e[l],u=o===p||p(l);"function"!=typeof d||h(d)||f(e,l,t)||!o(l,d,e,u)||r.push(l,d)}return function(e,t,n){for(var o=0;o<e.length;o+=2){var i=e[o];if(n.test(i))for(var a=i.replace(n,""),r=0;r<e.length;r+=2)if(e[r]===a)throw new c("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",t))}}(r,t,n),r}var y=l?void 0:function(e,l,c,d){var u=function(){return this}(),p=e;function g(){var i=l;l===o&&(i=this);var c=new t(n);c._captureStackTrace();var d="string"==typeof p&&this!==u?this[p]:e,g=a(c);try{d.apply(i,r(arguments,g))}catch(e){c._rejectCallback(s(e),!0,!0)}return c}return"string"==typeof p&&(e=d),i.notEnumerableProp(g,"__isPromisified__",!0),g};function v(e,t,n,a){for(var r=new RegExp(t.replace(/([$])/,"\\$")+"$"),s=m(e,t,r,n),l=0,c=s.length;l<c;l+=2){var d=s[l],u=s[l+1],p=d+t;if(a===y)e[p]=y(d,o,d,u,t);else{var g=a(u,(function(){return y(d,o,d,u,t)}));i.notEnumerableProp(g,"__isPromisified__",!0),e[p]=g}}return i.toFastProperties(e),e}function _(e,t){return y(e,t,void 0,e)}t.promisify=function(e,t){if("function"!=typeof e)throw new c("fn must be a function\n\n    See http://goo.gl/916lJJ\n");if(h(e))return e;var n=_(e,arguments.length<2?o:t);return i.copyDescriptors(e,n,g),n},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new c("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");var n=(t=Object(t)).suffix;"string"!=typeof n&&(n="Async");var o=t.filter;"function"!=typeof o&&(o=p);var a=t.promisifier;if("function"!=typeof a&&(a=y),!i.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");for(var r=i.inheritedDataKeys(e),s=0;s<r.length;++s){var l=e[r[s]];"constructor"!==r[s]&&i.isClass(l)&&(v(l.prototype,n,o,a),v(l,n,o,a))}return v(e,n,o,a)}}},{"./errors":13,"./promise_resolver.js":25,"./util.js":38}],27:[function(e,t,n){"use strict";t.exports=function(t,n,o,i){var a=e("./util.js"),r=a.isObject,s=e("./es5.js");function l(e){for(var t=s.keys(e),n=t.length,o=new Array(2*n),i=0;i<n;++i){var a=t[i];o[i]=e[a],o[i+n]=a}this.constructor$(o)}function c(e){var n,a=o(e);return r(a)?(n=a instanceof t?a._then(t.props,void 0,void 0,void 0,void 0):new l(a).promise(),a instanceof t&&n._propagateFrom(a,4),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}a.inherits(l,n),l.prototype._init=function(){this._init$(void 0,-3)},l.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){for(var n={},o=this.length(),i=0,a=this.length();i<a;++i)n[this._values[i+o]]=this._values[i];this._resolve(n)}},l.prototype._promiseProgressed=function(e,t){this._promise._progress({key:this._values[t+this.length()],value:e})},l.prototype.shouldCopyValues=function(){return!1},l.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return c(this)},t.props=function(e){return c(e)}}},{"./es5.js":14,"./util.js":38}],28:[function(e,t,n){"use strict";function o(e){this._capacity=e,this._length=0,this._front=0}o.prototype._willBeOverCapacity=function(e){return this._capacity<e},o.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},o.prototype._unshiftOne=function(e){var t=this._capacity;this._checkCapacity(this.length()+1);var n=(this._front-1&t-1^t)-t;this[n]=e,this._front=n,this._length=this.length()+1},o.prototype.unshift=function(e,t,n){this._unshiftOne(n),this._unshiftOne(t),this._unshiftOne(e)},o.prototype.push=function(e,t,n){var o=this.length()+3;if(this._willBeOverCapacity(o))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+o-3;this._checkCapacity(o);var a=this._capacity-1;this[i+0&a]=e,this[i+1&a]=t,this[i+2&a]=n,this._length=o},o.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},o.prototype.length=function(){return this._length},o.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},o.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,n,o,i){for(var a=0;a<i;++a)n[a+o]=e[a+t],e[a+t]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=o},{}],29:[function(e,t,n){"use strict";t.exports=function(t,n,o,i){var a=e("./util.js").isArray;function r(e,s){var l,c=o(e);if(c instanceof t)return(l=c).then((function(e){return r(e,l)}));if(!a(e))return i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");var d=new t(n);void 0!==s&&d._propagateFrom(s,5);for(var u=d._fulfill,p=d._reject,g=0,h=e.length;g<h;++g){var f=e[g];(void 0!==f||g in e)&&t.cast(f)._then(u,p,void 0,d,null)}return d}t.race=function(e){return r(e,void 0)},t.prototype.race=function(){return r(this,void 0)}}},{"./util.js":38}],30:[function(e,t,n){"use strict";t.exports=function(t,n,o,i,a){var r=t._getDomain,s=e("./async.js"),l=e("./util.js"),c=l.tryCatch,d=l.errorObj;function u(e,n,o,l){this.constructor$(e),this._promise._captureStackTrace(),this._preservedValues=l===a?[]:null,this._zerothIsAccum=void 0===o,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var c=i(o,this._promise),d=!1,u=c instanceof t;u&&((c=c._target())._isPending()?c._proxyPromiseArray(this,-1):c._isFulfilled()?(o=c._value(),this._gotAccum=!0):(this._reject(c._reason()),d=!0)),u||this._zerothIsAccum||(this._gotAccum=!0);var g=r();this._callback=null===g?n:g.bind(n),this._accum=o,d||s.invoke(p,this,void 0)}function p(){this._init$(void 0,-5)}function g(e,t,n,i){return"function"!=typeof t?o("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):new u(e,t,n,i).promise()}l.inherits(u,n),u.prototype._init=function(){},u.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},u.prototype._promiseFulfilled=function(e,n){var o=this._values;o[n]=e;var a,r=this.length(),s=this._preservedValues,l=null!==s,u=this._gotAccum,p=this._valuesPhase;if(!p)for(p=this._valuesPhase=new Array(r),a=0;a<r;++a)p[a]=0;if(a=p[n],0===n&&this._zerothIsAccum?(this._accum=e,this._gotAccum=u=!0,p[n]=0===a?1:2):-1===n?(this._accum=e,this._gotAccum=u=!0):0===a?p[n]=1:(p[n]=2,this._accum=e),u){for(var g,h=this._callback,f=this._promise._boundValue(),m=this._reducingIndex;m<r;++m)if(2!==(a=p[m])){if(1!==a)return;if(e=o[m],this._promise._pushContext(),l?(s.push(e),g=c(h).call(f,e,m,r)):g=c(h).call(f,this._accum,e,m,r),this._promise._popContext(),g===d)return this._reject(g.e);var y=i(g,this._promise);if(y instanceof t){if((y=y._target())._isPending())return p[m]=4,y._proxyPromiseArray(this,m);if(!y._isFulfilled())return this._reject(y._reason());g=y._value()}this._reducingIndex=m+1,this._accum=g}else this._reducingIndex=m+1;this._resolve(l?s:this._accum)}},t.prototype.reduce=function(e,t){return g(this,e,t,null)},t.reduce=function(e,t,n,o){return g(e,t,n,o)}}},{"./async.js":2,"./util.js":38}],31:[function(e,i,a){"use strict";var r,s=e("./util");if(s.isNode&&"undefined"==typeof MutationObserver){var l=n.setImmediate,c=t.nextTick;r=s.isRecentNode?function(e){l.call(n,e)}:function(e){c.call(t,e)}}else"undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?r=void 0!==o?function(e){o(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}:(r=function(e){var t=document.createElement("div");return new MutationObserver(e).observe(t,{attributes:!0}),function(){t.classList.toggle("foo")}}).isStatic=!0;i.exports=r},{"./util":38}],32:[function(e,t,n){"use strict";t.exports=function(t,n){var o=t.PromiseInspection;function i(e){this.constructor$(e)}e("./util.js").inherits(i,n),i.prototype._promiseResolved=function(e,t){this._values[e]=t,++this._totalResolved>=this._length&&this._resolve(this._values)},i.prototype._promiseFulfilled=function(e,t){var n=new o;n._bitField=268435456,n._settledValue=e,this._promiseResolved(t,n)},i.prototype._promiseRejected=function(e,t){var n=new o;n._bitField=134217728,n._settledValue=e,this._promiseResolved(t,n)},t.settle=function(e){return new i(e).promise()},t.prototype.settle=function(){return new i(this).promise()}}},{"./util.js":38}],33:[function(e,t,n){"use strict";t.exports=function(t,n,o){var i=e("./util.js"),a=e("./errors.js").RangeError,r=e("./errors.js").AggregateError,s=i.isArray;function l(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function c(e,t){if((0|t)!==t||t<0)return o("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");var n=new l(e),i=n.promise();return n.setHowMany(t),n.init(),i}i.inherits(l,n),l.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=s(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},l.prototype.init=function(){this._initialized=!0,this._init()},l.prototype.setUnwrap=function(){this._unwrap=!0},l.prototype.howMany=function(){return this._howMany},l.prototype.setHowMany=function(e){this._howMany=e},l.prototype._promiseFulfilled=function(e){this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values))},l.prototype._promiseRejected=function(e){if(this._addRejected(e),this.howMany()>this._canPossiblyFulfill()){for(var t=new r,n=this.length();n<this._values.length;++n)t.push(this._values[n]);this._reject(t)}},l.prototype._fulfilled=function(){return this._totalResolved},l.prototype._rejected=function(){return this._values.length-this.length()},l.prototype._addRejected=function(e){this._values.push(e)},l.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},l.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},l.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new a(t)},l.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return c(e,t)},t.prototype.some=function(e){return c(this,e)},t._SomePromiseArray=l}},{"./errors.js":13,"./util.js":38}],34:[function(e,t,n){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValue=e._settledValue):(this._bitField=0,this._settledValue=void 0)}t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return this._settledValue},t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return this._settledValue},t.prototype.isFulfilled=e.prototype._isFulfilled=function(){return(268435456&this._bitField)>0},t.prototype.isRejected=e.prototype._isRejected=function(){return(134217728&this._bitField)>0},t.prototype.isPending=e.prototype._isPending=function(){return 0==(402653184&this._bitField)},t.prototype.isResolved=e.prototype._isResolved=function(){return(402653184&this._bitField)>0},e.prototype.isPending=function(){return this._target()._isPending()},e.prototype.isRejected=function(){return this._target()._isRejected()},e.prototype.isFulfilled=function(){return this._target()._isFulfilled()},e.prototype.isResolved=function(){return this._target()._isResolved()},e.prototype._value=function(){return this._settledValue},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue},e.prototype.value=function(){var e=this._target();if(!e.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return e._settledValue},e.prototype.reason=function(){var e=this._target();if(!e.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return e._unsetRejectionIsUnhandled(),e._settledValue},e.PromiseInspection=t}},{}],35:[function(e,t,n){"use strict";t.exports=function(t,n){var o=e("./util.js"),i=o.errorObj,a=o.isObject;function r(e){return e.then}var s={}.hasOwnProperty;return function(e,l){if(a(e)){if(e instanceof t)return e;if(function(e){return s.call(e,"_promise0")}(e)){var c=new t(n);return e._then(c._fulfillUnchecked,c._rejectUncheckedCheckError,c._progressUnchecked,c,null),c}var d=o.tryCatch(r)(e);if(d===i){l&&l._pushContext();c=t.reject(d.e);return l&&l._popContext(),c}if("function"==typeof d)return function(e,a,r){var s=new t(n),l=s;r&&r._pushContext();s._captureStackTrace(),r&&r._popContext();var c=o.tryCatch(a).call(e,(function(e){if(!s)return;s._resolveCallback(e),s=null}),(function(e){if(!s)return;s._rejectCallback(e,!1,!0),s=null}),(function(e){if(!s)return;"function"==typeof s._progress&&s._progress(e)}));!1,s&&c===i&&(s._rejectCallback(c.e,!0,!0),s=null);return l}(e,d,l)}return e}}},{"./util.js":38}],36:[function(e,t,n){"use strict";t.exports=function(t,n){var o=e("./util.js"),i=t.TimeoutError,a=function(e){return r(+this).thenReturn(e)},r=t.delay=function(e,o){if(void 0===o){o=e,e=void 0;var i=new t(n);return setTimeout((function(){i._fulfill()}),o),i}return o=+o,t.resolve(e)._then(a,null,null,o,void 0)};function s(e){var t=this;return t instanceof Number&&(t=+t),clearTimeout(t),e}function l(e){var t=this;throw t instanceof Number&&(t=+t),clearTimeout(t),e}t.prototype.delay=function(e){return r(this,e)},t.prototype.timeout=function(e,t){e=+e;var n=this.then().cancellable();n._cancellationParent=this;var a=setTimeout((function(){!function(e,t){var n;e.isPending()&&(!o.isPrimitive(t)&&t instanceof Error?n=t:("string"!=typeof t&&(t="operation timed out"),n=new i(t)),o.markAsOriginatingFromRejection(n),e._attachExtraTrace(n),e._cancel(n))}(n,t)}),e);return n._then(s,l,void 0,a,void 0)}}},{"./util.js":38}],37:[function(e,t,n){"use strict";t.exports=function(t,n,o,i){var a=e("./errors.js").TypeError,r=e("./util.js").inherits,s=t.PromiseInspection;function l(e){for(var n=e.length,o=0;o<n;++o){var i=e[o];if(i.isRejected())return t.reject(i.error());e[o]=i._settledValue}return e}function c(e){setTimeout((function(){throw e}),0)}function d(e,n){var i=0,a=e.length,r=t.defer();return function s(){if(i>=a)return r.resolve();var l=function(e){var t=o(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}(e[i++]);if(l instanceof t&&l._isDisposable()){try{l=o(l._getDisposer().tryDispose(n),e.promise)}catch(e){return c(e)}if(l instanceof t)return l._then(s,c,null,null,null)}s()}(),r.promise}function u(e){var t=new s;return t._settledValue=e,t._bitField=268435456,d(this,t).thenReturn(e)}function p(e){var t=new s;return t._settledValue=e,t._bitField=134217728,d(this,t).thenThrow(e)}function g(e,t,n){this._data=e,this._promise=t,this._context=n}function h(e,t,n){this.constructor$(e,t,n)}function f(e){return g.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}g.prototype.data=function(){return this._data},g.prototype.promise=function(){return this._promise},g.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},g.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var o=null!==t?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,o},g.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},r(h,g),h.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},t.using=function(){var e=arguments.length;if(e<2)return n("you must pass at least 2 arguments to Promise.using");var i,a=arguments[e-1];if("function"!=typeof a)return n("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var r=!0;2===e&&Array.isArray(arguments[0])?(e=(i=arguments[0]).length,r=!1):(i=arguments,e--);for(var s=new Array(e),c=0;c<e;++c){var d=i[c];if(g.isDisposer(d)){var h=d;(d=d.promise())._setDisposable(h)}else{var m=o(d);m instanceof t&&(d=m._then(f,null,null,{resources:s,index:c},void 0))}s[c]=d}var y=t.settle(s).then(l).then((function(e){var t;y._pushContext();try{t=r?a.apply(void 0,e):a.call(void 0,e)}finally{y._popContext()}return t}))._then(u,p,void 0,s,void 0);return s.promise=y,y},t.prototype._setDisposable=function(e){this._bitField=262144|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(262144&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new h(e,this,i());throw new a}}},{"./errors.js":13,"./util.js":38}],38:[function(e,n,o){"use strict";var i=e("./es5.js"),a="undefined"==typeof navigator,r=function(){try{var e={};return i.defineProperty(e,"f",{get:function(){return 3}}),3===e.f}catch(e){return!1}}(),s={e:{}},l;function c(){try{var e=l;return l=null,e.apply(this,arguments)}catch(e){return s.e=e,s}}function d(e){return l=e,c}var u=function(e,t){var n={}.hasOwnProperty;function o(){for(var o in this.constructor=e,this.constructor$=t,t.prototype)n.call(t.prototype,o)&&"$"!==o.charAt(o.length-1)&&(this[o+"$"]=t.prototype[o])}return o.prototype=t.prototype,e.prototype=new o,e.prototype};function p(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function g(e){return!p(e)}function h(e){return p(e)?new Error(A(e)):e}function f(e,t){var n,o=e.length,i=new Array(o+1);for(n=0;n<o;++n)i[n]=e[n];return i[n]=t,i}function m(e,t,n){if(!i.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var o=Object.getOwnPropertyDescriptor(e,t);return null!=o?null==o.get&&null==o.set?o.value:n:void 0}function y(e,t,n){if(p(e))return e;var o={value:n,configurable:!0,enumerable:!1,writable:!0};return i.defineProperty(e,t,o),e}function v(e){throw e}var _=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(i.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var o=[],a=Object.create(null);null!=e&&!t(e);){var r;try{r=n(e)}catch(e){return o}for(var s=0;s<r.length;++s){var l=r[s];if(!a[l]){a[l]=!0;var c=Object.getOwnPropertyDescriptor(e,l);null!=c&&null==c.get&&null==c.set&&o.push(l)}}e=i.getPrototypeOf(e)}return o}}var o={}.hasOwnProperty;return function(n){if(t(n))return[];var i=[];e:for(var a in n)if(o.call(n,a))i.push(a);else{for(var r=0;r<e.length;++r)if(o.call(e[r],a))continue e;i.push(a)}return i}}(),b=/this\s*\.\s*\S+\s*=/;function w(e){try{if("function"==typeof e){var t=i.names(e.prototype),n=i.isES5&&t.length>1,o=t.length>0&&!(1===t.length&&"constructor"===t[0]),a=b.test(e+"")&&i.names(e).length>0;if(n||o||a)return!0}return!1}catch(e){return!1}}function C(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e}var x=/^[a-z$_][a-z$_0-9]*$/i;function S(e){return x.test(e)}function E(e,t,n){for(var o=new Array(e),i=0;i<e;++i)o[i]=t+i+n;return o}function A(e){try{return e+""}catch(e){return"[no string representation]"}}function T(e){try{y(e,"isOperational",!0)}catch(e){}}function G(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)}function P(e){return e instanceof Error&&i.propertyIsWritable(e,"stack")}var D="stack"in new Error?function(e){return P(e)?e:new Error(A(e))}:function(e){if(P(e))return e;try{throw new Error(A(e))}catch(e){return e}};function L(e){return{}.toString.call(e)}function I(e,t,n){for(var o=i.names(e),a=0;a<o.length;++a){var r=o[a];if(n(r))try{i.defineProperty(t,r,i.getDescriptor(e,r))}catch(e){}}}var k={isClass:w,isIdentifier:S,inheritedDataKeys:_,getDataPropertyOrDefault:m,thrower:v,isArray:i.isArray,haveGetters:r,notEnumerableProp:y,isPrimitive:p,isObject:g,canEvaluate:a,errorObj:s,tryCatch:d,inherits:u,withAppended:f,maybeWrapAsError:h,toFastProperties:C,filledRange:E,toString:A,canAttachTrace:P,ensureErrorObject:D,originatesFromRejection:G,markAsOriginatingFromRejection:T,classString:L,copyDescriptors:I,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:void 0!==t&&"[object process]"===L(t).toLowerCase()},O;k.isRecentNode=k.isNode&&(O=t.versions.node.split(".").map(Number),0===O[0]&&O[1]>10||O[0]>0),k.isNode&&k.toFastProperties(t);try{throw new Error}catch(e){k.lastLineError=e}n.exports=k},{"./es5.js":14}]},{},[4])(4)})),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,n(171),n(101),n(1092).setImmediate)},function(e,t,n){(function(e){var o=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,o,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,o,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(o,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(1093),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(101))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var o,i,a,r,s,l=1,c={},d=!1,u=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?o=function(e){t.nextTick((function(){h(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){h(e.data)},o=function(e){a.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(i=u.documentElement,o=function(e){var t=u.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):o=function(e){setTimeout(h,0,e)}:(r="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(r)&&h(+t.data.slice(r.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),o=function(t){e.postMessage(r+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[l]=i,o(l),l++},p.clearImmediate=g}function g(e){delete c[e]}function h(e){if(d)setTimeout(h,0,e);else{var t=c[e];if(t){d=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{g(e),d=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(101),n(171))},function(e,t,n){var o,i=i||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},o=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in o,a=/constructor/i.test(e.HTMLElement)||e.safari,r=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},l=function(e){setTimeout((function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()}),4e4)},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},d=function(t,d,u){u||(t=c(t));var p,g=this,h="application/octet-stream"===t.type,f=function(){!function(e,t,n){for(var o=(t=[].concat(t)).length;o--;){var i=e["on"+t[o]];if("function"==typeof i)try{i.call(e,n||e)}catch(e){s(e)}}}(g,"writestart progress write writeend".split(" "))};if(g.readyState=g.INIT,i)return p=n().createObjectURL(t),void setTimeout((function(){var e,t;o.href=p,o.download=d,e=o,t=new MouseEvent("click"),e.dispatchEvent(t),f(),l(p),g.readyState=g.DONE}));!function(){if((r||h&&a)&&e.FileReader){var o=new FileReader;return o.onloadend=function(){var t=r?o.result:o.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,g.readyState=g.DONE,f()},o.readAsDataURL(t),void(g.readyState=g.INIT)}(p||(p=n().createObjectURL(t)),h)?e.location.href=p:e.open(p,"_blank")||(e.location.href=p);g.readyState=g.DONE,f(),l(p)}()},u=d.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(u.abort=function(){},u.readyState=u.INIT=0,u.WRITING=1,u.DONE=2,u.error=u.onwritestart=u.onprogress=u.onwrite=u.onabort=u.onerror=u.onwriteend=null,function(e,t,n){return new d(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this);e.exports?e.exports.saveAs=i:null!==n(1352)&&null!==n(399)&&(void 0===(o=function(){return i}.call(t,n,t,e))||(e.exports=o))},function(e,t,n){"use strict";n(664),n(169),n(51),n(18),n(29),n(124),n(28);var o=n(1),i=n(365),a=n(238),r=n(1174),s=n(37);function l(e){i.call(this,e)}o.GObject.inherit(l,i);var c=o.GUtil.uuid();l.prototype._totalFonts=0,l.prototype._fontList=null,l.prototype._formattedFontList=null,l.prototype._initialized=!1,l.prototype._initializing=!1,l.prototype._queue=null,l.prototype.addPreviews=function(e){for(var t=0;t<e.length;t++){var n=document.createElement("image");e[t].preview=n}if(e.length){var i=this;for(t=0;t<e.length;t++)e[t].cachedPreview||(e[t].addPreviewCallback=function(e,t){var n=$("<div></div>").addClass("preview-container"),l=document.createElement("div");l.innerHTML=this.displayname||this.family,l.style.fontFamily=this.family,l.style.fontSize=gDesigner.isTouchEnabled()?"20px":"13px",l.style.height=gDesigner.isTouchEnabled()?"30px":"20px",$(l).appendTo(n);var c,d=$("<span></span>").addClass("gravit-icon-trash g-font-delete").attr("name","_SPECIAL_").appendTo(n)[0];l.addEventListener("mouseover",(function(e){e.stopPropagation(),e.preventDefault()})),d.addEventListener("mouseup",e=>{e.stopPropagation(),e.preventDefault();var t=a.getInstance(),n=(e,s)=>{var l=this.fonts;if(s>=l.length){var c=i._formattedFontList.findIndex(e=>e.family===this.family);if(-1===c)return;i._formattedFontList.splice(c,1),i._fontList=[],i._formattedFontList.forEach((function(e){e.fonts.forEach((function(e){i._fontList.push({family:e.family,weight:String(e.weight),style:e.style,subfamily:e.subfamily,displayname:e.displayname})}))})),i._totalFonts--,e.updateItem(r.FONT_LIST,i._fontList.map((function(e){return{family:e.family,weight:e.weight,style:e.style,subfamily:e.subfamily,displayname:e.displayname}}))).done(e=>{for(var n={},i=0;i<this.families.length;i++)n[this.families[i]]="Open Sans";if(gDesigner.getDocuments().forEach(e=>{e.getScene().acceptChildren(e=>{e instanceof o.GText&&e.replaceFonts(n,!0)})}),gDesigner.getWorkspace())for(i=0;i<this.families.length;i++)gDesigner.getWorkspace().getFontManager().removeFont(this.families[i]);a.getInstance().reset(),t&&t.setShowMissingFontsDialog(!0),console.log("successfully updated font list"),this._queue&&this._queue.length&&this._queue.shift().call(this)})}else{var d=l[s],u=d.family+"_"+d.weight+"_"+d.style;e.deleteItem(u).done(()=>{n(e,s+1)})}};s.confirm(o.GLocale.get(new o.GLocaleKey("GImportedFontsProvider","confirm.delete-font")),e=>{e&&(this._queue||(this._queue=[]),this._queue.push(()=>{r.getInstance(e=>{e&&(t&&t.setShowMissingFontsDialog(!1),n(e,0))})}),1===this._queue.length&&this._queue.shift().call(this))})});var u=null;for(c=0;c<i._formattedFontList.length;c++)if(i._formattedFontList[c].family===this.family){u=i._formattedFontList[c];break}u?r.getInstance(e=>{if(e){var t=this.fonts[0];if(t){var n=t.family+"_"+t.weight+"_"+t.style;e.getItem(n).done(e=>{var n=new FileReader;n.onload=()=>{var e=document.createElement("style");e.appendChild(document.createTextNode("@font-face {font-family:"+t.family+";font-style:"+("N"!==t.style?"italic":"normal")+";font-weight:"+t.weight+';src: url("'+n.result+'") format("truetype");}')),document.head.appendChild(e)},n.readAsDataURL(new Blob([e],{type:"application/x-font-ttf"}))})}}}):l.innerHTML="[Unavailable]",e(n)})}},l.prototype.initialize=function(){if(!this._initialized&&!this._initializing){this._initializing=!0;var e=Array.prototype.slice.call(arguments);this.load("%",0,1,{done:function(t,n,o){this._initialized=!0,this._initializing=!1,e.length&&e[0].apply(this,e.slice(1)),this._clearCallbacks()}.bind(this),fail:function(){this._initializing=!1,this._initialized=!0,this._clearCallbacks(!0)}.bind(this)},!0)}},l.prototype.load=function(e,t,n,o,i){if(!this._initialized&&!this._initializing)return this._loadCallbacks.push(function(i){i?o.fail():this.load(e,t,n,o)}.bind(this)),void this.initialize(this.load,e,t,n,o);!this._initializing||i?this._fontList?o.done(this._formattedFontList.filter(t=>e.indexOf("%")>=0?(t.displayname||t.family).toLowerCase().startsWith(e.replace(/%/g,"")):(t.displayname||t.family).toLowerCase()==e.toLowerCase()).slice(t,t+n),!0,null):r.getInstance(i=>{if(!i)return o.fail();i.getItem(r.FONT_LIST).done(i=>{this._fontList=i||[],this._generateFormattedList(),this._totalFonts=this._formattedFontList?this._formattedFontList.length:0,o.done(this._formattedFontList.filter(t=>e.indexOf("%")>=0?(t.displayname||t.family).toLowerCase().startsWith(e.replace(/%/g,"")):(t.displayname||t.family).toLowerCase()==e.toLowerCase()).slice(t,t+n),!0,null),this._clearCallbacks()})}):this._loadCallbacks.push(function(i){i?o.fail():this.load(e,t,n,o)}.bind(this))},l.prototype._generateFormattedList=function(){if(this._fontList){this._formattedFontList=[];for(var e=this._fontList.slice(),t=0;t<e.length;t++){var n=e[t],o=n.displayname||n.family,i=[{weight:parseInt(n.weight),style:n.style,family:n.family,subfamily:n.subfamily||null,displayname:n.displayname||null}],a=[n.family];this._formattedFontList.push({family:null,displayname:o,fonts:i,families:a});for(var r=e.length-1;r>t;r--)o===(e[r].displayname||e[r].family)&&(a.indexOf(e[r].family)<0&&a.push(e[r].family),i.push({weight:parseInt(e[r].weight),style:e[r].style,family:e[r].family,subfamily:e[r].subfamily||null,displayname:e[r].displayname||null}),e.splice(r,1));var s=0,l=a[0].length;if(l>0)for(r=1;r<a.length;r++){if(a[r].toLowerCase().indexOf("regular")>=0){l=0,s=r;break}l>a[r].length&&(l=a[r].length,s=r)}this._formattedFontList[this._formattedFontList.length-1].family=a[s]}}else this._formattedFontList=null},l.prototype._resolveCallbacks=[],l.prototype._loadCallbacks=[],l.prototype._clearCallbacks=function(e){this._resolveCallbacks.forEach((function(t){t(!!e)})),this._resolveCallbacks=[],this._loadCallbacks.forEach((function(e){e()})),this._loadCallbacks=[]},l.prototype.getTotalFonts=function(e){return e?this._formattedFontList.filter(this._searchFilter(e)).length:this._totalFonts},l.prototype.resetProvider=function(){this._fontList=null,this._formattedFontList=null},l.prototype.resolveFont=function(e,t,n,i){if(!this._initialized&&!this._initializing)return this._resolveCallbacks.push(function(o){o?i.fail():this.resolveFont(e,t,n,i)}.bind(this)),void this.initialize(this.resolveFont,e,t,n,i);if(this._initializing)this._resolveCallbacks.push(function(o){o?i.fail():this.resolveFont(e,t,n,i)}.bind(this));else{n=String(n)||"400",t=t||o.GFont.Style.Normal;var a=e+"_"+n+"_"+t;r.getInstance(o=>{if(!o)return i.fail();o.getItem(a).done(r=>{if(r)i.done(r instanceof DataView||r instanceof ArrayBuffer?r:r.buffer);else{if(!this._fontList)return console.warn("NO FONTLIST"),void i.fail();var s=this._fontList.findIndex((function(n){return!(n.family!==e||n.style!==t||!n.subfamily||n.displayname===n.family)}));s>=0?(n=this._fontList[s].weight||"400",a=e+"_"+n+"_"+t,o.getItem(a).done(e=>{e?i.done(e instanceof DataView||e instanceof ArrayBuffer?e:e.buffer):i.fail()})):i.fail()}})})}},l.prototype.getProviderId=function(){return c},e.exports=l},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(181),n(51),n(18),n(99),n(29),n(124),n(28);var o=n(45),i=n(1),a=n(13),r=n(34),s=n(61),l=n(1128),c=n(836),d=n(37);function u(){this.initLayout(),this._container.gOverlay({releaseOnClose:!1,padding:!1})}u.ColorMode={RGB:"rgb",HSV:"hsv",CMYK:"cmyk"},u._ColorModeToFrameworkColorMode={[u.ColorMode.RGB]:i.GColor.ColorModes.RGB,[u.ColorMode.HSV]:i.GColor.ColorModes.HSB,[u.ColorMode.CMYK]:i.GColor.ColorModes.CMYK},u.ColorModeLabel={RGB:"RGB",HSV:"HSB",CMYK:"CMYK"},u.ColorModelFree={RGB:!0},u.ExtendedGamut={COMPONENTS:"cp",COLOR_SLIDER:"cs",MAP:"map"},u.canDragSwatch=!1,u.dragSwatch=null,u.dragDeltaX=0,u.dragDeltaY=0,u.hasDropped=!1,u.EXTEND_DRAG_RANGE=50,i.GObject.inheritAndMix(u,i.GObject),u.enableFileTypes=[{ext:"png",mime:"image/png"},{ext:"jpg",mime:"image/jpeg"},{ext:"jpeg",mime:"image/jpeg"},{ext:"gif",mime:"image/gif"}],u.prototype._container=null,u.prototype._toolbar=null,u.prototype._settingsMenu=null,u.prototype._rgbModeItem=null,u.prototype._hsvModeItem=null,u.prototype._cmykModeItem=null,u.prototype._gradientEditor=null,u.prototype._gradientActions=null,u.prototype._colorEditor=null,u.prototype._patternEditor=null,u.prototype._noiseEditor=null,u.prototype._colorMap=null,u.prototype._colorSlider=null,u.prototype._colorComponents=null,u.prototype._systemColorInput=null,u.prototype._colorPreview=null,u.prototype._colorPreviewOld=null,u.prototype._colorPreviewNew=null,u.prototype._opacitySlider=null,u.prototype._palettes=null,u.prototype._activePalette=null,u.prototype._swatchesScope="user",u.prototype._colorMode=null,u.prototype._oldColor=i.GRGBColor.BLACK,u.prototype._color=i.GRGBColor.BLACK,u.prototype._oldColorOpacity=100,u.prototype._colorOpacity=100,u.prototype._activeGradientStop=null,u.prototype._activeGradient=null,u.prototype._pattern=null,u.prototype._patternUpdateBlocker=!1,u.prototype._texture=null,u.prototype._opacity=null,u.prototype._settings=null,u.prototype._isVisible=!1,u.prototype._extendedGamutInitiated=null,u.prototype._sliderColorThumb=null,u.prototype._sliderOpacityThumb=null,u.prototype._extValue=null,u.prototype.getPattern=function(){return this._pattern},u.prototype.setPattern=function(e){this._updatePattern(e,"set_pattern")},u.prototype.getOpacity=function(){return this._opacity},u.prototype.setOpacity=function(e){this._updateOpacity(e,"set_opacity")},u.prototype.initLayout=function(){this._container=$("<div/>").addClass("pattern-chooser").on("close",function(e,t,n){if(this._settings&&this._settings.onClose&&this._settings.onClose(this._pattern,this._opacity,t,n)){var i=gDesigner.getActiveDocument();i&&(i.getEditor().removeEventListener(o.GEditor.ModifiedEvent,this._closeIfNeeded,this),i.getEditor().keysOn([a.GKey.Constant.OPTION])),gDesigner.getWorkspace().getStyleEdManager()&&gDesigner.getWorkspace().getStyleEdManager().isActivated()&&gDesigner.getWorkspace().getStyleEdManager().removeEventListener(o.GStyleEdManager.EditorEvent,this._styleEditorHandler,this)}}.bind(this)),this._toolbar=$("<div/>").addClass("toolbar").appendTo(this._container),u.PATTERN_TYPES||(u.PATTERN_TYPES=u.initPatternType());var e=u.PATTERN_TYPES.map(u._createPatternOption);this._toolbar.append($("<select></select>").addClass("pattern-type-select").append(e).on("change",e=>{var t=$(e.target).children("option:selected").data("type"),n=$(".colormode-selector").children("option:selected").data("colormode"),o=t.createDefault(this._pattern);null===o?gDesigner.stats("patternchooser_change_type","transparent"):o instanceof i.GBackground?gDesigner.stats("patternchooser_change_type","background"):o instanceof i.GTexturePattern?gDesigner.stats("patternchooser_change_type","texture"):o instanceof i.GNoisePattern?gDesigner.stats("patternchooser_change_type","noise"):o instanceof i.GRadialGradient?gDesigner.stats("patternchooser_change_type","radialgradient"):o instanceof i.GLinearGradient?gDesigner.stats("patternchooser_change_type","lineargradient"):o instanceof i.GAngularGradient?gDesigner.stats("patternchooser_change_type","angulargradient"):o instanceof i.GColor&&gDesigner.stats("patternchooser_change_type","color"),this._updateOpacity(1),this._updatePattern(o,"set_type"),this._updateSwatchesPalette(this._getSwatchScope("global",this._pattern)),this._updateSwatchesPalette(this._getSwatchScope("document",this._pattern)),this.setColorMode(n),this._updateActiveGradient()}));var t=$("<select></select>").addClass("colormode-selector");Array.prototype.forEach.call(Object.keys(u.ColorMode),(function(e){$("<option></option>").addClass("color-mode").data("colormode",u.ColorMode[e]).text(u.ColorModeLabel[e]).appendTo(t).gPro({pro:!u.ColorModelFree[e],feature:e.toLowerCase()})})),t.on("change",r.watchDog.trap(e=>{var t=$(e.target).children("option:selected").data("colormode");u.ColorModelFree[(t||"").toUpperCase()]?gDesigner.stats("patternchooser_change_colormode",t):gDesigner.stats("patternchooser_change_procolormode",t);var n=gDesigner.getActiveDocument().getColorModeElms()||[],o=gDesigner.getActiveDocument().getEditor().getIndividualSelection();o&&(n.push(o[0]),gDesigner.getActiveDocument().setColorModeElms(n)),this.setColorMode(t),this._updateActiveGradient()},e=>{var t=($(e.target).children("option:selected").data("colormode")||"").toUpperCase();return!!gDesigner.isEnabledProFeatures(t.toLowerCase())||!!u.ColorModelFree[t]},e=>{var t=$(e.target).children("option:selected").data("colormode");this.setColorMode(this._colorMode,!0),gDesigner.stats("patternchooser_nonprotriespro_procolormode",t)})).appendTo(this._toolbar),this._gradientEditor=$("<div/>").addClass("gradient-editor").append($("<div/>").addClass("stops")).on("mousedown",function(e){var t=this._gradientEditor.offset(),n=e.pageX-t.left,o={position:n/this._gradientEditor.outerWidth(),color:this._defineStopInitColor(n),opacity:1};this._activeGradient.getStops().push(o);var i=this._insertGradientStop(o);this._setActiveGradientStop(o),this._updatePatternFromActiveGradient(),this._updateOnlineEditorStops(),i.trigger("mousedown")}.bind(this)).appendTo(this._container),this._patternEditor=this._createPatternEditor().appendTo(this._container),this._noiseEditor=this._createNoiseEditor().appendTo(this._container),this._colorEditor=$("<div/>").addClass("color-editor").appendTo(this._container),this._systemColorInput=$("<input>").attr("type","color").css({position:"absolute",visibility:"hidden"}).on("change",function(e){this._updateColor(i.GRGBColor.fromCSSColor($(e.target).val()))}.bind(this)).appendTo(this._colorEditor),this._colorMap=$("<div/>").addClass("color-map").append($("<canvas></canvas>")).append($("<div/>").addClass("overlay").on("mousedown touchstart",this._colorMapMouseDown.bind(this)).on("mousemove",(function(e){e.originalEvent.isTrusted&&(e.preventDefault(),e.stopPropagation())}))).append($("<div/>").addClass("marker")).appendTo(this._colorEditor);var n=$("<div/>").addClass("color-details").appendTo(this._colorEditor);$("<div/>").addClass("color-eyedropper g-flat eye-drop").gEyeDropper().on("colorchange",function(e,t){this._updateColor(new i.GRGBColor(t)),this._updateOpacity(t[3]/255,"eyedropper")}.bind(this)).appendTo(n);var s=$("<div/>").addClass("color-sliders").appendTo(n);this._colorSlider=$("<div>").gColorSlider().css("box-sizing","border-box").on("input",function(){this._updateColorFromColorSlider(!0)}.bind(this)).on("change",function(){gDesigner.stats("patternchooser_change_color-from-colorslider"),this._updateColorFromColorSlider()}.bind(this)).appendTo(s),this._opacitySlider=$("<div/>").gInputSlider(c.prototype.OPACITY_DEFAULT).css("box-sizing","border-box").on("input",function(e){this._updateOpacity($(e.target).gInputSlider("value")/100,"slider",!0)}.bind(this)).on("change",function(e){gDesigner.stats("patternchooser_change_opacity"),this._updateOpacity($(e.target).gInputSlider("value")/100,"slider",!1,!0)}.bind(this)).appendTo(s),this._sliderColorThumb=$(this._colorSlider).find(".g-input-slider-thumb").css("box-sizing","border-box"),this._sliderOpacityThumb=$(this._opacitySlider).find(".g-input-slider-thumb").css("box-sizing","border-box");var l=$("<div/>").addClass("color-preview-container").appendTo(n);this._colorPreview=$("<div/>").addClass("color-preview").css("background",i.GPattern.asCSSBackground(null,0)).appendTo(l),this._colorPreviewOld=$("<div/>").addClass("color-preview-old").appendTo(this._colorPreview),this._colorPreviewNew=$("<div/>").addClass("color-preview-new").appendTo(this._colorPreview),$("<div/>").addClass("color-preview-overlay").appendTo(this._colorPreview),this._colorComponents=$("<div/>").addClass("color-components").appendTo(this._colorEditor),this._gradientActions=$("<div/>").addClass("gradient-actions").append($("<button />").addClass("g-flat").attr("data-action","exchange").attr("data-title",i.GLocale.get(new i.GLocaleKey("GPatternChooser","action.change-stops-order"))).on("click",function(){gDesigner.stats("patternchooser_change_stops-order");for(var e=this._activeGradient.getStops(),t=0;t<e.length;++t)e[t].position=1-e[t].position,this._updateGradientStop(e[t]);this._updatePatternFromActiveGradient()}.bind(this)).append($("<span />").addClass("gravit-icon-exchange"))).append($("<div/>").addClass("g-flat").css("float","right").append($("<button />").addClass("g-flat").attr("data-action","rotate-left").attr("data-title",i.GLocale.get(new i.GLocaleKey("GPatternChooser","action.rotate-gradient-left"))).on("click",function(){gDesigner.stats("patternchooser_rotate_gradient","left"),this._rotateActiveGradient(-45)}.bind(this)).append($("<span />").addClass("gravit-icon-rotate-left"))).append($("<button />").addClass("g-flat").attr("data-action","rotate-right").attr("data-title",i.GLocale.get(new i.GLocaleKey("GPatternChooser","action.rotate-gradient-right"))).on("click",function(){gDesigner.stats("patternchooser_rotate_gradient","right"),this._rotateActiveGradient(45)}.bind(this)).append($("<span />").addClass("gravit-icon-rotate-right")))).appendTo(this._container),this._palettes=$("<div/>").addClass("palettes").appendTo(this._container);var d=function(e){var t=$(e.target).closest("[data-palette]").attr("data-palette");gDesigner.stats("patternchooser_activate_palette",t),this._activatePalette(t)}.bind(this);this._createChoosers(d).appendTo(this._palettes),this._createColorsPalette($("<div/>").attr("data-palette","colors").addClass("palette colors-palette").appendTo(this._palettes)),this._createMixerPalette($("<div/>").attr("data-palette","mixer").addClass("palette mixer-palette").appendTo(this._palettes)),$("<div/>").attr("data-palette","used").addClass("palette used-palette").appendTo(this._palettes);var p=$("<div/>").attr("data-palette","swatches").addClass("palette swatches-palette global").appendTo(this._palettes);const g=this._palettes.find(".chooser").find("button[data-palette=swatches]").hasClass("trial")?" trial":"";this._createSwatchesPalette(p,"global"+g),this._createSwatchesPalette($("<div/>").attr("data-palette","swatches").addClass("palette swatches-palette document").appendTo(this._palettes),"document"),this._swatchesScope=this._getSwatchScope("global",this._pattern),this._activatePalette("colors"),this._container.find("button").each((function(e,t){$(t).on("mousedown",(function(e){e.preventDefault()}))})),this.setColorMode(u.ColorMode.RGB)},u.prototype._createChoosers=function(e){return $("<div/>").addClass("chooser").append($("<button />").attr("data-palette","colors").text(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.colors"))).on("click",e)).append($("<button />").gPro({feature:"swatches"}).attr("data-palette","swatches").text(i.GLocale.get(new i.GLocaleKey("GPatternChooser","text.swatches"))).on("click",r.watchDog.trap(e,null,()=>gDesigner.stats("patternchooser_nonprotriespro_palette","swatches"),"swatches"))).append($("<button />").attr("data-palette","used").text(i.GLocale.get(new i.GLocaleKey("GPatternChooser","text.in-use"))).on("click",e)).append($("<button />").attr("data-palette","mixer").text(i.GLocale.get(new i.GLocaleKey("GPatternChooser","text.mixer"))).on("click",e))},u.prototype.__getColorModeParams=function(){return{hexWidth:"27%",isTouchEnabled:!1,rgbWidth:"15%",cmykWidth:"18%"}},u.prototype._updateActiveGradient=function(){if(this._activeGradient){const e=this._activeGradient.getStops();if(e&&e.length){const t=u._ColorModeToFrameworkColorMode[this._colorMode]||i.GColor.ColorModes.RGB;e.forEach(e=>{const n=i.GColorHelper.convertColor(e.color,t);n&&(e.color=n),this._updateGradientStop(e)}),this._updatePatternFromActiveGradient()}}},u.prototype.setColorMode=function(e,t){var n=this.__getColorModeParams();if(e!==this._colorMode||t){this._colorMode=e;var o=null;if(this._toolbar.find(".color-mode").each((t,n)=>{var o=$(n),i=o.data("colormode");i&&o.prop("selected",e===i)}),this._colorComponents.empty(),this._colorMode===u.ColorMode.RGB||this._colorMode===u.ColorMode.HSV){this._colorMap.css("display",""),this._colorSlider.css("display",""),this._colorEditor.toggleClass("cmyk-mode",!1),this._opacitySlider.toggleClass("cmyk-mode",!1),$("<label />").css("width",n.hexWidth).attr("data-css","").append($("<input>").attr("type","text").attr("data-long-press-delay","500").gInputBox({keyIncrement:!1,wheelIncrement:!1,mousemoveIncrement:!1}).on("long-press",e=>{n.isTouchEnabled&&(this._currentLongPressTarget=e.target,this._contextMenu.open(e.target))}).on("change",function(t){var n=i.GRGBColor.fromCSSColor($(t.target).val());n||(n=this._color),e===u.ColorMode.HSV&&(n=new i.GHSVColor(i.GColor.rgbToHSV(n.getValue()))),gDesigner.stats("patternchooser_update_color",e),this._updateColor(n,null,!1,!0)}.bind(this)).on("paste keydown keyup",e=>{var t=$(e.target),n=e.target,o=t.val();if("keydown"===e.type){var i=/[0-9a-z\u017F\u212A]/i.test(String.fromCharCode(e.keyCode||e.charCode));if(o.length>=7&&i&&n.selectionStart===n.selectionEnd)return!1}o.startsWith("#")||(o="#"+o,t.val(o));var a=/^#[0-9A-Za-z]{0,6}/.exec(o);a&&a[0]&&o!==a[0]&&t.val(a[0])})).append($("<span />").text(i.GLocale.get(new i.GLocaleKey("GPatternChooser","text.hex")))).appendTo(this._colorComponents),n.isTouchEnabled&&$("<div/>").css("width","11%").appendTo(this._colorComponents);var a=this._colorMode===u.ColorMode.RGB?["R","G","B"]:["H","S","B"];Array.prototype.forEach.call(a,function(e,t){var o=0;switch(e){case"R":case"G":case"B":this._colorMode===u.ColorMode.RGB?o=255:this._colorMode===u.ColorMode.HSV&&(o=100);break;case"H":o=360;break;case"S":o=100}$("<label />").css("width",n.rgbWidth).attr("data-component-index",t).append($("<input>").attr("type","text").gInputBox({minValue:0,maxValue:o})).append($("<span />").text(e)).appendTo(this._colorComponents)}.bind(this))}else this._colorMode===u.ColorMode.CMYK&&(this._colorMap.css("display","none"),this._colorEditor.toggleClass("cmyk-mode",!0),this._opacitySlider.toggleClass("cmyk-mode",!0),this._colorSlider.css("display","none"),Array.prototype.forEach.call(["C","M","Y","K"],function(e,t){$("<label />").addClass("cymk-label").css("width",n.cmykWidth).attr("data-component-index",t).append($("<input>").attr("type","text").gInputBox({minValue:0,maxValue:100,postfix:"%"})).append($("<span />").text(e)).appendTo(this._colorComponents)}.bind(this)),this._color instanceof i.GCMYKColor||(o=new i.GCMYKColor(i.GColor.rgbToCMYK(this._color.toScreen()))));var r=this._updateColorFromColorComponents.bind(this);this._colorComponents.find("[data-component-index] input").each((function(e,t){$(t).on("change",()=>{gDesigner.stats("patternchooser_change_colorinput"),r()})})),$("<label />").css("width","18%").attr("data-opacity","").append($("<input>").attr("type","text").gInputBox({minValue:0,maxValue:100,postfix:"%"}).gInputBox("value",i.GUtil.formatOpacity(100*this._colorOpacity)).on("change",function(e){gDesigner.stats("patternchooser_change_opacity"),this._updateOpacity(i.GLength.parseEquationValue($(e.target).gInputBox("value"))/100,"input")}.bind(this))).append($("<span />").text("A")).appendTo(this._colorComponents),this._updateColorMap(),o?this._updateColor(o,"mode"):this._updateColorComponentsFromColor(),this._relayout()}},u.prototype.open=function(e,t){this._updateSettings(t,!0),this._container.gOverlay("open",e),"used"===this._activePalette&&this._updateUsedPalette(),gDesigner.getWorkspace().getStyleEdManager()&&gDesigner.getWorkspace().getStyleEdManager().isActivated()&&gDesigner.getWorkspace().getStyleEdManager().addEventListener(o.GStyleEdManager.EditorEvent,this._styleEditorHandler,this);var n=gDesigner.getActiveDocument();n&&(n.getEditor().addEventListener(o.GEditor.ModifiedEvent,this._closeIfNeeded,this),n.getEditor().keysOff([a.GKey.Constant.OPTION]))},u.prototype.close=function(){this._container.gOverlay("close")},u.prototype.isOpenned=function(e){return this._container.gOverlay("isOpenned",e)},u.prototype.setActiveGradientStopByIdx=function(e){if(this._activeGradient&&null!==e){var t=this._activeGradient.getStops();if(e>=0&&e<t.length){var n=t[e];this._setActiveGradientStop(n),this._updateOnlineEditorStops()}}},u.prototype._updateSettings=function(e,t){this._settings=t?$.extend({types:[]},e):$.extend({types:[]},this._settings,e);const{types:n,singleOption:o}=this._settings;if(o)this._toolbar.css("display","none");else{"none"===this._toolbar.css("display")&&this._toolbar.css("display","");const e=[];for(let t=0,o=u.PATTERN_TYPES.length;t<o;t++){var i=u.PATTERN_TYPES[t],a=!n.length;if(!a)for(var r=0;r<n.length;++r)if(i.isCompatible(n[r])){a=!0;break}if(a){var s=u._createPatternOption(i);e.push(s)}}this._toolbar.find(".pattern-type-select").empty().append(e)}this._opacitySlider.gInputSlider("disabled",this._settings.hasOwnProperty("hasOpacity")&&!this._settings.hasOpacity),this._patternEditor.find('[data-property="texture_mask"]').prop("disabled",!this._settings.hasMask)},u.prototype._createNoiseEditor=function(){var e=$("<div/>").addClass("noise-editor");$("<div/>").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GPatternChooser","text.intensity")),columns:[{width:"auto",content:$("<div/>").attr("data-property","noise_amount").gInputSlider({min:0,max:100}).on("input",function(t){var n=$(t.target),o=parseFloat(n.gInputSlider("value"))/100;if(e.find('[type="text"][data-property="noise_amount"]').gInputBox("value",i.GUtil.formatNumber(100*o,0)),this._pattern){var a=this._pattern.clone();a.setAmount(o),this._updatePattern(a,"noise_amount",null,!0)}}.bind(this)).on("change",function(e){if(gDesigner.stats("patternchooser_change_noise-amount"),this._pattern){var t=this._pattern.clone();t.setAmount(parseFloat($(e.target).gInputSlider("value"))/100),this._updatePattern(t,"noise_amount")}}.bind(this))},{width:"40px",content:$("<input>").attr("data-property","noise_amount").attr("type","text").on("change",function(e){if(gDesigner.stats("patternchooser_change_noise","amount"),this._pattern){var t=this._pattern.clone();t.setAmount(i.GLength.parseEquationValue($(e.target).gInputBox("value"))/100),this._updatePattern(t,"noise_amount")}}.bind(this)).gInputBox({minValue:0,maxValue:100,incrementValue:1})}]}).appendTo(e);var t,n,o;return $("<div/>").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GPatternChooser","text.type")),columns:[{width:"auto",content:(t=i.GNoisePattern.Type,n="type",o=$("<select></select>"),t=t||[],Array.prototype.forEach.call(Object.keys(t),(function(e){$("<option></option>").attr("value",t[e]).text(i.GLocale.get(new i.GLocaleKey("GCommonNames","noise."+n+"."+t[e]))).appendTo(o)})),o).attr("data-property","noise_type").on("change",function(e){if(gDesigner.stats("patternchooser_change_noise","type"),this._pattern){var t=this._pattern.clone();t.setType($(e.target).val()),this._updatePattern(t,"noise_type")}}.bind(this))}]}).appendTo(e),e},u.prototype._createPatternEditorFirstRow=function(e,t){return[{padding:!1,content:$("<button>"+i.GLocale.get(new i.GLocaleKey("GPatternChooser","action.choose-image"))+"...</button>").addClass("pattern-choose-image-button").on("click",e)},{width:"auto",content:$("<button />").addClass("paste-btn").addClass("g-flat").append($("<span />").addClass("gravit-icon-paste")).append($("<span />").addClass("title").html(i.GLocale.get(new i.GLocaleKey("GPasteAction","title")))).on("click",t)}]},u.prototype._createPatternEditorMaskRow=function(e){return[{padding:!1,width:"auto",content:$("<span />").text(i.GLocale.get(new i.GLocaleKey("GPatternChooser","action.set-transparency-mask")))},{padding:!1,width:"40px",content:$("<label />").addClass("g-switch").append($("<input>").attr("type","checkbox").attr("data-property","texture_mask").prop("disabled",!0).on("change",e)).append($("<div/>"))}]},u.prototype._createPatternEditorScaleRow=function(e,t,n){return[{width:"auto",content:$("<div/>").attr("data-property","texture_tile").gInputSlider({min:10,max:200}).on("input",e).on("change",t)},{width:"40px",content:$("<input>").attr("data-property","texture_tile").attr("type","text").on("change",n).gInputBox({minValue:10,maxValue:200,incrementValue:1,postfix:"%"})}]},u.prototype._createPatternEditorAdvancedRow=function(e){return[{width:"auto",content:$("<button>"+i.GLocale.get(new i.GLocaleKey("GCommonNames","text.advanced"))+"</button>").on("click",function(){gDesigner.stats("patternchooser_click_advanced"),e.slideToggle()}.bind(this))}]},u.prototype.__getCreatePatternEditorParams=function(){return{isTouchEnabled:!1,repeatWidth:"50%",ghostWidth:"0%",postionWith:"50%",sizeWidth:"52%",unitWidth:"10%"}},u.prototype._createPatternEditor=function(){var e=this.__getCreatePatternEditorParams(),t=$("<div/>").addClass("pattern-editor"),n=function(e,t){var n=$("<select></select>");return e=e||[],Array.prototype.forEach.call(Object.keys(e),(function(o){$("<option></option>").attr("value",e[o]).text(i.GLocale.get(new i.GLocaleKey("GCommonNames","texture."+t+"."+e[o]))).appendTo(n)})),n},o=e=>{gDesigner.stats("patternchooser_change_texture","mask");var t=this._pattern.clone();t.setMask($(e.target).prop("checked")),this._updatePattern(t,"texture_mask")},a=e=>{var n=$(e.target),o=n.attr("data-property"),a=parseFloat(n.gInputSlider("value"))/100;if(t.find('[type="text"][data-property="'+o+'"]').gInputBox("value",i.GUtil.formatNumber(100*a,0)),this._pattern){var r=this._pattern.clone();r.setTileSize(a),this._updatePattern(r,"texture_tile",null,!0)}},r=e=>{if(gDesigner.stats("patternchooser_change_texture","tile"),this._pattern){var t=this._pattern.clone();t.setTileSize(parseFloat($(e.target).gInputSlider("value"))/100),this._updatePattern(t,"texture_tile")}},s=e=>{if(gDesigner.stats("patternchooser_change_texture","tile"),this._pattern){var t=this._pattern.clone();t.setTileSize(i.GLength.parseEquationValue($(e.target).gInputBox("value"))/100),this._updatePattern(t,"texture_tile")}};$("<div/>").addClass("choose-section").append($("<div/>").addClass("pattern-preview-container").append($("<div/>").addClass("pattern-preview"))).append($("<div/>").addClass("pattern-info-container").append($("<div/>").gPropertyRow({clazz:"first-row",columns:this._createPatternEditorFirstRow(()=>{gDesigner.stats("patternchooser_choose_image");var e=gDesigner.getActiveDocument(),t=t||(e?e.getStorage():null)||gDesigner.getDefaultStorage();t&&t.canPromptOpen()&&t.openPrompt(u.enableFileTypes,e=>{e.read(e=>{var t=new FileReader;t.onload=()=>{var e,n=t.result;this._pattern instanceof i.GTexturePattern?(e=this._pattern.clone()).setTexture(n):(e=new i.GTexturePattern(n)).setScene(gDesigner.getActiveDocument().getScene()),this._updatePattern(e,"texture_upload")},t.readAsDataURL(new Blob([e]))})},!1)},()=>{gDesigner.stats("patternchooser_paste_texture");var e=!1,t=i.GNode.deserialize(gDesigner.getClipboardContent(i.GNode.MIME_TYPE));if(t&&t.length)for(var n=0;n<t.length;++n){var o=t[n];if(o.hasMixin(i.GVertexSource)||o instanceof i.GGroup){if(this._pattern){var a=this._pattern.clone();a.setTexture(o),this._updatePattern(a,"texture_paste")}e=!0;break}}e||window.alert(i.GLocale.get(new i.GLocaleKey("GCommonNames","arrow-paste.alert")))})})).append($("<div/>").gPropertyRow({columns:[{width:"100%",content:n(i.GTexturePattern.ScaleMode,"scale").attr("data-property","texture_scale").on("change",function(e){if(this._pattern){var t=this._pattern.clone();t.setScaleMode($(e.target).val()),(0,i.GTexturePattern.ScaleSettings[$(e.target).val()])(t),gDesigner.stats("patternchooser_change_texture",t.getScaleMode()),this._updatePattern(t,"texture_pattern")}}.bind(this))}]})).append($("<div/>").gPropertyRow({columns:e.isTouchEnabled?this._createPatternEditorMaskRow(o):this._createPatternEditorScaleRow(a,r,s)}))).appendTo(t),$("<div/>").addClass(e.isTouchEnabled?"scale":"").gPropertyRow({columns:e.isTouchEnabled?this._createPatternEditorScaleRow(a,r,s):this._createPatternEditorMaskRow(o)}).appendTo(t);var l=$("<div/>").addClass("pattern-advanced-settings");return $("<div/>").gPropertyRow({columns:this._createPatternEditorAdvancedRow(l)}).appendTo(t),$("<div/>").gPropertyRow({columns:[{label:i.GLocale.get(new i.GLocaleKey("GPatternChooser","text.repeat")),width:e.repeatWidth,content:n(i.GTexturePattern.RepeatMode,"repeat").attr("data-property","texture_repeat").on("change",function(e){if(gDesigner.stats("patternchooser_change_texture","repeat"),this._pattern){var t=this._pattern.clone();t.setRepeatMode($(e.target).val()),this._updatePattern(t,"texture_repeat")}}.bind(this))},{width:e.ghostWidth},{label:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.position")),width:e.postionWith,content:n(i.GTexturePattern.PositionMode,"position").attr("data-property","texture_position").on("change",function(e){if(gDesigner.stats("patternchooser_change_texture","position"),this._pattern){var t=this._pattern.clone();t.setPosition($(e.target).val()),this._updatePattern(t,"texture_position")}}.bind(this))}]}).gPropertyRow({columns:[{label:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.size")),width:e.sizeWidth,content:n(i.GTexturePattern.SizeMode,"size").attr("data-property","texture_size").on("change",function(e){if(gDesigner.stats("patternchooser_change_texture","size"),this._pattern){var t=this._pattern.clone();t.setSizeMode($(e.target).val()),this._updatePattern(t,"texture_size")}}.bind(this))},{width:e.ghostWidth},{label:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.width")),width:"20%",content:$("<input>").attr("data-property","texture_size_w").attr("type","text").on("change",function(e){if(gDesigner.stats("patternchooser_change_texture","size"),this._pattern){var t=i.GLength.parseEquationValue($(e.target).val());if(null!==t&&t>=0){var n=this._pattern.clone();n.setWidth(t),this._updatePattern(n,"texture_size")}}}.bind(this)).gInputBox()},{label:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.height")),width:"20%",content:$("<input>").attr("data-property","texture_size_h").attr("type","text").on("change",function(e){if(gDesigner.stats("patternchooser_change_texture","size-h"),this._pattern){var t=i.GLength.parseEquationValue($(e.target).val());if(null!==t&&t>=0){var n=this._pattern.clone();n.setHeight(t),this._updatePattern(n,"texture_size")}}}.bind(this)).gInputBox()},{label:e.isTouchEnabled?"":i.GLocale.get(new i.GLocaleKey("GCommonNames","text.unit")),width:e.unitWidth,content:$("<label />").attr("data-property","texture_size_u")}]}).appendTo(l),l.appendTo(t),t},u.prototype.__getCreatePaletteSwatchParamas=function(){return{isTouchEnabled:!1}},u.prototype._findOrCreateLastSwitchContiner=function(e){var t=e.find(".swatches:last");t.length>0?t.find(".swatch").length>=8&&(t=$("<div/>").addClass("swatches").appendTo(e)):t=$("<div/>").addClass("swatches").appendTo(e);return t},u.prototype._createPaletteSwatch=function(e,t,n,o){var r=this.__getCreatePaletteSwatchParamas(),s=e instanceof i.GSwatch?e:new i.GSwatch(e),l=t;r.isTouchEnabled&&(l=o?$("<div/>").addClass("swatches").appendTo(t):this._findOrCreateLastSwitchContiner(t));var c=function(e){if(!u.canDragSwatch)return e.preventDefault(),void e.stopPropagation();var t=$(e.target).closest(".swatch"),n=t.offset(),o=e.originalEvent;o.stopPropagation(),u.dragSwatch=t,u.hasDropped=!1,u.dragDeltaX=o.pageX-n.left,u.dragDeltaY=o.pageY-n.top,o.dataTransfer.effectAllowed="move",o.dataTransfer.setData("text/plain","dummy_data")}.bind(this),d=function(e){var t=e.originalEvent;t.stopPropagation(),l.find(".grid-drag-overlay").remove();var n=!1,o=$(".pattern-chooser"),a=o.offset().top,r=o.offset().left,s=r+o.width(),c=a+o.height(),d=t.pageX,p=t.pageY;if((d>s||d<r||p>c||p<a)&&(n=!0),u.dragSwatch&&n){var g=gDesigner.getActiveDocument().getEditor();g.beginTransaction();try{var h=u.dragSwatch.data("swatch"),f=this._getSwatchScope(u.dragSwatch.closest(".swatches-wrapper").hasClass("global")?"global":"document",h.getProperty("_pt")),m=gDesigner.getSwatches(f);if(h&&m){for(var y=0;y<m.length;++y)if(i.GUtil.equals(h,m[y])){(m=m.slice()).splice(y,1);break}gDesigner.setSwatches(f,m)}}finally{g.commitTransaction(i.GLocale.get(new i.GLocaleKey("GPatternChooser","action.remove-swatch")),{chooserOn:!0})}}u.hasDropped=!1}.bind(this),p=s.getProperty("_pt");const g=p instanceof i.GTexturePattern&&!(p instanceof i.GNoisePattern);gDesigner.getActiveDocument()&&g&&(p=this._clonePattern(p));var h=s.getProperty("_op"),f=$("<div/>").addClass("swatch").css("background",i.GPattern.asCSSBackground(p,h)).data("swatch",s).attr("draggable",n).attr("data-long-press-delay","500").on("long-press",e=>{r.isTouchEnabled&&(this._currentLongPressTarget=e.target,this._contextMenu.open(e.target))}).on("click",function(e){gDesigner.stats("patternchooser_click_swatch");var t=$(e.target).closest(".swatch").data("swatch"),n=t.getProperty("_pt"),o=t.getProperty("_op"),r=$(".colormode-selector").children("option:selected").data("colormode");if(a.GPlatform.modifiers.optionKey){var s=gDesigner.getActiveDocument().getEditor().selectFromPattern(n,!0);if(s){$(".g-overlay .pattern-chooser").length>0&&$(".g-overlay .pattern-chooser").gOverlay("close"),gDesigner.getActiveDocument().getEditor().updateSelection(!1,s),gDesigner.getActiveDocument().getEditor().blinkSelection(2e3,4);for(var l=$(".fill-properties-panel .g-pattern-chooser .preview"),c=0;c<l.length;++c)if($(l[c]).data("gpatterntarget")&&i.GUtil.equals($(l[c]).data("gpatterntarget").pattern,n)){$(l[c]).trigger("click");break}}}else this._updateOpacity(o),this._updatePattern(n,"set_type",!0);this.setColorMode(r)}.bind(this)).appendTo(l);if(s.isCMYK()&&this._addCmykIcon(f),n&&f.on("mousedown",(function(e){u.canDragSwatch=$(e.target).hasClass("swatch")})).on("dragenter",(function(){(function(e){let t=u.dragSwatch.closest(".swatches-wrapper").hasClass("global"),n=e.closest(".swatches-wrapper").hasClass("global"),o=u.dragSwatch.data("swatch").isCMYK()===e.data("swatch").isCMYK();return!(!(t&&n||!t&&!n)||!o)})($(this))&&$(this).addClass("g-drop")})).on("dragleave",(function(){$(this).removeClass("g-drop")})).on("dragstart",c).on("dragend",d).on("dragover",(function(e){e.preventDefault()})).on("drop",function(){l.find(".grid-drag-overlay").remove();var e=u.dragSwatch.closest(".swatches-wrapper").find(".g-drop");if(e.removeClass("g-drop"),u.dragSwatch&&e.length>0){var t=u.dragSwatch.data("swatch"),n=$(e).data("swatch"),o=this._getSwatchScope(u.dragSwatch.closest(".swatches-wrapper").hasClass("global")?"global":"document",t.getProperty("_pt")),a=gDesigner.getSwatches(o),r=-1,s=-1;if(t&&a&&n){for(var c=0;c<a.length;++c)i.GUtil.equals(t,a[c])?r=c:i.GUtil.equals(n,a[c])&&(s=c);r>-1&&s>-1&&((a=a.slice()).splice(r,1),a.splice(s,0,t)),gDesigner.setSwatches(o,a)}}}.bind(this)),g&&!p.isReady()){const e=()=>{p.isReady()&&(f.css("background",i.GPattern.asCSSBackground(p,h)),p.removeEventListener(i.GTexturePattern.UpdateEvent,e))};p.addEventListener(i.GTexturePattern.UpdateEvent,e)}},u.prototype._addCmykIcon=function(e){e.append($("<div/>").addClass("cmyk-swatch").append($("<div/>").addClass("cmyk-icon c")).append($("<div/>").addClass("cmyk-icon m")).append($("<div/>").addClass("cmyk-icon y")).append($("<div/>").addClass("cmyk-icon k")))},u.prototype.__getCreateColorsPaletteParams=function(){return{isTouchEnabled:!1}},u.prototype._createColorsPalette=function(e){var t=this.__getCreatePaletteSwatchParamas(),n=$("<div/>").addClass("swatches").appendTo(e);t.isTouchEnabled&&(n=e);var o=[0,0,0],a=[255,255,255];this._createPaletteSwatch(new i.GRGBColor(o),n,!1,!1);for(var r=1;r<=10;r+=1)this._createPaletteSwatch(new i.GRGBColor(i.GRGBColor.blend(o,a,r*(1/11))),n,!1,!1);this._createPaletteSwatch(new i.GRGBColor(a),n,!1,!1);var s=[[152,0,0],[255,0,0],[255,153,0],[255,255,0],[0,255,0],[0,255,255],[0,150,136],[96,125,139],[74,134,232],[0,0,255],[153,0,255],[255,0,255]],l=[];for(let n=-1;n<l.length;++n){var c=e;t.isTouchEnabled||(c=$("<div/>").addClass("swatches").appendTo(e));var d=null,u=0;n>=0&&(d=l[n].color,u=l[n].factor);for(let e=0;e<s.length;++e){var p=s[e],g=d?i.GRGBColor.blend(p,d,u):p;this._createPaletteSwatch(new i.GRGBColor(g),c,!1,!1)}}},u.prototype._createMixerPalette=function(e){for(var t=$("<div/>").attr("data-container","tints").addClass("swatches").append($("<label />").text(i.GLocale.get(new i.GLocaleKey("GPatternChooser","text.tints")))).appendTo(e),n=$("<div/>").attr("data-container","shades").append($("<label />").text(i.GLocale.get(new i.GLocaleKey("GPatternChooser","text.shades")))).addClass("swatches").appendTo(e),o=$("<div/>").attr("data-container","tones").append($("<label />").text(i.GLocale.get(new i.GLocaleKey("GPatternChooser","text.tones")))).addClass("swatches").appendTo(e),a=$("<div/>").attr("data-container","mixes").append($("<label />").text(i.GLocale.get(new i.GLocaleKey("GPatternChooser","text.mixes")))).addClass("swatches").appendTo(e),r=1;r<=10;r+=1)this._createPaletteSwatch(i.GRGBColor.WHITE,t),this._createPaletteSwatch(i.GRGBColor.WHITE,n),this._createPaletteSwatch(i.GRGBColor.WHITE,o),this._createPaletteSwatch(i.GRGBColor.WHITE,a);this._updateMixerPalette()},u.prototype.__getUpdateMixerPaletteParams=function(){return{maxCount:10}},u.prototype._updateMixerPalette=function(){var e=this.__getUpdateMixerPaletteParams();function t(e,t,n){$(t[n]).css("background",i.GPattern.asCSSBackground(e)).data("swatch",new i.GSwatch(e))}for(var n=[255,255,255],o=[0,0,0],a=[128,128,128],r=this._color.toScreen(),s=this._palettes.find('.mixer-palette [data-container="tints"] .swatch'),l=this._palettes.find('.mixer-palette [data-container="shades"] .swatch'),c=this._palettes.find('.mixer-palette [data-container="tones"] .swatch'),d=this._palettes.find('.mixer-palette [data-container="mixes"] .swatch'),u=0;u<e.maxCount;u+=1){var p=(u+1)/(1*e.maxCount);t(new i.GRGBColor(i.GRGBColor.blend(r,n,p)),s,u),t(new i.GRGBColor(i.GRGBColor.blend(r,o,p)),l,u),t(new i.GRGBColor(i.GRGBColor.blend(r,a,p)),c,u),t(new i.GRGBColor(i.GRGBColor.blend(r,this._oldColor.toScreen(),p)),d,u)}},u.prototype.__getCreateUsedPaletteParams=function(){return{isTouchEnabled:!1,maxCount:12}},u.prototype._createUsedPalette=function(e){var t=this.__getCreateUsedPaletteParams();let n;t.isTouchEnabled||(n=$("<div/>").addClass("swatches").appendTo(e));for(var o=0;o<t.maxCount;o+=1)this._createPaletteSwatch(i.GRGBColor.WHITE,t.isTouchEnabled?e:n,!1,!1)},u.prototype._updateUsedPalette=function(){var e=gDesigner.getActiveDocument()?gDesigner.getActiveDocument().getDocumentColors():[];$(".palettes > .used-palette").empty(),this._createUsedPalette($(".palettes > .used-palette"));for(var t=12,n=0;n<t;n+=1){var o=n<e.length,a=o?e[n]:null,r=this._palettes.find(".used-palette .swatches .swatch")[n],s=new i.GSwatch(a);o&&$(r).css("background",i.GPattern.asCSSBackground(a)).data("swatch",s),$(r).css("display",o?"":"none"),s.isCMYK()&&this._addCmykIcon($(r)),n%11==0&&o&&(t+=12,this._createUsedPalette($(".palettes > .used-palette")))}},u.prototype._createSwatchesPalette=function(e,t){var n=$("<span/>").text("global"===t?i.GLocale.get(new i.GLocaleKey("GCommonNames","text.global")):i.GLocale.get(new i.GLocaleKey("GCommonNames","text.document"))),o=$("<div/>").addClass("swatches-wrapper").addClass(t),a=$("<div/>").addClass("toolbar").addClass(t).append(n).append($("<button/>").append("<span/>").attr("data-title",i.GLocale.get(new i.GLocaleKey("GCommonNames","text.import-swatches"))).addClass("swatch-icon").addClass("gravit-icon-swatches-import").on("click",()=>{gDesigner.stats("patternchooser_import_swatches"),gDesigner.importSwatches(t)})).append($("<button/>").append("<span/>").attr("data-title",i.GLocale.get(new i.GLocaleKey("GCommonNames","text.export-swatches"))).addClass("swatch-icon").addClass("gravit-icon-swatches-export").on("click",()=>{gDesigner.stats("patternchooser_export_swatches"),gDesigner.exportSwatches(t)})).appendTo(e);o.appendTo(e),a.gAccordion(o,"span",!1)},u.prototype._getSwatchScope=function(e,t){return t&&t instanceof i.GLinearGradient?e+"-linear-gradient":t&&t instanceof i.GRadialGradient?e+"-radial-gradient":t&&t instanceof i.GAngularGradient?e+"-angular-gradient":t&&t instanceof i.GTexturePattern&&!(t instanceof i.GNoisePattern)?e+"-texture-pattern":t&&t instanceof i.GNoisePattern?e+"-noise-pattern":e},u.prototype.__getUpdateSwatchesPaletteParams=function(){return{isTouchEnabled:!1}},u.prototype._updateSwatchesPalette=function(e){var t=this.__getUpdateSwatchesPaletteParams(),n=e.indexOf("-")>0,o=this._palettes.find(".swatches-palette .swatches-wrapper."+(n?e.substring(0,e.indexOf("-")):e)).empty(),a=gDesigner.getSwatches(e);if(!a)return void $("<div/>").addClass("info").text(i.GLocale.get(new i.GLocaleKey("GPatternChooser","text.error-on-loading"))).appendTo(o);var r=[],s=[];for(let e=0;e<a.length;++e)a[e].isCMYK()?s.push(a[e]):r.push(a[e]);r=r.concat(s);let l=null;var c=1;if(!t.isTouchEnabled&&r.length)for(let e=0;e<r.length;++e)l||(l=$("<div/>").addClass("swatches").appendTo(o)),this._createPaletteSwatch(r[e],l,!0,!1),14==++c&&(c=1,l=null);if(l||(l=$("<div/>").addClass("swatches").appendTo(o)),$("<button />").addClass(t.isTouchEnabled?"add-button swatch-button":"swatch-button").addClass("g-flat").attr("data-title",i.GLocale.get(new i.GLocaleKey("GPatternChooser","action.add-swatch"))).append($('<span class="gravit-icon-plus"/>')).on("click",function(){gDesigner.stats("patternchooser_add_swatch",e);var t=new i.GSwatch(this._pattern,this._opacity),n=gDesigner.getSwatches(e);if(n){for(var o=0;o<n.length;++o)if(i.GUtil.equals(t,n[o],!0))return void d.alert(i.GLocale.get(new i.GLocaleKey("GPatternChooser","text.equal-swatch-alert")));n.push(t),gDesigner.setSwatches(e,n)}}.bind(this)).appendTo(l),t.isTouchEnabled&&(l=null,r.length))for(var u=0;u<r.length;++u)this._createPaletteSwatch(r[u],o,!0,7===u);this._updateActiveSwatch(n?e.substring(0,e.indexOf("-")):e)},u.prototype._updateActiveSwatch=function(e){if("swatches"===this._activePalette){var t=this._palettes.find(".swatches-palette."+e),n=!1;t.find(".swatches-wrapper .swatches .swatch").each(function(e,t){var o=$(t),a=i.GUtil.equals(o.data("swatch"),new i.GSwatch(this._pattern,this._opacity),!0);a&&(n=!0),o.data("isActive",a).toggleClass("g-active",a)}.bind(this)),t.find(".toolbar button[data-active-swatch]").each((function(e,t){$(t).prop("disabled",!n)}))}},u.prototype._swatchesChanged=function(e){this._updateSwatchesPalette(e.scope)},u.prototype._activatePalette=function(e){if(e!==this._activePalette){switch(this._activatePalette){case"swatches":gDesigner.removeEventListener(l,this._swatchesChanged,this)}switch(this._palettes.find(".chooser [data-palette]").each((function(t,n){var o=$(n);o.toggleClass("g-active",o.attr("data-palette")===e)})),this._palettes.find(".palette").each((function(t,n){var o=$(n);o.css("display",o.attr("data-palette")===e?"":"none")})),e){case"mixer":this._updateMixerPalette();break;case"used":this._updateUsedPalette();break;case"swatches":this._updateSwatchesPalette(this._getSwatchScope("global",this._pattern)),this._updateSwatchesPalette(this._getSwatchScope("document",this._pattern)),gDesigner.addEventListener(l,this._swatchesChanged,this)}this._activePalette=e,this._relayout()}},u.prototype._setActiveGradientStop=function(e,t,n){(e!==this._activeGradientStop||n)&&(this._activeGradientStop=e,this._activeGradientStop&&(this._updateColor(t||this._activeGradientStop.color,n?"":"gradient-stop"),this._updateOpacity(this._activeGradientStop.opacity,"gradient-stop"),Array.prototype.forEach.call(this._activeGradient.getStops(),function(e){this._updateGradientStop(e)}.bind(this))))},u.prototype._updateOnlineEditorStops=function(){if(gDesigner.getWorkspace().getStyleEdManager()&&gDesigner.getWorkspace().getStyleEdManager().isActivated()){var e=null;this._activeGradientStop&&this._activeGradient&&Array.prototype.forEach.call(this._activeGradient.getStops(),function(t,n){t===this._activeGradientStop&&(e=n)}.bind(this));var t=gDesigner.getWorkspace().getStyleEdManager().getActiveEditor(),n=null;null!==e&&t&&(n={type:o.GGradientStyleEditor.STOP_HANDLE_PART_ID,idx:e}),t&&t.updatePartSelection(!1,n?[n]:null,!0)}},u.prototype._insertGradientStop=function(e){var t=this._gradientEditor.find(".stops"),n=t.width(),o=t.height(),a=t.offset(),r=null,s=function(t,i){var s=Math.max(0,Math.min(n,Math.round(t.pageX-a.left)));t.pageY<a.top-u.EXTEND_DRAG_RANGE||t.pageY>a.top+o+u.EXTEND_DRAG_RANGE?this._activeGradient.getStops().length>=3&&(r.css("display","none"),e.remove=!0):(r.css("display",""),e.remove=!1),e.position=s/n,this._updateGradientStop(e),this._updatePatternFromActiveGradient(!i)}.bind(this),l=function(t){if(s(t,!0),t.stopPropagation(),document.removeEventListener("mouseup",l,!0),document.removeEventListener("mousemove",s,!0),e.remove){var n=this._activeGradient.getStops(),o=n.indexOf(e);n.splice(o,1)}}.bind(this);return r=$("<div/>").addClass("stop").data("stop",e).on("mousedown",function(t){t.stopPropagation(),this._setActiveGradientStop(e),this._updateOnlineEditorStops(),document.addEventListener("mouseup",l,!0),document.addEventListener("mousemove",s,!0);var n=this._activeGradient.getStops()[0].color;n instanceof i.GCMYKColor?this.setColorMode(u.ColorMode.CMYK):n instanceof i.GHSVColor?this.setColorMode(u.ColorMode.HSV):n instanceof i.GRGBColor&&this.setColorMode(u.ColorMode.RGB)}.bind(this)).appendTo(t),this._updateGradientStop(e),r},u.prototype.__getUpdateGradientStopParams=function(){return{isTouchEnabled:!1}},u.prototype._updateGradientStop=function(e){var t=this.__getUpdateGradientStopParams(),n=this._gradientEditor.find(".stops"),o=n.width();n.find(".stop").each(function(n,i){var a=$(i);if(a.data("stop")===e){a.toggleClass("g-active",e===this._activeGradientStop),t.isTouchEnabled&&(e===this._activeGradientStop?(a.css("background",e.color.toScreenCSS(e.opacity)),a.css("border","2px solid #FFFFFF")):(a.css("background","transparent"),a.css("border","2px solid transparent")));var r=Math.round(e.position*o),s=a.outerWidth()/2+1;r<s?t.isTouchEnabled||(r=s):r>o-s&&(t.isTouchEnabled||(r=o-s)),a.css("left",r+"px")}}.bind(this))},u.prototype._updatePatternFromActiveGradient=function(e){if(this._activeGradient){this._activeGradient.sortStops();var t=this._activeGradient.clone(),n=t.getStops();Array.prototype.forEach.call(this._activeGradient.getStops(),(function(e,t){e.remove&&n.splice(t,1)})),this._updatePattern(t,"gradient",null,e)}},u.prototype._rotateActiveGradient=function(e){var t=i.GMath.toRadians(e),n=new i.GPoint(this._activeGradient._fx,this._activeGradient._fy);n=n.rotatedAt(t,new i.GPoint(.5,.5)),this._activeGradient._fx=n.getX(),this._activeGradient._fy=n.getY(),this._activeGradient._angle=this._activeGradient._angle+t,this._updatePatternFromActiveGradient()},u.prototype._updateTexture=function(e){i.GUtil.equals(e,this._texture)||(this._texture=e)},u.prototype.__getUpdateColorParams=function(){return{isTouchEnabled:!1}},u.prototype._updateColor=function(e,t,n,o){var a=this.__getUpdateColorParams();i.GUtil.equals(e,this._color)&&"set_pattern"!==t&&!o||(this._color=e,this._updateSwatchesPalette(this._getSwatchScope("global",this._pattern)),this._updateSwatchesPalette(this._getSwatchScope("document",this._pattern)),this._pattern&&this._pattern instanceof i.GColor&&"set_pattern"!==t&&"update_pattern"!==t&&this._updatePattern(this._color,"set_color",null,n),this._activeGradientStop&&"gradient-stop"!==t&&(this._activeGradientStop.color=this._color,this._updatePatternFromActiveGradient(n)),"mode"!==t&&(this._color instanceof i.GCMYKColor?this.setColorMode(u.ColorMode.CMYK):this._color instanceof i.GHSVColor?this.setColorMode(u.ColorMode.HSV):this._color instanceof i.GRGBColor&&this.setColorMode(u.ColorMode.RGB)),this._updateColorComponentsFromColor(),"slider"!==t&&"map"!==t&&this._updateColorSliderFromColor(),this._systemColorInput.val(this._color.toScreenCSS()),"map"!==t&&this._updateMapMarker(),"set_pattern"!==t&&"gradient-stop"!==t||(this._oldColor=this._color,this._colorPreviewOld.css("background",this._oldColor.toScreenCSS(this._oldColorOpacity))),"swatch"!==t&&"mixer"===this._activePalette&&this._updateMixerPalette(),i.GUtil.equals(this._oldColor,this._color)||0===this._oldColorOpacity&&this._updateOpacity(1),a.isTouchEnabled&&(this._sliderColorThumb.css("background",this._color.toScreenCSS(1)),this._sliderOpacityThumb.css("background",this._color.toScreenCSS(this._colorOpacity))),this._colorPreviewNew.css("background",this._color.toScreenCSS(this._colorOpacity)))},u.prototype.__getUpdateOpacityParams=function(){return{isTouchEnabled:!1}},u.prototype._updateOpacity=function(e,t,n,o){var a=this.__getUpdateColorParams();if(e!==this._colorOpacity||"set_opacity"===t||o){if(this._activeGradientStop&&"set_opacity"===t)return;this._activeGradientStop||(this._opacity=e,"set_opacity"!==t&&this._settings&&this._settings.onOpacity&&this._settings.onOpacity(this._opacity,!!n)),this._colorOpacity=e,"set_opacity"!==t&&"gradient-stop"!==t||(this._oldColorOpacity=this._colorOpacity,this._colorPreviewOld.css("background",this._oldColor.toScreenCSS(this._oldColorOpacity))),this._colorPreviewNew.css("background",this._color.toScreenCSS(this._colorOpacity)),"slider"!==t&&this._opacitySlider.gInputSlider("value",Math.round(100*this._colorOpacity)),this._colorComponents.find("[data-opacity]").find("input").prop("disabled",this._settings&&this._settings.hasOwnProperty("hasOpacity")&&!this._settings.hasOpacity).gInputBox("value",i.GUtil.formatOpacity(100*this._colorOpacity)),this._activeGradientStop&&"gradient-stop"!==t&&(this._activeGradientStop.opacity=this._colorOpacity,this._updatePatternFromActiveGradient(n)),a.isTouchEnabled&&(this._sliderColorThumb.css("background",this._color.toScreenCSS(1)),this._sliderOpacityThumb.css("background",this._color.toScreenCSS(this._colorOpacity)))}},u.prototype._updatePattern=function(e,t,n,o){if(!this._patternUpdateBlocker){"set_pattern"!==t&&"gradient"!==t||(this._patternUpdateBlocker=!0),(!n||e instanceof i.GGradient)&&(this._pattern=e,this._toolbar.find(".pattern-type").each((function(t,n){var o=$(n),i=o.data("type");i&&o.prop("selected",!!i.isInstance(e))})));var a=this._pattern&&this._pattern instanceof i.GGradient,r=this._pattern&&this._pattern instanceof i.GColor,s=this._pattern&&this._pattern instanceof i.GTexturePattern&&!(e instanceof i.GNoisePattern),l=this._pattern&&this._pattern instanceof i.GNoisePattern,c=this._pattern&&this._pattern instanceof i.GBackground;this._gradientEditor.css("display",a?"":"none"),this._gradientActions.css("display",a?"":" none"),this._colorEditor.css("display",r||a?"":"none"),this._palettes.css("display",r||a||s||l?"":"none"),s||l?(this._palettes.find(".chooser").find("button[data-palette!='swatches']").css("display","none"),this._activatePalette("swatches")):this._palettes.find(".chooser").find("button").css("display",""),this._patternEditor.css("display",s&&!l?"":"none"),this._noiseEditor.css("display",l?"":"none"),("set_pattern"===t||"set_type"===t&&!a)&&(this._activeGradient=null,this._activeGradientStop=null);var d=null;if(a){if(this._gradientEditor.css("background",i.GPattern.asCSSBackground(new i.GLinearGradient(this._pattern.getStops()),this._opacity)),"set_pattern"===t||"set_type"===t){this._gradientEditor.find(".stops").empty(),this._activeGradient=this._pattern.clone();var u=null,p=null;Array.prototype.forEach.call(this._activeGradient.getStops(),function(e,t){this._insertGradientStop(e),0===t&&(u=e),this._activeGradientStop&&this._activeGradientStop.position===e.position&&(p=e)}.bind(this));var g=gDesigner.getWorkspace().getStyleEdManager()?gDesigner.getWorkspace().getStyleEdManager().getActiveEditor():null;if(!p&&g&&g.getPartsSelectionLength()){var h=this._activeGradient.getStops(),f=g.getPartSelection(),m=f&&null!==f[0].idx?f[0].idx:null;h&&null!==m&&h.length>m&&(p=h[m],d=m)}p||(p=u),this._setActiveGradientStop(p,e&&e instanceof i.GColor?e:null,n),this._gradientActions.find("[data-action]").each((function(t,n){var o=$(n),a=!0;switch(o.attr("data-action")){case"rotate-left":case"rotate-right":a=e instanceof i.GLinearGradient}o.css("display",a?"":"none")}))}null===d&&Array.prototype.forEach.call(this._activeGradient.getStops(),function(e,t){e===this._activeGradientStop&&(d=t)}.bind(this))}else if(r)this._updateColor(e,t||"update_pattern",!!o);else if(l){var y=100*e.getAmount();this._noiseEditor.find('.g-input-slider[data-property="noise_amount"]').gInputSlider("value",y),this._noiseEditor.find('[type="text"][data-property="noise_amount"]').gInputBox("value",i.GUtil.formatNumber(y,0));var v=this._patternEditor.find('[data-property="noise_type"]');v.children("option").attr("selected",!1),v.children('option[value="'+e.getType()+'"]').attr("selected",!0)}else if(s){this._updateTexture(e,t||"update_pattern");var _=!!e.getTexture(),b=-1!==i.GTexturePattern.SizeMode.Length.concat(i.GTexturePattern.SizeMode.Percent).indexOf(e.getSizeMode()),w=function(e,t){var n=this._patternEditor.find('[data-property="'+e+'"]').prop("disabled",!_);n.children("option").attr("selected",!1),n.children('option[value="'+t+'"]').attr("selected",!0),n.val(t)}.bind(this),C=function(e,t){this._patternEditor.find('[data-property="'+e+'"]').prop("disabled",!(_&&b)).val(i.GUtil.formatNumber(t))}.bind(this);w("texture_repeat",e.getRepeatMode()),w("texture_position",e.getPosition()),w("texture_size",e.getSizeMode()),w("texture_scale",e.getScaleMode()),C("texture_size_w",e.getWidth()),C("texture_size_h",e.getHeight());var x=100*e.getTileSize();if(this._patternEditor.find('.g-input-slider[data-property="texture_tile"]').gInputSlider("value",x),this._patternEditor.find('[type="text"][data-property="texture_tile"]').gInputBox("value",i.GUtil.formatNumber(x,0)),this._patternEditor.find('[data-property="texture_tile"]').gInputSlider("disabled",e.getScaleMode()!==i.GTexturePattern.ScaleMode.Tile),this._patternEditor.find('[data-property="texture_size_u"]').text(e.getSizeMode()===i.GTexturePattern.SizeMode.Length?"px":"%"),this._patternEditor.find('[data-property="texture_mask"]').prop("checked",e.isMask()),this._patternEditor.find(".pattern-preview").css("background-image",e.asCSSBackground()).css("background-repeat","no-repeat").css("background-position","center").css("background-size","contain"),"set_type"===t){const t=this._clonePattern(e);this._updatePattern(t,"texture_pattern")}}this._relayout(!c),"set_pattern"!==t&&this._settings&&this._settings.onPattern&&this._settings.onPattern(n?this._pattern:e,!!o,null!==d?d:null),a&&this._updateOnlineEditorStops(),"swatches"===this._activePalette&&(this._updateSwatchesPalette(this._getSwatchScope("global",this._pattern)),this._updateSwatchesPalette(this._getSwatchScope("document",this._pattern))),this._patternUpdateBlocker=!1}},u.prototype._styleEditorHandler=function(e){if(e.type===o.GStyleEdManager.EditorEventType.ActivePointChange){var t=this._activeGradient?this._activeGradient.getStops():null,n=e.data?e.data.idx:null;t&&null!==n&&t.length>n?this._setActiveGradientStop(t[n]):t&&this._setActiveGradientStop(t.null),this._updatePatternFromActiveGradient()}},u.prototype._closeIfNeeded=function(e){!this.isOpenned()||e.data&&e.data.chooserOn||this.close()},u.prototype._updateColorFromColorSlider=function(e){var t=parseInt(this._colorSlider.gColorSlider("value")),n=null,o=null;if(this._colorMode===u.ColorMode.RGB||this._colorMode===u.ColorMode.HSV){switch(this._colorMode){case u.ColorMode.RGB:o=i.GColor.rgbToHSV(this._color.toScreen());break;case u.ColorMode.HSV:o=[],this._colorComponents.find("[data-component-index]").each((function(e,t){var n=$(t),i=parseInt(n.attr("data-component-index"));0!==i&&(o[i]=parseInt(n.find("input").gInputBox("value"))/100)}))}o&&(o=[t,o[1],o[2]],n=this._colorMode===u.ColorMode.RGB?new i.GRGBColor(i.GColor.hsvToRGB(o)):new i.GHSVColor(o),this._extendedGamutInitiated=u.ExtendedGamut.COLOR_SLIDER,this._updateColor(n,"slider",e,!0),this._updateColorMap(),this._extendedGamutInitiated=null)}},u.prototype._updateColorSliderFromColor=function(){var e;switch(this._colorMode){case u.ColorMode.RGB:case u.ColorMode.HSV:if(this._extendedGamutInitiated===u.ExtendedGamut.COLOR_SLIDER||this._extendedGamutInitiated===u.ExtendedGamut.MAP)return;e=this._extendedGamutInitiated===u.ExtendedGamut.COMPONENTS&&this._extValue&&this._colorMode===u.ColorMode.HSV?this._extValue[0]:i.GColor.rgbToHSV(this._color.toScreen())[0],parseInt(this._colorSlider.gColorSlider("value"))!==e&&(this._colorSlider.gColorSlider("value",e),this._updateColorMap());break;case u.ColorMode.CMYK:}},u.prototype._updateColorFromColorComponents=function(){var e=[];this._colorComponents.find("[data-component-index]").each((function(t,n){var o=$(n),i=parseInt(o.attr("data-component-index"));e[i]=parseInt(o.find("input").gInputBox("value"))}));var t=null;switch(this._colorMode){case u.ColorMode.RGB:t=new i.GRGBColor(e);break;case u.ColorMode.HSV:{const n=e.map((function(e,t){return 0===t?e:e/100}));t=new i.GHSVColor(n);break}case u.ColorMode.CMYK:t=new i.GCMYKColor(e.map((function(e){return e/100})))}this._extendedGamutInitiated=u.ExtendedGamut.COMPONENTS,t&&this._updateColor(t,"components",!1,!0),this._extendedGamutInitiated=null},u.prototype._updateColorComponentsFromColor=function(){if(this._colorComponents.find("[data-css]").find("input").gInputBox("value",this._color.toScreenCSS()),this._extendedGamutInitiated!==u.ExtendedGamut.COMPONENTS||this._colorMode!==u.ColorMode.HSV){var e=null,t=function(e,t){return t};switch(this._colorMode){case u.ColorMode.RGB:e=this._color.toScreen();break;case u.ColorMode.HSV:e=this._extendedGamutInitiated!==u.ExtendedGamut.COLOR_SLIDER&&this._extendedGamutInitiated!==u.ExtendedGamut.MAP||!this._extValue?this._color instanceof i.GHSVColor?this._color.getValue():i.GColor.rgbToHSV(this._color.toScreen()):this._extValue,t=function(e,t){return 0===e?t:i.GUtil.formatNumber(100*t,0)};break;case u.ColorMode.CMYK:e=this._color instanceof i.GCMYKColor?this._color.getValue():i.GColor.rgbToCMYK(this._color.toScreen()),t=function(e,t){return i.GUtil.formatNumber(100*t,0)}}this._colorComponents.find("[data-component-index]").each((function(n,o){var i=$(o),a=parseInt(i.attr("data-component-index"));i.find("input").gInputBox("value",t(a,e[a]))}))}},u.prototype._updateMapMarker=function(){if(this._extendedGamutInitiated!==u.ExtendedGamut.MAP){var e,t=this._colorMap.find("canvas")[0],n=t.width,o=t.height;e=this._extendedGamutInitiated!==u.ExtendedGamut.COLOR_SLIDER&&this._extendedGamutInitiated!==u.ExtendedGamut.COMPONENTS||!this._extValue||this._colorMode!==u.ColorMode.HSV?i.GColor.rgbToHSV(this._color.toScreen()):this._extValue;var a=Math.round(e[1]*n),r=Math.round((1-e[2])*o);this._setMarkerPosition(a,r)}},u.prototype._setMarkerPosition=function(e,t){var n=this._colorMap.find(".marker"),o=this._colorMap.find("canvas"),i=o[0].width,a=o[0].height,r=n.width()/2,s=n.height()/2;e<r&&(e=r),t<s&&(t=s),e>i-r&&(e=i-r),t>a-s&&(t=a-s),n.css({left:e+"px",top:t+"px"})},u.prototype._updateColorMap=function(){var e=this._colorMap.find("canvas")[0];this._colorMap.width()&&this._colorMap.height()&&(e.width=this._colorMap.width(),e.height=this._colorMap.height());var t=e.width,n=e.height,o=e.getContext("2d"),a=this._colorSlider.gColorSlider("value"),r=o.getImageData(0,0,t,n);if(r){for(var s=0;s<t;++s)for(var l=0;l<n;++l){var c=i.GColor.hsvToRGB([parseInt(a),s/t,1-l/n]),d=4*(l*t+s);r.data[d]=c[0],r.data[d+1]=c[1],r.data[d+2]=c[2],r.data[d+3]=255}o.putImageData(r,0,0)}},u.prototype._colorMapMouseDown=function(e){if(e.originalEvent.isTrusted){var t=function(e,t){if(!e.isTrusted)return;e.cancelable&&e.preventDefault();let n=e.pageX,o=e.pageY;if("touchstart"===e.type||"touchmove"===e.type){const t=e.changedTouches[0];n=t&&t.pageX,o=t&&t.pageY}var a=this._colorMap.find("canvas")[0],r=a.width,s=a.height,l=this._colorMap.offset(),c=Math.max(0,Math.min(r,Math.round(n-l.left))),d=Math.max(0,Math.min(s,Math.round(o-l.top)));const p=[parseInt(this._colorSlider.gColorSlider("value")),c/r,1-d/s];var g;g=this._colorMode===u.ColorMode.HSV?new i.GHSVColor(p):new i.GRGBColor(i.GColor.hsvToRGB(p)),this._setMarkerPosition(c,d),this._extendedGamutInitiated=u.ExtendedGamut.MAP,this._updateColor(g,"map",!t,t),this._extendedGamutInitiated=null}.bind(this);t(e.originalEvent),document.addEventListener("mouseup",(function e(n){t(n,!0),n.stopPropagation(),document.removeEventListener("mouseup",e,!0),document.removeEventListener("mousemove",t,!0),document.removeEventListener("touchmove",t,!0)}),!0),document.addEventListener("mousemove",t,!0),document.addEventListener("touchmove",t,!0)}},u.prototype._defineStopInitColor=function(e){var t=this._gradientEditor.find(".stop:visible"),n=function(e){return Number($(e).css("left").replace("px",""))},o=function(e){var t=$(e).data("stop");return t&&t.color instanceof i.GColor?t.color.toScreen():[0,0,0]},a=[],r=[],s=null,l=null,c=null,d=null;for(let o=0;o<t.length;++o)n(t[o])<e?r.push(t[o]):a.push(t[o]);for(let e=0;e<r.length;++e)s?n(r[e])>c&&(s=r[e],c=n(r[e])):(s=r[e],c=n(r[e]));for(let e=0;e<a.length;++e)l?n(a[e])<d&&(l=a[e],d=n(a[e])):(l=a[e],d=n(a[e]));var p=100*(e-=c)/(d-=c)/100;const g=function(e,t,n){var o=((2*n-1)/1+1)/2,i=1-o;return[Math.round(t[0]*o+e[0]*i),Math.round(t[1]*o+e[1]*i),Math.round(t[2]*o+e[2]*i)]}(o(s),o(l),p);switch(this._colorMode){case u.ColorMode.CMYK:return new i.GCMYKColor(i.GColor.rgbToCMYK(g));case u.ColorMode.HSV:return new i.GHSVColor(i.GColor.rgbToHSV(g));default:return new i.GRGBColor(g)}},u._createPatternOption=function(e){return $("<option></option>").addClass("pattern-type").data("type",e).attr("data-title",e.name).attr("value",e.name).text(e.name)},u.prototype._relayout=function(){this._container.gOverlay("relayout",{preserveTop:!1})},u.getGradientStopsFromCurrentPattern=function(e){var t;return e instanceof i.GGradient?t=e.getClonedStops():(t=[{color:i.GRGBColor.WHITE,position:0,opacity:1},{color:i.GRGBColor.BLACK,position:1,opacity:1}],e instanceof i.GColor&&!i.GUtil.equals(e.toScreen(),t[1].color.toScreen())&&(t[0].color=e)),t},u.PATTERN_TYPES=null,u.initPatternType=function(){return[{name:i.GLocale.get(new i.GLocaleKey("GPatternChooser","pattern-type.color")),cssBackgroundImage:new i.GLinearGradient([{color:i.GRGBColor.WHITE,position:0,opacity:.5},{color:i.GRGBColor.WHITE,position:1,opacity:.5}],1,i.GMath.toRadians(90)).asCSSBackground(),isCompatible:function(e){return e===i.GColor},isInstance:function(e){return e&&e instanceof i.GColor},createDefault:function(e){if(e instanceof i.GGradient)for(var t=e.getStops(),n=0;n<t.length;++n)if(t[n].hasOwnProperty("color"))return t[n].color;return new i.GRGBColor}},{name:i.GLocale.get(new i.GLocaleKey("GPatternChooser","pattern-type.lineargradient")),cssBackgroundImage:new i.GLinearGradient([{color:i.GRGBColor.WHITE,position:0,opacity:1},{color:i.GRGBColor.BLACK,position:1,opacity:0}],1,i.GMath.toRadians(90)).asCSSBackground(),isCompatible:function(e){return e===i.GLinearGradient||e===i.GGradient},isInstance:function(e){return e&&e instanceof i.GLinearGradient},createDefault:function(e){return new i.GLinearGradient(u.getGradientStopsFromCurrentPattern(e))}},{name:i.GLocale.get(new i.GLocaleKey("GPatternChooser","pattern-type.radialgradient")),cssBackgroundImage:new i.GRadialGradient([{color:i.GRGBColor.WHITE,position:0,opacity:1},{color:i.GRGBColor.BLACK,position:1,opacity:0}]).asCSSBackground(),isCompatible:function(e){return e===i.GRadialGradient||e===i.GGradient},isInstance:function(e){return e&&e instanceof i.GRadialGradient},createDefault:function(e){return new i.GRadialGradient(u.getGradientStopsFromCurrentPattern(e))}},{name:i.GLocale.get(new i.GLocaleKey("GPatternChooser","pattern-type.angulargradient")),cssBackgroundImage:new i.GAngularGradient([{color:i.GRGBColor.WHITE,position:0,opacity:1},{color:i.GRGBColor.BLACK,position:1,opacity:0}]).asCSSBackground(),isCompatible:function(e){return e===i.GAngularGradient||e===i.GGradient},isInstance:function(e){return e&&e instanceof i.GAngularGradient},createDefault:function(e){return new i.GAngularGradient(u.getGradientStopsFromCurrentPattern(e))}},{name:i.GLocale.get(new i.GLocaleKey("GPatternChooser","pattern-type.texture")),cssBackgroundImage:'url("data:image/svg+xml;base64,'+btoa('<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20">\n                        <circle r="9.2" stroke-width="2" stroke="white" fill="none"/>\n                        <circle cy="18.4" r="9.2" stroke-width="2px" stroke="white" fill="none"/>\n                        <circle cx="18.4" cy="18.4" r="9.2" stroke-width="2" stroke="white" fill="none"/>\n                    </svg>')+'")',isCompatible:function(e){return e===i.GTexturePattern},isInstance:function(e){return e&&e instanceof i.GTexturePattern&&!(e instanceof i.GNoisePattern)},createDefault:function(){var e=i.GNode.deserialize('[{"@":"group","$":[{"@":"rectangle","uf":true,"ct":"R","sl":0,"reftxt":null,"trf":[9.948817641447532,0,0,9.692411708290129,370.93546258325506,25.987797270522503],"_sdf":84,"_layers":{"@":"paintLayers","$":[{"@":"fillPaintLayer","_pt":"C#[0,0,0]"}]}},{"@":"rectangle","uf":true,"ct":"R","sl":0,"reftxt":null,"trf":[9.948817641447532,0,0,9.692411708290129,410.7307331490452,25.987797270522503],"_sdf":84,"_layers":{"@":"paintLayers","$":[{"@":"fillPaintLayer","_pt":"C#[0,0,0]"}]}},{"@":"rectangle","uf":true,"ct":"R","sl":0,"reftxt":null,"trf":[9.948817641447532,0,0,9.692411708290129,390.7793771686299,44.58515959609013],"_sdf":84,"_layers":{"@":"paintLayers","$":[{"@":"fillPaintLayer","_pt":"C#[0,0,0]"}]}},{"@":"rectangle","uf":true,"ct":"R","sl":0,"reftxt":null,"trf":[9.948817641447532,0,0,9.692411708290129,430.57464773441995,44.58515959609013],"_sdf":84,"_layers":{"@":"paintLayers","$":[{"@":"fillPaintLayer","_pt":"C#[0,0,0]"}]}},{"@":"rectangle","uf":true,"ct":"R","sl":0,"reftxt":null,"trf":[9.948817641447532,0,0,9.692411708290129,370.9623229320152,63.96998301267038],"_sdf":84,"_layers":{"@":"paintLayers","$":[{"@":"fillPaintLayer","_pt":"C#[0,0,0]"}]}},{"@":"rectangle","uf":true,"ct":"R","sl":0,"reftxt":null,"trf":[9.948817641447532,0,0,9.692411708290129,410.75759349780526,63.96998301267038],"_sdf":84,"_layers":{"@":"paintLayers","$":[{"@":"fillPaintLayer","_pt":"C#[0,0,0]"}]}},{"@":"rectangle","uf":true,"ct":"R","sl":0,"reftxt":null,"trf":[9.948817641447532,0,0,9.692411708290129,390.80623751739,82.56734533823798],"_sdf":84,"_layers":{"@":"paintLayers","$":[{"@":"fillPaintLayer","_pt":"C#[0,0,0]"}]}},{"@":"rectangle","uf":true,"ct":"R","sl":0,"reftxt":null,"trf":[9.948817641447532,0,0,9.692411708290129,430.60150808318014,82.56734533823798],"_sdf":84,"_layers":{"@":"paintLayers","$":[{"@":"fillPaintLayer","_pt":"C#[0,0,0]"}]}}]}]').pop(),t=new i.GTexturePattern(e,i.GTexturePattern.RepeatMode.Both);return t.setScene(gDesigner.getActiveDocument().getScene()),t}},{name:i.GLocale.get(new i.GLocaleKey("GPatternChooser","pattern-type.noise")),cssBackgroundImage:'url("data:image/svg+xml;base64,'+btoa('<svg width="100%" height="100%" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;"><rect x="-0.994" y="-1.097" width="24.763" height="23.271" style="fill:transparent;"/><path d="M7.689,17.9l0.848,0l0,0.565l-0.848,0l0,0.848l-0.565,0l0,-0.848l-0.848,0l0,-0.565l0.848,0l0,-0.848l0.565,0l0,0.848Zm5.769,0l0.848,0l0,0.565l-0.848,0l0,0.848l-0.565,0l0,-0.848l-0.847,0l0,-0.565l0.847,0l0,-0.848l0.565,0l0,0.848Zm5.094,0l0.847,0l0,0.565l-0.847,0l0,0.848l-0.566,0l0,-0.848l-0.847,0l0,-0.565l0.847,0l0,-0.848l0.566,0l0,0.848Zm-16.58,0l0.847,0l0,0.565l-0.847,0l0,0.848l-0.566,0l0,-0.848l-0.847,0l0,-0.565l0.847,0l0,-0.848l0.566,0l0,0.848Zm3.015,-2.33l1.321,0l0,0.881l-1.321,0l0,1.321l-0.88,0l0,-1.321l-1.321,0l0,-0.881l1.321,0l0,-1.32l0.88,0l0,1.32Zm5.752,0l1.32,0l0,0.881l-1.32,0l0,1.321l-0.881,0l0,-1.321l-1.32,0l0,-0.881l1.32,0l0,-1.32l0.881,0l0,1.32Zm5.764,0l1.32,0l0,0.881l-1.32,0l0,1.321l-0.881,0l0,-1.321l-1.321,0l0,-0.881l1.321,0l0,-1.32l0.881,0l0,1.32Zm-8.814,-2.896l0.848,0l0,0.566l-0.848,0l0,0.847l-0.565,0l0,-0.847l-0.848,0l0,-0.566l0.848,0l0,-0.847l0.565,0l0,0.847Zm5.769,0l0.848,0l0,0.566l-0.848,0l0,0.847l-0.565,0l0,-0.847l-0.847,0l0,-0.566l0.847,0l0,-0.847l0.565,0l0,0.847Zm5.094,0l0.847,0l0,0.566l-0.847,0l0,0.847l-0.566,0l0,-0.847l-0.847,0l0,-0.566l0.847,0l0,-0.847l0.566,0l0,0.847Zm-16.58,0l0.847,0l0,0.566l-0.847,0l0,0.847l-0.566,0l0,-0.847l-0.847,0l0,-0.566l0.847,0l0,-0.847l0.566,0l0,0.847Zm3.015,-2.91l1.321,0l0,0.88l-1.321,0l0,1.321l-0.88,0l0,-1.321l-1.321,0l0,-0.88l1.321,0l0,-1.321l0.88,0l0,1.321Zm5.752,0l1.32,0l0,0.88l-1.32,0l0,1.321l-0.881,0l0,-1.321l-1.32,0l0,-0.88l1.32,0l0,-1.321l0.881,0l0,1.321Zm5.764,0l1.32,0l0,0.88l-1.32,0l0,1.321l-0.881,0l0,-1.321l-1.321,0l0,-0.88l1.321,0l0,-1.321l0.881,0l0,1.321Zm-8.814,-2.932l0.848,0l0,0.565l-0.848,0l0,0.848l-0.565,0l0,-0.848l-0.848,0l0,-0.565l0.848,0l0,-0.848l0.565,0l0,0.848Zm5.769,0l0.848,0l0,0.565l-0.848,0l0,0.848l-0.565,0l0,-0.848l-0.847,0l0,-0.565l0.847,0l0,-0.848l0.565,0l0,0.848Zm5.094,0l0.847,0l0,0.565l-0.847,0l0,0.848l-0.566,0l0,-0.848l-0.847,0l0,-0.565l0.847,0l0,-0.848l0.566,0l0,0.848Zm-16.58,0l0.847,0l0,0.565l-0.847,0l0,0.848l-0.566,0l0,-0.848l-0.847,0l0,-0.565l0.847,0l0,-0.848l0.566,0l0,0.848Zm3.015,-2.833l1.321,0l0,0.881l-1.321,0l0,1.32l-0.88,0l0,-1.32l-1.321,0l0,-0.881l1.321,0l0,-1.321l0.88,0l0,1.321Zm5.752,2.201l-0.881,0l0,-1.32l-1.32,0l0,-0.881l1.32,0l0,-1.321l0.881,0l0,1.321l1.32,0l0,0.881l-1.32,0l0,1.32Zm5.764,0l-0.881,0l0,-1.32l-1.321,0l0,-0.881l1.321,0l0,-1.321l0.881,0l0,1.321l1.32,0l0,0.881l-1.32,0l0,1.32Zm-8.814,-4.515l0.848,0l0,0.565l-0.848,0l0,0.848l-0.565,0l0,-0.848l-0.848,0l0,-0.565l0.848,0l0,-0.847l0.565,0l0,0.847Zm5.769,0l0.848,0l0,0.565l-0.848,0l0,0.848l-0.565,0l0,-0.848l-0.847,0l0,-0.565l0.847,0l0,-0.847l0.565,0l0,0.847Zm5.094,0l0.847,0l0,0.565l-0.847,0l0,0.848l-0.566,0l0,-0.848l-0.847,0l0,-0.565l0.847,0l0,-0.847l0.566,0l0,0.847Zm-16.58,0l0.847,0l0,0.565l-0.847,0l0,0.848l-0.566,0l0,-0.848l-0.847,0l0,-0.565l0.847,0l0,-0.847l0.566,0l0,0.847Z" style="fill:#fff;"/></svg>')+'")',isCompatible:function(e){return e===i.GNoisePattern},isInstance:function(e){return e&&e instanceof i.GNoisePattern},createDefault:function(){return new i.GNoisePattern}},{name:i.GLocale.get(new i.GLocaleKey("GPatternChooser","pattern-type.backgroundfill")),cssBackgroundImage:'url("data:image/svg+xml;base64,'+btoa('<svg xmlns="http://www.w3.org/2000/svg" width="10" height="20" viewBox="0 0 5 10"><line x1="-2" y1="1" x2="7" y2="10" stroke="white" stroke-width="2"/><line x1="-2" y1="6" x2="7" y2="15" stroke="white" stroke-width="2"/><line x1="-2" y1="-4" x2="7" y2="5" stroke="white" stroke-width="2"/></svg>')+'")',isCompatible:function(e){return e===i.GBackground},isInstance:function(e){return e&&e instanceof i.GBackground},createDefault:function(){return new i.GBackground}}]},function(e){var t={init:function(n){return n=e.extend({asButton:!0,label:"",singleOption:!1},n),window.gPatternChooser._updateSettings(n,!0),this.each((function(){var o=this,a=e(this),r=null;n.label&&(r=e("<span />").addClass("label").css("margin-left","5px").text(n.label));var l=n.simplified,c=e("<span />").addClass("preview").data("gpatternchooser",{options:n,opacity:1}).on("click",function(i,r){if(gDesigner.isTouchEnabled()?window.gPatternChooser=window.gPatternChooserTouch:window.gPatternChooser=window.gPatternChooserNormal,n.onOpen?n.onOpen.call(this):gDesigner.stats("patternchooser_click_open"),i.stopPropagation(),i.preventDefault(),!a.hasClass("g-disabled")){var s=a.data("gpatternchooser");s.options.asButton&&a.addClass("g-active");var l=e.extend({},s.options),c=e.extend(l,{onPattern:function(e,n,i){t.value.call(o,e),a.trigger("patternchange",[e,null,n,!0,null!==i?i:null])},onOpacity:function(e,n){t.opacity.call(o,e),a.trigger("patternchange",[void 0,e,n,!0])},onClose:function(e,t,n,o){var i=!1;return a.trigger("chooserclose",[function(){i=!0,n&&n()},o]),!i&&(s.options.asButton&&a.removeClass("g-active"),!0)}});window.gPatternChooser.open(a,c),window.gPatternChooser.setOpacity(t.opacity.call(o)),window.gPatternChooser.setPattern(t.value.call(o)),a.trigger("chooseropen"),null!==r&&window.gPatternChooser.setActiveGradientStopByIdx(r)}}.bind(this)).gPatternTarget().gRichTooltip(s.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GPatternChooser","text.color-picker-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GPatternChooser","text.color-picker-tooltip-description")),learnMore:"https://documentation.corelvector.com/colors-gradients-textures/color-picker-fill-types/"}));if(n.asButton&&c.addClass("g-button"),a.addClass(l?"g-pattern-chooser-simplified":"g-pattern-chooser").data("gpatternchooser",{options:n,opacity:1}),!l&&!n.noEyedropper){var d=e("<div/>").addClass("eyedropper").addClass("eye-drop").gEyeDropper({onClick:n.onClickEyedropper}).on("colorchange",(function(e,t){a.trigger("patternchange",[new i.GRGBColor(t),t[3]/255,!1])})).removeClass("g-button").gRichTooltip(s.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GPatternChooser","text.eyedropper-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GPatternChooser","text.eyedropper-tooltip-description"))}));c.append(d)}n.noEyedropper&&a.addClass("only-picker"),a.append(c).append(r)}))},opacity:function(n){var o=e(this),i=o.data("gpatternchooser");return arguments.length?(i&&(i.opacity=n,t._updateBackground.call(this)),this):i?i.opacity:1},value:function(n){var o=e(this);return arguments.length?(o.find(".preview").gPatternTarget("value",n),o.find(".eye-drop").gEyeDropper("setValue",n),t._updateBackground.call(this),this):o.find(".preview").gPatternTarget("value")},setPattern:function(t){var n=e(this);return gPatternChooser.isOpenned(n)&&gPatternChooser.setPattern(t),this},nullValue:function(n){var o=e(this),i=o.data("gpatternchooser");return arguments.length?(i&&(i.nullValue=n),t._updateBackground.call(this),this):i?i.nullValue:null},close:function(){gPatternChooser.isOpenned(e(this))&&gPatternChooser.close()},openEyeDropper:function(t,n){e(this).find(".eye-drop").gEyeDropper("setActive",!0,t,n)},_updateBackground:function(){var t=e(this),n=t.data("gpatternchooser"),o=t.find(".preview").gPatternTarget("value"),a=t.find(".preview");let r;!o&&n&&n.nullValue&&(o=n.nullValue),o instanceof i.GTexturePattern?(r=i.GPattern.asCSSBackground(o,n&&"number"==typeof n.opacity?n.opacity:1),a.css("background-image",r).css("background-repeat",o.getRepeatMode()).css("background-size","contain"),t.find(".eye-drop").gEyeDropper("setValue",o)):o&&"function"==typeof o.asCSSBackground&&(r=i.GPattern.asCSSBackground(o,n&&"number"==typeof n.opacity?n.opacity:1),a.css("background",r),t.find(".eye-drop").gEyeDropper("setValue",r))},updateSettings:function(t){var n=e(this).data("gpatternchooser");return n&&n.options&&e.extend(n.options,t),this}};e.fn.gPatternChooser=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.gPatternChooser"):t.init.apply(this,arguments)}}(jQuery),u.prototype._clonePattern=function(e){const t=e.clone();return t.setScene(gDesigner.getActiveDocument().getScene()),t},e.exports=u},function(e,t,n){"use strict";n(3);var o=n(1);function i(e){this.scope=e}o.GObject.inherit(i,o.GEvent),i.prototype.scope=null,i.prototype.toString=function(){return"[Object GSwatchesChangedEvent]"},e.exports=i},function(e,t,n){"use strict";var o=n(14);n(52),n(26),n(7),n(183),n(3);var i=n(1),a=n(826),r=o(n(1215)),s=o(n(372)),l=o(n(1456)),c=n(9),d=o(n(576));const u=n(78),p=n(322),g=n(421),h=n(71),f=n(143),m=10,y=50,v=80,_=100;function b(){}i.GObject.inherit(b,s.default),b.Item=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;s.default.Item.call(this,e,t),this._ext=null,this._token=n,this._setExtension(),g.call(this,c.FILE_ID_PREFIX.SHAREPOINT)},i.GObject.inheritAndMix(b.Item,s.default.Item,[g]),b.Item.prototype._app=c.FILE_ID_PREFIX.SHAREPOINT,b.Item.prototype.getId=function(){const e=this._getSharepointId();return e?"".concat(this._app,"_").concat(e):null},b.Item.prototype.setFile=function(e){e&&(e.storage=f.Storage.SharePoint,!e.relativeUrl&&e instanceof f&&(e.relativeUrl=e.parent&&e.parent.relativeUrl+"/"+e.getNameWithExtension())),s.default.Item.prototype.setFile.call(this,e)},b.Item.prototype._getSharepointId=function(){return this._id?this._id:null},b.Item.prototype.getCollaborativeFile=async function(){return this._collaborativeFile=await gDesigner.getCloudCommunicationManager().getExternalFile(this.getId()).catch(()=>null),this._collaborativeFile},b.Item.prototype.setCollaborativeFileStatus=async function(e){const t=this._collaborativeFile;if(t&&t.status!==e){var n=t.status;t.status=e,gDesigner.hasEventListeners(p.FileStatusUpdate)&&gDesigner.trigger(new p.FileStatusUpdate(this,n,e))}},b.Item.prototype.getOrCreateCollaborativeFile=async function(){var e=await this.getCollaborativeFile();return e||(await this.createShadowFile(),e=await this.getCollaborativeFile()),e},b.Item.prototype.read=function(e,t){const n=this.getFile();if(this._rawData){var o=this._rawData;return this._rawData=null,e(o)}return function o(){let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._getClient().getFile(n).then(async t=>{const o=r.default.convertFileToCloudItem(await this._getClient().getFileDetails(this.getFile()));o.status=n.status,o.checkOutStatus=n.checkOutStatus,this.setFile(o),this._setExtension(),await this.syncShadowFile(),e(t)}).catch(e=>{const{id:a}=n;return!i&&e&&e.status&&404===e.status&&a?this._getClient().findFileById(a).then(e=>{let{relativeUrl:t,name:i,type:a}=e;const r=Object.assign(n,{name:i,relativeUrl:t,type:a});return this.setFile(r),this._setExtension(),this.updateShadowFile(),o.call(this,!0)}).catch(r):r();function r(){if(!t)throw e;t(e)}})}.call(this)},b.Item.prototype.isVersionNewerThan=function(e){if(e instanceof b.Item&&this.getFile().id===e.getFile().id&&new Date(this.getFile().updated)>new Date(e.getFile().updated))return!0;const t=this.getFile(),n=e.getFile();return new Date(t.getModificationTime()).getTime()>new Date(n.getModificationTime()).getTime()},b.Item.prototype.hasVersionControl=function(){return!0},b.Item.prototype.hasUpdates=async function(){const e=this.getFile();if(!this.getId()||!e||!e.updated&&!e.getModificationTime())return!1;const t=await this.getLatestFileInfo();return new b.Item(this.getStorage(),t).isVersionNewerThan(this)},b.Item.prototype.getLatestFileVersion=async function(){let e=this._getClient();const t=this.getFile(),n=await this.getLatestFileInfo(),o=new b.Item(this.getStorage(),Object.assign(n,{settings:t.settings,relativeUrl:t.relativeUrl}));return o._rawData=await e.getFile(t),o.setCloudClient(e),o},b.Item.prototype.getLatestFileInfo=async function(){const e=this.getFile(),t={relativeUrl:e.relativeUrl};if(!t.relativeUrl){const n=e.getParent();n instanceof f&&(t.relativeUrl="".concat(n.relativeUrl,"/").concat(e.getNameWithExtension()))}const n=await this._getClient().getFileDetails(t);return r.default.convertFileToCloudItem(n)},b.Item.prototype.exists=async function(){const e=this.getFile();return this._getClient().fileExists(e.getNameWithExtension(),e.getParent())},b.Item.prototype._setFileSizeAfterSaved=async function(e){return this._getClient().getFileDetails(e).then(e=>{this._fileSizeAfterSaved=e.size})},b.Item.prototype.write=async function(e,t,n,o,a){if(this._writing)return;this._writing=!0;let r=null;try{gContainer.verifyEnoughMemoryToSave(e),r=e.getEditor().markSavePoint();const n={};e.updateStatus(u.Saving,n);const s=o||n.progress,l=e=>{s&&s(e)},c=e.isNew();l(m),i.GUtil.prepareForSaving(e.getScene(),this.getExtension());const d=await this._getDocumentBlob(e,o,a);l(y),this._verifyFileNotTooSmall(d.size,e),this._setFileSizeBeforeSaved(d.size),await this._createOrUpdateFile(d),l(v),c&&await this.createShadowFile();try{await this._setFileSizeAfterSaved(this.getFile()).catch(e=>{console.error(e)}),this._verifyFileSizeAfterSaved()}catch(e){console.error(e)}e.updateStatus(u.Saved),gDesigner.hasEventListeners(h)&&gDesigner.trigger(new h(h.Type.StorageItemUpdated,e)),await this._updateModificationTime(),l(_),t&&t(this.getFile())}catch(t){e.updateStatus(u.SaveFailed),r&&r.rollback(),n&&n(t)}finally{this._writing=!1}},b.Item.prototype._getDocumentBlob=async function(e,t,n){let o=null;if("CDR"===this.getExtension()||"DES"===this.getExtension()){var a={progress:t,ext:this.getExtension().toLowerCase()};o=await this._exportDocumentToCDR(e,a,n)}else{var r=e.getScene(),s=i.GNode.serialize(r,i.GUtil.extend({save:!0},n));o=new Blob([s])}return o},b.Item.prototype._checkHttpResponseAndThrowIfNecessary=function(e){if(e.status>=c.HTTP_STATUS_CODES.BAD_REQUEST){if(e.status===c.HTTP_STATUS_CODES.BAD_REQUEST)throw Error("Invalid this.response, probably corrupted upload: "+e.status);throw Error("Invalid response status: "+e.status)}},b.Item.prototype._updateFileWithCreatedResponse=function(e){const t=r.default.convertFileToCloudItem(e);t.settings=f.GCloudSettings.from(this._getClient().getSettings()),this.setFile(Object.assign(this.getFile(),t))},b.Item.prototype._updateModificationTime=async function(){const e=this._getClient();if(this.getFile().relativeUrl){const t=r.default.convertFileToCloudItem(await e.getFileDetails(this.getFile()));this.getFile().setModificationTime(t.updated),this.setFile(Object.assign(this.getFile(),{updated:t.updated}))}},b.Item.prototype.createOrUpdateFileWithMetadata=async function(e){if(!this._writing){this._writing=!0;try{await this._createOrUpdateFile(e)}finally{this._writing=!1}}},b.Item.prototype._createOrUpdateFile=async function(e){let t;const n=this._getClient(),o=e instanceof Blob?e:new Blob([e]);this._getSharepointId()?(t=await n.updateFileContentById(this._getSharepointId(),o),this._checkHttpResponseAndThrowIfNecessary(t)):(t=await n.createFile(this.getFile(),o),this._checkHttpResponseAndThrowIfNecessary(t),this._updateFileWithCreatedResponse(await t.json())),await async function(){const e=this.getFile(),t=this._getClient();let n=Object.assign(e,{settings:f.GCloudSettings.from(t.getSettings())});e.relativeUrl||(e.relativeUrl=e.parent&&e.parent.relativeUrl+"/"+e.getNameWithExtension());if(e.relativeUrl){const o=await t.getFileDetails(e),i=r.default.convertFileToCloudItem(o);Object.assign(n,i)}this.setFile(n)}.call(this)},b.Item.prototype.getToken=function(){return this._token},b.Item.prototype.checkOut=async function(){try{const e=this.getFile(),t=await this._getAndUpdateCheckOutFileStatus();if(this.isCheckedOutByMe())return;if(t===r.default.FILE_STATUS.LOCKED)throw new d.default(i.GLocale.get(new i.GLocaleKey("GSharePointStorage","text.error-failed-check-out-file")));await this._getClient().checkOutFile(e),this._setCheckOutStatus(r.default.FILE_STATUS.LOCKED_BY_ME)}catch(e){throw e instanceof d.default?e:new d.default(i.GLocale.get(new i.GLocaleKey("GSharePointStorage","text.error-failed-check-out-file")))}},b.Item.prototype.checkIn=async function(e,t){try{const n=this.getFile();await this._getClient().checkInFile(n,e,t),await this._updateModificationTime(),this._setCheckOutStatus(r.default.FILE_STATUS.AVAILABLE),this._triggerStorageItemEvent(p.Type.FileCheckIn)}catch(e){throw console.error("Error checking in",e),e instanceof d.default?e:new d.default(i.GLocale.get(i.GLocale.get(new i.GLocaleKey("GFilesPanelViewSharepoint","text.error-could-not-check-in"))))}},b.Item.prototype._setCheckOutStatus=function(e){const t=this.getFile();e===r.default.FILE_STATUS.AVAILABLE?t.checkedOut=!1:e!==r.default.FILE_STATUS.LOCKED_BY_ME&&e!==r.default.FILE_STATUS.LOCKED||(t.checkedOut=!0),t.checkOutStatus=e,this._triggerStorageItemEvent(p.Type.FileUpdated)},b.Item.prototype.refreshCheckOutStatus=async function(){return this._refreshCheckOutPromise||(this.getFile().checkOutStatus=r.default.FILE_STATUS.LOADING,this._refreshCheckOutPromise=this._getAndUpdateCheckOutFileStatus().finally(()=>{delete this._refreshCheckOutPromise})),this._refreshCheckOutPromise},b.Item.prototype.isCheckedOutByMe=function(){return this.getFile().checkOutStatus===r.default.FILE_STATUS.LOCKED_BY_ME},b.Item.prototype.isCheckedOutLoading=function(){return this.getFile().checkOutStatus===r.default.FILE_STATUS.LOADING},b.Item.prototype.isEditingEnabled=function(){return!c.msTeamsMode||this.isCheckedOutByMe()},b.Item.prototype._getAndUpdateCheckOutFileStatus=async function(){const e=await this._getCheckOutFileStatus();return this._setCheckOutStatus(e),this.getFile().checkOutStatus},b.Item.prototype._triggerStorageItemEvent=async function(e){gDesigner.hasEventListeners(p)&&gDesigner.trigger(new p(e,this))},b.Item.prototype._getCheckOutFileStatus=async function(){const e=this.getFile();return e.checkOutStatus&&e.checkOutStatus!==r.default.FILE_STATUS.LOADING?e.checkOutStatus:this._getClient().getCheckOutFileStatus(e)},b.Item.prototype.getMimeType=function(){return this.getFile().type},b.Item.prototype.isEmailFromCorporateDomain=async function(e){const t=this._getClient();return!!await t.getAccountByEmail(e).catch(()=>null)},b.Item.prototype._exportDocumentToCDR=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(async(o,i)=>{(0,a.prepareCDRforSaving)(e,(function(e){return i(e)}),t,n,(function(e){return o(new Blob([e]))}))})},b.Item.prototype._getClient=function(){let e=this.getCloudClient();const t=this.getFile();return!e&&t&&t.settings&&(e=r.default.getInstance(t.settings),this.setCloudClient(e)),e},b.Item.prototype._setExtension=function(e){const t=e||this.getFile();t&&t.type&&(["application/vnd.corel-draw","application/cdr"].includes(t.type)?this._ext="CDR":"application/des"===t.type&&(this._ext="DES"))},b.Item.prototype.getMyPermissionsList=async function(){const e=this._getClient(),t=this.getFile(),{High:n,Low:o}=await e.getFileEffectiveBasePermissions(t).catch(()=>({High:0,Low:0}));if(new l.default(n,o).hasPermission(l.default.Permissions.EditListItems)){const n=await e._getUser(),o=await e.getFileCreator(t);return[{email:n.getEmail(),role:c.ShareRoles.ContentEditor.id},{email:o.getEmail(),role:c.ShareRoles.Owner.id}]}return[]},b.Item.prototype.toString=function(){return"[Object GSharePointStorage.Item]"},e.exports=b},function(e,t,n){"use strict";var o=n(1);n(162);function i(){}o.GObject.inheritAndMix(i,o.GObject);var a=null;i.TYPE={PRINT:"preset-print",WEB:"preset-web",SOCIAL:"preset-social",SCREEN:"preset-screen",MERCH:"preset-merch"},i.getPresets=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return a&&!e||(a=[{id:i.TYPE.PRINT,name:o.GLocale.get(new o.GLocaleKey("GPresets","preset-title.print")),nameEn:o.GLocale.get(new o.GLocaleKey("GPresets","preset-title.print"),void 0,o.GLocaleLanguage.English),subTitle:o.GLocale.get(new o.GLocaleKey("GPresets","preset-sub-title.print")),localeClass:new o.GLocaleKey("GPresets","preset-title.print"),icon:"preset-print",default:6,layouts:[{id:"4a0",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.4a0")),localeClass:new o.GLocaleKey("GPresets","presets.4a0"),unit:"mm",width:1682,height:2378,dpi:300},{id:"2a0",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.2a0")),localeClass:new o.GLocaleKey("GPresets","preset.2a0"),unit:"mm",width:1189,height:1682,dpi:300},{id:"a0",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.a0")),localeClass:new o.GLocaleKey("GPresets","preset.a0"),unit:"mm",width:841,height:1189,dpi:300},{id:"a1",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.a1")),localeClass:new o.GLocaleKey("GPresets","preset.a1"),unit:"mm",width:594,height:841,dpi:300},{id:"a2",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.a2")),localeClass:new o.GLocaleKey("GPresets","preset.a2"),unit:"mm",width:420,height:594,dpi:300},{id:"a3",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.a3")),localeClass:new o.GLocaleKey("GPresets","preset.a3"),unit:"mm",width:297,height:420,dpi:300},{id:"a4",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.a4")),localeClass:new o.GLocaleKey("GPresets","preset.a4"),unit:"mm",width:210,height:297,dpi:300},{id:"a5",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.a5")),localeClass:new o.GLocaleKey("GPresets","preset.a5"),unit:"mm",width:148,height:210,dpi:300},{id:"a6",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.a6")),localeClass:new o.GLocaleKey("GPresets","preset.a6"),unit:"mm",width:105,height:148,dpi:300},{id:"a7",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.a7")),localeClass:new o.GLocaleKey("GPresets","preset.a7"),unit:"mm",width:74,height:105,dpi:300},{id:"a8",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.a8")),localeClass:new o.GLocaleKey("GPresets","preset.a8"),unit:"mm",width:52,height:74,dpi:300},{id:"a9",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.a9")),localeClass:new o.GLocaleKey("GPresets","preset.a9"),unit:"mm",width:37,height:52,dpi:300},{id:"a10",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.a10")),localeClass:new o.GLocaleKey("GPresets","preset.a10"),unit:"mm",width:26,height:37,dpi:300},{id:"us-letter-portrait",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.us-letter-portrait")),localeClass:new o.GLocaleKey("GPresets","preset.us-letter-portrait"),unit:"in",width:8.5,height:11,dpi:300},{id:"us-letter-landscape",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.us-letter-landscape")),localeClass:new o.GLocaleKey("GPresets","preset.us-letter-landscape"),unit:"in",width:11,height:8.5,dpi:300},{id:"business-card",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.business-card")),localeClass:new o.GLocaleKey("GPresets","preset.business-card"),unit:"mm",width:85,height:55,dpi:300},{id:"flyer",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.flyer")),localeClass:new o.GLocaleKey("GPresets","preset.flyer"),unit:"in",width:5,height:7,dpi:300},{id:"postcard",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.postcard")),localeClass:new o.GLocaleKey("GPresets","preset.postcard"),unit:"mm",width:148,height:105,dpi:300}]},{id:i.TYPE.WEB,name:o.GLocale.get(new o.GLocaleKey("GPresets","preset-title.web")),nameEn:o.GLocale.get(new o.GLocaleKey("GPresets","preset-title.web"),void 0,o.GLocaleLanguage.English),subTitle:o.GLocale.get(new o.GLocaleKey("GPresets","preset-sub-title.web")),localeClass:new o.GLocaleKey("GPresets","preset-title.web"),icon:"preset-web",layouts:[{id:"blog-cover",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.blog-cover")),localeClass:new o.GLocaleKey("GPresets","preset.blog-cover"),unit:"px",width:560,height:315},{id:"blog-graphic",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.blog-graphic")),localeClass:new o.GLocaleKey("GPresets","preset.blog-graphic"),unit:"px",width:800,height:1200},{id:"website-small",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.website-small")),localeClass:new o.GLocaleKey("GPresets","preset.website-small"),unit:"px",width:1024,height:768},{id:"website-normal",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.website-normal")),localeClass:new o.GLocaleKey("GPresets","preset.website-normal"),unit:"px",width:1280,height:800},{id:"website-medium",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.website-medium")),localeClass:new o.GLocaleKey("GPresets","preset.website-medium"),unit:"px",width:1366,height:768},{id:"website-large",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.website-large")),localeClass:new o.GLocaleKey("GPresets","preset.website-large"),unit:"px",width:1440,height:900},{id:"website-huge",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.website-huge")),localeClass:new o.GLocaleKey("GPresets","preset.website-huge"),unit:"px",width:1920,height:1280},{id:"full-website",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.full-website")),localeClass:new o.GLocaleKey("GPresets","preset.full-website"),unit:"px",width:1440,height:3072}]},{id:i.TYPE.SOCIAL,name:o.GLocale.get(new o.GLocaleKey("GPresets","preset-title.social")),nameEn:o.GLocale.get(new o.GLocaleKey("GPresets","preset-title.social"),void 0,o.GLocaleLanguage.English),subTitle:o.GLocale.get(new o.GLocaleKey("GPresets","preset-sub-title.social")),localeClass:new o.GLocaleKey("GPresets","preset-title.social"),icon:"preset-social",layouts:[{id:"facebook-cover",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.facebook-cover")),localeClass:new o.GLocaleKey("GPresets","preset.facebook-cover"),unit:"px",width:820,height:312},{id:"twitter-cover",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.twitter-cover")),localeClass:new o.GLocaleKey("GPresets","preset.twitter-cover"),unit:"px",width:1500,height:500},{id:"blog-post",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.blog-post")),localeClass:new o.GLocaleKey("GPresets","preset.blog-post"),unit:"px",width:800,height:1200},{id:"youtube-cover",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.youtube-cover")),localeClass:new o.GLocaleKey("GPresets","preset.youtube-cover"),unit:"px",width:2560,height:1440},{id:"google-cover",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.google-cover")),localeClass:new o.GLocaleKey("GPresets","preset.google-cover"),unit:"px",width:1084,height:610},{id:"google-business-profile",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.google-business-profile")),localeClass:new o.GLocaleKey("GPresets","preset.google-business-profile"),unit:"px",width:250,height:250},{id:"google-business-cover",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.google-business-cover")),localeClass:new o.GLocaleKey("GPresets","preset.google-business-cover"),unit:"px",width:1080,height:608},{id:"google-business-post",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.google-business-post")),localeClass:new o.GLocaleKey("GPresets","preset.google-business-post"),unit:"px",width:497,height:373},{id:"linkedin-cover",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.linkedin-cover")),localeClass:new o.GLocaleKey("GPresets","preset.linkedin-cover"),unit:"px",width:1128,height:191},{id:"twitch-cover",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.twitch-cover")),localeClass:new o.GLocaleKey("GPresets","preset.twitch-cover"),unit:"px",width:1200,height:480},{id:"twitter-post-small",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.twitter-post")),localeClass:new o.GLocaleKey("GPresets","preset.twitter-post"),unit:"px",width:1600,height:900},{id:"twitter-post-large",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.twitter-post")),localeClass:new o.GLocaleKey("GPresets","preset.twitter-post"),unit:"px",width:1920,height:1080},{id:"twitter-profile",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.twitter-profile")),localeClass:new o.GLocaleKey("GPresets","preset.twitter-profile"),unit:"px",width:400,height:400},{id:"twitter-story",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.twitter-story")),localeClass:new o.GLocaleKey("GPresets","preset.twitter-story"),unit:"px",width:1200,height:675},{id:"facebook-post",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.facebook-post")),localeClass:new o.GLocaleKey("GPresets","preset.facebook-post"),unit:"px",width:1200,height:630},{id:"facebook-profile",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.facebook-profile")),localeClass:new o.GLocaleKey("GPresets","preset.facebook-profile"),unit:"px",width:180,height:180},{id:"facebook-story",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.facebook-story")),localeClass:new o.GLocaleKey("GPresets","preset.facebook-story"),unit:"px",width:1080,height:1920},{id:"facebook-app",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.facebook-app")),localeClass:new o.GLocaleKey("GPresets","preset.facebook-app"),unit:"px",width:940,height:788},{id:"facebook-ad",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.facebook-ad")),localeClass:new o.GLocaleKey("GPresets","preset.facebook-ad"),unit:"px",width:1080,height:1080},{id:"instagram-post",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.instagram-post")),localeClass:new o.GLocaleKey("GPresets","preset.instagram-post"),unit:"px",width:1080,height:1080},{id:"instagram-profile",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.instagram-profile")),localeClass:new o.GLocaleKey("GPresets","preset.instagram-profile"),unit:"px",width:110,height:110},{id:"instagram-story",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.instagram-story")),localeClass:new o.GLocaleKey("GPresets","preset.instagram-story"),unit:"px",width:1080,height:1920},{id:"instagram-thumbnail",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.instagram-thumbnail")),localeClass:new o.GLocaleKey("GPresets","preset.instagram-thumbnail"),unit:"px",width:161,height:161},{id:"tumblr-graphic",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.tumblr-graphic")),localeClass:new o.GLocaleKey("GPresets","preset.tumblr-graphic"),unit:"px",width:1280,height:1920},{id:"pinterest-pin",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.pinterest-pin")),localeClass:new o.GLocaleKey("GPresets","preset.pinterest-pin"),unit:"px",width:1e3,height:1500},{id:"twitch-video",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.twitch-video")),localeClass:new o.GLocaleKey("GPresets","preset.twitch-video"),unit:"px",width:1280,height:720},{id:"linkedin-banner",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.linkedin-banner")),localeClass:new o.GLocaleKey("GPresets","preset.linkedin-banner"),unit:"px",width:1584,height:396},{id:"linkedin-profile",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.linkedin-profile")),localeClass:new o.GLocaleKey("GPresets","preset.linkedin-profile"),unit:"px",width:400,height:400},{id:"linkedin-post",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.linkedin-post")),localeClass:new o.GLocaleKey("GPresets","preset.linkedin-post"),unit:"px",width:1080,height:1080},{id:"dribble-shot",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.dribble-shot")),localeClass:new o.GLocaleKey("GPresets","preset.dribble-shot"),unit:"px",width:2800,height:2100,displaySize:!0}]},{id:i.TYPE.SCREEN,name:o.GLocale.get(new o.GLocaleKey("GPresets","preset-title.screen")),nameEn:o.GLocale.get(new o.GLocaleKey("GPresets","preset-title.screen"),void 0,o.GLocaleLanguage.English),subTitle:o.GLocale.get(new o.GLocaleKey("GPresets","preset-sub-title.screen")),localeClass:new o.GLocaleKey("GPresets","preset-title.screen"),icon:"preset-screen",layouts:[{id:"iphone-x",name:"iPhone X",localeClass:null,unit:"px",width:375,height:812},{id:"iphone-xr",name:"iPhone XR",localeClass:null,unit:"px",width:828,height:1792},{id:"iphone-xs-max",name:"iPhone XS Max",localeClass:null,unit:"px",width:1242,height:2688},{id:"iphone-plus",name:"iPhone 6/7/8 Plus",localeClass:null,unit:"px",width:414,height:736},{id:"iphone",name:"iPhone 6/7/8",localeClass:null,unit:"px",width:375,height:667},{id:"iphone-se",name:"iPhone 5/SE",localeClass:null,unit:"px",width:320,height:568},{id:"google-pixel-xl",name:"Google Pixel 2/XL",localeClass:null,unit:"px",width:411,height:731},{id:"android-mobile",name:o.GLocale.get(new o.GLocaleKey("GPresets","text.android-mobile")),localeClass:new o.GLocaleKey("GPresets","text.android-mobile"),unit:"px",width:360,height:640},{id:"apple-watch-38",name:"Apple Watch 38 mm",localeClass:null,unit:"px",width:272,height:340},{section:"55f6e10de679477c7bca92c4",id:"apple-watch-42mm",name:"Apple Watch 42 mm",localeClass:null,unit:"px",width:312,height:390},{id:"apple-watch-4-40mm",name:"Apple Watch 4 40 mm",localeClass:null,unit:"px",width:324,height:394},{id:"apple-watch-4-44mm",name:"Apple Watch 4 44 mm",localeClass:null,unit:"px",width:368,height:448},{id:"ipad-mini",name:"iPad 3/4/Air/Mini",localeClass:null,unit:"px",width:768,height:1024},{id:"ipad-pro",name:"iPad Pro 12.9in",localeClass:null,unit:"px",width:1024,height:1366},{id:"nexus-7",name:"Nexus 7",localeClass:null,unit:"px",width:600,height:960},{id:"nexus-9",name:"Nexus 9",localeClass:null,unit:"px",width:1024,height:768},{id:"nexus-10",name:"Nexus 10",localeClass:null,unit:"px",width:1280,height:800},{id:"surface-pro-3",name:"Surface Pro 3",localeClass:null,unit:"px",width:1440,height:960},{id:"surface-pro-4",name:"Surface Pro 4",localeClass:null,unit:"px",width:1368,height:912}]},{id:i.TYPE.MERCH,name:o.GLocale.get(new o.GLocaleKey("GPresets","preset-title.merch")),nameEn:o.GLocale.get(new o.GLocaleKey("GPresets","preset-title.merch"),void 0,o.GLocaleLanguage.English),subTitle:o.GLocale.get(new o.GLocaleKey("GPresets","preset-sub-title.merch")),localeClass:new o.GLocaleKey("GPresets","preset-title.merch"),icon:"preset-merch",hidden:!0,layouts:[{id:"amazon-shirt",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.amazon-shirt-pullover")),localeClass:new o.GLocaleKey("GPresets","preset.amazon-shirt-pullover"),unit:"in",dpi:300,template:"amazon_shirts",includes:[{name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.amazon-shirt")),localeClass:new o.GLocaleKey("GPresets","preset.amazon-shirt"),width:15,height:18,displaySize:!0},{name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.amazon-pullover")),localeClass:new o.GLocaleKey("GPresets","preset.amazon-pullover"),width:15,height:13.5,displaySize:!0}]},{id:"amazon-popsocket",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.amazon-popsocket")),localeClass:new o.GLocaleKey("GPresets","preset.amazon-popsocket"),unit:"px",dpi:72,width:485,height:485,template:"amazon_popsockets"},{id:"teepublic-shirt",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.teepublic-shirt")),localeClass:new o.GLocaleKey("GPresets","preset.teepublic-shirt"),unit:"px",dpi:72,width:1500,height:1995,template:"teepublic_shirts"},{id:"cafepress-shirt",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.cafepress-shirt")),localeClass:new o.GLocaleKey("GPresets","preset.cafepress-shirt"),unit:"in",dpi:200,width:10,height:10,template:"cafepress_shirts"},{id:"redbubble-shirt",name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.redbubble-shirt")),localeClass:new o.GLocaleKey("GPresets","preset.redbubble-shirt"),unit:"px",dpi:72,template:"redbubble_shirts",includes:[{name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.redbubble-shirt-standard")),localeClass:new o.GLocaleKey("GPresets","preset.redbubble-shirt-standard"),width:2400,height:3200,displaySize:!0},{name:o.GLocale.get(new o.GLocaleKey("GPresets","preset.redbubble-shirt-long")),localeClass:new o.GLocaleKey("GPresets","preset.redbubble-shirt-long"),width:2875,height:3900,displaySize:!0}]}]}]),a},e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.downloadActiveFile=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!window.gDesigner)return!1;const n=window.gDesigner.getActiveDocument();if(!n)return!1;if(!window.gContainer)return!1;const o=window.gContainer.getStorage();if(!o)return!1;e=e||n.getExtension();const i="".concat(n.getTitle()||"Design",".").concat(e);return o.download(i,e=>{n.store(e,console.log,console.error,t)}),!0},t.downloadDataURI=function e(t,n,o,i){if(t instanceof Blob){var a=new FileReader;a.onloadend=()=>{r(a.result)},a.readAsArrayBuffer(t)}else"string"==typeof t?e(new Blob([t],i),n,o,i):r(t);function r(e){gContainer.download({buffer:e,name:n,extension:o,mime:i})}},n(17),n(169),n(18),n(29),n(231),n(204),n(177),n(178),n(179),n(180);var o=n(1),i=n(1186),a=/["\*\/:<>\?\\\|]/g,r=/[\0-\x1F\x80-\x9F]/g,s=/^\.+$/,l=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\.(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,c=/[ \.]+$/;o.GUtil.sanitizeFilename=function(e,t){return t=t||"_",e.replace(a,t).replace(r,t).replace(s,t).replace(l,t).replace(c,t).substr(0,255)},o.GUtil.dataUrlToBlob=function(e){if(!/^data:(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){0,255};ba[s\u017F]e64,/i.exec(e)){const t=e.split(","),n=t[0].split(":")[1],o=t[1];return new Blob([o],{type:n})}var t,n=e.split(";base64,"),o=n[0].split(":")[1];try{t=window.atob(n[1])}catch(e){t=""}for(var i=t.length,a=new Uint8Array(i),r=0;r<i;++r)a[r]=t.charCodeAt(r);return new Blob([a],{type:o})},o.GUtil.readACVFile=function(e){var t=new i(e),n={rgb:[],r:[],g:[],b:[]};t.seek(4);var o=t.getUint16(),a=["r","g","b"],r=null,s=null,l=null,c=null,d=null;for(n.rgb.push([0,t.getUint16()]),t.seek(t.tell()+2),c=1;c<o;c++)l=t.getUint16(),s=t.getUint16(),n.rgb.push([s,l]);for(c=0;c<3;c++)for(o=t.getUint16(),r=n[a[c]],d=0;d<o;d++)l=t.getUint16(),s=t.getUint16(),r.push([s,l]);return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class o{constructor(){this._condition=()=>!0,this._finished=!1}_do(e,t){if(!this._abort&&!this._finished&&(this._condition(t)||e)&&(this._eventClass&&gDesigner.removeEventListener(this._eventClass,this._do,this),this._runnable))try{this._runnable instanceof o?this._runnable._do(e,t):this._runnable()}finally{this._finished=!0}}listen(e){return this._eventClass=e,gDesigner.addEventListener(e,this._listenEvent,this),this}_listenEvent(e){this._do(!1,e)}when(e){return this._condition=e||this._condition,this}do(e,t){return this._runnable=e,this._do(t),this}abort(){return this._abort=!0,this._eventClass&&gDesigner.removeEventListener(this._eventClass,this._listenEvent,this),this._runnable instanceof o&&this._runnable.abort(),this}}t.default=o},function(e,t,n){"use strict";n(3);var o=n(1);function i(){}o.GObject.inherit(i,o.GEvent),i.prototype.toString=function(){return"[Object GMenuCloseEvent]"},i.EVENT=new i,e.exports=i},function(e,t,n){"use strict";var o=n(13),i=n(1),a=function(e){e.changed.escapeKey&&(e.isImmediatePropagationStopped=!0)},r={_activeMenu:null,_activeActivationCallback:null,_activeMenuMouseLocations:null,getActiveMenu:function(){return r._activeMenu},triggerGlobalActivation:function(e){r._activeMenu&&r._activeActivationCallback&&r._activeActivationCallback(e)},setActiveMenu:function(e,t,n){r._activeMenu&&(o.GPlatform.removeEventListener(o.GModifiersChangedEvent,a,r._activeMenu&&r._activeMenu.getHtmlElement()),t||r._activeMenu.close(),r._activeMenu=null,r._activeActivationCallback=null,document.removeEventListener("mousemove",r._activeMenuMouseMoveListener),document.removeEventListener("mousedown",r._activeMenuMouseUpDownListener),document.removeEventListener("mouseup",r._activeMenuMouseUpDownListener),document.removeEventListener("keydown",r._activeMenuKeyDownListener)),r._activeMenu=e,r._activeActivationCallback=n,r._activeMenu&&(o.GPlatform.addEventListener(o.GModifiersChangedEvent,a,e.getHtmlElement(),null,!0),document.addEventListener("mousemove",r._activeMenuMouseMoveListener),document.addEventListener("mousedown",r._activeMenuMouseUpDownListener),setTimeout((function(){document.addEventListener("mouseup",r._activeMenuMouseUpDownListener)}),250),document.addEventListener("keydown",r._activeMenuKeyDownListener))},_activeMenuMouseMoveListener:function(e){r._activeMenuMouseLocations||(r._activeMenuMouseLocations=[]),r._activeMenuMouseLocations.push({x:e.pageX,y:e.pageY}),r._activeMenuMouseLocations.length>3&&r._activeMenuMouseLocations.shift()},_activeMenuMouseUpDownListener:function(e){e.cancelable&&r.setActiveMenu(null)},_activeMenuKeyDownListener:function(e){27==e.keyCode&&r.setActiveMenu(null)},createActionMenu:function(e,t){for(var n=[],o=function(e,o,i){e.getItemCount()>0&&(function(e){for(var t=0;t<n.length;++t)if(n[t].item===e)return n[t].group}(e.getItem(e.getItemCount()-1))!==i&&e.addItem(t.createDivider()));n.push({item:o,group:i})},a=0;a<e.length;++a){var r=e[a];if(r.isAvailable()){var s=i.GLocale.get(r.getCategory()),l=r.getGroup(),c=s?s.split("/"):null,d=l?[""].concat(l.split("/")):null;if(d&&c&&c.length!==d.length-1)throw new Error("Number of categories different thant number of groups.");var u=t;if(c)for(var p=0;p<c.length;++p){s=c[p],l=d?d[p]:null;var g=u.findItem(s);g||((g=t.createMenuItem(!0)).setCaption(s),o(u,g,l),u.addItem(g)),u=g.getMenu()}var h=t.createMenuItem();h.setAction(r),o(u,h,d?d[d.length-1]:null),u.addItem(h)}}}};e.exports=r},function(e,t,n){"use strict";n(3);var o=n(1),i=n(27),a=n(16);function r(){}o.GObject.inherit(r,i),r.ID="help.purchase",r.TITLE=new o.GLocaleKey("GPurchaseProAction","title"),r.prototype.getId=function(){return r.ID},r.prototype.getTitle=function(){return r.TITLE},r.prototype.getCategory=function(){return a.CATEGORY_HELP},r.prototype.getGroup=function(){return"help"},r.prototype.isVisible=function(){if(!gDesigner.isInAppPurchaseAllowed())return!1;var e=gDesigner.getLicense();return!(gDesigner.isAnonymous()||e.isPro()&&!e.isExpired())},r.prototype.isEnabled=function(){var e=gDesigner.getLicense();return!(e.isPro()&&!e.isExpired())},r.prototype.execute=function(){gDesigner.openPaymentDialog()},r.prototype.getStyleClass=function(){return"purchase-pro-menu-item"},r.prototype.noHover=function(){return!0},r.prototype.toString=function(){return"[GObject GPurchaseProAction]"},e.exports=r},function(e,t,n){"use strict";var o=n(1);function i(e,t){this.type=e,this.fileId=t}o.GObject.inherit(i,o.GEvent),i.Type={Enable:1,Disable:0,Close:2},i.prototype.fileId=null,i.prototype.type=null,e.exports=i},function(e,t,n){"use strict";var o=n(14);n(17),n(26),n(181),n(51),n(3),n(22);var i=n(45),a=n(1),r=n(61),s=o(n(326)),l=n(115),c=n(836);n(162);const d=n(125);function u(){this._elements=[]}a.GObject.inherit(u,l),u.prototype._panel=null,u.prototype._document=null,u.prototype._elements=null,u.prototype._getBlendingProperties=function(){var e=this;return $("<select></select>").attr("data-property","_sbl").gBlendMode().append($('<optgroup label="'+a.GLocale.get(new a.GLocaleKey("GAppearanceProperties","text.masking"))+'"></optgroup>').append($("<option></option>").attr("value","m").text(a.GLocale.get(new a.GLocaleKey("GAppearanceProperties","blending.mask")))).append($("<option></option>").attr("value","!m").text(a.GLocale.get(new a.GLocaleKey("GAppearanceProperties","blending.inverse-mask"))))).gRichTooltip(r.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GAppearanceProperties","text.blend-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GAppearanceProperties","text.blend-tooltip-description")),middle:!1,learnMore:"https://documentation.corelvector.com/colors-gradients-textures/blending-modes/"})).on("change",(function(t){gDesigner.stats("appearance_change_blending",$(t.target).val()),e._assignProperty("_sbl",$(t.target).val(),a.GLocale.get(new a.GLocaleKey("GCommonNames","action.change-blending-mode")))}))},u.prototype.init=function(e,t){this._panel=e,this.setTouchTools([s.default.APPEARANCE_TOUCH_TOOL]);var n=function(e){var t=this;if("evenodd"===e)return $("<select></select>").attr("data-property","evenodd").append($("<option></option>").attr("value","0").text(a.GLocale.get(new a.GLocaleKey("GCommonNames","evenodd.non-zero")))).append($("<option></option>").attr("value","1").text(a.GLocale.get(new a.GLocaleKey("GCommonNames","evenodd.non-odd")))).on("change",(function(){gDesigner.stats("appearance_toggle_evenodd","1"===$(this).val()?"activate":"deactivate"),t._assignProperty("evenodd","1"===$(this).val(),a.GLocale.get(new a.GLocaleKey("GCommonNames","action.change-fill-rule")))}));if("_sbl"===e)return t._getBlendingProperties();if("opacity-slider"===e)return $("<div/>").attr("data-property","_stop").addClass("gravit-icon-touch-transparency").gInputSlider(Object.assign({},c.prototype.OPACITY_DEFAULT,{richTooltipConfig:r.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GAppearanceProperties","text.opacity-slider-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GAppearanceProperties","text.opacity-slider-tooltip-description"))})})).on("mousedown",(function(){t._document.getEditor().hideSelection(),$(document).one("mouseup",(function(){t._document.getEditor().resetHideSelection()}))})).on("input",(function(e){for(var n=$(e.target),o=n.attr("data-property"),i=parseInt(n.gInputSlider("value"))/100,r=0;r<t._elements.length;++r)t._elements[r].setProperty(o,i,!1,!1,!0);t._panel.find('[type="text"][data-property="'+o+'"]').gInputBox("value",a.GUtil.formatOpacity(100*i))})).on("change",(function(e){gDesigner.stats("appearance_change_opacity"),t._assignProperty($(this).attr("data-property"),parseFloat($(this).gInputSlider("value"))/100,"Change opacity")}));if("opacity-input"===e)return $("<input>").attr("type","text").attr("data-property","_stop").on("change",(function(e){gDesigner.stats("appearance_change_opacity"),t._assignProperty($(this).attr("data-property"),a.GLength.parseEquationValue($(this).gInputBox("value"))/100,"Change opacity")})).gInputBox({minValue:0,maxValue:100,incrementValue:gDesigner.getOpacityIncrement(),postfix:"%"});throw new Error("Unknown input property: "+e)}.bind(this);$("<div></div>").addClass("appearance-opacity-property").gPropertyRow({label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.opacity")),columns:[{width:"auto",clazz:"opacity-slider-col",content:n("opacity-slider")},{width:"5px"},{clazz:"opacity-input-col",content:n("opacity-input")}]}).appendTo(this._panel),$("<div></div>").addClass("appearance-blending-property").gPropertyRow({label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.blending")),columns:[{width:"100%",content:n("_sbl")}]}).appendTo(this._panel);var o=this,i=gDesigner.getLicense();$("<div/>").addClass("g-property-row appearance-style-property").append($("<label/>").addClass("property-label").append($("<span />").addClass("vertical-align").text(a.GLocale.get(new a.GLocaleKey("GAppearanceProperties","text.style"))))).append($("<div/>").addClass("style-selector-container").css("display","flex").append($("<div/>").addClass("style-selector-inner-wrapper").css({display:"flex",width:"100%",overflow:"hidden"}).append($("<div/>").addClass("g-styles-preview").css("margin-right","5px").css("align-self","center").css("display","none")).append($("<div/>").addClass("g-select").addClass("g-styles-field-container").css("overflow","hidden").css("margin-right","5px").append($("<span/>").css({width:"95%",alignSelf:"center",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}).attr("type","text").addClass("g-styles-field").attr("data-property","_styles")).gDesignerStyleEditor().gRichTooltip(r.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GAppearanceProperties","text.shared-styles-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GAppearanceProperties","text.shared-styles-tooltip-description")),middle:!1,isPro:!gDesigner.isEnabledProFeatures()||!(i.isPro()&&!i.isExpired()),learnMore:"https://documentation.corelvector.com/organizing-your-designs/shared-styles/"})))).append($("<button></button>").addClass("g-style-sync").addClass("g-disabled").on("click",(function(){if(gDesigner.stats("appearance_click_stylebutton"),!$(this).hasClass("g-disabled")&&o._elements&&o._elements.length>0){var e=o._elements[0].getReferencedStyle();e.assignStyleFrom(o._elements[0]);var t=gDesigner.createNewStylePreview(e,!0,o._elements[0]instanceof a.GText);t&&o._addPreview(t),$(this).addClass("g-disabled")}})))).appendTo(this._panel)},u.prototype.update=function(e,t){if(this._updateUI(),this._document&&(gDesigner.removeEventListener(d,this._settingChanged,this),this._document.getScene().removeEventListener(a.GNode.AfterInsertEvent,this._styleChanged),this._document.getScene().removeEventListener(a.GNode.AfterRemoveEvent,this._styleChanged),this._document.getScene().removeEventListener(a.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange),this._document.getScene().removeEventListener(a.GElement.AfterFlagChangeEvent,this._afterFlagChange),this._document=null),this._elements=[],e){gDesigner.addEventListener(d,this._settingChanged,this);for(var n=0;n<t.length;++n){var o=t[n];o.hasMixin(a.GStylable)&&o.getStylePropertySets().indexOf(a.GStylable.PropertySet.Style)>=0&&this._elements.push(o)}if(this._elements.length)return this._document=e,this._document.getScene().addEventListener(a.GNode.AfterInsertEvent,this._styleChanged,this),this._document.getScene().addEventListener(a.GNode.AfterRemoveEvent,this._styleChanged,this),this._document.getScene().addEventListener(a.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document.getScene().addEventListener(a.GElement.AfterFlagChangeEvent,this._afterFlagChange,this),this._updateProperties(),!0}return!1},u.prototype._updateUI=function(){let e=this._panel.find(".g-style-sync");gDesigner.isTouchEnabled()?(e.text(""),e.append($("<span></span>").addClass("g-style-sync-refresh-item"))):e.text(a.GLocale.get(new a.GLocaleKey("GAppearanceProperties","action.sync")))},u.prototype._settingChanged=function(e){"touch"===e.key&&this._updateUI()},u.prototype._afterFlagChange=function(e){if(e.flag===a.GNode.Flag.Selected&&(e.node instanceof a.GPGEdge||e.node instanceof a.GPGFacet)){var t=e.node.getParent()?e.node.getParent().getParent():null;t&&this._elements.indexOf(t)>=0&&this._updateProperties()}},u.prototype._afterPropertiesChange=function(e){e.temporary||e.node!==this._elements[0]||this._updateProperties(),this._styleChanged()},u.prototype._styleChanged=function(){1===this._elements.length&&this._checkSyncState()},u.prototype._updateProperties=function(){if(this._elements&&this._elements.length){var e=this._elements[0],t=i.GElementEditor.getEditor(e),n=function(n,o,i){var a=t?t.getPartsProperty(n):null;if(a){if(a.values.length){if(1==a.values.length||o)return a.values[0];for(var r=a.values,s=r[0],l=1;l<r.length;++l)if(r[l]!==s)return i;return s}return i}return e.getProperty(n)},o=100*n("_stop",!1,null);this._panel.find('.g-input-slider[data-property="_stop"]').gInputSlider("value",null!==o?o:100),this._panel.find('[type="text"][data-property="_stop"]').gInputBox("value",a.GUtil.formatOpacity(o)),this._panel.find('[data-property="_sbl"]').val(n("_sbl",!0));var r=null,s=null;if(1===this._elements.length&&this._elements[0].hasProperty("sref")&&this._elements[0].getReferencedStyle()){var l=this._elements[0].getReferencedStyle();r=gDesigner.getStylePreview(l,this._elements[0]instanceof a.GText),s=l.getProperty("name")}if(this._checkSyncState(),r)this._addPreview(r),this._panel.find(".g-styles-field").text(s),this._panel.find(".g-styles-field").removeClass("g-disabled");else{for(var c=!1,d=0;d<this._elements.length;++d)this._elements[0].hasProperty("sref")&&this._elements[d].getReferencedStyle()&&(c=!0);c&&this._elements.length>1?(this._panel.find(".g-styles-preview").empty(),this._panel.find(".g-styles-preview").css("display","none"),this._panel.find(".g-styles-field").text(a.GLocale.get(new a.GLocaleKey("GAppearanceProperties","text.multiple-selection"))),this._panel.find(".g-styles-field").addClass("g-disabled")):(this._panel.find(".g-styles-preview").empty(),this._panel.find(".g-styles-preview").css("display","none"),this._panel.find(".g-styles-field").text(a.GLocale.get(new a.GLocaleKey("GAppearanceProperties","text.no-style"))),this._panel.find(".g-styles-field").removeClass("g-disabled"))}}else console.warn("GAppearanceProperties: empty _elements array")},u.prototype._addPreview=function(e){this._panel.find(".g-styles-preview").empty(),this._panel.find(".g-styles-preview").css("display","").append($("<img/>").css({height:"20px",width:"20px",borderRadius:"3px"}).attr("src",e))},u.prototype._assignProperty=function(e,t,n){this._assignProperties([e],[t],n)},u.prototype._assignProperties=function(e,t,n){if(this._document){var o=this._document.getEditor();o.beginTransaction();try{for(var a=0;a<this._elements.length;++a){this._elements[a];var r=i.GElementEditor.getEditor(this._elements[a]);r&&r.applyPropertiesToParts(e,t)||this._elements[a].setProperties(e,t)}}finally{o.commitTransaction(n)}}else console.warn("GAppearanceProperties: empty _document property")},u.prototype._checkSyncState=function(){this._elements&&this._elements.length>0&&this._elements[0].hasProperty("sref")&&!this._elements[0].equalsStyle()?this._panel.find(".g-style-sync").removeClass("g-disabled"):this._panel.find(".g-style-sync").addClass("g-disabled")},u.prototype.toString=function(){return"[Object GAppearanceProperties]"},e.exports=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleDragForDeleteIcon=function(e,t,n,o,i,a){if(!n)return!1;var r=!1;if(e.clientX<n.left||e.clientY<n.top||e.clientY>n.top+o){var s=gDesigner.isTouchEnabled()?30:10,l=e.clientX-i-t.outerWidth()-s,c=e.clientY-a;"none"===t.css("display")&&t.css("display","block"),t.css({top:c,left:l}),r=!0}else t.css("display","none"),r=!1;return r}},function(e,t,n){"use strict";var o=n(14);n(17),n(51),n(22);var i=n(13),a=n(45),r=n(1),s=n(61),l=o(n(326)),c=o(n(786)),d=o(n(185)),u=n(1138),p=o(n(548)),g=n(9),h=n(115),f=n(435);const m=n(589),y=n(37);function v(){}r.GObject.inherit(v,h),v.prototype._panel=null,v.prototype._toolbar=null,v.prototype._elements=null,v.prototype._document=null,v.prototype._advancedStrokePanel=null,v.prototype._styleEditorChange=!1,v.prototype._styleEdOn=!1,v.prototype._ownChange=!1,v.prototype._chooserElem=null,v.prototype.init=function(e,t){this._panel=e.addClass("border-properties-panel"),this._toolbar=t,this.setTouchTools([new l.default({id:"border",icon:"gravit-icon-touch-border",panel:this._panel,toolbar:this._toolbar,panelWidth:"368px"})]),$("<label></label>").text(r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","title"))).appendTo(t);var n=this;this._advancedStrokePanel=$("<div></div>").css("width","280px").gOverlay({releaseOnClose:!1}),this._advancedStrokePanel.parent().addClass("border-settings");var o=function(e,t,n){var o=this._getSelectedPaintLayer();o||(o=$(this._panel).find(".border-block:last").data("paintLayer")),o&&this._assign(o,e,t,n)}.bind(this),i=function(e,t,n){this._getSelectedPaintLayer()?this._assign(this._getSelectedPaintLayer(),e,t,n):this._panel.find(".border-block").each(function(o,i){var a=$(i).data("paintLayer");a&&this._assign(a,e,t,n)}.bind(this))}.bind(this),u=function(e){var t=this;if("_bw"===e||"_bml"===e)return $("<input>").attr("type","text").attr("data-property",e).on("change",(function(){var n=t._getSelectedPaintLayer();if(n||(n=$(t._panel).find(".border-block:last").data("paintLayer")),t._getProperty(n,"_blj")===r.GPaintCanvas.LineJoin.Miter){var i=r.GLength.parseEquationValue($(this).val());gDesigner.stats("border_change_miterlimit",i),null!==i&&i>0?o(["_vs",e],[!0,i]):t._updateProperties()}})).gInputBox();if("_bds"===e)return $("<input>").attr("type","text").attr("data-property",e).on("change",(function(){var t=[];gDesigner.stats("border_change_dash"),$(this).closest(".columns").find('[data-property="_bds"]').each((function(e,n){var o=r.GLength.parseEquationValue($(this).val());null!==o&&o>=0&&t.push(o)})),i(["_vs",e],[!0,t])})).gInputBox();if(0===e.indexOf("_ba-")){var n="",a="",s=e.substr("_ba-".length);switch(s){case r.GStylable.BorderAlignment.Inside:n="gravit-icon-line-stroke-inside",a=r.GLocale.get(new r.GLocaleKey("GStylable","border-alignment.inside"));break;case r.GStylable.BorderAlignment.Center:n="gravit-icon-line-stroke-center",a=r.GLocale.get(new r.GLocaleKey("GStylable","border-alignment.center"));break;case r.GStylable.BorderAlignment.Outside:n="gravit-icon-line-stroke-outside",a=r.GLocale.get(new r.GLocaleKey("GStylable","border-alignment.outside"))}return $("<button></button>").addClass("g-icon g-flat").css("width","33.3%").attr("data-property",e).attr("data-title",a).on("click",(function(){var e=s,t=Object.keys(r.GStylable.BorderAlignment);for(var n of t)if(s===r.GStylable.BorderAlignment[n]){e=n;break}gDesigner.stats("border_change_align",e),i(["_vs","_ba"],[!0,s])})).append($("<span></span>").addClass(n))}if(0===e.indexOf("_blc-")){n="",a="";var l=e.substr("_blc-".length);switch(l){case r.GPaintCanvas.LineCap.Butt:n="gravit-icon-line-cap-butt",a=r.GLocale.get(new r.GLocaleKey("GPaintCanvas","linecap.butt"));break;case r.GPaintCanvas.LineCap.Round:n="gravit-icon-line-cap-round",a=r.GLocale.get(new r.GLocaleKey("GPaintCanvas","linecap.round"));break;case r.GPaintCanvas.LineCap.Square:n="gravit-icon-line-cap-square",a=r.GLocale.get(new r.GLocaleKey("GPaintCanvas","linecap.square"))}return $("<button></button>").addClass("g-icon g-flat").css("width","33.3%").attr("data-title",a).attr("data-property",e).on("click",(function(){gDesigner.stats("border_change_cap",l),i(["_vs","_blc"],[!0,l])})).append($("<span></span>").addClass(n))}if(0===e.indexOf("_blj-")){n="",a="";var c=e.substr("_blj-".length);switch(c){case r.GPaintCanvas.LineJoin.Bevel:n="gravit-icon-line-join-bevel",a=r.GLocale.get(new r.GLocaleKey("GPaintCanvas","linejoin.bevel"));break;case r.GPaintCanvas.LineJoin.Round:n="gravit-icon-line-join-round",a=r.GLocale.get(new r.GLocaleKey("GPaintCanvas","linejoin.round"));break;case r.GPaintCanvas.LineJoin.Miter:n="gravit-icon-line-join-miter",a=r.GLocale.get(new r.GLocaleKey("GPaintCanvas","linejoin.miter"))}return $("<button></button>").addClass("g-icon g-flat").css("width","33.3%").attr("data-title",a).attr("data-property",e).on("click",(function(){gDesigner.stats("border_change_join",c),i(["_vs","_blj"],[!0,c])})).append($("<span></span>").addClass(n))}if("_bhmo"===e||"_btmo"===e)return $("<label></label>").addClass("g-switch").append($("<input>").attr("type","checkbox").attr("data-property",e).on("change",(function(t){gDesigner.stats("border_toggle_markersoutline",$(this).prop("checked")?"enable":"disable"),i([e],[$(this).prop("checked")])}))).append($("<div></div>"));if("_bhmi"===e||"_btmi"===e)return $("<div/>").attr("data-property",e).gInputSlider({type:"range",min:0,max:100,step:1}).on("mousedown",(function(){var e=t._document.getEditor();e.hideSelection(),$(document).one("mouseup",(function(){e.resetHideSelection()}))})).on("input",(function(t){var n=$(t.target),o=parseInt(n.gInputSlider("value"))/100;i([e],[o])})).on("change",(function(t){gDesigner.stats("border_change_markersposition"),i([e],[parseInt($(this).gInputSlider("value"))/100])}));if("_bhms"===e||"_btms"===e)return $("<input>").attr("type","text").attr("data-property",e).on("change",(function(){gDesigner.stats("border_change_tailmarkerscalation"),i([e],[r.GLength.parseEquationValue($(this).gInputBox("value"))/100])})).gInputBox({minValue:1,incrementValue:1,postfix:"%"});if("_bhm"===e||"_btm"===e)return $("<select></select>").attr("data-property",e).append($("<option></option>").attr("value","").text(r.GLocale.get(new r.GLocaleKey("GCommonNames","text.none")))).append($("<option></option>").attr("value",r.GStylable.BorderMarker.Circle).text(r.GLocale.get(new r.GLocaleKey("GStylable","border-marker.circle")))).append($("<option></option>").attr("value",r.GStylable.BorderMarker.Bullet).text(r.GLocale.get(new r.GLocaleKey("GStylable","border-marker.bullet")))).append($("<option></option>").attr("value",r.GStylable.BorderMarker.Diamond).text(r.GLocale.get(new r.GLocaleKey("GStylable","border-marker.diamond")))).append($("<option></option>").attr("value",r.GStylable.BorderMarker.Line).text(r.GLocale.get(new r.GLocaleKey("GStylable","border-marker.line")))).append($("<option></option>").attr("value",r.GStylable.BorderMarker.LineDouble).text(r.GLocale.get(new r.GLocaleKey("GStylable","border-marker.linedouble")))).append($("<option></option>").attr("value",r.GStylable.BorderMarker.Arrow).text(r.GLocale.get(new r.GLocaleKey("GStylable","border-marker.arrow")))).append($("<option></option>").attr("value",r.GStylable.BorderMarker.ArrowFat).text(r.GLocale.get(new r.GLocaleKey("GStylable","border-marker.arrowfat")))).append($("<option></option>").attr("value",r.GStylable.BorderMarker.ArrowLine).text(r.GLocale.get(new r.GLocaleKey("GStylable","border-marker.arrowline")))).append($("<option></option>").attr("value",r.GStylable.BorderMarker.ArrowDoubleLine).text(r.GLocale.get(new r.GLocaleKey("GStylable","border-marker.arrowdoubleline")))).append($("<option></option>").attr("value",r.GStylable.BorderMarker.ArrowLineBar).text(r.GLocale.get(new r.GLocaleKey("GStylable","border-marker.arrowlinebar")))).append($("<option></option>").attr("value",r.GStylable.BorderMarker.ArrowPointer).text(r.GLocale.get(new r.GLocaleKey("GStylable","border-marker.arrowpointer")))).append($("<option></option>").attr("value","#").prop("disabled",!0).text(r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","option.custom")))).on("change",(function(t){var n=$(this).val(),o=Object.keys(r.GStylable.BorderMarker);for(var a of o)if(n===r.GStylable.BorderMarker[a]){n=a;break}gDesigner.stats("border_change_headmarker",n),i([e],[$(this).val()||null])}));if(0===e.indexOf("arrow-paste-")){var d=e.substr("arrow-paste-".length);return $("<button></button>").addClass("g-flat g-icon").attr("data-title",r.GLocale.get(new r.GLocaleKey("GPasteAction","title"))).append($("<span></span>").addClass("gravit-icon-paste")).on("click",function(){gDesigner.stats("border_click_paste");var e=!1,t=r.GNode.deserialize(gDesigner.getClipboardContent(r.GNode.MIME_TYPE));if(t&&t.length)for(var n=0;n<t.length;++n)if(t[n].hasMixin(r.GVertexSource)){var o=t[n],a=r.GVertexInfo.calculateBounds(o,!0);if(a){var s=a.getSide(r.GRect.Side.BOTTOM_CENTER);i([d],[new r.GVertexContainer(new r.GVertexTransformer(o,new r.GTransform(1,0,0,-1,-s.getX(),-s.getY())))]),e=!0;break}}e||alert(r.GLocale.get(new r.GLocaleKey("GCommonNames","arrow-paste.alert")))}.bind(this))}throw new Error("Unknown input property: "+e)}.bind(this);$("<div></div>").gPropertyRow({justified:!0,columns:[{width:"50%",content:$("<div></div>").addClass("border-property-wrapper").append($("<div />").addClass("border-property-label").text(r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.ends")))).append($("<div />").addClass("border-property-content").append(u("_blc-"+r.GPaintCanvas.LineCap.Butt).addClass("g-group-start")).append(u("_blc-"+r.GPaintCanvas.LineCap.Round).addClass("g-group-element")).append(u("_blc-"+r.GPaintCanvas.LineCap.Square).addClass("g-group-end")))},{width:"50%",content:$("<div></div>").addClass("border-property-wrapper").append($("<div />").addClass("border-property-label").text(r.GLocale.get(new r.GLocaleKey("GCommonNames","text.position")))).append($("<div />").addClass("border-property-content").append(u("_ba-"+r.GStylable.BorderAlignment.Inside).addClass("g-group-start")).append(u("_ba-"+r.GStylable.BorderAlignment.Center).addClass("g-group-element")).append(u("_ba-"+r.GStylable.BorderAlignment.Outside).addClass("g-group-end")))}]}).appendTo(this._advancedStrokePanel),$("<div></div>").gPropertyRow({justified:!0,columns:[{width:"50%",content:$("<div></div>").addClass("border-property-wrapper").append($("<div />").addClass("border-property-label").text(r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.joins")))).append($("<div />").addClass("border-property-content").append(u("_blj-"+r.GPaintCanvas.LineJoin.Bevel).addClass("g-group-start")).append(u("_blj-"+r.GPaintCanvas.LineJoin.Miter).addClass("g-group-element ")).append(u("_blj-"+r.GPaintCanvas.LineJoin.Round).addClass("g-group-end")))},{width:"50%",content:$("<div />").addClass("border-property-wrapper").append($("<div />").addClass("border-property-label").text(r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.miter-limit")))).append($("<div />").addClass("border-property-content top-2px").append(u("_bml"))).gRichTooltip(s.GRichTooltipConfig.from({title:r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.miter-limit")),video:g.gApi.getRichTooltipVideoURL("Miter_Limit.mp4"),description:r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.miter-limit-tooltip-description")),learnMore:"https://documentation.corelvector.com/colors-gradients-textures/borders/#miter-limit"}))}]}).appendTo(this._advancedStrokePanel),$("<hr />").css("margin-bottom","10px").appendTo(this._advancedStrokePanel),$("<div></div>").gPropertyRow({columns:[{width:"25%",content:u("_bds"),label:r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.dash"))},{width:"25%",content:u("_bds"),label:r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.gap"))},{width:"25%",content:u("_bds"),label:r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.dash"))},{width:"25%",content:u("_bds"),label:r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.gap"))}]}).appendTo(this._advancedStrokePanel),$("<hr/>").appendTo(this._advancedStrokePanel),$("<p/>").appendTo(this._advancedStrokePanel),$("<div></div>").gPropertyRow({columns:[{width:"45%",padding:!1,content:$("<div></div>").html(r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.start-arrow")))},{width:"10%"},{width:"45%",padding:!1,content:$("<div></div>").html(r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.end-arrow")))}]}).appendTo(this._advancedStrokePanel),$("<div></div>").gPropertyRow({columns:[{width:"37%",content:u("_bhm")},{width:"8%",content:u("arrow-paste-_bhm")},{width:"10%"},{width:"37%",content:u("_btm")},{width:"8%",content:u("arrow-paste-_btm")}]}).appendTo(this._advancedStrokePanel),$("<div></div>").gPropertyRow({columns:[{width:"45%",padding:!1,content:u("_bhms")},{width:"10%"},{width:"45%",padding:!1,content:u("_btms")}]}).appendTo(this._advancedStrokePanel),$("<div></div>").gPropertyRow({columns:[{width:"45%",prefix:{label:r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.outline")),width:"50px"},padding:!1,content:u("_bhmo")},{width:"10%"},{width:"45%",prefix:{label:r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.outline")),width:"50px"},padding:!1,content:u("_btmo")}]}).appendTo(this._advancedStrokePanel),$("<div></div>").gPropertyRow({columns:[{width:"45%",label:r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.marker-position")),padding:!1,content:u("_bhmi")},{width:"10%"},{width:"45%",label:r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.marker-position")),padding:!1,content:u("_btmi")}]}).appendTo(this._advancedStrokePanel),$("<div></div>").gPropertyRow({columns:[{width:"auto",content:$("<label></label>").append($("<input />").addClass("gravit-icon-touch-check-small").attr("type","checkbox").attr("data-property","_bs").on("change",(function(){gDesigner.stats("border_change_autoscale",$(this).prop("checked")?"enabled":"disabled"),i(["_bs"],[$(this).prop("checked")])}))).append($("<span></span>").text(r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.autoscale-borders"))))}]}).appendTo(this._advancedStrokePanel),this._toolbar.addClass("list-toolbar border-toolbar"),$("<button></button>").attr("data-action","stroke-settings").attr("data-title",r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.advanced-stroke-settings"))).append($("<span></span>").addClass("gravit-icon-settings")).append($("<span></span>").addClass("gravit-icon-touch-settings")).on("click",function(e){gDesigner.stats("border_open_advancedstrokepanel"),this._updateAdvancedSettings(),this._advancedStrokePanel.gOverlay("open",$(e.target).closest("button"))}.bind(this)).gRichTooltip(s.GRichTooltipConfig.from({title:r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.advanced-stroke-settings-tooltip-title")),description:r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.advanced-stroke-settings-tooltip-description")),learnMore:"https://documentation.corelvector.com/colors-gradients-textures/borders/#advanced-stroke-settings"})).appendTo(this._toolbar),$("<button></button>").attr("data-action","remove").attr("data-title",r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","action.remove-selected-border"))).append($("<span></span>").addClass("gravit-icon-trash")).append($("<span></span>").addClass("gravit-icon-touch-trash")).on("click",(function(e){gDesigner.stats("border_remove_border"),e.stopPropagation();var t=n._getSelectedPaintLayer();t&&a.GEditor.tryRunTransaction(n._elements[0],(function(){var e=[];n._iterateEqualPaintLayer(t,(function(t){e.push(t)})),r.GUtil.each(e,(function(e,t){t.getParent().removeChild(t)}))}),r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","action.remove-border")));const o=gDesigner.getRightSidebars().getSidebar(d.default.SidebarsIds.GInspectorSidebar);o.trigger(new c.default(c.default.Type.ChildRemoved,o))})).gRichTooltip(s.GRichTooltipConfig.from({title:r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.remove-border-tooltip-title")),description:r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.remove-border-tooltip-description")),learnMore:"https://documentation.corelvector.com/colors-gradients-textures/borders/"})).appendTo(this._toolbar),$("<button></button>").attr("data-action","add").attr("data-title",r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","action.add-border"))).append($("<span></span>").addClass("gravit-icon-plus")).append($("<span></span>").addClass("gravit-icon-touch-plus")).on("click",function(e){gDesigner.stats("border_add_border"),a.GEditor.tryRunTransaction(n._elements[0],(function(){const e=n._document&&n._document.getScene(),t=e&&e.getProperty("cm"),o=r.GColorHelper.convertColor(r.GRGBColor.BLACK,t||r.GColor.ColorModes.RGB);for(var i=0;i<n._elements.length;++i){var a=n._elements[i],s=new r.GStylable.BorderPaintLayer;a instanceof r.GText?s.setProperty("_ba",r.GStylable.BorderAlignment.Outside):a instanceof r.GShape?a instanceof r.GEllipse&&a.$etp===r.GEllipse.Type.Arc?s.setProperty("_ba",r.GStylable.BorderAlignment.Center):s.setProperty("_ba",r.GStylable.BorderAlignment.Inside):a instanceof r.GPath&&!a.$closed&&s.setProperty("_ba",r.GStylable.BorderAlignment.Center),s.setProperty("_pt",o),a.getPaintLayers().appendChild(s);const e=gDesigner.getRightSidebars().getSidebar(d.default.SidebarsIds.GInspectorSidebar);e.trigger(new c.default(c.default.Type.ChildAdded,e))}}),r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","action.add-border"))),$(this._toolbar).gAccordion("toggleOpen",!0),$(this._toolbar).gAccordion("init",$(this._panel))}.bind(this)).gRichTooltip(s.GRichTooltipConfig.from({title:r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.add-border-tooltip-title")),description:r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.add-border-tooltip-description")),learnMore:"https://documentation.corelvector.com/colors-gradients-textures/borders/"})).appendTo(this._toolbar),gDesigner.getWorkspace().getStyleEdManager().addEventListener(a.GStyleEdManager.EditorEvent,this._styleEditorEventHandler,this),this._panel.data("contextmenu",!0),this._panel.on("mouseenter",e=>{gDesigner.setMouseOverContext(m.BorderPropertiesPanel,e,function(e){var t=this._panel.find(".copy-info-overlay").eq(0),n=this._panel.find(".border-block.g-selected")||null,o=n&&n.position().top||0,i=$("<span/>").addClass("copy-info-overlay").css({top:o}).text(r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.copy-border")));t&&t.remove(),this._panel.append(i),setTimeout(()=>{i.animate({opacity:0,top:"+=20"},500,i.remove)},1e3)}.bind(this)),this._panel.on("mousemove.check-context",e=>{var t=this._panel.outerHeight(),n=this._panel.offset();e.clientY>n.top+t-2&&(gDesigner.setMouseOverContext(null,null,null),this._panel.off("mousemove.check-context"))})}),this._panel.on("mouseleave",()=>{this._panel.off("mousemove.check-context"),gDesigner.setMouseOverContext(null,null,null)})},v.prototype.update=function(e,t,n){const o=this._styleEditorChange;if(this._styleEditorChange&&(this._styleEditorChange=!1),this._ownChange)return!0;if(this._chooserElem&&this._chooserElem.gPatternChooser("close"),this._document&&(this._document.getScene().removeEventListener(r.GNode.AfterInsertEvent,this._afterInsert,this),this._document.getScene().removeEventListener(r.GNode.BeforeRemoveEvent,this._beforeRemove,this),this._document.getScene().removeEventListener(r.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document=null),this._elements=[],e){for(var i=0;i<t.length;++i){var s=t[i],l=function(e,t){t.hasMixin(r.GStylable)&&t.getStylePropertySets().indexOf(r.GStylable.PropertySet.FillPaintLayers)>=0&&this._elements.push(t)}.bind(this),c=a.GElementEditor.getEditor(s);c&&c.getStylableParts()?r.GUtil.each(c.getStylableParts(),l):l(null,s)}if(this._elements.length)return this._document=e,this._document.getScene().addEventListener(r.GNode.AfterInsertEvent,this._afterInsert,this),this._document.getScene().addEventListener(r.GNode.BeforeRemoveEvent,this._beforeRemove,this),this._document.getScene().addEventListener(r.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),o||this._updateProperties(n),!0}return!1},v.prototype.openPatternChooser=function(){this._panel.find(".border-block:first-child").find('[data-property="_pt"]').find(".g-button").click()},v.prototype.openEyeDropper=function(e,t){this._panel.find(".border-block:first-child").find('[data-property="_pt"]').gPatternChooser("openEyeDropper",e,t)},v.prototype._styleEditorEventHandler=function(e){this._styleEdOn&&e.type==a.GStyleEdManager.EditorEventType.PrepareModifiedEvent&&(this._styleEditorChange=!0)},v.prototype._updateProperties=function(e){if(this._elements&&this._elements.length){this._panel.find(".border-block").remove();var t=this._elements[0].getPaintLayers().getBorderLayers();r.GUtil.each(t,function(t,n){n&&this._insertPaintLayer(n,e)}.bind(this)),this._updateToolbar()}else console.warn("GBorderPaintLayerProperties: empty _elements array")},v.prototype._updateToolbar=function(){var e=this._panel.find(".border-block").length>0;this._toolbar.toggleClass("empty-list",!e),this._toolbar.find("[data-action=stroke-settings]").css("display",e?"":"none"),this._toolbar.find("[data-action=arrow-settings]").css("display",e?"":"none"),this._toolbar.find("[data-action=remove]").css("display",e?"":"none")},v.prototype._insertPaintLayer=function(e,t){var n=this,o=!1,l=null,c=null,d=null,h=null,m=null,v=0,_=0,b=function(e){if(l){var t=$(e).data("paintLayer");if(t&&(t!==l||i.GPlatform.modifiers.shiftKey))return l.getParent()===t.getParent()}return!1},w=function(t,n,o,i){this._assign(e,t,n,o,i)}.bind(this),C=function(t){if("_pt"===t)return $("<div></div>").attr("data-property","_pt").gPatternChooser({types:[r.GColor,r.GLinearGradient,r.GRadialGradient,r.GAngularGradient,r.GBackground,r.GTexturePattern]}).on("chooseropen",(function(){n._document.getEditor().hideSelection(),gDesigner.getWorkspace().getStyleEdManager().updateEditor(e,"_pt",!1),n._setSelectedPaintLayer(e),n._styleEdOn=!0,n._chooserElem=$(this)})).on("chooserclose",(function(e,t,o){if(gDesigner.getWorkspace().getStyleEdManager().getOverlayLock(o))t();else if(n._styleEdOn=!1,gDesigner.getWorkspace().getStyleEdManager().deactivateEditor(),n._document&&(n._document.getEditor().resetHideSelection(),n._document.hasCDR())){var i=gPatternChooser.getPattern();!i||i instanceof r.GRGBColor||y.showCDRUnsupportedObjectWarning()}n._chooserElem=null})).on("patternchange",(function(e,t,n,o,i,a){var r=["_vs"],s=[!0];void 0!==t&&(r.push("_pt"),s.push(t)),"number"==typeof n&&(r.push("_op"),s.push(n));var l=null;i&&(l={chooserOn:!0},null!=a&&(l.activeStopIdx=a)),w(r,s,o,l)}));if("_bl"==t)return $("<select></select>").gBlendMode().gRichTooltip(s.GRichTooltipConfig.from({title:r.GLocale.getValue("GAppearanceProperties","text.blend-tooltip-title"),description:r.GLocale.getValue("GAppearanceProperties","text.blend-tooltip-description"),middle:!1,forceShow:!0,learnMore:g.LINKS.BLENDING_MODES_DOCUMENTATION_URL})).attr("data-property","_bl").on("change",(function(e){gDesigner.stats("border_change_blendmode",$(e.target).val()),w(["_bl"],[$(e.target).val()])}));if("_op"===t)return $("<input>").addClass("border-op").attr("data-property","_op").attr("type","text").on("change",(function(e,t){gDesigner.stats("border_change_opacity"),w(["_vs","_op"],[!0,(t||r.GLength.parseEquationValue($(this).gInputBox("value")))/100]),$(e.target).parents(".touch").find($(".transparency")).gInputSlider("value",r.GLength.parseEquationValue($(this).gInputBox("value")))})).gInputBox({minValue:0,maxValue:100,incrementValue:gDesigner.getOpacityIncrement(),postfix:"%"});if("_bw"===t)return $("<input>").attr("data-property",t).on("change",(function(){gDesigner.stats("border_change_width");var e=$(this).gUnitBox("value"),o=e?e.toUnit(r.GLength.Unit.PX):null;null!==o&&o>=0?w(["_vs",t],[!0,o]):n._updateProperties()})).gUnitBox({minValue:0,source:"border"}).gRichTooltip(s.GRichTooltipConfig.from({title:r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.border-width-tooltip-title")),description:r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.border-width-tooltip-description")),learnMore:"https://documentation.corelvector.com/colors-gradients-textures/borders/"}));if("_vs"===t)return $("<span></span>").attr("data-property","_vs").addClass("border-action border-visibility gravit-icon-touch-show").attr("data-title",r.GLocale.get(new r.GLocaleKey("GCommonNames","action.toggle-visibility"))).on("click",(function(e){gDesigner.stats("border_hide_border"),e.stopPropagation();var t=$(this).hasClass("gravit-icon-touch-hide");$(this).removeClass("gravit-icon-touch-"+(t?"hide":"show")),$(this).addClass("gravit-icon-touch-"+(t?"show":"hide")),w(["_vs"],[t])}));if("_ra"===t)return $("<div/>").addClass("transparency gravit-icon-touch-rectangle").gInputSlider({type:"range",min:0,max:100,step:1}).on("input",(function(e){var t=$(e.target),n=parseInt(t.gInputSlider("value"));t.parents(".touch").find($(".border-op")).trigger("change",[n])}));throw new Error("Unknown input property: "+t)},x=$("<div/>").addClass("g-drop-indicator"),S=$("<div></div>").addClass("border-block").addClass("g-cursor-hand-open").attr("data-drag-mode",p.default.PRESS_AND_HOLD).data("paintLayer",e).attr("draggable","true").on("mousedown",(function(e){o=gDesigner.isTouchEnabled()&&e.originalEvent&&e.originalEvent.target?!!$(e.originalEvent.target).closest(".drag-indicator").length:$(e.target).hasClass("border-block")||$(e.target).hasClass("gravit-icon-drag-indicator")||$(e.target).hasClass("columns")||$(e.target).hasClass("column"),$(e.target).closest(".border-block").toggleClass("g-draggable-disabled",!o)})).on("dragstart",(function(e){if(!o)return e.preventDefault(),void e.stopPropagation();var t=$(e.target).closest(".border-block"),s=t.offset(),d=e.originalEvent;(c=window.gDragImage()).addClass("drag-delete gravit-icon-trash"),h=n._panel.offset(),m=n._panel.outerHeight(),v=e.clientX-s.left,_=e.clientY-s.top,d.stopPropagation(),l=t.data("paintLayer"),d.dataTransfer.effectAllowed="move",d.dataTransfer.setData("text/plain","dummy_data"),n._panel.find(".border-block").each((function(e,t){$(t).append($("<div></div>").addClass("grid-drag-overlay").on("dragenter",(function(){var e=$(this.parentNode).data("paintLayer");if(b(this.parentNode)){if(l&&e&&l.getParent()===e.getParent()){var t=l.getParent(),n=t.getIndexOfChild(l),o=t.getIndexOfChild(e);n!==o&&(n<o?x.insertBefore(this.parentNode):x.insertAfter(this.parentNode))}}else x.remove()})).on("dragleave",(function(){b(this.parentNode)&&$(this).parent().find(".g-drop-indicator").remove()})).on("dragover",(function(e){var t=e.originalEvent;b(this.parentNode)&&(t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect="move")})).on("drop",(function(e){var t=$(this.parentNode).data("paintLayer");if(n._panel.find(".g-drop-indicator").remove(),n._panel.find(".grid-drag-overlay").remove(),l&&t&&l.getParent()===t.getParent()){var o=l.getParent(),s=o.getIndexOfChild(l),c=o.getIndexOfChild(t);a.GEditor.tryRunTransaction(o,(function(){if(i.GPlatform.modifiers.shiftKey){var e=l.clone();o.insertChild(e,s<c?t.getNext():t)}else s!==c&&(o.removeChild(l),o.insertChild(l,s<c?t.getNext():t))}),i.GPlatform.modifiers.shiftKey?r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","action.duplicate-border")):r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","action.move-border"))),n._updateProperties(),n._setSelectedPaintLayer(l)}l=null})))}))})).on("drag",(function(e){d=(0,u.handleDragForDeleteIcon)(e,c,h,m,v,_)})).on("dragend",(function(e){var t=e.originalEvent,o=$(e.target).closest(".border-block").closest(".border-block").data("paintLayer");if(n._panel.find(".g-drop-indicator").remove(),n._panel.find(".grid-drag-overlay").remove(),l&&o&&l.getParent()===o.getParent()){var s=l.getParent(),u=s.getIndexOfChild(l),p=s.getIndexOfChild(o);a.GEditor.tryRunTransaction(s,(function(){if(i.GPlatform.modifiers.shiftKey){var e=l.clone();s.insertChild(e,u<p?o.getNext():o)}else u!==p&&(s.removeChild(l),s.insertChild(l,u<p?o.getNext():o.getPrevious()))}),i.GPlatform.modifiers.shiftKey?r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","action.duplicate")):r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","action.move"))),n._updateProperties(),n._setSelectedPaintLayer(l)}l&&d&&a.GEditor.tryRunTransaction(n._elements[0],(function(){var e=[];n._iterateEqualPaintLayer(l,(function(t){e.push(t)})),r.GUtil.each(e,(function(e,t){t.getParent().removeChild(t)}))}),r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","action.remove-border"))),c&&c.css("display","none"),c=null,t.stopPropagation(),l=null})).on("click",(function(){gDesigner.stats("border_set_border"),n._setSelectedPaintLayer(e)})).gPropertyRow({columns:[{clazz:"drag-indicator",content:$("<div></div>").addClass("gravit-icon-drag-indicator g-cursor-hand-open gravit-icon-touch-drag-indicator")},{width:"40px",clazz:"color-preview",content:C("_pt")},{width:"40px",content:C("_bw").addClass("normal")},{width:"auto",content:C("_bl").addClass("normal")},{width:"45px",content:C("_op").addClass("normal")},{width:"20px",content:$("<span></span>").attr("data-property","_vs").addClass("border-action border-visibility gravit-icon-display normal").attr("data-title",r.GLocale.get(new r.GLocaleKey("GCommonNames","action.toggle-visibility"))).on("click",(function(e){gDesigner.stats("border_hide_border"),e.stopPropagation();var t=$(this).hasClass("gravit-icon-hide");$(this).removeClass("gravit-icon-"+(t?"hide":"display")),$(this).addClass("gravit-icon-"+(t?"display":"hide")),w(["_vs"],[t])}))},{width:"auto",content:$("<div/>").addClass("touch").gPropertyRow({columns:[{width:"40px",content:C("_bw")},{width:"auto",content:C("_bl")},{width:"60px",content:C("_vs")}]}).gPropertyRow({columns:[{width:"auto",content:C("_ra")},{width:"60px",content:C("_op")}]})}]}).prependTo(this._panel);S.find(".columns").addClass("g-cursor-hand-open"),S.find(".column").addClass("g-cursor-hand-open"),S.find(".touch").parents(".column").addClass("g-touch"),S.find(".normal").parents(".column").addClass("g-normal"),S.find('[data-property="_pt"]').parents(".column").addClass("g-color"),S.find(".transparency").parents(".touch div:last-child>div").addClass("g-transparency"),S.find(".touch").find("select").addClass("g-select").parent().append($("<span/>").addClass("gravit-icon-touch-arrowDown")),S.contextmenu({context:f.BorderPropertyPanel},(function(e){e.preventDefault();var t=$(this).data("paintLayer");n._setSelectedPaintLayer(t),$(gDesigner.getWindows().getHtmlElement()).trigger("contextmenu",{previousEvent:e,data:{openAdvancedSettings:function(){n._updateAdvancedSettings(),n._advancedStrokePanel.gOverlay("open",n._toolbar.find("[data-action=stroke-settings]"))},paintLayer:t}})})),this._setSelectedPaintLayer(e),this._updatePaintLayer(e,t),S.find(".transparency").each((function(e,t){$(t).gInputSlider("value",parseInt($(this).parents(".touch").find(".border-op").val()))}))},v.prototype._removePaintLayer=function(e){this._panel.find(".border-block").each((function(t,n){var o=$(n);if(o.data("paintLayer")===e)return o.remove(),!1}))},v.prototype._updatePaintLayer=function(e,t){var n=this;e&&(this._panel.find(".border-block").each((function(t,o){var i=$(o);if(i.data("paintLayer")===e){i.find('[data-property="_pt"]').gPatternChooser("setPattern",e.getProperty("_pt",!1,!1,!0)).gPatternChooser("value",e.getProperty("_pt",!1,!1,!0)).gPatternChooser("opacity",e.getProperty("_op",!1,!1,!0));var a=n._getProperty(e,"_bw",!1,null);i.find('[data-property="_bw"]').each((function(e,t){$(t).gUnitBox({unit:n._document.getScene().getProperty("ut")===r.GLength.Unit.PX?r.GLength.Unit.PX:r.GLength.Unit.PT,minValue:0}).gUnitBox("value",null!==a?new r.GLength(a,r.GLength.Unit.PX):null)})),i.find('[data-property="_op"]').each((function(t,n){$(n).gInputBox("value",r.GUtil.formatOpacity(100*e.getProperty("_op",!1,!1,!0)))})),i.find('[data-property="_bl"]').val(e.getProperty("_bl"));var s=e.getProperty("_vs");i.find('[data-property="_vs"]').removeClass("gravit-icon-"+(s?"hide":"display")).addClass("gravit-icon-"+(s?"display":"hide"))}})),this._updateAdvancedSettings(),t&&(t.evtType==a.GEditor.ModifiedEvent.Type.Undo||t.evtType==a.GEditor.ModifiedEvent.Type.Redo)&&t.chooserOn&&null!=t.borderLayerIndex&&e.getParent().getIndexOfChild(e)==t.borderLayerIndex&&$element.find(".preview").trigger("click",null!=t.activeStopIdx?t.activeStopIdx:null))},v.prototype._assign=function(e,t,n,o,i){if(o)this._iterateEqualPaintLayer(e,(function(e){e.setProperties(t,n,!1,!1,!0)}));else if(this._document){var s=null;if(i){var l=e.getParent().getIndexOfChild(e);s=$.extend({borderLayerIndex:l},i)}this._ownChange=!0;var c=this._document.getEditor();c.beginTransaction();try{this._iterateEqualPaintLayer(e,(function(e,o){var i=a.GElementEditor.getEditor(o);i&&i.applyPropertiesToParts(t,n)||e.setProperties(t,n)}))}finally{c.commitTransaction(r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","action.change-border-properties")),s),this._ownChange=!1}}},v.prototype._getProperty=function(e,t,n,o){return e?e.getProperty(t):null},v.prototype._afterInsert=function(e){e.node instanceof r.GStylable.BorderPaintLayer&&e.node.getOwnerStylable()===this._elements[0]&&(this._insertPaintLayer(e.node),this._updateToolbar())},v.prototype._beforeRemove=function(e){if(e.node instanceof r.GStylable.BorderPaintLayer&&e.node.getOwnerStylable()===this._elements[0]){this._removePaintLayer(e.node);for(var t=e.node.getPrevious();t&&!(t instanceof r.GStylable.BorderPaintLayer);)t=t.getPrevious();if(!(t instanceof r.GStylable.BorderPaintLayer))for(t=e.node.getNext();t&&!(t instanceof r.GStylable.BorderPaintLayer);)t=t.getNext();this._setSelectedPaintLayer(t),this._updateToolbar()}},v.prototype._afterPropertiesChange=function(e){e.node instanceof r.GStylable.BorderPaintLayer&&e.node.getOwnerStylable()===this._elements[0]&&this._updatePaintLayer(e.node)},v.prototype._updateAdvancedSettings=function(){var e=this,t=function(t){var n=this._getProperty(t,"_bds",!1,null),o=this._advancedStrokePanel;o.find('[data-property="_bds"]').each((function(e,t){$(t).val(n&&n.length>e?n[e]:"")})),o.find('[data-property^="_ba"]').each((function(n,o){var i=$(o),a=i.attr("data-property").substr("_ba-".length);if(a===r.GStylable.BorderAlignment.Inside||a===r.GStylable.BorderAlignment.Outside){for(var s,l,c=!1,d=!1,u=0,p=e._elements.length;u<p;u++){var g=e._elements[u];g instanceof r.GPath&&!g.$closed||g instanceof r.GEllipse&&g.$etp===r.GEllipse.Type.Arc?c=!0:d=!0}switch(a){case r.GStylable.BorderAlignment.Inside:l=r.GLocale.get(new r.GLocaleKey("GStylable","border-alignment.inside"));break;case r.GStylable.BorderAlignment.Outside:l=r.GLocale.get(new r.GLocaleKey("GStylable","border-alignment.outside"))}c?i.attr("disabled",!0):i.attr("disabled",!1),s=c&&d?r.GLocale.get(new r.GLocaleKey("GBorderPaintLayerProperties","text.border-alignment.disabled"))+": "+l:l,i.attr("data-title",s)}i.toggleClass("g-active",e._getProperty(t,"_ba",!0)===a)})),o.find('[data-property^="_blc"]').each((function(n,o){var i=$(o),a=i.attr("data-property").substr("_blc-".length);i.toggleClass("g-active",e._getProperty(t,"_blc",!0)===a)})),o.find('[data-property^="_blj"]').each((function(n,o){var i=$(o),a=i.attr("data-property").substr("_blj-".length);i.toggleClass("g-active",e._getProperty(t,"_blj",!0)===a)}));var i=o.find('[data-property="_bml"]');i.gInputBox("value",r.GUtil.formatNumber(this._getProperty(t,"_bml",!0))),this._getProperty(t,"_blj")!==r.GPaintCanvas.LineJoin.Miter?i.attr("disabled",!0):i.removeAttr("disabled");var a=this._getProperty(t,"_bhm",!1,null);o.find('[data-property="_bhm"]').val(a instanceof r.GVertexContainer?"#":a||"");var s=this._getProperty(t,"_btm",!1,null);o.find('[data-property="_btm"]').val(s instanceof r.GVertexContainer?"#":s||""),o.find('[data-property="_bhms"]').gInputBox("value",r.GUtil.formatNumber(100*this._getProperty(t,"_bhms",!1,1),0)),o.find('[data-property="_btms"]').gInputBox("value",r.GUtil.formatNumber(100*this._getProperty(t,"_btms",!1,1),0)),o.find('[data-property="_bhmo"]').prop("checked",this._getProperty(t,"_bhmo",!1,!1)),o.find('[data-property="_bhmi"]').gInputSlider("value",100*this._getProperty(t,"_bhmi")),o.find('[data-property="_btmo"]').prop("checked",this._getProperty(t,"_btmo",!1,!1)),o.find('[data-property="_btmi"]').gInputSlider("value",100*this._getProperty(t,"_btmi")),o.find('[data-property="_bs"]').prop("checked",this._getProperty(t,"_bs",!1,!1))}.bind(this);if(this._getSelectedPaintLayer())t(this._getSelectedPaintLayer());else{var n=$(this._panel).find(".border-block:last").data("paintLayer");n&&t(n)}},v.prototype._setSelectedPaintLayer=function(e){this._panel.find(".border-block").each((function(t,n){var o=$(n);o.toggleClass("g-selected",o.data("paintLayer")===e)})),this._document&&this._document.updateActiveStylesList("Border",e)},v.prototype._getSelectedPaintLayer=function(){return this._panel.find(".border-block.g-selected").data("paintLayer")},v.prototype._iterateEqualPaintLayer=function(e,t){if(e)for(var n=e.getParent().getBorderLayers().indexOf(e),o=0;o<this._elements.length;++o){var i=this._elements[o].getPaintLayers().getBorderLayers();r.GUtil.each(i,function(i,a){(a&&a===e||a.constructor===e.constructor&&i===n)&&t(a,this._elements[o])}.bind(this))}},e.exports=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.dateToVersionFormat=t.dateToFilePreviewFormat=void 0;const{GLocale:o}=n(1),i=e=>o.toLocaleDate(e,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"});t.dateToVersionFormat=i;const a=e=>o.toLocaleDate(new Date(e),{month:"numeric",day:"numeric",year:"2-digit",hour:"numeric",minute:"numeric"});t.dateToFilePreviewFormat=a;t.default={dateToVersionFormat:i,dateToFilePreviewFormat:a}},function(e,t,n){"use strict";n(7);const o=n(10);e.exports=class{constructor(e,t){this._worker=e,this._user=t}async updateFileSceneAndMetadata(e,t,n){throw"Not implemented"}_request(e,t){const n=o.uuid(64);return this._worker.postMessage({cmd:e,data:t,id:n,user:this._user}),n}}},function(e,t,n){"use strict";n(52),n(7),n(62);var o=n(1);const i=n(71),a=n(377),r=n(418),s=n(322),l=n(847),{GFileReviewFlow:c,gApi:d,FileStatus:u,FILE_REVIEW_ENABLED:p,Notification:g,NotificationConstants:{FILE_REVIEW_FLOW:h=[]}}=n(9);function f(){if(!p)return this;gDesigner.addEventListener(i,this._documentEvent,this),gDesigner.addEventListener(s.FileStatusUpdate,this._storageItemFileStatusEvent,this),gDesigner.addEventListener(l,this._handleShareEvent,this),gDesigner.getActiveDocument()&&(this._addDocumentEvents(gDesigner.getActiveDocument()),this._updateFromDocument(gDesigner.getActiveDocument()))}o.GObject.inherit(f,o.GEventTarget),f.UpdateEvent=function(){},o.GObject.inherit(f.UpdateEvent,o.GEvent),f.prototype._addDocumentEvents=function(e){e.addEventListener(a,this._collaborationEvent,this)},f.prototype._removeDocumentEvents=function(e){e.removeEventListener(a,this._collaborationEvent,this)},f.prototype._storageItemFileStatusEvent=async function(e){let{storageItem:t,newStatus:n}=e;this._fileId===t.getId()&&this._doc.isCollaborative()&&this._setStatus(n)&&this.trigger(new f.UpdateEvent)},f.prototype._handleShareEvent=async function(e){switch(e.type){case l.Type.Updated:await this._updateCollaboratorRoleListIfInitialized(),this.hasEventListeners(f.UpdateEvent)&&this.trigger(new f.UpdateEvent)}},f.prototype._documentEvent=async function(e){const t=e.document;switch(e.type){case i.Type.Activated:this._addDocumentEvents(t),this._updateFromDocument(t);break;case i.Type.Deactivated:this._removeDocumentEvents(t),this._updateFromDocument(t),this._doc=null;break;case i.Type.StorageItemUpdated:this._updateFromDocument(t)}},f.prototype._collaborationEvent=async function(e){const{type:t,sender:n}=e;if(n===gDesigner.getActiveDocument())switch(t){case a.Type.ShareUpdate:case a.Type.UserUpdate:await this._updateCollaboratorRoleListIfInitialized(),this.hasEventListeners(f.UpdateEvent)&&this.trigger(new f.UpdateEvent)}},f.prototype._updateFromDocument=async function(e){if(e!==this._doc&&(this._flow=null,this._fileId=null,this._status=null,this._doc=e,this._collaboratorRoleList=null,this._collaboratorList=null),this._doc&&this._doc.getId()&&this._doc.getStorageItem()&&this._doc.isCollaborative()){this._fileId=this._doc.getId();const e=await this._doc.getStorageItem().getOrCreateCollaborativeFile();e&&this._setStatus(e.status)&&this.trigger(new f.UpdateEvent)}else this._setStatus(null)&&this.trigger(new f.UpdateEvent)},f.prototype._setStatus=function(e){return this._status!==e&&(this._status=e,void 0!==this._status&&null!==this._status||(this._status=u.IN_REVIEW),void 0!==c&&c.constructor&&(this._flow=new c(this._status)),!0)},f.prototype._isCurrentUserApprover=function(){const e=gDesigner.getSyncUser();if(!e)return!1;if(!this._collaboratorList)return!1;const t=this._collaboratorList.find(t=>t.getUID()===e.getUID());return t&&t.getRole().is(r.ROLES.APPROVER_ROLE)},f.prototype._shouldStatusDisabledForApproverWithCurrentStatus=function(e){if(this._isCurrentUserApprover())switch(this._status){case u.IN_REVIEW:case u.REOPENED:return!0;case u.APPROVED:return e===u.IN_REVIEW||e===u.AWAITING_APPROVAL;case u.AWAITING_APPROVAL:return e===u.IN_REVIEW}return!1},f.prototype.getStatus=function(){return this._status},f.prototype.updateReviewStatus=function(e){return this.canUpdateToStatus(e)&&this._fileId?d.updateStatus(this._fileId,e):Promise.reject(o.GLocale.get(new o.GLocaleKey("GFileReviewManager","text.cant-update-file-to-status")))},f.prototype.canUpdateToStatus=function(e){return!!this._flow&&(this._isCurrentUserApprover()?!this._shouldStatusDisabledForApproverWithCurrentStatus(e):this._flow.canMoveTo(e))},f.prototype._updateCollaboratorRoleListIfInitialized=async function(){this._canUpdateCollaboratorList()&&this._collaboratorRoleList&&await this._updateCollaboratorRoleList()},f.prototype._canUpdateCollaboratorList=function(){return this._doc&&this._fileId},f.prototype._updateCollaboratorRoleList=async function(){if(!this._canUpdateCollaboratorList())return;const e=await gDesigner.getShareManager().getCollaboratorsCached(this._doc);e&&(this._collaboratorList=e,this._collaboratorRoleList=e.map(e=>e.getRole()))},f.prototype.hasApprovers=async function(){return!(!this._doc||!this._fileId)&&(this._collaboratorRoleList||await this._updateCollaboratorRoleList(),this._collaboratorRoleList.some(e=>e.is(r.ROLES.APPROVER_ROLE)))},f.prototype.getDocumentReviewHistory=async function(e){const t=await d.annotations.getDesignHistory(e).catch(()=>[]),n=[];for(let e=0;e<t.length;e++){const o=t[e],i=g.from(o);h.includes(i.getAction())&&n.push(i)}return n},e.exports=f},function(e,t,n){"use strict";n(52),n(7),n(62);const o=n(166),i=n(784),{gApi:a}=n(9),r={};let s=!1;const l=e=>{delete r[e.user.getUID()]};function c(e){e instanceof o||(e=new o(e)),this._user=e,s||(gDesigner.addEventListener(i,l),s=!0)}c.getUserDataFromAnnotAndUser=function(e,t){const n=e.getProperty("uid");let o=e.getProperty("name"),i="";return n===t.getUID()&&(o=t.getFirstName()||o,i=t.getLastName()||""),{id:n,name:o,last_name:i}},c.prototype.build=function(e){var t=null;const n=$("<span></span>").addClass("g-user-preview").append($("<div />").append(this._user.getUserNameInitials()).addClass("color-preview").css({"background-color":this._user.getUserColor()}));return(async e=>{if(!r.hasOwnProperty(e)){const t=await a.getUser(e,!0).catch(()=>Promise.resolve(null));r[e]=new o(t)}return r[e]})(this._user.getUID()).then(o=>{o&&(t=this._user.avatar||o.avatar)&&(t.includes("graph.microsoft.com")||"http"!==t.substr(0,4)&&"assets"!==t.substr(0,6)?"<svg"===t.substr(0,4)&&n.empty().append($(t).addClass("g-user-preview").toggleClass("grayed",!1).addClass("svg")):(this._user.hasOwnPictureAvatar()||!this._user.avatar&&o.hasOwnPictureAvatar())&&n.empty().append($("<img>").attr("src",t).addClass("g-user-preview").toggleClass("grayed",!1))),e&&e()}),n},e.exports=c},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(16),r=n(27);function s(e){this._zoomLevel=e}o.GObject.inherit(s,r),s.ID="view.magnification",s.ZOOM_LEVELS=[6,12,25,50,66,100,150,200,300,400,800,1600,3200,6400,12800,25600],s.prototype._zoomLevel=null,s.prototype.getId=function(){return s.ID+"."+this._zoomLevel.toString()},s.prototype.getTitle=function(){let e=this._zoomLevel.toString()+"%";return gDesigner.isTouchEnabled()&&100===this._zoomLevel&&(e+=" (".concat(o.GLocale.get(new o.GLocaleKey("GMagnificationAction","text.actual-size")),")")),e},s.prototype.getCategory=function(){return a.CATEGORY_VIEW_MAGNIFICATION},s.prototype.getGroup=function(){return"zoom/magnification-level"},s.prototype.getShortcut=function(){switch(this._zoomLevel){case 50:return[i.GKey.Constant.META,"5"];case 100:return[i.GKey.Constant.META,"1"];case 400:return[i.GKey.Constant.META,"4"];case 800:return[i.GKey.Constant.META,"8"];default:return null}},s.prototype.isEnabled=function(){return!!gDesigner.getWindows().getActiveWindow()},s.prototype.execute=function(){var e=this._zoomLevel/100,t=gDesigner.getWindows().getActiveWindow().getView(),n=t.getScene(),i=n?n.getPaintBBox():null,a=i&&!i.isEmpty()?i.getSide(o.GRect.Side.CENTER):new o.GPoint(0,0);if(t.getViewConfiguration().multiPageView){var r=n.getActivePage();r&&(a=a.add(r.getPosition(!0)))}t.zoomAtCenter(a,e)},s.prototype.toString=function(){return"[Object GMagnificationAction]"},e.exports=s},function(e,t,n){"use strict";var o=n(14);n(18),n(29);var i=n(1),a=o(n(27));class r extends a.default{static getSubActionId(e,t){return"".concat(e,".").concat(t)}constructor(e){super(),this._type=e,this._title=null}getId(){return r.getSubActionId(this._getMainActionId(),this._type)}_getMainActionId(){throw new Error("Not implemented.")}getTitle(){return this._title}getMainAction(){const e=this._getMainActionId();return gDesigner.getAction(e)}isVisible(){return!1}isEnabled(){return this.getMainAction().isEnabled()}getShortcutSubKey(){return null}getShortcutHint(e){const t=this.getMainAction().getShortcut(),n=this.getShortcutSubKey(),o=a.default.getActionShortcutHint(t,e);return o&&n?i.GLocale.getValue("GSubAction","shortcut-hint-template").replace("%mainShortcutHint",o).replace("%shortcutSubKeyHint",n):null}toString(){return"[Object GSubAction]"}}r.Type={},e.exports=r},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(16),r=n(27);function s(){}o.GObject.inherit(s,r),s.ID="view.canvas.show-guide-lines",s.TITLE=new o.GLocaleKey("GShowGuideLinesAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return a.CATEGORY_VIEW_CANVAS},s.prototype.getGroup=function(){return"show/canvas"},s.prototype.getShortcut=function(){return[i.GKey.Constant.META,","]},s.prototype.isEnabled=function(){return!!gDesigner.getWindows().getActiveWindow()},s.prototype.isCheckable=function(){return!0},s.prototype.isChecked=function(){var e=gDesigner.getWindows().getActiveWindow();if(e){var t=e.getView().getViewConfiguration();return!!t&&!0===t.guideLinesVisible}return!1},s.prototype.execute=function(){var e=gDesigner.getWindows().getActiveWindow().getView();e.getViewConfiguration().guideLinesVisible=!e.getViewConfiguration().guideLinesVisible,e.invalidate(),gDesigner.setSetting("guide_lines_visible",e.getViewConfiguration().guideLinesVisible)},s.prototype.toString=function(){return"[Object GShowGuideLinesAction]"},e.exports=s},function(e,t,n){"use strict";n(18),n(3),n(29);var o=n(1),i=n(13),a=n(185),r=n(550),s=n(16),l=n(27),c=n(379);function d(e){this._sidebar=e}o.GObject.inherit(d,l),d.ID="view.toggle-sidebar",d.TITLE=new o.GLocaleKey("GToggleSidebarAction","title"),d.prototype._sidebar=null,d.prototype.getId=function(){return d.ID+"."+this._sidebar.getId()},d.prototype.getTitle=function(){return o.GLocale.get(d.TITLE).replace("%s",o.GLocale.get(this._sidebar.getTitle()))},d.prototype.getCategory=function(){return s.CATEGORY_VIEW},d.prototype.getGroup=function(){return"view-sidebars"},d.prototype.isCheckable=function(){return!0},d.prototype.isChecked=function(){return this._sidebar.getId()===this._getSidebars().getActiveSidebar()},d.prototype.getShortcut=function(){switch(this._sidebar.getId()){case a.SidebarsIds.GOutlineSidebar:return[i.GKey.Constant.OPTION,"1"];case a.SidebarsIds.GInspectorSidebar:return[i.GKey.Constant.OPTION,"2"];default:return null}},d.prototype.execute=function(){this.isChecked()?(this._getSidebars().setActiveSidebar(null),gDesigner.setPartVisible(this._getSidebars().getSidebarsPart(),!1)):(this._getSidebars().setActiveSidebar(this._sidebar.getId()),gDesigner.setPartVisible(this._getSidebars().getSidebarsPart(),!0)),c.setOrientationStateInSetting(this._sidebar.getOrientation(),this.isChecked()),this._sidebar.getId()===r.ID&&gDesigner.getToolbar().updateCommentToggleStatus()},d.prototype._getSidebars=function(){switch(this._sidebar.getOrientation()){case c.Orientation.Left:return gDesigner.getLeftSidebars();case c.Orientation.Right:return gDesigner.getRightSidebars()}},d.prototype.isVisible=function(){return this._sidebar.isVisible()},d.prototype.toString=function(){return"[Object GToggleSidebarAction]"},e.exports=d},function(e,t,n){"use strict";n(18),n(3),n(29);var o=n(1),i=n(13),a=n(61),r=n(16),s=n(27);function l(){l.TOOLTIP_CONFIG={[a.TOOLTIP_AREA.TOOLBAR]:a.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GUndoAction","tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GUndoAction","tooltip-description")),shortcut:l.SHORTCUT})}}o.GObject.inherit(l,s),l.ID="edit.undo",l.TITLE=new o.GLocaleKey("GUndoAction","title"),l.SHORTCUT=[i.GKey.Constant.META,"z"],l.TOOLTIP_CONFIG=null,l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){var e=gDesigner.getActiveDocument();return e&&e.getEditor()&&e.getEditor().hasUndoState()?o.GLocale.get(new o.GLocaleKey("GUndoAction","undo-action")).replace("%action",e.getEditor().getUndoStateName()):o.GLocale.get(l.TITLE)},l.prototype.getIcon=function(){return"gravit-icon-undo"},l.prototype.getCategory=function(){return r.CATEGORY_EDIT},l.prototype.getGroup=function(){return"undo_redo"},l.prototype.getShortcut=function(){return l.SHORTCUT},l.prototype.isEnabled=function(){return!(gDesigner.getActiveDocument()&&!gDesigner.getActiveDocument().isEditingEnabled())&&(!(!document.activeElement||!$(document.activeElement).is(":editable")||$(document.activeElement).is(":button")||$(document.activeElement).is("select")||gDesigner.isGravitIME(document.activeElement))||!!(gDesigner.getActiveDocument()&&gDesigner.getActiveDocument().getEditor()&&gDesigner.getActiveDocument().getEditor().hasUndoState()))},l.prototype.execute=function(){!document.activeElement||!$(document.activeElement).is(":editable")||$(document.activeElement).is(":button")||$(document.activeElement).is("select")||gDesigner.isGravitIME(document.activeElement)?gDesigner.getActiveDocument().getEditor().undoState():document.execCommand("undo")},l.prototype.getTooltipConfig=function(e){return e&&l.TOOLTIP_CONFIG[e]||null},l.prototype.toString=function(){return"[Object GUndoAction]"},e.exports=l},function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=(n(13),o(n(27))),r=(o(n(77)),o(n(16))),s=o(n(1150));function l(){}i.GObject.inherit(l,a.default),l.ID="file.install-to-desktop",l.TITLE=new i.GLocaleKey("GInstallToDesktopAction","title"),l.closedInstallPWADialogDatePropName="pwa.closed-install-pwa-dialog-date",l.installPWA3timesAWeekPropName="pwa.show-install-dialog-3-times-a-week",l.install=function(){var e=gDesigner.getPwaEvent();e&&e.prompt&&e.prompt().then((function(e){let{outcome:t}=e;"dismissed"===t||"accepted"===t&&(gContainer.removeProperty(l.installPWA3timesAWeekPropName),gContainer.removeProperty(l.closedInstallPWADialogDatePropName),gDesigner.closeInstallPwaDialog())}))},l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){return l.TITLE},l.prototype.getCategory=function(){return r.default.CATEGORY_FILE},l.prototype.getGroup=function(){return"install"},l.prototype.isAvailable=function(){return s.default.isSupported()&&!window.matchMedia("(display-mode: standalone)").matches},l.prototype.isVisible=function(){return!window.matchMedia("(display-mode: standalone)").matches},l.prototype.isEnabled=function(){return gDesigner.hasPwaEvent()},l.prototype.execute=function(){return l.install()},l.prototype.toString=function(){return"[Object GInstallToDesktopAction]"},e.exports=l},function(e,t,n){"use strict";var o=n(14),i=n(13),a=o(n(77));class r{static isSupported(){return r.isRuntimeSupported()&&r.isWebBrowserSupported()&&r.isPWAEventSupported()}static isRuntimeSupported(){return gContainer.getRuntime()===a.default.Runtime.Browser}static isWebBrowserSupported(){return i.GPlatform.webBrowser===i.GPlatform.constructor.WebBrowser.Chrome||i.GPlatform.webBrowser===i.GPlatform.constructor.WebBrowser.Edge}static isPWAEventSupported(){return void 0!==window.BeforeInstallPromptEvent}}e.exports=r},function(e,t,n){"use strict";var o=n(1);function i(e,t){this.type=e,this.data=t}o.GObject.inherit(i,o.GEvent),i.Type={DoubleClickFile:1,Reload:2,UnshareWithMe:3},i.prototype.type=null,i.prototype.data=null,e.exports=i},function(e,t,n){"use strict";n(3);var o=n(45),i=n(1),a=n(16),r=n(852),s=n(97);function l(){}i.GObject.inherit(l,s),l.ID="modify.attachToPath",l.TITLE=new i.GLocaleKey("GAttachToPathAction","title"),l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){return l.TITLE},l.prototype.getCategory=function(){return a.CATEGORY_MODIFY_PATH},l.prototype.getGroup=function(){return"structure/modify"},l.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-attach-to-path":null},l.prototype.isEnabled=function(){if(!s.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument()?gDesigner.getActiveDocument().getEditor().getSelection():null,t=[],n=null;if(e)for(var a=0;a<e.length;++a)if(e[a]instanceof i.GText&&!e[a].hasPathAttached()){var r=o.GElementEditor.getEditor(e[a]);r&&!r.isInlineEdit()&&t.push(e[a])}else!e[a].hasMixin(i.GVertexSource)||e[a]instanceof i.GPathsGraph||(n=e[a]);return!(!t.length||!n)},l.prototype.execute=function(){var e,t=gDesigner.getActiveDocument(),n=t?t.getScene():null,a=(u=t?t.getEditor():null)?u.getIndividualSelection():null,s=null,l=[];if(a)for(var c=0;c<a.length;++c)if(!s&&a[c]instanceof i.GPathBase)s=a[c];else if(a[c]instanceof i.GText&&!a[c].hasPathAttached()){var d=o.GElementEditor.getEditor(a[c]);d&&!d.isInlineEdit()&&l.push(a[c])}else e||!a[c].hasMixin(i.GVertexSource)||a[c]instanceof i.GPathsGraph||(e=a[c]);try{if(u.beginTransaction(),!s){var u=gDesigner.getActiveDocument().getEditor();e instanceof i.GCompoundPath?gDesigner.executeAction(r.ID,void 0,void 0,!0):(u.updateSelection(!1,[e]),u.convertSelectionToPaths()),s=u.getSelection()[0],(a=a.concat()).splice(a.indexOf(e),1),u.updateSelection(!0,a)}n&&l.map((function(e){n.link(e,s)}))}finally{u.commitTransaction(i.GLocale.get(this.getTitle()))}},l.prototype.toString=function(){return"[Object GAttachToPathAction]"},e.exports=l},function(e,t,n){"use strict";n(3);var o=n(1),i=(n(13),n(16)),a=n(97);function r(){}o.GObject.inherit(r,a),r.ID="modify.resetinstance",r.TITLE=new o.GLocaleKey("GResetInstanceAction","title"),r.prototype.getId=function(){return r.ID},r.prototype.getTitle=function(){return r.TITLE},r.prototype.getCategory=function(){return i.CATEGORY_MODIFY_SYMBOL},r.prototype.getGroup=function(){return"structure/modify"},r.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-reset-instance":null},r.prototype.isEnabled=function(){if(!a.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument();if(e){var t=e.getEditor().getIndividualSelection();if(t&&t.length)for(var n=t.length-1;n>=0;--n){var i=t[n];if(!i.isLocked()){if(i instanceof o.GSymbol&&!i.isLocked()&&!i.inSync())return!0;var r=null;if((r=i.findParent((function(e){return e instanceof o.GSymbol})))&&!r.inSync(i,!0))return!0}}}return!1},r.prototype.execute=function(){var e=gDesigner.getActiveDocument().getEditor(),t=o.GNode.order(e.getIndividualSelection().slice());e.beginTransaction();try{for(var n=0;n<t.length;++n){var i=t[n];if(i instanceof o.GSymbol&&!i.isLocked()&&!i.inSync()&&i.synchronize(),!(i instanceof o.GSymbol)){var a=null;(a=i.findParent((function(e){return e instanceof o.GSymbol})))&&(a.inSync(i,!0)||a.synchronize(i))}}}finally{e.commitTransaction(o.GLocale.get(r.TITLE))}},r.prototype.toString=function(){return"[Object GResetInstanceAction]"},e.exports=r},function(e,t,n){"use strict";n(3);var o=n(1),i=n(16),a=n(97);function r(){}o.GObject.inherit(r,a),r.ID="modify.detachFromPath",r.TITLE=new o.GLocaleKey("GDetachFromPathAction","title"),r.prototype.getId=function(){return r.ID},r.prototype.getTitle=function(){return r.TITLE},r.prototype.getCategory=function(){return i.CATEGORY_MODIFY_PATH},r.prototype.getGroup=function(){return"structure/modify"},r.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-detach-from-path":null},r.prototype.isEnabled=function(){if(!a.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument()?gDesigner.getActiveDocument().getEditor().getSelection():null;if(e)for(var t=0;t<e.length;++t)if(e[t]instanceof o.GText&&e[t].hasPathAttached())return!0;return!1},r.prototype.execute=function(){var e=gDesigner.getActiveDocument(),t=e?e.getEditor():null,n=t?t.getIndividualSelection():null,i=[];if(n)for(var a=0;a<n.length;++a)n[a]instanceof o.GText&&n[a].hasPathAttached()&&i.push(n[a]);t.beginTransaction();try{var r=e.getScene();i.forEach((function(e){r.visitLinks(e,(function(t){t instanceof o.GPathBase&&r.unlink(e,t)}))}))}finally{t.commitTransaction(o.GLocale.get(this.getTitle()))}},r.prototype.toString=function(){return"[Object GDetachFromPathAction]"},e.exports=r},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(16),r=n(97);function s(){}o.GObject.inherit(s,r),s.ID="modify.join-paths",s.TITLE=new o.GLocaleKey("GJoinPathsAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return a.CATEGORY_MODIFY_PATH},s.prototype.getGroup=function(){return"structure/path"},s.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-join-paths":null},s.prototype.getShortcut=function(){return[i.GKey.Constant.META,"J"]},s.prototype.isEnabled=function(){if(!r.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument();if(e){var t=e.getEditor().getSelection();if(t&&t.length>1)for(var n=0,i=0;i<t.length;++i)if(!(t[i]instanceof o.GImage)&&((t[i]instanceof o.GPathBase||t[i].hasMixin(o.GVertexSource))&&n++,2===n))return!0}return!1},s.prototype.execute=function(){var e=gDesigner.getActiveDocument().getEditor(),t=e.getSelection();if(t&&t.length){e.beginTransaction();try{var n=new o.GRectangle;o.GElement.prototype.assignFrom.call(n,t[0]),e.convertSelectionToPaths(!0);var i=e.joinPaths();i&&(o.GElement.prototype.assignFrom.call(i,n),e.updateSelection(!1,[i]))}finally{e.commitTransaction(o.GLocale.get(this.getTitle()))}}},s.prototype.toString=function(){return"[Object GJoinPathsAction]"},e.exports=s},function(e,t,n){"use strict";n(3);var o=n(45),i=n(1),a=n(16),r=n(97);function s(){}i.GObject.inherit(s,r),s.ID="edit.selectbyfonttype",s.TITLE=new i.GLocaleKey("GSelectByFontTypeAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getGroup=function(){return"edit/select-by-font"},s.prototype.getCategory=function(){return a.CATEGORY_EDIT_SELECT_SAME},s.prototype.isEnabled=function(){if(!r.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument();if(e&&e.getEditor()&&e.getEditor().getSelection()){var t=this._getFontFamily();return!(!t||!t.length)}return!1},s.prototype.execute=function(){var e=gDesigner.getActiveDocument(),t=this._getFontFamily(),n=gDesigner.getWorkspace().getFontManager().getDefaultFont(),o=[];e.getScene().acceptChildren((function(e){(e.removeFlag(i.GNode.Flag.Selected),e instanceof i.GText)&&((e.getProperty("_tff")||n&&n.getFamily())===t&&o.push(e))})),e.getEditor().updateSelection(!0,o)},s.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-select-by-font":""},s.prototype.toString=function(){return"[Object GSelectByFontTypeAction]"},s.prototype._getFontFamily=function(){for(var e,t=gDesigner.getActiveDocument().getEditor().getSelection(),n=gDesigner.getWorkspace().getFontManager().getDefaultFont(),a=0;a<t.length;a++){var r=t[a];if(r instanceof i.GText){var s=(o.GElementEditor.getEditor(r)||r).getProperty("_tff");if(s||(s=n&&n.getFamily()),e){if(e!==s){e="";break}}else e=s}}return e},e.exports=s},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(16),r=n(97),s=n(788);function l(){}o.GObject.inherit(l,r),l.ID="modify.mask-with-shape",l.TITLE=new o.GLocaleKey("GMaskWithShapeAction","title"),l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){return l.TITLE},l.prototype.getCategory=function(){return a.CATEGORY_MODIFY},l.prototype.getGroup=function(){return"structure-group"},l.prototype.getShortcut=function(){return[i.GKey.Constant.META,i.GKey.Constant.SHIFT,"M"]},l.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-mask-with-shape":""},l.prototype.isEnabled=function(){return s.prototype.isEnabled.call(this)},l.prototype.execute=function(){var e=gDesigner.getActiveDocument().getEditor();e.beginTransaction();try{if(s.prototype.execute.call(this,!0,!0),e.getSelection().length>0){var t=e.getSelection()[0];t.setProperty("name",o.GLocale.get(new o.GLocaleKey("GMaskWithShapeAction","text.mask")));var n=t.getPaintLayers();if(n){for(var i=function(e){e:for(var t=e.getFirstChild();null!==t;t=t.getNext())if(t instanceof o.GStylable.FillPaintLayer&&t.getProperty("_pt")instanceof o.GLinearGradient){var n=t.getProperty("_pt");n;t:for(var i=0;i<n.getStops().length;++i){var a=n.getStops()[i].color.toScreenCSS();if("#FFFFFF"!==a&&"#000000"!==a){n=null;break t}}if(n)break e}return n}(n),a=[],r=n.getFirstChild();null!==r;r=r.getNext())r instanceof o.GStylable.FillPaintLayer&&a.push(r);for(var l=0;l<a.length;++l)n.removeChild(a[l]);if(n.insertChild(new o.GStylable.FillPaintLayer(o.GRGBColor.WHITE)),i){i=i.clone();for(l=0;l<i.getStops().length;++l){var c=i.getStops()[l];"#FFFFFF"===c.color.toScreenCSS()&&(c.opacity=0)}var d=new o.GOverlayEffect;t.getEffects().appendChild(d),d.setProperties(["alm","opc","pat"],[!0,1,i])}}}}finally{e.commitTransaction(o.GLocale.get(this.getTitle()))}},l.prototype.toString=function(){return"[Object GMaskWithShapeAction]"},e.exports=l},function(e,t,n){"use strict";n(3),n(28);var o=n(1),i=(n(13),n(16),n(27));n(1289);function a(){this._targetPosition=null}o.GObject.inherit(a,i),a.ID="edit.paste.here",a.TITLE=new o.GLocaleKey("GPasteHereAction","title"),a.prototype._targetPosition=null,a.prototype.getId=function(){return a.ID},a.prototype.getTitle=function(){return a.TITLE},a.prototype.getIcon=function(){return null},a.prototype.getCategory=function(){return null},a.prototype.getGroup=function(){return null},a.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-paste-here":null},a.prototype.getShortcut=function(){return null},a.prototype.isAvailable=function(e){return!!e&&"context.menu"==e},a.prototype.isEnabled=function(){if(document.queryCommandSupported("paste"))return!0;var e=gDesigner.getClipboardMimeTypes();return!!(e&&e.indexOf(o.GNode.MIME_TYPE)>=0)&&!!gDesigner.getActiveDocument()},a.prototype.execute=function(){gDesigner.getPaste().assignCallback(this._paste.bind(this)),document.execCommand("paste")||(gDesigner.getPaste().assignCallback(null),this._paste(o.GNode.deserialize(gDesigner.getClipboardContent(o.GNode.MIME_TYPE))))},a.prototype.setPosition=function(e){this._targetPosition=gDesigner.getWindows().getActiveWindow().getView().getViewTransform(gDesigner.getActiveDocument().getScene().getActivePage()).mapPoint(e)},a.prototype._paste=function(e,t){if(e&&e.length>0){for(var n=[],i=0;i<e.length;++i)e[i]instanceof o.GElement&&n.push(e[i]);if((n=gDesigner.getActiveDocument().filterUnrestrictedCommercialFileElements(n)).length>0){var a=gDesigner.getActiveDocument().getEditor();n.forEach(e=>{e instanceof o.GText&&!e.getProperty("content")&&(a.insertElements([e],!1,!0,!0),e.getParent().removeChild(e))}),a.beginTransaction();try{var r;a.insertElements(n,!t,!0,!0,!0),n.forEach(e=>{var t=e.getGeometryBBox();t&&(r=r?r.united(t):t)});var s=r?r.getX():null,l=r?r.getY():null,c=null;if(!this._targetPosition||null===s||o.GMath.isEqualEps(this._targetPosition.getX(),s)&&o.GMath.isEqualEps(this._targetPosition.getY(),l)||(c=new o.GTransform(1,0,0,1,this._targetPosition.getX()-s,this._targetPosition.getY()-l)),c)for(i=0;i<n.length;++i){var d=n[i];d.hasMixin(o.GElement.Transform)&&d.transform(c,!0)}}finally{a.commitTransaction(o.GLocale.get(new o.GLocaleKey("GPaste","action.paste")))}}}},a.prototype.toString=function(){return"[Object GPasteHereAction]"},e.exports=a},function(e,t,n){"use strict";n(3),n(28);var o=n(1),i=n(13),a=n(16),r=n(27),s=n(97);function l(){}o.GObject.inherit(l,r),l.ID="edit.paste.in-place",l.TITLE=new o.GLocaleKey("GPasteInPlaceAction","title"),l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){return l.TITLE},l.prototype.getCategory=function(){return a.CATEGORY_EDIT_PASTE},l.prototype.getGroup=function(){return"ccp/paste"},l.prototype.getShortcut=function(){return[i.GKey.Constant.SHIFT,i.GKey.Constant.META,"V"]},l.prototype.isEnabled=function(){if(!s.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument();if(e&&e.getEditor().getSelection()){if(document.queryCommandSupported("paste"))return!0;var t=gDesigner.getClipboardMimeTypes();if(t&&t.indexOf(o.GNode.MIME_TYPE)>=0)return!!gDesigner.getActiveDocument()}return!1},l.prototype.execute=function(){gDesigner.getPaste().assignCallback(this._paste.bind(this)),!gDesigner.isTouchDevice()&&document.execCommand("paste")||(gDesigner.getPaste().assignCallback(null),this._paste(o.GNode.deserialize(gDesigner.getClipboardContent(o.GNode.MIME_TYPE))))},l.prototype._paste=function(e,t){if(e&&e.length>0){for(var n=[],i=0;i<e.length;++i)e[i]instanceof o.GElement&&n.push(e[i]);if((n=gDesigner.getActiveDocument().filterUnrestrictedCommercialFileElements(n)).length>0){var a=gDesigner.getActiveDocument().getEditor();n.forEach(e=>{e instanceof o.GText&&!e.getProperty("content")&&(a.insertElements([e],!1,!0,!0),e.getParent().removeChild(e))});var r=null,s=null,l=a.getSelectionBBox(!0);l&&(r=l.getX(),s=l.getY()),a.beginTransaction();try{a.insertElements(n,!t,!0,!0,!0);var c=null;n.forEach(e=>{var t=e.getGeometryBBox();t&&(c=c?c.united(t):t)});var d=c?c.getX():null,u=c?c.getY():null,p=null;if(null===r||null===d||o.GMath.isEqualEps(r,d)&&o.GMath.isEqualEps(s,u)||(p=new o.GTransform(1,0,0,1,r-d,s-u)),p)for(i=0;i<n.length;++i){var g=n[i];g.hasMixin(o.GElement.Transform)&&g.transform(p,!0)}}finally{a.commitTransaction(o.GLocale.get(this.getTitle()))}}}},l.prototype.toString=function(){return"[Object GPasteInPlaceAction]"},e.exports=l},function(e,t,n){"use strict";n(17),n(3),n(28),n(22);var o=n(1),i=n(13),a=(n(45),n(16)),r=n(97);function s(){}o.GObject.inherit(s,r),s.ID="edit.paste.inside",s.TITLE=new o.GLocaleKey("GPasteInsideAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return a.CATEGORY_EDIT_PASTE},s.prototype.getGroup=function(){return"ccp/paste"},s.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-paste-inside":null},s.prototype.getShortcut=function(){return[i.GKey.Constant.OPTION,i.GKey.Constant.SHIFT,i.GKey.Constant.META,"V"]},s.prototype.isEnabled=function(){if(!r.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument();if(e){var t=e.getEditor().getSelection();if(t){if(document.queryCommandSupported("paste"))return!0;var n=gDesigner.getClipboardMimeTypes();if(n&&n.indexOf(o.GNode.MIME_TYPE)>=0)for(var i=0;i<t.length;++i)if(t[i].hasMixin(o.GNode.Container))return!0}}return!1},s.prototype.execute=function(){gDesigner.getPaste().assignCallback(this._paste.bind(this)),!gDesigner.isTouchDevice()&&document.execCommand("paste")||(gDesigner.getPaste().assignCallback(null),this._paste(o.GNode.deserialize(gDesigner.getClipboardContent(o.GNode.MIME_TYPE))))},s.prototype._paste=function(e,t){if(e&&e.length>0){for(var n=[],i=0;i<e.length;++i)e[i]instanceof o.GElement&&n.push(e[i]);if((n=gDesigner.getActiveDocument().filterUnrestrictedCommercialFileElements(n)).length>0){var a=gDesigner.getActiveDocument().getEditor(),r=[...a.getSelection()];n.forEach(e=>{e instanceof o.GText&&!e.getProperty("content")&&(a.insertElements([e],!1,!0,!0),e.getParent().removeChild(e))}),a.beginTransaction();try{for(i=0;i<r.length;++i){var s=r[i];if(s.hasMixin(o.GNode.Container)&&!s.isLocked()){for(var l=[],c=0;c<n.length;++c)n[c].validateInsertion(s)&&l.push(n[c].clone());a.insertElements(l,!t,!0,!1,!0,s);var d=s instanceof o.GElement?s.getGeometryBBox():null;if(d){var u=d.getX(),p=d.getY(),g=null;l.forEach(e=>{var t=e.getGeometryBBox();t&&(g=g?g.united(t):t)});var h=g?g.getX():null,f=g?g.getY():null,m=null;if(null===u||null===h||o.GMath.isEqualEps(u,h)&&o.GMath.isEqualEps(p,f)||(m=new o.GTransform(1,0,0,1,u-h,p-f)),m)for(c=0;c<l.length;++c){var y=l[c];y.hasMixin(o.GElement.Transform)&&y.transform(m,!0)}}}}}finally{a.commitTransaction(o.GLocale.get(this.getTitle()))}}}},s.prototype.toString=function(){return"[Object GPasteInsideAction]"},e.exports=s},function(e,t,n){"use strict";n(17),n(181),n(3),n(22);var o=n(1),i=n(13),a=n(34),r=n(16),s=n(97),l=n(37);function c(){}o.GObject.inherit(c,s),c.ID="modify.ouline",c.TITLE=new o.GLocaleKey("GOutlineAction","title"),c.prototype.getId=function(){return c.ID},c.prototype.getTitle=function(){return c.TITLE},c.prototype.getCategory=function(){return r.CATEGORY_MODIFY_PATH},c.prototype.getGroup=function(){return"structure/modify"},c.prototype.getShortcut=function(){return[i.GKey.Constant.F5]},c.prototype.isEnabled=function(){if(!s.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument()?gDesigner.getActiveDocument().getEditor().getSelection():null,t=!1;if(e)for(var n=0;!t&&n<e.length;++n)e[n]instanceof o.GImage||!e[n].hasMixin(o.GVertexSource)||(t=!0);return t},c.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-convert-to-outline":null},c.prototype.execute=function(){var e=gDesigner.getActiveDocument(),t=e?e.getEditor():null,n=t?t.getIndividualSelection():null,i=[];if(n)for(var r=0;r<n.length;++r){var s=n[r];s.hasMixin(o.GVertexSource)&&i.push(s)}i.length&&l.prompt(this._dialogPromptMessage(),e=>{if(e){var n,r,s=parseFloat(e);if(isNaN(s)||!isFinite(s)||o.GMath.isEqualEps(s,0))l.alert(o.GLocale.get(new o.GLocaleKey("GOutlineAction","text.invalid-value")));else{t.beginTransaction();try{try{r=new Set;for(var c=0;c<i.length;++c){var d=i[c].getParent();d&&r.add(d)}(0,a.blockChanges)(t,r),n=[];for(c=0;c<i.length;++c){var u=i[c],p=u.getParent();if(p){var g=u.getNext(),h=this._makeOffsetter(s,u),f=o.GPathUtil.createPathFromVertexSource(h);f&&(o.GElement.prototype.assignFrom.call(f,u),p.insertChild(f,g),n.push(f)),p.removeChild(u)}}}finally{(0,a.releaseChanges)(t,r),n.length&&t.updateSelection(!1,n)}}finally{t.commitTransaction(o.GLocale.get(this.getTitle()))}}}},"1")},c.prototype._dialogPromptMessage=function(){return o.GLocale.get(new o.GLocaleKey("GOutlineAction","text.dialog-prompt-message"))},c.prototype._makeOffsetter=function(e,t){var n;if(t.hasMixin(o.GStylable)){var i=t.getPaintLayers();if(i){var a=i.getBorderLayers(!0).pop();a&&(n=a.$_blc)}}var r=e>0?e:-e;return t instanceof o.GPathBase&&!t.isClockWise()&&t.reverseOrder(),new o.GVertexOffsetter(t,r,!0,!0,0,n)},c.prototype.toString=function(){return"[Object GOutlineAction]"},e.exports=c},function(e,t,n){"use strict";e.exports=class{setId(e){return this}setTime(e){return this}setType(e){return this}setLanguage(){return this}setCampaign(e){return this}setShareFile(e){return this}setDashboard(e){return this}setProduct(e){return this}setInAppPurchasesAvailable(e){return this}setLayout(e){return this}build(){throw"Not implemented"}}},function(e,t,n){"use strict";n(7);e.exports=class{static get DEFAULT_LAYOUT(){return 0}async open(){throw"Not implemented"}}},function(e,t,n){"use strict";var o=n(1);function i(){}i.CheckingForUpdate=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isSilent=e.isSilent},o.GObject.inherit(i.CheckingForUpdate,o.GEvent),i.InstallUpdate=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isSilent=e.isSilent},o.GObject.inherit(i.InstallUpdate,o.GEvent),i.UpdateAvailable=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.newVersion=e.newVersion,this.currentVersion=e.currentVersion,this.forceUpdate=e.forceUpdate,this.isSilent=e.isSilent},o.GObject.inherit(i.UpdateAvailable,o.GEvent),i.UpdateError=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.error=e.error,this.isSilent=e.isSilent},o.GObject.inherit(i.UpdateError,o.GEvent),i.Downloading=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.percent=e.percent,this.size=e.size,this.newVersion=e.newVersion,this.isSilent=e.isSilent},o.GObject.inherit(i.Downloading,o.GEvent),i.DownloadComplete=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.newVersion=e.newVersion,this.forceUpdate=e.forceUpdate,this.isSilent=e.isSilent},o.GObject.inherit(i.DownloadComplete,o.GEvent),i.AfterUpdate=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.currentVersion=e.currentVersion,this.isSilent=e.isSilent},o.GObject.inherit(i.AfterUpdate,o.GEvent),i.UpdateNotAvailable=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.currentVersion=e.currentVersion,this.isSilent=e.isSilent},o.GObject.inherit(i.UpdateNotAvailable,o.GEvent),i.BeforeInstallUpdate=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isSilent=e.isSilent},o.GObject.inherit(i.BeforeInstallUpdate,o.GEvent),e.exports=i},function(e,t,n){"use strict";e.exports=class{constructor(){this._swiping=!1}update(e){this._touches=e.touches?Array.from(e.touches):[]}setSwiping(e){this._swiping=e}isSwiping(){return this._swiping}hasActiveIdentifier(e){return!!this._touches&&this._touches.some(t=>t.identifier===e.identifier)}hasActiveIdentifiers(){return!!this._touches&&this._touches.length>0}}},function(e,t,n){"use strict";n(7);const{gApi:o}=n(9);e.exports=class{canMakePayments(){return!0}getOptions(){return null}async purchase(e,t){throw"Not implemented"}async getProduct(){return null}async syncLicense(){return Promise.resolve()}}},function(e,t,n){"use strict";n(28);const{GObject:o}=n(1),{GPlatform:i}=n(13);function a(){this._children=[]}o.inherit(a,o),a.prototype._children=null,a.prototype.clear=function(){this._clearChildren(),this._clearOwnData()},a.prototype._clearOwnData=function(){},a.prototype._clearChildren=function(){this._children&&this._children.length&&this._children.forEach(e=>e.clear()),this._children=[]},a.prototype.clearChildren=function(){this._clearChildren()},a.prototype.getChildren=function(){return this._children},a.prototype.addChild=function(e){this._children.push(e)},a.prototype.scrollIntoView=function(){},a.prototype.setVisiblity=function(e){throw Error("Not implemented!")},a.prototype._scrollToElement=function(e){if(!e||!e[0])return;const t=i.webBrowser===i.constructor.WebBrowser.Firefox,n=t?"start":"nearest",o=t?"auto":"smooth";"function"==typeof e[0].scrollIntoView&&e[0].scrollIntoView({behavior:o,block:n})},e.exports=a},,,,function(e,t,n){"use strict";n(1172),n(17),n(1173),n(169),n(7),n(18),n(99),n(124),n(204),n(177),n(178),n(179),n(180),n(28);var o=n(165),i=n(0),a=n(222);const{GRegex:r}=n(247);var s=n(1094).saveAs,l=!1,c=null,d=null;function u(){this._fileInput=null,this._fileInputCallback=null}function p(e){return e.queryPermission({writable:!0}).then(t=>"granted"!==t?e.requestPermission({writable:!0}):t).then(e=>{if("granted"!==e)throw new Error("Cannot get write access")})}i.inherit(u,a),u.Directory=function(e,t){a.Directory.call(this,e),this._dirHandle=t,this._id=null},i.inherit(u.Directory,a.Directory),u.Directory.prototype._dirHandle=null,u.Directory.prototype._id=null,u.Directory.prototype.getUniqueId=function(){return null},u.Directory.prototype.addDirectory=async function(e,t){let n=null;try{return n=await this._dirHandle.getDirectory(e,{create:!0}),await p(n),new u.Directory(this._storage,n)}catch(t){throw new Error("Cannot create a directory: "+e)}},u.Directory.prototype.addFile=async function(e,t){let n=null;try{return n=await this._dirHandle.getFile(e,{create:!0}),await p(n),new u.Item(this._storage,null,n.name,n)}catch(e){throw new Error("Cannot create a file")}},u.Item=function(e,t,n,o){a.Item.call(this,e),this._data=t,this._filename=n,this._fileHandle=o},i.inherit(u.Item,a.Item),u.Item.prototype._data=null,u.Item.prototype._filename=null,u.Item.prototype._fileHandle=null,u.Item.prototype.getFullName=function(){return this._filename},u.Item.prototype.setFileName=function(e){this._filename=e},u.Item.prototype.read=function(e,t,n){if(this._data||!this._fileHandle)return e(this._data);this._fileHandle.getFile().then(e=>e.arrayBuffer()).then(t=>{this._data=new Uint8Array(t),e(this._data)})},u.Item.prototype.write=function(e,t,n,o,i){if(this._verifyFileNotTooSmall(e.length,i),this._fileHandle){let o=null;this._fileHandle.createWritable().then(e=>(o=e,o.truncate(0))).then(()=>o.write(e)).then(()=>o.close()).then(()=>{t&&t()}).catch(o=>{if(o instanceof DOMException&&o.code===DOMException.QUOTA_EXCEEDED_ERR)return this.notEnoughDiskSpace(),void(n?n():t&&t());s(new Blob([e]),this._filename),t&&t()})}else s(new Blob([e]),this._filename),t&&t()},u.prototype._hasFileAPI=function(){return"function"==typeof window.showSaveFilePicker&&!this._isChromeOS()},u.prototype._isChromeOS=function(){return r.NavigatorUserAgent.IS_CHROME_OS.test(navigator.userAgent||"")},u.prototype._hasDirectoryWriteAPI=function(){return"function"==typeof window.chooseFileSystemEntries},u.prototype.canChooseDirectory=function(){return this._hasDirectoryWriteAPI()&&!l},u.prototype.canPromptOpen=function(){return!0},u.prototype.canPromptSave=function(e){return this._hasFileAPI()},u.prototype.canSave=function(){return this._hasFileAPI()},u.prototype.canDownload=function(){return!0},u.prototype.chooseDirectory=function(e,t,n){if(!this._hasFileAPI()||!this.canChooseDirectory())return;var o={type:d||"open-directory"};let i=null;var a=!1;window.chooseFileSystemEntries(o).then(e=>(i=e,p(e))).then(()=>{let t=e(new u.Directory(this,i));return a=!0,t}).catch(e=>{if(e instanceof DOMException&&"SecurityError"===e.name){if(l=!0,n)return void n()}else!a&&!d&&e instanceof TypeError&&(d="openDirectory");t&&t()})},u.prototype.openPrompt=function(e,t,n){let{disableFileSystemAccessAPI:i=!1,silent:a=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!i&&this._hasFileAPI()){var r={multiple:!!n};return e.length>0&&(r.excludeAcceptAllOption=!0,r.types=[this._prepareDialogTypes(e)]),window.showOpenFilePicker(r).then(e=>{Array.isArray(e)||(e=[e]),e.forEach(n=>{n.getFile().then(e=>e.arrayBuffer()).then(o=>t(new u.Item(this,new Uint8Array(o),n.name,n),e.length)).catch(e=>{console.log("ERROR reading file")})})}).catch(e=>{e instanceof DOMException||console.warn("showOpenFilePicker warning",e)}),void(this._fileInputCallback=t)}const s=e.map(e=>e.ext).flat();e.map(e=>e.mime);if(!this._fileInput){this._fileInput=document.createElement("input"),this._fileInput.setAttribute("type","file"),this._fileInput.setAttribute("id","file-input"),this._fileInput.multiple=n,this._fileInput.style.opacity=0,this._fileInput.style.position="absolute",this._fileInput.style.zIndex=-1,this._fileInput.style.left="-9999px",this._fileInput.style.top="-9999px";var l=function(e){var t=this._fileInput.files.length;if(e>=t)this._fileInput.value="";else{var n=this._fileInput.files[e],o=n.name;if(n instanceof File||n instanceof Blob){var i=new FileReader;i.onload=function(){this._fileInputCallback(new u.Item(this,new Uint8Array(i.result),o),t),l(e+1)}.bind(this),i.readAsArrayBuffer(n)}else l(e+1)}}.bind(this);this._fileInput.addEventListener("change",()=>{l(0)}),document.body.appendChild(this._fileInput)}o.operatingSystem===o.OperatingSystem.OSX_IOS?this._fileInput.removeAttribute("accept"):s&&s.length?this._fileInput.setAttribute("accept",s.map(e=>"."+e).join(",")):this._fileInput.removeAttribute("accept"),this._fileInputCallback=t,this._fileInput.focus(),a||this._fileInput.click()},u.prototype.savePrompt=function(e,t,n,o){if(this._hasFileAPI()){var i={};t.length>0&&(i.suggestedName=e,i.excludeAcceptAllOption=!0,i.types=[this._prepareDialogTypes(t,!0)]);var a=!1;window.showSaveFilePicker(i).then(e=>(a=!0,n(new u.Item(this,null,e.name,e)))).catch(t=>{if(!a&&!c&&t instanceof TypeError&&(c="saveFile"),!a&&t.code!==DOMException.ABORT_ERR)return this.download(e,n);o&&o()})}},u.prototype._prepareDialogTypes=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={};let o="";for(let i=0,a=e.length;i<a;i++){let{mime:a,ext:r}=e[i];a&&r?(t&&"jpg"===r&&(a="x-really-an-image/jpeg"),void 0!==n[a]?(Array.isArray(n[a])||(n[a]=[n[a]]),n[a].push(r.startsWith(".")?r:".".concat(r)),o&&(o+=", "),o+="*"+(r.startsWith(".")?r:".".concat(r))):(n[a]=r.startsWith(".")?r:".".concat(r),o&&(o+=", "),o+="*"+(r.startsWith(".")?r:".".concat(r)))):console.warn('openPrompt warning: no mime or ext. given mime: "'.concat(a,'", given ext: "').concat(r,'"'))}return{description:o,accept:n}},u.prototype.download=function(e,t){return t(new u.Item(this,null,e))},e.exports=u},function(e,t,n){"use strict";var o=n(30),i=n(1350),a=n(86),r=n(93),s=n(120),l=n(556);o({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=a(this),n=r(t),o=l(t,0);return o.length=i(o,t,t,n,0,void 0===e?1:s(e)),o}})},function(e,t,n){"use strict";n(345)("flat")},function(e,t,n){"use strict";function o(){try{this._createDB()}catch(e){this._failedStarting=!0,console.log("Cannot createIndexedDB"),o._removeCallbacks()}}o.getInstance=function(e){if(!o._instance||!o._instance._dataBase||o._instance._failedStarting)try{if(e&&o._cb.push(e),o._instance&&!o._instance._failedStarting||(o._instance=new o),e)return null}catch(e){return o._instance=null,void o._removeCallbacks()}return e&&e(o._instance),o._instance},o._removeCallbacks=function(e){if(o._cb.length){for(var t=0;t<o._cb.length;t++)o._cb[t](e||null);o._cb=[]}},o._instance=null,o._cb=[],o.FONT_LIST="_gravit_font_list_",o.NATIVE_FONT_LIST="_gravit_native_font_list_",o.NATIVE_FONT_LIST_DATE="_gravit_native_font_list_date_",o.NATIVE_FONT_LIST_V="_gravit_native_font_list_v_";var i="gravitFonts";o.prototype._cb=null,o.prototype._dataBase=null,o.prototype._cachingService=null,o.prototype._cachingBroken=!1,o.prototype._failedStarting=!1,o.prototype._createDB=function(){try{window.indexedDB=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.OIDBTransaction||window.msIDBTransaction}catch(e){}if(window.indexedDB){var e=indexedDB.open("gravitFontsDB",1);if(e.addEventListener("error",()=>{this._failedStarting=!0,o._removeCallbacks()}),"done"===e.readyState){if(e.error)throw this._failedStarting=!0,new Error("Failed starting GFontDBClient");this._requestSuccess({target:e})}else e.onsuccess=this._requestSuccess.bind(this),e.onerror=function(e){0};e.onupgradeneeded=this._createStore.bind(this)}else o._removeCallbacks()},o.prototype._requestSuccess=function(e){if(this._dataBase)o._removeCallbacks(this);else if(this._dataBase=e.target.result,this._dataBase){if(this._dataBase.onerror=function(e){0},this._dataBase.setVersion)if(1!=this._dataBase.version)return void(this._dataBase.setVersion(1).onsuccess=function(){this._createStore(),o._removeCallbacks(this)}.bind(this));o._removeCallbacks(this)}},o.prototype._createStore=function(e){this._dataBase||(this._dataBase=e.target.result),this._dataBase&&this._dataBase.createObjectStore(i)},o.prototype.ready=function(){return!!this._dataBase},o.prototype.clear=function(){return $.Deferred(function(e){this._dataBase||e.resolveWith(this,[!0]);try{var t=this._dataBase.transaction([i],"readwrite");try{var n=t.objectStore(i).clear();n.onsuccess=function(t){e.resolveWith(this,[!0])}.bind(this),n.onerror=function(t){e.resolveWith(this,[!1])}.bind(this)}catch(t){return void e.resolveWith(this,[!1])}}catch(t){0,e.resolveWith(this,[!1])}}.bind(this))},o.prototype.deleteItem=function(e){return $.Deferred(function(t){this._dataBase||t.resolveWith(this,[!0]);try{var n=this._dataBase.transaction([i],"readwrite");try{var o=n.objectStore(i).delete(e);o.onsuccess=function(e){t.resolveWith(this,[!0])}.bind(this),o.onerror=function(e){t.resolveWith(this,[!1])}.bind(this)}catch(e){return void t.resolveWith(this,[!1])}}catch(e){0,t.resolveWith(this,[!1])}}.bind(this))},o.prototype.setItem=function(e,t){return $.Deferred(function(n){this._dataBase||n.resolveWith(this,[!1]);try{var o=this._dataBase.transaction([i],"readwrite");try{var a=o.objectStore(i).put(t,e);a.onsuccess=function(e){n.resolveWith(this,[!0])}.bind(this),a.onerror=function(e){n.resolveWith(this,[!1])}.bind(this)}catch(e){return void n.resolveWith(this,[!1])}}catch(e){0,n.resolveWith(this,[!1])}}.bind(this))},o.prototype.updateItem=function(e,t){return $.Deferred(function(n){this._dataBase||n.resolveWith(this,[!1]),this.getItem(e).done((o,i)=>{try{var a=i.put(t,e);a.onsuccess=function(e){n.resolveWith(this,[!0])}.bind(this),a.onerror=function(e){n.resolveWith(this,[!1])}.bind(this)}catch(e){return void n.resolveWith(this,[!1])}})}.bind(this))},o.prototype.pushArray=function(e,t){return $.Deferred(function(n){this._dataBase||n.resolveWith(this,[!1]);try{var o=this._dataBase.transaction([i],"readwrite");o.objectStore(i).count(e).onsuccess=function(a){if(console.log("number of fonts:"+e+" "+a.target.result),0===a.target.result){try{o.objectStore(i).put(t,e)}catch(e){return void n.resolveWith(this,[!1])}n.resolveWith(this,[!0])}else 1===a.target.result&&this.getItem(e).done(function(e,o){if(e){var i;e=e.concat(t);try{i=o.put(e)}catch(e){return void n.resolveWith(this,[!1])}i.onsuccess=function(e){n.resolveWith(this,[!0])},i.error=function(e){n.resolveWith(this,[!1])}}}.bind(this))}}catch(e){0,n.resolveWith(this,[!1])}}.bind(this))},o.prototype.getItem=function(e){var t=this;return $.Deferred((function(n){try{var o=this;t._dataBase||n.resolveWith(o,[null]);var a=t._dataBase.transaction([i],"readwrite").objectStore(i),r=a.get(e);r.onsuccess=function(e){var t=e.target.result;n.resolveWith(o,[t,a])},r.onerror=function(e){e.target.result;n.resolveWith(o,[null,a])}}catch(e){e.name="exception",n.resolveWith(this,[null,a])}}))},e.exports=o},function(e,t,n){"use strict";n(314),n(51),n(7),n(18),n(29),n(124);var o=n(1),i=n(365);const{parseNativeFonts:a,getLocalFontsData:r,getFontFamily:s}=n(1176);function l(e){i.call(this,e)}o.GObject.inherit(l,i);var c=o.GUtil.uuid();l.VERSION=1,l.prototype._totalFonts=0,l.prototype._fontList=[],l.prototype._cachedParsedFonts={},l.prototype.addPreviews=function(e){if(e.length)for(var t=0;t<e.length;t++)e[t].cachedPreview||(e[t].addPreviewCallback=function(e){var t=document.createElement("div");t.innerHTML=this.displayname||this.family,t.style.fontFamily=this.family,t.style.fontStyle=this.style===o.GFont.Style.Italic?"italic":"normal",t.style.fontWeight=this.weight,t.style.fontSize="13px",t.style.height="20px",t.style.textOverflow="ellipsis",t.style.whiteSpace="nowrap",t.style.overflow="hidden",t.style.display="flex",t.style.alignItems="center",e(t)})},l.prototype.load=function(e,t,n,o){return this._createLocalFontList(e,t,n,o)},l.prototype.getTotalFonts=function(e){return e?this._fontList.filter(this._searchFilter(e)).length:this._totalFonts},l.prototype.resetProvider=function(){this._fontList=[]},l.prototype.resolveFont=function(e,t,n,i){n=parseInt(n)||400,t=t||o.GFont.Style.Normal;const a="".concat(e,"_").concat(t,"_").concat(n);return this._cachedParsedFonts[a]?i.done(this._cachedParsedFonts["".concat(e,"_").concat(t,"_").concat(n)].blob):this._fontList.length?this._processResolveFont(e,t,n,i):this._createLocalFontList("%",0,9999,{done:()=>{this._processResolveFont(e,t,n,i)},fail:i.fail})},l.prototype._processResolveFont=async function(e,t,n,o){const i=s(e,this._findInFontsList.bind(this));if(!i)return o.fail();const r=i.isLocalFont?await a(i.fonts):i.fonts;if(!r||!Array.isArray(r)||!r.length)return o.fail();const l=r.find((function(o){return o.style===t&&o.weight===n&&o.family===e||o.style===t&&o.weight===n&&o.family.replace(" "+o.subfamily,"")===e}));if(l){const i="".concat(e,"_").concat(t,"_").concat(n);return this._cachedParsedFonts[i]=l,void setTimeout(()=>{o.done(l.blob)},10)}o.fail()},l.prototype._createLocalFontList=function(e,t,n,o){if(this._fontList&&this._fontList.length>0)return o.done(this._getFilteredFontsList.call(this,e,t,n),!0,null);this._createLocalFontListPromise?this._createLocalFontListCallbacks.push(o):(this._createLocalFontListCallbacks=[o],this._createLocalFontListPromise=new Promise(async e=>{let t=await r(),n=[];for(var o=0;o<t.length;o++){const e=t[o],i=n.findIndex(t=>{let{family:n}=t;return n===e.family});-1===i?n.push({family:e.family,fonts:[e],isLocalFont:!0}):n[i].fonts.push(e)}this._fontList=n.sort((e,t)=>{let{family:n}=e,{family:o}=t;return n-o}),e()}),this._createLocalFontListPromise.then(()=>{this._createLocalFontListCallbacks.map(o=>{let{done:i}=o;i(this._getFilteredFontsList.call(this,e,t,n),!0,null),this._createLocalFontListPromise=null,this._createLocalFontListCallbacks=null}),this._createLocalFontListCallbacks=[]}))},l.prototype._getFilteredFontsList=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:9999;return this._fontList.filter(t=>e.indexOf("%")>=0?t.family.toLowerCase().startsWith(e.replace(/%/g,"")):t.family.toLowerCase()===e.toLowerCase()).slice(t,t+n)},l.prototype._findInFontsList=function(e){return this._fontList.find((function(t){let{family:n}=t;return e===n}))},l.prototype.getProviderId=function(){return c},e.exports=l},function(e,t,n){"use strict";n(276),n(1356),n(17),n(51),n(7),n(18),n(29),n(22);var o=n(1);function i(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return(i=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new i(e)}e.exports={generateFormattedList:function(e){if(!e)return null;const t=[];var n=e.slice();for(let e=0;e<n.length;e++){var o=n[e],i=o.displayname||o.family,a=[{weight:parseInt(o.weight),style:o.style,family:o.family,subfamily:o.subfamily||null,displayname:o.displayname||null}],r=[o.family];t.push({family:null,displayname:i,fonts:a,families:r});for(let t=n.length-1;t>e;t--)i===(n[t].displayname||n[t].family)&&(r.indexOf(n[t].family)<0&&r.push(n[t].family),a.push({weight:parseInt(n[t].weight),style:n[t].style,family:n[t].family,subfamily:n[t].subfamily||null,displayname:n[t].displayname||null}),n.splice(t,1));var s=0,l=r[0].length;if(l>0)for(let e=1;e<r.length;e++){if(r[e].toLowerCase().indexOf("regular")>=0){l=0,s=e;break}l>r[e].length&&(l=r[e].length,s=e)}t[t.length-1].family=r[s]}return t},parseNativeFonts:async function(e){if(!e||!Array.isArray(e)||!e.length)return[];const t=[];for(var n=0;n<e.length;n++){const l=e[n],c=await l.blob(),d=await c.arrayBuffer();if(d){var i=o.GOpenTypeUtil.getFont(null,null,null,d,!0,!0);if(i&&i.length)for(var a=0;a<i.length;a++){for(var r=i[a],s=2;t.find(e=>e.family===r.family&&e.weight===r.weight&&e.style===r.style);)r.subfamily&&r.family.indexOf(r.subfamily)<0?r.family=r.family+" "+r.subfamily:(r.subfamily="variant "+s++,r.family=r.family.replace(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]variant[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF][0-9]+$/,"")+" "+r.subfamily);t.push({weight:r.weight,style:r.style,family:r.family,blob:d,displayname:r.displayname,subfamily:r.subfamily})}}}return t},getLocalFontsData:async()=>{const e=[];try{var t,n=!1,o=!1;try{for(var a,r=function(e){var t,n,o,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,o=Symbol.iterator);a--;){if(n&&null!=(t=e[n]))return t.call(e);if(o&&null!=(t=e[o]))return new i(t.call(e));n="@@asyncIterator",o="@@iterator"}throw new TypeError("Object is not async iterable")}(await window.queryLocalFonts());n=!(a=await r.next()).done;n=!1){const t=a.value;e.push(t)}}catch(e){o=!0,t=e}finally{try{n&&null!=r.return&&await r.return()}finally{if(o)throw t}}}catch(e){console.error(">>>error getting local fonts data:",e)}return e},getFontFamily:function(e,t){let n=e,o=t(n);if(o||(n=n.replace(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]variant[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF][0-9]+$/,""),o=t(n)),!o){let e=n.split(" ");for(;e.length>0&&(e.pop(),n=e.join(" "),o=t(n),!o););}return o}}},,,,,,,,,,function(e,t,n){(function(t){!function(n){e.exports=function(e){"use strict";function n(e,t){return"object"==typeof e&&null!==e&&(e.constructor===t||Object.prototype.toString.call(e)==="[object "+t.name+"]")}function o(e,t){return!t&&n(e,Array)?e:Array.prototype.slice.call(e)}function i(e,t){return void 0!==e?e:t}function a(e,o,r,s){if(a.is(e)){var l=e.slice(o,o+r);return l._littleEndian=i(s,l._littleEndian),l}if(!a.is(this))return new a(e,o,r,s);if(this.buffer=e=a.wrapBuffer(e),this._isArrayBuffer=d.ArrayBuffer&&n(e,ArrayBuffer),this._isPixelData=!1,this._isDataView=d.DataView&&this._isArrayBuffer,this._isNodeBuffer=d.NodeBuffer&&n(e,t),!this._isNodeBuffer&&!this._isArrayBuffer&&!n(e,Array))throw new TypeError("jDataView buffer has an incompatible type");this._littleEndian=!!s;var c="byteLength"in e?e.byteLength:e.length;this.byteOffset=o=i(o,0),this.byteLength=r=i(r,c-o),this._offset=this._bitOffset=0,this._isDataView?this._view=new DataView(e,o,r):this._checkBounds(o,r,c),this._engineAction=this._isDataView?this._dataViewAction:this._isNodeBuffer?this._nodeBufferAction:this._isArrayBuffer?this._arrayBufferAction:this._arrayAction}function r(e){if(d.NodeBuffer)return new t(e,"binary");for(var n=new(d.ArrayBuffer?Uint8Array:Array)(e.length),o=0,i=e.length;i>o;o++)n[o]=255&e.charCodeAt(o);return n}function s(e){return e>=0&&31>e?1<<e:s[e]||(s[e]=Math.pow(2,e))}function l(e,t){this.lo=e,this.hi=t}function c(){l.apply(this,arguments)}var d={NodeBuffer:"Buffer"in e,DataView:"DataView"in e,ArrayBuffer:"ArrayBuffer"in e,PixelData:!1},u=e.TextEncoder,p=e.TextDecoder;d.NodeBuffer&&function(e){try{e.writeFloatLE(1/0,0)}catch(e){d.NodeBuffer=!1}}(new t(4));var g={Int8:1,Int16:2,Int32:4,Uint8:1,Uint16:2,Uint32:4,Float32:4,Float64:8};a.wrapBuffer=function(e){switch(typeof e){case"number":if(d.NodeBuffer)(e=new t(e)).fill(0);else if(d.ArrayBuffer)e=new Uint8Array(e).buffer;else{e=new Array(e);for(var i=0;i<e.length;i++)e[i]=0}return e;case"string":e=r(e);default:return"length"in e&&!(d.NodeBuffer&&n(e,t)||d.ArrayBuffer&&n(e,ArrayBuffer))&&(d.NodeBuffer?e=new t(e):d.ArrayBuffer?n(e,ArrayBuffer)||(n(e=new Uint8Array(e).buffer,ArrayBuffer)||(e=new Uint8Array(o(e,!0)).buffer)):e=o(e)),e}},a.is=function(e){return e&&e.jDataView},a.from=function(){return new a(arguments)},a.Uint64=l,l.prototype={valueOf:function(){return this.lo+s(32)*this.hi},toString:function(){return Number.prototype.toString.apply(this.valueOf(),arguments)}},l.fromNumber=function(e){var t=Math.floor(e/s(32));return new l(e-t*s(32),t)},a.Int64=c,c.prototype="create"in Object?Object.create(l.prototype):new l,c.prototype.valueOf=function(){return this.hi<s(31)?l.prototype.valueOf.apply(this,arguments):-(s(32)-this.lo+s(32)*(s(32)-1-this.hi))},c.fromNumber=function(e){var t,n;if(e>=0){var o=l.fromNumber(e);t=o.lo,n=o.hi}else t=e-(n=Math.floor(e/s(32)))*s(32),n+=s(32);return new c(t,n)};var h=a.prototype={compatibility:d,jDataView:!0,_checkBounds:function(e,t,n){if("number"!=typeof e)throw new TypeError("Offset is not a number.");if("number"!=typeof t)throw new TypeError("Size is not a number.");if(0>t)throw new RangeError("Length is negative.");if(0>e||e+t>i(n,this.byteLength))throw new RangeError("Offsets are out of bounds.")},_action:function(e,t,n,o,a){return this._engineAction(e,t,i(n,this._offset),i(o,this._littleEndian),a)},_dataViewAction:function(e,t,n,o,i){return this._offset=n+g[e],t?this._view["get"+e](n,o):this._view["set"+e](n,i,o)},_arrayBufferAction:function(t,n,o,a,r){var s,l=g[t],c=e[t+"Array"];if(a=i(a,this._littleEndian),1===l||(this.byteOffset+o)%l==0&&a)return s=new c(this.buffer,this.byteOffset+o,1),this._offset=o+l,n?s[0]:s[0]=r;var d=new Uint8Array(n?this.getBytes(l,o,a,!0):l);return s=new c(d.buffer,0,1),n?s[0]:(s[0]=r,void this._setBytes(o,d,a))},_arrayAction:function(e,t,n,o,i){return t?this["_get"+e](n,o):this["_set"+e](n,i,o)},_getBytes:function(e,t,n){n=i(n,this._littleEndian),t=i(t,this._offset),e=i(e,this.byteLength-t),this._checkBounds(t,e),t+=this.byteOffset,this._offset=t-this.byteOffset+e;var a=this._isArrayBuffer?new Uint8Array(this.buffer,t,e):(this.buffer.slice||Array.prototype.slice).call(this.buffer,t,t+e);return n||1>=e?a:o(a).reverse()},getBytes:function(e,t,n,a){var r=this._getBytes(e,t,i(n,!0));return a?o(r):r},_setBytes:function(e,n,a){var r=n.length;if(0!==r){if(a=i(a,this._littleEndian),e=i(e,this._offset),this._checkBounds(e,r),!a&&r>1&&(n=o(n,!0).reverse()),e+=this.byteOffset,this._isArrayBuffer)new Uint8Array(this.buffer,e,r).set(n);else if(this._isNodeBuffer)new t(n).copy(this.buffer,e);else for(var s=0;r>s;s++)this.buffer[e+s]=n[s];this._offset=e-this.byteOffset+r}},setBytes:function(e,t,n){this._setBytes(e,t,i(n,!0))},getString:function(e,t,n){if(this._isNodeBuffer)return t=i(t,this._offset),e=i(e,this.byteLength-t),this._checkBounds(t,e),this._offset=t+e,this.buffer.toString(n||"binary",this.byteOffset+t,this.byteOffset+this._offset);var o=this._getBytes(e,t,!0);if(n="utf8"===n?"utf-8":n||"binary",p&&"binary"!==n)return new p(n).decode(this._isArrayBuffer?o:new Uint8Array(o));var a="";e=o.length;for(var r=0;e>r;r++)a+=String.fromCharCode(o[r]);return"utf-8"===n&&(a=decodeURIComponent(escape(a))),a},setString:function(e,t,n){if(this._isNodeBuffer)return e=i(e,this._offset),this._checkBounds(e,t.length),void(this._offset=e+this.buffer.write(t,this.byteOffset+e,n||"binary"));var o;n="utf8"===n?"utf-8":n||"binary",u&&"binary"!==n?o=new u(n).encode(t):("utf-8"===n&&(t=unescape(encodeURIComponent(t))),o=r(t)),this._setBytes(e,o,!0)},getChar:function(e){return this.getString(1,e)},setChar:function(e,t){this.setString(e,t)},tell:function(){return this._offset},seek:function(e){return this._checkBounds(e,0),this._offset=e},skip:function(e){return this.seek(this._offset+e)},slice:function(e,t,n){function o(e,t){return 0>e?e+t:e}return e=o(e,this.byteLength),t=o(i(t,this.byteLength),this.byteLength),n?new a(this.getBytes(t-e,e,!0,!0),void 0,void 0,this._littleEndian):new a(this.buffer,this.byteOffset+e,t-e,this._littleEndian)},alignBy:function(e){return this._bitOffset=0,1!==i(e,1)?this.skip(e-(this._offset%e||e)):this._offset},_getFloat64:function(e,t){var n=this._getBytes(8,e,t),o=1-2*(n[7]>>7),i=((n[7]<<1&255)<<3|n[6]>>4)-1023,a=(15&n[6])*s(48)+n[5]*s(40)+n[4]*s(32)+n[3]*s(24)+n[2]*s(16)+n[1]*s(8)+n[0];return 1024===i?0!==a?NaN:1/0*o:-1023===i?o*a*s(-1074):o*(1+a*s(-52))*s(i)},_getFloat32:function(e,t){var n=this._getBytes(4,e,t),o=1-2*(n[3]>>7),i=(n[3]<<1&255|n[2]>>7)-127,a=(127&n[2])<<16|n[1]<<8|n[0];return 128===i?0!==a?NaN:1/0*o:-127===i?o*a*s(-149):o*(1+a*s(-23))*s(i)},_get64:function(e,t,n){n=i(n,this._littleEndian),t=i(t,this._offset);for(var o=n?[0,4]:[4,0],a=0;2>a;a++)o[a]=this.getUint32(t+o[a],n);return this._offset=t+8,new e(o[0],o[1])},getInt64:function(e,t){return this._get64(c,e,t)},getUint64:function(e,t){return this._get64(l,e,t)},_getInt32:function(e,t){var n=this._getBytes(4,e,t);return n[3]<<24|n[2]<<16|n[1]<<8|n[0]},_getUint32:function(e,t){return this._getInt32(e,t)>>>0},_getInt16:function(e,t){return this._getUint16(e,t)<<16>>16},_getUint16:function(e,t){var n=this._getBytes(2,e,t);return n[1]<<8|n[0]},_getInt8:function(e){return this._getUint8(e)<<24>>24},_getUint8:function(e){return this._getBytes(1,e)[0]},_getBitRangeData:function(e,t){var n=(i(t,this._offset)<<3)+this._bitOffset,o=n+e,a=n>>>3,r=o+7>>>3,s=this._getBytes(r-a,a,!0),l=0;(this._bitOffset=7&o)&&(this._bitOffset-=8);for(var c=0,d=s.length;d>c;c++)l=l<<8|s[c];return{start:a,bytes:s,wideValue:l}},getSigned:function(e,t){var n=32-e;return this.getUnsigned(e,t)<<n>>n},getUnsigned:function(e,t){var n=this._getBitRangeData(e,t).wideValue>>>-this._bitOffset;return 32>e?n&~(-1<<e):n},_setBinaryFloat:function(e,t,n,o,i){var a,r,l=0>t?1:0,c=~(-1<<o-1),d=1-c;0>t&&(t=-t),0===t?(a=0,r=0):isNaN(t)?(a=2*c+1,r=1):1/0===t?(a=2*c+1,r=0):(a=Math.floor(Math.log(t)/Math.LN2))>=d&&c>=a?(r=Math.floor((t*s(-a)-1)*s(n)),a+=c):(r=Math.floor(t/s(d-n)),a=0);for(var u=[];n>=8;)u.push(r%256),r=Math.floor(r/256),n-=8;for(a=a<<n|r,o+=n;o>=8;)u.push(255&a),a>>>=8,o-=8;u.push(l<<o|a),this._setBytes(e,u,i)},_setFloat32:function(e,t,n){this._setBinaryFloat(e,t,23,8,n)},_setFloat64:function(e,t,n){this._setBinaryFloat(e,t,52,11,n)},_set64:function(e,t,n,o){"object"!=typeof n&&(n=e.fromNumber(n)),o=i(o,this._littleEndian),t=i(t,this._offset);var a=o?{lo:0,hi:4}:{lo:4,hi:0};for(var r in a)this.setUint32(t+a[r],n[r],o);this._offset=t+8},setInt64:function(e,t,n){this._set64(c,e,t,n)},setUint64:function(e,t,n){this._set64(l,e,t,n)},_setUint32:function(e,t,n){this._setBytes(e,[255&t,t>>>8&255,t>>>16&255,t>>>24],n)},_setUint16:function(e,t,n){this._setBytes(e,[255&t,t>>>8&255],n)},_setUint8:function(e,t){this._setBytes(e,[255&t])},setUnsigned:function(e,t,n){var o=this._getBitRangeData(n,e),i=o.wideValue,a=o.bytes;i&=~(~(-1<<n)<<-this._bitOffset),i|=(32>n?t&~(-1<<n):t)<<-this._bitOffset;for(var r=a.length-1;r>=0;r--)a[r]=255&i,i>>>=8;this._setBytes(o.start,a,!0)}},f={Int8:"Int8",Int16:"Int16",Int32:"Int32",Uint8:"UInt8",Uint16:"UInt16",Uint32:"UInt32",Float32:"Float",Float64:"Double"};for(var m in h._nodeBufferAction=function(e,t,n,o,i){this._offset=n+g[e];var a=f[e]+("Int8"===e||"Uint8"===e?"":o?"LE":"BE");return n+=this.byteOffset,t?this.buffer["read"+a](n):this.buffer["write"+a](i,n)},g)!function(e){h["get"+e]=function(t,n){return this._action(e,!0,t,n)},h["set"+e]=function(t,n,o){this._action(e,!1,t,o,n)}}(m);for(var y in h._setInt32=h._setUint32,h._setInt16=h._setUint16,h._setInt8=h._setUint8,h.setSigned=h.setUnsigned,h)"set"===y.slice(0,3)&&function(e){h["write"+e]=function(){Array.prototype.unshift.call(arguments,void 0),this["set"+e].apply(this,arguments)}}(y.slice(3));return a}(this)}()}).call(this,n(207).Buffer)},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(17),n(22);var o=n(1);n(1127);function i(e){let t=[...new Set(e.map(e=>e.features.map(t=>"• ".concat((e=>e instanceof o.GNode?e.getNodeNameTranslated():e instanceof o.GNoisePattern?o.GLocale.get(new o.GLocaleKey("GPatternChooser","pattern-type.noise")):e instanceof o.GTexturePattern?o.GLocale.get(new o.GLocaleKey("GPatternChooser","pattern-type.texture")):e instanceof o.GBackground?o.GLocale.get(new o.GLocaleKey("GPatternChooser","pattern-type.backgroundfill")):e instanceof o.GAngularGradient?o.GLocale.get(new o.GLocaleKey("GPatternChooser","pattern-type.angulargradient")):"")(t)," [").concat(e.name,"]")).join("<br>")))].join("<br>");this._dialog=$("<div></div>").gDialog({releaseOnClose:!0,buttons:[$("<button>"+o.GLocale.get(new o.GLocaleKey("GLocale","ok"))+"</button>").on("click",()=>this.close())]}),$("<div/>").addClass("message").css({lineHeight:"1.5em",maxHeight:"60%",overflow:"auto"}).append($("<span/>").html(o.GLocale.get(new o.GLocaleKey("GUnsupportedFeaturesDialog","text.title-unsupported"))+"<br>"+t)).appendTo(this._dialog),$("<div></div>").css("margin-top","10px").append($("<label></label>").append($("<input>").attr("type","checkbox").css("margin-right","5px").on("change",e=>{let t=$(e.target).is(":checked");gDesigner.setSetting("disable_warning_unsupported_features",t)})).append($("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GUnsupportedFeaturesDialog","text.checked-unsupported"))))).appendTo(this._dialog)}o.GObject.inherit(i,o.GObject),i.prototype.open=function(){this._dialog.gDialog("open")},i.prototype.close=function(){this._dialog.gDialog("close")},e.exports=i},function(e,t,n){"use strict";n(821);var o=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TEAMS_COMMANDS=t.GSharePointClient=void 0,n(52),n(17),n(89),n(26),n(51),n(7),n(341),n(18),n(99),n(3),n(255),n(62),n(29),n(124),n(84),n(22),n(117),n(106);var i=n(1),a=o(n(1451)),r=n(781),s=o(n(111)),l=n(9),c=n(575),d=o(n(576)),u=o(n(1452)),p=o(n(1218)),g=n(34);const h=n(143);let f=null,m={};const y=t.TEAMS_COMMANDS=p.default.COMMANDS,v=t.GSharePointClient=function e(t){let{tenant:n,domain:o,clientID:i,id:a,authTenant:r,corporate:s,token:l,relativePath:c}=t;this.TOKEN=f||l,this.BASE_URL=n,this.AUTH_TENANT=r||n,this.DOMAIN=o,this.CLIENT_ID=i,this.SETTINGS_ID=a,this.CORPORATE=s||!1,this.RELATIVE_PATH=c,this.HEADERS=e.requestHeaders};v.prototype.setTenantURL=function(e){this.BASE_URL=e.replace("https://","")},v.prototype.setRelativePath=function(e){this.RELATIVE_PATH=e},v.prototype.relativeUrlContainsSubsiteRelativePath=function(e){return 0===e.indexOf(this.RELATIVE_PATH)},v.prototype.getSanitizedFolderRelativePath=function(e){let t=e;return this.RELATIVE_PATH&&(t=(0,g.trimStart)(t,this.RELATIVE_PATH)),(0,g.trimStart)(t,"/")},v.prototype.getSanitizedFileRelativePath=function(e){return this.RELATIVE_PATH?"".concat(this.RELATIVE_PATH,"/").concat(e):e},v.prototype.setToken=function(e){this.TOKEN=e},v.CheckOutStatuses={CheckedOut:0,Available:2},v.FILE_STATUS={LOCKED:3,LOCKED_BY_ME:2,AVAILABLE:1,LOADING:-1},v.requestHeaders={Accept:"application/json;odata=nometadata","Accept-Encoding":"gzip, deflate","Accept-Language":"en-US,en;q=0.8"},v.CheckinType={MinorCheckIn:0,MajorCheckIn:1,OverwriteCheckIn:2},v.SpecialCharList=["~",'"',"'","#","%","&","*",":","<",">","?","/","\\","{","|","}"],v.InvalidNames=[".lock","CON","PRN","AUX","COM0","COM1","COM2","COM3","COM4","COM5","COM6","COM7","COM8","COM9","LPT0","LPT1","LPT2","LPT3","LPT4","LPT5","LPT6","LPT7","LPT8","LPT9","desktop.ini"],v.InvalidNameBeginnings=["~$"],v.InvalidNameEndings=["."],v.InvalidContainings=["_vti_"],v.InvalidOnlyCharacters=["."],v.convertFileToCloudItem=function(e){const t=e=>{var t=h.from({id:e.UniqueId,version:e.UIVersionLabel,updated:e.TimeLastModified,created:e.TimeCreated,checkedOut:e.CheckOutType===v.CheckOutStatuses.CheckedOut,relativeUrl:e.ServerRelativeUrl});t.storage=h.Storage.SharePoint,t.setItemType(h.Type.File),t.type=v.getFileType({name:e.Name}),t.mimeType=e._mimetype||e.mimeType||t.type;const n=l.FILE_FORMATS.find(e=>{let{type:n}=e;return n===t.type});return t.extension=n&&n.ext,t.name=e.Name.replace(new RegExp(".(".concat(t.extension,")$"),"i"),""),t.setModificationTime(t.updated),e.Length&&t.setSize(parseInt(e.Length)),t.checkedOut?t.checkOutStatus=v.FILE_STATUS.LOADING:(t.checkOutStatus=v.FILE_STATUS.AVAILABLE,t=v.updateFilePermissions(t)),t};return e instanceof Array?e.map(t):t(e)},v.updateFilePermissions=function(e){return e instanceof h&&e.getType()===h.Type.File?([v.FILE_STATUS.AVAILABLE,v.FILE_STATUS.LOCKED_BY_ME].includes(e.checkOutStatus)?e.setPermissions([h.Permission.Open,h.Permission.Delete,h.Permission.Download,h.Permission.Copy,h.Permission.CutPaste]):e.revokePermissions(),e):e},v.hasSpecialChar=function(e){return new RegExp("[".concat(v.SpecialCharList.join("|"),"]")).test(e)},v.isNameValid=function(e){if(!e||!e.trim())return!1;if(v.hasSpecialChar(e))return!1;if(v.InvalidNames.indexOf(e)>=0)return!1;for(let t=0,n=v.InvalidNameBeginnings.length;t<n;t++){let n=v.InvalidNameBeginnings[t];if(e.startsWith(n))return!1}for(let t=0,n=v.InvalidNameEndings.length;t<n;t++){let n=v.InvalidNameEndings[t];if(e.endsWith(n))return!1}for(let t=0,n=v.InvalidContainings.length;t<n;t++){let n=v.InvalidContainings[t];if(e.indexOf(n)>=0)return!1}for(let t=0,n=v.InvalidOnlyCharacters.length;t<n;t++){const n=v.InvalidOnlyCharacters[t];if(RegExp("^[".concat(n,"]+$")).test(e))return!1}return!0},v.convertFolderToCloudItem=function(e){const t=e=>{var t=h.from({id:e.UniqueId?e.UniqueId:e.id,name:e.Name?e.Name:e.name,relativeUrl:e.ServerRelativeUrl?e.ServerRelativeUrl:e.relativeUrl,type:"folder"});return t.setItemType(h.Type.Folder),t.setPermission(h.Permission.Open),t.setPermission(h.Permission.Delete),t.setPermission(h.Permission.CutPaste),t};return e instanceof Array?e.map(t):t(e)},v.getFileType=function(e){return e.name.toLowerCase().endsWith(".cdrapp")?l.FILE_FORMATS.find(e=>{let{ext:t}=e;return"cdrapp"===t}).type:e.name.toLowerCase().endsWith(".cdr")?l.FILE_FORMATS.find(e=>{let{ext:t}=e;return"cdr"===t}).type:e.name.toLowerCase().endsWith(".des")?l.FILE_FORMATS.find(e=>{let{ext:t}=e;return"des"===t}).type:void 0},v.ACCESS_TOKEN_PROP_NAME="designer.filespanel.cloud-account.sharepoint.token",v.getInstance=function(e){return e.id||(e.id="".concat(e.accountId,".").concat(e.tenant)),m[e.id]&&m[e.id].TOKEN||(m[e.id]=new v(e)),v.clearOldAccessTokens(),m[e.id]},v.deleteToken=function(e){gContainer.removeProperty("".concat(v.ACCESS_TOKEN_PROP_NAME,".").concat(e))},v.getUserId=function(){return gDesigner.getSyncUser().id},v.getUserEmail=function(){return gDesigner.getSyncUser().email},v.clearOldAccessTokens=function(){const e=[],t=gContainer.getStorageLength();for(let n=0;n<t;n++){let t=gContainer.getPropertyKeyByIndex(n);0===t.indexOf("".concat(v.ACCESS_TOKEN_PROP_NAME,"."))&&e.push(t)}const n=v.getUserId();for(let t=0;t<e.length;t++){o(e[t])}function o(e){gContainer.getProperty(e).then(t=>{v.isTokenValid(t,n)||gContainer.removeProperty(e)})}},v.isTokenValid=function(e,t){const n=gContainer.getSharepointAuthenticator();return n?n.isTokenValid(e):!(!e||!e.expires||e.expires<=Date.now()/1e3)&&!(!e.id||e.id!==t)},v.getCachedToken=function(e){return gContainer.getProperty("".concat(v.ACCESS_TOKEN_PROP_NAME,".").concat(e))},v.getValidCachedTokenOrNull=async function(e){const t=await v.getCachedToken(e);return v.isTokenValid(t,v.getUserId())?t:null},v.saveTokenToCache=async function(e,t){gContainer.setProperty("".concat(v.ACCESS_TOKEN_PROP_NAME,".").concat(e),t)},v.ExceptionCode={LoginAborted:1,FileAlreadyCheckedOut:423};class _ extends d.default{constructor(e,t){super(e),this.code=t,this.__proto__=_.prototype,this.name="SharepointException"}toString(){return"[Object SharepointException]"}}v.SharepointException=_,v._logoutAndClearAdalCache=function(e){var t=new a.default(e);t.clearCache(),t.getCachedUser()&&t.logOut(),t._user=null;var n=[];for(let e=0;e<localStorage.length;e++)"adal."===localStorage.key(e).substring(0,5)&&n.push(localStorage.key(e));for(let e=0;e<n.length;e++)localStorage.removeItem(n[e])},v.prototype.getSettings=function(){return{tenant:this.BASE_URL,domain:this.DOMAIN,clientID:this.CLIENT_ID,accountId:this.SETTINGS_ID,authTenant:this.AUTH_TENANT,corporate:this.CORPORATE,token:this.TOKEN,relativePath:this.RELATIVE_PATH,type:l.EXTERNAL_APP.SHAREPOINT}},v.prototype.getId=function(){return this.SETTINGS_ID},v.prototype.getFile=function(e){return this.getRawFile(e).then((function(e){return s.default.createUint8ArrayFromBlob(e)}))},v.prototype.queryFiles=function(e){return this.get(this._createQueryFilesURL(e))},v.prototype.fetchFolders=function(e,t,n){const o=this.getSanitizedFolderRelativePath(e.relativeUrl);var i="/_api/web/GetFolderByServerRelativeUrl('".concat(encodeURI(o),"')/Folders?$orderby=").concat(encodeURI(t));return n>0&&(i+="&$top=".concat(n)),this.get(i).then(t=>{let{value:n}=t;const o=[];if(!n||!n.length)return o;for(let t=0,i=n.length;t<i;t++){let i=n[t];if(!i.Exists)continue;const a=v.convertFolderToCloudItem(i);a.parent=e,o.push(a)}return o})},v.prototype.queryFilesByOwner=function(e,t){const n=function(e){return e.searchParams.append("$select","*"),e.searchParams.append("$expand","Author"),e.searchParams.append("$filter","Author/Id eq ".concat(t)),e}(this._createQueryFilesURL(e));return this.get(n)},v.prototype._createQueryFilesURL=function(e){const{folderRelativeUrl:t,orderBy:n,limit:o,skip:i}=e,a=this.getSanitizedFolderRelativePath(t),r=this.getAPIEndpointURL("/_api/web/GetFolderByServerRelativeUrl('".concat(a,"')/Files"));return r.searchParams.append("$orderby",n),r.searchParams.append("$top",o),r.searchParams.append("$skip",i),r},v.prototype.findFileById=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.get("/_api/search/query?querytext='"+e+"'&selectproperties='Title,Filename,ParentLink,DefaultEncodingURL'",{headers:t}).then(e=>{if(e){const{PrimaryQueryResult:{RelevantResults:{Table:{Rows:[t]}}}}=e,n=t.Cells.find(e=>{let{Key:t}=e;return"Filename"===t}).Value;return{name:t.Cells.find(e=>{let{Key:t}=e;return"Title"===t}).Value,type:v.getFileType({name:n}),relativeUrl:t.Cells.find(e=>{let{Key:t}=e;return"DefaultEncodingURL"===t}).Value.replace("https://".concat(this.BASE_URL),"")}}return null})},v.prototype.getAdditionalItemData=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n="/_api/web/GetFileByServerRelativeUrl('".concat(encodeURI("".concat(e.relativeUrl)),"')/ListItemAllFields?expand=Properties");return this.get(n,{headers:t})},v.prototype.checkOutFile=async function(e){const t="/_api/web/GetFileByServerRelativeUrl('".concat(e.relativeUrl,"')/CheckOut()");return this.post(t).catch(e=>{if(e.status===v.ExceptionCode.FileAlreadyCheckedOut)throw new v.SharepointException(i.GLocale.get(new i.GLocaleKey("GFilesPanelViewSharepoint","text.error-file-is-already-checked-out-by-someone-else")),v.ExceptionCode.FileAlreadyCheckedOut);throw e})},v.prototype.discardCheckOut=function(e){var t="/_api/web/GetFileByServerRelativeUrl('".concat(e.relativeUrl,"')/UndoCheckOut()");return this.post(t)},v.prototype.checkInFile=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"New Comment",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v.CheckinType.MinorCheckIn;const o="/_api/web/GetFileByServerRelativeUrl('".concat(e.relativeUrl,"')/CheckIn(comment='").concat(t,"', checkintype=").concat(n,")");return this.post(o)},v.prototype.getCheckOutFileInfo=function(e){const t="/_api/web/GetFileByServerRelativeUrl('".concat(e.relativeUrl,"')/checkedOutByUser");return this.get(t)},v.prototype.getCheckOutFileStatus=async function(e){if(e.hasOwnProperty("checkedOut")&&!e.checkedOut)return v.FILE_STATUS.AVAILABLE;const t=await this.getCheckOutFileInfo(e).catch(e=>(console.error(">>>error retrieving checkout info: ",e.message),null));if(!t||!0===t["odata.null"])return v.FILE_STATUS.AVAILABLE;const n=await this._getUser();return t.UserId.NameId===n.getNameId()?v.FILE_STATUS.LOCKED_BY_ME:v.FILE_STATUS.LOCKED},v.prototype._getUser=async function(){return this._user||(this._user=new u.default(await this.getUser())),this._user},v.prototype.getFileCreator=async function(e){return new u.default(await this._getFileCreator(e))},v.prototype.getLibrarySettings=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.get("/_api/web/lists/getByTitle('Documents')",{headers:e}).then(e=>({enableVersioning:e.EnableVersioning,enableMinorVersions:e.EnableMinorVersions,enableFolderCreation:e.EnableFolderCreation,forceCheckout:e.ForceCheckout}))},v.prototype.getFileDetails=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return await this._getFileDetailsByRelativeURL(e,t)}catch(n){if(e.id){const n=await this.findFileById(e.id);return this._getFileDetailsByRelativeURL(n,t)}throw n}},v.prototype._getFileDetailsByRelativeURL=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n="/_api/web/GetFileByServerRelativeUrl('".concat(encodeURI("".concat(e.relativeUrl)),"')");return this.get(n,{headers:t})},v.prototype.getFolderDetails=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.getSanitizedFolderRelativePath(e.relativeUrl),o="/_api/web/GetFolderByServerRelativeUrl('".concat(encodeURI(n),"')");return this.get(o,{headers:t})},v.prototype.getParentFolder=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.getSanitizedFolderRelativePath(e.relativeUrl),o="/_api/Web/GetFolderByServerRelativePath(decodedurl='".concat(encodeURI(n),"')/ParentFolder");return this.get(o,{headers:t})},v.prototype.copyFileTo=function(e,t){var n="/_api/web/GetFileByServerRelativeUrl('".concat(encodeURI(e.relativeUrl),"')/copyto(strnewurl='").concat(encodeURI(t.relativeUrl),"/").concat(e.name,".").concat(e.extension,"',boverwrite=false)");return this.post(n,null,{rawResponse:!0})},v.prototype.moveFileTo=function(e,t){var n="/_api/web/GetFileByServerRelativeUrl('".concat(encodeURI(e.relativeUrl),"')/moveto(newurl='").concat(encodeURI(t.relativeUrl),"/").concat(e.name,".").concat(e.extension,"',flags=0)");return this.post(n,null,{rawResponse:!0})},v.prototype.moveFolderTo=function(e,t){var n="/_api/web/GetFolderByServerRelativeUrl('".concat(encodeURI(e.relativeUrl),"')/moveto(newurl='").concat(encodeURI(t.relativeUrl),"/").concat(e.name,"')");return this.post(n,null,{rawResponse:!0})},v.prototype.folderExists=function(e,t){const n=this.getSanitizedFolderRelativePath(t.relativeUrl);return this.get("/_api/Web/GetFolderByServerRelativePath(decodedurl='".concat(encodeURI("".concat(n)+"".concat(e?"/".concat(e):"")),"')/Exists/$value")).catch(e=>(!e.status||404!==e.status)&&Promise.reject(e))},v.prototype.fileExists=function(e,t){return this.get("/_api/web/GetFileByServerRelativeUrl('".concat(encodeURI("".concat(t.relativeUrl,"/").concat(e)),"')/Exists/$value")).catch(e=>(!e.status||404!==e.status)&&Promise.reject(e))},v.prototype.getRawFile=function(e,t){var n="/_api/web/GetFileByServerRelativeUrl('".concat(e.relativeUrl,"')/$value");return this.get(n,{rawResponse:!0,progress:t}).then(e=>e.blob())},v.prototype.getUser=function(){return this.get("/_api/Web/CurrentUser")},v.prototype._getFileCreator=function(e){var t="/_api/web/GetFileByServerRelativeUrl('".concat(e.relativeUrl,"')/Author");return this.get(t)},v.prototype.get=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._query("GET",e,null,t)},v.prototype.post=function(e,t){let n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n=o&&o.blobRequest?new Blob([t]):t,this._query("POST",e,n,o)},v.prototype._query=function(e,t){let n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return n=i&&i.fullLink||t instanceof URL?t instanceof URL?t.toString():t:this.getAPIEndpointURL(t).toString(),this.query(e,n,o,i)},v.prototype.getAPIEndpointURL=function(e){return new URL("https://".concat(this.BASE_URL).concat(e))},v.prototype.hasPermissionToAccessFolder=async function(e){try{return!!await this.getFolderDetails(e)}catch(e){return(!e||e.status!==l.HTTP_STATUS_CODES.FORBIDDEN&&e.status!==l.HTTP_STATUS_CODES.NOT_FOUND)&&(console.error("GSharePointClient - failed to check folder permissions",e),!1)}},v.prototype.getEffectiveBasePermissions=function(e){return this.query("GET","".concat(e,"/_api/Web/effectiveBasePermissions"))},v.prototype.getFileEffectiveBasePermissions=function(e){var t="/_api/web/GetFileByServerRelativeUrl('".concat(e.relativeUrl,"')/ListItemAllFields/effectiveBasePermissions");return this.get(t)},v.prototype.query=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const i=this;return new Promise((e,t)=>i.TOKEN&&v.isTokenValid(i.TOKEN,v.getUserId())?a(e,t):i.connect().then(()=>{a(e,t)}).catch(e=>{t(e)}));async function a(r,s){const l={method:e,cache:"no-cache",headers:i._prepareRequestHeaders(e,n,o),body:i._prepareRequestBody(e,n,o)};let d;try{d=await fetch(t,l)}catch(e){return void s(e)}if(401===d.status)i.clearUserData(),i.connect(!0).then(()=>{a(r,s)}).catch(e=>{s(e)});else if(200===d.status||201===d.status||202===d.status||204===d.status){if(o&&o.progress&&"function"==typeof o.progress)return(0,c.readResponseWithProgress)(d,o.progress,!1).then(e=>r(e));if(o&&o.rawResponse)return r(d);let e={};if(204!==d.status)try{e=await d.json()}catch(e){console.error("Incorrect response format: ",e.message),s(e)}r(e)}else s({status:d.status,statusText:d.statusText})}},v.prototype._prepareRequestHeaders=function(e,t,n){if(n&&n.noHeaders)return;const o=Object.assign({},this.HEADERS,{Authorization:"Bearer ".concat(this.TOKEN.token)});this._isBodyRequestRequired(e,t)&&(o["Content-Type"]=n&&n.headers&&n.headers["Content-Type"]||"application/json;odata=verbose",o["Content-Length"]=JSON.stringify(t).length);return Object.assign(o,n&&n.headers||{})},v.prototype._prepareRequestBody=function(e,t,n){let o;return this._isBodyRequestRequired(e,t)&&(o=n&&n.blobRequest?t:JSON.stringify(t)),o},v.prototype._isBodyRequestRequired=function(e,t){return!(!t||!["POST","PUT","PATCH"].includes(e))},v.prototype._getSharePointSettings=function(){return{tenant:this.AUTH_TENANT,clientId:this.CLIENT_ID,domain:this.DOMAIN,loginHint:v.getUserEmail()}},v.prototype.clearUserData=function(){this.TOKEN=null,this._toClear=!0,v._logoutAndClearAdalCache(this._getSharePointSettings())},v.prototype._getCachedToken=function(e){return e||(e=e=>v.isTokenValid(e,v.getUserId())),gContainer.getProperty(this._getTokenPropertyName()).then(t=>{if(t&&e(t))return t})},v.prototype._setCachedToken=function(e){this.setToken(e),gContainer.setProperty(this._getTokenPropertyName(),e)},v.prototype._getTokenPropertyName=function(){return"".concat(v.ACCESS_TOKEN_PROP_NAME,".").concat(this.SETTINGS_ID)},v.prototype.connect=async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this,o=this._getSharePointSettings(),a=6e4,s=3e3;let c,d=!1;const u=await v.getValidCachedTokenOrNull(n.SETTINGS_ID);if(n._connect)return n._connect;const p=gContainer.getSharepointAuthenticator();return p?!e&&u?void(n.TOKEN=u):(l.msTeamsMode?n._connect=p.authenticate(n._getTeamsCommand()):n._connect=p.authenticate(o,{clearCache:e}),n._connect.then(e=>(n.TOKEN=f={id:v.getUserId()},e.expires&&e.token?(n.TOKEN.expires=f.expires=Number(e.expires),n.TOKEN.token=f.token=e.token):"string"==typeof e&&(n.TOKEN.expires=f.expires=Math.floor(Date.now()/1e3)+3600,n.TOKEN.token=f.token=e),v.saveTokenToCache(n.SETTINGS_ID,n.TOKEN),delete n._connect,n.TOKEN)),n._connect):(n._connect=new Promise((s,l)=>{!function t(u){gContainer.getProperty("".concat(v.ACCESS_TOKEN_PROP_NAME,".").concat(n.SETTINGS_ID)).then(p=>{if(p&&!e&&v.isTokenValid(p,v.getUserId()))return n.TOKEN=p,s(),void(n._connect=null);$(window).on("message",b);var m=new URL("".concat(window.location.origin,"/sp.html"));const y=n._popupToCenter(m.href,"SharePointToken",680,460);if(!y||y.closed||void 0===y.closed)return $(window).off("message",b),void l({status:r.WINDOW_STATUS_BLOCKED,message:i.GLocale.get(new i.GLocaleKey("GExternalStorage","text.error-window-blocked-alternative"))});y.onload=function(){n._toClear&&(y.postMessage({cmd:"clearCachedUser",sharepointSettings:o},"".concat(window.location.protocol,"//").concat(window.location.host,"/sp.html")),delete n._toClear),y.postMessage({cmd:"sharepointSettings",sharepointSettings:o},"".concat(window.location.protocol,"//").concat(window.location.host,"/sp.html"))},y.onclose=function(){_&&(clearInterval(_),_=null)};var _=setInterval((function(){y.closed&&!d&&(clearInterval(_),_=null,gContainer.removeProperty("sp_getToken_data"),v._logoutAndClearAdalCache(o),c&&clearTimeout(c),l(new v.SharepointException(null,v.ExceptionCode.LoginAborted)))}),1e3);async function b(e){let i=e.originalEvent.data;const{cmd:r}=i;if(r&&"saveToken"===r)n.TOKEN=f={expires:Math.floor(Date.now()/1e3)+3600,token:i.token,id:v.getUserId()},v.saveTokenToCache(n.SETTINGS_ID,n.TOKEN),d=!0,g(y),c&&clearTimeout(c),$(window).off("message",b),n._connect=null,s();else if(r&&"saveTokenError"===r){const{error:e}=i;if("User login is required"===e)return;if(console.error(">>saveTokenError data",i),c&&clearTimeout(c),u)return void(c=setTimeout((function(){h(y),v._logoutAndClearAdalCache(o),t(!1)}),a));v._logoutAndClearAdalCache(o),h(y),n._connect=null,l(e)}}u&&(c=setTimeout((function(){g(y),v._logoutAndClearAdalCache(o),t(!1)}),a))})}(t)}),n._connect);function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;setTimeout(()=>{e.close()},t)}function h(e){g(e,s)}},v.prototype.updateFileContent=function(e,t){return this._putBlob("/_api/web/GetFileByServerRelativeUrl('".concat(e.relativeUrl,"')/$value"),t)},v.prototype.updateItem=function(e,t){const n=this.getSanitizedFolderRelativePath(e.relativeUrl);return this.post("/_api/web/GetFolderByServerRelativeUrl('".concat(n,"')/ListItemAllFields"),t,{headers:{"X-HTTP-Method":"MERGE"}})},v.prototype.deleteItem=function(e){const t=this.getSanitizedFolderRelativePath(e.relativeUrl);return this.post("/_api/web/GetFolderByServerRelativeUrl('".concat(t,"')"),null,{headers:{"X-HTTP-Method":"DELETE"},rawResponse:!0}).then(e=>{if(200!==e.status&&204!==e.status)throw new Error(e.statusText)})},v.prototype._popupToCenter=function(e,t,n,o){const i=this._getPopupWindowReference(),a=i.outerHeight/2+i.screenY-n/2,r=i.outerWidth/2+i.screenX-o/2;return window.open(e,t,"left=".concat(r,",top=").concat(a,",width=").concat(o,",height=").concat(n,",menubar=no,toolbar=no,location=no,resizable=no,scrollbars=no"))},v.prototype._getPopupWindowReference=function(){try{window.top.outerHeight;return window.top}catch(e){return window}},v.prototype.updateFileContentById=function(e,t){return this._putBlob("/_api/web/GetFileById('".concat(e,"')/$value"),t)},v.prototype._putBlob=function(e,t){return this.post(e,t,{headers:{"X-HTTP-Method":"PUT"},blobRequest:!0,rawResponse:!0})},v.prototype._getTeamsCommand=function(){return y.SHAREPOINT_COMMAND},v.prototype.createFile=function(e,t){const n=e.parentUrl||e.parent.relativeUrl,o=this.getSanitizedFolderRelativePath(n);var i="/_api/web/GetFolderByServerRelativeUrl('".concat(o,"')/Files/add(url='").concat(e.getNameWithExtension(),"',overwrite=true)");return this.post(i,t,{blobRequest:!0,rawResponse:!0})},v.prototype.getAccountByEmail=function(e){if(!e||e.indexOf("@")<=0)return Promise.reject(i.GLocale.get(new i.GLocaleKey("GShareDialog","text.invalid-email")).replace("%email",e));var t="/_api/web/EnsureUser('".concat(e,"')");return this.post(t)},v.prototype.isCorporate=function(){return this.CORPORATE},v.prototype.getCorporateProviderName=function(){return"microsoft"},v.prototype.toString=function(){return"[Object GSharePointClient]"};t.default=v},function(e,t,n){"use strict";n(26);const{FILE_FORMATS:o}=n(9);class i{constructor(){this.onlyListFilesOwnedByUser=!1,this.supportedFileFormats=o}static from(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(new i,e)}}i.prototype.onlyListFilesOwnedByUser=null,i.prototype.supportedFileFormats=null,i.prototype.supportedFileFilters=null,e.exports=i},function(e,t,n){"use strict";function o(e){if(!o.Type[e])throw new Error("Incorrect Clour Role type");this._type=e}Object.defineProperty(t,"__esModule",{value:!0}),t.GCloudRole=o,t.default=void 0,n(3),o.Type={Viewer:"Viewer",Coauthor:"Coauthor",Creator:"Creator",Reviewer:"Reviewer",Approver:"Approver",ContentEditor:"ContentEditor"},o.prototype._type=null,o.prototype.setRole=function(e){if(!o.Type[e])throw new Error("Incorrect Clour Role type");return this._type=e,this},o.prototype.getRole=function(){return this._type},o.prototype.toString=function(){return"[Object GCloudRole]"};t.default=o},function(e,t,n){"use strict";var o=n(14);n(89),n(26),n(7);var i=n(1),a=n(1454),r=o(n(37)),s=o(n(428)),l=n(1219),c=n(34);const{getAuthenticator:d,getTeamsContext:u}=s.default;function p(){}p.Error={NOT_REGISTERED:1,ONEDRIVE_BUSINESS_ERROR:2,SHAREPOINT_ERROR:3,SHAREPOINT_ONEDRIVE_BUSINESS_ERROR:4,OFFLINE:5,FAILED_TO_OPEN_WINDOW:6,CANCELLED_BY_USER:7},p.COMMANDS={ONE_DRIVE_BUSINESS_COMMAND:l.ONE_DRIVE_BUSINESS_COMMAND,SHAREPOINT_COMMAND:l.SHAREPOINT_COMMAND,MS_TEAMS_COMMAND:l.MS_TEAMS_COMMAND},p.FAIL_REASONS={POPUP_WINDOW_BLOCKED:"FailedToOpenWindow",CANCELLED_BY_USER:"CancelledByUser"},p._instance=null,p.CACHED_TOKENS_PROPERTY_NAME="msteams.authentication.tokens",p.getInstance=()=>(p._instance||(p._instance=new p),p._instance),p.prototype._loaded=!1,p.prototype._loading=!1,p.prototype._authenticated=!1,p.prototype._tokens=null,p.prototype.authenticate=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[l.MS_TEAMS_COMMAND];if(!(e instanceof Array))return this._connectDrives(e);if(this._authenticated)return!0;const t=this;return new Promise(async(n,o)=>(await t._authenticateCommand(e),t._authWithCorelCloud(await t.getOrFetchMSTeamsAccessToken()).then(e=>{e?(t._authenticated=!0,n(!0)):o()}).catch(()=>{o()})))},p.prototype._connectDrives=async function(e){return this._tokens[e]&&this.isTokenValid(this._tokens[e])?Promise.resolve(this._tokens[e]):(await this._authenticateCommand([e]),this._tokens[e])},p.prototype.isTokenValid=function(e){return!(!e||!e.expires||e.expires<=Date.now()/1e3)},p.prototype.isAuthenticated=function(){const e=this._tokens&&this._tokens[l.MS_TEAMS_COMMAND]||null;return!(!e||!this.isTokenValid(e))||(this._authenticated=!1,!1)},p.prototype._authenticateCommand=async function(e){const t=this,n=await this._getValidCachedTokens(),o={};let i=[];if(!n||!Object.values(n).length)return this._processAuthenticationCommands(e);for(let t=0,a=e.length;t<a;t++)n[e[t]]?o[e[t]]=n[e[t]]:i.push(e[t]);return 0===i.length?(await t.setTokens(o,!1),o):this._processAuthenticationCommands(e,o)},p.prototype._processAuthenticationCommands=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this;return new Promise((o,a)=>{d().then(r=>r.authenticate({url:"".concat(window.location.origin,"/msteams-sp.html#").concat(l.COMMAND_QUERY_PARAM,"=").concat(e.join(",")),width:600,height:535,successCallback:async function(e){const i={};for(let t in e){const{expires:n,accessToken:o}=e[t];i[t]={token:o,expires:Number(n)}}await n.setTokens(Object.assign(t,i)),o(i)},failureCallback:function(t){t===p.FAIL_REASONS.POPUP_WINDOW_BLOCKED?n._handleError(p.Error.FAILED_TO_OPEN_WINDOW,i.GLocale.get(new i.GLocaleKey("GMSTeamsAuthenticator","text.authenticate")),t=>{console.log("target",t.target),n._processAuthenticationCommands(e).then(e=>{o(e)}).catch(e=>{console.error(">>>reautherror",e),a(e)})}):t===p.FAIL_REASONS.CANCELLED_BY_USER?(n._handleError(p.Error.CANCELLED_BY_USER,i.GLocale.get(new i.GLocaleKey("GMSTeamsAuthenticator","text.try-again")),()=>window.location.reload()),a()):(n._handleError({message:t}),a())}})).catch(e=>{a(e)})})},p.prototype._getValidCachedTokens=async function(){const e=this._getCachedTokens();if(!e)return null;const t=await u(),n={};if(e.userId!==t.loginHint)return n;const o=Object.keys(e);for(let t=0,i=o.length;t<i;t++){const i=e[o[t]];this.isTokenValid(i)&&(n[o[t]]=i)}return n},p.prototype._getCachedTokens=function(){const e=window.localStorage.getItem(p.CACHED_TOKENS_PROPERTY_NAME);if(!e)return null;let t=null;try{t=JSON.parse((0,c.base64StringToString)(e))}catch(e){console.error("Cant decode cache tokens")}return t},p.prototype.setTokens=async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=(await u()).loginHint,o=await this._getValidCachedTokens();this._tokens=Object.assign({userId:n},o,e),t&&localStorage.setItem(p.CACHED_TOKENS_PROPERTY_NAME,(0,c.stringToBase64String)(JSON.stringify(this._tokens)))},p.prototype.getOrFetchMSTeamsAccessToken=async function(){const e=this._tokens&&this._tokens[l.MS_TEAMS_COMMAND]||null;return e&&this.isTokenValid(e)||(this._authenticated=!1,await this.authenticate()),this._tokens&&this._tokens[l.MS_TEAMS_COMMAND]&&this._tokens[l.MS_TEAMS_COMMAND].token||null},p.prototype._handleError=function(e,t,n){let o=null;switch(e){case p.Error.OFFLINE:o=i.GLocale.get(new i.GLocaleKey("GMSTeamsAuthenticator","text.offline"));break;case p.Error.ONEDRIVE_BUSINESS_ERROR:o=i.GLocale.get(new i.GLocaleKey("GMSTeamsAuthenticator","text.onedrive-business-error"));break;case p.Error.SHAREPOINT_ERROR:o=i.GLocale.get(new i.GLocaleKey("GMSTeamsAuthenticator","text.sharepoint-error"));break;case p.Error.SHAREPOINT_ONEDRIVE_BUSINESS_ERROR:o=i.GLocale.get(new i.GLocaleKey("GMSTeamsAuthenticator","text.sharepoint-onedrive-business-error"));break;case p.Error.NOT_REGISTERED:o=i.GLocale.get(new i.GLocaleKey("GMSTeamsAuthenticator","text.not_registered"));break;case p.Error.FAILED_TO_OPEN_WINDOW:o=i.GLocale.get(new i.GLocaleKey("GMSTeamsAuthenticator","text.failed-to-open-window"));break;case p.Error.CANCELLED_BY_USER:o=i.GLocale.get(new i.GLocaleKey("GMSTeamsAuthenticator","text.cancelled-by-user"));break;default:o=e&&e.message?e.message:i.GLocale.get(new i.GLocaleKey("GMSTeamsAuthenticator","text.unknown"))}r.default.splashScreenError(o,t,n)},p.prototype._validateAuthenticatedUser=async function(){const e=await this.getUser();return!e||e.reload||e.deactivated?(this._handleError(p.Error.NOT_REGISTERED),!1):e&&e.microsoft_corporate_config?e.microsoft_corporate_config.client_id?!!e.microsoft_corporate_config.odb_client_id||(this._handleError(p.Error.ONEDRIVE_BUSINESS_ERROR),!1):(this._handleError(p.Error.SHAREPOINT_ERROR),!1):(this._handleError(p.Error.SHAREPOINT_ONEDRIVE_BUSINESS_ERROR),!1)},p.prototype._authWithCorelCloud=async function(e){if(this._loaded||this._loading)return!1;this._loading=!0;if(await a.gApi.isOffline({includeCredentials:!1}))return this._loading=!1,this._handleError(p.Error.OFFLINE),null;const t=await a.gApi.authenticateMsTeamsUser(e).catch(e=>(console.error(">>>authenticateMsTeamsUser error",e),this._handleError(p.Error.NOT_REGISTERED),null));if(!t||!t.ok)return this._handleError(p.Error.NOT_REGISTERED),this._loading=!1,!1;return await t.json().catch(()=>null)?(this._loaded=!0,this._loading=!1,this._validateAuthenticatedUser()):(this._handleError(p.Error.NOT_REGISTERED),this._loading=!1,!1)},p.prototype.getUser=async function(){if(this._user)return this._user;const e=await gDesigner.getUser();return e?(this._user=e,this._user):null},e.exports=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHAREPOINT_COMMAND=t.ONE_DRIVE_BUSINESS_COMMAND=t.MS_TEAMS_COMMAND=t.COMMAND_QUERY_PARAM=void 0;t.ONE_DRIVE_BUSINESS_COMMAND="onedrivebusiness",t.SHAREPOINT_COMMAND="sharepoint",t.MS_TEAMS_COMMAND="msteams",t.COMMAND_QUERY_PARAM="sp_command"},function(e,t,n){"use strict";e.exports={Apple:"apple",Windows:"windows",GooglePlay:"googleplay",ChromeWeb:"chromeweb"}},function(e,t,n){"use strict";n(51),n(7);var o=n(1),i=n(1174),a=n(238),r=n(1095);function s(){try{this._fontDB=i.getInstance()}catch(e){this._fontDB=null}}s.prototype.fontDB=null,s.prototype._numFiles=0,s.prototype._tmpFontList=null,s.prototype._importTrialCount=0,s.prototype.import=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{silent:n}=t;return!n&&this.busy()?this._importTrialCount++>100?void e():(setTimeout(function(){this.import(e)}.bind(this),100),void this._importTrialCount++):(this._importTrialCount=0,this._prompt(e,t),!0)},s.prototype._prompt=function(e,t){var n=this,a=gDesigner.getDefaultStorage();this._numLoaded=0;var r=new Promise(e=>{this._fontDB.getItem(i.FONT_LIST).done(t=>{this._tmpFontList=t||[],e(this._tmpFontList)})});a.openPrompt([{ext:"ttf",mime:"font/ttf"},{ext:"otf",mime:"font/otf"},{ext:"ttc",mime:"font/collection"},{ext:"dfont",mime:"font/collection"}],(function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;n._numFiles=i,r.then(()=>{t.read(t=>{var i=o.GOpenTypeUtil.getFont(null,null,null,t,!0);n._numFiles+=i.length-1;var a=function(t,n){return n<t.length?function(){this.checkAndAdd(t[n],a(t,n+1))}.bind(this):e}.bind(n),r=a(i,0);r&&r.call(n)})})}),!0,t)},s.prototype.busy=function(){return!this._fontDB||!this._fontDB.ready()||this._numFiles>0},s.prototype.getProgress=function(){return 0===this._numFiles?1:this._numLoaded/this._numFiles},s.prototype.ready=function(){return this._tmpFontList?Promise.resolve(void 0):new Promise(e=>{this._fontDB.getItem(i.FONT_LIST).done(t=>{this._tmpFontList=t||[],e()})})},s.prototype.checkAndAdd=function(e,t){var n=e.family,o=e.weight,i=e.style,a=e.buffer,r={style:i,weight:String(o),family:n,subfamily:e.subfamily,displayname:e.displayname};if(this._tmpFontList)for(var s=0;s<this._tmpFontList.length;s++){var l=this._tmpFontList[s];if(l.family===r.family&&l.weight===r.weight&&l.style===r.style){if(e.subfamily&&!l.subfamily)l.subfamily=e.subfamily;else if(l.subfamily&&l.subfamily!==r.subfamily){r.family=r.family+(r.subfamily||"");continue}return e.displayname&&!l.displayname&&(l.displayname=e.displayname),void this._postAddAction(t)}}else this._tmpFontList=[];this._tmpFontList.push(r),this._fontDB.updateItem(n+"_"+o+"_"+i,a).done(()=>{this._postAddAction(t,!0)})},s.prototype._postAddAction=function(e,t){this._numLoaded++,this._numLoaded===this._numFiles?(this._numLoaded=0,this._numFiles=0,this._fontDB.updateItem(i.FONT_LIST,this._tmpFontList).done(n=>{if(t?a.getInstance().reset(r,!0):a.getInstance().reset(),gDesigner.getWorkspace())for(var o=0;o<this._tmpFontList.length;o++){var i=this._tmpFontList[o];gDesigner.getWorkspace().getFontManager().getFont(i.family,i.style,parseInt(i.weight))}e&&e()})):e&&e()},e.exports=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GPersona=void 0;t.GPersona={GraphicDesign:{name:"Graphic Designer",icon:"assets/img/brand/logo.svg"}}},function(e,t,n){"use strict";var o=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t.shouldShowExternalFileError=function(e){return e instanceof s.Item&&!e.hasFileSettings()},t.updateSaveOptions=function(e,t,n){if(n.getFullName()){const o=(0,i.getExtensionFromString)(n.getFullName(),a.FILE_FORMATS.map(e=>e.ext.toUpperCase()));if(o&&"CDR"===o.toUpperCase())return e=new r.default(gDesigner.getSetting("default_cdr_unsupported_effects",r.default.Unsupported.KeepEditable),t.getDefaultCdrVersionForSave()),(e=t.updateSaveOptionsLastModifiedDate(e)).singleton=!t.isCloudFile(),e}return e};var i=n(34),a=n(9),r=o(n(1224));const s=n(372)},function(e,t,n){"use strict";function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.Unsupported.KeepEditable,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.unsupportedChoice=e,this.formatVersion=t,this.lastModifiedDate=n}o.Unsupported={KeepAppearance:0,KeepEditable:1,NotCDR:2,OmitIncompatible:3},o.prototype.unsupportedChoice=o.Unsupported.KeepEditable,o.prototype.formatVersion=0,o.prototype.lastModifiedDate=void 0,e.exports=o},function(e,t,n){"use strict";var o=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(1468));class a extends i.default{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._options=e}getOptions(){return this._options}}t.default=a},function(e,t,n){"use strict";var o=n(1);function i(e,t){this.oldPersona=e,this.newPersona=t}o.GObject.inherit(i,o.GEvent),i.prototype.oldPersona=null,i.prototype.newPersona=null,e.exports=i},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";n(17),n(26),n(7),n(3),n(28),n(22),n(117),n(106);const o=n(586);e.exports=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._settings=e}getFrame(){return this._iframe}open(e){const t=gDesigner.getUTM();if(t&&t.size){const n=new URL(e),o=n.searchParams;t.forEach((e,t)=>o.set(t,e)),e=n.toString()}if(this._iframe=$("<iframe></iframe>").addClass("cross-frame").attr("src",e).appendTo($("body")),this._settings){const{id:e,className:t,css:n}=this._settings;e&&this._iframe.attr("id",e),t&&this._iframe.addClass(t),n&&this._iframe.css(n)}let n=this.close.bind(this);return this._settings.close&&(n=this._settings.close),this._messageHandler=async e=>{if(e.originalEvent.source!==this._iframe[0].contentWindow)return;let t=e.originalEvent.data;const{cmd:i}=t;if(i){if(this._settings[i])return void this._settings[i](t);switch(i){case"close":n(t);break;case"settings":let e=await gDesigner.getUser();new o(e,"purchase").open();break;case"purchase_flow":const{options:i={}}=t,{immediatePurchase:a=!1,closeable:r=!0}=i;a&&Object.assign(i,{autoClose:!0,paymentCallback:()=>{n()}}),r||Object.assign(i,{paymentCallback:e=>{let{licenseHasBeenUpgraded:t=!1}=e;n({licenseHasBeenUpgraded:t,closeable:r})}});let s=t.options;gInAppPurchase.getOptions()&&(s=Object.assign({},gInAppPurchase.getOptions(),s)),gDesigner.openPaymentDialog(null,s).then((function(){let{reinstate:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a&&!e||n({closeable:r})})).catch(()=>{n({closeable:r})});break;case"link":gContainer.openExternalLink(null,t.link)}}},$(window).on("message",this._messageHandler),this}close(){let{licenseHasBeenUpgraded:e=!1,closeable:t=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._messageHandler&&(t||e)&&($(window).unbind("message",this._messageHandler),this._iframe.remove()),e&&gDesigner.requestLicenseUpdate()}on(e,t){this._iframe.on(e,t)}postMessage(){this._iframe[0].contentWindow.postMessage.apply(this._iframe[0].contentWindow,arguments)}}},function(e,t,n){"use strict";n(17),n(169),n(7),n(84),n(204),n(177),n(178),n(179),n(180);var o=n(1),i=n(776),a=n(34),r=n(9),s=n(222),l=n(151),c=n(427);const d=n(373);function u(){}window.pako=n(155),n(1489),n(1490),n(1491),zip.useWebWorkers=!1,u.generateExportables=function(e,t,n){var i=e instanceof Array?e:[e];e instanceof o.GScene&&(i=e.getChildren().filter(e=>e instanceof o.GPage&&e.isVisible()));var a=[],r={};function s(e){var t=e.getProperty("name");if(!t){var n=o.GObject.getTypeId(e);r.hasOwnProperty(n)||(r[n]=0),t=e.getNodeNameTranslated();var i=++r[n];i>1&&(t+="_"+i)}return t}function l(e){if(t)a.push(o.GUtil.extend({},t,{element:e,name:1===i.length&&t.name?t.name:s(e)}));else if(e.hasMixin(o.GNode.Properties)){var r=e.getProperty(c.EXPORT_PROPERTY_NAME,!0);if(r&&r instanceof Array&&r.length)for(var d=s(e),u=0;u<r.length;++u){var p=r[u];p.fm&&a.push(o.GUtil.extend({},{size:p.sz,suffix:p.sf,format:p.fm,element:e,name:d}))}}if(n&&e.hasMixin(o.GNode.Container))for(var g=e.getFirstChild();null!==g;g=g.getNext())g instanceof o.GElement&&l(g)}for(var d=0;d<i.length;++d){l(i[d])}return a},u._validateCommercialDocument=function(){const e=gDesigner.getActiveDocument();return!e||!e.isCommercialProductFile()||(e.openPaywall(),!1)},u.exportExportable=function(e,t,n,s){if(this._validateCommercialDocument()){var l=e.element,c=e.format;if("png"===c||"jpg"===c){var u=null,p=null;switch(c){case"png":u=o.GBitmap.ImageType.PNG;break;case"jpg":u=o.GBitmap.ImageType.JPEG,p=(e.jpegQuality||100)/100}var g=o.GLength.DPI,h=i.GBitmapExport.export(e.element,e.size,e.backgroundColor,e.configuration,g,e.backgroundOpacity,!0);h&&h.toImageBlob(u,t,p)}else if("svg"===c)i.GSVGExport.export(l,{convertTextToPath:e.convertTextToPath,decimalPlacesPrecision:a.watchDog.check(e.decimalPlacesPrecision,3),preserveEditingCapabilities:a.watchDog.check(e.preserveEditingCapabilities,!1),backgroundColor:e.backgroundColor,backgroundOpacity:e.backgroundOpacity,sceneBackground:!e.configuration||(e.configuration.sceneBackground||!!e.backgroundColor),layerNamesAsId:a.watchDog.check(e.layerNamesAsId,!1)},(function(e,n){!e&&n&&t(new Blob([n],{type:"image/svg+xml"}))}));else{if(c!==d.PDF.ext)throw new Error("Unknown format.");gDesigner.getUser().then((function(c){var u;u=c&&c.getFullUserName()?c.getFullUserName():o.GLocale.get(new o.GLocaleKey("GDocument","text.default-export-author"));var p={dpi:a.watchDog.check(o.GUtil.parseNumber(e.size),o.GUtil.parseNumber("72dpi")),colorSpace:e.colorSpace,jpegQuality:e.jpegQuality||r.JPEG_EXPORT_QUALITY_DEFAULT,configuration:e.configuration,backgroundColor:e.backgroundColor,backgroundOpacity:e.backgroundOpacity,convertTextToPath:e.convertTextToPath,progress:n,user:u,title:gDesigner.getWindows().getActiveWindow().getTitle(),downsampleImages:e.downsampleImages},g=i.GPDFExport.export(l,p,(function(e,n){!e&&n&&t(new Blob([n],{type:d.PDF.mime})),s&&(g.isAbort()?s.close&&s.close():e&&s.error&&s.error(e))}),null,s);s&&(s.abort=()=>g&&g.abort())}))}}},u.generateExportName=function(e,t,n){var i=o.GUtil.sanitizeFilename(t||e.name)+(e.suffix||"");if(n){var a=n.filter((function(t){return t.name===i&&t.format===e.format}));n.push({name:i,format:e.format}),a.length&&(i+="("+(a.length+1)+")")}return i+="."+e.format},u.exportToDirectory=async function(e,t,n,i){if(this._validateCommercialDocument())for(var a={},r=0,s=[],l=0;l<e.length;++l){var c=null,d=t;if(c=e[l].name){if(c.indexOf("/")>=0){var p=c.split("/"),g=[];for(let e=0;e<p.length;++e){var h=o.GUtil.sanitizeFilename(p[e].trim());h&&g.push(h)}if(g.length>1){c=g.pop();var f="";for(let e=0;e<g.length;++e){var m=g[e];f&&(f+="/");var y=a[f+=m.toLowerCase()];if(y)d=y;else try{d=await d.addDirectory(m),a[f]=d}catch(e){}}}else g.length&&(c=g[0])}else c=o.GUtil.sanitizeFilename(c.trim());c&&d&&u.exportExportable(e[l],function(t,o){return function(i){var a=new FileReader;if(a.onload=()=>{t.addFile(o).then(t=>{t.write(new Uint8Array(a.result),()=>{++r===e.length&&n&&n()})}).catch(()=>{++r===e.length&&n&&n()})},i instanceof Blob||i instanceof File)try{a.readAsArrayBuffer(i)}catch(t){++r===e.length&&n&&n()}else++r===e.length&&n&&n()}}(d,u.generateExportName(e[l],c,s)),i)}}},u.export=function(e,t,n,i,a,r,c,p,g,h){if(this._validateCommercialDocument()){var f=(e,t,n)=>{var o=new FileReader;o.onload=()=>{t.write(new Uint8Array(o.result),()=>n?n():void 0,g)},o.readAsArrayBuffer(e)},m=(e,n,o,i,r,l)=>{t instanceof s.Item?f(e,t,o):t instanceof s&&(!r&&t.canPromptSave()?t.savePrompt(n,[i],t=>{f(e,t,o)},a,l):t.canDownload()&&t.download(n,t=>{f(e,t,o)},l))},y=e[0],v=e.length>1,_=l.FileTypes.find(e=>e.ext===y.format);if(v&&(y.format!==d.PDF.ext||r||(v=!1,(y=o.GUtil.extend({},y)).name=n,y.element=e.map(e=>e.element))),v)if(t instanceof s&&t.canChooseDirectory())t.chooseDirectory(t=>{u.exportToDirectory(e,t,i,c)},a,()=>{var t=new u.ZipDirectory;u.exportToDirectory(e,t,()=>{t.exportBlob(e=>{m(e,n+".zip",i,_,!0,h)})},c)});else{var b=new u.ZipDirectory;u.exportToDirectory(e,b,()=>{b.exportBlob(e=>{m(e,n+".zip",i,{ext:"zip",mime:"application/zip"},!1,h)})},c)}else u.exportExportable(y,(function(e){const n=t instanceof s&&t.canDownload()&&_&&_.ext===d.PDF.ext;m(e,u.generateExportName(y),i,_,n,h)}),c,p)}},u.ZipDirectory=function(e,t){s.Directory.call(this,e),this._zipRoot=t?null:new zip.fs.FS,this._zipDirectory=t||this._zipRoot.root},o.GObject.inherit(u.ZipDirectory,s.Directory),u.ZipDirectory.prototype.addDirectory=async function(e){return new u.ZipDirectory(this._storage,this._zipDirectory.addDirectory(e))},u.ZipDirectory.prototype.addFile=async function(e){return{_zipDirectory:this._zipDirectory,_name:e,write:function(e,t){if(this._zipDirectory.addBlob(this._name,new Blob([e])),t)return t()}}},u.ZipDirectory.prototype.exportBlob=function(e){this._zipDirectory.exportBlob(e)},e.exports=u},function(e,t,n){"use strict";n(17),n(3),n(22),n(117),n(106);var o=n(1);const i=n(16),a=n(27),r=n(37),s=n(151),l=n(77),c=n(1231);function d(){}o.GObject.inherit(d,a),d.ID="file.share.opensharedfile",d.TITLE=new o.GLocaleKey("GOpenSharedFileAction","title"),d.prototype.getId=function(){return d.ID},d.prototype.getTitle=function(){return d.TITLE},d.prototype.getCategory=function(){return i.CATEGORY_FILE_SHARE},d.prototype.getGroup=function(){return"file-share/opensharedfile"},d.prototype.isVisible=function(){return!0},d.prototype.execute=function(){r.prompt(o.GLocale.get(new o.GLocaleKey("GOpenSharedFileAction","text.prompt-text")),e=>{if(void 0!==e)try{var t=new URL(e).searchParams.get(l.OpenFileRequest.Type.Token);if(t){let e=new l.OpenFileRequest(l.OpenFileRequest.Type.Token,t);gApi.setToken({token:t});let n=new s;n.setTitle(e.getContent()),gDesigner.addDocument(n),c.handleOpenFileRequest(n,e)}else r.alert(o.GLocale.get(new o.GLocaleKey("GOpenSharedFileAction","invalid-link")))}catch(e){console.error(e),r.alert(o.GLocale.get(new o.GLocaleKey("GOpenSharedFileAction","invalid-link")))}},null,o.GLocale.get(new o.GLocaleKey("GOpenSharedFileAction","text.cancel")),o.GLocale.get(new o.GLocaleKey("GOpenSharedFileAction","text.open")),"open-shared-file-dialog")},d.prototype.toString=function(){return"[Object GOpenSharedFileAction]"},e.exports=d},function(e,t,n){"use strict";var o=n(14);n(18),n(29);var i=o(n(71)),a=o(n(78)),r=o(n(434)),s=o(n(77)),l=o(n(222)),c=n(1);e.exports=class{static handleOpenFileRequest(e,t){gContainer.openStorageFile(e,t,(function(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const d=t.getType();function u(t){const n=t=>{if(t.type===i.default.Type.Activated&&t.document===e){let e=t.document.getStatus();e===a.default.LoadFailed||e===a.default.LoadCancelled||gDesigner.executeAction(r.default.ID,void 0,void 0,!0),gDesigner.removeEventListener(i.default,n)}};if(d!==s.default.OpenFileRequest.Type.Preset&&gDesigner.addEventListener(i.default,n),t instanceof l.default.Item){if(e.setStorageItem(t),e.setIsShared(!0),e.load(null,o&&o.loadingData),gDesigner.trigger(new i.default(i.default.Type.Modified,e)),d===s.default.OpenFileRequest.Type.Template){e.setDocumentFromTemplate(!0);let t=o.category,n=t&&t.split(".");n.length>1&&(t=n.splice(1).join("."));let i=t.toLowerCase().replace(/\./g,"-");gDesigner.stats("directlink_template_".concat(i),"".concat(o.file.name," [").concat(o.content.id,"]"))}else if(d===s.default.OpenFileRequest.Type.Preset){e.setDocumentFromTemplate(!0);let t=o.preset.presetCategory.toLowerCase().replace(/[\t-\r \/\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/g,"-");gDesigner.stats("directlink_preset_".concat(t),o.preset.presetLayout.name)}}else if(t&&t.presetLayout){let n=gDesigner.createScene(),{unit:o,dpi:i,width:a,height:r}=t.presetLayout,s=t.presetCategory.toLowerCase().replace(/[\t-\r \/\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/g,"-");n.setProperties(["ut","dpi"],[o,i||c.GLength.DPI]),n.getActivePage().setProperties(["bck","w","h"],[c.GRGBColor.WHITE,new c.GLength(a,o).toPoint(),new c.GLength(r,o).toPoint()]),e.setTitle(t.presetLayout.id),e.setScene(n),e.setDocumentFromTemplate(!0),e.setIsShared(!0),gDesigner.stats("directlink_preset_".concat(s),t.presetLayout.name)}}return u(n),e}))}}},function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=o(n(27)),r=o(n(16)),s=o(n(111)),l=o(n(1136)),c=o(n(205)),d=o(n(239)),u=n(61);function p(){this._title=new i.GLocaleKey("GVersionsHistoryAction","title"),p.TOOLTIP_CONFIG={[u.TOOLTIP_AREA.MAIN_MENU.TRY_PRO_COMMON]:u.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GVersionsHistoryAction","text.try-this-feature-pro-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GVersionsHistoryAction","text.try-this-feature-pro-tooltip-description")),learnMore:"https://documentation.corelvector.com/basics/working-with-files/working-with-gravit-cloud/#version-history",upgradeToProStatsValue:"gravit-versions-history",middle:!1,side:!0})}}i.GObject.inherit(p,a.default),p.ID="gravit-versions-history",p.GroupID="file",p.TOOLTIP_CONFIG=null,p.prototype._title=null,p.prototype.getId=function(){return p.ID},p.prototype.getTitle=function(){return this._title},p.prototype.isPro=function(){return!0},p.prototype.getTooltipArea=function(){return u.TOOLTIP_AREA.MAIN_MENU.TRY_PRO_COMMON},p.prototype.getTooltipConfig=function(e){return e&&p.TOOLTIP_CONFIG[e]||null},p.prototype.getIcon=function(){return"gravit-icon-versions"},p.prototype.getCategory=function(){return r.default.CATEGORY_FILE},p.prototype.getGroup=function(){return p.GroupID},p.prototype.isEnabled=function(){if(!gDesigner.getApplicationManager().isShareEnabled())return!1;var e=gDesigner.getActiveDocument()&&gDesigner.getActiveDocument().getStorageItem()||null,t=!!gDesigner.getActiveDocument()&&gDesigner.getActiveDocument().getScene().isCloudSynchronization();return s.default.isOnline()&&e&&t},p.prototype.execute=function(){if(gDesigner.getWindows().getActiveWindow().getDocument().isModified())return new c.default(i.GLocale.get(new i.GLocaleKey("GVersionsHistoryAction","unsaved-modifications"))).open(),!1;const e=()=>{gDesigner&&gDesigner.hasEventListeners(l.default)&&(gDesigner.trigger(new l.default(l.default.Type.Enable,gDesigner.getActiveDocument().getScene().getProperty("cid"))),gDesigner.intercomStats("Entered version history"))};gDesigner.isOffline()?d.default.openUnavailableFeature(e):e()},p.prototype.toString=function(){return"[Object GVersionsHistoryAction]"},e.exports=p},function(e,t,n){var o,i,a;i=[n(160),n(587)],void 0===(a="function"==typeof(o=function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})?o.apply(t,i):o)||(e.exports=a)},function(e,t,n){var o,i,a;i=[n(160),n(587)],void 0===(a="function"==typeof(o=function(e){var t,n=0,o=Array.prototype.slice;return e.cleanData=(t=e.cleanData,function(n){var o,i,a;for(a=0;null!=(i=n[a]);a++)try{(o=e._data(i,"events"))&&o.remove&&e(i).triggerHandler("remove")}catch(e){}t(n)}),e.widget=function(t,n,o){var i,a,r,s={},l=t.split(".")[0],c=l+"-"+(t=t.split(".")[1]);return o||(o=n,n=e.Widget),e.isArray(o)&&(o=e.extend.apply(null,[{}].concat(o))),e.expr[":"][c.toLowerCase()]=function(t){return!!e.data(t,c)},e[l]=e[l]||{},i=e[l][t],a=e[l][t]=function(e,t){if(!this._createWidget)return new a(e,t);arguments.length&&this._createWidget(e,t)},e.extend(a,i,{version:o.version,_proto:e.extend({},o),_childConstructors:[]}),(r=new n).options=e.widget.extend({},r.options),e.each(o,(function(t,o){e.isFunction(o)?s[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function i(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,a=this._superApply;return this._super=e,this._superApply=i,t=o.apply(this,arguments),this._super=n,this._superApply=a,t}}():s[t]=o})),a.prototype=e.widget.extend(r,{widgetEventPrefix:i&&r.widgetEventPrefix||t},s,{constructor:a,namespace:l,widgetName:t,widgetFullName:c}),i?(e.each(i._childConstructors,(function(t,n){var o=n.prototype;e.widget(o.namespace+"."+o.widgetName,a,n._proto)})),delete i._childConstructors):n._childConstructors.push(a),e.widget.bridge(t,a),a},e.widget.extend=function(t){for(var n,i,a=o.call(arguments,1),r=0,s=a.length;r<s;r++)for(n in a[r])i=a[r][n],a[r].hasOwnProperty(n)&&void 0!==i&&(e.isPlainObject(i)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],i):e.widget.extend({},i):t[n]=i);return t},e.widget.bridge=function(t,n){var i=n.prototype.widgetFullName||t;e.fn[t]=function(a){var r="string"==typeof a,s=o.call(arguments,1),l=this;return r?this.length||"instance"!==a?this.each((function(){var n,o=e.data(this,i);return"instance"===a?(l=o,!1):o?e.isFunction(o[a])&&"_"!==a.charAt(0)?(n=o[a].apply(o,s))!==o&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+a+"'")})):l=void 0:(s.length&&(a=e.widget.extend.apply(null,[a].concat(s))),this.each((function(){var t=e.data(this,i);t?(t.option(a||{}),t._init&&t._init()):e.data(this,i,new n(a,this))}))),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,o){o=e(o||this.defaultElement||this)[0],this.element=e(o),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},o!==this&&(e.data(o,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===o&&this.destroy()}}),this.document=e(o.style?o.ownerDocument:o.document||o),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,(function(e,n){t._removeClass(n,e)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var o,i,a,r=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(r={},o=t.split("."),t=o.shift(),o.length){for(i=r[t]=e.widget.extend({},this.options[t]),a=0;a<o.length-1;a++)i[o[a]]=i[o[a]]||{},i=i[o[a]];if(t=o.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];r[t]=n}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,o,i;for(n in t)i=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&i&&i.length&&(o=e(i.get()),this._removeClass(i,n),o.addClass(this._classes({element:o,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var n=[],o=this;function i(i,a){var r,s;for(s=0;s<i.length;s++)r=o.classesElementLookup[i[s]]||e(),r=t.add?e(e.unique(r.get().concat(t.element.get()))):e(r.not(t.element).get()),o.classesElementLookup[i[s]]=r,n.push(i[s]),a&&t.classes[i[s]]&&n.push(t.classes[i[s]])}return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&i(t.keys.match(/\S+/g)||[],!0),t.extra&&i(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,(function(o,i){-1!==e.inArray(t.target,i)&&(n.classesElementLookup[o]=e(i.not(t.target).get()))}))},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,o){o="boolean"==typeof o?o:n;var i="string"==typeof e||null===e,a={extra:i?t:n,keys:i?e:t,element:i?this.element:e,add:o};return a.element.toggleClass(this._classes(a),o),this},_on:function(t,n,o){var i,a=this;"boolean"!=typeof t&&(o=n,n=t,t=!1),o?(n=i=e(n),this.bindings=this.bindings.add(n)):(o=n,n=this.element,i=this.widget()),e.each(o,(function(o,r){function s(){if(t||!0!==a.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof r?a[r]:r).apply(a,arguments)}"string"!=typeof r&&(s.guid=r.guid=r.guid||s.guid||e.guid++);var l=o.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+a.eventNamespace,d=l[2];d?i.on(c,d,s):n.on(c,s)}))},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var n=this;return setTimeout((function(){return("string"==typeof e?n[e]:e).apply(n,arguments)}),t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,o){var i,a,r=this.options[t];if(o=o||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],a=n.originalEvent)for(i in a)i in n||(n[i]=a[i]);return this.element.trigger(n,o),!(e.isFunction(r)&&!1===r.apply(this.element[0],[n].concat(o))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,n){e.Widget.prototype["_"+t]=function(o,i,a){var r;"string"==typeof i&&(i={effect:i});var s=i?!0===i||"number"==typeof i?n:i.effect||n:t;"number"==typeof(i=i||{})&&(i={duration:i}),r=!e.isEmptyObject(i),i.complete=a,i.delay&&o.delay(i.delay),r&&e.effects&&e.effects.effect[s]?o[t](i):s!==t&&o[s]?o[s](i.duration,i.easing,a):o.queue((function(n){e(this)[t](),a&&a.call(o[0]),n()}))}})),e.widget})?o.apply(t,i):o)||(e.exports=a)},function(e,t,n){var o,i,a;i=[n(160),n(587)],void 0===(a="function"==typeof(o=function(e){return e.fn.scrollParent=function(t){var n=this.css("position"),o="absolute"===n,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter((function(){var t=e(this);return(!o||"static"!==t.css("position"))&&i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))})).eq(0);return"fixed"!==n&&a.length?a:e(this[0].ownerDocument||document)}})?o.apply(t,i):o)||(e.exports=a)},function(e,t,n){"use strict";var o=n(14);n(578),n(26),n(51),n(7),n(3),n(28);var i=n(45),a=n(1),r=n(13),s=o(n(326)),l=n(61),c=o(n(427)),d=n(71),u=n(203),p=n(78),g=n(585),h=n(434),f=n(549),m=n(785),y=n(379),v=n(1498),_=n(37),b=n(435);const w=n(787),C=n(125);function x(){m.call(this)}a.GObject.inherit(x,m),x.ID="outline",x.TITLE=new a.GLocaleKey("GOutlineSidebar","title"),x.MULTIPAGE_MODE_ENABLED_OPTION_NAME="OutlineSidebar/Multipage_Mode",x.prototype._document=null,x.prototype._pageToolbar=null,x.prototype._layerToolbar=null,x.prototype._exportToolbar=null,x.prototype._outlineSidebarElement=null,x.prototype._pageContainerMaxHeight=500,x.prototype._pageContainerMinHeight=50,x.prototype._pagePanel=null,x.prototype._pageModeSwitch=null,x.prototype._layerPanel=null,x.prototype._exportPanel=null,x.prototype._exportInstance=null,x.prototype._pageMenuOptionButton=null,x.prototype._transformMode=!1,x.prototype._htmlElement=null,x.prototype.getId=function(){return x.ID},x.prototype.getTitle=function(){return x.TITLE},x.prototype.isEnabled=function(){return null!==this._document},x.prototype.isVisible=function(){return!!gDesigner.getApplicationManager().isInspectEnabled()},x.prototype.getOrientation=function(){return y.Orientation.Left},x.prototype.getMinimumWidth=function(){return 250},x.prototype.getDefaultWidth=function(){return 250},x.prototype.isResizeable=function(){return!0},x.prototype.getLayerPanel=function(){return this._layerPanel},x.prototype.relayout=function(){this._pagePanel.gPagePanel("relayout"),this._layerPanel.gLayerPanel("relayout"),this._pageContainerMaxHeight=parseInt(this._outlineSidebarElement.css("height"),10)-150},x.prototype._copyDataTransfer=function(e,t){var n=t.originalEvent;e.hasOwnProperty("dataTransfer")?n&&n.dataTransfer&&n.dataTransfer.types&&n.dataTransfer.types.forEach((function(t){e.dataTransfer.setData(n.dataTransfer.getData(t))})):e.dataTransfer=n.dataTransfer},x.prototype.getTouchTools=function(){return[new s.default({def:!0,id:"pages",sidebar:this.getId(),icon:"gravit-icon-touch-pages-panel",panel:".pages-container",toolbar:".page-toolbar",panelWidth:"320px"}),new s.default({id:"layers",sidebar:this.getId(),icon:"gravit-icon-touch-layers-panel",panel:[".layers-container",".export-panel"],toolbar:".layer-toolbar",panelWidth:"350px"})]},x.prototype.init=function(e){this._htmlElement=e,m.prototype.init.call(this,e),this._pageToolbar=$("<div></div>").addClass("toolbar page-toolbar").append($("<label></label>").text(a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","text.pages")))).on("dragover",(function(e){e.preventDefault(),e.stopPropagation()})).on("dragenter",(function(e){e.preventDefault(),e.stopPropagation()})).on("drop",function(e){e.preventDefault(),e.stopPropagation();var t=this._pagePanel.gPagePanel("getLastVisitedDroppable");if(t){var n=document.createEvent("mouseEvent");n.initEvent("drop",!0,!0,null),this._copyDataTransfer(n,e),t.dispatchEvent(n)}}.bind(this)).appendTo(e),this._pageModeSwitch=$("<label></label>").addClass("g-switch").attr("data-title",a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","action.toggle-page-mode"))).css("margin-right","5px").append($("<input>").attr("id","toogle-page-mode-checkbox").attr("type","checkbox").attr("data-property","multipage-switch").on("change",this._multiPageModeChangeEventHandler.bind(this))).append($("<div></div>")).appendTo(this._pageToolbar).gRichTooltip(l.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","text.multipage-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","text.multipage-tooltip-description")),learnMore:"https://documentation.corelvector.com/organizing-your-designs/pages/#page-panel"})),this._pageMenuOptionButton=$("<button></button>").addClass("setting-menu-options").on("click",function(e){Object.assign(e,{data:{context:b.PagePanel}}),$(gDesigner.getWindows().getHtmlElement()).trigger("contextmenu",e)}.bind(this)).append($("<span/>").addClass("gravit-icon-settings")).appendTo(this._pageToolbar),$("<button></button>").attr("data-title",a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","action.delete-active-page"))).on("click",()=>this._deletePage()).append($("<span></span>").addClass("gravit-icon-trash")).appendTo(this._pageToolbar).gRichTooltip(l.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","text.delete-page-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","text.delete-page-tooltip-description")),learnMore:"https://documentation.corelvector.com/organizing-your-designs/pages/#page-panel"})),$("<button></button>").attr("data-title",a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","action.create-new-page"))).on("click",function(){this._insertPage(),$(this._pageToolbar).gAccordion("toggleOpen",!0),$(this._pageToolbar).gAccordion("init",$(this._pagePanel))}.bind(this)).append($("<span></span>").addClass("gravit-icon-addpage")).appendTo(this._pageToolbar).gRichTooltip(l.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","text.create-new-page-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","text.create-new-page-tooltip-description")),learnMore:"https://documentation.corelvector.com/organizing-your-designs/pages/#page-panel"}));var t,n,o=$("<div></div>").addClass("pages-container").appendTo(e);this._pagePanel=$("<div></div>").addClass("pages").gToolbarShadow("init",".page-toolbar").on("dragover",(function(e){e.preventDefault(),e.stopPropagation()})).on("dragenter",(function(e){e.preventDefault(),e.stopPropagation()})).on("drop",function(e){e.preventDefault(),e.stopPropagation();var t=this._pagePanel.gPagePanel("getLastVisitedDroppable");if(t){var n=document.createEvent("mouseEvent");n.initEvent("drop",!0,!0,null),this._copyDataTransfer(n,e),t.dispatchEvent(n)}}.bind(this)).on("mouseenter",function(){this._pagePanel.gPagePanel("setBlockHighlight",!0)}.bind(this)).on("mouseleave",function(){this._pagePanel.gPagePanel("setBlockHighlight",!1)}.bind(this)).appendTo(o),this._pagePanel.gPagePanel({moveCallback:this._movePageTreeNodeCallback.bind(this),clickCallback:this._clickPageTreeNodeCallback.bind(this),startDraggingCallback:this._startPageDraggingCallback.bind(this)});var r=!1,s=$("<div/>").attr("id","page-layer-divider"),c=function(e){var i;r&&((i=n-t+e.clientY)<this._pageContainerMinHeight&&(i=this._pageContainerMinHeight),i>this._pageContainerMaxHeight&&(i=this._pageContainerMaxHeight),o.css("height",i+"px"))}.bind(this),u=function o(){$(document).off("mousemove",c),$(document).off("mouseup",o),r=!1,t=null,n=null,e.removeClass("page-container-resizing")},p=function(i){t=i.clientY,r=!0,n=parseInt(o.css("height"),10),e.addClass("page-container-resizing"),$(document).on("mousemove",c),$(document).on("mouseup",u)}.bind(this);$(s).on("mousedown",p),s.appendTo(e),$("<hr />").appendTo(s),s.append($("<div />")),this._addLayerPanel(e),$("<hr/>").appendTo(e),this._exportToolbar=$("<div></div>").addClass("toolbar toolbar-export").appendTo(e),this._exportPanel=$("<div></div>").addClass("properties-panel").addClass("export-panel").appendTo(e),this._exportInstance=new v,this._exportInstance.init(this._exportPanel,this._exportToolbar),gDesigner.addEventListener(d,this._documentEvent,this),gDesigner.getToolManager().addEventListener(i.GToolManager.ToolChangedEvent,this._toolChangedEvent,this),gDesigner.addEventListener(w,this._applicationStatusEvent,this),gDesigner.addEventListener(C,this._settingChanged,this),this._pageToolbar.gAccordion("init",".pages-container","label"),this._exportToolbar.gAccordion("init",".properties-panel","label"),this._outlineSidebarElement=e},x.prototype.toggleMultiPageMode=function(){const e=this._getMultiPageSwitcher();if(e){const t=e.is(":checked");e.prop("checked",!t),e.trigger("change")}},x.prototype._changePageMode=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._document.getScene().setProperty(c.default.MULTIPAGE_VIEW_ENABLED,e),gContainer.setProperty(x.MULTIPAGE_MODE_ENABLED_OPTION_NAME,e),t&&this._pageModeSwitch.find("input[data-property=multipage-switch]").prop("checked",e)},x.prototype._getMultiPageSwitcher=function(){return this._pageModeSwitch?this._pageModeSwitch.find('input[data-property="multipage-switch"]'):null},x.prototype._multiPageModeChangeEventHandler=function(e){gDesigner.stats("pages_change_multipage-mode");const t=$(e.target);this._refreshPageModeSwitch(t,{showAlert:!0});const n=t.is(":checked");this._changePageMode(n,!1);const o=a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","action.toggle-page-mode"));this._document.getEditor().pushState(o,()=>{this._changePageMode(n)},()=>{this._changePageMode(!n)},{actions:[{isPropertyChangeAction:!0,node:{hasMixin:()=>!1}}]})},x.prototype._settingChanged=function(e){"touch"===e.key&&this._touchInterfaceUpdate()},x.prototype._applicationStatusEvent=function(e){e.status===w.Status.Ready&&this._touchInterfaceUpdate()},x.prototype._touchInterfaceUpdate=function(){gDesigner.isTouchEnabled()?(this._pageModeSwitch.toggleClass("toogle-page-mode",!0),this._pageModeSwitch.toggleClass("g-switch",!1),this._pageModeSwitch.find("#toogle-page-mode-checkbox").gCheckboxSlider(),this._pageMenuOptionButton.show(),this._pagePanel.gPagePanel("resetVTreeRowHeight","48"),this._layerPanel.gLayerPanel("resetVTreeRowHeight","48")):(this._pageModeSwitch.toggleClass("toogle-page-mode",!1),this._pageModeSwitch.toggleClass("g-switch",!0),this._pageModeSwitch.find("#toogle-page-mode-checkbox").gCheckboxSlider("unmount"),this._pageMenuOptionButton.hide(),this._pagePanel.gPagePanel("resetVTreeRowHeight","34"),this._layerPanel.gLayerPanel("resetVTreeRowHeight","34"))},x.prototype._addLayerPanel=function(e){this._layerToolbar||(this._layerToolbar=$("<div></div>").addClass("toolbar").addClass("layer-toolbar").append($("<label></label>").css("flex-grow","1").text(a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","text.layers")))).on("dragover",(function(e){e.preventDefault(),e.stopPropagation()})).on("dragenter",(function(e){e.preventDefault(),e.stopPropagation()})).on("drop",function(e){e.preventDefault(),e.stopPropagation();var t=this._layerPanel.gLayerPanel("getLastVisitedDroppable");if(t){var n=new CustomEvent("drop",{bubbles:!0,cancelable:!0});this._copyDataTransfer(n,e),n.altKey=e.originalEvent.altKey,n.layerY=0,t.dispatchEvent(n)}}.bind(this)),$("<button></button>").attr("data-title",a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","action.delete-layer-item"))).on("click",()=>this._deleteLayerOrItem()).append($("<span></span>").addClass("gravit-icon-trash")).appendTo(this._layerToolbar).gRichTooltip(l.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","text.delete-layer-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","text.delete-layer-tooltip-description")),learnMore:"https://documentation.corelvector.com/organizing-your-designs/objects/#deleting-objects"})),$("<button></button>").attr("data-title",a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","action.new-layer"))).on("click",()=>this.insertLayer()).append($("<span></span>").addClass("gravit-icon-addlayer")).appendTo(this._layerToolbar).gRichTooltip(l.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","text.new-layer-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","text.new-layer-tooltip-description")),learnMore:"https://documentation.corelvector.com/organizing-your-designs/layer-groups/#adding-a-layer-group"}))),this._layerToolbar.appendTo(e);var t=$("<div></div>").addClass("layers-container").appendTo(e);this._layerPanel||(this._layerPanel=$("<div></div>").gToolbarShadow("init",".layer-toolbar").addClass("layers").on("mouseenter",function(e){var t=this._document.getScene();t&&t.acceptChildren((function(e){return e.hasFlag(a.GNode.Flag.Highlighted)&&e.removeFlag(a.GNode.Flag.Highlighted),!0})),this._layerPanel.gLayerPanel("setBlockHighlight",!0)}.bind(this)).on("mouseleave",function(e){this._layerPanel.gLayerPanel("setBlockHighlight",!1)}.bind(this)).on("click",function(){gDesigner.stats("layers_deselect_all-layers"),this._document.getEditor().clearSelection();var e=this._document.getScene();e&&e.setActiveLayer(null),r.GPlatform.modifiers.optionKey&&gDesigner.executeAction(h.ID,void 0,"outlinesidebar")}.bind(this)).on("dragover",(function(e){e.preventDefault(),e.stopPropagation()})).on("dragenter",(function(e){e.preventDefault(),e.stopPropagation()})).on("drop",function(e){e.preventDefault(),e.stopPropagation();var t=this._layerPanel.gLayerPanel("getLastVisitedDroppable");if(t){var n=document.createEvent("mouseEvent");n.initEvent("drop",!0,!0,null),this._copyDataTransfer(n,e),t.dispatchEvent(n)}}.bind(this)).appendTo(t),this._layerPanel.gLayerPanel({moveCallback:this._moveLayerTreeNodeCallback.bind(this),isDuplicateEffectCallback:this._isDuplicateEffectCallback.bind(this),duplicateCallback:this._duplicateLayerTreeNodeCallback.bind(this),clickCallback:this._clickLayerTreeNodeCallback.bind(this),startDraggingCallback:this._startLayerDraggingCallback.bind(this),patternChooserStatusChangeCallBack:this._patternChooserStatusChange.bind(this)}))},x.prototype._documentEvent=function(e){var t,n;e.type===d.Type.Activated?(this._document=e.document,t=this._document.getScene(),this._pagePanel.gPagePanel("scene",t),this._layerPanel.gLayerPanel("scene",t),this.trigger(m.UPDATE_EVENT),this._document.getStatus()===p.Ready||this._document.getStatus()===p.Loaded?this._document.getActiveWindow()?this._updateMultiPageMode():gDesigner.getWindows().addEventListener(g.WindowEvent,this._windowsEvent,this):this._document.addEventListener(u,this._documentStatusEvent,this),n=this._document.getEditor(),gDesigner.getToolManager().addEventListener(i.GToolManager.ToolChangedEvent,this._updateExport,this),n.addEventListener(i.GEditor.SelectionChangedEvent,this._updateExport,this),t.addEventListener(a.GNode.AfterFlagChangeEvent,this._afterFlagChangeEvent,this),t.addEventListener(a.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChanged,this),t.addEventListener(a.GNode.AfterInsertEvent,this._afterInsert,this),this._updateExport()):e.type===d.Type.Deactivated&&(this._pagePanel.gPagePanel("scene",null),this._layerPanel.gLayerPanel("scene",null),t=this._document.getScene(),n=this._document.getEditor(),gDesigner.getToolManager().removeEventListener(i.GToolManager.ToolChangedEvent,this._updateExport,this),gDesigner.getWindows().removeEventListener(g.WindowEvent,this._windowsEvent,this),n.removeEventListener(i.GEditor.SelectionChangedEvent,this._updateExport,this),t.removeEventListener(a.GNode.AfterFlagChangeEvent,this._afterFlagChangeEvent,this),t.removeEventListener(a.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChanged,this),t.removeEventListener(a.GNode.AfterInsertEvent,this._afterInsert,this),this._document.removeEventListener(u,this._documentStatusEvent,this),this._document=null,this._elements=null,this._updateExport(),this.trigger(m.UPDATE_EVENT))},x.prototype._documentStatusEvent=function(e){e.status!==p.Ready&&e.status!==p.Loaded||(this._updateMultiPageMode(),this._document.removeEventListener(u,this._documentStatusEvent,this))},x.prototype._windowsEvent=function(e){e.type===g.WindowEvent.Type.Activated&&(this._updateMultiPageMode(),gDesigner.getWindows().removeEventListener(g.WindowEvent,this._windowsEvent,this))},x.prototype._isMultiPageModeEnabled=function(){const e=this._document.getScene().getProperty(c.default.MULTIPAGE_VIEW_ENABLED);return"boolean"==typeof e?e:gContainer.getProperty(x.MULTIPAGE_MODE_ENABLED_OPTION_NAME)},x.prototype._updateMultiPageMode=async function(){const e=this._getMultiPageSwitcher(),t=await this._isMultiPageModeEnabled();e.prop("checked",t),this._refreshPageModeSwitch(e,{skipInvalidation:!0})},x.prototype._toolChangedEvent=function(e){var t=e.previousTool,n=e.newTool;t&&t instanceof i.GSelectTool&&(e.light||this._updateTransformMode(!1),t.removeEventListener(i.GSelectTool.Event,this._selectToolEvent,this)),this._activeTool(n)},x.prototype._activeTool=function(e){e&&e instanceof i.GSelectTool&&e.addEventListener(i.GSelectTool.Event,this._selectToolEvent,this)},x.prototype._selectToolEvent=function(e){e.type===i.GSelectTool.Event.Type.EditModeChanged&&this._updateTransformMode(e.args.mode===i.GSelectTool.EditMode.Transform)},x.prototype._insertPage=function(){if(gDesigner.getApplicationManager().isEditingEnabled()){gDesigner.stats("pages_insert_page");var e=this._document.getScene();i.GEditor.tryRunTransaction(e,(function(){var t=e.insertPage();e.setActivePage(t)}),a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","action.insert-page"))),this._navigateDrawingCenter(e.getActivePage()),this._refreshSelection()}},x.prototype.sceneHasInfiniteCanvas=function(){var e=!1;return this._document.getScene().iteratePages(t=>(t.isFixedSized()||(e=!0),!e),!0),e},x.prototype._refreshPageModeSwitch=function(e){let{showAlert:t=!1,skipInvalidation:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=!this.sceneHasInfiniteCanvas();if(!this.isEnabled())return e.attr("data-title",""),void e.prop("disabled",!0);e.prop("disabled",!1);var i=this._document.getActiveWindow(),r=i.getView();(o||(e.is(":checked")&&e.prop("checked",!1),t&&_.alert(a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","text.multipage-alert"))),r.getViewConfiguration().multiPageView||r.getViewConfiguration().pageLabelsVisible))&&(r.getViewConfiguration().multiPageView=e.is(":checked"),r.getViewConfiguration().pageLabelsVisible=e.is(":checked"),n||(r.invalidate(null,!0),t&&(i.centerAndZoom(),this._refreshSelection())))},x.prototype._deletePage=function(){gDesigner.stats("pages_delete_page");this._document.getEditor();var e=this._document.getScene(),t=e.getActivePage();t.getProperty("plkt")&a.GBlock.ProgramLck.NoDelete||(t.getSlavePages().length>0?_.confirm(a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","text.confirm-delete-masterpage")),(function(t){t&&i.GEditor.tryRunTransaction(e,(function(){e.deleteActivePage()}),a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","action.delete-page")))}),null,null,!0,!0):i.GEditor.tryRunTransaction(e,(function(){e.deleteActivePage()}),a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","action.delete-page"))),this._navigateDrawingCenter(e.getActivePage()),this._refreshSelection())},x.prototype._refreshSelection=function(){var e=this._document.getEditor(),t=this._document.getScene(),n=this._document.getActiveWindow().getView().getViewConfiguration().multiPageView,o=t.getActivePage(),a=null;if(e.hasSelection()){var r=e.getSelection();n?e.updateSelection(!1,[o]):(a=r.filter((function(e){return i.GEditor.getElementPage(e)===o}))).length!==r.length&&e.updateSelection(!1,a)}else n&&e.updateSelection(!1,[o])},x.prototype._movePageTreeNodeCallback=function(e,t,n){if(n&&e&&n.length){this._pagePanel.gPagePanel("blockHandlers",!0);var o=this._document.getScene();i.GEditor.tryRunTransaction(this._document.getScene(),function(){this._document.getEditor().clearSelection(),o.startBlockReferenceChanges(),n.length>1&&e.beginUpdate();for(var i=n.length;i>0;--i){var a=n[i-1];a.getParent().removeChild(a),e.insertChild(a,t)}n.length>1&&e.endUpdate(),o.endBlockReferenceChanges(),o.isEvenOddMaster()&&o.reassignMasterPages()}.bind(this),a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","action.move-page"))),this._pagePanel.gPagePanel("blockHandlers",!1)}},x.prototype._startPageDraggingCallback=function(e){gDesigner.stats("pages_start_drag");var t=null;if(e){t=[];var n=this._document.getEditor();if(e.hasFlag(a.GNode.Flag.Selected)){var o=n.getSelection();t=this._filterPageDraggable(o);t=a.GNode.order(t,!0)}else n.clearSelection(),t.push(e)}return t},x.prototype._filterPageDraggable=function(e){var t=[];if(e)for(var n=0;n<e.length;++n){var o=e[n];o instanceof a.GPage&&!o.hasFlag(a.GElement.Flag.PartialLocked)&&t.push(o)}return t},x.prototype.changeActivePage=function(e){gDesigner.stats("pages_select_page");const t=this._document,n=t&&t.getScene();n&&e&&i.GEditor.tryRunTransaction(n,()=>{n.setActivePage(e),this._navigateDrawingCenter(e),this._refreshSelection()},a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","action.change-active-page")))},x.prototype._clickPageTreeNodeCallback=function(e){this.changeActivePage(e)},x.prototype._navigateDrawingCenter=function(e){var t=this._document.getActiveWindow().getView();if(t.getViewConfiguration().multiPageView){var n=e.getTransform(),o=e.getGeometryBBox();r=n.mapRect(o).getSide(a.GRect.Side.CENTER);t.zoomAtCenter(r)}else if(this._document.hasCDR()){var i=e.getContentBBox();if(i&&!i.isEmpty()){var r=i.getSide(a.GRect.Side.CENTER);t.zoomAtCenter(r)}}},x.prototype.createLayer=function(){const e=this._document.getScene(),t=new a.GLayer;return t.setProperty("name",a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","text.layer"))+" "+e.queryCount("layer").toString()),t},x.prototype.insertLayer=function(){if(!gDesigner.getApplicationManager().isEditingEnabled())return;gDesigner.stats("layers_insert_layer");const e=this._document.getScene();i.GEditor.tryRunTransaction(e,()=>{const t=gDesigner.getActiveDocument(),n=t&&t.getEditor(),o=n&&n.getSelection()||[];let i=e.getActivePage();i||(i=e.insertPage(),i.setFlag(a.GNode.Flag.Active));const r=this.createLayer(),s=o.filter(e=>!this._hasSelectedParentLayer(e)),l=a.GNode.order(s,!0),c=l&&l[0];(c&&c.getParent()||i).insertChild(r,c),e.setActiveLayer(r),this._moveLayers(r,null,s,!1)},a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","action.insert-layer")))},x.prototype._hasSelectedParentLayer=function(e){let t=!1;for(let n=e.getParent();n instanceof a.GLayer&&!t;n=n.getParent())n.hasFlag(a.GNode.Flag.Selected)&&(t=!0);return t},x.prototype._moveLayerTreeNodeCallback=function(e,t,n,o){const r=this._document.getScene();i.GEditor.tryRunTransaction(r,()=>{this._moveLayers(e,t,n,o)},a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","action.move-layer")))},x.prototype._moveLayers=function(e,t,n){let o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!(e&&e.hasMixin(a.GNode.Container)&&n&&n.length))return;if(!(n=n.slice().filter(e=>i.GEditor.validateBlockInsertion(e.getParent(),e,t))).length)return;o&&this._layerPanel.gLayerPanel("blockHandlers",!0);const s=this._document.getScene();this._document.getEditor().clearSelection(),s.startBlockReferenceChanges(),n.length>1&&e.beginUpdate(),n.forEach(n=>{r.GPlatform.modifiers.optionKey?n.hasMixin(a.GNode.Store)&&(n=n.clone()):n.getParent().removeChild(n),n&&(e.insertChild(n,t),e instanceof a.GCompoundShape&&n.assignStyleFrom(e))}),n.length>1&&e.endUpdate(),s.endBlockReferenceChanges(),this._document.getEditor().updateSelection(!1,n),o&&this._layerPanel.gLayerPanel("blockHandlers",!1)},x.prototype._isDuplicateEffectCallback=function(e){return e.altKey},x.prototype._duplicateLayerTreeNodeCallback=function(e,t,n){if(n&&e&&e.hasMixin(a.GNode.Container)&&n.length){this._layerPanel.gLayerPanel("blockHandlers",!1);var o=this._document.getScene();i.GEditor.tryRunTransaction(o,function(){this._document.getEditor().clearSelection(),n.length>1&&e.beginUpdate();for(var o=[],r=0;r<n.length;++r){var s=n[r];s.validateInsertion(e)&&s.hasMixin(a.GNode.Store)&&i.GEditor.validateBlockInsertion(e,s)&&(s=s.clone())&&o.push(s)}if(this._document.getEditor().insertElements(o,!0,!0,!1,!0,e,t),e instanceof a.GCompoundShape)for(var l=0;l<o.length;++l)o[l].assignStyleFrom(e);else if(e instanceof a.GShape){var c=e.getPaintBBox();if(c){var d=c.getX(),u=c.getY();for(r=0;r<o.length;++r){var p=o[r],g=p instanceof a.GElement?p.getPaintBBox():null;if(g&&!c.intersectsRect(g,!0)){var h=g.getX(),f=g.getY();null===d||null===h||a.GMath.isEqualEps(d,h)&&a.GMath.isEqualEps(u,f)||p.transform(new a.GTransform(1,0,0,1,d-h,u-f),!0)}}}}n.length>1&&e.endUpdate(),this._document.getEditor().updateSelection(!1,o)}.bind(this),a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","action.move-layer")))}},x.prototype._startLayerDraggingCallback=function(e){var t=null;if(e){gDesigner.stats("layers_start_drag"),t=[];var n=this._document.getEditor();if(e.hasFlag(a.GNode.Flag.Selected)){var o=n.getSelection();t=this._filterLayerDraggable(o),t=a.GNode.order(t,!0)}else n.clearSelection(),t.push(e)}return t},x.prototype._patternChooserStatusChange=function(e){this._layerToolbar.toggleClass("pattern-choose-actived",e)},x.prototype._filterLayerDraggable=function(e){var t=[];if(e)for(var n=0;n<e.length;++n){var o=e[n];if(!o.hasFlag(a.GElement.Flag.PartialLocked)){for(var i=!1,r=o.getParent();null!=r&&!i;r=r.getParent())i=r.hasFlag(a.GNode.Flag.Selected);i||t.push(o)}}return t},x.prototype._clickLayerTreeNodeCallback=function(e){if(e){e instanceof a.GCollabText?gDesigner.stats("layers_select_collab-text"):gDesigner.stats("layers_select_layer"),this._document.getScene().updateActivePageForElem(e),this._document.getScene().updateActiveLayerForElem(e);var t=this._document.getEditor(),n=null,o=!1;if(e instanceof a.GItem?n=a.GItem:e instanceof a.GLayer&&(n=a.GLayer),n){if(jQuery(gDesigner.getWindows().getActiveWindow().getView().getHtmlElement()).find("> div[tabindex=0]").focus(),r.GPlatform.modifiers.metaKey||!e.hasFlag(a.GNode.Flag.Selected)&&!e.hasFlag(a.GElement.Flag.FullLocked)&&!r.GPlatform.modifiers.shiftKey)this._layerPanel.gLayerPanel("onlyUpdateStyle",!0),t.updateSelection(r.GPlatform.modifiers.metaKey,[e]),this._layerPanel.gLayerPanel("onlyUpdateStyle",!1),o=!0;else if(r.GPlatform.modifiers.shiftKey){var i=t.getSelection(),s=null;if(i&&i.length){for(var l=i.length-1;l>=0&&!s;--l)i[l]instanceof n&&(s=i[l]);if(s&&s!==e){var c=[];if(this._document.getScene().accept((function(e){return e instanceof n&&c.push(e),!0}),!1,!0),c){c=a.GNode.order(c);var d=[],u=!1,p=null,g=null;for(l=0;l<c.length&&(null===p||null===g);++l)c[l]===s||c[l]===e?(u=!u,d.push(c[l]),c[l]===s?p=l:g=l):u&&d.push(c[l]);var m=s.getParent(),y=e.getParent();d=d.filter(function(t){var n=this._layerPanel.gLayerPanel("getTreeNode",t);if(e===t||s===t)return!0;var o=this._layerPanel.gLayerPanel("getItem",n.parent);return o?m===o:t!==m&&t!==y}.bind(this));var v=gDesigner.getSetting("auto_expand_layers");gDesigner.setSetting("auto_expand_layers",!1),d.length&&(p>g&&d.reverse(),t.updateSelection(!1,d),o=!0),setTimeout((function(){gDesigner.setSetting("auto_expand_layers",v)}),50)}}else t.updateSelection(!1,[e]),o=!0}}else e.hasFlag(a.GNode.Flag.Selected)&&(this._layerPanel.gLayerPanel("onlyUpdateStyle",!0),t.clearSelection(),this._layerPanel.gLayerPanel("onlyUpdateStyle",!1),o=!0);if(o)if(r.GPlatform.modifiers.optionKey)t.hasSelection()?gDesigner.executeAction(f.ID,void 0,"outlinesidebar"):gDesigner.executeAction(h.ID,void 0,"outlinesidebar");else if(e.hasMixin(a.GNode.Properties)&&e.getProperty("collab")){const t=this._document&&this._document.getActiveWindow();t&&t.scrollIntoView(e.getGeometryBBox())}}}},x.prototype._deleteLayerOrItem=function(){gDesigner.stats("layers_delete_layer-or-item");var e=this._document.getEditor(),t=this._document.getScene(),n=t.getActiveLayer();e.hasSelection()?i.GEditor.tryRunTransaction(t,(function(){e.deleteSelection(!0);var o=t.getActiveLayer();n&&n===o&&(n.acceptChildren((function(e){return e instanceof a.GItem}),!1,!0)||t.deleteActiveLayer(n))}),a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","action.delete-layer-item"))):n&&i.GEditor.tryRunTransaction(t,(function(){t.deleteActiveLayer(n)}),a.GLocale.get(new a.GLocaleKey("GOutlineSidebar","action.delete-layer-item")))},x.prototype._updateExport=function(){this._exportInstance.update(this._document,this._elements)},x.prototype._updateTransformMode=function(e){e!==this._transformMode&&(this._transformMode=e,this._updateExport())},x.prototype._afterFlagChangeEvent=function(e){e.node instanceof a.GPage&&e.flag===a.GNode.Flag.Active&&(this._document.getEditor().hasSelection()||this._updateExport())},x.prototype._afterPropertiesChanged=function(e){!e.temporary&&(e.node instanceof a.GScene||e.node instanceof a.GPage)&&a.GUtil.containsOneOf(e.properties,["w","h"])&&this._refreshPageModeSwitch(this._getMultiPageSwitcher())},x.prototype._afterInsert=function(e){var t=e.node;t instanceof a.GPage&&0===t.getProperty("w")&&this._refreshPageModeSwitch(this._getMultiPageSwitcher())},x.prototype.toString=function(){return"[Object GOutlineSidebar]"},e.exports=x},function(e,t,n){"use strict";var o=n(14);n(51);var i=n(13),a=n(45),r=n(1),s=n(9),l=n(61),c=o(n(326)),d=o(n(786)),u=o(n(185)),p=n(1138),g=o(n(548)),h=n(115),f=n(435);const m=n(589),y=n(37);function v(){}r.GObject.inherit(v,h),v.prototype._panel=null,v.prototype._advancedFillPanel=null,v.prototype._toolbar=null,v.prototype._elements=null,v.prototype._document=null,v.prototype._styleEditorChange=!1,v.prototype._styleEdOn=!1,v.prototype._ownChange=!1,v.prototype._chooserElem=null,v.prototype.init=function(e,t){this._panel=e.addClass("fill-properties-panel"),this._toolbar=t,this.setTouchTools([new c.default({id:"fill",icon:"gravit-icon-touch-fill",panel:this._panel,toolbar:this._toolbar,panelWidth:"368px"})]);var n=this;this._advancedFillPanel=$("<div></div>").gOverlay({releaseOnClose:!1});var o=function(e){if("evenodd"===e)return $("<select></select>").attr("data-property","evenodd").append($("<option></option>").attr("value","0").text(r.GLocale.get(new r.GLocaleKey("GCommonNames","evenodd.non-zero")))).append($("<option></option>").attr("value","1").text(r.GLocale.get(new r.GLocaleKey("GCommonNames","evenodd.even-odd")))).on("change",(function(){gDesigner.stats("fill_toggle_fill-rule","1"===$(this).val()?"enable":"disable"),n._assignProperty("evenodd","1"===$(this).val(),r.GLocale.get(new r.GLocaleKey("GCommonNames","action.change-fill-rule")))}));throw new Error("Unknown input property: "+e)}.bind(this);this._toolbar.addClass("list-toolbar fill-toolbar"),$("<label></label>").text(r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","title"))).appendTo(this._toolbar),$("<button></button>").attr("data-title",r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","action.advanced-settings"))).addClass("fill completely-fill g-active").append($("<span></span>").addClass("gravit-icon-touch-completely-fill")).on("click",function(e){$(".completely-fill").addClass("g-active"),$(".winding-fill").removeClass("g-active"),n._assignProperty("evenodd",!1,r.GLocale.get(new r.GLocaleKey("GCommonNames","action.change-fill-rule")))}.bind(this)).appendTo(this._toolbar),$("<button></button>").attr("data-title",r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","action.advanced-settings"))).addClass("fill winding-fill").append($("<span></span>").addClass("gravit-icon-touch-winding-fill")).on("click",function(e){$(".winding-fill").addClass("g-active"),$(".completely-fill").removeClass("g-active"),n._assignProperty("evenodd",!0,r.GLocale.get(new r.GLocaleKey("GCommonNames","action.change-fill-rule")))}.bind(this)).appendTo(this._toolbar),$("<button></button>").attr("data-title",r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","action.advanced-settings"))).attr("data-action","settings").addClass("fill-settings").append($("<span></span>").addClass("gravit-icon-settings")).on("click",function(e){gDesigner.stats("fill_open_advancedfillpanel"),this._advancedFillPanel.gOverlay("open",$(e.target).closest("button"))}.bind(this)).gRichTooltip(l.GRichTooltipConfig.from({title:r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","text.fill-rule-tooltip-title")),description:r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","text.fill-rule-tooltip-description")),learnMore:"https://documentation.corelvector.com/colors-gradients-textures/fills/#advanced-fill-settings"})).appendTo(this._toolbar),$("<button></button>").attr("data-action","remove").attr("data-title",r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","action.remove-selected"))).append($("<span></span>").addClass("gravit-icon-trash")).append($("<span></span>").addClass("gravit-icon-touch-trash")).on("click",(function(e){gDesigner.stats("fill_remove_fill"),e.stopPropagation();var t=n._getSelectedPaintLayer();t&&a.GEditor.tryRunTransaction(n._elements[0],(function(){var e=[];n._iterateEqualPaintLayer(t,(function(t){e.push(t)})),r.GUtil.each(e,(function(e,t){t.getParent().removeChild(t)}))}),r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","action.remove")));const o=gDesigner.getRightSidebars().getSidebar(u.default.SidebarsIds.GInspectorSidebar);o.trigger(new d.default(d.default.Type.ChildRemoved,o))})).gRichTooltip(l.GRichTooltipConfig.from({title:r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","text.remove-layer-tooltip-title")),description:r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","text.remove-layer-tooltip-description")),learnMore:"https://documentation.corelvector.com/colors-gradients-textures/fills/"})).appendTo(this._toolbar),$("<button></button>").attr("data-action","add").attr("data-title",r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","action.add"))).append($("<span></span>").addClass("gravit-icon-plus")).append($("<span></span>").addClass("gravit-icon-touch-plus")).on("click",function(e){gDesigner.stats("fill_add_fill"),a.GEditor.tryRunTransaction(n._elements[0],(function(){const e=n._document&&n._document.getScene(),t=e&&e.getProperty("cm"),o=r.GColorHelper.convertColor(r.GRGBColor.BLACK,t||r.GColor.ColorModes.RGB);for(var i=0;i<n._elements.length;++i){var a=new r.GStylable.FillPaintLayer;a.setProperty("_pt",o),n._elements[i].getPaintLayers().appendChild(a)}}),r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","action.add"))),$(this._toolbar).gAccordion("toggleOpen",!0),$(this._toolbar).gAccordion("init",$(this._panel));const t=gDesigner.getRightSidebars().getSidebar(u.default.SidebarsIds.GInspectorSidebar);t.trigger(new d.default(d.default.Type.ChildAdded,t))}.bind(this)).gRichTooltip(l.GRichTooltipConfig.from({title:r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","text.add-layer-tooltip-title")),description:r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","text.add-layer-tooltip-description")),learnMore:"https://documentation.corelvector.com/colors-gradients-textures/fills/"})).appendTo(this._toolbar),$("<div></div>").gPropertyRow({label:r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","text.fill-rule")),columns:[{width:"100%",content:o("evenodd")}]}).appendTo(this._advancedFillPanel),gDesigner.getWorkspace().getStyleEdManager().addEventListener(a.GStyleEdManager.EditorEvent,this._styleEditorEventHandler,this),this._panel.data("contextmenu",!0),this._panel.on("mouseenter",e=>{gDesigner.setMouseOverContext(m.FillPropertiesPanel,e,function(e){var t=this._panel.find(".copy-info-overlay").eq(0),n=this._panel.find(".fill-block.g-selected")||null,o=n&&n.position().top||0,i=$("<span/>").addClass("copy-info-overlay").css({top:o}).text(r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","text.copy-fill")));t&&t.remove(),this._panel.append(i),setTimeout(()=>{i.animate({opacity:0,top:"+=20"},500,i.remove)},1e3)}.bind(this)),this._panel.on("mousemove.check-context",e=>{var t=this._panel.outerHeight(),n=this._panel.offset();e.clientY>n.top+t-2&&(gDesigner.setMouseOverContext(null,null,null),this._panel.off("mousemove.check-context"))})}),this._panel.on("mouseleave",()=>{this._panel.off("mousemove.check-context"),gDesigner.setMouseOverContext(null,null,null)})},v.prototype.update=function(e,t,n){const o=this._styleEditorChange;if(this._styleEditorChange&&(this._styleEditorChange=!1),this._ownChange)return!0;if(this._chooserElem&&this._chooserElem.gPatternChooser("close"),this._document&&(this._document.getScene().removeEventListener(r.GNode.AfterInsertEvent,this._afterInsert,this),this._document.getScene().removeEventListener(r.GNode.BeforeRemoveEvent,this._beforeRemove,this),this._document.getScene().removeEventListener(r.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document=null),this._elements=[],e){e.getEditor();for(var i=0;i<t.length;++i){var s=t[i],l=function(e,t){t.hasMixin(r.GStylable)&&t.getStylePropertySets().indexOf(r.GStylable.PropertySet.FillPaintLayers)>=0&&this._elements.push(t)}.bind(this),c=a.GElementEditor.getEditor(s);c&&c.getStylableParts()?r.GUtil.each(c.getStylableParts(),l):l(null,s)}if(this._elements.length)return this._document=e,this._document.getScene().addEventListener(r.GNode.AfterInsertEvent,this._afterInsert,this),this._document.getScene().addEventListener(r.GNode.BeforeRemoveEvent,this._beforeRemove,this),this._document.getScene().addEventListener(r.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),o||this._updateProperties(n),!0}return!1},v.prototype._styleEditorEventHandler=function(e){this._styleEdOn&&e.type==a.GStyleEdManager.EditorEventType.PrepareModifiedEvent&&(this._styleEditorChange=!0)},v.prototype._updateProperties=function(e){if(this._elements&&this._elements.length){var t=this._elements[0];this._panel.find(".fill-block").remove();var n=t.getPaintLayers().getFillLayers();r.GUtil.each(n,function(t,n){n&&this._insertPaintLayer(n,e)}.bind(this)),this._advancedFillPanel.find('[data-property="evenodd"]').prop("disabled",!t.hasProperty("evenodd")).val(t.getProperty("evenodd")?"1":"0"),this._updateToolbar()}else console.warn("GFillPaintLayerProperties: empty _elements array")},v.prototype._assignProperty=function(e,t,n){this._assignProperties([e],[t],n)},v.prototype._assignProperties=function(e,t,n){if(this._document){this._ownChange=!0;var o=this._document.getEditor();o.beginTransaction();try{for(var i=0;i<this._elements.length;++i)this._elements[i].setProperties(e,t)}finally{o.commitTransaction(n||r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","action.modify"))),this._ownChange=!1}}else console.warn("GFillPaintLayerProperties: empty _document property")},v.prototype._updateToolbar=function(){var e=this._panel.find(".fill-block").length>0;this._toolbar.toggleClass("empty-list",!e),this._toolbar.find("[data-action=settings]").css("display",e?"":"none"),this._toolbar.find("[data-action=remove]").css("display",e?"":"none")},v.prototype._insertPaintLayer=function(e,t){var n=this,o=!1,c=null,d=null,u=null,h=null,m=null,v=0,_=0,b=function(t,n,o,i){if(o)this._iterateEqualPaintLayer(e,(function(e){e.setProperties(t,n,!1,!1,!0)}));else{if(!this._document)return;var s=null;if(i){var l=e.getParent().getIndexOfChild(e);s=$.extend({fillLayerIndex:l},i)}this._ownChange=!0;var c=this._document.getEditor();c.beginTransaction();try{this._iterateEqualPaintLayer(e,(function(e,o){var i=a.GElementEditor.getEditor(o);i&&i.applyPropertiesToParts(t,n)||e.setProperties(t,n)}))}finally{c.commitTransaction(r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","action.change-properties")),s),this._ownChange=!1}}}.bind(this),w=function(e){if(c){var t=$(e).data("paintLayer");if(t&&(t!==c||i.GPlatform.modifiers.shiftKey))return c.getParent()===t.getParent()}return!1},C=$("<div/>").addClass("g-drop-indicator"),x=function(e){return"_bl"===e?$("<select></select>").gBlendMode().gRichTooltip(l.GRichTooltipConfig.from({title:r.GLocale.get(new r.GLocaleKey("GAppearanceProperties","text.blend-tooltip-title")),description:r.GLocale.get(new r.GLocaleKey("GAppearanceProperties","text.blend-tooltip-description")),middle:!1,forceShow:!0,learnMore:s.LINKS.BLENDING_MODES_DOCUMENTATION_URL})).attr("data-property","_bl").on("change",(function(e){gDesigner.stats("fill_change_blend-mode",$(e.target).val()),b(["_bl"],[$(e.target).val()])})):"_op"===e?$("<input>").addClass("fill-op").attr("data-property","_op").attr("type","text").on("change",(function(e,t){gDesigner.stats("fill_change_opacity"),b(["_vs","_op"],[!0,(t||r.GLength.parseEquationValue($(this).gInputBox("value")))/100]),$(e.target).parents(".touch").find(".transparency").gInputSlider("value",r.GLength.parseEquationValue($(this).gInputBox("value")))})).gInputBox({minValue:0,maxValue:100,incrementValue:gDesigner.getOpacityIncrement(),postfix:"%"}):"_vs"===e?$("<span></span>").attr("data-property","_vs").addClass("fill-action fill-visibility gravit-icon-touch-show").attr("data-title",r.GLocale.get(new r.GLocaleKey("GCommonNames","action.toggle-visibility"))).on("click",(function(e){gDesigner.stats("fill_hide_show"),e.stopPropagation();var t=$(this).hasClass("gravit-icon-touch-hide");$(this).removeClass("gravit-icon-touch-"+(t?"hide":"show")),$(this).addClass("gravit-icon-touch-"+(t?"show":"hide")),b(["_vs"],[t])})):"_ra"===e?$("<div/>").addClass("transparency gravit-icon-touch-rectangle").gInputSlider({type:"range",min:0,max:100,step:1}).on("input",(function(e){var t=$(e.target),n=parseInt(t.gInputSlider("value"));t.parents(".touch").find(".fill-op").trigger("change",[n])})):void 0},S=$("<div></div>").addClass("fill-block").addClass("g-cursor-hand-open").attr("data-drag-mode",g.default.PRESS_AND_HOLD).data("paintLayer",e).attr("draggable","true").on("mousedown",(function(e){o=gDesigner.isTouchEnabled()&&e.originalEvent&&e.originalEvent.target?!!$(e.originalEvent.target).closest(".drag-indicator").length:$(e.target).hasClass("fill-block")||$(e.target).hasClass("gravit-icon-drag-indicator")||$(e.target).hasClass("columns")||$(e.target).hasClass("column"),$(e.target).closest(".fill-block").toggleClass("g-draggable-disabled",!o)})).on("dragstart",(function(e){if(!o)return e.preventDefault(),void e.stopPropagation();var t=$(e.target).closest(".fill-block"),s=t.offset(),l=e.originalEvent;(d=window.gDragImage()).addClass("drag-delete gravit-icon-trash"),h=n._panel.offset(),m=n._panel.outerHeight(),v=e.clientX-s.left,_=e.clientY-s.top,l.stopPropagation(),c=t.data("paintLayer"),l.dataTransfer.effectAllowed="move",l.dataTransfer.setData("text/plain","dummy_data"),n._panel.find(".fill-block").each((function(e,t){$(t).append($("<div></div>").addClass("grid-drag-overlay").on("dragenter",(function(){var e=$(this.parentNode).data("paintLayer");if(w(this.parentNode)){if(c&&e&&c.getParent()===e.getParent()){var t=c.getParent(),n=t.getIndexOfChild(c),o=t.getIndexOfChild(e);n!==o&&(n<o?C.insertBefore(this.parentNode):C.insertAfter(this.parentNode))}}else C.remove()})).on("dragleave",(function(){w(this.parentNode)&&$(this).parent().find(".g-drop-indicator").remove()})).on("dragover",(function(e){var t=e.originalEvent;w(this.parentNode)&&(t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect="move")})).on("drop",(function(e){var t=$(this.parentNode).closest(".fill-block").data("paintLayer");if(n._panel.find(".g-drop-indicator").remove(),n._panel.find(".grid-drag-overlay").remove(),c&&t&&c.getParent()===t.getParent()){var o=c.getParent(),s=o.getIndexOfChild(c),l=o.getIndexOfChild(t);a.GEditor.tryRunTransaction(o,(function(){if(i.GPlatform.modifiers.shiftKey){var e=c.clone();o.insertChild(e,s<l?t.getNext():t)}else s!==l&&(o.removeChild(c),o.insertChild(c,s<l?t.getNext():t))}),i.GPlatform.modifiers.shiftKey?r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","action.duplicate")):r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","action.move"))),n._updateProperties(),n._setSelectedPaintLayer(c)}c=null})))}))})).on("drag",(function(e){u=(0,p.handleDragForDeleteIcon)(e,d,h,m,v,_)})).on("dragend",(function(e){var t=e.originalEvent,o=$(e.target).closest(".fill-block").closest(".fill-block").data("paintLayer");if(n._panel.find(".g-drop-indicator").remove(),n._panel.find(".grid-drag-overlay").remove(),c&&o&&c.getParent()===o.getParent()){var s=c.getParent(),l=s.getIndexOfChild(c),p=s.getIndexOfChild(o);a.GEditor.tryRunTransaction(s,(function(){if(i.GPlatform.modifiers.shiftKey){var e=c.clone();s.insertChild(e,l<p?o.getNext():o)}else l!==p&&(s.removeChild(c),s.insertChild(c,l<p?o.getNext():o.getPrevious()))}),i.GPlatform.modifiers.shiftKey?r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","action.duplicate")):r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","action.move"))),n._updateProperties(),n._setSelectedPaintLayer(c)}c&&u&&a.GEditor.tryRunTransaction(n._elements[0],(function(){var e=[];n._iterateEqualPaintLayer(c,(function(t){e.push(t)})),r.GUtil.each(e,(function(e,t){t.getParent().removeChild(t)}))}),r.GLocale.get(new r.GLocaleKey("GFillPaintLayerProperties","action.remove"))),d&&d.css("display","none"),d=null,t.stopPropagation(),c=null})).on("click",(function(){n._setSelectedPaintLayer(e)})).gPropertyRow({columns:[{clazz:"drag-indicator",content:$("<div></div>").addClass("gravit-icon-drag-indicator g-cursor-hand-open gravit-icon-touch-drag-indicator")},{width:"40px",clazz:"color-preview",content:$("<div></div>").attr("data-property","_pt").gPatternChooser({types:[r.GColor,r.GLinearGradient,r.GRadialGradient,r.GAngularGradient,r.GBackground,r.GTexturePattern,r.GNoisePattern],hasMask:!0}).on("chooseropen",(function(){n._document.getEditor().hideSelection(),gDesigner.getWorkspace().getStyleEdManager().updateEditor(e,"_pt",!1),n._setSelectedPaintLayer(e),n._styleEdOn=!0,n._chooserElem=$(this)})).on("chooserclose",(function(e,t,o){if(gDesigner.getWorkspace().getStyleEdManager().getOverlayLock(o))t();else if(n._styleEdOn=!1,gDesigner.getWorkspace().getStyleEdManager().deactivateEditor(),n._document&&(n._document.getEditor().resetHideSelection(),n._document.hasCDR())){var i=gPatternChooser.getPattern();!i||i instanceof r.GRGBColor||y.showCDRUnsupportedObjectWarning()}n._chooserElem=null})).on("patternchange",(function(e,t,n,o,i,a){var r=["_vs"],s=[!0];void 0!==t&&(r.push("_pt"),s.push(t)),"number"==typeof n&&(r.push("_op"),s.push(n));var l=null;i&&(l={chooserOn:!0},null!=a&&(l.activeStopIdx=a)),b(r,s,o,l)}))},{width:"auto",content:$("<select></select>").addClass("normal").gBlendMode().gRichTooltip(l.GRichTooltipConfig.from({title:r.GLocale.get(new r.GLocaleKey("GAppearanceProperties","text.blend-tooltip-title")),description:r.GLocale.get(new r.GLocaleKey("GAppearanceProperties","text.blend-tooltip-description")),middle:!1,forceShow:!0,learnMore:s.LINKS.BLENDING_MODES_DOCUMENTATION_URL})).attr("data-property","_bl").on("change",(function(e){gDesigner.stats("fill_change_blend-mode",$(e.target).val()),b(["_bl"],[$(e.target).val()])}))},{width:"45px",content:$("<input>").addClass("normal").attr("data-property","_op").attr("type","text").on("change",(function(e){gDesigner.stats("fill_change_opacity"),b(["_vs","_op"],[!0,r.GLength.parseEquationValue($(this).gInputBox("value"))/100])})).gInputBox({minValue:0,maxValue:100,incrementValue:gDesigner.getOpacityIncrement(),postfix:"%"})},{width:"20px",content:$("<span></span>").attr("data-property","_vs").addClass("fill-action fill-visibility gravit-icon-display normal").attr("data-title",r.GLocale.get(new r.GLocaleKey("GCommonNames","action.toggle-visibility"))).on("click",(function(e){gDesigner.stats("fill_hide_show"),e.stopPropagation();var t=$(this).hasClass("gravit-icon-hide");$(this).removeClass("gravit-icon-"+(t?"hide":"display")),$(this).addClass("gravit-icon-"+(t?"display":"hide")),b(["_vs"],[t])}))},{width:"auto",content:$("<div/>").addClass("touch").gPropertyRow({columns:[{width:"auto",content:x("_bl")},{width:"60px",content:x("_vs")}]}).gPropertyRow({columns:[{width:"auto",content:x("_ra")},{width:"60px",content:x("_op")}]})}]}).prependTo(this._panel);S.find(".columns").addClass("g-cursor-hand-open"),S.find(".column").addClass("g-cursor-hand-open"),S.find(".touch").parents(".column").addClass("g-touch"),S.find(".normal").parents(".column").addClass("g-normal"),S.find('[data-property="_pt"]').parents(".column").addClass("g-color"),S.find(".transparency").parents(".touch div:last-child>div").addClass("g-transparency"),S.find(".touch").find("select").addClass("g-select").parent().append($("<span/>").addClass("gravit-icon-touch-arrowDown")),S.contextmenu({context:f.FillPropertyPanel},(function(e){e.preventDefault();var t=$(this).data("paintLayer");n._setSelectedPaintLayer(t),$(gDesigner.getWindows().getHtmlElement()).trigger("contextmenu",{previousEvent:e,data:{paintLayer:t}})})),this._setSelectedPaintLayer(e),this._updatePaintLayer(e,t),S.find(".transparency").each((function(e,t){$(t).gInputSlider("value",parseInt($(this).parents(".touch").find(".fill-op").val()))}))},v.prototype.openPatternChooser=function(){this._panel.find(".fill-block:first-child").find('[data-property="_pt"]').find(".g-button").click()},v.prototype.openEyeDropper=function(e,t){this._panel.find(".fill-block:first-child").find('[data-property="_pt"]').gPatternChooser("openEyeDropper",e,t)},v.prototype._setSelectedPaintLayer=function(e){this._panel.find(".fill-block").each((function(t,n){var o=$(n);o.toggleClass("g-selected",o.data("paintLayer")===e)})),this._document&&this._document.updateActiveStylesList("Fill",e)},v.prototype._getSelectedPaintLayer=function(){return this._panel.find(".fill-block.g-selected").data("paintLayer")},v.prototype._removePaintLayer=function(e){this._panel.find(".fill-block").each((function(t,n){var o=$(n);if(o.data("paintLayer")===e)return o.remove(),!1}))},v.prototype._updatePaintLayer=function(e,t){e&&this._panel.find(".fill-block").each((function(n,o){var i=$(o);if(i.data("paintLayer")===e){i.find('[data-property="_pt"]').gPatternChooser("setPattern",e.getProperty("_pt",!1,!1,!0)).gPatternChooser("value",e.getProperty("_pt",!1,!1,!0)).gPatternChooser("opacity",e.getProperty("_op",!1,!1,!0)),i.find('[data-property="_op"]').each((function(t,n){$(n).gInputBox("value",r.GUtil.formatOpacity(100*e.getProperty("_op",!1,!1,!0)))})),i.find('[data-property="_bl"]').val(e.getProperty("_bl"));var s=e.getProperty("_vs");if(i.find('[data-property="_vs"]').removeClass("gravit-icon-"+(s?"hide":"display")).addClass("gravit-icon-"+(s?"display":"hide")),t&&(t.evtType==a.GEditor.ModifiedEvent.Type.Undo||t.evtType==a.GEditor.ModifiedEvent.Type.Redo)&&t.chooserOn&&null!=t.fillLayerIndex)e.getParent().getIndexOfChild(e)==t.fillLayerIndex&&i.find(".preview").trigger("click",null!=t.activeStopIdx?t.activeStopIdx:null)}}))},v.prototype._afterInsert=function(e){e.node instanceof r.GStylable.FillPaintLayer&&e.node.getOwnerStylable()===this._elements[0]&&(this._insertPaintLayer(e.node),this._updateToolbar())},v.prototype._beforeRemove=function(e){if(e.node instanceof r.GStylable.FillPaintLayer&&e.node.getOwnerStylable()===this._elements[0]){this._removePaintLayer(e.node);for(var t=e.node.getPrevious();t&&!(t instanceof r.GStylable.FillPaintLayer);)t=t.getPrevious();if(!(t instanceof r.GStylable.FillPaintLayer))for(t=e.node.getNext();t&&!(t instanceof r.GStylable.FillPaintLayer);)t=t.getNext();this._setSelectedPaintLayer(t),this._updateToolbar()}},v.prototype._afterPropertiesChange=function(e){e.node instanceof r.GStylable.FillPaintLayer&&e.node.getOwnerStylable()===this._elements[0]&&this._updatePaintLayer(e.node)},v.prototype._iterateEqualPaintLayer=function(e,t){if(e)for(var n=e.getParent().getIndexOfChild(e),o=0;o<this._elements.length;++o){var i=this._elements[o].getPaintLayers();r.GUtil.each(i.getFillLayers(),function(a,r){(r&&r===e||r.constructor===e.constructor&&i.getIndexOfChild(r)===n)&&t(r,this._elements[o])}.bind(this))}},e.exports=v},function(e,t,n){"use strict";var o=n(14);n(314),n(89),n(844),n(181),n(51),n(3);var i=n(45),a=n(1),r=n(13),s=n(61),l=o(n(326)),c=o(n(786)),d=n(1138),u=o(n(548)),p=n(115),g=n(1239),h=n(1501),f=n(435);const m=n(589),{SidebarsIds:y}=n(185);var v=null,_=null,b=null,w=null,C=null,x=null,S=null;function E(){this._elements=[],v=a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.most-used")),_=a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.blur")),b=a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.artistic")),w=a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.adjust")),C=a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.distortion")),x=a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.other")),S=a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.shadow")),V||(V=H())}a.GObject.inherit(E,p),E.EngCat=e=>e===v?"MostUsed":e===_?"Blur":e===b?"Artistic":e===w?"Adjust":e===C?"Distortion":e===x?"Other":"Shadow",E.prototype._panel=null,E.prototype._toolbar=null,E.prototype._document=null,E.prototype._elements=null,E.prototype._addEffectMenu=null,E.prototype._effectsPanel=null,E.prototype._disableFx=null,E.prototype._defaultEffects=[a.GDropShadowEffect,a.GInnerShadowEffect,a.GBlurEffect,a.GGLColorAdjustEffect],E.prototype._styleEditorChange=!1,E.prototype._styleEdOn=!1,E.prototype._ownChange=!1,E.prototype._chooserElem=null,E.prototype.init=function(e,t){this._toolbar=t.addClass("list-toolbar effects-toolbar"),this._createAddEffectMenu(),this._panel=e.addClass("effects-properties-panel"),this.setTouchTools([new l.default({id:"effect",icon:"gravit-icon-touch-effect-panel",panel:this._panel,toolbar:this._toolbar,panelWidth:"368px"})]);var n=this;$("<label></label>").text(a.GLocale.get(new a.GLocaleKey("GEffectProperties","title"))).appendTo(this._toolbar),this._toolbar.append($("<button></button>").append($("<span></span>").addClass("gravit-icon-plus")).append($("<span></span>").addClass("gravit-icon-touch-plus")).on("click",(function(){gDesigner.stats("effects_open_effectsmenu","main"),n._openEffectsMenu(this)})).gRichTooltip(s.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.add-effect-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.add-effect-tooltip-description")),learnMore:"https://documentation.corelvector.com/effects/"}))),this._effectsPanel=$("<div></div>").addClass("effects-panel").append($("<div></div>").addClass("effects")).appendTo(this._panel);for(var o=function(e,t){var o=e;(function(){gDesigner.stats("effects_add_effectsmenu",e&&a.GLocale.getValue(t&&t.i18n||e,"name","unknown",0)||"unkn"),i.GEditor.tryRunTransaction(this._elements[0],function(){for(var e=0;e<this._elements.length;++e){var t=new o;this._validateInsertation(this._elements[e].getEffects(),t)&&this._elements[e].getEffects().appendChild(t),n._addEffectMenu.close();const i=gDesigner.getRightSidebars().getSidebar(y.GInspectorSidebar);i.trigger(new c.default(c.default.Type.ChildAdded,i))}}.bind(this),a.GLocale.get(new a.GLocaleKey("GEffectProperties","action.add")))}).bind(this)()}.bind(this),r=0;r<V.length;++r){var d=V[r];$.inArray(d.clazz,this._defaultEffects)>-1&&this._createDefaultEffect(!1,d,o)}this._createDefaultEffect(!0),gDesigner.getWorkspace().getStyleEdManager().addEventListener(i.GStyleEdManager.EditorEvent,this._styleEditorEventHandler,this),this._panel.data("contextmenu",!0)},E.prototype._openEffectsMenu=function(e){this._addEffectMenu.open(e)},E.prototype.update=function(e,t,n){if(this._styleEditorChange)return this._styleEditorChange=!1,!0;if(this._ownChange)return!0;if(this._chooserElem&&this._chooserElem.gPatternChooser("close"),this._document&&(this._document.getScene().removeEventListener(a.GNode.AfterInsertEvent,this._afterInsert,this),this._document.getScene().removeEventListener(a.GNode.BeforeRemoveEvent,this._beforeRemove,this),this._document.getScene().removeEventListener(a.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document=null,this._elements=null,this._invalidateEffects()),this._elements=[],e&&t&&t.length){for(var o=0;o<t.length;++o)t[o].hasMixin(a.GStylable)&&t[o].getStylePropertySets().indexOf(a.GStylable.PropertySet.Effects)>=0&&this._elements.push(t[o]);if(this._elements.length)return this._document=e,this._document.getScene().addEventListener(a.GNode.AfterInsertEvent,this._afterInsert,this),this._document.getScene().addEventListener(a.GNode.BeforeRemoveEvent,this._beforeRemove,this),this._document.getScene().addEventListener(a.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._invalidateEffects(n),!0}return!1},E.prototype._styleEditorEventHandler=function(e){this._styleEdOn&&e.type==i.GStyleEdManager.EditorEventType.PrepareModifiedEvent&&(this._styleEditorChange=!0)},E.prototype._afterInsert=function(e){e.node instanceof a.GStylable.Effect&&e.node.getOwnerStylable()===this._elements[0]&&(this._insertEffect(e.node),this._updateToolbar())},E.prototype._beforeRemove=function(e){e.node instanceof a.GStylable.Effect&&e.node.getOwnerStylable()===this._elements[0]&&(this._removeEffect(e.node),this._updateToolbar())},E.prototype._afterPropertiesChange=function(e){(!e.temporary||e.node instanceof a.GOverlayEffect)&&e.node instanceof a.GStylable.Effect&&e.node.getOwnerStylable()===this._elements[0]&&this._updateEffect(e.node)},E.prototype._iterateEqualEffects=function(e,t,n){for(var o=e.getOwnerStylable(),i=e.getParent().getIndexOfChild(e),r=0;r<this._elements.length;++r)if(!o||this._elements[r]!==o||n)for(var s=this._elements[r].getEffects(),l=s.getFirstChild();null!==l;l=l.getNext())(l!==e||n)&&(a.GUtil.equals(l,e)&&!n||l.constructor===e.constructor&&s.getIndexOfChild(l)===i)&&t(l)},E.prototype._insertEffect=function(e,t){var n=this,o=null,s=null,l=null,p=0,g=0,h=null,v=function(){i.GEditor.tryRunTransaction(e,function(){this._iterateEqualEffects(e,(function(t){t.setProperty("cl",!e.getProperty("cl"))})),e.setProperty("cl",!e.getProperty("cl"))}.bind(this),a.GLocale.get(new a.GLocaleKey("GEffectProperties","action.toggle-collapse")))}.bind(this),_=function(t){t.stopPropagation(),i.GEditor.tryRunTransaction(e,function(){this._iterateEqualEffects(e,(function(t){t.setProperty("vs",!e.getProperty("vs"))})),e.setProperty("vs",!e.getProperty("vs"))}.bind(this),a.GLocale.get(new a.GLocaleKey("GEffectProperties","action.toggle-visibility")))}.bind(this),b=function(t){var n=V.find(t=>e instanceof t.clazz);gDesigner.stats("effects_delete_effect",a.GLocale.getValue(n&&n.i18n||e,"name",e.getNodeName(),666)),t.stopPropagation(),i.GEditor.tryRunTransaction(e,function(){this._iterateEqualEffects(e,(function(e){e.getParent().removeChild(e)})),e.getParent().removeChild(e),gDesigner.setMouseOverContext(null)}.bind(this),a.GLocale.get(new a.GLocaleKey("GEffectProperties","action.remove")));const o=gDesigner.getRightSidebars().getSidebar(y.GInspectorSidebar);o.trigger(new c.default(c.default.Type.ChildRemoved,o))}.bind(this),w=null,C=e.getPrevious();C&&this._effectsPanel.find(".effect-block").each((function(e,t){var n=$(t);if(n.data("effect")===C)return w=n,!1}));var x=U(e),S=$("<div/>").addClass("g-drop-indicator"),E=$("<div></div>").addClass("effect-header").addClass("g-cursor-hand-open"),P=$("<div></div>").addClass("effect-block").attr("data-drag-mode",u.default.PRESS_AND_HOLD).data("effect",e).attr("draggable","true").on("mousedown",(function(e){A=$(e.target).hasClass("effect-title")||$(e.target).hasClass("gravit-icon-drag-indicator")||$(e.target).hasClass("effect-header"),$(e.target).closest(".effect-block").toggleClass("g-draggable-disabled",!A)})).on("click",(function(e){var t=$(e.target).parents(".effect-block");t.children().addClass("selected"),t.siblings().children().removeClass("selected")})).on("mousedown",e=>{h=e.originalEvent.target}).on("dragstart",(function(e){var t=h||e.target;if(!A||gDesigner.isTouchEnabled()&&!$(t).closest(".effect-header").length)return e.preventDefault(),void e.stopPropagation();var c=$(e.target).closest(".effect-block"),d=c.offset(),u=e.originalEvent;(o=gDragImage()).addClass("drag-delete gravit-icon-trash"),s=n._panel.offset(),l=n._effectsPanel.outerHeight(),p=e.clientX-d.left,g=e.clientY-d.top,u.stopPropagation(),T=c.data("effect"),u.dataTransfer.effectAllowed="move",u.dataTransfer.setData("text/plain","dummy_data"),n._effectsPanel.find(".effect-block").each((function(e,t){$(t).append($("<div></div>").addClass("grid-drag-overlay").on("dragenter",(function(){var e=$(this.parentNode).data("effect");if(G(this.parentNode)){if(u.preventDefault(),u.stopPropagation(),u.dataTransfer.dropEffect="move",T&&e&&T.getParent()===e.getParent()){var t=T.getParent(),n=t.getIndexOfChild(T),o=t.getIndexOfChild(e);n!==o&&(n<o?S.insertBefore(this.parentNode):S.insertAfter(this.parentNode))}}else S.remove()})).on("dragleave",(function(){G(this.parentNode)&&$(this).parent().find(".g-drop-indicator").remove()})).on("dragover",(function(e){var t=e.originalEvent;G(this.parentNode)&&(t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect="move")})).on("drop",(function(e){var t=$(this.parentNode).closest(".effect-block").data("effect");if(n._panel.find(".g-drop-indicator").remove(),n._panel.find(".grid-drag-overlay").remove(),T&&t&&T.getParent()===t.getParent()){var o=T.getParent(),s=o.getIndexOfChild(T),l=o.getIndexOfChild(t);i.GEditor.tryRunTransaction(o,(function(){if(r.GPlatform.modifiers.shiftKey){var e=T.clone();o.insertChild(e,s<l?t.getNext():t)}else s!==l&&(o.removeChild(T),o.insertChild(T,s<l?t.getNext():t))}),r.GPlatform.modifiers.shiftKey?a.GLocale.get(new a.GLocaleKey("GEffectProperties","action.duplicate")):a.GLocale.get(new a.GLocaleKey("GEffectProperties","action.move")))}T=null})))}))})).on("drag",(function(e){(0,d.handleDragForDeleteIcon)(e,o,s,l,p,g)})).on("dragend",(function(e){var t=e.originalEvent;$(e.target).closest(".effect-block");n._panel.find(".g-drop-indicator").remove(),n._panel.find(".grid-drag-overlay").remove(),o&&o.css("display","none"),o=null,t.stopPropagation(),T&&i.GEditor.tryRunTransaction(n._elements[0],(function(){var e=[];n._iterateEqualEffects(T,(function(t){e.push(t)}),!0),a.GUtil.each(e,(function(e,t){t.getParent().removeChild(t)}))}),a.GLocale.get(new a.GLocaleKey("GEffectProperties","action.remove")))})).append(E.append($("<div></div>").addClass("gravit-icon-drag-indicator g-cursor-hand-open gravit-icon-touch-drag-indicator")).append($("<div></div>").addClass("effect-title g-cursor-hand-open").append($("<label></label>").append($("<span></span>").text(e.getNodeNameTranslated())))).append($("<div></div>").addClass("effect-icon effect-visibility normal").on("click",(function(e){e.stopPropagation();var t=$(this).find("span").hasClass("gravit-icon-hide");gDesigner.stats("effects_toggle_visibility",t?"hidden":"visible"),$(this).find("span").removeClass("gravit-icon-"+(t?"hide":"display")),$(this).find("span").addClass("gravit-icon-"+(t?"display":"hide")),_(e)})).append($("<span></span>").addClass("gravit-icon-"+(e.getProperty("vs")?"display":"hide")))).append($("<div></div>").addClass("effect-icon effect-delete normal").attr("data-title",a.GLocale.get(new a.GLocaleKey("GEffectProperties","action.remove"))).on("click",b).append($("<span></span>").addClass("gravit-icon-trash"))).append($("<div></div>").addClass("effect-icon effect-setting touch").attr("data-action","stroke-settings").append($("<span></span>").addClass("gravit-icon-touch-settings")).on("click",function(e){e.data={context:f.EffectPropertyPanel},P.trigger("contextmenu",[e])}.bind(this))).append($("<div></div>").addClass("effect-icon effect-delete touch").attr("data-title",a.GLocale.get(new a.GLocaleKey("GEffectProperties","action.remove"))).on("click",b).append($("<span></span>").addClass("gravit-icon-touch-trash"))).append($("<div></div>").addClass("effect-icon effect-visibility touch").on("click",(function(e){e.stopPropagation();var t=$(this).find("span").hasClass("gravit-icon-touch-hide");gDesigner.stats("effects_toggle_visibility",t?"hidden":"visible"),$(this).find("span").removeClass("gravit-icon-touch-"+(t?"hide":"show")),$(this).find("span").addClass("gravit-icon-touch-"+(t?"show":"hide")),_(e)})).append($("<span></span>").addClass("gravit-icon-touch-"+(e.getProperty("vs")?"show":"hide")))));if(x.createSettings){var D=function(t,n,o,i){if(o)this._iterateEqualEffects(e,(function(e){e.setProperties(t,n,!1,!1,!0)})),e.setProperties(t,n,!1,!1,!0);else{if(!this._document)return;gDesigner.stats("effects_assign_effectproperty",a.GLocale.getValue(x.i18n,"name",e.getNodeName(),666));var r=null;if(i){var s=e.getParent().getIndexOfChild(e);r=$.extend({effectIndex:s},i)}this._ownChange=!0;var l=this._document.getEditor();l.beginTransaction();try{this._iterateEqualEffects(e,(function(e){e.setProperties(t,n)})),e.setProperties(t,n)}finally{l.commitTransaction(a.GLocale.get(new a.GLocaleKey("GEffectProperties","action.change-properties")),r),this._ownChange=!1}}}.bind(this),L=x.createSettings.call(this,e,D);if(L){var I=$("<div></div>").addClass("effect-settings");L.addClass("content"),P.append(I.append(L))}}w&&w.length>0?P.insertBefore(w):P.appendTo(this._effectsPanel.find(".effects")),E.gAccordion("init",".effect-settings:last","label").on("change",(function(){gDesigner.stats("effects_toggle_collapse"),v()})),P.contextmenu({context:f.EffectPropertyPanel},(function(e,t){(e=t||e).preventDefault();var n=$(this).data("effect");$(gDesigner.getWindows().getHtmlElement()).trigger("contextmenu",{previousEvent:e,data:{effect:n}})})),P.on("mouseenter",t=>{this._document&&this._document.updateActiveStylesList("Effect",e),gDesigner.setMouseOverContext(m.EffectPropertiesPanel,t,function(e){var t=this._panel.find(".copy-info-overlay").eq(0),n=e&&$(e.target).closest(".effect-block"),o=n&&n.height()||0,i=n&&n.position().top||0,r=o?i+o/2:i,s=$("<span/>").addClass("copy-info-overlay").css({top:r}).text(a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.copy-effect")));t&&t.remove(),this._panel.append(s),setTimeout(()=>{s.animate({opacity:0,top:"+=20"},500,s.remove)},1e3)}.bind(this)),this._panel.on("mousemove.check-context",e=>{var t=this._panel.outerHeight(),n=this._panel.offset();e.clientY>n.top+t-2&&(gDesigner.setMouseOverContext(null,null,null),this._panel.off("mousemove.check-context"))})}),P.on("mouseleave",()=>{this._panel.off("mousemove.check-context"),this._document&&this._document.updateActiveStylesList("Effect",null),gDesigner.setMouseOverContext(null,null,null)}),this._updateEffect(e,t)},E.prototype._updateEffect=function(e,t){this._effectsPanel.find(".effect-block").each((function(n,o){var r=$(o);if(r.data("effect")===e){U(e);if(e instanceof a.GOverlayEffect||e instanceof a.GDropShadowEffect||e instanceof a.GInnerShadowEffect||e instanceof a.GCurvedShadowEffect||e instanceof a.GContactShadowEffect||e instanceof a.GLongShadowEffect)if(r.find('[data-property="pat"]').gPatternChooser("setPattern",e.getProperty("pat",!1,!1,!0)).gPatternChooser("value",e.getProperty("pat",!1,!1,!0)).gPatternChooser("opacity",e.getProperty("opc",!1,!1,!0)),r.find('[data-property="opc"]').gInputBox("value",a.GUtil.formatOpacity(100*e.getProperty("opc",!1,!1,!0))),t&&(t.evtType==i.GEditor.ModifiedEvent.Type.Undo||t.evtType==i.GEditor.ModifiedEvent.Type.Redo)&&t.chooserOn&&null!=t.effectIndex)e.getParent().getIndexOfChild(e)==t.effectIndex&&r.find('[data-property="pat"]').find(".preview").trigger("click",null!=t.activeStopIdx?t.activeStopIdx:null);var s=e.getProperty("vs"),l=e.getProperty("ly"),c=e.getProperty("cl");r.toggleClass("g-selected",e.hasFlag(a.GNode.Flag.Selected)),r.find(".effect-title input[type=checkbox]").prop("checked",s),r.find(".effect-header").gAccordion("toggleOpen",!c);var d=r.find(".effect-settings");if(d.css("display",c?"none":""),e instanceof a.GBlurEffect&&d.find('[data-property="r"]:not(.g-input-slider)').gUnitBox("value",new a.GLength(e.getProperty("r"))),e instanceof a.GWebGLEffect){var u=e.getProperty("shp");for(var p in u){var g=u[p];if("number"==typeof g){var h=d.find("[data-property="+p+"]:not(.g-input-slider)");h.gUnitBox("options").hasOwnProperty("unit")&&h.gUnitBox("value",new a.GLength(g,a.GLength.Unit.PT))}}}return e instanceof a.GDropShadowEffect&&(d.find('[data-property="r"]').gUnitBox("value",new a.GLength(e.getProperty("r"))),d.find('[data-property="x"]').gUnitBox("value",new a.GLength(e.getProperty("x"))),d.find('[data-property="y"]').gUnitBox("value",new a.GLength(e.getProperty("y")))),r.find(".effect-layer").attr("data-title",a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.applies-to"))+" "+a.GLocale.get(a.GStylable.StyleLayerName[l||""])).find("> span").toggleClass("gravit-icon-circle",!l).toggleClass("gravit-icon-fill",l===a.GStylable.StyleLayer.Fill).toggleClass("gravit-icon-stroke",l===a.GStylable.StyleLayer.Border),!1}}))},E.prototype._removeEffect=function(e){this._effectsPanel.find(".effect-block").each((function(t,n){var o=$(n);if(o.data("effect")===e)return o.remove(),!1}))},E.prototype._invalidateEffects=function(e){if(this._effectsPanel.find(".effects").empty(),this._elements&&this._elements.length)for(var t=this._elements[0].getEffects().getFirstChild();null!==t;t=t.getNext())t instanceof a.GStylable.Effect&&this._insertEffect(t,e);this._updateToolbar()},E.prototype._createAddEffectMenu=function(){this._addEffectMenu=new h(E.EngCat);var e=this._addEffectMenu,t=e.createSelector(),n=this,o=function(e,t){var o=e;this._elements[0].getScene();(function(){gDesigner.stats("effects_add_panelbutton",e&&a.GLocale.getValue(t&&t.i18n||e,"name","unknown",0)||"unkn"),i.GEditor.tryRunTransaction(this._elements[0],function(){for(var e=0;e<this._elements.length;++e){var t=new o;this._validateInsertation(this._elements[e].getEffects(),t)&&this._elements[e].getEffects().appendChild(t),n._addEffectMenu.close()}}.bind(this),a.GLocale.get(new a.GLocaleKey("GEffectProperties","action.add"))),$(this._toolbar).gAccordion("toggleOpen",!0),$(this._toolbar).gAccordion("init",$(this._panel));const r=gDesigner.getRightSidebars().getSidebar(y.GInspectorSidebar);r.trigger(new c.default(c.default.Type.ChildAdded,r))}).bind(this)()}.bind(this),r={};r[v]=new Array;var s=$("<option></option>").attr({value:v}).append(v);t.append(s);for(var l=[],d=0;d<V.length;++d){var u=V[d];if(!u.hidden){u.cb=o;var p=u.mostUsed,g=u.category;if(g){if(!r[g]){r[g]=new Array;s=$("<option></option>").attr({value:g}).append(g);l.push(s)}r[g].push(u)}p&&r[v].push(u)}}l.sort((function(e,t){return $(e).attr("value")===a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.other"))||$(e).attr("value")>$(t).attr("value")?1:$(t).attr("value")===a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.other"))||$(t).attr("value")>$(e).attr("value")?-1:0}));for(d=0;d<l.length;++d)t.append(l[d]);t.on("change",(function(t){gDesigner.stats("effects_choose_type",E.EngCat(this.value)),e.addItems(r[this.value])})),e.addItems(r[v])},E.prototype._validateInsertation=function(e,t){if(t.isSingleton())for(var n=a.GObject.getTypeId(t),o=e.getFirstChild();null!==o;o=o.getNext())if(a.GObject.getTypeId(o)===n)return!1;return!0},E.prototype._createDefaultEffect=function(e,t,n){var o=function(o){e?(gDesigner.stats("effects_open_effectsmenu","more"),this._openEffectsMenu(o)):n(t.clazz,t)}.bind(this),i=$("<span></span>").text(e?a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.more")):a.GLocale.getValue(t.i18n,"name")).addClass("effects-default-label"),r=$("<span>+</span>");$("<div></div>").addClass("effects-default").append(i).append(r).on("click",(function(){o(this)})).appendTo(this._panel)},E.prototype._updateToolbar=function(){var e=this._panel.find(".effect-block").length>0||this._panel.find(".effects-default").length>0;this._toolbar.toggleClass("empty-list",!e)},E.prototype.toString=function(){return"[Object GEffectProperties]"};var A=!1,T=null;function G(e){if(T){var t=$(e).data("effect");if(t&&(t!==T||r.GPlatform.modifiers.shiftKey))return T.getParent()===t.getParent()}return!1}function P(e,t,n){var o=n||e,i=o.getProperty.bind(o),r=(this._document.getScene(),this._document.getEditor()),s=i("shp"),l=a.GNode.getClassFromId(a.GObject.getTypeId(o)).RANGES||fxRanges,c=this,d=$("<div></div>");for(var u in s){var p=s[u];if(-1!==["contrast","brightness","hue","saturation"].indexOf(u)){var h=l[u],f=100*p;isNaN(f)||(f=a.GUtil.formatNumber(f,0));var m=100*h[0],y=100*h[1],v=g.DefaultStops.Hue;if("hue"===u)o instanceof a.GGLRecolourEffect?(m=0,y=360):(m=-180,y=180),v=g.DefaultStops.Hue,f=a.GMath.normalizeValue(p,h[0],h[1],m,y);else if(-1!==["contrast","brightness"].indexOf(u))v=g.DefaultStops.Luminosity;else if("saturation"===u&&(v=g.DefaultStops.Saturation(0),o instanceof a.GGLRecolourEffect)){var _=a.GMath.normalizeValue(s.hue,h[0],h[1],0,360);v=g.DefaultStops.Saturation(_)}var b=function(e,t,n){if("hue"===t&&o instanceof a.GGLRecolourEffect){var i=$(n).closest(".effect-settings").find('.g-input-slider[data-property="saturation"]'),r=i.gColorSlider("value");i.empty().gColorSlider({min:100*h[0],max:100*h[1],stops:g.DefaultStops.Saturation(e)}).gColorSlider("value",r).trigger("input")}};$("<div></div>").gPropertyRow({label:a.GLocale.get(new a.GLocaleKey("GWebGLEffect",u)),columns:[{width:"75%",content:$("<div>").attr("data-property",u).gColorSlider({min:m,max:y,stops:v,maxDecimal:0}).gColorSlider("value",f).on("input",(function(e){var n=$(e.target).data().property,o=$(e.target).gColorSlider("value"),r=o,s=$(e.target).gColorSlider("minValue"),l=$(e.target).gColorSlider("maxValue");o=a.GMath.normalizeValue(o,s,l,h[0],h[1]),b(r,n,e.target);var c=i("shp");if(c[n]!==o){var d=JSON.parse(JSON.stringify(c));d[n]=o,t(["shp"],[d])}$(e.target).closest(".effect-settings").find("[data-property="+n+"]:not(.g-input-slider)").val(r).trigger("change")}))},{width:"40px",content:$("<input>").attr("type","text").attr("data-property",u).val(f).on("change",(function(e){var n=$(e.target).data().property,r=Number(o.propertyInverseTransform(n,parseFloat($(e.target).gInputBox("value"))).toFixed(3)),s=i("shp"),l=$(this).parents(".effect-settings").find(".g-input-slider[data-property="+n+"]");l.gColorSlider("value")!=r&&l.gColorSlider("value",r),b(r,n,e.target);var c=l.gColorSlider("minValue"),d=l.gColorSlider("maxValue");if(r=a.GMath.normalizeValue(r,c,d,h[0],h[1]),s&&s[n]!==r){var u=JSON.parse(JSON.stringify(s));u[n]=r,t(["shp"],[u])}})).gInputBox({minValue:m,maxValue:y,postfix:"hue"===u?"°":"%",incrementValue:1})}]}).appendTo(d)}else if("number"==typeof p){f=new a.GLength(p,a.GLength.Unit.PT);h=l[u];$("<div></div>").gPropertyRow({label:a.GLocale.get(new a.GLocaleKey("GWebGLEffect",u)),columns:[{width:"75%",content:$("<div/>").gInputSlider({min:h[0],max:h[1],step:.002*Math.abs(h[1]-h[0])}).attr("data-property",u).on("mousedown",(function(){r.hideSelection(),$(document).one("mouseup",(function(){r.resetHideSelection()}))})).gInputSlider("value",Number(o.propertyInverseTransform(u,p).toFixed(3))).on("input",(function(e){var n=$(e.target),r=n.data().property,s=a.GLength.parseEquation($(this).gInputSlider("value")),l=0;s&&(l=s.toPoint()),l=Number(o.propertyTransform(r,l).toFixed(3));var c=i("shp");if(null!==l&&"number"==typeof l&&c[r]!==l){var d=JSON.parse(JSON.stringify(c));d[r]=l,t(["shp"],[d],!0)}n.closest(".effect-settings").find("[data-property="+r+"]:not(.g-input-slider)").val(l).trigger("change")})).on("change",(function(e){var t=$(e.target),n=t.data().property,i=a.GLength.parseEquation($(this).gInputSlider("value")),r=0;i&&(r=i.toPoint()),r=Number(o.propertyTransform(n,r).toFixed(3)),t.closest(".effect-settings").find("[data-property="+n+"]:not(.g-input-slider)").val(r).trigger("change")}))},{width:"40px",content:$("<input>").attr("data-property",u).on("change",(function(e){var n=$(e.target).data().property,a=$(this).gUnitBox("value"),r=0;a&&(r=a.toPoint());var s=Number(o.propertyInverseTransform(n,r).toFixed(3)),l=i("shp"),c=$(this).parents(".effect-settings").find("[data-property="+n+"].g-input-slider");if(c.gInputSlider("value")!=s&&c.gInputSlider("value",s),null!==r&&"number"==typeof r&&l[n]!==r){var d=JSON.parse(JSON.stringify(l));d[n]=r,t(["shp"],[d])}})).gUnitBox({minValue:h[0],maxValue:h[1],incrementValue:.002*Math.abs(h[1]-h[0]),source:"effects"}).gUnitBox("value",f)}]}).appendTo(d)}else if(p instanceof Array&&3===p.length){var w=void 0,C=[a.GColor];s.opacity&&"object"==typeof s.opacity&&"opacity"===s.opacity.type&&(w=s.opacity.value,C.push()),$("<div></div>").gPropertyRow({label:a.GLocale.get(new a.GLocaleKey("GWebGLEffect",u)),columns:[{width:"50px",content:$("<div></div>").gPatternChooser({types:C}).gPatternChooser("value",new a.GRGBColor(p)).gPatternChooser("opacity",w).on("chooseropen",(function(){c._document.getEditor().hideSelection(),c._chooserElem=$(this)})).on("chooserclose",(function(e,t,n){c._document&&c._document.getEditor().resetHideSelection(),c._chooserElem=null})).on("patternchange",(function(e,n,o,a,r){var s=i("shp"),l=JSON.parse(JSON.stringify(s));void 0!==n&&(l.color=n.getValue()),"number"==typeof o&&s.opacity&&"object"==typeof s.opacity&&"opacity"===s.opacity.type&&(l.opacity.value=o);var c=null;r&&(c={chooserOn:!0}),t(["shp"],[l],a,c)}))}]}).appendTo(d)}else if("object"==typeof p&&"dropdown"===p.type){h=l[u];for(var x=$("<select></select>").attr("data-property",u).on("change",(function(e){var n=$(e.target).data().property,o=$(e.target).val(),a=i("shp");if(a&&(!a[n]||a[n].value!==o)){var r=JSON.parse(JSON.stringify(a));r[n].value=o,t(["shp"],[r])}})),S=0;S<h.length;S++)$("<option></option>").attr("value",S).text(h[S]instanceof a.GLocaleKey?a.GLocale.get(h[S]):h[S]).appendTo(x);x.val(p.value),$("<div></div>").gPropertyRow({label:a.GLocale.get(new a.GLocaleKey("GWebGLEffect",u)),columns:[{width:"100%",content:x}]}).appendTo(d)}else"boolean"==typeof p&&$("<div></div>").gPropertyRow({label:a.GLocale.get(new a.GLocaleKey("GWebGLEffect",u)),columns:[{width:"20px",content:$("<label></label>").addClass("g-switch").append($("<input>").attr("type","checkbox").attr("data-property",u).prop("checked",p).on("change",(function(e){var n=$(e.target).data().property,o=$(this).is(":checked"),a=i("shp");if(a[n]!==o){var r=JSON.parse(JSON.stringify(a));r[n]=o,t(["shp"],[r])}}))).append($("<div></div>"))}]}).appendTo(d)}return d}function D(e,t,n){this._document.getScene();var o=n?n.getProperty.bind(n):e.getProperty.bind(e),i=o("x"),r=o("y"),s=new a.GLength(o("r"),a.GLength.Unit.PT),l=o("pat"),c=o("opc"),d=this,u=[0,200],p=e.RANGES;return p&&p.r&&(u=p.r),$("<div></div>").append($("<div></div>").addClass("touch-effects-shadow").gPropertyRow({columns:[{width:"20%",label:"X",content:$("<input>").attr("type","text").attr("data-property","x").gUnitBox({source:"effects"}).gUnitBox("value",new a.GLength(i,a.GLength.Unit.PT)).on("change",(function(){var e=$(this).gUnitBox("value"),n=e?e.toUnit(a.GLength.Unit.PT):null;null!==n&&"number"==typeof n&&t(["x"],[n])}))},{width:"20%",label:"Y",content:$("<input>").attr("type","text").attr("data-property","y").gUnitBox({source:"effects"}).gUnitBox("value",new a.GLength(r,a.GLength.Unit.PT)).on("change",(function(){var e=$(this).gUnitBox("value"),n=e?e.toUnit(a.GLength.Unit.PT):null;null!==n&&"number"==typeof n&&t(["y"],[n])}))},{width:"20%",label:a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.blur")),content:$("<input>").attr("type","text").attr("data-property","r").gUnitBox({minValue:u[0],maxValue:u[1],source:"effects"}).gUnitBox("value",s).on("change",(function(e){var n=$(this).gUnitBox("value"),o=n?n.toUnit(a.GLength.Unit.PT):null;null!==o&&t(["r"],[o])}))},{width:"20%",label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.opacity")),content:$("<input>").attr("type","text").attr("data-property","opc").on("change",(function(e){var n=a.GLength.parseEquationValue($(e.target).gInputBox("value"))/100;t(["opc"],[n]),$(e.target).parents(".effect-settings").find('[data-property="pat"]').gPatternChooser("opacity",n)})).gInputBox({minValue:0,maxValue:100,incrementValue:gDesigner.getOpacityIncrement(),postfix:"%"}).gInputBox("value",a.GUtil.formatOpacity(100*c))},{width:"20%",label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.color")),content:$("<div></div>").attr("data-property","pat").gPatternChooser({types:[a.GColor,a.GGradient]}).gPatternChooser("value",l).gPatternChooser("opacity",c).on("chooseropen",(function(){d._document.getEditor().hideSelection(),d._chooserElem=$(this)})).on("chooserclose",(function(e,t,n){d._document&&d._document.getEditor().resetHideSelection(),d._chooserElem=null})).on("patternchange",(function(e,n,o,i,r,s){var l=[],c=[];void 0!==n&&(l.push("pat"),c.push(n)),"number"==typeof o&&(l.push("opc"),c.push(o),$(e.target).parents(".effect-settings").find('[data-property="opc"]').gInputBox("value",a.GUtil.formatOpacity(100*o)));var d=null;r&&(d={chooserOn:!0},null!=s&&(d.activeStopIdx=s)),t(l,c,i,d)}))}]}))}function L(e,t,n){this._document.getScene();var o=n?n.getProperty.bind(n):e.getProperty.bind(e),i=o("a"),r=o("s"),s=o("l"),l=o("b"),c=o("c"),d=o("pat"),u=o("opc"),p=this._document.getEditor(),g=$("<div></div>"),h=this;function f(e,n,o,i,r,s,l,c,d){var u,g=$("<input>").attr("type","text").attr("data-property",n).val(o).on("change",(function(e){var o=a.GLength.parseEquationValue($(e.target).gInputBox("value"));i&&(o=$(this).gUnitBox("value").toUnit(a.GLength.Unit.PT));var l=$(this).parents(".effect-settings").find('[data-property="'+n+'"].g-input-slider');l.gInputSlider("value")!=o&&l.gInputSlider("value",o),null!==o&&"number"==typeof o&&o>=r&&o<=s&&t([n],[o])}));return i?(u=new a.GLength(o,a.GLength.Unit.PT),g.gUnitBox({minValue:r,maxValue:s,source:"effects"}).gUnitBox("value",u)):g.gInputBox({minValue:r,maxValue:s,postfix:c||"",incrementValue:(s-r)/100}).gInputBox("value",o),$("<div></div>").gPropertyRow({columns:[{label:e,width:"75%",content:$("<div>").gInputSlider({type:"range",maxDecimal:d,min:r,max:s,step:l||(s-r)/100}).gInputSlider("value",o).attr("data-property",n).on("mousedown",(function(){p.hideSelection(),$(document).one("mouseup",(function(){p.resetHideSelection()}))})).on("input",(function(e){var o=$(this),i=parseFloat(o.gInputSlider("value"));t([n],[i],!0),o.parents(".effect-settings").find('[data-property="'+n+'"]:not(.g-input-slider)').val(o.gInputSlider("value"))})).on("change",(function(e){var t=$(this),o=t.gInputSlider("value");t.parents(".effect-settings").find('[data-property="'+n+'"]:not(.g-input-slider)').val(o).trigger("change")}))},{width:"25%",content:g}]})}return g.append(f(a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.bend")),"b",l,!0,-60,60,null,"",1)),g.append(f(a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.softness")),"s",r,!1,0,1,null,"",2)),g.append(f(a.GLocale.get(new a.GLocaleKey("GCommonNames","text.radius")),"l",s,!1,0,50,null,"",1)),g.append(f(a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.coverage")),"c",c,!1,0,1,null,"",2)),g.append(f(a.GLocale.get(new a.GLocaleKey("GCommonNames","text.angle")),"a",i,!1,0,360,1,"°")),$("<div></div>").addClass("touch-effects-shadow").gPropertyRow({columns:[{width:"50%",label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.opacity")),content:$("<input>").attr("type","text").attr("data-property","opc").on("change",(function(e){var n=a.GLength.parseEquationValue($(e.target).gInputBox("value"))/100;t(["opc"],[n]),$(e.target).parents(".effect-settings").find('[data-property="pat"]').gPatternChooser("opacity",n)})).gInputBox({minValue:0,maxValue:100,incrementValue:gDesigner.getOpacityIncrement(),postfix:"%"}).gInputBox("value",a.GUtil.formatOpacity(100*u))},{width:"20%",label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.color")),content:$("<div></div>").attr("data-property","pat").gPatternChooser({types:[a.GColor,a.GGradient]}).gPatternChooser("value",d).gPatternChooser("opacity",u).on("chooseropen",(function(){h._document.getEditor().hideSelection(),h._chooserElem=$(this)})).on("chooserclose",(function(e,t,n){h._document&&h._document.getEditor().resetHideSelection(),h._chooserElem=null})).on("patternchange",(function(e,n,o,i,r,s){var l=[],c=[];void 0!==n&&(l.push("pat"),c.push(n)),"number"==typeof o&&(l.push("opc"),c.push(o),$(e.target).parents(".effect-settings").find('[data-property="opc"]').gInputBox("value",a.GUtil.formatOpacity(100*o)));var d=null;r&&(d={chooserOn:!0},null!=s&&(d.activeStopIdx=s)),t(l,c,i,d)}))}]}).appendTo(g),g}function I(e,t,n){this._document.getScene();var o=n?n.getProperty.bind(n):e.getProperty.bind(e),i=o("a"),r=new a.GLength(o("r"),a.GLength.Unit.PT),s=new a.GLength(o("o"),a.GLength.Unit.PT),l=o("pat"),c=o("opc"),d=this,u=[5,200],p=e.RANGES;p&&p.r&&(u=p.r);var g=function(e){return"r"===e?$("<input>").attr("type","text").gUnitBox({minValue:u[0],maxValue:u[1],source:"effects"}).gUnitBox("value",r).on("change",(function(e){t(["r"],[$(this).gUnitBox("value").toUnit(a.GLength.Unit.PT)])})):"a"===e?$("<input>").attr("type","text").gInputBox({minValue:5,maxValue:35,postfix:"°"}).gInputBox("value",i).on("change",(function(e){t(["a"],[a.GLength.parseEquationValue($(e.target).gInputBox("value"))])})):"o"===e?$("<input>").attr("type","text").gUnitBox({source:"effects"}).gUnitBox("value",s).on("change",(function(e){t(["o"],[$(this).gUnitBox("value").toUnit(a.GLength.Unit.PT)])})):"opc"===e?$("<input>").attr("type","text").attr("data-property","opc").on("change",(function(e){var n=a.GLength.parseEquationValue($(e.target).gInputBox("value"))/100;t(["opc"],[n]),$(e.target).parents(".effect-settings").find('[data-property="pat"]').gPatternChooser("opacity",n)})).gInputBox({minValue:0,maxValue:100,incrementValue:gDesigner.getOpacityIncrement(),postfix:"%"}).gInputBox("value",a.GUtil.formatOpacity(100*c)):"pat"===e?$("<div></div>").attr("data-property","pat").gPatternChooser({types:[a.GColor]}).gPatternChooser("value",l).gPatternChooser("opacity",c).on("chooseropen",(function(){d._document.getEditor().hideSelection(),d._chooserElem=$(this)})).on("chooserclose",(function(e,t,n){d._document&&d._document.getEditor().resetHideSelection(),d._chooserElem=null})).on("patternchange",(function(e,n,o,i,r){var s=[],l=[];void 0!==n&&(s.push("pat"),l.push(n)),"number"==typeof o&&(s.push("opc"),l.push(o),$(e.target).parents(".effect-settings").find('[data-property="opc"]').gInputBox("value",a.GUtil.formatOpacity(100*o)));var c=null;r&&(c={chooserOn:!0}),t(s,l,i,c)})):void 0};return $("<div></div>").append($("<div></div>").gPropertyRow({columns:[{width:"20%",label:a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.offset")),content:g("o")},{width:"20%",label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.angle")),content:g("a")},{width:"20%",label:a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.blur")),content:g("r")},{width:"20%",label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.opacity")),content:g("opc")},{width:"20%",label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.color")),content:g("pat")}]}))}function k(e,t,n){this._document.getScene();var o=n?n.getProperty.bind(n):e.getProperty.bind(e),i=o("a"),r=new a.GLength(o("l"),a.GLength.Unit.PT),s=o("pat"),l=o("opc"),c=o("den"),d=o("fdm"),u=this,p=function(e){return"l"===e?$("<input>").attr("type","text").gUnitBox({minValue:0,source:"effects"}).gUnitBox("value",r).on("change",(function(e){t(["l"],[$(this).gUnitBox("value").toUnit(a.GLength.Unit.PT)])})):"a"===e?$("<input>").attr("type","text").gInputBox({minValue:-180,maxValue:180,postfix:"°"}).gInputBox("value",a.GUtil.formatNumber(Math.round(a.GMath.toDegrees(i)),1)).on("change",(function(e){t(["a"],[a.GMath.toRadians(a.GLength.parseEquationValue($(e.target).gInputBox("value")))])})):"opc"===e?$("<input>").attr("type","text").attr("data-property","opc").on("change",(function(e){var n=a.GLength.parseEquationValue($(e.target).gInputBox("value"))/100;t(["opc"],[n]),$(e.target).parents(".effect-settings").find('[data-property="pat"]').gPatternChooser("opacity",n)})).gInputBox({minValue:0,maxValue:100,postfix:"%"}).gInputBox("value",a.GUtil.formatOpacity(100*l)):"den"===e?$("<input>").attr("type","text").on("change",(function(e){var n=$(e.target).gInputBox("value")/100;t(["den"],[n])})).gInputBox({minValue:5,maxValue:100,incrementValue:1,postfix:"%"}).gInputBox("value",a.GUtil.formatNumber(100*c)):"fdm"===e?$("<label></label>").addClass("g-switch").append($("<input>").attr("type","checkbox").prop("checked",d).on("change",(function(e){t(["fdm"],[$(this).is(":checked")])}))).append($("<div></div>")):"pat"===e?$("<div></div>").attr("data-property","pat").gPatternChooser({types:[a.GColor,a.GGradient]}).gPatternChooser("value",s).gPatternChooser("opacity",l).on("chooseropen",(function(){u._document.getEditor().hideSelection(),u._chooserElem=$(this)})).on("chooserclose",(function(e,t,n){u._document&&u._document.getEditor().resetHideSelection(),u._chooserElem=null})).on("patternchange",(function(e,n,o,i,r,s){var l=[],c=[];void 0!==n&&(l.push("pat"),c.push(n)),"number"==typeof o&&(l.push("opc"),c.push(o),$(e.target).parents(".effect-settings").find('[data-property="opc"]').gInputBox("value",a.GUtil.formatOpacity(100*o)));var d=null;r&&(d={chooserOn:!0},null!=s&&(d.activeStopIdx=s)),t(l,c,i,d)})):void 0};return $("<div></div>").append($("<div></div>").gPropertyRow({columns:[{width:"33%",label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.angle")),content:p("a")},{width:"33%",label:a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.length")),content:p("l")},{width:"33%",label:a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.density")),content:p("den")}]})).append($("<div></div>").gPropertyRow({columns:[{width:"33%",label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.color")),content:p("pat")},{width:"33%",label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.opacity")),content:p("opc")},{width:"33%",label:a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.fade")),content:p("fdm")}]}))}function O(e,t,n){this._document.getScene();var o=n?n.getProperty.bind(n):e.getProperty.bind(e),i=this._document.getEditor(),r=new a.GLength(o("r"),a.GLength.Unit.PT),s=o("b"),l=$("<div></div>");return $("<div></div>").gPropertyRow({columns:[{label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.radius")),width:"75%",content:$("<div>").gInputSlider({maxDecimal:1,min:"0",max:new a.GLength(K?50:10,a.GLength.Unit.PT).toUnit(a.GLength.Unit.PX),step:"0.1"}).gInputSlider("value",o("r")).attr("data-property","r").on("mousedown",(function(){i.hideSelection(),$(document).one("mouseup",(function(){i.resetHideSelection()}))})).on("input",(function(e){var n=$(this),o=parseFloat(n.gInputSlider("value"));t(["r"],[o],!0),n.parents(".effect-settings").find('[data-property="r"]:not(.g-input-slider)').val(n.gInputSlider("value"))})).on("change",(function(e){var t=$(this),n=parseFloat(t.gInputSlider("value"));t.parents(".effect-settings").find('[data-property="r"]:not(.g-input-slider)').val(n).trigger("change")}))},{width:"25%",content:$("<input>").attr("data-property","r").gUnitBox({source:"effects"}).gUnitBox("value",r).on("change",(function(e){var n=$(this).gUnitBox("value"),o=n?n.toUnit(a.GLength.Unit.PT):null,i=$(this).parents(".effect-settings").find('[data-property="r"].g-input-slider');parseFloat(i.gInputSlider("value"))!=o&&i.gInputSlider("value",o),null!==o&&"number"==typeof o&&o>=0&&o<=254&&t(["r"],[o])}))}]}).appendTo(l),$("<div></div>").gPropertyRow({columns:[{label:a.GLocale.get(new a.GLocaleKey("GWebGLEffect","clip")),width:"25%",content:$("<label></label>").addClass("g-switch").append($("<input>").attr("type","checkbox").prop("checked",s).on("change",(function(e){t(["b"],[$(this).is(":checked")])}))).append($("<div></div>"))}]}).appendTo(l),l}function F(e,t,n){var o=this._document.getEditor(),i=n?n.getProperty.bind(n):e.getProperty.bind(e),r=i("pat"),s=i("opc"),l=i("alm"),c=this;return $("<div></div>").append($("<div></div>").addClass("touch-effects-overlay").gPropertyRow({columns:[{width:"20%",label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.color")),content:$("<div></div>").attr("data-property","pat").gPatternChooser({types:[a.GColor,a.GGradient]}).gPatternChooser("value",r).gPatternChooser("opacity",s).on("chooseropen",(function(){o.hideSelection(),gDesigner.getWorkspace().getStyleEdManager().updateEditor(e,"pat",!1),c._styleEdOn=!0,c._chooserElem=$(this)})).on("chooserclose",(function(e,t,n){gDesigner.getWorkspace().getStyleEdManager().getOverlayLock(n)?t():(c._styleEdOn=!1,gDesigner.getWorkspace().getStyleEdManager().deactivateEditor(),o.resetHideSelection()),c._chooserElem=null})).on("patternchange",(function(e,n,o,i,a,r){var s=[],l=[];void 0!==n&&(s.push("pat"),l.push(n)),"number"==typeof o&&(s.push("opc"),l.push(o));var c=null;a&&(c={chooserOn:!0},null!=r&&(c.activeStopIdx=r)),t(s,l,i,c)}))},{width:"20%"},{width:"20%",label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.opacity")),content:$("<input>").attr("type","text").attr("data-property","opc").on("change",(function(e){var n=$(e.target).gInputBox("value")/100;t(["opc"],[n])})).gInputBox({minValue:0,maxValue:100,incrementValue:gDesigner.getOpacityIncrement(),postfix:"%"}).gInputBox("value",a.GUtil.formatOpacity(100*s))},{width:"20%"},{width:"20%",label:a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.blend")),content:$("<div/>").css({display:"flex",justifyContent:"center"}).append($("<label></label>").addClass("g-switch").css({width:"20px",alignSelf:"center"}).append($("<input>").attr("type","checkbox").prop("checked",l).on("change",(function(e){if($(this).is(":checked")){var n=new a.GLinearGradient([{color:a.GRGBColor.BLACK,position:0,opacity:1},{color:a.GRGBColor.WHITE,position:1,opacity:0}]);t(["alm","opc","pat"],[!0,1,n])}else t(["alm"],[!1])}))).append($("<div></div>")))}]}))}function R(e,t){return $("<div></div>").append($("<input>").attr("type","file").attr("accept",".acv").css({position:"absolute",left:"-10000px"}).on("change",(function(e){gDesigner.stats("effects_change_colorgrading");var n=$(e.target)[0].files;if(n&&n.length&&(n[0]instanceof File||n[0]instanceof Blob)){var o=new FileReader;o.onload=function(){var e=a.GUtil.readACVFile(o.result);e&&t(["cp"],[e])},o.readAsArrayBuffer(n[0])}}))).append($("<select></select>").append($("<option></option>").attr("value","").text(a.GLocale.get(new a.GLocaleKey("GCommonNames","text.none")))).append($('<optgroup label="'.concat(a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.color.gradient.grp.instagram")),'"></optgroup>')).append($("<option></option>").attr("value","1977").text(a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.color.gradient.opt.1977")))).append($("<option></option>").attr("value",a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.color.gradient.opt.brannan"))).text("Brannan")).append($("<option></option>").attr("value","Gotham").text(a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.color.gradient.opt.gotham")))).append($("<option></option>").attr("value","Hefe").text(a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.color.gradient.opt.hefe")))).append($("<option></option>").attr("value","Lord Kelvin").text(a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.color.gradient.opt.lord-kelvin")))).append($("<option></option>").attr("value","Nashville").text(a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.color.gradient.opt.nashville")))).append($("<option></option>").attr("value","X-PRO II").text(a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.color.gradient.opt.x-pro-ii"))))).on("change",(function(e){var n=$(e.target).val();if(gDesigner.stats("effects_change_grading",n||"none"),n){var o=new XMLHttpRequest;o.addEventListener("load",(function(){if(200==o.status&&o.response){var e=a.GUtil.readACVFile(o.response);e&&t(["cp"],[e])}})),o.open("GET","assets/data/acv/"+n+".acv"),o.responseType="arraybuffer",o.send(null)}else t(["cp"],[null])}))).append($("<button></button>").text(a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.load-acv"))+"...").on("click",(function(e){gDesigner.stats("effects_choose_acv"),$(e.target).parents(".effect-settings").find('input[type="file"]').focus().trigger("click")})))}function M(e,t){for(var n=a.GObject.getTypeId(e),o=(a.GNode.getClassFromId(n),e.getFXArray()),i=$("<div></div>"),r=0;r<o.length;r++)for(var s=o[r],l=a.GNode.getClassFromId(a.GObject.getTypeId(o[r])),c=a.GNode.getName(l),d=0;d<V.length;d++)if(V[d].clazz===l){i.append(V[d].createSettings.call(this,e,B(c,t),s).css("margin-top","7px"));break}return i}function N(e,t,n){var o=this._document.getEditor(),i=n?n.getProperty.bind(n):e.getProperty.bind(e),r=i("opc"),s=new a.GLength(i("pad")),l=i("rfh"),c=function(e){return"rfh"===e?$("<input>").attr("data-property",e).attr("type","text").on("change",(function(n){var o=a.GLength.parseEquationValue($(n.target).gInputBox("value"))/100;t([e],[o])})).gInputBox({minValue:0,maxValue:100,incrementValue:10,slowIncrementValue:1,postfix:"%"}).gInputBox("value",100*l):"pad"===e?$("<input>").attr("data-property",e).attr("type","text").on("change",(function(n){var o=$(n.target).gUnitBox("value").getValue();t([e],[o])})).gUnitBox({minValue:0,incrementValue:1,source:"effects"}).gUnitBox("value",s):"opacity-slider"===e?$("<div/>").attr("data-property","opc").gInputSlider({type:"range",min:0,max:100}).on("mousedown",(function(){o.hideSelection(),$(document).one("mouseup",(function(){o.resetHideSelection()}))})).on("input",(function(e){var n=$(e.target),o=parseInt(n.gInputSlider("value"))/100;t(["opc"],[o]),$(e.target).parents(".effect-settings").find('[type="text"][data-property="opc"]').gInputBox("value",a.GUtil.formatOpacity(100*o))})).on("change",(function(e){t(["opc"],[parseFloat($(this).gInputSlider("value"))/100])})).gInputSlider("value",100*r):"opacity-input"===e?$("<input>").attr("type","text").attr("data-property","opc").on("change",(function(e){var n=$(this).gInputBox("value");$(this).parents(".effect-settings").find('[data-property="opc"].g-input-slider').gInputSlider("value",n),t(["opc"],[a.GLength.parseEquationValue($(this).gInputBox("value"))/100])})).gInputBox({minValue:0,maxValue:100,incrementValue:5,postfix:"%"}).gInputBox("value",a.GUtil.formatOpacity(100*r)):void 0};return $("<div></div>").gPropertyRow({columns:[{width:"auto",label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.opacity")),content:$("<div></div>").gPropertyRow({columns:[{width:"auto",content:c("opacity-slider")},{width:$("body").hasClass("g-touch")?"60px":"40px",content:c("opacity-input")}]})},{width:$("body").hasClass("g-touch")?"60px":"40px",label:a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.padding")),content:c("pad")},{width:$("body").hasClass("g-touch")?"60px":"40px",label:a.GLocale.get(new a.GLocaleKey("GEffectProperties","text.height")),content:c("rfh")}]})}function B(e,t){return function(n,o,i){for(var a=n.slice(),r=o.slice(),s=0;s<a.length;s++)a[s]=e+"&"+a[s],r[s]=o[s];t(a,r,i)}}function U(e){var t=null;t=e instanceof a.GStylable.Effect?e.constructor:e;for(var n=0;n<V.length;++n)if(V[n].clazz===t)return V[n];throw new Error("Invalid effect/class")}var j=document.createElement("canvas"),K=null;try{K=j.getContext("webgl",{premultipliedAlpha:!1})||j.getContext("experimental-webgl")}catch(e){K=null}var V=null,H=function(){return[{clazz:a.GGLBlurEffect,i18n:"GGLBlurEffect",group:"raster",createSettings:P,icon:"gravit-icon-blur-effect"},{clazz:a.GBlurEffect,i18n:"GBlurEffect",group:"raster",category:_,createSettings:O,icon:"gravit-icon-blur-effect",mostUsed:!0},{clazz:a.GGLVignetteEffect,i18n:"GGLVignetteEffect",group:"webgl",category:b,createSettings:P,icon:"gravit-icon-vignette-effect",mostUsed:!0},{clazz:a.GGLColorAdjustEffect,i18n:"GGLColorAdjustEffect",group:"webgl",category:w,createSettings:P,icon:"gravit-icon-adjust-effect",mostUsed:!0},{clazz:a.GGLRecolourEffect,i18n:"GGLRecolourEffect",group:"webgl",category:w,createSettings:P,icon:"gravit-icon-recolour-effect",mostUsed:!0},{clazz:a.GOverlayEffect,i18n:"GOverlayEffect",group:"filter",category:w,createSettings:F,icon:"gravit-icon-overlay-effect",mostUsed:!0},{clazz:a.GMirrorEffect,i18n:"GMirrorEffect",group:"mirror",category:x,createSettings:N,icon:"gravit-icon-mirror-effect",mostUsed:!0},{clazz:a.GCurvedShadowEffect,i18n:"GCurvedShadowEffect",group:"raster",category:S,createSettings:L,icon:"gravit-icon-curved-shadow-effect",mostUsed:!0},{clazz:a.GDropShadowEffect,i18n:"GDropShadowEffect",group:"raster",category:S,createSettings:D,icon:"gravit-icon-drop-shadow-effect",mostUsed:!0},{clazz:a.GInnerShadowEffect,i18n:"GInnerShadowEffect",group:"raster",category:S,createSettings:D,icon:"gravit-icon-inner-shadow-effect",mostUsed:!0},{clazz:a.GGLBulgePinchEffect,i18n:"GGLBulgePinchEffect",group:"webgl",category:C,createSettings:P,icon:"gravit-icon-bulge-effect"},{clazz:a.GGLColorHalfToneEffect,i18n:"GGLColorHalfToneEffect",group:"webgl",category:w,createSettings:P,icon:"gravit-icon-half-tone-effect"},{clazz:a.GGLDotScreenEffect,i18n:"GGLDotScreenEffect",group:"webgl",category:b,createSettings:P,icon:"gravit-icon-dotscreen-effect"},{clazz:a.GGLBrightnessContrastEffect,i18n:"GGLBrightnessContrastEffect",group:"webgl",category:w,hidden:!0,createSettings:P},{clazz:a.GGLFisheyeEffect,i18n:"GGLFisheyeEffect",group:"webgl",category:C,createSettings:P,icon:"gravit-icon-fisheye-effect"},{clazz:a.GGLBendEffect,i18n:"GGLBendEffect",group:"webgl",category:C,createSettings:P,icon:"gravit-icon-bend-effect"},{clazz:a.GGLDenoiseEffect,i18n:"GGLDenoiseEffect",group:"webgl",category:w,createSettings:P,icon:"gravit-icon-denoise-effect"},{clazz:a.GGLEdgeWorkEffect,i18n:"GGLEdgeWorkEffect",group:"webgl",category:b,createSettings:P,icon:"gravit-icon-edge-work-effect"},{clazz:a.GGLHexagonalEffect,i18n:"GGLHexagonalEffect",group:"webgl",category:b,createSettings:P,icon:"gravit-icon-hexagonal-effect"},{clazz:a.GGLHueSaturationEffect,i18n:"GGLHueSaturationEffect",group:"webgl",category:w,hidden:!0,createSettings:P},{clazz:a.GColorAdjustMultiEffect,i18n:"GColorAdjustMultiEffect",group:"webgl",category:w,createSettings:M,hidden:!0},{clazz:a.GGLInkEffect,i18n:"GGLInkEffect",group:"webgl",category:b,createSettings:P,icon:"gravit-icon-ink-effect"},{clazz:a.GGLLensBlurEffect,i18n:"GGLLensBlurEffect",group:"webgl",category:_,createSettings:P,icon:"gravit-icon-lens-blur-effect"},{clazz:a.GGLNoiseEffect,i18n:"GGLNoiseEffect",group:"webgl",category:w,createSettings:P,icon:"gravit-icon-noise-effect"},{clazz:a.GGLSepiaEffect,i18n:"GGLSepiaEffect",group:"webgl",category:w,createSettings:P,icon:"gravit-icon-sepia-effect"},{clazz:a.GGLSwirlEffect,i18n:"GGLSwirlEffect",group:"webgl",category:C,createSettings:P,icon:"gravit-icon-swirl-effect"},{clazz:a.GGLTiltShiftEffect,i18n:"GGLTiltShiftEffect",group:"webgl",category:_,createSettings:P,icon:"gravit-icon-tilt-shift-effect"},{clazz:a.GGLDrunkEffect,i18n:"GGLDrunkEffect",group:"webgl",category:b,createSettings:P,icon:"gravit-icon-alcohol-effect"},{clazz:a.GGLUnsharpMaskEffect,i18n:"GGLUnsharpMaskEffect",group:"webgl",category:w,createSettings:P,icon:"gravit-icon-unsharp-mask-effect"},{clazz:a.GGLVibranceEffect,i18n:"GGLVibranceEffect",group:"webgl",category:w,createSettings:P,icon:"gravit-icon-vibrance-effect"},{clazz:a.GGLBloomEffect,i18n:"GGLBloomEffect",group:"webgl",category:w,createSettings:P,icon:"gravit-icon-bloom-effect"},{clazz:a.GGLSketchEffect,i18n:"GGLSketchEffect",group:"webgl",category:b,createSettings:P,icon:"gravit-icon-sketch-effect"},{clazz:a.GGLToonEffect,i18n:"GGLToonEffect",group:"webgl",category:b,createSettings:P,icon:"gravit-icon-toon-effect"},{clazz:a.GGLZoomBlurEffect,i18n:"GGLZoomBlurEffect",group:"webgl",category:_,createSettings:P,icon:"gravit-icon-zoom-blur-effect"},{clazz:a.GGLStrokeLayerEffect,i18n:"GGLStrokeLayerEffect",group:"raster",category:x,createSettings:P,icon:"gravit-icon-stroke-effect"},{clazz:a.GGLInnerGlowEffect,i18n:"GGLInnerGlowEffect",group:"raster",category:x,createSettings:P,icon:"gravit-icon-inner-glow-effect"},{clazz:a.GGLOuterGlowEffect,i18n:"GGLOuterGlowEffect",group:"raster",category:x,createSettings:P,icon:"gravit-icon-outer-glow-effect"},{clazz:a.GContactShadowEffect,i18n:"GContactShadowEffect",group:"raster",category:S,createSettings:I,icon:"gravit-icon-contact-shadow-effect"},{clazz:a.GLongShadowEffect,i18n:"GLongShadowEffect",group:"raster",category:S,createSettings:k,icon:"gravit-icon-long-shadow-effect"},{clazz:a.GColorGradingEffect,i18n:"GColorGradingEffect",group:"filter",category:w,createSettings:R,icon:"gravit-icon-color-grading-effect"}]};e.exports=E},function(e,t,n){"use strict";var o=n(1);function i(){}i.DefaultStops={Hue:function(e){return o.GColor.hsvToRGB([e,1,1])},Saturation:function(e){return function(t){return o.GColor.hsvToRGB([e,t/100,1])}},Luminosity:function(e){return o.GColor.hsvToRGB([0,0,e/100])}},e.exports=i;var a={init:function(e){return e=$.extend({min:0,max:360,stops:i.DefaultStops.Hue},e),this.each((function(){for(var t="",n=0,i=Math.abs(e.min)+Math.abs(e.max),a=e.min;a<=e.max;a+=20){var r=e.stops.call(null,n);n+=20,t&&(t+=","),t+=o.GColor.rgbToHtmlHex(r)+" "+n/i*100+"%"}e.background="linear-gradient(90deg,"+t+")",$(this).gInputSlider(e)}))},value:function(e){return $(this).gInputSlider("value",e)},minValue:function(){return $(this).gInputSlider("minValue")},maxValue:function(){return $(this).gInputSlider("maxValue")}};$.fn.gColorSlider=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):a.init.apply(this,arguments)}},function(e,t,n){"use strict";n(51),n(3);var o=n(1),i=n(115),a=n(1137);function r(){}o.GObject.inherit(r,i),r.prototype._panel=null,r.prototype._document=null,r.prototype._elements=null,r.prototype.isGroup=function(e){return e instanceof a},r.prototype.init=function(e,t){this._panel=e;var n=function(e){var t=parseInt($(e.target).closest("[data-op]").attr("data-op"));gDesigner.stats("booleanops_click_"+(t===o.GVertexPolyBoolean.OR?"merge":t===o.GVertexPolyBoolean.AND?"intersect":t===o.GVertexPolyBoolean.XOR?"difference":t===o.GVertexPolyBoolean.SUB?"subtract":"unkn"));var n=this._document.getEditor();n.beginTransaction();try{for(var i=0;i<this._elements.length;++i)this._elements[i].setProperty("bool",t)}finally{n.commitTransaction(o.GLocale.get(new o.GLocaleKey("GBoolOpProperties","action.modify-merge-mode")))}}.bind(this);$("<div></div>").addClass("compound-row").gPropertyRow({label:o.GLocale.get(new o.GLocaleKey("GBoolOpProperties","text.boolean")),columns:[{width:"25%",content:$("<button></button>").addClass("compound-chooser-btn").attr("data-op",o.GVertexPolyBoolean.OR).attr("data-title",o.GLocale.get(new o.GLocaleKey("GBoolOpProperties","text.union"))).append($("<span></span>").addClass("gravit-icon-merge-union")).on("click",n)},{width:"25%",content:$("<button></button>").addClass("compound-chooser-btn").attr("data-op",o.GVertexPolyBoolean.SUB).attr("data-title",o.GLocale.get(new o.GLocaleKey("GBoolOpProperties","text.subtract"))).append($("<span></span>").addClass("gravit-icon-merge-subtract")).on("click",n)},{width:"25%",content:$("<button></button>").addClass("compound-chooser-btn").attr("data-op",o.GVertexPolyBoolean.AND).attr("data-title",o.GLocale.get(new o.GLocaleKey("GBoolOpProperties","text.intersect"))).append($("<span></span>").addClass("gravit-icon-merge-intersect")).on("click",n)},{width:"25%",content:$("<button></button>").addClass("compound-chooser-btn").attr("data-op",o.GVertexPolyBoolean.XOR).attr("data-title",o.GLocale.get(new o.GLocaleKey("GBoolOpProperties","text.difference"))).append($("<span></span>").addClass("gravit-icon-merge-difference")).on("click",n)}]}).appendTo(this._panel),$("<hr/>").appendTo(this._panel)},r.prototype.update=function(e,t){if(this._document&&(this._document.getScene().removeEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange),this._document=null),this._elements=[],e&&t){for(var n=0;n<t.length;++n){var i=t[n];if(i.getParent()&&i.getParent()instanceof o.GCompoundShape&&i.getPrevious())this._elements.push(i);else if(i instanceof o.GCompoundShape&&i.getFirstChild())for(var a=i.getFirstChild().getNext();null!==a;a=a.getNext())this._elements.push(a)}if(this._elements.length)return this._document=e,this._document.getScene().addEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._updateProperties(),!0}return!1},r.prototype._afterPropertiesChange=function(e){!e.temporary&&this._elements.length>0&&this._elements[0]===e.node&&this._updateProperties()},r.prototype._updateProperties=function(){var e=this._elements[0];this._panel.find("button[data-op]").each((function(t,n){var o=$(n);o.toggleClass("g-active",e.getProperty("bool")===parseInt(o.attr("data-op")))}))},r.prototype.toString=function(){return"[Object GBoolOpProperties]"},e.exports=r},function(e,t,n){"use strict";n(51),n(3);var o=n(1),i=n(115);n(162);function a(){this._ellipses=[]}o.GObject.inherit(a,i),a.prototype._panel=null,a.prototype._document=null,a.prototype._ellipses=null,a.prototype.init=function(e){this._panel=e;var t=function(e){var t=this;if(0===e.indexOf("etp-")){var n="",i=parseInt(e.substr("etp-".length));switch(i){case o.GEllipse.Type.Pie:n="gravit-icon-circle-pie";break;case o.GEllipse.Type.Chord:n="gravit-icon-ellipse-chord";break;case o.GEllipse.Type.Arc:n="gravit-icon-ellipse-arc";break;default:throw new Error("")}return $("<div></div>").attr("data-property",e).addClass("g-button g-icon").on("click",(function(){gDesigner.stats("ellipse_change_type",i),t._assignProperty("etp",i,o.GLocale.get(new o.GLocaleKey("GEllipseProperties","action.change-shape"))),i===o.GEllipse.Type.Arc&&t._setBorderAlignmentCenter()})).append($("<span></span>").addClass(n))}if("sa"===e||"ea"===e)return $("<input>").attr("type","text").attr("data-property",e).on("change",(function(){gDesigner.stats("ellipse_change_angle");var n=o.GLength.parseEquationValue($(this).gInputBox("value"));null!==n?(n=o.GMath.normalizeAngleRadians(o.GMath.toRadians(n)),t._assignProperty(e,o.GMath.PI2-n,o.GLocale.get(new o.GLocaleKey("GEllipseProperties","action.change-angle")))):t._updateProperties()})).gInputBox();throw new Error("Unknown input property: "+e)}.bind(this);$("<div></div>").addClass("ellipse-angles-property").gPropertyRow({label:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.angles")),columns:[{width:"50%",content:t("sa")},{width:"50%",content:t("ea")}]}).appendTo(e),$("<div></div>").addClass("ellipse-shape-property").gPropertyRow({label:o.GLocale.get(new o.GLocaleKey("GEllipseProperties","text.shape")),columns:[{width:"33.3%",clazz:"shape-type-chooser shape-arc",label:o.GLocale.get(new o.GLocaleKey("GEllipse","type.arc")),content:t("etp-"+o.GEllipse.Type.Arc)},{width:"33.3%",clazz:"shape-type-chooser shape-chord",label:o.GLocale.get(new o.GLocaleKey("GEllipse","type.chord")),content:t("etp-"+o.GEllipse.Type.Chord)},{width:"33.3%",clazz:"shape-type-chooser shape-pie",label:o.GLocale.get(new o.GLocaleKey("GEllipse","type.pie")),content:t("etp-"+o.GEllipse.Type.Pie)}]}).appendTo(e)},a.prototype.update=function(e,t){if(this._document&&(this._document.getScene().removeEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange),this._document=null),this._ellipses=[],e){for(var n=0;n<t.length;++n)t[n]instanceof o.GEllipse&&this._ellipses.push(t[n]);if(this._ellipses.length&&this._ellipses.length===t.length)return this._document=e,this._document.getScene().addEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._updateProperties(),!0}return!1},a.prototype._afterPropertiesChange=function(e){!e.temporary&&this._ellipses.length>0&&this._ellipses[0]===e.node&&this._updateProperties()},a.prototype._setBorderAlignmentCenter=function(){var e,t,n=["_ba"],i=[o.GStylable.BorderAlignment.Center],a=this._document.getEditor();a.beginTransaction();try{for(var r=0,s=this._ellipses.length;r<s;++r){e=this._ellipses[r].getPaintLayers().getBorderLayers();for(var l=0,c=e.length;l<c;l++)(t=e[l])instanceof o.GStylable.BorderPaintLayer&&t.setProperties(n,i)}}finally{a.commitTransaction(o.GLocale.get(new o.GLocaleKey("GEllipseProperties","text.ellipse-to-center")))}},a.prototype._updateProperties=function(){var e=this._ellipses[0];this._panel.find('[data-property^="etp"]').each((function(t,n){var o=$(n),i=o.attr("data-property").substr("etp-".length);o.toggleClass("g-active",e.getProperty("etp").toString()===i)})),this._panel.find('input[data-property="sa"]').val(o.GUtil.formatNumber(o.GMath.toDegrees(o.GMath.PI2-e.getProperty("sa")),2)),this._panel.find('input[data-property="ea"]').val(o.GUtil.formatNumber(o.GMath.toDegrees(o.GMath.PI2-e.getProperty("ea")),2))},a.prototype._assignProperty=function(e,t,n){this._assignProperties([e],[t],n)},a.prototype._assignProperties=function(e,t,n){var o=this._document.getEditor();o.beginTransaction();try{for(var i=0;i<this._ellipses.length;++i)this._ellipses[i].setProperties(e,t)}finally{o.commitTransaction(n)}},a.prototype.toString=function(){return"[Object GEllipseProperties]"},e.exports=a},function(e,t,n){"use strict";n(3);n(45);var o=n(1),i=(n(13),n(1243)),a=n(115),{replaceImage:r,setOriginSize:s,cropImage:l}=(n(162),n(205),n(1244));function c(){}o.GObject.inherit(c,a),c.prototype._panel=null,c.prototype._document=null,c.prototype._image=null,c.prototype._controls=null,c.prototype.init=function(e,t){this._panel=e,this._controls=t,$("<div></div>").addClass("g-image-convert-status").css({display:"none","font-size":"8px"}).append($("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GImageProperties","text.checking-profile"))+"...")).appendTo(this._controls),$("<div></div>").addClass("image-button-row").gPropertyRow({columns:[{label:o.GLocale.get(new o.GLocaleKey("GImageProperties","action.replace")),width:"25%",content:$("<button></button>").addClass("g-flat").css("padding","0").append($("<span></span>").addClass("gravit-icon-replaceimg")).on("click",()=>{r(this._image,this._document),gDesigner.stats("image_replace_image")})},{label:o.GLocale.get(new o.GLocaleKey("GImageProperties","action.original-size")),width:"25%",content:$("<button></button>").addClass("g-flat").css("padding","0").attr("data-action","reset-size").append($("<span></span>").addClass("gravit-icon-expand")).on("click",()=>{s(this._image),gDesigner.stats("image_reset_size")})},{label:o.GLocale.get(new o.GLocaleKey("GImageProperties","action.no-crop")),labelClass:"crop-label",width:"25%",content:$("<button></button>").attr("data-action","handle-crop").addClass("g-flat").css("padding","0").append($("<span></span>").addClass("gravit-icon-crop")).on("click",()=>{var t=e.find('button[data-action="handle-crop"]');l(this._image,t.data("no-crop")),gDesigner.stats("image_change_croptype")})},{label:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.colors")),width:"25%",content:$("<button></button>").attr("data-image-palette","button").addClass("g-flat").css("padding","0").append($("<span></span>").addClass("gravit-icon-extract-colors")).on("click",this._updateImagePalette.bind(this))}]}).appendTo(e),$("<div></div>").attr("data-image-palette","palette").css({height:"27px",margin:"5px 10px 0 10px"}).appendTo(e)},c.prototype._updateImagePalette=function(){gDesigner.stats("image_update_palette");var e=this._image.getImage()||this._image.getImageCanvas(),t=this._panel.find('[data-image-palette="palette"]');t.empty();var n=function(e){$("<div></div>").gPatternTarget({allowDrop:!1}).gPatternTarget("types",[o.GColor]).gPatternTarget("value",e).css({display:"inline-block",height:"100%",width:"12.5%",background:o.GPattern.asCSSBackground(e)}).appendTo(t)}.bind(this);if(e){t.css("display",""),this._panel.find('[data-image-palette="button"]').prop("disabled",!0);var a=new i,r=null;try{r=a.getColor(e)}catch(e){console.warn("Cannot extract image palette")}var s=r?new o.GRGBColor(r):o.GRGBColor.BLACK;n(s);var l=null;try{l=a.getPalette(e,16)}catch(e){console.warn("Cannot extract image palette")}var c=1;if(l)for(var d=0;d<l.length;++d){var u=new o.GRGBColor(l[d]);if(!o.GUtil.equals(u,s)&&(n(u),++c>=8))break}}},c.prototype.update=function(e,t){if(this._document&&(this._document.getScene().removeEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document.getScene().removeEventListener(o.GImage.StatusEvent,this._imageStatus,this),this._document.getScene().removeEventListener(o.GImage.ConvertStatusEvent,this._imageConvertStatus,this),this._document=null),this._image=null,e){for(var n=0;n<t.length;++n)if(t[n]instanceof o.GImage){if(this._image){this._image=null;break}this._image=t[n]}if(this._image)return this._document=e,this._document.getScene().addEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document.getScene().addEventListener(o.GImage.StatusEvent,this._imageStatus,this),this._document.getScene().addEventListener(o.GImage.ConvertStatusEvent,this._imageConvertStatus,this),this._updateProperties(),!0}return this._controls.find(".g-image-convert-status").css("display","none"),!1},c.prototype._afterPropertiesChange=function(e){!e.temporary&&this._image&&this._image===e.node&&this._updateProperties()},c.prototype._imageStatus=function(e){e.image!==this._image||e.status!==o.GImage.ImageStatus.Error&&e.status!==o.GImage.ImageStatus.Loaded||this._updateProperties()},c.prototype._imageConvertStatus=function(e){this._updateConvertStatus(e.status)},c.prototype._updateConvertStatus=function(e){var t;switch(e){case o.GImage.ConvertStatus.Checking:t=o.GLocale.get(new o.GLocaleKey("GImageProperties","text.check-profile"))+"...";break;case o.GImage.ConvertStatus.Converting:t=o.GLocale.get(new o.GLocaleKey("GImageProperties","text.loading-profile"))+"..."}t&&this._controls.find(".g-image-convert-status > span").text(t),this._controls.find(".g-image-convert-status").css("display",t?"":"none")},c.prototype._updateProperties=function(){this._image.getProperty("url"),this._image.getStatus();var e=this._image.isReady(),t=this._image.getGeometryBBox(),n=t?t.getWidth():0,i=t?t.getHeight():0,a=this._image.getWidth(),r=this._image.getHeight();if(gDesigner.getActiveDocument()){var s=gDesigner.getActiveDocument().getEditor().hasSelectionDetail();this._panel.find('button[data-action="reset-size"]').prop("disabled",!e||o.GMath.isEqualEps(a,n)&&o.GMath.isEqualEps(r,i)),this._panel.find('button[data-action="handle-crop"]').data("no-crop",s),this._panel.find(".crop-label").text(o.GLocale.get(new o.GLocaleKey("GImageProperties",s?"action.no-crop":"action.crop"))),this._panel.find('[data-image-palette="button"]').prop("disabled",!e).css("display",""),this._panel.find('[data-image-palette="palette"]').css("display","none"),this._updateConvertStatus(this._image.getConvertStatus())}},c.prototype.toString=function(){return"[Object GImageProperties]"},e.exports=c},function(e,t){e.exports=function(){var e=function(){},t=function(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=e.width,this.height=this.canvas.height=e.height,this.context.drawImage(e,0,0,this.width,this.height)};t.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},t.prototype.update=function(e){this.context.putImageData(e,0,0)},t.prototype.getPixelCount=function(){return this.width*this.height},t.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},t.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)};var n={map:function(e,t){var n={};return t?e.map((function(e,o){return n.index=o,t.call(n,e)})):e.slice()},naturalOrder:function(e,t){return e<t?-1:e>t?1:0},sum:function(e,t){var n={};return e.reduce(t?function(e,o,i){return n.index=i,e+t.call(n,o)}:function(e,t){return e+t},0)},max:function(e,t){return Math.max.apply(null,t?n.map(e,t):e)}},o=function(){function e(e,t,n){return(e<<2*l)+(t<<l)+n}function t(e){function t(){n.sort(e),o=!0}var n=[],o=!1;return{push:function(e){n.push(e),o=!1},peek:function(e){return o||t(),void 0===e&&(e=n.length-1),n[e]},pop:function(){return o||t(),n.pop()},size:function(){return n.length},map:function(e){return n.map(e)},debug:function(){return o||t(),n}}}function o(e,t,n,o,i,a,r){var s=this;s.r1=e,s.r2=t,s.g1=n,s.g2=o,s.b1=i,s.b2=a,s.histo=r}function i(){this.vboxes=new t((function(e,t){return n.naturalOrder(e.vbox.count()*e.vbox.volume(),t.vbox.count()*t.vbox.volume())}))}function a(t){var n,o,i,a,r=new Array(1<<3*l);return t.forEach((function(t){o=t[0]>>c,i=t[1]>>c,a=t[2]>>c,n=e(o,i,a),r[n]=(r[n]||0)+1})),r}function r(e,t){var n,i,a,r=1e6,s=0,l=1e6,d=0,u=1e6,p=0;return e.forEach((function(e){n=e[0]>>c,i=e[1]>>c,a=e[2]>>c,n<r?r=n:n>s&&(s=n),i<l?l=i:i>d&&(d=i),a<u?u=a:a>p&&(p=a)})),new o(r,s,l,d,u,p,t)}function s(t,o){if(o.count()){var i=o.r2-o.r1+1,a=o.g2-o.g1+1,r=o.b2-o.b1+1,s=n.max([i,a,r]);if(1==o.count())return[o.copy()];var l,c,d,u,p=0,g=[],h=[];if(s==i)for(l=o.r1;l<=o.r2;l++){for(u=0,c=o.g1;c<=o.g2;c++)for(d=o.b1;d<=o.b2;d++)u+=t[e(l,c,d)]||0;p+=u,g[l]=p}else if(s==a)for(l=o.g1;l<=o.g2;l++){for(u=0,c=o.r1;c<=o.r2;c++)for(d=o.b1;d<=o.b2;d++)u+=t[e(c,l,d)]||0;p+=u,g[l]=p}else for(l=o.b1;l<=o.b2;l++){for(u=0,c=o.r1;c<=o.r2;c++)for(d=o.g1;d<=o.g2;d++)u+=t[e(c,d,l)]||0;p+=u,g[l]=p}return g.forEach((function(e,t){h[t]=p-e})),function(e){var t,n,i,a,r,s=e+"1",c=e+"2",d=0;for(l=o[s];l<=o[c];l++)if(g[l]>p/2){for(i=o.copy(),a=o.copy(),r=(t=l-o[s])<=(n=o[c]-l)?Math.min(o[c]-1,~~(l+n/2)):Math.max(o[s],~~(l-1-t/2));!g[r];)r++;for(d=h[r];!d&&g[r-1];)d=h[--r];return i[c]=r,a[s]=i[c]+1,[i,a]}}(s==i?"r":s==a?"g":"b")}}var l=5,c=8-l,d=1e3,u=.75;return o.prototype={volume:function(e){var t=this;return t._volume&&!e||(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume},count:function(t){var n=this,o=n.histo;if(!n._count_set||t){var i,a,r,s=0;for(i=n.r1;i<=n.r2;i++)for(a=n.g1;a<=n.g2;a++)for(r=n.b1;r<=n.b2;r++)s+=o[e(i,a,r)]||0;n._count=s,n._count_set=!0}return n._count},copy:function(){var e=this;return new o(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,e.histo)},avg:function(t){var n=this,o=n.histo;if(!n._avg||t){var i,a,r,s,c=0,d=1<<8-l,u=0,p=0,g=0;for(a=n.r1;a<=n.r2;a++)for(r=n.g1;r<=n.g2;r++)for(s=n.b1;s<=n.b2;s++)c+=i=o[e(a,r,s)]||0,u+=i*(a+.5)*d,p+=i*(r+.5)*d,g+=i*(s+.5)*d;n._avg=c?[~~(u/c),~~(p/c),~~(g/c)]:[~~(d*(n.r1+n.r2+1)/2),~~(d*(n.g1+n.g2+1)/2),~~(d*(n.b1+n.b2+1)/2)]}return n._avg},contains:function(e){var t=this,n=e[0]>>c,o=e[1]>>c,i=e[2]>>c;return n>=t.r1&&n<=t.r2&&o>=t.g1&&o<=t.g2&&i>=t.b1&&i<=t.b2}},i.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map((function(e){return e.color}))},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,n=0;n<t.size();n++)if(t.peek(n).vbox.contains(e))return t.peek(n).color;return this.nearest(e)},nearest:function(e){for(var t,n,o,i=this.vboxes,a=0;a<i.size();a++)((n=Math.sqrt(Math.pow(e[0]-i.peek(a).color[0],2)+Math.pow(e[1]-i.peek(a).color[1],2)+Math.pow(e[2]-i.peek(a).color[2],2)))<t||void 0===t)&&(t=n,o=i.peek(a).color);return o},forcebw:function(){var e=this.vboxes;e.sort((function(e,t){return n.naturalOrder(n.sum(e.color),n.sum(t.color))}));var t=e[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(e[0].color=[0,0,0]);var o=e.length-1,i=e[o].color;i[0]>251&&i[1]>251&&i[2]>251&&(e[o].color=[255,255,255])}},{quantize:function(e,o){function l(e,t){for(var n,o=1,i=0;i<d;)if((n=e.pop()).count()){var a=s(c,n),r=a[0],l=a[1];if(!r)return;if(e.push(r),l&&(e.push(l),o++),o>=t)return;if(i++>d)return}else e.push(n),i++}if(!e.length||o<2||o>256)return!1;var c=a(e);c.forEach((function(){0}));var p=r(e,c),g=new t((function(e,t){return n.naturalOrder(e.count(),t.count())}));g.push(p),l(g,u*o);for(var h=new t((function(e,t){return n.naturalOrder(e.count()*e.volume(),t.count()*t.volume())}));g.size();)h.push(g.pop());l(h,o-h.size());for(var f=new i;h.size();)f.push(h.pop());return f}}}();return e.prototype.getColor=function(e,t){return this.getPalette(e,5,t)[0]},e.prototype.getPalette=function(e,n,i){(void 0===n||n<2||n>256)&&(n=10),(void 0===i||i<1)&&(i=10);for(var a,r,s,l,c=new t(e),d=c.getImageData().data,u=c.getPixelCount(),p=[],g=0;g<u;g+=i)r=d[(a=4*g)+0],s=d[a+1],l=d[a+2],d[a+3]>=125&&(r>250&&s>250&&l>250||p.push([r,s,l]));var h=o.quantize(p,n),f=h?h.palette():null;return c.removeCanvas(),f},e.prototype.getColorFromUrl=function(e,t,n){sourceImage=document.createElement("img");var o=this;sourceImage.addEventListener("load",(function(){t(o.getPalette(sourceImage,5,n)[0],e)})),sourceImage.src=e},e.prototype.getImageData=function(e,t){xhr=new XMLHttpRequest,xhr.open("GET",e,!0),xhr.responseType="arraybuffer",xhr.onload=function(e){if(200==this.status){uInt8Array=new Uint8Array(this.response),n=uInt8Array.length,binaryString=new Array(n);for(var n=0;n<uInt8Array.length;n++)binaryString[n]=String.fromCharCode(uInt8Array[n]);data=binaryString.join(""),base64=window.btoa(data),t("data:image/png;base64,"+base64)}},xhr.send()},e.prototype.getColorAsync=function(e,t,n){var o=this;this.getImageData(e,(function(e){sourceImage=document.createElement("img"),sourceImage.addEventListener("load",(function(){t(o.getPalette(sourceImage,5,n)[0],this)})),sourceImage.src=e}))},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cropImage=function(e,t){if(!(e instanceof o.GImage))return;t&&a.GEditor.tryRunTransaction(e,(function(){var t=e.getImageTransform();e.setProperties(["trf","ut","tl_sx"],[t,!0,0])}),o.GLocale.get(new o.GLocaleKey("GImageProperties","action.reset-cropping")));var n=gDesigner.getToolManager();n.getActiveTool()instanceof a.GSubSelectTool?(n.activateTool(a.GPointerTool,null,!0),n.getActiveTool().setEditMode(a.GSelectTool.EditMode.Select)):n.activateTool(a.GSubSelectTool,null,!0)},t.replaceImage=function(e,t){if(!(e instanceof o.GImage))return;var n=n||t.getStorage()||gDesigner.getDefaultStorage();if(n&&n.canPromptOpen()){const t=[{ext:"png",mime:"image/png"},{ext:"jpg",mime:"image/jpeg"},{ext:"jpeg",mime:"image/jpeg"},{ext:"gif",mime:"image/gif"}];n.openPrompt(t,t=>{t.read(t=>{var n=new Blob([t]);if(n.size>i.GPlatform.maxPngDataSize)new r(o.GLocale.get(new o.GLocaleKey("GDocument","text.image-too-big"))).open();else{var s=new FileReader;s.onload=()=>{var t=s.result;if(t.length>i.GPlatform.maxImgDataUrlLength)new r(o.GLocale.get(new o.GLocaleKey("GDocument","text.image-too-big"))).open();else{var n=new Image;n.onload=()=>{if(n.naturalHeight>i.GPlatform.maxImgLinearDimension||n.naturalWidth>i.GPlatform.maxImgLinearDimension||n.naturalWidth*n.naturalHeight>i.GPlatform.maxImgAreaDots)new r(o.GLocale.get(new o.GLocaleKey("GDocument","text.image-too-big"))).open();else{var s=gDesigner.getToolManager();s.activateTool(a.GPointerTool),s.getActiveTool()instanceof a.GSelectTool&&s.getActiveTool().setEditMode(a.GSelectTool.EditMode.Select);var l=e.getGeometryBBox(),c=(new o.GTransform).translated(l.getX(),l.getY());a.GEditor.tryRunTransaction(e,()=>{e.setProperties(["url","iw","ih","itrf"],[t,n.naturalWidth,n.naturalHeight,c])},o.GLocale.get(new o.GLocaleKey("GImageProperties","action.replace-image"))),s.getActiveTool()instanceof a.GSelectTool&&s.getActiveTool().setEditMode(a.GSelectTool.EditMode.Edit)}},n.src=t}},s.onerror=function(){new r(o.GLocale.get(new o.GLocaleKey("GDocument","text.image-too-big"))).open()},s.readAsDataURL(n)}})},!1)}},t.setOriginSize=function(e){if(!(e instanceof o.GImage))return;a.GEditor.tryRunTransaction(e,(function(){var t=e.getGeometryBBox(),n=t?t.getX():0,i=t?t.getY():0,a=(new o.GTransform).translated(n,i);e.setProperties(["trf","itrf","pw","ph"],[a,a,e.getWidth(),e.getHeight()])}),o.GLocale.get(new o.GLocaleKey("GImageProperties","action.reset-size")))};var o=n(1),i=n(13),a=n(45),r=(n(1243),n(115),n(162),n(205))},function(e,t,n){"use strict";n(3),n(28);var o=n(1),i=n(45),a=n(342),r=n(61),s=n(115),l=(n(162),n(125));function c(){this._pathes=[]}o.GObject.inherit(c,s),c.prototype._panel=null,c.prototype._document=null,c.prototype._pathes=null,c.prototype._points=null,c.prototype.init=function(e,t){this._panel=e;const n=e=>{const t=this._getTargetNodeType($(e.target));this.assignNodeType(t)};var i=function(e){var t=this;if("x"===e||"y"===e)return $("<div/>").append($("<input>").attr("type","text").attr("data-point-property",e).on("change",(function(n){var o=t._document.getScene().stringToPoint($(this).val());"x"===e?gDesigner.stats("pathproperties_modify_x"):gDesigner.stats("pathproperties_modify_y"),null!==o&&"number"==typeof o?t._assignPointProperty(e,o):t._updatePointProperties()})).gInputBox()).gInputLabel({label:e});if("tp"===e)return $("<select></select>").attr("data-point-property",e).append($("<option></option>").attr("value","-").text(o.GLocale.get(new o.GLocaleKey("GPathProperties","text.straight")))).append($("<option></option>").attr("value",o.GPathBase.AnchorPoint.Type.Mirror).text(o.GLocale.get(new o.GLocaleKey("GPathBase","anchor-point.mirror")))).append($("<option></option>").attr("value",o.GPathBase.AnchorPoint.Type.Asymmetric).text(o.GLocale.get(new o.GLocaleKey("GPathBase","anchor-point.asymmetric")))).append($("<option></option>").attr("value",o.GPathBase.AnchorPoint.Type.Symmetric).text(o.GLocale.get(new o.GLocaleKey("GPathBase","anchor-point.symmetric")))).append($("<option></option>").attr("value",o.GPathBase.AnchorPoint.Type.Connector).text(o.GLocale.get(new o.GLocaleKey("GPathBase","anchor-point.connector")))).on("change",(function(e){n(e)}));if("ctp"===e)return $("<span></span>").addClass("clickable").addClass("g-button").addClass("corner-type").attr("data-point-property",e).gCornerTypePicker().on("cornertypechange",(function(e,n){t._assignPointProperty("tp",n)}));if("cu"===e)return $("<button></button>").addClass("g-flat").attr("data-point-property",e).on("click",(function(){gDesigner.stats("pathproperties_modify_uniform"),t._assignPointProperty(e,!$(this).hasClass("g-active")),t._updatePointProperties()})).append($("<span></span>").addClass("gravit-icon-lock").css("font-size","10px"));if("cl-slider"===e)return $("<div/>").attr("data-point-property","cl").gInputSlider({min:0,max:100,richTooltipConfig:r.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.corner-radius-slider-tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.corner-radius-slider-tooltip-description"))})}).on("mousedown",(function(){t._document.getEditor().hideSelection(),$(document).one("mouseup",(function(){t._document.getEditor().resetHideSelection()}))})).on("input",(function(){for(var e=t._document.getScene().stringToPoint($(this).gInputSlider("value")),n=0;n<t._points.length;++n)t._points[n].setProperty("cl",e,!1,!1,!0);t._panel.find('[type="text"][data-point-property="cl"]').gInputBox("value",t._document.getScene().pointToString(e,t._document.getScene().getOptimalDecimalsCount()))})).on("change",(function(){var e=t._document.getScene().stringToPoint($(this).gInputSlider("value"));gDesigner.stats("pathproperties_modify_corner"),t._assignPointProperty("cl",e)}));if("cl-input"===e)return $("<input>").attr("type","text").attr("data-point-property","cl").addClass("corner-radius").on("change",(function(){var e=t._document.getScene().stringToPoint($(this).val());null!==e&&"number"==typeof e&&e>=0?(gDesigner.stats("pathproperties_modify_corner"),t._assignPointProperty("cl",e)):t._updatePointProperties()})).gInputBox({minValue:0});throw new Error("Unknown input property: "+e)}.bind(this);$("<div></div>").attr("path-only",!0).gPropertyRow({columns:[{width:"40%",content:$("<label></label>").addClass("g-checkbox-label").append($("<input>").addClass("closed-checkbox").attr("type","checkbox").attr("data-path-property","closed").on("change",function(e){$(e.target).is(":checked")||this._setBorderAlignmentCenter(),gDesigner.stats("pathproperties_modify_closed"),this._assignPathProperty("closed",$(e.target).is(":checked"))}.bind(this))).append($("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GPathProperties","text.closed"))))},{width:"60%",content:$("<label></label>").addClass("g-checkbox-label").append($("<input>").addClass("csc-checkbox").attr("type","checkbox").attr("data-path-property","csc").on("change",function(e){gDesigner.stats("pathproperties_modify_autoscale"),this._assignPathProperty("csc",$(e.target).is(":checked"))}.bind(this))).append($("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GCommonNames","text.autoscale-corners"))))}]}).appendTo(this._panel),$("<div></div>").addClass("position-row").attr("point-only",!0).gPropertyRow({label:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.position")),columns:[{width:"32%",content:i("x")},{width:"32%",content:i("y")},{width:"auto",content:i("tp")}]}).appendTo(e),$("<div></div>").addClass(a.PATHPROPERTIES.PATH_JOIN_CLASS).addClass("joint-row").attr("point-only",!0).gPropertyRow({label:o.GLocale.get(new o.GLocaleKey("GPathProperties","text.joint")),columns:[{width:"25%",padding:!1,content:$("<button></button>").addClass("g-button").css({borderRadius:"0px",borderTopLeftRadius:"3px",borderBottomLeftRadius:"3px"}).attr("data-node-type","-").attr("data-title",o.GLocale.get(new o.GLocaleKey("GPathProperties","text.straight"))).append($("<span></span>").addClass("gravit-icon-node-straight")).on("click",n)},{width:"25%",padding:!1,content:$("<button></button>").addClass("g-button").css({borderRadius:"0px"}).attr("data-node-type",o.GPathBase.AnchorPoint.Type.Mirror).attr("data-title",o.GLocale.get(new o.GLocaleKey("GPathBase","anchor-point.mirror"))).append($("<span></span>").addClass("gravit-icon-node-mirrored")).on("click",n)},{width:"25%",padding:!1,content:$("<button></button>").addClass("g-button").css({borderRadius:"0px"}).attr("data-node-type",o.GPathBase.AnchorPoint.Type.Asymmetric).attr("data-title",o.GLocale.get(new o.GLocaleKey("GPathBase","anchor-point.asymmetric"))).append($("<span></span>").addClass("gravit-icon-node-disconnected")).on("click",n)},{width:"25%",padding:!1,content:$("<button></button>").addClass("g-button").css({borderRadius:"0px",borderTopRightRadius:"3px",borderBottomRightRadius:"3px"}).attr("data-node-type",o.GPathBase.AnchorPoint.Type.Symmetric).attr("data-title",o.GLocale.get(new o.GLocaleKey("GPathBase","anchor-point.symmetric"))).append($("<span></span>").addClass("gravit-icon-node-assymetric")).on("click",n)}]}).addClass("joint").appendTo(this._panel),$("<hr/>").attr("point-only",!0).attr("corner-only",!0).appendTo(e),$("<div></div>").attr("point-only",!0).attr("corner-only",!0).addClass("path-corner-chooser").gPropertyRow({label:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.corner")),columns:[{width:"auto",content:i("cl-slider")},{clazz:"corners-radius-no-padding"},{width:"35px",content:i("cl-input")},{width:"3x"},{width:"40px",content:i("ctp")}]}).addClass("corner-radius").appendTo(this._panel)},c.prototype.update=function(e,t){if(gDesigner.isTouchEnabled()?(this._panel.find(".closed-checkbox").gCheckboxSlider(),this._panel.find(".csc-checkbox").gCheckboxSlider()):(this._panel.find(".closed-checkbox").gCheckboxSlider("unmount"),this._panel.find(".csc-checkbox").gCheckboxSlider("unmount")),this._document&&(this._document.getScene().removeEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange),this._document.getScene().removeEventListener(o.GElement.AfterFlagChangeEvent,this._afterFlagChange),this._document.getEditor().removeEventListener(i.GEditor.EdGeometryChangeEvent,this._edGeometryChange,this),gDesigner.removeEventListener(l,this._settingChanged),this._document=null),this._pathes=[],this._points=[],e){for(var n=0;n<t.length;++n)if(t[n]instanceof o.GPath||t[n]instanceof o.GCompoundPath){var a=t[n];this._pathes.push(a);var r=function(e){for(var t=e.getAnchorPoints().getFirstChild();null!==t;t=t.getNext())t.hasFlag(o.GNode.Flag.Selected)&&(this._points.push(t),1==this._points.legth&&(this._mainPath=e))}.bind(this);if(a instanceof o.GPath)r(a);else for(var s=a.getPaths().getFirstChild();null!==s;s=s.getNext())r(s)}if(this._pathes.length&&this._pathes.length===t.length)return this._document=e,this._document.getScene().addEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document.getScene().addEventListener(o.GElement.AfterFlagChangeEvent,this._afterFlagChange,this),this._document.getEditor().addEventListener(i.GEditor.EdGeometryChangeEvent,this._edGeometryChange,this),gDesigner.addEventListener(l,this._settingChanged,this),this._updatePathProperties(),this._updatePointProperties(),!0}return!1},c.prototype._getTargetNodeType=function(e){return e.is("select")?e.val():e.closest("[data-node-type]").attr("data-node-type")},c.prototype._getStatsNodeType=function(e){switch(e){case o.GPathBase.AnchorPoint.Type.Mirror:return"Mirror";case o.GPathBase.AnchorPoint.Type.Asymmetric:return"Asymmetric";case o.GPathBase.AnchorPoint.Type.Symmetric:return"Symmetric";case o.GPathBase.AnchorPoint.Type.Connector:return"Connector";default:return"Straight"}},c.prototype.assignNodeType=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-";gDesigner.stats("pathproperties_assign_nodetype",this._getStatsNodeType(e));const t=this._document,n=t&&t.getEditor();if(n){n.beginTransaction();try{let t=null,i=null;"-"===e&&(t=["tp","hlx","hly","hrx","hry","ah"],i=[o.GPathBase.CornerType.Rounded,null,null,null,null,!1]),this._points.forEach(n=>{if("-"!==e&&(t=["ah","tp"],i=[!1,e],null===n.getProperty("hlx")&&null===n.getProperty("hrx"))){const a=n.getParent().getPreviousPoint(n),r=a?a.getProperty("hrx"):null,s=n.getParent().getNextPoint(n),l=s?s.getProperty("hlx"):null;if(e!=o.GPathBase.AnchorPoint.Type.Asymmetric||null!==r||null!==l)i[0]=!0;else{const e=n.getProperty("x"),r=n.getProperty("y");if(a&&a.getProperty("tp")!=o.GPathBase.AnchorPoint.Type.Connector){const n=a.getProperty("x"),s=a.getProperty("y");if(!o.GMath.isEqualEps(e,n)||!o.GMath.isEqualEps(r,s)){const a=e+(n-e)*o.GPathBase.AnchorPoint.HANDLE_COEFF,l=r+(s-r)*o.GPathBase.AnchorPoint.HANDLE_COEFF;t.push("hlx"),t.push("hly"),i.push(a),i.push(l)}}if(s&&s.getProperty("tp")!=o.GPathBase.AnchorPoint.Type.Connector){const n=s.getProperty("x"),a=s.getProperty("y");if(!o.GMath.isEqualEps(e,n)||!o.GMath.isEqualEps(r,a)){const s=e+(n-e)*o.GPathBase.AnchorPoint.HANDLE_COEFF,l=r+(a-r)*o.GPathBase.AnchorPoint.HANDLE_COEFF;t.push("hrx"),t.push("hry"),i.push(s),i.push(l)}}}}n.setProperties(t,i);let a=n.getProperty("tp");const r=n.getProperty("ah");a==o.GPathBase.AnchorPoint.Type.Mirror&&r&&n.setProperty("ah",!1)})}finally{n.commitTransaction(o.GLocale.get(new o.GLocaleKey("GPathProperties","action.modify-path-node-type")))}}},c.prototype._afterPropertiesChange=function(e){e.temporary||(this._pathes.length>0&&this._pathes[0]===e.node&&this._updatePathProperties(),this._points.length>0&&this._points[0]===e.node&&this._updatePointProperties())},c.prototype._afterFlagChange=function(e){if(e.flag===o.GNode.Flag.Selected&&e.node instanceof o.GPathBase.AnchorPoint){var t=e.node.getParent()?e.node.getParent().getParent():null,n=t&&t.getParent()&&t.getParent().getParent()?t.getParent().getParent():null;(t&&this._pathes.indexOf(t)>=0||n&&this._pathes.indexOf(n)>=0)&&(e.set?this._points.push(e.node):this._points.splice(this._points.indexOf(e.node),1),this._updatePathProperties(),this._updatePointProperties())}},c.prototype._edGeometryChange=function(e){this._updatePointProperties()},c.prototype._updatePathProperties=function(){if(this._points.length)this._panel.find("[path-only]").css("display","none");else{this._panel.find("[path-only]").css("display","");var e=this._pathes[0];e instanceof o.GPath?(this._panel.find('input[data-path-property="closed"]').prop("disabled",!1).prop("checked",e.getProperty("closed")),this._panel.find('input[data-path-property="csc"]').prop("disabled",!1).prop("checked",!!e.getProperty("csc"))):(this._panel.find('input[data-path-property="closed"]').prop("disabled",!0).prop("checked",!1),this._panel.find('input[data-path-property="csc"]').prop("disabled",!1).prop("checked",!!e.getProperty("csc")))}},c.prototype._settingChanged=function(e){"decimals_num"===e.key&&this._updatePointProperties()},c.prototype._updatePointProperties=function(){var e=this._points.length>0?this._points[0]:null;if(e){this._panel.find("[point-only]").css("display","");var t=this._getPointCoord(e);this._panel.find('input[data-point-property="x"]').val(this._document.getScene().pointToString(t.getX(),this._document.getScene().getOptimalDecimalsCount())),this._panel.find('input[data-point-property="y"]').val(this._document.getScene().pointToString(t.getY(),this._document.getScene().getOptimalDecimalsCount()));var n=!0,i=e.getProperty("tp");for(var a in o.GPathBase.AnchorPoint.Type)if(o.GPathBase.AnchorPoint.Type[a]===i){n=!1;break}var r=n?"-":i;this._panel.find('select[data-point-property="tp"]').val(r),this._panel.find("[data-node-type]").each((function(e,t){var n=$(t);n.toggleClass("g-active",n.attr("data-node-type")===r)})),this._panel.find("[corner-only]").css("display",n?"":"none"),this._panel.find('[data-point-property="ctp"]').css("display",n?"":"none").gCornerTypePicker("value",n?i:o.GPathBase.CornerType.Rounded),this._panel.find('div[data-point-property="cl"]').prop("disabled",!n).gInputSlider("value",this._document.getScene().pointToString(e.getProperty("cl"),this._document.getScene().getOptimalDecimalsCount())),this._panel.find('input[data-point-property="cl"]').prop("disabled",!n).val(this._document.getScene().pointToString(e.getProperty("cl"),this._document.getScene().getOptimalDecimalsCount())),this._panel.find('input[data-point-property="cr"]').prop("disabled",!n||e.getProperty("cu")).val(this._document.getScene().pointToString(e.getProperty("cr"),this._document.getScene().getOptimalDecimalsCount())),this._panel.find('button[data-point-property="cu"]').prop("disabled",!n).toggleClass("g-active",!!e.getProperty("cu"))}else this._panel.find("[point-only]").css("display","none")},c.prototype._getPointCoord=function(e){var t,n,a=e.getPath();a&&(t=i.GElementEditor.getEditor(a))?(t.getPaintElement()!=a&&(e=t.getPathPointPreview(e)),n=t.getPointCoord(e)):n=new o.GPoint(e.getProperty("x"),e.getProperty("y"));return n},c.prototype._transformPoint=function(e,t,n){t&&(n=t.mapPoint(n));var o=e.getPath(),a=i.GElementEditor.getEditor(o);a?a.movePoint(e,n):e.setProperties(["x","y"],[n.getX(),n.getY()])},c.prototype._assignPathProperty=function(e,t){this._assignPathProperties([e],[t])},c.prototype._assignPathProperties=function(e,t){var n=this._document.getEditor();n.beginTransaction();try{for(var i=0;i<this._pathes.length;++i)this._pathes[i].setProperties(e,t)}finally{n.commitTransaction(o.GLocale.get(new o.GLocaleKey("GPathProperties","action.modify-path-properties")))}},c.prototype._setBorderAlignmentCenter=function(){var e,t,n=["_ba"],i=[o.GStylable.BorderAlignment.Center],a=this._document.getEditor();a.beginTransaction();try{for(var r=0,s=this._pathes.length;r<s;++r){e=this._pathes[r].getPaintLayers().getBorderLayers();for(var l=0,c=e.length;l<c;l++)(t=e[l])instanceof o.GStylable.BorderPaintLayer&&t.setProperties(n,i)}}finally{a.commitTransaction(o.GLocale.get(new o.GLocaleKey("GPathProperties","action.modify-path-properties")))}},c.prototype._assignPointProperty=function(e,t){var n=this._document.getEditor();n.beginTransaction();try{for(var i=0;i<this._points.length;++i){var a=this._points[i];if("x"===e){var r=this._getPointCoord(a),s=new o.GTransform(1,0,0,1,t-r.getX(),0);this._transformPoint(a,s,r)}else if("y"===e){r=this._getPointCoord(a),s=new o.GTransform(1,0,0,1,0,t-r.getY());this._transformPoint(a,s,r)}else a.setProperties([e],[t])}}finally{n.commitTransaction(o.GLocale.get(new o.GLocaleKey("GPathProperties","action.modify-point-properties")))}},c.prototype._assignPointProperties=function(e,t){gDesigner.stats("pathproperties_modify_point-properties");var n=this._document.getEditor();n.beginTransaction();try{for(var i=0;i<this._points.length;++i)this._points[i].setProperties(e,t)}finally{n.commitTransaction(o.GLocale.get(new o.GLocaleKey("GPathProperties","action.modify-point-properties")))}},c.prototype.toString=function(){return"[Object GPathProperties]"},e.exports=c},function(e,t,n){"use strict";n(51),n(3);var o=n(1),i=n(61),a=n(115),r=(n(162),n(125));function s(){this._polygons=[]}o.GObject.inherit(s,a),s.prototype._panel=null,s.prototype._advancedPanel=null,s.prototype._document=null,s.prototype._polygons=null,s.prototype.init=function(e,t){this._panel=e;var n=this,a=function(e){if("ir"===e||"or"===e)return $("<input>").addClass("radius-input-"+e).attr("type","text").attr("data-property",e).on("change",(function(){gDesigner.stats("polygonproperties_change_radius");var t=n._document.getScene().stringToPoint($(this).val());null!==t&&"number"==typeof t&&t>=0?n._assignProperty(e,t,o.GLocale.get(new o.GLocaleKey("GPolygonProperties","action.change-radius"))):n._updateProperties()})).gInputBox();if("ia"===e||"oa"===e)return $("<input>").addClass("angle-input-"+e).attr("type","text").attr("data-property",e).on("change",(function(){gDesigner.stats("polygonproperties_change_angle");var t=o.GLength.parseEquationValue($(this).val());null!==t?(t=o.GMath.normalizeAngleRadians(o.GMath.toRadians(t)),n._assignProperty(e,o.GMath.PI2-t,o.GLocale.get(new o.GLocaleKey("GPolygonProperties","action.change-angle")))):n._updateProperties()})).gInputBox({fixedIncrement:!0});if("ict"===e||"oct"===e)return $("<button></button>").addClass("g-flat").attr("data-property",e).gCornerTypePicker().on("cornertypechange",(function(t,i){n._assignProperty(e,i,o.GLocale.get(new o.GLocaleKey("GPolygonProperties","action.change-corner-type")))}));if("icr"===e||"ocr"===e)return $("<input>").attr("type","text").attr("data-property",e).on("change",(function(t){gDesigner.stats("polygonproperties_change_corner-radius");var i=n._document.getScene().stringToPoint($(this).val());null!==i&&"number"==typeof i&&i>=0?n._assignProperty(e,i<0?0:i,o.GLocale.get(new o.GLocaleKey("GPolygonProperties","action.change-corner-radius"))):n._updateProperties()})).gInputBox();if("corners-type"!==e){if("corners-radius-slider"===e)return $("<div/>").attr("data-property","corners-radius-slider").gInputSlider({min:0,max:100,richTooltipConfig:i.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.corner-radius-slider-tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.corner-radius-slider-tooltip-description"))})}).on("mousedown",(function(){n._document.getEditor().hideSelection(),$(document).one("mouseup",(function(){n._document.getEditor().resetHideSelection()}))})).on("input",(function(){var e=n._assignCornersRadius(parseInt($(this).gInputSlider("value"))/100,!0);n._panel.find('[data-property="corners-radius"]').val(n._document.getScene().pointToString(e,n._document.getScene().getOptimalDecimalsCount()))})).on("change",(function(){gDesigner.stats("polygonproperties_change_radius"),n._assignCornersRadius(parseInt($(this).gInputSlider("value"))/100,!1)}));if("corners-radius-input"===e)return $("<input>").attr("type","text").attr("data-property","corners-radius").addClass("corner-radius").on("change",(function(){gDesigner.stats("polygonproperties_change_corners-radius");var e=n._document.getScene().stringToPoint($(this).gInputBox("value"));null!==e&&"number"==typeof e&&e>=0?n._assignCornersRadius(e,!1,!0):n._updateProperties()})).gInputBox({minValue:0,incrementValue:1});throw new Error("Unknown input property: "+e)}};$("<div></div>").gPropertyRow({label:o.GLocale.get(new o.GLocaleKey("GPolygonProperties","text.points")),columns:[{width:"auto",clazz:"point-slider-wrapper",content:$("<div/>").attr("data-property","pts").gInputSlider({min:3,max:25}).on("input",(function(){var e=$(this).gInputSlider("value");n._assignPoints(parseInt(e),!0),n._panel.find('input[type="text"][data-property="pts"]').val(e)})).on("change",(function(e){gDesigner.stats("polygonproperties_change_number-of-points"),n._assignPoints(parseInt($(this).gInputSlider("value")),!1)}))},{width:"40px",content:$("<input>").attr("type","text").attr("data-property","pts").on("change",(function(e){gDesigner.stats("polygonproperties_change_number-of-points"),n._assignPoints(o.GLength.parseEquationValue($(this).gInputBox("value")),!1)})).gInputBox({minValue:3})}]}).appendTo(this._panel),$("<div></div>").attr("data-plain-edges","false").gPropertyRow({label:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.size")),columns:[{width:"auto",clazz:"size-slider-wrapper",content:$("<div/>").attr("data-property","size").gInputSlider({min:0,max:100}).on("input",(function(){var e=parseInt($(this).gInputSlider("value"));n._assignSize(e/100,!0),n._panel.find('[type="text"][data-property="size"]').gInputBox("value",o.GUtil.formatNumber(e,0))})).on("change",(function(){gDesigner.stats("polygonproperties_change_plain-edges"),n._assignSize(parseInt($(this).gInputSlider("value"))/100,!1)}))},{width:"40px",content:$("<input>").attr("type","text").attr("data-property","size").on("change",(function(){gDesigner.stats("polygonproperties_change_plain-edges"),n._assignSize(o.GLength.parseEquationValue($(this).gInputBox("value"))/100,!1)})).gInputBox({minValue:0,maxValue:100,postfix:"%"})}]}).appendTo(this._panel),$("<hr/>").appendTo(this._panel),$("<div></div>").gPropertyRow({label:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.corner")),columns:[{width:"auto",clazz:"corners-radius-slider-wrapper",content:a("corners-radius-slider")},{clazz:"corners-radius-no-padding"},{clazz:"corners-radius-input-wrapper",content:a("corners-radius-input")},{width:"3px"},{clazz:"advanced-settings-col",content:$("<div></div>").attr("data-title",o.GLocale.get(new o.GLocaleKey("GCommonNames","text.advanced-settings"))).addClass("g-button g-icon g-advanced-setting").css({display:"flex",justifyContent:"center"}).append($("<span></span>").addClass("gravit-icon-settings").css({alignSelf:"center",lineHeight:"19px"})).on("click",function(e){gDesigner.stats("polygonproperties_click_advanced-corners"),this._advancedPanel.gOverlay("open",$(e.target).closest(".g-button")),gDesigner.isTouchEnabled()?(this._advancedPanel.find(".edges-checkbox").gCheckboxSlider(),this._advancedPanel.find(".csc-checkbox").gCheckboxSlider()):(this._advancedPanel.find(".edges-checkbox").gCheckboxSlider("unmount"),this._advancedPanel.find(".csc-checkbox").gCheckboxSlider("unmount"));var t=$('div[data-property="corners-type"]');t.gCornerTypePicker("update",t.gCornerTypePicker("value"))}.bind(this))}]}).addClass("corner-radius").appendTo(this._panel),this._advancedPanel=$("<div></div>").addClass("advanced-panel-wrapper").gOverlay({releaseOnClose:!1,clazz:"advanced-overlay"}),$("<div></div>").gPropertyRow({columns:[{width:"100%",content:$("<div/>").css("margin-bottom","10px").attr("data-property","corners-type").addClass("corner-type").gCornerTypePicker({notOverlay:!0}).on("cornertypechange",(function(e,t){n._assignProperties(["ict","oct"],[t,t],o.GLocale.get(new o.GLocaleKey("GPolygonProperties","action.change-corner-type")))}))}]}).appendTo(this._advancedPanel),$("<div></div>").addClass("g-checkbox-label-wrapper").gPropertyRow({columns:[{width:"100%",content:$("<label></label>").addClass("g-checkbox-label").append($("<input>").addClass("edges-checkbox").attr("type","checkbox").attr("data-property","edges").on("change",(function(){gDesigner.stats("polygonproperties_toggle_plain-edges",$(this).is(":checked")?"enabled":"disabled"),n._assignEdges($(this).is(":checked")),n._updateProperties()}))).append($("<span>"+o.GLocale.get(new o.GLocaleKey("GPolygonProperties","text.plain-edges"))+"</span>"))}]}).appendTo(this._advancedPanel),$("<div></div>").addClass("g-checkbox-label-wrapper").gPropertyRow({columns:[{width:"100%",content:$("<label></label>").addClass("g-checkbox-label").append($("<input>").addClass("csc-checkbox").attr("type","checkbox").attr("data-property","csc").on("change",function(e){gDesigner.stats("polygonproperties_toggle_autoscale-corners",$(e.target).is(":checked")?"enabled":"disabled"),this._assignProperty("csc",$(e.target).is(":checked"))}.bind(this))).append($("<span>"+o.GLocale.get(new o.GLocaleKey("GCommonNames","text.autoscale-corners"))+"</span>"))}]}).appendTo(this._advancedPanel),$("<div></div>").addClass("corner-row-wrapper").gPropertyRow({label:o.GLocale.get(new o.GLocaleKey("GPolygonProperties","text.corners")),columns:[{width:"50%",content:$("<div></div>").addClass("corner-wrapper").append(a("ocr")).append(a("oct")),label:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.outside"))},{width:"50%",content:$("<div></div>").addClass("corner-wrapper").append(a("icr")).append(a("ict")),label:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.inside"))}]}).appendTo(this._advancedPanel),$("<div></div>").addClass("radius-row-wrapper").gPropertyRow({label:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.radius")),columns:[{width:"50%",content:a("or"),label:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.outside"))},{width:"50%",content:a("ir"),label:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.inside"))}]}).appendTo(this._advancedPanel),$("<div></div>").addClass("angles-row-wrapper").gPropertyRow({label:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.angles")),columns:[{width:"50%",content:a("oa"),label:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.outside"))},{width:"50%",content:a("ia"),label:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.inside"))}]}).appendTo(this._advancedPanel)},s.prototype.update=function(e,t){if(this._document&&(this._document.getScene().removeEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange),gDesigner.removeEventListener(r,this._settingChanged),this._document=null),this._polygons=[],e){for(var n=0;n<t.length;++n)t[n]instanceof o.GPolygon&&this._polygons.push(t[n]);if(this._polygons.length&&this._polygons.length===t.length)return this._document=e,this._document.getScene().addEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),gDesigner.addEventListener(r,this._settingChanged,this),this._updateProperties(!0),!0}return!1},s.prototype._afterPropertiesChange=function(e){!e.temporary&&this._polygons.length>0&&this._polygons[0]===e.node&&this._updateProperties()},s.prototype._settingChanged=function(e){"decimals_num"===e.key&&this._updateProperties()},s.prototype._updateProperties=function(e){var t=this._polygons[0],n=t.getProperty("or"),i=t.getProperty("ir"),a=t.getProperty("pts"),r=i/n*100,s=t.isPlainEdges(),l=t.getProperty("ocr");this._panel.find('.g-input-slider[data-property="pts"]').gInputSlider("value",a),this._panel.find('[type="text"][data-property="pts"]').gInputBox("value",a),this._panel.find('.g-input-slider[data-property="size"]').gInputSlider("value",Math.round(r)),this._panel.find('[type="text"][data-property="size"]').gInputBox("value",o.GUtil.formatNumber(r,0)),this._advancedPanel.find('[data-property="corners-type"]').gCornerTypePicker("value",t.getProperty("oct"));var c=t.getPointsMinDistance();s||(c/=2),l=Math.min(l,c);var d=c>0?l/c*100:0;this._panel.find('[data-property="corners-radius-slider"]').gInputSlider("value",Math.round(d)),this._panel.find('[data-property="corners-radius"]').val(this._document.getScene().pointToString(t.getProperty("ocr"),this._document.getScene().getOptimalDecimalsCount())),e&&s?this._advancedPanel.find('input[data-property="edges"]').prop("checked",!0):s||this._advancedPanel.find('input[data-property="edges"]').prop("checked",!1),this._advancedPanel.find('input[data-property="csc"]').prop("checked",!!t.getProperty("csc")),this._advancedPanel.find('button[data-property="oct"]').gCornerTypePicker("value",t.getProperty("oct")),this._advancedPanel.find('button[data-property="ict"]').gCornerTypePicker("value",t.getProperty("ict")),this._advancedPanel.find('input[data-property="ocr"]').val(this._document.getScene().pointToString(t.getProperty("ocr"),this._document.getScene().getOptimalDecimalsCount())),this._advancedPanel.find('input[data-property="icr"]').val(this._document.getScene().pointToString(t.getProperty("icr"),this._document.getScene().getOptimalDecimalsCount())),this._advancedPanel.find('input[data-property="or"]').val(this._document.getScene().pointToString(t.getProperty("or"),this._document.getScene().getOptimalDecimalsCount())),this._advancedPanel.find('input[data-property="ir"]').val(this._document.getScene().pointToString(t.getProperty("ir"),this._document.getScene().getOptimalDecimalsCount())),this._advancedPanel.find('input[data-property="oa"]').val(o.GUtil.formatNumber(o.GMath.toDegrees(o.GMath.PI2-t.getProperty("oa")),2)),this._advancedPanel.find('input[data-property="ia"]').val(o.GUtil.formatNumber(o.GMath.toDegrees(o.GMath.PI2-t.getProperty("ia")),2)),this._panel.find('[data-plain-edges="false"]').css("display",this._advancedPanel.find('input[data-property="edges"]').prop("checked")?"none":"")},s.prototype._assignCornersRadius=function(e,t,n){t||this._document.getEditor().beginTransaction();var i=0;try{for(var a=0;a<this._polygons.length;++a){var r=this._polygons[a];if(r.isVisible()){var s=e;if(!n)s=e*r.getPointsMinDistance();r.isPlainEdges()?r.setProperties(["ocr"],[s],!1,!1,t):(n||(s/=2),r.setProperties(["ocr","icr"],[s,s],!1,!1,t)),0===a&&(i=s)}}}finally{t||this._document.getEditor().commitTransaction(o.GLocale.get(new o.GLocaleKey("GCommonNames","action.change-corners")))}return i},s.prototype._assignProperty=function(e,t,n){this._assignProperties([e],[t],n)},s.prototype._assignProperties=function(e,t,n){var o=this._document.getEditor();o.beginTransaction();try{for(var i=0;i<this._polygons.length;++i)this._polygons[i].setProperties(e,t)}finally{o.commitTransaction(n)}},s.prototype._assignSize=function(e,t){t||this._document.getEditor().beginTransaction();try{for(var n=0;n<this._polygons.length;++n){var i=this._polygons[n],a=i.getProperty("or")*e;i.setProperty("ir",a,!1,!1,t)}}finally{t||this._document.getEditor().commitTransaction(o.GLocale.get(new o.GLocaleKey("GPolygonProperties","action.change-polygon-size")))}},s.prototype._assignPoints=function(e,t){t||this._document.getEditor().beginTransaction();try{for(var n=0;n<this._polygons.length;++n){var i=this._polygons[n],a=i.isPlainEdges(),r=Math.PI/e,s=o.GMath.normalizeAngleRadians(i.getProperty("oa")+r);if(a){var l=i.getProperty("or")*Math.cos(r);i.setProperties(["pts","ia","ir"],[e,s,l],!1,!1,t)}else i.setProperties(["pts","ia"],[e,s],!1,!1,t)}}finally{t||this._document.getEditor().commitTransaction(o.GLocale.get(new o.GLocaleKey("GPolygonProperties","action.change-polygon-points")))}},s.prototype._assignEdges=function(e,t){if(e){t||this._document.getEditor().beginTransaction();try{for(var n=0;n<this._polygons.length;++n){var i=this._polygons[n],a=i.getProperty("or"),r=i.getProperty("pts"),s=i.getProperty("oa"),l=Math.PI/r,c=s+l,d=a*Math.cos(l);i.setProperties(["ir","ia"],[d,c],!1,!1,t)}}finally{t||this._document.getEditor().commitTransaction(o.GLocale.get(new o.GLocaleKey("GPolygonProperties","action.change-polygon-size")))}}},s.prototype.toString=function(){return"[Object GPolygonProperties]"},e.exports=s},function(e,t,n){"use strict";n(51),n(3);var o=n(1),i=n(45),a=n(61),r=n(115),s=(n(162),n(125));function l(){this._rectangles=[]}o.GObject.inherit(l,r),l.prototype._panel=null,l.prototype._advancedPanel=null,l.prototype._document=null,l.prototype._rectangles=null,l.prototype.isGroup=function(e){return!0},l.prototype.init=function(e,t){this._panel=e;var n=this,r=function(e){if("uf"===e)return $("<input>").addClass("uf-checkbox").attr("type","checkbox").attr("data-property",e).on("change",(function(){gDesigner.stats("rectangleproperties_toggle_uniform",$(this).is(":checked")?"enabled":"disabled"),n._assignProperty(e,$(this).is(":checked")),n._updateProperties()}));if("csc"===e)return $("<input>").addClass("csc-checkbox").attr("type","checkbox").attr("data-property",e).on("change",(function(){gDesigner.stats("rectangleproperties_toggle_scale-corners",$(this).is(":checked")?"enabled":"disabled"),n._assignProperty(e,$(this).is(":checked"))}));if("tl_sx"===e||"tl_sy"===e||"tr_sx"===e||"tr_sy"===e||"bl_sx"===e||"bl_sy"===e||"br_sx"===e||"br_sy"===e){var t="";return"tl_sy"!==e&&"tr_sy"!==e&&"bl_sy"!==e&&"br_sy"!==e||(t="sy-input"),$("<input>").addClass("corner-input").addClass(t).attr("type","text").attr("data-property",e).on("change",(function(){gDesigner.stats("rectangleproperties_scale_individual-corners");var t=n._document.getScene().stringToPoint($(this).val());null!==t&&"number"==typeof t&&t>=0?n._assignProperty(e,t):n._updateProperties()})).gInputBox()}if("tl_ct"===e||"tr_ct"===e||"bl_ct"===e||"br_ct"===e){var r=0,s="right";return"tl_ct"===e?(r=270,s="left"):"bl_ct"===e?(r=180,s="left"):"br_ct"===e&&(r=90),$("<button></button>").addClass("g-flat").addClass(s).attr("data-property",e).css("width","32px").gCornerTypePicker({rotate:r}).on("cornertypechange",(function(t,o){n._assignProperty(e,o)}))}if("tl_uf"===e||"tr_uf"===e||"bl_uf"===e||"br_uf"===e){var l="uf-right";return"tl_uf"!==e&&"bl_uf"!==e||(l="uf-left"),$("<button></button>").addClass("g-flat").addClass("uf-btn").addClass(l).attr("data-property",e).on("click",(function(){gDesigner.stats("rectangleproperties_toggle_individual-uniform-corners"),n._assignProperty(e,!$(this).hasClass("g-active")),n._updateProperties()})).append($("<span></span>").addClass("gravit-icon-lock"))}if("corners-type"!==e){if("corners-radius-slider"===e)return $("<div/>").attr("data-property","corners-radius").gInputSlider({min:0,max:100,richTooltipConfig:a.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.corner-radius-slider-tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.corner-radius-slider-tooltip-description")),learnMore:"https://documentation.corelvector.com/basics/shapes-paths/#advanced-corner-settings"})}).on("mousedown",(function(){n._document.getEditor().hideSelection(),$(document).one("mouseup",(function(){n._document.getEditor().resetHideSelection()}))})).on("input",(function(){var e=n._assignCorners(parseInt($(this).gInputSlider("value"))/100,void 0,!0),t=n._document.getScene().getProperty("ut"),a=(t==o.GLength.Unit.PX||t==o.GLength.Unit.PT)&&i.GGuides.options.guides&&i.GGuides.options.guides.indexOf(i.GFullPixelsGuide.ID)>=0?0:n._document.getScene().getOptimalDecimalsCount();n._panel.find('[type="text"][data-property="corners-radius"]').val(n._document.getScene().pointToString(e,a))})).on("change",(function(){gDesigner.stats("rectangleproperties_input_corners-radius"),n._assignCorners(parseInt($(this).gInputSlider("value"))/100,void 0,!1)}));if("corners-radius-input"===e)return $("<input>").attr("type","text").attr("data-property","corners-radius").addClass("corner-radius").on("change",(function(){gDesigner.stats("rectangleproperties_slide_corners-radius");var e=n._document.getScene().stringToPoint($(this).gInputBox("value"));null!==e&&"number"==typeof e&&e>=0?n._assignProperties(["uf","tl_sx"],[!0,e]):n._updateProperties()})).gInputBox({minValue:0});throw new Error("Unknown input property: "+e)}}.bind(this),s=o.GLocale.get(new o.GLocaleKey("GRectangleProperties","text.uniform-corner-smoothness")),l=o.GLocale.get(new o.GLocaleKey("GRectangleProperties","text.horizontal-corner-smoothness")),c=o.GLocale.get(new o.GLocaleKey("GRectangleProperties","text.vertical-corner-smoothness")),d=o.GLocale.get(new o.GLocaleKey("GRectangleProperties","text.corner-type"));this._advancedPanel=$("<div></div>").addClass("advanced-panel-wrapper").addClass("rectangle-properties").gOverlay({releaseOnClose:!1,clazz:"advanced-overlay"}).append($("<div/>").css("margin-bottom","10px").attr("data-property","corners-type").addClass("corner-type").gCornerTypePicker({notOverlay:!0}).on("cornertypechange",(function(e,t){n._assignCorners(void 0,t)}))).append($("<label></label>").addClass("g-checkbox-label").append(r("csc")).append($("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GCommonNames","text.autoscale-corners"))))).append($("<label></label>").addClass("g-checkbox-label").append(r("uf")).append($("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GRectangleProperties","text.uniform-corners"))))).append($("<div></div>").addClass("corners-panel").append($("<div></div>").addClass("corners-item-row with-padding").append(r("tl_ct").attr("data-title",s)).append(r("tl_sx").attr("data-title",l)).append(r("tr_sx").attr("data-title",l)).append(r("tr_ct").attr("data-title",s))).append($("<div></div>").addClass("corners-item-row with-padding").append(r("tl_sy").attr("data-title",c)).append(r("tl_uf").attr("data-title",d)).append(r("tr_uf").attr("data-title",d)).append(r("tr_sy").attr("data-title",c))).append($("<div></div>").addClass("corners-item-row with-padding").append(r("bl_sy").attr("data-title",c)).append(r("bl_uf").attr("data-title",d)).append(r("br_uf").attr("data-title",d)).append(r("br_sy").attr("data-title",c))).append($("<div></div>").addClass("corners-item-row with-padding").append(r("bl_ct").attr("data-title",s)).append(r("bl_sx").attr("data-title",l)).append(r("br_sx").attr("data-title",l)).append(r("br_ct").attr("data-title",s)))),$("<div></div>").gPropertyRow({label:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.corner")),columns:[{width:"auto",clazz:"corners-radius-slider-wrapper",content:r("corners-radius-slider")},{clazz:"corners-radius-no-padding"},{clazz:"corners-radius-input-wrapper",content:r("corners-radius-input")},{width:"3px"},{clazz:"advanced-settings-col",content:$("<div></div>").attr("data-title",o.GLocale.get(new o.GLocaleKey("GCommonNames","text.advanced-settings"))).addClass("g-button g-icon g-advanced-setting").css({display:"flex",justifyContent:"center"}).append($("<span></span>").addClass("gravit-icon-settings").css({alignSelf:"center",lineHeight:"19px"})).on("click",function(e){gDesigner.stats("rectangleproperties_open_advanced"),this._advancedPanel.gOverlay("open",$(e.target).closest(".g-button")),gDesigner.isTouchEnabled()?(this._advancedPanel.find(".uf-checkbox").gCheckboxSlider(),this._advancedPanel.find(".csc-checkbox").gCheckboxSlider()):(this._advancedPanel.find(".uf-checkbox").gCheckboxSlider("unmount"),this._advancedPanel.find(".csc-checkbox").gCheckboxSlider("unmount"));var t=$('div[data-property="corners-type"]');t.gCornerTypePicker("update",t.gCornerTypePicker("value"))}.bind(this))}]}).addClass("corner-radius").appendTo(this._panel)},l.prototype.update=function(e,t){if(this._document&&(this._document.getScene().removeEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange),gDesigner.removeEventListener(s,this._settingChanged),this._document=null),this._rectangles=[],e){for(var n=0;n<t.length;++n)t[n]instanceof o.GRectangle&&this._rectangles.push(t[n]);if(this._rectangles.length&&this._rectangles.length===t.length)return this._document=e,this._document.getScene().addEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),gDesigner.addEventListener(s,this._settingChanged,this),this._updateProperties(),!0}return!1},l.prototype._afterPropertiesChange=function(e){!e.temporary&&this._rectangles.length>0&&this._rectangles[0]===e.node&&this._updateProperties()},l.prototype._settingChanged=function(e){"decimals_num"===e.key&&this._updateProperties()},l.prototype._updateProperties=function(){var e=this._rectangles[0],t=e.getProperty("tl_sx"),n=e.getGeometryBBox(),a=this._panel.find('.g-input-slider[data-property="corners-radius"]'),r=this._panel.find('input[type="text"][data-property="corners-radius"]'),s=this._advancedPanel.find('[data-property="corners-type"]'),l=null===n;if(a.prop("disabled",l),r.prop("disabled",l),this._panel.find("button").prop("disabled",l),l)s.addClass("g-disabled");else{s.removeClass("g-disabled");var c=t/(e.getPointsMinDistance()/2)*100,d=this._document.getScene().getProperty("ut"),u=(d==o.GLength.Unit.PX||d==o.GLength.Unit.PT)&&i.GGuides.options.guides&&i.GGuides.options.guides.indexOf(i.GFullPixelsGuide.ID)>=0?0:this._document.getScene().getOptimalDecimalsCount();a.gInputSlider("value",Math.round(c)),r.gInputBox("value",this._document.getScene().pointToString(t,u)),s.gCornerTypePicker("value",e.getProperty("tl_ct")),this._advancedPanel.find('input[data-property="csc"]').prop("disabled",l||e instanceof o.GImage).prop("checked",!!e.getProperty("csc"));var p=e.getProperty("uf");if(this._advancedPanel.find('input[data-property="uf"]').prop("checked",p),p)this._advancedPanel.find(".corners-panel").css("display","none");else this._advancedPanel.find(".corners-panel").css("display",""),function(t){for(var n=0;n<t.length;++n){var o=t[n],i=this._advancedPanel.find('button[data-property="'+o+'_uf"]'),a=this._advancedPanel.find('input[data-property="'+o+'_sx"]'),r=this._advancedPanel.find('input[data-property="'+o+'_sy"]'),s=this._advancedPanel.find('button[data-property="'+o+'_ct"]');a.val(this._document.getScene().pointToString(e.getProperty(o+"_sx"),u)),r.val(this._document.getScene().pointToString(e.getProperty(o+"_sy"),u)),e.getProperty(o+"_uf")?(i.addClass("g-active"),r.prop("disabled",!0)):(i.removeClass("g-active"),r.prop("disabled",!1)),i.prop("disabled",p),s.gCornerTypePicker("value",e.getProperty(o+"_ct"))}}.bind(this)(["tl","tr","bl","br"])}},l.prototype._assignCorners=function(e,t,n){n||this._document.getEditor().beginTransaction();var i=0;try{for(var a=0;a<this._rectangles.length;++a)if(this._rectangles[a].isVisible()){var r=this._rectangles[a].getProperty("tl_sx"),s=this._rectangles[a].getProperty("tl_ct");if(0===r&&"string"==typeof t&&"number"!=typeof e&&(e=.25),"number"==typeof e){this._rectangles[a].getGeometryBBox();r=e*(this._rectangles[a].getPointsMinDistance()/2)}"string"==typeof t&&(s=t),0===a&&(i=r),this._rectangles[a].setProperties(["uf","tl_sx","tl_ct"],[!0,r,s],!1,!1,n)}}finally{n||this._document.getEditor().commitTransaction(o.GLocale.get(new o.GLocaleKey("GCommonNames","action.change-corners")))}return i},l.prototype._assignProperty=function(e,t){this._assignProperties([e],[t])},l.prototype._assignProperties=function(e,t){var n=this._document.getEditor();n.beginTransaction();try{for(var i=0;i<this._rectangles.length;++i)this._rectangles[i].setProperties(e,t)}finally{n.commitTransaction(o.GLocale.get(new o.GLocaleKey("GRectangleProperties","action.modify-rectangle-properties")))}},l.prototype.toString=function(){return"[Object GRectangleProperties]"},e.exports=l},function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=n(45),r=o(n(326)),s=n(115),l=(n(162),n(125));function c(){this._slices=[]}i.GObject.inherit(c,s),c.prototype._panel=null,c.prototype._document=null,c.prototype._slices=null,c.prototype._ownChange=!1,c.prototype._chooserElem=null,c.prototype.init=function(e,t){this._panel=e,this._panel.addClass("slice-property-panel"),this.setTouchTools([r.default.APPEARANCE_TOUCH_TOOL]);var n=function(e){var t=this;if("x"===e||"y"===e||"w"===e||"h"===e)return $("<input>").addClass(e+"-input").attr("type","text").attr("data-property",e).on("change",function(n){gDesigner.stats("sliceproperties_change_size"),t._assignProperty(e,t._document.getScene().stringToPoint($(n.target).gInputBox("value")))}.bind(t)).gInputBox({minValue:"w"===e||"h"===e?1e-10:null});if("cls"===e)return $("<button></button>").attr("data-property",e).gPatternChooser({types:[i.GColor],hasOpacity:!1}).on("chooseropen",(function(){t._document.getEditor().hideSelection(),t._chooserElem=$(this)})).on("chooserclose",(function(e,n,o){t._document&&t._document.getEditor().resetHideSelection(),t._chooserElem=null})).on("patternchange",function(n,o,i,a,r){var s=null;r&&(s={chooserOn:!0,slicePattern:!0}),t._assignProperty(e,o,a,s)}.bind(t));if("cls-check"===e)return $("<label></label>").addClass("g-checkbox-label").append($("<input>").addClass("cls-check-checkbox").attr("type","checkbox").attr("data-property",e).on("change",function(e){gDesigner.stats("sliceproperties_change_background"),t._assignProperty("cls",$(e.target).is(":checked")?i.GRGBColor.WHITE:null)}.bind(t))).append($("<span>"+i.GLocale.get(new i.GLocaleKey("GCommonNames","text.background-color"))+"</span>"));if("trm"===e)return $("<label></label>").addClass("g-checkbox-label").append($("<input>").addClass("trm-checkbox").attr("type","checkbox").attr("data-property",e).on("change",function(n){gDesigner.stats("sliceproperties_trim_transparent"),t._assignProperty(e,$(n.target).is(":checked"))}.bind(t))).append($("<span>"+i.GLocale.get(new i.GLocaleKey("GSliceProperties","text.trim-transparent-pixels"))+"</span>"));throw new Error("Unknown input property: "+e)}.bind(this);$("<div></div>").addClass("slice-position-left-row").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.left")),columns:[{width:"44%",content:n("x")}]}).appendTo(e),$("<div></div>").addClass("slice-position-top-row").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.top")),columns:[{width:"44%",content:n("y")}]}).appendTo(e),$("<div></div>").addClass("slice-size-width-row").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.width")),columns:[{width:"44%",content:n("w")}]}).appendTo(e),$("<div></div>").addClass("slice-size-height-row").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.height")),columns:[{width:"44%",content:n("h")}]}).appendTo(e),$("<div></div>").addClass("slice-trm-row").gPropertyRow({columns:[{width:"100%",content:n("trm")}]}).appendTo(e),$("<div></div>").addClass("slice-bg-row").gPropertyRow({columns:[{width:"80%",content:n("cls-check")},{width:"20%",content:n("cls")}]}).appendTo(e)},c.prototype.update=function(e,t,n){if(this._updateUI(),this._ownChange)return!0;if(this._chooserElem&&this._chooserElem.gPatternChooser("close"),this._document&&(this._document.getScene().removeEventListener(i.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),gDesigner.removeEventListener(l,this._settingChanged),this._document=null),this._slices=[],e){for(var o=0;o<t.length;++o)t[o]instanceof i.GSlice&&this._slices.push(t[o]);if(this._slices.length&&this._slices.length===t.length)return this._document=e,this._document.getScene().addEventListener(i.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),gDesigner.addEventListener(l,this._settingChanged,this),this._updateProperties(n),!0}return!1},c.prototype._updateUI=function(){let e=e=>{e.prev().remove()},t=(e,t)=>{e.prev().length||$("<span/>").addClass("g-input-label").text(t).insertBefore(e)},n=this._panel.find(".slice-position-left-row .property-label span"),o=this._panel.find(".slice-size-width-row .property-label span"),a=this._panel.find(".x-input"),r=this._panel.find(".y-input"),s=this._panel.find(".w-input"),l=this._panel.find(".h-input");gDesigner.isTouchEnabled()?(this._panel.find(".trm-checkbox").gCheckboxSlider(),this._panel.find(".cls-check-checkbox").gCheckboxSlider(),n.text(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.position"))),o.text(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.size"))),t(a,"x"),t(r,"y"),t(s,"w"),t(l,"h")):(this._panel.find(".trm-checkbox").gCheckboxSlider("unmount"),this._panel.find(".cls-check-checkbox").gCheckboxSlider("unmount"),n.text(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.left"))),o.text(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.width"))),e(a),e(r),e(s),e(l))},c.prototype._afterPropertiesChange=function(e){!e.temporary&&this._slices.length>0&&this._slices[0]===e.node&&this._updateProperties()},c.prototype._settingChanged=function(e){"decimals_num"===e.key&&this._updateProperties(),"touch"===e.key&&this._updateUI()},c.prototype._updateProperties=function(e){var t=this._document.getScene(),n=this._slices[0],o=function(e){var o=this._panel.find('input[data-property="'+e+'"]');this._slices.length>1?o.gInputBox("value",null).prop("disabled",!0):o.gInputBox("value",t.pointToString(n.getProperty(e),t.getOptimalDecimalsCount())).prop("disabled",!1)}.bind(this);o("x"),o("y"),o("w"),o("h");var i=n.getProperty("cls");this._panel.find('[data-property="cls-check"]').prop("checked",!!i),this._panel.find('[data-property="cls"]').prop("disabled",!i).gPatternChooser("value",n.getProperty("cls")),this._panel.find('input[data-property="trm"]').prop("checked",n.getProperty("trm")),e&&(e.evtType==a.GEditor.ModifiedEvent.Type.Undo||e.evtType==a.GEditor.ModifiedEvent.Type.Redo)&&e.chooserOn&&e.slicePattern&&this._panel.find('[data-property="cls"]').find(".preview").trigger("click")},c.prototype._assignProperty=function(e,t,n,o){this._assignProperties([e],[t],n,o)},c.prototype._assignProperties=function(e,t,n,o){if(n)for(var a=0;a<this._slices.length;++a)this._slices[a].setProperties(e,t,!0);else{this._ownChange=!0;var r=this._document.getEditor();r.beginTransaction();try{for(a=0;a<this._slices.length;++a)this._slices[a].setProperties(e,t)}finally{r.commitTransaction(i.GLocale.get(new i.GLocaleKey("GSliceProperties","action.modify-slice-properties")),o||null),this._ownChange=!1}}},c.prototype.toString=function(){return"[Object GSliceProperties]"},e.exports=c},function(e,t,n){"use strict";n(52),n(17),n(158),n(314),n(89),n(181),n(51),n(7),n(18),n(3),n(62),n(231),n(124),n(28),n(22);var o=n(45),i=n(1),a=n(13),r=n(34),s=n(61),l=n(115),c=n(238),d=n(572),u=n(125),p=n(37);const g=n(135),{toCapitalize:h}=n(34),{LISTS_FEATURE:f}=n(9);var m="#2635#";const y={None:{get label(){return i.GLocale.get(new i.GLocaleKey("GTextProperties","text.marker-none"))},value:"none"},Bullet:{get label(){return i.GLocale.get(new i.GLocaleKey("GTextProperties","text.marker-bulleted"))},value:"bulleted",types:[{icon:"gravit-icon-bullets-1",value:i.GText.Markers.Bullet},{icon:"gravit-icon-bullets-2",value:i.GText.Markers.Check},{icon:"gravit-icon-bullets-3",value:i.GText.Markers.Square}]},Number:{get label(){return i.GLocale.get(new i.GLocaleKey("GTextProperties","text.marker-numbered"))},value:"numbered",types:[{icon:"gravit-icon-numbers-1",value:i.GText.Markers.RomanDot},{icon:"gravit-icon-numbers-2",value:i.GText.Markers.RomanBracket},{icon:"gravit-icon-numbers-3",value:i.GText.Markers.Number}]}};function v(){this._text=[],this._weightsAvailable=[]}i.GObject.inherit(v,l),v.prototype._panel=null,v.prototype._document=null,v.prototype._text=null,v.prototype._ownChange=!1,v.prototype._chooserElem=null,v.prototype._openingInlineEditor=!1,v.prototype._weightsAvailable=null,v.prototype._advancedSettings=null,v.prototype._listTypeSettings=null,v.prototype._advancedSettingsButton=null,v.prototype._scriptBlock=null,v.prototype._sizingBlock=null,v.prototype._autoScrollBlock=null,v.prototype.init=function(e,t){this._panel=e.addClass("text-properties-panel"),this._advancedSettings=this._getAdvancedSettingsOverlayDiv(),this._listTypeSettings=$("<div></div>").addClass("list-type-settings").append($("<div></div>").addClass("list-type-options").append(Object.values(y).map(e=>{let{label:t,value:n,types:o}=e;return $("<div></div>").addClass("list-type-group").attr("value",n).append($("<div/>").addClass("list-type-group-header").append($("<span/>").addClass("gravit-icon-check")).append($("<span/>").text(t))).on("click",o?null:()=>this._assignMarker(null)).append($("<div/>").addClass("list-type-group-container").append(o?o.map(e=>{let{value:t,icon:n}=e;return $("<div></div>").addClass("list-type-option").attr("value",t).append($("<div/>").addClass(n)).on("click",e=>{const t=$(e.target).closest(".list-type-option").attr("value");gDesigner.stats("textproperties_change_list-type",t),this._assignMarker(t)})}):""))}))).gOverlay({releaseOnClose:!1,clazz:"list-type-settings-overlay"});var n=function(e){var t=this;if("_pm"===e)return $("<div></div>").attr("data-property",e).addClass("g-select").append($("<span/>")).on("click",r.watchDog.trap(e=>{this._listTypeSettings.gOverlay("open",$(e.target))},null,t=>gDesigner.stats("textproperties_nonprotriespro_advanced-settings",e)));if(0===e.indexOf("typography")){const n=e.substr("typography-".length);return $("<button></button>").addClass("g-button").addClass("typography-button").attr("data-property",e).on("click",r.watchDog.trap(e=>{gDesigner.stats("textproperties_change_typography",n),t._toggleFormatting(n)},null,t=>gDesigner.stats("textproperties_nonprotriespro_advanced-settings",e))).append($("<span></span>").addClass("gravit-icon-text-typography-".concat(n)))}if(0===e.indexOf("_ttsc")){const n=e.substr("_ttsc-".length);return $("<button></button>").addClass("g-button").addClass("script-button").attr("data-property",e).on("click",r.watchDog.trap(e=>{gDesigner.stats("textproperties_change_typography",n),t._assignProperty("_ttsc",$(e.target).closest("button").hasClass("g-active")?null:n)},null,t=>gDesigner.stats("textproperties_nonprotriespro_advanced-settings",e))).append($("<span></span>").addClass("gravit-icon-text-typography-".concat(n,"script")))}if("_tlsc"===e){var n=$("<select></select>").attr("data-property","_tlsc");return n.append($("<option></option>").attr("value","auto").text(i.GLocale.get(new i.GLocaleKey("GTextProperties","text.auto")))),n.on("change",(function(e){gDesigner.stats("textproperties_change_language-script",$(e.target).val()),t._assignProperty("_tlsc",$(e.target).val())})),n}if("_tv"===e)return $("<select />").attr("data-property","_tv").on("change",r.watchDog.trap(e=>{var n=$(e.target).text();gDesigner.stats("textproperties_change_variation",n),t._assignProperty("_tv",$(e.target).val())},null,t=>gDesigner.stats("textproperties_nonprotriespro_advanced-settings",e)));if(0===e.indexOf("_ttrf-")){var a="",s=e.substr("_ttrf-".length);switch(s){case i.GStylable.TextTransformation.Uppercase:a="gravit-icon-text-transform-uppercase";break;case i.GStylable.TextTransformation.Lowercase:a="gravit-icon-text-transform-lowercase";break;case i.GStylable.TextTransformation.Capitalize:a="gravit-icon-text-transform-capitalize";break;case i.GStylable.TextTransformation.SmallCaps:a="gravit-icon-text-transform-smallcaps"}var l=Object.keys(i.GStylable.TextTransformation).find(e=>i.GStylable.TextTransformation[e]===s);return $("<button></button>").addClass("g-button").addClass("transformation-button").attr("data-property",e).on("click",r.watchDog.trap(e=>{gDesigner.stats("textproperties_change_transformation",l?l.toLowerCase():""),t._assignProperty("_ttrf",$(e.target).closest("button").hasClass("g-active")?null:s)},null,t=>gDesigner.stats("textproperties_nonprotriespro_advanced-settings",e))).append($("<span></span>").addClass(a))}if(0===e.indexOf("va-")){a="";switch(d=e.substr("va-".length)){case i.GText.VerticalAlign.Top:a="gravit-icon-text-align-top";break;case i.GText.VerticalAlign.Middle:a="gravit-icon-text-align-middle";break;case i.GText.VerticalAlign.Bottom:a="gravit-icon-text-align-bottom"}return $("<button></button>").addClass("g-button").addClass("vertical-align").attr("data-property",e).on("click",(function(){gDesigner.stats("textproperties_change_vertical-align",d===i.GText.VerticalAlign.Top?"top":i.GText.VerticalAlign.Middle?"middle":"bottom"),t._assignProperty("va",$(this).hasClass("g-active")?null:d)})).append($("<span></span>").addClass(a))}if(0===e.indexOf("_pal-")){var d;a="";switch(d=e.substr("_pal-".length)){case i.GStylable.ParagraphAlignment.Left:a="gravit-icon-text-align-left";break;case i.GStylable.ParagraphAlignment.Center:a="gravit-icon-text-align-center";break;case i.GStylable.ParagraphAlignment.Right:a="gravit-icon-text-align-right";break;case i.GStylable.ParagraphAlignment.Justify:a="gravit-icon-text-justify"}return $("<button></button>").addClass("g-button").addClass("alignment-button").attr("data-property",e).on("click",(function(){gDesigner.stats("textproperties_change_paragraph-align",d===i.GStylable.ParagraphAlignment.Left?"left":d===i.GStylable.ParagraphAlignment.Right?"right":d===i.GStylable.ParagraphAlignment.Justify?"justify":d===i.GStylable.ParagraphAlignment.Center?"center":"unkn"),t._assignProperty("_pal",$(this).hasClass("g-active")?null:d)})).append($("<span></span>").addClass(a))}if("aw"===e||"ah"===e)return $("<div></div>").attr("data-property",e).append($("<button></button>").addClass("sizing-button-auto").addClass("g-group-start g-button").on("click",()=>{gDesigner.stats("textproperties_change_auto-widthheight","auto"),t._assignProperty(e,!0)}).text(i.GLocale.get(new i.GLocaleKey("GTextProperties","text.auto")))).append($("<button></button>").addClass("sizing-button-fixed").addClass("g-group-end g-button").on("click",()=>{gDesigner.stats("textproperties_change_auto-widthheight","fixed"),t._assignProperty(e,!1)}).text(i.GLocale.get(new i.GLocaleKey("GTextProperties","text.fix"))));if("_fc"===e)return $("<div></div>").prop("disabled",!0).attr("data-property","_fc").attr("id","text-color").gPatternChooser({types:[i.GColor],hasOpacity:!1}).on("chooseropen",(function(){t._document.getEditor().hideSelection(),t._chooserElem=$(this)})).on("chooserclose",(function(e,n,o){t._document&&t._document.getEditor().resetHideSelection(),t._chooserElem=null})).on("patternchange",function(e,n,i,a,r){for(var s=[],l=0;l<this._text.length;l++){var c=o.GElementEditor.getEditor(this._text[l]);s.push(c||this._text[l])}var d=null;r&&(d={chooserOn:!0,textPattern:!0});var u=this._getProperty("_fc",s);u||(u=this._getFontColor(s)),t._assignProperty("_fc",n,a,d)}.bind(this));if("_tff"===e)return $("<input/>").addClass("g-select").attr("data-property",e).attr("type","button").gFontsButton({closeCallback:function(){t._document&&t._document.getActiveWindow().getView().focus()},assignFontCallback:function(e){t._assignFont(e)}});if("_tfi"===e)return $("<div></div>").append($("<input>").attr("type","text").attr("data-property",e).addClass("g-select").addClass("text-size").on("change",(function(){gDesigner.stats("textproperties_change_size");var n=$(this).gUnitBox("value"),o=n?n.toUnit(i.GLength.Unit.PT):null;null===o||"number"==typeof o&&o>=0?t._assignProperty(e,o):t._updateProperties()})).gUnitBox({source:"text"}));if("_tws"===e||"_tcs"===e)return $("<input>").attr("type","text").attr("data-property",e).on("change",(function(){"_tws"===e?gDesigner.stats("textproperties_change_wordspacing"):gDesigner.stats("textproperties_change_charspacing");var n=t._document;if(n){var o=n.getScene().stringToPoint($(this).val());null===o||"number"==typeof o?t._assignProperty(e,o):t._updateProperties()}})).gInputBox();if("style"===e)return $("<select></select>").attr("data-property",e).on("change",(function(){gDesigner.stats("textproperties_choose_fontstyle");var e=$(this).val()||null;if(e){var n=gDesigner.getWorkspace().getFontManager().getDefaultFont(),o=e.split(m);o[0]=parseInt(o[0])||400;var i=[o[0],o[1]],a=["_tfw","_tfs"];o[2]&&o[2].length&&o[2]!==n.getFamily()&&(a.push("_tff"),i.push(o[2])),t._assignProperties(a,i)}t._document.getActiveWindow().getView().focus()}));if(0!==e.indexOf("tpth")){if("_plh"===e)return $("<div>").addClass("text-line-height").append($("<input>").attr("type","text").attr("data-property",e).addClass("value").on("change",(function(){gDesigner.stats("textproperties_change_line-height");var n=$(this).val(),o=t._document.getScene(),a=t._panel.find('button[data-property="_plh_unit"]').text();if("%"!==a){let e=i.GLength.parseEquation(n,o.getProperty("ut"));e&&(n=e.toUnit(i.GLength.Unit.PX))}else n=i.GUtil.parseNumber(n);null===n||n>0||"%"!==a&&0===n?("number"==typeof n&&("%"===a?n/=100:n=String(n)),t._assignProperty(e,n)):t._updateProperties()})).gInputBox()).append($("<button>").addClass("g-flat").attr("data-property","_plh_unit").addClass("text-unit").text("%").on("click",(function(){gDesigner.stats("textproperties_change_size");var n=$(this).text(),a=t._document.getScene(),r=t._panel.find('input[data-property="_plh"]').val(),s=t._document.getEditor();if("%"!==n){let e=i.GLength.parseEquation(r,a.getProperty("ut"));e&&(r=e.toUnit(i.GLength.Unit.PX))}else r=i.GUtil.parseNumber(r);if(null!==r&&"%"===n){var l=a.getProperty("ut")||"px";if($(this).text(l),"number"==typeof r)try{s.beginTransaction();for(var c=0;c<t._text.length;c++){var d=o.GElementEditor.getEditor(t._text[c])||t._text[c],u=(r/100*(p=t._getProperty("_tfi",[d])||20)*4/3).toString();d.setProperties([e],[u])}}finally{s.commitTransaction(i.GLocale.get(new i.GLocaleKey("GTextProperties","action.modify-text-properties")))}}else if(null!==r&&($(this).text("%"),"number"==typeof r))try{s.beginTransaction();for(c=0;c<t._text.length;c++){d=o.GElementEditor.getEditor(t._text[c])||t._text[c];var p=t._getProperty("_tfi",[d])||20;u=Math.round(100*Math.max(r/(4*p/3),.01))/100;d.setProperties([e],[u])}}finally{s.commitTransaction(i.GLocale.get(new i.GLocaleKey("GTextProperties","action.modify-text-properties")))}})));if("fontSet"===e)return $("<input/>").attr("type","checkbox").attr("data-property",e).on("change",(function(e){gDesigner.stats("textproperties_change_set-of-fonts");var t=$(this).prop("checked");gDesigner.setSetting("font-set",t);var n=gContainer.getSystemFontsProvider();t?c.enableProviders([n]):c.disableProviders([n])}));if("sc"===e)return $("<label></label>").append($("<input>").addClass("auto-scale-checkbox").attr("type","checkbox").attr("data-property",e).on("change",function(e){gDesigner.stats("textproperties_scale_content"),t._assignProperty("sc",$(e.target).is(":checked"))}.bind(this))).append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GTextProperties","text.scale-content"))));if(0===e.indexOf("decoration-")){var u=e.substr("decoration-".length);return $("<button></button>").addClass("g-button").addClass("decoration-buttons").attr("data-property",e).attr("data-title",h(i.GLocale.get(new i.GLocaleKey("GTextProperties","text.decoration-".concat(u))))).on("click",(function(){gDesigner.stats("textproperties_change_decoration",u),t._toggleFormatting(u)})).append($("<span></span>").addClass("gravit-icon-text-decoration-".concat(u)))}if("_pas"===e)return $("<div></div>").addClass("text-paragraph-spacing").append($("<input>").attr("type","text").addClass("value").attr("data-property",e).on("click",r.watchDog.trap(null,null,t=>{t.stopPropagation(),t.preventDefault(),gDesigner.stats("textproperties_nonprotriespro_advanced-settings",e)})).on("change",r.watchDog.trap(n=>{const o=t._document;if(!o)return;gDesigner.stats("textproperties_change_paragraph-spacing");const a=t._advancedSettings.find('button[data-property="_pas_unit"]').text();let r=null;if("%"!==a){let e=i.GLength.parseEquation($(n.target).closest("input").val(),o.getScene().getProperty("ut"));e&&(r=e.toUnit(i.GLength.Unit.PX))}else r=i.GUtil.parseNumber($(n.target).closest("input").val());null===r||"number"==typeof r&&r>=0?("number"==typeof r&&("%"===a?r/=100:r=String(r)),t._assignProperty(e,r)):t._updateProperties()},null,t=>gDesigner.stats("textproperties_nonprotriespro_advanced-settings",e))).gInputBox({minValue:0,allowEmptyValue:!1})).append($("<button>").addClass("g-flat").addClass("unit").attr("data-property","_pas_unit").text("px").on("click",r.watchDog.trap(e=>{const n=t._document;if(!n)return;const a=n.getScene(),r=$(e.target).text(),s="%"===r?a.getProperty("ut")||"px":"%";gDesigner.stats("textproperties_change_paragraph-spacing-unit",s),$(e.target).text(s);let l=null;if("%"!==r){let e=i.GLength.parseEquation(t._advancedSettings.find('input[data-property="_pas"]').val(),a.getProperty("ut"));e&&(l=e.toUnit(i.GLength.Unit.PX))}else l=i.GUtil.parseNumber(t._advancedSettings.find('input[data-property="_pas"]').val());if(!isNaN(l)){const e=t._text.map(e=>o.GElementEditor.getEditor(e)||e),n=t._getProperty("_tfi",e)||20;let i;i="%"===s?Math.round(100*parseFloat(l/(4*n/3)))/100:String(l/100*n*4/3),t._assignProperties(["_pas"],[i])}},null,t=>gDesigner.stats("textproperties_nonprotriespro_advanced-settings",e))));if("_pai"===e)return $("<input>").attr("type","text").attr("data-property",e).on("click",r.watchDog.trap(null,null,t=>{t.stopPropagation(),t.preventDefault(),gDesigner.stats("textproperties_nonprotriespro_advanced-settings",e)})).on("change",r.watchDog.trap(n=>{const o=t._document;if(!o)return;gDesigner.stats("textproperties_change_paragraph-indent");const i=o.getScene().stringToPoint($(n.target).closest("input").val());null===i||"number"==typeof i&&i>=0?t._assignProperty(e,i):t._updateProperties()},null,t=>gDesigner.stats("textproperties_nonprotriespro_advanced-settings",e))).gInputBox({minValue:0,allowEmptyValue:!1});if("dir"===e)return $("<select></select>").attr("data-property","dir").append($("<option></option>").attr("value",i.GTLDirectionTextTransformer.LTR).text(i.GLocale.get(new i.GLocaleKey("GTextProperties","text.orientation-ltr")))).append($("<option></option>").attr("value",i.GTLDirectionTextTransformer.RTL).text(i.GLocale.get(new i.GLocaleKey("GTextProperties","text.orientation-rtl")))).append($("<option></option>").attr("value",i.GTLDirectionTextTransformer.TTB).text(i.GLocale.get(new i.GLocaleKey("GTextProperties","text.orientation-ttb")))).on("change",(function(e){var n="";switch(parseInt($(e.target).val())){case i.GTLDirectionTextTransformer.LTR:n="ltr";break;case i.GTLDirectionTextTransformer.RTL:n="rtl";break;case i.GTLDirectionTextTransformer.TTB:n="ttb";break;case i.GTLDirectionTextTransformer.BTT:n="btt"}gDesigner.stats("textproperties_change_orientation",n),t._assignProperty("dir",parseInt($(e.target).val()))}));if("_tlocl"===e)return this._createLanguageSelector();if("_tstyls"===e)return this._createStylisticSetSelector();throw new Error("Unknown input property: "+e)}return"tpthd"===e?$("<label></label>").addClass("g-switch").append($("<input>").attr("type","checkbox").attr("data-property",e).on("change",(function(){gDesigner.stats("textproperties_change_path-attachment","direction"),t._assignProperty(e,$(this).is(":checked")?i.GTLPathTextTransformer.DIRECTION_OUTWARDS:i.GTLPathTextTransformer.DIRECTION_INWARDS)}))).append($("<div></div>")):"tpths"===e?$("<label></label>").addClass("g-switch").append($("<input>").attr("type","checkbox").attr("data-property",e).on("change",(function(){gDesigner.stats("textproperties_change_path-attachment","insideoutside"),t._assignProperty(e,$(this).is(":checked")?i.GTLPathTextTransformer.OUTSIDE:i.GTLPathTextTransformer.INSIDE)}))).append($("<div></div>")):"tptho"===e?$("<input>").attr("type","text").attr("data-property",e).on("change",(function(){gDesigner.stats("textproperties_change_path-attachment","offset");var n=t._document.getScene().stringToPoint($(this).val());null===n||"number"==typeof n?t._assignProperty(e,n):t._updateProperties()})).gInputBox():void 0}.bind(this);$("<div></div>").addClass("typography-properties").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.typography")),columns:[{width:"100%",label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.typography")),content:$("<div></div>").addClass("typography").append(n("_ttsc-"+i.GStylable.TypographyScript.Subscript).addClass("g-group-start").attr("data-title",i.GLocale.get(new i.GLocaleKey("GTextProperties","text.typography-subscript")))).append(n("_ttsc-"+i.GStylable.TypographyScript.Superscript).addClass("g-group-end").attr("data-title",i.GLocale.get(new i.GLocaleKey("GTextProperties","text.typography-superscript")))).append(n("typography-ligatures").attr("data-title",i.GLocale.get(new i.GLocaleKey("GTextProperties","text.typography-ligatures")))).append(n("typography-fractions").attr("data-title",i.GLocale.get(new i.GLocaleKey("GTextProperties","text.typography-fractions"))))}]}).appendTo(this._advancedSettings),$("<div></div>").addClass("transform-properties").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.transform")),columns:[{width:"100%",label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.transform")),content:$("<div></div>").append(n("_ttrf-"+i.GStylable.TextTransformation.Uppercase).addClass("g-group-start").attr("data-title",i.GLocale.get(new i.GLocaleKey("GTextProperties","text.transform-uppercase")))).append(n("_ttrf-"+i.GStylable.TextTransformation.Capitalize).addClass("g-group-element").attr("data-title",i.GLocale.get(new i.GLocaleKey("GTextProperties","text.transform-capitalize")))).append(n("_ttrf-"+i.GStylable.TextTransformation.Lowercase).addClass("g-group-element").attr("data-title",i.GLocale.get(new i.GLocaleKey("GTextProperties","text.transform-lowercase")))).append(n("_ttrf-"+i.GStylable.TextTransformation.SmallCaps).addClass("g-group-end").attr("data-title",i.GLocale.get(new i.GLocaleKey("GTextProperties","text.transform-smallcaps"))))}]}).appendTo(this._advancedSettings),f&&($("<div></div>").addClass("list-type-properties").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.list-type")),columns:[{width:"100%",label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.list-type")),content:n("_pm")}]}).appendTo(this._advancedSettings),$("<hr/>").appendTo(this._advancedSettings)),$("<div></div>").addClass("paragraph-properties").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.paragraph")),columns:[{width:"50%",label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.paragraph-indent")),content:n("_pai")},{width:"50%",label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.paragraph-spacing")),content:n("_pas")}]}).appendTo(this._advancedSettings),$("<hr/>").appendTo(this._advancedSettings),$("<div></div>").addClass("language-properties").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.language")),columns:[{width:"100%",content:n("_tlocl")}]}).appendTo(this._advancedSettings),$("<hr/>").appendTo(this._advancedSettings),$("<div></div>").addClass("stylistic-set-properties").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.stylisticset")),columns:[{width:"100%",content:n("_tstyls")}]}).appendTo(this._advancedSettings),this._advancedSettingsButton=this._getAdvancedSettingsButton().appendTo(t);var a=$("<div/>").addClass("color-font").appendTo(e);$("<div></div>").addClass("font-color-properties").gPropertyRow({columns:[{clazz:"color-picker-button",padding:!1,content:n("_fc")},{width:"auto",content:n("_tff")}]}).appendTo(a),$("<div></div>").addClass("font-style-properties").gPropertyRow({columns:[{clazz:"color-title-label",content:$("<span>".concat(i.GLocale.get(new i.GLocaleKey("GTextProperties","text.color")),"</span>")).addClass("color-title")},{width:"auto",content:n("style"),label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.weight"))},{width:"25%",content:n("_tfi"),label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.size"))}]}).appendTo(a),$("<hr/>").appendTo(e),$("<div></div>").addClass("decoration-properties").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.decoration")),columns:[{width:"25%",content:n("decoration-bold")},{width:"25%",content:n("decoration-italic")},{width:"25%",content:n("decoration-underline")},{width:"25%",content:n("decoration-strikeout")}]}).appendTo(e),$("<hr/>").appendTo(e),$("<div></div>").addClass("alignment-properties").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.alignment")),columns:[{width:"100%",content:$("<div></div>").append(n("_pal-"+i.GStylable.ParagraphAlignment.Left).addClass("g-group-start").attr("data-title",i.GLocale.get(new i.GLocaleKey("GAlignAction","title.align-left")))).append(n("_pal-"+i.GStylable.ParagraphAlignment.Center).addClass("g-group-element").attr("data-title",i.GLocale.get(new i.GLocaleKey("GAlignAction","title.align-center")))).append(n("_pal-"+i.GStylable.ParagraphAlignment.Right).addClass("g-group-element").attr("data-title",i.GLocale.get(new i.GLocaleKey("GAlignAction","title.align-right")))).append(n("_pal-"+i.GStylable.ParagraphAlignment.Justify).addClass("g-group-end").attr("data-title",i.GLocale.get(new i.GLocaleKey("GTextProperties","action.justify"))))}]}).appendTo(e),$("<div></div>").addClass("vertical-properties").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.vertical")),columns:[{width:"auto",content:$("<div></div>").append(n("va-"+i.GText.VerticalAlign.Top).addClass("g-group-start").attr("data-title",i.GLocale.get(new i.GLocaleKey("GAlignAction","title.align-top")))).append(n("va-"+i.GText.VerticalAlign.Middle).addClass("g-group-element").attr("data-title",i.GLocale.get(new i.GLocaleKey("GAlignAction","title.align-middle")))).append(n("va-"+i.GText.VerticalAlign.Bottom).addClass("g-group-end").attr("data-title",i.GLocale.get(new i.GLocaleKey("GAlignAction","title.align-bottom"))))}]}).appendTo(e),$("<div></div>").addClass("spacing-properties").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.spacing")),columns:[{label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.char")),width:"30%",content:n("_tcs")},{label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.word")),width:"30%",content:n("_tws")},{label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.line")),width:"40%",content:n("_plh")}]}).appendTo(e),$("<hr/>").appendTo(e),this._sizingBlock=$("<div></div>").addClass("sizing-properties").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.sizing")),columns:[{width:"50%",content:n("aw"),label:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.width"))},{width:"50%",content:n("ah"),label:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.height"))}]}).appendTo(e),this._scriptBlock=$("<div></div>").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.script")),columns:[{width:"50%",content:n("dir")},{width:"50%",content:n("_tlsc")}]}).appendTo(this._panel),this._autoScrollBlock=$("<div></div>").addClass("auto-scale-font").attr("major-item-only",!0).gPropertyRow({columns:[{width:"auto",content:n("sc")}]}).appendTo(this._panel),$("<div></div>").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.on-path")),columns:[{width:"30%",content:n("tpths"),label:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.outside"))},{width:"30%",content:n("tpthd"),label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.reverse"))},{width:"40%",content:n("tptho"),label:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.distance"))}]}).appendTo(e),e.find("button").each((function(e,t){$(t).attr("tabindex",-1)})),this._reInitLayout(),gDesigner.addEventListener(u,this._touchChanged,this)},v.prototype._createLanguageSelector=function(){return $("<select/>").attr("data-property","_tlocl").gPro().on("mousedown",r.watchDog.trap()).on("change",r.watchDog.trap(e=>{const t=$(e.target).closest("select").val();this._assignProperties(["_tlocl"],[t||null]),gDesigner.stats("textproperties_change_language")}))},v.prototype._createStylisticSetSelector=function(){return $("<select/>").attr("data-property","_tstyls").gPro().on("mousedown",r.watchDog.trap()).on("change",r.watchDog.trap(e=>{const t=$(e.target).closest("select").val();this._assignProperties(["_tstyls"],[t||null]),gDesigner.stats("textproperties_change_stylistic-set")}))},v.prototype.openEyeDropper=function(e,t){this._panel.find('[data-property="_fc"]').gPatternChooser("openEyeDropper",e,t)},v.prototype._getAdvancedSettingsOverlayDiv=function(){return $("<div></div>").gOverlay({releaseOnClose:!1,clazz:gDesigner.isEnabledProFeatures()?"g-overlay-advanced-setting":"dialog-expired-pro g-overlay-advanced-setting"})},v.prototype._getAdvancedSettingsButton=function(){var e=gDesigner.getLicense();return $("<button></button>").attr("data-action","text-settings").attr("data-title",i.GLocale.get(new i.GLocaleKey("GTextProperties","text.advanced-text-settings"))).append($("<span></span>").addClass("gravit-icon-settings")).on("click",e=>{gDesigner.stats("textproperties_open_advanced-settings"),this._advancedSettings.gOverlay("open",$(e.target).closest("button"))}).gPro().gRichTooltip(s.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.advanced-properties-icon-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GTextProperties","text.advanced-properties-icon-tooltip-description")),isPro:!gDesigner.isEnabledProFeatures()||!(e.isPro()&&!e.isExpired()),learnMore:"https://documentation.corelvector.com/working-with-text/advanced-text-properties/"}))},v.prototype.update=function(e,t,n){if(this._ownChange)return!0;if(this._chooserElem&&this._chooserElem.gPatternChooser("close"),this._document&&(this._document.getScene().removeEventListener(i.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange),this._document.getEditor().removeEventListener(o.GEditor.InlineEditorEvent,this._inlineEditorEvent),this._document.getEditor().removeEventListener(o.GEditor.HotkeyEvent,this._hotKeyEvent,this),gDesigner.removeEventListener(u,this._settingChanged),this._document=null),this._text=[],e){for(var a=!1,r=0;r<t.length;++r)t[r]instanceof i.GText?this._text.push(t[r]):t[r]instanceof i.GStyle&&t[r].getProperty("_sdf")===i.GObject.getTypeId(i.GText)&&(this._text.push(t[r]),a=!0);if(this._text.length&&this._text.length===t.length||a)return this._document=e,this._document.getScene().addEventListener(i.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document.getEditor().addEventListener(o.GEditor.InlineEditorEvent,this._inlineEditorEvent,this),this._document.getEditor().addEventListener(o.GEditor.HotkeyEvent,this._hotKeyEvent,this),gDesigner.addEventListener(u,this._settingChanged,this),this._updateProperties(n),this._advancedSettingsButton.css("display",""),!0}return this._advancedSettingsButton.css("display","none"),!1},v.prototype._settingChanged=function(e){if("font-set"===e.key){var t=this._panel.find('input[data-property="fontSet"]');t.length&&t.prop("checked")!==!!e.newValue&&t.prop("checked",!!e.newValue)}else"decimals_num"===e.key&&this._updateProperties()},v.prototype._touchChanged=function(e){"touch"===e.key&&this._reInitLayout()},v.prototype._reInitLayout=function(){gDesigner.isTouchEnabled()?(this._autoScrollBlock.insertAfter(this._sizingBlock),this._autoScrollBlock.find(".auto-scale-checkbox").gCheckboxSlider()):(this._autoScrollBlock.insertAfter(this._scriptBlock),this._autoScrollBlock.find(".auto-scale-checkbox").gCheckboxSlider("unmount"))},v.prototype._afterPropertiesChange=function(e){const t=this._text.length>0&&this._text[this._text.length-1];!e.temporary&&t&&(t===e.node||t instanceof i.GStyle||t instanceof i.GText&&t.getContent()===e.node)&&(this._updateProperties(),t instanceof i.GText&&t.hasEmbeddedFonts()&&this._document.getEditor().closeInlineEditor())},v.prototype._hotKeyEvent=function(e){const t={B:"bold",I:"italic",U:"underline",S:"strikeout"},[n,o,...i]=e.keys;!n||n!==a.GKey.Constant.CONTROL||!(o in t)||i&&i.length||gDesigner.stats("textproperties_hotkey_change-decoration",t[o])},v.prototype._inlineEditorEvent=function(e){switch(e.type){case o.GEditor.InlineEditorEvent.Type.AfterOpen:case o.GEditor.InlineEditorEvent.Type.AfterClose:case o.GEditor.InlineEditorEvent.Type.SelectionChanged:this._updateProperties();break;case o.GEditor.InlineEditorEvent.Type.TryOpen:this._tryOpenInlineEditor();break;case o.GEditor.InlineEditorEvent.Type.BeforeClose:case o.GEditor.InlineEditorEvent.Type.TextEdited:this._tryModifyingInitialFont(e.type,e.data&&e.data.wasModifiedBefore)}},v.prototype._tryModifyingInitialFont=function(e,t){if(this._document&&this._text&&1===this._text.length){var n=this._text[0];if(!n.getProperty("_we")){var a=n instanceof i.GText&&n.getTLCore();if(a&&(e===o.GEditor.InlineEditorEvent.Type.BeforeClose&&a.getWasEdited()||e===o.GEditor.InlineEditorEvent.Type.TextEdited&&!t)){var r=a.getDocumentRange().plainText(),s=c.getProviderInstance(d).getDefaultFamilyForString(r),l=gDesigner.getWorkspace()&&gDesigner.getWorkspace().getFontManager()&&gDesigner.getWorkspace().getFontManager().getDefaultFont()&&gDesigner.getWorkspace().getFontManager().getDefaultFont().getFamily();if(s&&l&&l!==s){var u=i.GOpenTypeFont.getDirectionForString(r);u!==i.GTLDirectionTextTransformer.LTR?n.setProperties(["_tff","dir"],[s,u]):n.setProperty("_tff",s)}}}}},v.prototype._tryOpenInlineEditor=function(){if(this._document&&this._text&&1===this._text.length&&!this._openingInlineEditor){var e=this._text[0];e.isFakeText()&&p.confirm(i.GLocale.get(new i.GLocaleKey("GTextProperties","text.edit")),t=>{if(t){o.GEditor.tryRunTransaction(e,()=>{e.replaceFonts(gDesigner.getWorkspace().getFontManager().getDefaultFont(),e.hasEmbeddedFonts())},"Replace fonts"),this._openingInlineEditor=!0;try{this._document.getEditor().openInlineEditor(e,this._document.getActiveWindow().getView())}finally{this._openingInlineEditor=!1}}},i.GLocale.get(new i.GLocaleKey("GLocale","no")),i.GLocale.get(new i.GLocaleKey("GLocale","yes")))}},v.prototype._intersectArrays=function(e,t){return null===e?t:null===t?e:e.filter((function(e){return-1!==t.indexOf(e)}))},v.prototype._getFormatting=function(e,t){const n=t.length;if(0===n)return null;const a=function(t){let n;if(t instanceof o.GTextEditor?n=t.getElement():t instanceof i.GText&&(n=t),n){const t=n.getTLCore();if(t){let i;const a=o.GElementEditor.getEditor(n);if(i=a&&a.isInlineEdit()?t.selectedRange():t.getDocumentRange(),i)return i.getFormatting()[e]}}return null};let r=a(t[0]);for(let e=1;e<n;e++)if(a(t[e])!==r)return null;return r},v.prototype._getProperty=function(e,t,n){var o=t.length;if(0==o)return null;for(var i=t[0].getProperty(e),a=1;a<o;a++)if(t[a].getProperty(e)!==i)return null;return i||!isNaN(i)?i:3===arguments.length?n:i},v.prototype._getFontColor=function(e){var t=e[0]instanceof o.GElementEditor?e[0].getElement():e[0];if(!(t&&t instanceof i.GText))return null;var n=t.getTLCore().getRichContent();return n&&n.length?t._getGravitValue("fontColor",n[0].fontColor):null},v.prototype._updateProperties=async function(e){var t,n=(ye=gDesigner.getWorkspace().getFontManager()).getDefaultFont(),a=null,r=null;if(!n)return;t=[];for(var s=0;s<this._text.length;s++){var l=o.GElementEditor.getEditor(this._text[s]);t.push(l||this._text[s])}var c=this._panel.find('input[data-property="fontSet"]');c.length&&c.prop("checked",gDesigner.getSetting("font-set"),!1);var d=this._getFormatting("underline",t)||null,u=this._getFormatting("strikeout",t)||null,p=this._getFormatting("fractions",t)||!1,h=this._getFormatting("listMarker",t)||null,f=this._getProperty("_pai",t,i.GStylable.PropertySetInfo.P.geometryProperties._pai),v=this._getProperty("_pas",t,i.GStylable.PropertySetInfo.P.geometryProperties._pas),_=(this._getProperty("_tv",t),this._getProperty("_tlsc",t)),b=this._getProperty("_ttsc",t),w=this._getProperty("_ttrf",t)||null,C=this._getProperty("_tfw",t)||"",x=this._getProperty("_tfs",t)||"",S=this._getProperty("aw",t)||!1,E=this._getProperty("ah",t)||!1,A=this._getProperty("sc",t)||!1,T=this._getProperty("va",t)||"",G=this._getProperty("_tfi",t),P=this._getProperty("_fc",t),D=this._getProperty("_tws",t),L=this._getProperty("_tcs",t),I=(this._getProperty("_fop",t),this._getProperty("_pal",t)),k=this._getProperty("_plh",t),O=this._getProperty("tpthd",t),F=this._getProperty("tpths",t),R=this._getProperty("tptho",t),M=this._getProperty("dir",t),N=this._getProperty("_tlocl",t),B=this._getProperty("_tstyls",t),U=this._getFormatting("ligatures",t);U="auto"===U?!L:!!U,P||(P=this._getFontColor(t));var j=this._document&&this._document.getEditor(),K=j&&j.isInlineEditing()&&j.getCurrentInlineEditorNode()instanceof i.GText,V=t.every((function(e){return e.hasPathAttached&&e.hasPathAttached()}));this._advancedSettings.find('[data-property^="_ttsc"]').each((function(e,t){var n=$(t),o=n.attr("data-property").substr("_ttsc-".length);n.toggleClass("g-active",b===o)})),this._advancedSettings.find('[data-property^="_ttrf"]').each((function(e,t){var n=$(t),o=n.attr("data-property").substr("_ttrf-".length);n.toggleClass("g-active",w===o)})),this._advancedSettings.find('[data-property="_pai"]').gInputBox("value",null!==f?this._document.getScene().pointToString(f,this._document.getScene().getOptimalDecimalsCount()):"");const H=this._advancedSettings.find('button[data-property="_pas_unit"]');if("number"==typeof v)H.text("%"),this._advancedSettings.find('[data-property="_pas"]').val(i.GUtil.formatNumber(100*v,this._document.getScene().getOptimalDecimalsCount()));else if("string"==typeof v){const e=this._document.getScene();H.text(e.getProperty("ut")||"px"),this._advancedSettings.find('[data-property="_pas"]').val(e.pointToString(v,e.getOptimalDecimalsCount()))}else this._advancedSettings.find('[data-property="_pas"]').val("");var W=T||i.GText.VerticalAlign.Top,z=this._panel.find('button[data-property^="va"]');z.each((function(e,t){var n=$(t);n.prop("disabled",K||V).toggleClass("g-active",n.attr("data-property")==="va-"+W)})),z.closest(".g-property-row").css("display",V||E||K?"none":""),this._panel.find('[data-property="ah"] button').each((e,t)=>{var n=$(t);n.prop("disabled",K).toggleClass("g-active",n.is(":first-child")===E)});var q=this._panel.find('[data-property="aw"] button');q.each((e,t)=>{var n=$(t);n.prop("disabled",K).toggleClass("g-active",n.is(":first-child")===S)});var Y=this._panel.find('select[data-property="dir"]');Y.prop("disabled",K),K||Y.val(M),this._panel.find('[data-property="sc"]').prop("checked",A),q.closest(".g-property-row").css("display",V?"none":""),this._panel.find('input[data-property="tpthd"]').prop("checked",O===i.GTLPathTextTransformer.DIRECTION_OUTWARDS),this._panel.find('input[data-property="tpths"]').prop("checked",F===i.GTLPathTextTransformer.OUTSIDE),this._panel.find('input[data-property="tptho"]').val(R).closest(".g-property-row").css("display",V?"":"none");var X=function(){setTimeout(this._updateProperties.bind(this),1)}.bind(this),Q=this._panel.find('input[data-property="_tff"]'),J=Q.gFontsButton("getFontList"),Z=null,ee=!0,te=!0;let ne,oe;for(s=0;s<t.length;s++){const e=t[s];let a;if(a=e instanceof o.GTextEditor?e.getFonts():[e.getProperty("_tff")],1==t.length){var ie=e instanceof o.GTextEditor?e.getElement():e;if(ie instanceof i.GText){var ae=ie.hasFontsToResolve();if(ae&&ae.length&&ie.isFakeText()){var re=ae[0].getFamily();re&&(Z=re)}}}for(var se=0;se<a.length;se++){let e,t=a[se];if(t?t===n.getFamily()?e=t:(e=J.gFontsPanel("fontDisplayName",t,X),void 0===e&&(X=null,e=t)):(t="",e=t),void 0===ne)ne=e;else if(ne!==e){ne="",ee=!1,te=!1;break}void 0===oe?oe=t:oe!==t&&(te=!1,oe="")}}for(s=0;s<t.length;s++){var le=null,ce=null;let e;e=t[s]instanceof o.GTextEditor?t[s].getFonts():[t[s].getProperty("_tff")||n.getFamily()];for(se=0;se<e.length;se++){var de=e[se];let t;de===n.getFamily()?(le=ye.getDefaultFontWeights(),le=i.GUtil.unique(le),ce=le.map((function(e){return{weight:e,styles:ye.getDefaultFontStyles().map(e=>e+m+(ee?n.getFamily():"")+m)}}))):J&&(void 0===(le=await J.gFontsPanel("weightsForFont",de,X))&&(X=null),le=le||[],le=i.GUtil.unique(le),ce=le.map((function(e){for(var t=J.gFontsPanel("stylesForWeight",e,de),n=J.gFontsPanel("subfamiliesForWeight",e,de),o=0;o<n.length;o++)t[o]=t[o]+m+(ee?n[o].realName:"")+m+(n[o].subFamily||"");return{weight:e,styles:t}}))),a=i.GUtil.unique(this._intersectArrays(a,le)),r?(t=r,t=t.filter(e=>{if(a.indexOf(e.weight)>=0){var t=ce.find(t=>t.weight===e.weight);if(!t)return!1;var n=[];if(e.styles=e.styles.filter(e=>{var o=e.split(m)[0];if(o&&o.length){var i=t.styles.find(e=>{if(e.startsWith(o))return!0});if(i)return i!==e?(n.push(o+m+m),!0):(n.push(e),!0)}}),e.styles=n,e.styles.length)return!0}return!1})):t=ce.filter(e=>a.indexOf(e.weight)>=0),r=t}}Z?Q.val(Z):Q.val(ne),Q[0]===document.activeElement&&Q[0].select(),this._panel.find('input[data-property="_tfi"]').gUnitBox({unit:this._document&&this._document.getScene().$ut===i.GLength.Unit.PX?i.GLength.Unit.PX:i.GLength.Unit.PT,list:[6,7,8,9,10,11,12,14,18,21,24,36,48,60,72],source:"text"}).gUnitBox("value",null!==G?new i.GLength(G,i.GLength.Unit.PT):null),this._panel.find('[data-property="_fc"]').gPatternChooser("value",P);var ue=this._panel.find('select[data-property="style"]');ue.empty(),r&&r.length||(r=[{weight:400,styles:[i.GFont.Style.Normal]}]),a&&a.length||(a=[400]);for(s=100;s<=900;s+=100)if(a.indexOf(s)>=0){for(var pe=null,ge=0;ge<r.length;ge++)if(r[ge].weight===s){pe=r[ge].styles;break}for(ge=0;pe&&ge<pe.length;ge++){let e;var he=pe[ge].split(m);e=he[0]===i.GFont.Style.Italic?i.GLocale.get(i.GFont.WeightNameItalic[s]):i.GLocale.get(i.GFont.WeightName[s]),he[2]&&he[2].length&&0!=e.indexOf(he[2])&&(e=he[2]+" "+e);var fe=s.toString()+m+he[0]+m+(he[1]||"");$("<option></option>").attr("value",fe).text(e).appendTo(ue)}}this._advancedSettings.find('[data-property="_ttrf-'.concat(i.GStylable.TextTransformation.SmallCaps,'"]')).prop("disabled",!1),this._advancedSettings.find('[data-property="typography-fractions"]').prop("disabled",!1),this._advancedSettings.find('[data-property="typography-ligatures"]').toggleClass("g-active",!0===U),this._advancedSettings.find('[data-property="typography-fractions"]').toggleClass("g-active",!0===p);var me=this._panel.find('select[data-property="_tlsc"]');me.empty(),me.append($("<option></option>").attr("value","auto").text(i.GLocale.get(new i.GLocaleKey("GTextProperties","text.auto"))));var ye,ve=(ye=gDesigner.getWorkspace().getFontManager()).getFont(te&&t[0]&&t[0].getProperty("_tff")||n.getFamily(),x,C);if(ve.isResolved()){ve.hasFeature(i.GFont.Features.SmallCaps)||this._advancedSettings.find('[data-property="_ttrf-'.concat(i.GStylable.TextTransformation.SmallCaps,'"]')).prop("disabled",!0);var _e=ve.getAvailableScripts();for(s=0;s<_e.length;s++){var be=_e[s];if(be){var we=be.toLowerCase().split("");we[0]=we[0].toUpperCase(),be=we.join(""),me.append($("<option></option>").attr("value",_e[s]).text(i.GLocale.get(new i.GLocaleKey("GTextProperties","text.".concat(be.toLowerCase())),be)))}}}[...new Set(t.map(e=>{let t=[],n=e.getProperty("_tff"),a=e.getProperty("_tfs"),r=e.getProperty("_tfw");if(e instanceof o.GTextEditor&&!n){const o=e.getElement().getContent();if(o){const s=i.GText.PropertyMapping._tff,l=i.GText.PropertyMapping._tfs,c=i.GText.PropertyMapping._tfw;t=o.map(t=>(n=e.getElement()._getGravitValue(s,t[s]),a=e.getElement()._getGravitValue(l,t[l]),r=e.getElement()._getGravitValue(c,t[c]),n&&a&&r?ye.getFont(n,a,r,!1):null)).filter(e=>!!e)}}else n&&a&&r&&(t=[ye.getFont(n,a,r,!1)]);return t}).reduce((e,t)=>e.concat(t),[]))].every(e=>e&&e.isResolved()&&e.hasFeature(i.GFont.Features.Fractions))||this._advancedSettings.find('[data-property="typography-fractions"]').prop("disabled",!0),me.val(_);let Ce=ue.val();(ue.val(C+m+x+m+(te?(t[0]||n).getProperty("_tff")||n.getFamily():"")),ue.val())||(this._text.some(e=>e instanceof i.GText&&(g.multipleValues===e.getTLCore().getDocumentRange().getFormatting()[i.GText.PropertyMapping._tfw]||g.multipleValues===e.getTLCore().getDocumentRange().getFormatting()[i.GText.PropertyMapping._tfs]))?($("<option></option>").attr("value","mixed").text(i.GLocale.get(new i.GLocaleKey("GTextProperties","text.mixed"))).appendTo(ue),ue.val("mixed")):ue.val(Ce));let xe=a.indexOf(i.GFont.Weight.Bold)>=0;C&&parseInt(C)===i.GFont.Weight.Bold||x&&x===i.GFont.Style.Italic&&(xe=r.some(e=>{let{weight:t,styles:n}=e;return t===i.GFont.Weight.Bold&&n.some(e=>0===e.indexOf(i.GFont.Style.Italic))})),this._panel.find('[data-property="decoration-bold"]').toggleClass("g-active",xe&&!!C&&parseInt(C)===i.GFont.Weight.Bold).prop("disabled",!xe);const Se=r.some(e=>{let{weight:t,styles:n}=e;return t===parseInt(C||i.GFont.Weight.Regular)&&n.some(e=>0===e.indexOf(i.GFont.Style.Italic))});this._panel.find('[data-property="decoration-italic"]').toggleClass("g-active",Se&&!!x&&x===i.GFont.Style.Italic).prop("disabled",!Se),this._panel.find('[data-property="decoration-underline"]').toggleClass("g-active",1==d),this._panel.find('[data-property="decoration-strikeout"]').toggleClass("g-active",1==u),this._panel.find('input[data-property="_tws"]').val(null!==D?this._document.getScene().pointToString(D,this._document.getScene().getOptimalDecimalsCount()):"0"),this._panel.find('input[data-property="_tcs"]').val(null!==L?this._document.getScene().pointToString(L,this._document.getScene().getOptimalDecimalsCount()):"0");var Ee=I||i.GStylable.ParagraphAlignment.Left,Ae=this._panel.find('button[data-property^="_pal"]');Ae.each((function(e,t){var n=$(t);n.toggleClass("g-active",n.attr("data-property")==="_pal-"+Ee)})),Ae.closest(".g-property-row").css("display",V?"none":"");var Te=k,Ge=this._panel.find('button[data-property="_plh_unit"]');if("number"==typeof Te)Ge.text("%"),this._panel.find('input[data-property="_plh"]').val(i.GUtil.formatNumber(100*Te));else if("string"==typeof Te||Te instanceof String){const e=this._document.getScene();var Pe=e.getProperty("ut");Ge.text(Pe||"px"),this._panel.find('input[data-property="_plh"]').val(e.pointToString(k,e.getOptimalDecimalsCount()))}else this._panel.find('input[data-property="_plh"]').val("");if(e&&(e.evtType==o.GEditor.ModifiedEvent.Type.Undo||e.evtType==o.GEditor.ModifiedEvent.Type.Redo)&&e.chooserOn&&e.textPattern&&this._panel.find('[data-property="_fc"]').find(".preview").trigger("click"),this._weightsAvailable=a,this._listTypeSettings.find(".list-type-group.g-selected").removeClass("g-selected"),this._listTypeSettings.find(".list-type-option.g-selected").removeClass("g-selected"),this._advancedSettings.find('[data-property="_pm"] > span').text(""),"string"==typeof h){const e=Object.values(y).find(e=>{let{types:t=[]}=e;return t.find(e=>{let{value:t}=e;return t===h})});e&&this._advancedSettings.find('[data-property="_pm"] > span').text(e.label),this._listTypeSettings.find('.list-type-option[value="'.concat(h,'"]')).addClass("g-selected").closest(".list-type-group").addClass("g-selected")}else null==h&&(this._advancedSettings.find('[data-property="_pm"] > span').text(y.None.label),this._listTypeSettings.find('.list-type-group[value="'.concat(y.None.value,'"]')).addClass("g-selected"));this._updateLanguageSelector(ve,_,N),this._updateStylisticSetSelector(ve,_,B)},v.prototype._updateLanguageSelector=function(e,t,n){const o=this._advancedSettings.find('select[data-property="_tlocl"]').empty().attr("disabled",!0).addClass("g-disabled");if(!e.isResolved()||!e.hasFeature(i.GFont.Features.LocalizedForm))return;let a=null;t&&"auto"!==t&&(a=i.GOpenTypeFont.scriptNameToOpenTypeScriptTagString(t));const r=e.getAvailableLanguageSystemTags(a);if(r&&0!==r.length)if(o.attr("disabled",!1).removeClass("g-disabled"),o.append($("<option/>").attr("value","").text(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.default")))),o.append(r.map(e=>{const t=i.GOpenTypeFont.openTypeLanguageSystemTagStringToBCP47(e);return{name:i.GLocale.get(new i.GLocaleKey("GBCP47LanguageTags","text.lang.".concat(t))),tag:e}}).sort((e,t)=>e.name.localeCompare(t.name)).map(e=>{let{name:t,tag:n}=e;return $("<option/>").attr("value",n).text(t)})),n)o.val(n);else{this._hasMultipleLanguages()&&(o.append($("<option/>").attr("value","mixed").attr("hidden",!0).attr("disabled",!0).text(i.GLocale.get(new i.GLocaleKey("GTextProperties","text.mixed")))),o.val("mixed"))}},v.prototype._updateStylisticSetSelector=function(e,t,n){const o=this._advancedSettings.find('select[data-property="_tstyls"]').empty().attr("disabled",!0).addClass("g-disabled");if(!e.isResolved()||!e.hasFeature(i.GFont.Features.StylisticSet))return;let a=null;t&&"auto"!==t&&(a=i.GOpenTypeFont.scriptNameToOpenTypeScriptTagString(t));const r=e.getAvailableStylisticSets(a);if(r&&0!==r.length)if(o.attr("disabled",!1).removeClass("g-disabled"),o.append($("<option/>").attr("value","").text(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.none")))),o.append(r.map(e=>$("<option/>").attr("value",e).text(e.toUpperCase()))),n)o.val(n);else{this._hasMultipleStylisticSets()&&(o.append($("<option/>").attr("value","mixed").attr("hidden",!0).attr("disabled",!0).text(i.GLocale.get(new i.GLocaleKey("GTextProperties","text.mixed")))),o.val("mixed"))}},v.prototype._hasMultipleLanguages=function(){return this._hasMultipleValues(i.GText.PropertyMapping._tlocl)},v.prototype._hasMultipleStylisticSets=function(){return this._hasMultipleValues(i.GText.PropertyMapping._tstyls)},v.prototype._hasMultipleValues=function(e){return this._text.some(t=>{if(t instanceof i.GText){const n=t.getTLCore().getDocumentRange().getFormatting()[e];return g.multipleValues===n}})},v.prototype._correctStyleAndWeight=async function(e,t,n){var o=null,a=null,r=gDesigner.getWorkspace().getFontManager(),s=r.getDefaultFont(),l=this._panel.find('input[data-property="_tff"]').gFontsButton("getFontList"),c=!1;if(e===s.getFamily()?a=(o=r.getDefaultFontWeights())&&o.map((function(e){return{weight:e,styles:r.getDefaultFontStyles()}})):l&&(a=(o=await l.gFontsPanel("weightsForFont",e,(function(){console.warn("textproperties: Unexpected callback")}),!0))&&o.map((function(t){return{weight:t,styles:l.gFontsPanel("stylesForWeight",t,e,(function(){console.warn("textproperties: Unexpected callback")}),!0)}}))),o&&o.indexOf(n[0])<0){for(var d=0,u=0;u<o.length;u++)Math.abs(n[0]-o[u])<Math.abs(n[0]-o[d])&&(d=u);n[0]=o[d],c=!0}var p=(a||[]).filter((function(e){if(e.weight===n[0])return!0}))||[];return p.length&&p[0].styles.indexOf(t[0])<0&&(t[0]===i.GFont.Style.Normal&&p[0].styles.length?t[0]=i.GFont.Style.Italic:t[0]=i.GFont.Style.Normal,c=!0),c},v.prototype._toggleFormatting=function(e){if(this._text&&this._text.length){const n=this._text.map(e=>o.GElementEditor.getEditor(e)||e),a=this._getFormatting("underline",n)||null,r=this._getFormatting("strikeout",n)||null;var t=this._getFormatting("ligatures",n);const s={underline:a,strikeout:r,ligatures:t="auto"===t?!this._getProperty("_tcs",n):!!t,fractions:this._getFormatting("fractions",n)},l=this._getProperty("_tfw",n)||"",c=this._getProperty("_tfs",n)||"";if("bold"===e){let e;parseInt(l)===i.GFont.Weight.Bold?(e=this._weightsAvailable.indexOf(i.GFont.Weight.Regular)>=0?i.GFont.Weight.Regular:Math.min.apply(null,this._weightsAvailable),e=e||i.GFont.Style.Regular):e=i.GFont.Weight.Bold,this._assignProperties(["_tfw"],[e])}else if("italic"===e)this._assignProperties(["_tfs"],[c===i.GFont.Style.Italic?i.GFont.Style.Normal:i.GFont.Style.Italic]);else{const t=this._document.getEditor();try{t.beginTransaction(),this._text.forEach(t=>{if(t instanceof o.GTextEditor&&(t=t.getElement()),t instanceof i.GText){const n=t.getTLCore();if(n){let i;const a=o.GElementEditor.getEditor(t);i=a&&a.isInlineEdit()?n.selectedRange():n.getDocumentRange(),i&&i.setFormatting(e,1!=s[e])}}})}finally{t.commitTransaction(i.GLocale.get(new i.GLocaleKey("GTextProperties","action.modify-text-properties")))}}this._updateProperties()}},v.prototype._assignFont=async function(e){if(gDesigner.getWorkspace().getFontManager().getDefaultFont().getFamily()!==e){var t=this._panel.find('input[data-property="_tff"]').gFontsButton("getFontList");if(void 0===await t.gFontsPanel("weightsForFont",e,()=>{this._assignFontMain(e)}))return}this._assignFontMain(e)},v.prototype._assignMarker=function(e){if(!this._document)return;const t=this._document.getEditor();this._ownChange=!0,t.beginTransaction();try{this._text.forEach(t=>{if(t instanceof o.GTextEditor&&(t=t.getElement()),t instanceof i.GText){const n=t.getTLCore();if(n){let i;const a=o.GElementEditor.getEditor(t);i=a&&a.isInlineEdit()?n.selectedRange():n.getDocumentRange(),i&&i.toggleList(e)}}})}finally{t.commitTransaction(i.GLocale.get(new i.GLocaleKey("GTextProperties","action.modify-text-properties"))),this._ownChange=!1}},v.prototype._assignFontMain=async function(e){var t,n,a=gDesigner.getWorkspace().getFontManager();a.getDefaultFont();if(this._document){var r=this._document.getEditor();if(this._text.length){r.beginTransaction();try{for(var s=0;s<this._text.length;++s){var l=o.GElementEditor.getEditor(this._text[s]);if(this._text[s]instanceof i.GText&&this._text[s].isFakeText()){var c=this._text[s].getContent(),d={};c&&c.forEach(t=>{d[t.fontFamily]=e});var u=this._text[s].getProperty("_tff");d[u]=e,this._text[s].replaceFonts(d,!0)}else{var p=l||this._text[s],g=["_tff"],h=[e],f=this._text[s]instanceof i.GText&&this._text[s].getTLCore();if(f){let o;o=l&&l.isInlineEdit()?f.selectedRange():f.getDocumentRange();for(var m=o.save(),y=i.GText.PropertyMapping._tfs,v=i.GText.PropertyMapping._tfw,_=(i.GText.PropertyMapping._tff,!1),b=!1,w=0;w<m.length;w++){var C="italic"===m[w][y]?i.GFont.Style.Italic:i.GFont.Style.Normal,x=~~m[w][v];if(t=[C],n=[x],await this._correctStyleAndWeight(e,t,n)){var S=g.indexOf("_tfs"),E=g.indexOf("_tfw");if(C!==t[0]){if(S<0&&(S=g.length,g.push("_tfs"),h.push("")),b){h[E]=n[0],h[S]=t[0];break}h[S]=t[0],_=!0}if(x!==n[0]){if(E<0&&(E=g.length,g.push("_tfw"),h.push("")),_){h[S]=t[0],h[E]=n[0];break}h[E]=n[0],b=!0}}}}else{if(t=[p.getProperty("_tfs")||i.GFont.Style.Normal],n=[p.getProperty("_tfw")||i.GFont.Weight.Regular],await this._correctStyleAndWeight(e,t,n),!a.getFont(e,t[0],n[0]))continue;Array.prototype.push.apply(g,["_tfs","_tfw"]),Array.prototype.push.apply(h,[t[0],n[0]])}p.setProperties(g,h)}if(l){var A=l.getDefaultStyle();A&&A.assignStyleFrom(this._text[s])}this._text[s]instanceof i.GStyle&&this._updateProperties()}}finally{r.commitTransaction(i.GLocale.get(new i.GLocaleKey("GTextProperties","action.modify-text-properties")))}}}},v.prototype._assignProperty=function(e,t,n,o){this._assignProperties([e],[t],n,o)},v.prototype._assignProperties=function(e,t,n,a){if(this._document){var r=this._document.getEditor();n||(this._ownChange=!0,r.beginTransaction());try{for(var s=0;s<this._text.length;++s){(l=o.GElementEditor.getEditor(this._text[s]))?l.setProperties(e,t,n):this._text[s].setProperties(e,t,!1,!1,n)}}finally{n||(r.commitTransaction(i.GLocale.get(new i.GLocaleKey("GTextProperties","action.modify-text-properties")),a||null),this._ownChange=!1)}if(e.includes("sc"))for(s=0;s<this._text.length;++s){var l;(l=o.GElementEditor.getEditor(this._text[s]))&&l.requestInvalidation()}}},v.prototype.toString=function(){return"[Object GTextProperties]"},e.exports=v},function(e,t,n){"use strict";n(181),n(3);var o=n(45),i=n(1),a=n(845),r=n(846),s=n(115),l=n(125);function c(){this._elements=[]}i.GObject.inherit(c,s),c.prototype._panel=null,c.prototype._document=null,c.prototype._elements=null,c.prototype.isGroup=function(e){return!1},c.prototype.init=function(e,t){this._panel=e;var n=e=>{var t=a.ID+"."+e,n=gDesigner.getAction(t);return $("<button></button>").attr("data-action",t).on("click",this._executeAction.bind(this)).text(i.GLocale.get(n.getTitle()))};$("<hr/>").appendTo(this._panel),$("<div></div>").gPropertyRow({columns:[{width:"45%",content:n(o.GEditor.ArrangeAlignType.AlignJustifyHorizontal)},{width:"10%"},{width:"45%",content:n(o.GEditor.ArrangeAlignType.AlignJustifyVertical)}]}).appendTo(this._panel),$("<div></div>").gPropertyRow({columns:[{width:"45%",prefix:{label:i.GLocale.get(new i.GLocaleKey("GAlignProperties","text.space-x")),width:"50px"},content:$("<input>").on("keydown",this._spaceEvent.bind(this)).attr({type:"text","data-dist":r.Type.Horizontal}).val("1").gInputBox({minValue:1})},{width:"10%"},{width:"45%",prefix:{label:i.GLocale.get(new i.GLocaleKey("GAlignProperties","text.space-y")),width:"50px"},content:$("<input>").on("keydown",this._spaceEvent.bind(this)).attr({type:"text","data-dist":r.Type.Vertical}).val("1").gInputBox({minValue:1})}]}).appendTo(this._panel)},c.prototype._executeAction=function(e){var t=$(e.target).closest("[data-action]").attr("data-action");t&&gDesigner.executeAction(t,void 0,"alignproperties")},c.prototype._spaceEvent=function(e){if(13===e.keyCode){var t=$(e.target).closest("input"),n=t.attr("data-dist"),o=this._document.getScene().stringToPoint(t.gInputBox("value"));!isNaN(o)&&o>0&&gDesigner.executeAction(r.ID+"."+n,[this._elements,null,o],"shortcut"),this._updateDisplayValues()}},c.prototype.isAvailable=function(e){return!0===e},c.prototype.update=function(e,t){if(this._document&&(this._document=null,gDesigner.removeEventListener(l,this._settingChanged)),this._elements=[],e){for(var n=0;n<t.length;++n)!t[n].hasMixin(i.GElement.Transform)||t[n]instanceof i.GPage||this._elements.push(t[n]);if(this._elements.length>=2&&this._elements.length===t.length)return this._document=e,gDesigner.addEventListener(l,this._settingChanged,this),!0}return!1},c.prototype._settingChanged=function(e){"decimals_num"===e.key&&this._updateDisplayValues()},c.prototype._updateDisplayValues=function(){this._panel.find("[data-dist]").each(function(e,t){var n=$(t),o=parseFloat(n.gInputBox("value"));o=isNaN(o)||o<=0||!o?1:o,n.gInputBox("value",i.GUtil.formatNumber(o,this._document.getScene().getOptimalDecimalsCount()))}.bind(this))},c.prototype.toString=function(){return"[Object GAlignProperties]"},e.exports=c},function(e,t,n){"use strict";var o=n(14);n(51),n(7),n(28);var i=n(1),a=n(45),r=n(9),s=n(1252),l=o(n(1254)),c=n(77),d=null;function u(){return d||(d=[{name:i.GLocale.get(new i.GLocaleKey("GSettingsDialog","text.light-theme"))+" ("+i.GLocale.get(new i.GLocaleKey("GCommonNames","text.default")).toLowerCase()+")",localeClass:new i.GLocaleKey("GSettingsDialog","text.light-theme"),key:"light"},{name:i.GLocale.get(new i.GLocaleKey("GSettingsDialog","text.dark-theme")),localeClass:new i.GLocaleKey("GSettingsDialog","text.dark-theme"),key:"dark"}]),new Promise((e,t)=>{this._buildDialog().then(()=>e(this)).catch(()=>t(!1))})}i.GObject.inherit(u,i.GObject),u.prototype._buildDialog=async function(){let e=(await r.gApi.getUserSettings().catch(()=>({notifications_disabled:!1}))).notifications_disabled;this._dialog=$("<div></div>").append(this._createSetting(i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.highlight-on-hover")),i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.highlight-on-hover-description")),$("<label></label>").addClass("g-switch").append($("<input>").attr("type","checkbox").attr("data-setting","highlight_on_hover").on("change",()=>{gDesigner.stats("settings_toggle_highlight-on-hover")}).prop("checked",gDesigner.getSetting("highlight_on_hover"))).append($("<div/>")))).append(this._createSetting(i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.auto-expand-layers")),i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.auto-expand-layers-description")),$("<label></label>").addClass("g-switch").append($("<input>").attr("type","checkbox").attr("data-setting","auto_expand_layers").on("change",()=>{gDesigner.stats("settings_toggle_auto-expand-layers")}).prop("checked",gDesigner.getSetting("auto_expand_layers"))).append($("<div/>")))),r.AUTO_SAVE_ENABLED&&(this._dialog.append(this._createSetting(i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.auto-save")),i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.auto-save-description")),this._createAutoSaveSetting())),this._dialog.append(this._createSetting(i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.auto-save-warning")),i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.auto-save-warning-description")),$("<label/>").addClass("g-switch").append($("<input>").attr("type","checkbox").attr("data-setting",s.DISABLE_WARNING_SETTING_NAME).on("change",(function(){const e=!!this.checked;gDesigner.stats("settings_toggle_auto-save-warning-enabled",e)})).prop("checked",!gDesigner.getSetting(s.DISABLE_WARNING_SETTING_NAME,!1))).append($("<div/>"))))),"production"===gDesigner.getEnv()||gDesigner.isBeta()||"lts"===gDesigner.getEnv()||"rc"===gDesigner.getEnv()||(this._dialog.append(this._createSetting(i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.enable_steps_debug")),null,$("<label></label>").addClass("g-switch").append($("<input>").attr("type","checkbox").attr("data-setting","enable_steps_debug").on("change",()=>{gDesigner.stats("settings_toggle_steps-debug")}).prop("checked",gDesigner.getSetting("enable_steps_debug",a.GEditorOptions.debugTransactions))).append($("<div></div>")))),this._dialog.append(this._createSetting("Enable cached rendering",null,$("<label></label>").addClass("g-switch").append($("<input>").attr("type","checkbox").attr("data-setting","enable_cache").on("change",()=>{gDesigner.stats("settings_toggle_cache")}).prop("checked",gDesigner.getSetting("enable_cache",i.GRendererConfig.ENABLE_CACHE))).append($("<div></div>"))))),this._dialog.append(this._createSetting(i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.change-theme")),null,this._createThemeSelector()).append(this._createSetting(null,i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.ui-toolbar-alignment")),$("<label></label>").addClass("g-switch").append($("<input>").attr("type","checkbox").attr("data-setting","ui_toolbar_alignment").on("change",()=>{gDesigner.stats("settings_toggle_ui-toolbar-alignment")}).prop("checked",gDesigner.getSetting("ui_toolbar_alignment",!1))).append($("<div></div>"))).addClass("sub-setting"))),this._dialog.append(this._createSetting(i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.store-textpath")),i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.store-textpath-description")),$("<label></label>").addClass("g-switch").append($("<input>").attr("type","checkbox").attr("data-setting","dont_store_textpath").on("change",()=>{gDesigner.stats("settings_toggle_store-textpath")}).prop("checked",!gDesigner.getSetting("dont_store_textpath",i.GText.dontStorePaths))).append($("<div></div>")))),this._dialog.append(this._createSetting(i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.decimals-num")),i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.decimals-num-description")),this._createDecimalsNum())),this._dialog.append(this._createSetting(i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.disable-warning-unsupported-features")),i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.disable-warning-unsupported-features-description")),$("<label></label>").addClass("g-switch").append($("<input>").attr("type","checkbox").attr("data-setting","disable_warning_unsupported_features").on("change",()=>{gDesigner.stats("settings_toggle_warning-unsupported-features")}).prop("checked",gDesigner.getSetting("disable_warning_unsupported_features",!1))).append($("<div></div>")))),this._dialog.append(this._createSetting(i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.eps-outline-fonts")),i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.eps-outline-fonts-description")),$("<label></label>").addClass("g-switch").append($("<input>").attr("type","checkbox").attr("data-setting","eps_outline_fonts").on("change",()=>{gDesigner.stats("settings_toggle_eps-outline-fonts")}).prop("checked",gDesigner.getSetting("eps_outline_fonts",!0))).append($("<div></div>")))),this._dialog.append(this._createSetting(i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.disable-notifications")),i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.disable-notifications-description")),$("<label></label>").addClass("g-switch test").append($("<input>").attr("type","checkbox").attr("data-setting","notifications_disabled").on("change",()=>{gDesigner.stats("settings_toggle_disable-notifications")}).prop("checked",e)).append($("<div></div>")))),this._dialog.append(this._createSetting(i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.disable-scrubbing")),null,$("<label></label>").addClass("g-switch").append($("<input>").attr("type","checkbox").attr("data-setting",l.default.getSetting()).on("change",e=>{const t=$(e.target).closest("input").is(":checked");gDesigner.stats("settings_toggle_disable-scrubbing",t)}).prop("checked",!l.default.isEnabled())).append($("<div></div>")))),gContainer.getRuntime()===c.Runtime.Electron&&this._dialog.append(this._createSetting(i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.create-backup-copy-of-file")),i.GLocale.get(new i.GLocaleKey("GSettingsDialog","setting.create-backup-copy-of-file-description")),$("<label></label>").addClass("g-switch").append($("<input>").attr("type","checkbox").attr("data-setting","create_backup_copy").on("change",()=>{gDesigner.stats("settings_toggle_create-backup-copy")}).prop("checked",gDesigner.getSetting("create_backup_copy",!1))).append($("<div></div>")))),this._dialog.gDialog({releaseOnClose:!0,className:"g-settings-dialog",buttons:[$('<button class="settings-button">'+i.GLocale.get(new i.GLocaleKey("GLocale","cancel"))+"</button>").on("click",()=>{gDesigner.stats("settings_cancel_settings"),this.close()}),$('<button class="settings-button">'+i.GLocale.get(new i.GLocaleKey("GSettingsDialog","action.save-changes"))+"</button>").on("click",()=>{gDesigner.stats("settings_save_settings"),this.save(this.close.bind(this))})]})},u.prototype.open=function(){this._dialog.gDialog("open",!1)},u.prototype.close=function(){this._dialog.gDialog("close")},u.prototype.save=async function(e){this._saveBasicSettings(),await this._saveNotificationSetting(),e(),$(".symbols-container").triggerHandler("scroll")},u.prototype._saveNotificationSetting=async function(){var e=this._dialog.find('[data-setting="notifications_disabled"]').prop("checked"),t=await r.gApi.getUserSettings();t&&t.notifications_disabled!==e&&await r.gApi.updateUserSettings({notifications_disabled:e},!0)},u.prototype._saveBasicSettings=function(){var e=r.AUTOSAVE_INTERVALS[parseInt(this._dialog.find('[data-setting="'.concat(s.AUTO_SAVE_INTERVAL_SETTING,'"]')).val())],t=null;if(this._dialog.find('[data-setting="decimals-num-onoff"]').prop("checked")){var n=this._dialog.find('[data-setting="decimals-num-val"]').gInputBox("value"),o=i.GUtil.parseNumber(n);"number"!=typeof o||isNaN(o)||(t=o)}gDesigner.setSetting(["highlight_on_hover","auto_expand_layers",s.AUTO_SAVE_SETTING,s.DISABLE_WARNING_SETTING_NAME,"system_fonts_enabled","theme","dont_store_textpath","enable_steps_debug","enable_cache","disable_warning_unsupported_features","eps_outline_fonts","ui_toolbar_alignment","decimals_num",s.AUTO_SAVE_INTERVAL_SETTING,"create_backup_copy",l.default.getSetting()],[this._dialog.find('[data-setting="highlight_on_hover"]').prop("checked"),this._dialog.find('[data-setting="auto_expand_layers"]').prop("checked"),this._dialog.find('[data-setting="'.concat(s.AUTO_SAVE_SETTING,'"]')).prop("checked"),!this._dialog.find('[data-setting="'.concat(s.DISABLE_WARNING_SETTING_NAME,'"]')).prop("checked"),this._dialog.find('[data-setting="system_fonts_enabled"]').prop("checked"),this._dialog.find('[data-setting="theme"]').data("theme"),!this._dialog.find('[data-setting="dont_store_textpath"]').prop("checked"),this._dialog.find('[data-setting="enable_steps_debug"]').prop("checked"),this._dialog.find('[data-setting="enable_cache"]').prop("checked"),this._dialog.find('[data-setting="disable_warning_unsupported_features"]').prop("checked"),this._dialog.find('[data-setting="eps_outline_fonts"]').prop("checked"),this._dialog.find('[data-setting="ui_toolbar_alignment"]').prop("checked"),t,e,this._dialog.find('[data-setting="create_backup_copy"]').prop("checked"),!this._dialog.find('[data-setting="'.concat(l.default.getSetting(),'"]')).prop("checked")])},u.prototype._createSetting=function(e,t,n){var o=$("<div></div>").addClass("text-description").append($("<div></div>").text(e).addClass("label"));return t?(o=o.append($("<div></div>").addClass("description").html(t))).find("a").attr("target","_blank"):o.css({verticalAlign:"middle"}),$("<div></div>").addClass("setting").append($("<div></div>").addClass("form").append(o).append($("<div></div>").addClass("editor").append(n)))},u.prototype._createThemeSelector=function(){for(var e,t=function(e,t){return $("<div/>").html(e.name).addClass("g-theme-row").on("click",(function(){gDesigner.stats("settings_change_theme",i.GLocale.get(e.localeClass,null,i.GLocaleLanguage.English)),$(".g-theme-selector").data("theme",e.key).text(e.name),t&&t()}))},n=0;n<d.length;++n)if(d[n].key===gDesigner.getSetting("theme","light")){e=d[n];break}e=e||d[0];var o=function(){$(".g-overlay.theme-selector").find(".g-theme-row:hover").trigger("click")};return $("<div/>").attr("type","button").addClass("g-select").css("min-width","170px").css("width","max-content").text(e.name).attr("data-setting","theme").data("theme",e.key).addClass("g-theme-selector").on("click",(function(e){for(var n=$("<div/>"),i=0;i<d.length;++i)n.append(t(d[i],(function(){n.gOverlay("close")})));n.gOverlay({padding:!1,releaseOnClose:!0,clazz:"theme-selector",enterCallback:o}).gOverlay("open",e.target)}))},u.prototype._createDecimalsNum=function(){var e=gDesigner.getSetting("decimals_num",i.GScene.decimalsNum),t=$("<div/>").append($("<input>").attr("type","text").css("width","60px").css("display",null!==gDesigner.getSetting("decimals_num",i.GScene.decimalsNum)?"":"none").attr("data-setting","decimals-num-val").gInputBox({minValue:0,maxVal:6}).on("change",function(e){gDesigner.stats("settings_change_decimals-num");var t=$(e.target).gInputBox("value");(t=i.GUtil.parseNumber(t))<0&&(t=0),t>6&&(t=6),$(e.target).gInputBox("value",null!==t?i.GUtil.formatNumber(t,0):"2")}.bind(this)).gInputBox("value",null!==e?i.GUtil.formatNumber(e,0):"2"));return $("<div/>").append($("<label></label>").addClass("g-switch").append($("<input>").attr("type","checkbox").attr("data-setting","decimals-num-onoff").prop("checked",null!==gDesigner.getSetting("decimals_num",i.GScene.decimalsNum))).on("change",function(e){gDesigner.stats("settings_change_decimals-num");var t=gDesigner.getSetting("decimals_num",i.GScene.decimalsNum),n="2";null!==t&&(n=i.GUtil.formatNumber(t,0)),this._dialog.find('[data-setting="decimals-num-val"]').css("display",$(e.target).prop("checked")?"":"none").gInputBox("value",n)}.bind(this)).append($("<div></div>"))).append(t)},u.prototype._createAutoSaveSetting=function(){var e=$("<label/>").addClass("g-switch").append($("<input>").attr("type","checkbox").attr("data-setting","auto_save").on("change",(function(){const e=!!this.checked;gDesigner.stats("settings_toggle_auto-save",e)})).prop("checked",gDesigner.getSetting("auto_save",!0))).append($("<div/>")),t=$("<select/>").attr("data-setting",s.AUTO_SAVE_INTERVAL_SETTING).on("change",(function(){const e=r.AUTOSAVE_INTERVALS[$(this).val()];gDesigner.stats("settings_change_auto-save-interval",e)}));return r.AUTOSAVE_INTERVALS.forEach((e,n)=>{var o=$("<option/>").text(e).val(n);t.append(o)}),t.val(r.AUTOSAVE_INTERVALS.indexOf(gDesigner.getSetting(s.AUTO_SAVE_INTERVAL_SETTING,r.AUTOSAVE_INTERVAL_DEFAULT))),[e,t]},e.exports=u},function(e,t,n){"use strict";n(52),n(17),n(181),n(7),n(183),n(18),n(62),n(29),n(22);var o=n(1);const{gApi:i,AUTO_SAVE_ENABLED:a,AUTOSAVE_INTERVAL_DEFAULT:r,CloudIntegration:s,DESIGNER:l,EXTERNAL_APP:c}=n(9),{buildDialogDocumentHasUpdates:d}=n(34),u=n(77),p=n(37),g=n(539),h=n(433),f=n(71),m=n(125),y=n(277),v=n(1505),_=n(1509),b=n(78),w=n(203),{SETUP:C,CODES:x}=n(573),S=n(1253);function E(){if(this._pendingSyncDialog=new Set,this._pendingFormatNotSupportDialog=new Set,this._pendingEntriesNotCreatedWarning=new Set,this._documentsMap=new Map,this._savingQueue=new _,this._savingQueue.onNext(this._processDocumentSave.bind(this)),E._instance&&console.warn("[GAutoSaveManager] Already initiated"),this._autoSaveWorker=new Worker("./autosave.worker.js"),!this._autoSaveWorker)return console.warn("[GAutoSaveManager] Worker initiation failed"),Promise.reject();this._autoSaveWorker.postMessage({cmd:C.ENDPOINT,data:{url:i.url}}),this._autoSaveModel=new v(this._autoSaveWorker),this._updateStatus(gDesigner.getSetting(E.AUTO_SAVE_SETTING)?E.Status.Stopped:E.Status.Disabled),this._setInterval(gDesigner.getSetting(E.AUTO_SAVE_INTERVAL_SETTING)),gContainer.getProperty(E.AUTO_SAVE_WARN_DIALOG_SHOWN).then(e=>{this._warnDialogShown=!!e}),gDesigner.addEventListener(f,this._documentEvent,this),gDesigner.addEventListener(m,this._settingsChangedEvent,this),gDesigner.addEventListener(y,this._networkAvailabilityChangedEvent,this)}E.ALTERNATE_STRINGS=[new o.GLocaleKey("GAutoSave","text.notification-message-1"),new o.GLocaleKey("GAutoSave","text.notification-message-2"),new o.GLocaleKey("GAutoSave","text.notification-message-3")],E.DISABLE_EXTERNAL_FILE_NO_ENTRIES_CREATED_WARING="disable-external-file-no-entries-created-waring",E.DISABLE_WARNING_SETTING_NAME="autosave-prompt-for-local-files-disabled",E.REMINDER_FOR_CDR_DES_FILE="autosave-prompt-for-reminding-not-support-cdr-des",E.AUTO_SAVE_SETTING="auto_save",E.AUTO_SAVE_INTERVAL_SETTING="auto_save_interval",E.AUTO_SAVE_WARN_DIALOG_SHOWN="designer.settings.auto-save-warn-dialog-shown",E.AUTO_SAVE_HIDE_NOTIFICATION_PROP_NAME="designer.settings.auto-save-hide-notification",E.Status={Stopped:-1,Enabled:0,Disabled:1},E._instance=null,E.prototype._timerId=null,E.prototype._warnDialogShown=!1,E.prototype._fileUpdatedWarningShowing=!1,E.prototype._warnDialogTimer=null,E.prototype._status=E.Status.Stopped,E.prototype._documentsMap=null,E.prototype._pendingSyncDialog=null,E.prototype._pendingFormatNotSupportDialog=null,E.prototype._pendingEntriesNotCreatedWarning=null,E.prototype._savingQueue=null,E.prototype._syncDialogShown={},E.prototype._formatNotSupportDialogShown={},E.prototype._noEntriesCreatedWaringShown={},E.prototype._offlineAlert=null,E.prototype._interval=null,E.prototype._autoSaveWorker=null,E.getInstance=function(){return E._instance||(E._instance=new E),E._instance},E.prototype._updateStatus=function(e){this._status=e},E.prototype.getStatus=function(){return this._status},E.prototype._setInterval=function(e){const t=parseFloat(e)||r;this._interval=60*t*1e3},E.prototype._shouldHandle=async function(e){return!e.isCloudFile()||await e.canSaveToCloud()||e.isExternalFile()},E.prototype._processDocumentSave=async function(e){if(!await this._shouldHandle(e))return;if(!this._warnDialogShown){this._warnDialogTimer&&clearTimeout(this._warnDialogTimer);if(!await this._showWarnDialog())return}if(this._resetDocumentTimeout(e,this.getStatus()===E.Status.Enabled),gDesigner.isOffline())return this._toggleOfflineAlert(!0),Promise.reject(x.AUTOSAVE_OFFLINE_NOT_AVAILABLE);this._offlineAlert&&this._toggleOfflineAlert(!1);const t=[b.Saving,b.Syncing,b.Loading].includes(e.getStatus());return this._autoSaveModel.has(e)||t?x.AUTOSAVE_ALREADY_SAVING:e.isCloudFile()||e.isExternalFile()?this._isCDRFile(e)?(this._executeDocumentFormatNotSupportedDialog(e),x.AUTOSAVE_CLOUD_SYNCHRONIZM_NOT_AVAILABLE):e.isWebFile()||e.isCloudSyncOn()||e.isExternalFile()?e.isExternalFile()&&!await this._executeExternalFileWarningDialog(e)?x.AUTOSAVE_CLOUD_SYNCHRONIZM_NOT_AVAILABLE:e.isModified()?await e.isUpdateAvailable()?(this._executeDocumentConflictResolutionDialog(e),x.AUTOSAVE_FILE_CONFLICT):this._runAndScheduleAutoSave(e):x.AUTOSAVE_NOT_MODIFIED:x.AUTOSAVE_LOCAL_FILES_WITHOUT_CID_NOT_AVAILABLE:(this._executeDocumentSyncDialog(e),x.AUTOSAVE_CLOUD_SYNCHRONIZM_NOT_AVAILABLE)},E.prototype._executeDocumentSyncDialog=function(e){this._syncDialogShown[e.sessionId]||(gDesigner.isActiveDocument(e)?this._showSyncDialog(e):this._pendingSyncDialog.add(e))},E.prototype._executeDocumentFormatNotSupportedDialog=function(e){this._formatNotSupportDialogShown[e.sessionId]||(gDesigner.isActiveDocument(e)?this._showFormatNotSupportedDialog(e):this._pendingFormatNotSupportDialog.add(e))},E.prototype._executeDocumentConflictResolutionDialog=function(e){gDesigner.isActiveDocument(e)&&(this._dialogResolveDocumentConflicts&&this._dialogResolveDocumentConflicts.gDialog("isOpen")&&this._dialogResolveDocumentConflicts.gDialog("close"),this._dialogResolveDocumentConflicts=d.call(this,e,function(e){e.reload()}.bind(this),function(e){this._runAndScheduleAutoSave(e)}.bind(this)))},E.prototype._executeExternalFileWarningDialog=async function(e){return e.getStorageItem()&&await e.getStorageItem().hasUpdates()&&!this._fileUpdatedWarningShowing?this._showExternalFileUpdatedOutAppWarningDialog(e):!!this._noEntriesCreatedWaringShown[e.sessionId]||(gDesigner.isActiveDocument(e)?this._showNoEntriesCreatedInVersionHistoryForExternalFileWarningDialog(e):(this._pendingEntriesNotCreatedWarning.add(e),!1))},E.prototype._runAndScheduleAutoSave=function(e){return this._handleAutoSave(e).finally(()=>{this._resetDocumentTimeout(e,this.getStatus()===E.Status.Enabled)})},E.prototype._handleAutoSave=function(e){return gDesigner.isActiveDocument(e)&&this._showNotification(),this._autoSaveModel.save(e).catch(t=>{console.warn("[GAutoSaveManager][Failed to auto save]",t),gDesigner.isActiveDocument(e)&&this._showNotification(!0)})},E.prototype._resetDocumentTimeout=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this._documentsMap.get(e);n.timeoutId&&(clearTimeout(n.timeoutId),n.timeoutId=null),t&&(n.timeoutId=setTimeout(()=>{this._savingQueue.has(e)||(this._savingQueue.add(e),this._savingQueue.process())},this._interval)),this._documentsMap.set(e,n)},E.prototype._resetAllDocumentsTimeout=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(let t of this._documentsMap.values())this._resetDocumentTimeout(t.doc,e)},E.prototype.disable=function(){this.getStatus()!==E.Status.Disabled&&(this._resetAllDocumentsTimeout(!1),this._updateStatus(E.Status.Disabled))},E.prototype.enable=function(){a&&this.getStatus()!==E.Status.Enabled&&!gDesigner.isOffline()&&gDesigner.getSetting(E.AUTO_SAVE_SETTING)&&(this._resetAllDocumentsTimeout(),this._updateStatus(E.Status.Enabled))},E.prototype._removeDocument=function(e){this._documentsMap.has(e)&&(this._resetDocumentTimeout(e,!1),this._savingQueue.delete(e),this._documentsMap.delete(e),this._syncDialogShown[e.sessionId]&&delete this._syncDialogShown[e.sessionId],this._formatNotSupportDialogShown[e.sessionId]&&delete this._formatNotSupportDialogShown[e.sessionId],this._noEntriesCreatedWaringShown[e.sessionId]&&delete this._noEntriesCreatedWaringShown[e.sessionId])},E.prototype._addDocument=function(e){this._documentsMap.has(e)||(this._documentsMap.set(e,{doc:e}),this._resetDocumentTimeout(e,this.getStatus()===E.Status.Enabled),this._syncDialogShown[e.sessionId]=!1,this._formatNotSupportDialogShown[e.sessionId]=!1,this._noEntriesCreatedWaringShown[e.sessionId]=!1)},E.prototype._documentEvent=function(e){if(!e.document.isLockedByVersionHistory())switch(e.type){case f.Type.Added:this._addDocument(e.document),e.document.addEventListener(w,this._handleDocumentStatusEvent,this,void 0,void 0,!0),this.enable();break;case f.Type.Removed:this._removeDocument(e.document),e.document.removeEventListener(w,this._handleDocumentStatusEvent,this);break;case f.Type.SynchronismUpdated:{let t=!0;e.document.isWebFile()||(e.document.isCloudSyncOn()?this.enable():(t=!1,this._removeDocument(e.document))),t&&this._addDocument(e.document);break}case f.Type.Activated:this._documentsMap.has(e.document)||(this._addDocument(e.document),e.document.addEventListener(w,this._handleDocumentStatusEvent,this,void 0,void 0,!0),this.enable()),e.document.isCloudSynchronismAvailable()||this._syncDialogShown[e.document.sessionId]||!this._pendingSyncDialog.has(e.document)||(this._showSyncDialog(e.document),this._pendingSyncDialog.delete(e.document)),!this._noEntriesCreatedWaringShown[e.document.sessionId]&&this._pendingEntriesNotCreatedWarning.has(e.document)&&(this._processDocumentSave(e.document),this._pendingEntriesNotCreatedWarning.delete(e.document)),this._shouldFormatNotSupportedDialogAppearForUser(e.document)&&(this._showFormatNotSupportedDialog(e.document),this._pendingFormatNotSupportDialog.delete(e.document)),this._warnDialogTimer&&clearTimeout(this._warnDialogTimer),this._shouldWarningDialogAppearForUser()&&(this._warnDialogTimer=setTimeout(()=>{this._showWarnDialog(!0).then(e=>{e&&this._savingQueue.process()})},this._interval));break;case f.Type.BeforeReload:this._removeDocument(e.document)}},E.prototype._shouldWarningDialogAppearForUser=function(){return!this._warnDialogShown&&!gDesigner.getLicense().isGuest()&&!gDesigner.isAnonymous()},E.prototype._shouldFormatNotSupportedDialogAppearForUser=function(e){return!gDesigner.getLicense().isGuest()&&!gDesigner.isAnonymous()&&this._pendingFormatNotSupportDialog.has(e)&&e.isCloudFile()&&this._isCDRFile(e)&&!this._formatNotSupportDialogShown[e.sessionId]},E.prototype._handleDocumentStatusEvent=function(e){e.status===b.Loaded&&this._addDocument(e.sender)},E.prototype._settingsChangedEvent=function(e){e.previousValue!==e.newValue&&(e.key===E.AUTO_SAVE_SETTING?e.newValue?this.enable():this.disable():e.key===E.AUTO_SAVE_INTERVAL_SETTING&&(this._setInterval(e.newValue),this._resetAllDocumentsTimeout(this.getStatus()===E.Status.Enabled)))},E.prototype._networkAvailabilityChangedEvent=function(e){e.connected?(this._toggleOfflineAlert(!1),this.enable()):(this._toggleOfflineAlert(!0),this.disable())},E.prototype._toggleOfflineAlert=function(e){if(e){let e=o.GLocale.get(new o.GLocaleKey("GAutoSave","text.alert-offline"));gContainer.getRuntime()===u.Runtime.Electron&&o.GLocale.get(new o.GLocaleKey("GAutoSave","text.alert-offline-desktop")),this._offlineAlert||(this._offlineAlert=p.alert(e,()=>{this._offlineAlert=null}))}else this._offlineAlert&&0!==this._offlineAlert.length&&this._offlineAlert.gDialog("close"),this._offlineAlert=null},E.prototype._showWarnDialog=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._warnDialogShown||e&&this.getStatus()===E.Status.Enabled?Promise.resolve():this.getStatus()===E.Status.Enabled?Promise.resolve(!0):new Promise(e=>{p.custom({title:o.GLocale.get(new o.GLocaleKey("GAutoSave","text.dialog-inform-warn-feature.title")),subtitle:$("<span />").text("".concat(o.GLocale.get(new o.GLocaleKey("GAutoSave","text.dialog-inform-warn-feature.text"))," ")).append($("<a />").attr("href","https://documentation.corelvector.com/basics/working-with-files/save-and-open-files/#auto-save").attr("target","_blank").text(o.GLocale.get(new o.GLocaleKey("GCommonNames","text.learn-more")))),className:"g-auto-save-warn-dialog",icon:"autosave",closeable:!1,buttons:[{label:o.GLocale.get(new o.GLocaleKey("GAutoSave","text.dialog-inform-warn-feature.cancel-button")),closeOnClick:!0,shortcut:p.Shortcut.Esc,onclick:()=>{gDesigner.setSetting(E.AUTO_SAVE_SETTING,!1),this._warnDialogShown=!0,gContainer.setProperty(E.AUTO_SAVE_WARN_DIALOG_SHOWN,!0),gDesigner.stats("settings_toggle_auto-save-disabled"),e(!1)}},{label:o.GLocale.get(new o.GLocaleKey("GAutoSave","text.dialog-inform-warn-feature.enable-button")),className:"primary",closeOnClick:!0,shortcut:p.Shortcut.Enter,onclick:()=>{gDesigner.setSetting(E.AUTO_SAVE_SETTING,!0),this._warnDialogShown=!0,gContainer.setProperty(E.AUTO_SAVE_WARN_DIALOG_SHOWN,!0),gDesigner.stats("settings_toggle_auto-save-enabled"),e(!0)}}]})})},E.prototype._showFormatNotSupportedDialog=function(e){gDesigner.getSetting(E.REMINDER_FOR_CDR_DES_FILE,!0)&&(p.custom({title:o.GLocale.get(new o.GLocaleKey("GAutoSave","text.dialog-auto-save-is-not-available-for-cdr-and-des.text")),className:"g-auto-save-format-not-support-warn-dialog",icon:"info",closeable:!1,buttons:[{label:o.GLocale.get(new o.GLocaleKey("GAutoSave","text.dialog-auto-save-is-not-available-for-cdr-and-des.save-as-button")),closeOnClick:!0,onclick:()=>{gDesigner.executeAction(h.getIdForAction(h.Actions.SaveAs),e)}},{label:o.GLocale.get(new o.GLocaleKey("GAutoSave","text.dialog-auto-save-is-not-available-for-cdr-and-des.keep-cdr-button")),closeOnClick:!0,className:"primary",shortcut:p.Shortcut.Enter}],dontShowAgainCb:e=>{gDesigner.setSetting(E.REMINDER_FOR_CDR_DES_FILE,!e),gDesigner.stats("settings_toggle_auto-save-not-support-for-cdr-des-reminder-enabled",!e)}}),this._formatNotSupportDialogShown[e.sessionId]=!0)},E.prototype._showSyncDialog=function(e){if(gDesigner.getSetting(E.DISABLE_WARNING_SETTING_NAME))return;let t,n,i;e.hasCloudReference()?(t=o.GLocale.get(new o.GLocaleKey("GAutoSave","text.alert-cloud-reference-sync")),n=o.GLocale.get(new o.GLocaleKey("GAutoSave","text.alert-cloud-reference-sync-sub-text")),i=[{label:o.GLocale.get(new o.GLocaleKey("GLocale","ok")),closeOnClick:!0,shortcut:p.Shortcut.Enter}]):(t=o.GLocale.get(new o.GLocaleKey("GAutoSave","text.alert-sync")),n=o.GLocale.get(new o.GLocaleKey("GAutoSave","text.alert-sync-sub-text")),i=[{label:o.GLocale.get(new o.GLocaleKey("GAutoSave","text.alert-button.cancel")),closeOnClick:!0,shortcut:p.Shortcut.Esc},{label:o.GLocale.get(new o.GLocaleKey("GAutoSave","text.alert-button.save-to-cloud")),className:"primary",closeOnClick:!0,shortcut:p.Shortcut.Enter,onclick:()=>{gDesigner.executeAction(h.getIdForAction(h.Actions.SaveAs),e)}}]),this._syncDialogShown[e.sessionId]=!0,p.custom({title:t.replace("%title",e.getTitle()),subtitle:n.replace("%title",e.getTitle()),className:"g-auto-save-sync-dialog",icon:"info",closeable:!1,buttons:i,dontShowAgainCb:e=>{gDesigner.setSetting(E.DISABLE_WARNING_SETTING_NAME,!!e),gDesigner.stats("settings_toggle_auto-save-warning-enabled",!e)}})},E.prototype._showNoEntriesCreatedInVersionHistoryForExternalFileWarningDialog=function(e){return new Promise(t=>{gDesigner.getSetting(E.DISABLE_EXTERNAL_FILE_NO_ENTRIES_CREATED_WARING,!1)?t(!0):(this._noEntriesCreatedWaringShown[e.sessionId]=!0,p.custom({title:o.GLocale.get(new o.GLocaleKey("GAutoSave","text.dialog-no-entries-created-waring.title")).replace("%storage",this._getExternalStorageName(e)),subtitle:o.GLocale.get(new o.GLocaleKey("GAutoSave","text.dialog-no-entries-created-waring.subtitle")),className:"g-auto-save-no-entries-created-in-version-history-warn-dialog",icon:"info",closeable:!1,buttons:[{label:o.GLocale.get(new o.GLocaleKey("GAutoSave","text.dialog-no-entries-created-waring.go-settings")),closeOnClick:!0,onclick:()=>{gDesigner.executeAction(S.ID),t(!1)}},{label:o.GLocale.get(new o.GLocaleKey("GLocale","ok")),closeOnClick:!0,className:"primary",shortcut:p.Shortcut.Enter,onclick:()=>{t(!0)}}],dontShowAgainCb:e=>{gDesigner.setSetting(E.DISABLE_EXTERNAL_FILE_NO_ENTRIES_CREATED_WARING,!!e),gDesigner.stats("settings_toggle_auto-save-no-entries-created-warning-enabled",!e)}}))})},E.prototype._showExternalFileUpdatedOutAppWarningDialog=function(e){return p.custom({title:o.GLocale.get(new o.GLocaleKey("GAutoSave","text.dialog-file-updated-out-app-waring.title")).replace("%file-name",e.getTitle()+"."+e.getExtension().toLowerCase()).replace("%app-name",l.TITLE),className:"g-auto-save-file-updated-out-app-warn-dialog",icon:"info",closeable:!1,buttons:[{label:o.GLocale.get(new o.GLocaleKey("GAutoSave","text.dialog-file-updated-out-app-waring.do-not-reload")),closeOnClick:!0,onclick:()=>{this._fileUpdatedWarningShowing=!1}},{label:o.GLocale.get(new o.GLocaleKey("GAutoSave","text.dialog-file-updated-out-app-waring.reload")),closeOnClick:!0,className:"primary",shortcut:p.Shortcut.Enter,onclick:()=>{this._fileUpdatedWarningShowing=!1,e.reload()}}]}),this._fileUpdatedWarningShowing=!0,!1},E.prototype._getExternalStorageName=function(e){if(!e)return"";const t=e.getStorageItem();return t&&t instanceof g.Item?s.cloudOptions.find(e=>e.type===c.GOOGLEDRIVE).name:""},E.prototype._shouldHideNotifications=function(){return gContainer.getProperty(E.AUTO_SAVE_HIDE_NOTIFICATION_PROP_NAME)},E.prototype._showNotification=async function(e){if(this._autoSaveModel.isSaving()||await this._shouldHideNotifications())return;let t="";t=e?o.GLocale.get(new o.GLocaleKey("GAutoSave","text.failed-auto-saving")):o.GLocale.get(E.ALTERNATE_STRINGS[Math.floor(Math.random()*E.ALTERNATE_STRINGS.length)]);let n={custom:!0,class:"g-auto-save-notification",enter:"enter",exit:"exit",timeout:5e3,content:[e?null:$("<div/>").addClass("spinner").append([$("<div/>"),$("<div/>"),$("<div/>"),$("<div/>"),$("<div/>"),$("<div/>"),$("<div/>"),$("<div/>")]),$("<div/>").addClass("message").text(t)],closeCallback:function(){gContainer.setProperty(E.AUTO_SAVE_HIDE_NOTIFICATION_PROP_NAME,!0)}};gDesigner.addNotification(n)},E.prototype._isCDRFile=function(e){return!1},e.exports=E},function(e,t,n){"use strict";function o(){}o.ID="edit.settings",e.exports=o},function(e,t,n){"use strict";class o{static getSetting(){return"scrubbing_flag"}static isEnabled(){return!!gDesigner.getSetting(o.getSetting(),!0)}}e.exports=o},function(e,t,n){"use strict";e.exports={SKIPPED:0,UPDATED:1,DELAYED:2}},function(e,t,n){"use strict";n(3);var o=n(1),i=n(61),a=n(16),r=n(151),s=n(27),l=n(77);function c(){c.TOOLTIP_CONFIG={[i.TOOLTIP_AREA.TOOLBAR]:i.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GLinkImageAction","tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GLinkImageAction","tooltip-description")),middle:!1,learnMore:"https://documentation.corelvector.com/working-with-images/insert-images/#link-image"})}}o.GObject.inherit(c,s),c.ID="file.link-import",c.TITLE=new o.GLocaleKey("GLinkImageAction","title"),c.TOOLTIP_CONFIG=null,c.prototype.getId=function(){return c.ID},c.prototype.getTitle=function(){return c.TITLE},c.prototype.getCategory=function(){return a.CATEGORY_FILE_IMPORT},c.prototype.getGroup=function(){return"import/place-import"},c.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-link-image":null},c.prototype.isEnabled=function(e){if(gContainer.getRuntime()!==l.Runtime.Electron)return!1;var t=gDesigner.getActiveDocument();return!!t&&((e=e||t.getStorage()||gDesigner.getDefaultStorage())&&e.canPromptOpen())},c.prototype.execute=function(e,t){var n=gDesigner.getActiveDocument();if(!n)return!1;(e=e||n.getStorage()||gDesigner.getDefaultStorage()).openPrompt(r.FileTypes.filter(e=>0===e.mime.indexOf("image")),e=>{var i="file://"+e.getUniqueId(),a=i,r=n.getScene().getDictionary().putValueIfAbsent(a);r&&(a=r.getUrl());var s=new Image;s.onload=()=>{var e=new o.GImage;e.setProperties(["iw","ih","url"],[s.naturalWidth,s.naturalHeight,a]),n.insertElement(e,!0,!0),t&&t()},s.src=i},!1)},c.prototype.isAvailable=function(){return gContainer.getRuntime()!==l.Runtime.IPad},c.prototype.getTooltipConfig=function(e){return e&&c.TOOLTIP_CONFIG[e]||null},c.prototype.toString=function(){return"[Object GLinkImageAction]"},e.exports=c},function(e,t,n){"use strict";var o=n(14);n(52),n(62);var i=n(13),a=o(n(27)),r=o(n(1145));class s extends a.default{constructor(e){super(),this.Type=e.Type;const t=Object.values(this.Type);this._subActionIds=t.map(e=>r.default.getSubActionId(this.getId(),e)),this._timeoutId=null,this._shortcutSubKeyHandlerBind=this._shortcutSubKeyHandler.bind(this)}executeFromShortcut(){this._setShortcutSubKeyListener()}execute(){}getSubActions(){return this._subActionIds?this._subActionIds.map(e=>gDesigner.getAction(e)):null}getShortcutSubKeys(){const e=this.getSubActions();return e?e.map(e=>e.getShortcutSubKey()).filter(e=>e):null}getShortcutHint(e){return null}_setShortcutSubKeyListener(){this._resetShortcutSubKeyListener(),document.addEventListener("keydown",this._shortcutSubKeyHandlerBind,!0),this._timeoutId=setTimeout(()=>{this._resetShortcutSubKeyListener(),this.execute()},a.default.SHORTCUT_DELAY)}_executeFromShortcutSubKey(e){const t=this.getSubActions();if(!t)return;const n=t.find(t=>t.getShortcutSubKey()===e);n&&n.execute()}_shortcutSubKeyHandler(e){const t=i.GKey.translateCode(e.code),n=this.getShortcutSubKeys();this._resetShortcutSubKeyListener(),t&&n&&n.includes(t)&&(e.preventDefault(),e.stopPropagation(),this._executeFromShortcutSubKey(t))}_resetShortcutSubKeyListener(){this._timeoutId&&(document.removeEventListener("keydown",this._shortcutSubKeyHandlerBind,!0),clearTimeout(this._timeoutId),this._timeoutId=null)}toString(){return"[Object GMainAction]"}}e.exports=s},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(16),r=n(27);function s(){}o.GObject.inherit(s,r),s.ID="view.zoom.original",s.TITLE=new o.GLocaleKey("GOriginalViewAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return a.CATEGORY_VIEW},s.prototype.getGroup=function(){return"zoom"},s.prototype.getShortcut=function(){return[i.GKey.Constant.META,"0"]},s.prototype.isEnabled=function(){return!!gDesigner.getActiveDocument()},s.prototype.execute=function(){var e,t=gDesigner.getActiveDocument(),n=t.getActiveWindow().getView().getViewConfiguration().multiPageView,i=t.getScene();if(i.isFixedSized()){var a=i.getActivePage();if(e=new o.GRect(0,0,a.getProperty("w"),a.getProperty("h")),n){var r=a.getPosition(!0);r&&(e=e.translated(r.getX(),r.getY()))}}else e=i.getPaintBBox(n);e&&!e.isEmpty()&&t.getActiveWindow().getView().zoomAtCenter(e.getSide(o.GRect.Side.CENTER),1)},s.prototype.toString=function(){return"[Object GOriginalViewAction]"},e.exports=s},function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=n(13),r=n(61),s=o(n(77)),l=n(9),c=n(16),d=n(151),u=n(27);function p(){p.TOOLTIP_CONFIG={[r.TOOLTIP_AREA.TOOLBAR]:r.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GPlaceImportAction","tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GPlaceImportAction","tooltip-description")),middle:!1,video:l.gApi.getRichTooltipVideoURL("Place_Image.mp4"),learnMore:"https://documentation.corelvector.com/working-with-images/insert-images/#place-image"})}}i.GObject.inherit(p,u),p.ID="file.place-import",p.TITLE=new i.GLocaleKey("GPlaceImportAction","title"),p.TOOLTIP_CONFIG=null,p.prototype.getId=function(){return p.ID},p.prototype.getTitle=function(){return p.TITLE},p.prototype.getCategory=function(){return c.CATEGORY_FILE_IMPORT},p.prototype.getGroup=function(){return"import/place-import"},p.prototype.isVisible=function(){return gContainer.getRuntime()!==s.default.Runtime.IPad},p.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-place-image":null},p.prototype.isEnabled=function(e){var t=gDesigner.getActiveDocument();return!!t&&((e=e||t.getStorage()||gDesigner.getDefaultStorage())&&e.canPromptOpen()&&gDesigner.getApplicationManager().isImportResourcesEnabled())},p.prototype.getShortcut=function(){return[a.GKey.Constant.OPTION,"P"]},p.prototype.execute=function(e,t){var n=gDesigner.getActiveDocument();if(!n)return!1;(e=e||n.getStorage()||gDesigner.getDefaultStorage()).openPrompt(d.FileTypes.filter(e=>e.import_image),e=>{gDesigner.stats("import-placeimport_open_localfile",e.getExtension()),n.placeOrImport(e),t&&t()},!1)},p.prototype.getTooltipConfig=function(e){return e&&p.TOOLTIP_CONFIG[e]||null},p.prototype.toString=function(){return"[Object GPlaceImportAction]"},e.exports=p},function(e,t,n){"use strict";n(18),n(3),n(29);var o=n(1),i=n(13),a=n(61),r=n(16),s=n(27);function l(){l.TOOLTIP_CONFIG={[a.TOOLTIP_AREA.TOOLBAR]:a.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GRedoAction","tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GRedoAction","tooltip-description")),shortcut:l.SHORTCUT})}}o.GObject.inherit(l,s),l.ID="edit.redo",l.TITLE=new o.GLocaleKey("GRedoAction","title"),l.SHORTCUT=[i.GKey.Constant.SHIFT,i.GKey.Constant.META,"z"],l.TOOLTIP_CONFIG=null,l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){var e=gDesigner.getActiveDocument();return e&&e.getEditor().hasRedoState()?o.GLocale.get(new o.GLocaleKey("GRedoAction","redo-action")).replace("%action",e.getEditor().getRedoStateName()):o.GLocale.get(l.TITLE)},l.prototype.getIcon=function(){return"gravit-icon-redo"},l.prototype.getCategory=function(){return r.CATEGORY_EDIT},l.prototype.getGroup=function(){return"undo_redo"},l.prototype.getShortcut=function(){return l.SHORTCUT},l.prototype.isEnabled=function(){return!(gDesigner.getActiveDocument()&&!gDesigner.getActiveDocument().isEditingEnabled())&&(!(!document.activeElement||!$(document.activeElement).is(":editable")||$(document.activeElement).is(":button")||$(document.activeElement).is("select")||gDesigner.isGravitIME(document.activeElement))||!(!gDesigner.getActiveDocument()||!gDesigner.getActiveDocument().getEditor().hasRedoState()))},l.prototype.execute=function(){!document.activeElement||!$(document.activeElement).is(":editable")||$(document.activeElement).is(":button")||$(document.activeElement).is("select")||gDesigner.isGravitIME(document.activeElement)?gDesigner.getActiveDocument().getEditor().redoState():document.execCommand("redo")},l.prototype.getTooltipConfig=function(e){return e&&l.TOOLTIP_CONFIG[e]||null},l.prototype.toString=function(){return"[Object GRedoAction]"},e.exports=l},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(16),r=n(27);function s(){}o.GObject.inherit(s,r),s.ID="view.canvas.show-grid",s.TITLE=new o.GLocaleKey("GShowGridAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return a.CATEGORY_VIEW_CANVAS},s.prototype.getGroup=function(){return"show/canvas"},s.prototype.getShortcut=function(){return[i.GKey.Constant.META,i.GKey.Constant.OPTION,"G"]},s.prototype.isEnabled=function(){return!!gDesigner.getActiveDocument()},s.prototype.isCheckable=function(){return!0},s.prototype.isChecked=function(){var e=gDesigner.getActiveDocument();return!!e&&!!e.getScene().getProperty("gm")},s.prototype.execute=function(){var e=gDesigner.getActiveDocument().getScene();e.getProperty("gm")?e.setProperty("gm",null):e.setProperty("gm",e.getProperty("lgm")||o.GScene.GridMode.Boxed)},s.prototype.toString=function(){return"[Object GShowGridAction]"},e.exports=s},function(e,t,n){"use strict";n(3);var o=n(1),i=(n(13),n(16)),a=n(27);function r(){}o.GObject.inherit(r,a),r.ID="view.canvas.show-symbol-labels",r.TITLE=new o.GLocaleKey("GShowSymbolLabelsAction","title"),r.prototype.getId=function(){return r.ID},r.prototype.getTitle=function(){return r.TITLE},r.prototype.getCategory=function(){return i.CATEGORY_VIEW_CANVAS},r.prototype.getGroup=function(){return"show/canvas"},r.prototype.isEnabled=function(){return!!gDesigner.getWindows().getActiveWindow()},r.prototype.isCheckable=function(){return!0},r.prototype.isChecked=function(){var e=gDesigner.getWindows().getActiveWindow();if(e){var t=e.getView().getViewConfiguration();return!!t&&!!t.symbolLabelsVisible}return!1},r.prototype.execute=function(){var e=gDesigner.getWindows().getActiveWindow().getView();e.getViewConfiguration().symbolLabelsVisible=!e.getViewConfiguration().symbolLabelsVisible,e.invalidate(),gDesigner.setSetting("symbol_labels_visible",e.getViewConfiguration().symbolLabelsVisible)},r.prototype.toString=function(){return"[Object GShowSymbolLabelsAction]"},e.exports=r},function(e,t,n){"use strict";n(18),n(3),n(29);var o=n(1),i=n(16),a=n(27);n(162);function r(e,t){this._guideId=e,this._guideName=t}o.GObject.inherit(r,a),r.ID="view.toggle-guide",r.prototype._guideId=null,r.prototype._guideName=!1,r.prototype.getId=function(){return r.ID+"."+this._guideId},r.prototype.getTitle=function(){return o.GLocale.get(new o.GLocaleKey("GCommonNames","text.snap-to-action")).replace("%action",this._guideName)},r.prototype.getCategory=function(){return i.CATEGORY_VIEW_SNAP},r.prototype.getGroup=function(){return"snap/guide"},r.prototype.isCheckable=function(){return!0},r.prototype.isEnabled=function(){return!gDesigner.getSetting("snap_disabled")},r.prototype.isChecked=function(){return gDesigner.getSetting("snap_guides").indexOf(this._guideId)>=0},r.prototype.execute=function(){var e=gDesigner.getSetting("snap_guides").slice(),t=e.indexOf(this._guideId);t>=0?e.splice(t,1):e.push(this._guideId),gDesigner.setSetting("snap_guides",e)},r.prototype.toString=function(){return"[Object GToggleGuideAction]"},e.exports=r},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(61),r=n(16),s=n(27);function l(){l.TOOLTIP_CONFIG={[a.TOOLTIP_AREA.TOOLBAR]:a.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GToggleSnapAction","tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GToggleSnapAction","tooltip-description")),shortcut:l.SHORTCUT,middle:!1,learnMore:"https://documentation.corelvector.com/design-aids/snaping/"})}}o.GObject.inherit(l,s),l.ID="view.toggle-snap",l.TITLE=new o.GLocaleKey("GToggleSnapAction","title"),l.SHORTCUT=[i.GKey.Constant.SHIFT,i.GKey.Constant.F10],l.TOOLTIP_CONFIG=null,l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){return l.TITLE},l.prototype.getCategory=function(){return r.CATEGORY_VIEW_SNAP},l.prototype.getGroup=function(){return"snap/enable"},l.prototype.getShortcut=function(){return l.SHORTCUT},l.prototype.isCheckable=function(){return!0},l.prototype.isChecked=function(){return!gDesigner.getSetting("snap_disabled")},l.prototype.execute=function(){gDesigner.setSetting("snap_disabled",!gDesigner.getSetting("snap_disabled"))},l.prototype.getTooltipConfig=function(e){if(!e)return null;const t=l.TOOLTIP_CONFIG[e];return t.setConfig({title:o.GLocale.get(new o.GLocaleKey("GToggleSnapAction","tootlip-title-action"))}),t},l.prototype.toString=function(){return"[Object GToggleSnapAction]"},e.exports=l},function(e,t,n){"use strict";n(3);var o=n(1),i=n(61),a=n(16),r=n(27);function s(){s.TOOLTIP_CONFIG={[i.TOOLTIP_AREA.TOOLBAR]:i.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GToggleSnapZonesAction","tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GToggleSnapZonesAction","tooltip-description")),middle:!1,learnMore:"https://documentation.corelvector.com/design-aids/snaping/#h.357kb75pbg9h"})}}o.GObject.inherit(s,r),s.ID="view.toggle-snapzones",s.TITLE=new o.GLocaleKey("GToggleSnapZonesAction","title"),s.TOOLTIP_CONFIG=null,s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return a.CATEGORY_VIEW_SNAP},s.prototype.getGroup=function(){return"snap/enable"},s.prototype.isCheckable=function(){return!0},s.prototype.isChecked=function(){return gDesigner.getSetting("snap_zones")},s.prototype.execute=function(){gDesigner.setSetting("snap_zones",!gDesigner.getSetting("snap_zones"))},s.prototype.getTooltipConfig=function(e){return e&&s.TOOLTIP_CONFIG[e]||null},s.prototype.toString=function(){return"[Object GToggleSnapZonesAction]"},e.exports=s},function(e,t,n){"use strict";n(3);var o=n(45),i=n(1),a=n(13),r=n(61),s=n(16),l=n(27);function c(){c.TOOLTIP_CONFIG={[r.TOOLTIP_AREA.TOOLBAR]:r.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GZoomInAction","tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GZoomInAction","tooltip-description")),shortcut:c.SHORTCUT})}}i.GObject.inherit(c,l),c.ID="view.zoom.in",c.TITLE=new i.GLocaleKey("GZoomInAction","title"),c.ZOOM_STEP=2,c.SHORTCUT=[a.GKey.Constant.META,"+"],c.TOOLTIP_CONFIG=null,c.prototype.getId=function(){return c.ID},c.prototype.getTitle=function(){return c.TITLE},c.prototype.getCategory=function(){return s.CATEGORY_VIEW_MAGNIFICATION},c.prototype.getGroup=function(){return"zoom/magnification"},c.prototype.getShortcut=function(){return c.SHORTCUT},c.prototype.isShortcutGlobal=function(){return!0},c.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-zoom-in":null},c.prototype.isEnabled=function(){var e=gDesigner.getWindows().getActiveWindow(),t=e?e.getView():null;return t&&t.getZoom()<a.GSceneWidget.options.maxZoomFactor},c.prototype.execute=function(){var e=gDesigner.getWindows().getActiveWindow().getView(),t=null;if(o.GZoomTool.options.zoomLevels){for(var n=o.GZoomTool.options.zoomLevels,i=e.getZoom(),r=n.length-1,s=0;s<n.length;s++)if(i<n[r-s]&&(t=n[r-s]),i===n[s]){t=r>0?n[s+1]:a.GSceneWidget.options.maxZoomFactor;break}}else t=e.getZoom()*c.ZOOM_STEP;gDesigner.zoomAtViewCenter(e,t)},c.prototype.getTooltipConfig=function(e){return e&&c.TOOLTIP_CONFIG[e]||null},c.prototype.toString=function(){return"[Object GZoomInAction]"},e.exports=c},function(e,t,n){"use strict";n(3);var o=n(45),i=n(1),a=n(13),r=n(61),s=n(16),l=n(27);function c(){c.TOOLTIP_CONFIG={[r.TOOLTIP_AREA.TOOLBAR]:r.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GZoomOutAction","tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GZoomOutAction","tooltip-description")),shortcut:c.SHORTCUT})}}i.GObject.inherit(c,l),c.ID="zoom.out",c.TITLE=new i.GLocaleKey("GZoomOutAction","title"),c.ZOOM_STEP=2,c.SHORTCUT=[a.GKey.Constant.META,"-"],c.TOOLTIP_CONFIG=null,c.prototype.getId=function(){return c.ID},c.prototype.getTitle=function(){return c.TITLE},c.prototype.getCategory=function(){return s.CATEGORY_VIEW_MAGNIFICATION},c.prototype.getGroup=function(){return"zoom/magnification"},c.prototype.getShortcut=function(){return c.SHORTCUT},c.prototype.isShortcutGlobal=function(){return!0},c.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-zoom-out":null},c.prototype.isEnabled=function(){var e=gDesigner.getWindows().getActiveWindow(),t=e?e.getView():null;return t&&t.getZoom()>a.GSceneWidget.options.minZoomFactor},c.prototype.execute=function(){var e=gDesigner.getWindows().getActiveWindow().getView(),t=null;if(o.GZoomTool.options.zoomLevels){for(var n=o.GZoomTool.options.zoomLevels,i=e.getZoom(),r=(n.length,0);r<n.length;r++)if(i>n[r]&&(t=n[r]),i===n[r]){t=r>0?n[r-1]:a.GSceneWidget.options.minZoomFactor;break}}else t=e.getZoom()/c.ZOOM_STEP;gDesigner.zoomAtViewCenter(e,t)},c.prototype.getTooltipConfig=function(e){return e&&c.TOOLTIP_CONFIG[e]||null},c.prototype.toString=function(){return"[Object GZoomOutAction]"},e.exports=c},function(e,t,n){"use strict";const{GLocale:o,GLocaleKey:i}=n(1);function a(){throw"No instantiate"}a.Mode={Online:"online",Offline:"offline"};const r={init:function(){return this.each((function(){$(this).data("mode",a.Mode.Online).addClass("g-collaborators").append($("<div/>").addClass("g-collaborators-container"))}))},mode:function(e){const t=r[e];return t&&($(this).data("mode",e),t.call(this)),this},online:function(){const e=$(this).data("collaborators")||[];return r.collaborators.call(this,e),this},offline:function(){return $(this).find(".g-collaborators-container").attr("data-title",o.get(new i("GCollaborators","text.you-are-offline-tooltip"))).empty().append($("<div/>").addClass("g-collaborator").addClass("offline").append($("<span/>").addClass("gravit-icon-offline"))).append($("<span/>").text(o.get(new i("GCollaborators","text.you-are-offline")))),this},collaborators:function(e){if(arguments.length>0){if(!(e&&e.length||$(this).data("mode")!==a.Mode.Offline))return;const t=e=>{const t=e.getUserColor(),n=e.getTooltip()||"",o=e.getIcon(),i=$("<div/>").addClass("g-collaborator").attr("data-title",n).css("border-color",t).css("background-color",t).append($("<span/>").addClass("icon").addClass(o||"").css("display",o?"flex":"none"));if(e.hasOwnPictureAvatar()){const t=e.avatar;"<svg>"===t.substr(0,"<svg>".length)?$(t).appendTo(i):i.css({backgroundImage:'url("'.concat(t,'")')})}else $("<span/>").text(e.getUserNameInitials()).appendTo(i);return i},n=$(this).data("collaborators",e).find(".g-collaborators-container").removeAttr("data-title").empty().append(e.slice(0,4).map(e=>t(e)));if(e.length>4){const o=$("<div/>").gOverlay({clazz:"g-collaborators-overlay"}).append($("<div/>").addClass("g-collaborators-container").append(e.slice(4,e.length).map(e=>$("<div/>").addClass("g-collaborator-row").append(t(e)).append($("<span/>").text(e.name)))));$("<div/>").addClass("g-collaborator").addClass("plus").append($("<span/>").text("+ ".concat(e.length-4))).on("click",e=>{o.gOverlay("open",$(e.target).closest(".g-collaborator"))}).appendTo(n)}return this}return $(this).data("collaborators")}};$.fn.gCollaborators=function(e){return r[e]?r[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.gCollaborators"):r.init.apply(this,arguments)},e.exports=a},function(e,t,n){"use strict";n(18),n(3),n(29);var o=n(1);const{FILE_FORMATS:i,CLOUD_SYNC_FEATURE:{NEW_LAYOUT:a}={}}=n(9),r=n(16),s=n(27),l=n(111),c=n(433),d=n(78),u=n(151),p=n(430),g=n(37),h=i.find(e=>e.default).ext;function f(){}o.GObject.inherit(f,s),f.ID="cloud.sync",f.prototype.getId=function(){return f.ID},f.prototype._getSyncInformation=function(e){if(e.getScene()){const t=e.getScene().lastModifiedDate();return t?o.GLocale.get(new o.GLocaleKey("GCloudSynchronizationAction","text.last-synced-at")).replace("%date",o.GLocale.toLocaleDate(t,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})):o.GLocale.get(new o.GLocaleKey("GDocumentChooser","text.cloud.unavailable"))}},f.prototype.isAvailable=function(){return!!a},f.prototype.getTitle=function(){const e=gDesigner.getActiveDocument();if(e){if(e.isSynchronizing())return new o.GLocaleKey("GCloudSynchronizationAction","text.syncing");if(e.isCloudFile())return this._getSyncInformation(e);if(e.isCloudSyncOn())return new o.GLocaleKey("GCloudSynchronizationAction","text.unsync-from-cloud")}return new o.GLocaleKey("GCloudSynchronizationAction","text.sync-to-cloud")},f.prototype.getIcon=function(){const e=gDesigner.getActiveDocument();if(e){if(e.isSynchronizing())return"gravit-icon-cloud-syncing";if(e.isCloudSyncOn()||e.isCloudFile())return"gravit-icon-cloud-synced"}return"gravit-icon-cloud-unsynced"},f.prototype.getInfo=function(){const e=gDesigner.getActiveDocument();return e&&e.isCloudSyncOn()&&!e.isSynchronizing()?this._getSyncInformation(e):null},f.prototype.getCategory=function(){return r.CATEGORY_FILE},f.prototype.getGroup=function(){return"file"},f.prototype.isVisible=function(){const e=gDesigner.getActiveDocument();return!!e&&(!e.isWebFile()&&!e.isExternalFile()&&!e.isNew()&&(!e.isCloudSyncOn()||e.isCloudSynchronismAvailable()))},f.prototype.isEnabled=function(){const e=gDesigner.getActiveDocument();return!!e&&(!e.isCloudFile()&&(!e.getScene().getProperty("cfs")&&!e.getScene().getProperty("cid")||e.getScene().isCloudSynchronization()))},f.prototype._performCloudSync=function(e){gDesigner.getDefaultStorage().canSave()?e.isNew()?l.createFile(e,t=>{e.getScene().setCloudSynchronization(t.id),gDesigner.executeAction(p.ID+"."+h,[null,e,()=>{l.renameFile(t,e.getTitle(),()=>{e.storeToCloud(e.getScene())})}],void 0,!0)}):e.isCloudFile()?gDesigner.executeAction(p.ID+"."+h,void 0,void 0,!0):l.createFile(e,t=>{e.getScene().setCloudSynchronization(t.id),e.storeToCloud(e.getScene(),()=>{e.store(null,null,null,{lastModifiedDate:e.getScene().getLastSavedTime()})})}):e.isCloudFile()?gDesigner.executeAction(p.ID+"."+h,void 0,void 0,!0):gDesigner.executeAction(c.ID+".save-as",[e,t=>{t===d.Loaded&&gDesigner.removeDocument(e,null,!0)},!0],void 0,!0)},f.prototype._toggleCloudSync=function(e){const t=!e.isCloudSyncOn(),n=e.getScene();n.setProperty("cfs",t),n.getProperty("cfs")?e.chooseLatestDocument(n,(function(t,o){if(t!==n||o){const n=new u(e.getStorageItem());n.setScene(t),gDesigner.replaceDocument(e,n)}else e.storeToCloud(t,()=>{gDesigner.getDefaultStorage().canSave()&&e.store(null,null,null,{lastModifiedDate:n.getLastSavedTime()})})}),(function(){g.alert(o.GLocale.get(new o.GLocaleKey("GDocument","text.sync-to-cloud-error")))}),(function(e,t){return t.lastModifiedDate().getTime()>e.lastModifiedDate().getTime()})):e.isCloudFile()||(gDesigner.getDefaultStorage().canSave()?e.store():gDesigner.executeAction(p.ID+"."+h,void 0,void 0,!0))},f.prototype.statsValue=function(){return gDesigner.getActiveDocument().isCloudSyncOn()?f.ID+".unsync-from-cloud":f.ID+".sync-to-cloud"},f.prototype.execute=function(e){(e=e||gDesigner.getActiveDocument())&&(e.hasCloudReference()?this._toggleCloudSync(e):this._performCloudSync(e))},f.prototype.toString=function(){return"[Object GCloudSynchronizationAction]"},e.exports=f},function(e,t,n){"use strict";var o=n(14);n(51),n(18),n(99),n(3);var i=n(45),a=n(1),r=n(61),s=o(n(326)),l=n(845),c=n(846),d=n(115),u=(n(162),n(125)),p=n(240),g=n(1271);function h(){this._elements=[]}a.GObject.inherit(h,d),h._keepRatioName="designer.settings.dimension.preserveratio",h.prototype._panel=null,h.prototype._toolbar=null,h.prototype._transformButton=null,h.prototype._document=null,h.prototype._elements=null,h.prototype._elementsBBox=null,h.prototype._anchorsPanel=null,h.prototype._firstElementsBBox=null,h.prototype.init=function(e,t){this._panel=e,this._toolbar=t,this._panel.addClass("dimension-panel"),this.setTouchTools([new s.default({id:"dimension.align",icon:"gravit-icon-align",panelWidth:"370px",panel:this._toolbar}),new s.default({id:"dimension.dimension",icon:"gravit-icon-touch-transform",toolbar:".advanced-transform-toolbar",panelWidth:"395px",panel:[this._panel,".advanced-transform-properties"]})]);var n=function(e,t){var n=this;if("keep-ratio"==e)return $("<span></span>").addClass(i.GEditorOptions.preserveAspectRatio?"gravit-icon-linked":"gravit-icon-unlinked").css("text-align","center").css("cursor","pointer").on("click",(function(e){var t=$(this);"yes"===t.attr("data-ratio")?(t.attr("data-ratio","no").attr("class","gravit-icon-unlinked"),n._setAspectRatioBehavior(!1),gDesigner.stats("dimension_toggle_preserveratio","disabled")):(t.attr("data-ratio","yes").attr("class","gravit-icon-linked"),n._setAspectRatioBehavior(!0),gDesigner.stats("dimension_toggle_preserveratio","enabled"))})).attr("data-title",a.GLocale.get(new a.GLocaleKey("GDimensionProperties","action.keep-ratio"))).attr("data-ratio",i.GEditorOptions.preserveAspectRatio?"yes":"no").gRichTooltip(t);if("x"===e||"y"===e||"w"===e||"h"===e){var o=a.GLocale.get(new a.GLocaleKey("GCommonNames","property-".concat(e.toLowerCase())),e);return $("<div/>").append($("<input>").attr("type","text").attr("data-dimension",e).on("change",function(t){gDesigner.stats("dimension_set_positionOrSize"),this._assignDimension(e,$(t.target).gInputBox("value"))}.bind(this)).gInputBox({minValue:"w"===e||"h"===e?0:null})).gInputLabel({label:o,autoPadding:o.length>1}).gRichTooltip(t)}return"rotate"===e?$("<div/>").append($("<input>").attr("type","text").attr("data-dimension",e).on("change",function(t){gDesigner.stats("dimension_set_rotation"),this._assignDimension(e,$(t.target).gInputBox("value"))}.bind(this)).gInputBox({postfix:"°"})).gInputLabel({label:"R"}).gRichTooltip(t):void 0}.bind(this);function o(e){var t=l.ID+"."+e,n=gDesigner.getAction(t);const o=n.getTooltipConfig(r.TOOLTIP_AREA.SIDEBAR),i=$("<span></span>");return p.icon?(i.addClass("icon"),i.addClass(n.getIcon())):i.append(n.getIcon()),i.css("stroke","transparent"),o&&i.gRichTooltip(o),$("<button></button>").attr("data-title",a.GLocale.get(n.getTitle())).attr("data-action",t).addClass("svg-button").append(i.addClass("normal")).append($("<span/>").addClass("gravit-icon-touch-".concat(e," touch"))).on("click",(function(){gDesigner.executeAction(t,void 0,"dimensionproperties")}))}function d(e){var t=c.ID+"."+e,n=gDesigner.getAction(t);const o=n.getTooltipConfig(r.TOOLTIP_AREA.SIDEBAR),i=$("<span></span>").append(n.getIcon());return o&&i.gRichTooltip(o),$("<button></button>").attr("data-title",a.GLocale.get(n.getTitle())).attr("data-action",t).addClass("svg-button").append(i.addClass("normal")).append($("<span/>").addClass("gravit-icon-touch-".concat(e," touch"))).on("click",(function(){var n=$(".".concat(e,"Input")).find("input").val();n="Auto"==n?void 0:parseInt(n),gDesigner.executeAction(t,[void 0,void 0,n],"dimensionproperties")}))}function u(e){var t=$("<div></div>").addClass(e+"Input").gInputSelect({list:["Auto","0",1,10,20,30,50,100]}),n=/^-?[0-9]+.?[0-9]*$/;return t.find("input").val("Auto").off("change").on("change",(function(){n.test($(this).val())||$(this).val("Auto")})),t}t.addClass("main-toolbar").append(d(c.Type.Horizontal).addClass("primary normalDistribute")).append(d(c.Type.Vertical).addClass("primary normalDistribute")).append($("<span></span>").addClass("divider")).append(o(i.GEditor.ArrangeAlignType.AlignLeft).addClass("secondary")).append(o(i.GEditor.ArrangeAlignType.AlignCenter).addClass("secondary")).append(o(i.GEditor.ArrangeAlignType.AlignRight).addClass("secondary")).append($("<span></span>").addClass("divider")).append($("<p/>").addClass("interval")).append(o(i.GEditor.ArrangeAlignType.AlignTop).addClass("secondary")).append(o(i.GEditor.ArrangeAlignType.AlignMiddle).addClass("secondary")).append(o(i.GEditor.ArrangeAlignType.AlignBottom).addClass("secondary")).append($("<p/>").addClass("lineBreak")).append(d(c.Type.Horizontal).addClass("primary touchDistribute")).append(u(c.Type.Horizontal).addClass("touchDistribute")).append($("<p/>").addClass("interval")).append(d(c.Type.Vertical).addClass("primary touchDistribute")).append(u(c.Type.Vertical).addClass("touchDistribute")),this._advancedFillPanel=$("<div></div>").gOverlay({releaseOnClose:!1}),this._advancedFillPanel.parent().addClass("settingBox"),$("<div></div>").addClass("alignSettings").gPropertyRow({columns:[{width:"100%",content:$("<div></div>").text(a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.sameHeight"))).prepend($("<span></span>").addClass("gravit-icon-sameHeight")).on("click",()=>{new l(i.GEditor.ArrangeAlignType.AlignJustifyVertical).execute(),this._advancedFillPanel.gOverlay("close")})}]}).gPropertyRow({columns:[{width:"100%",content:$("<div></div>").text(a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.sameWidth"))).prepend($("<span></span>").addClass("gravit-icon-sameWidth")).on("click",()=>{new l(i.GEditor.ArrangeAlignType.AlignJustifyHorizontal).execute(),this._advancedFillPanel.gOverlay("close")})}]}).gPropertyRow({columns:[{width:"100%",content:$("<div></div>").text(a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.fullUnit"))).prepend($("<span></span>").addClass("gravit-icon-fullUnit")).on("click",()=>{new g(g.Type.FullUnit).execute(),this._advancedFillPanel.gOverlay("close")})}]}).gPropertyRow({columns:[{width:"100%",content:$("<div></div>").text(a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.halfUnit"))).prepend($("<span></span>").addClass("gravit-icon-HalfUnit")).on("click",()=>{new g(g.Type.HalfUnit).execute(),this._advancedFillPanel.gOverlay("close")})}]}).appendTo(this._advancedFillPanel),$("<p/>").addClass("lineBreak").prependTo(t),$("<button></button>").attr("data-title",a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.setting"))).addClass("align-settings").append($("<span></span>").addClass("gravit-icon-touch-settings")).on("click",function(e){this._advancedFillPanel.gOverlay("open",$(e.target).closest("button"))}.bind(this)).prependTo(t),$("<label></label>").text(a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.alignTitle"))).prependTo(t);const h=r.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.property-x-y-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.property-x-y-tooltip-description")),middle:!1,learnMore:"https://documentation.corelvector.com/basics/property-panel/#objects-position"}),f=r.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.property-w-h-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.property-w-h-tooltip-description")),middle:!1,learnMore:"https://documentation.corelvector.com/basics/property-panel/#objects-size"}),m=r.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.keep-ratio-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.keep-ratio-tooltip-description"))}),y=r.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.transform-button-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.transform-button-tooltip-description")),middle:!1,learnMore:"https://documentation.corelvector.com/basics/transform-panel/"}),v=r.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.rotate-angle-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.rotate-angle-tooltip-description")),middle:!1,learnMore:"https://documentation.corelvector.com/basics/property-panel/#objects-angle"});$("<div/>").addClass("transform-titile").text(a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.transform-title"))).appendTo(this._panel),$("<div></div>").gPropertyRow({label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.position")),columns:[{width:"44%",content:n("x",h)},{width:"12%"},{width:"44%",content:n("y",h)}]}).appendTo(e),$("<div></div>").gPropertyRow({label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.size")),columns:[{width:"44%",content:n("w",f)},{width:"12%",content:n("keep-ratio",m)},{width:"44%",content:n("h",f)}]}).appendTo(e),this._transformButton=$("<button>"+a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.transform"))+"</button>").addClass("transform-button").on("click",this._toggleTransformMode.bind(this)).gRichTooltip(y),$("<div></div>").gPropertyRow({label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.angle")),columns:[{width:"44%",content:n("rotate",v)},{width:"12%"},{width:"44%",content:this._transformButton}]}).appendTo(e),this._anchorsPanel=$("<div></div>").gPropertyRow({label:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.anchors")),columns:[{width:"44%",content:$("<div/>").addClass("anchor-buttons").append($("<div/>").append($("<span/>").addClass("gravit-icon-anchor-left")).addClass("g-button").addClass("g-group-start").addClass("hacr-start").attr("data-title",a.GLocale.get(new a.GLocaleKey("GDimensionProperties","action.anchor-left"))).on("click",function(){gDesigner.stats("dimension_set_anchors-horizontalstart");var e=this._getHorizontalAnchorValue(),t=this._defineAnchorProperty("hacr",a.GElement.Anchor.AnchorType.Start,e);this._defineAnchorButtonState(null,t)}.bind(this)).gRichTooltip(r.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.anchor-left-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.anchor-left-tooltip-description")),learnMore:"https://documentation.corelvector.com/design-aids/anchoring/"}))).append($("<div/>").append($("<span/>").addClass("gravit-icon-anchor-center")).addClass("g-button").addClass("g-group-element").addClass("hacr-middle").attr("data-title",a.GLocale.get(new a.GLocaleKey("GDimensionProperties","action.anchor-center"))).on("click",function(){gDesigner.stats("dimension_set_anchors-horizontalmiddle");var e=this._getHorizontalAnchorValue(),t=this._defineAnchorProperty("hacr",a.GElement.Anchor.AnchorType.Middle,e);this._defineAnchorButtonState(null,t)}.bind(this)).gRichTooltip(r.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.anchor-center-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.anchor-center-tooltip-description")),learnMore:"https://documentation.corelvector.com/design-aids/anchoring/"}))).append($("<div/>").append($("<span/>").addClass("gravit-icon-anchor-right")).addClass("g-button").addClass("g-group-end").addClass("hacr-end").attr("data-title",a.GLocale.get(new a.GLocaleKey("GDimensionProperties","action.anchor-right"))).on("click",function(){gDesigner.stats("dimension_set_anchors-horizontalend");var e=this._getHorizontalAnchorValue(),t=this._defineAnchorProperty("hacr",a.GElement.Anchor.AnchorType.End,e);this._defineAnchorButtonState(null,t)}.bind(this)).gRichTooltip(r.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.anchor-right-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.anchor-right-tooltip-description")),learnMore:"https://documentation.corelvector.com/design-aids/anchoring/"})))},{width:"12%"},{width:"44%",content:$("<div>").addClass("anchor-buttons").append($("<div/>").append($("<span/>").addClass("gravit-icon-anchor-top")).addClass("g-button").addClass("g-group-start").addClass("vacr-start").attr("data-title",a.GLocale.get(new a.GLocaleKey("GDimensionProperties","action.anchor-top"))).on("click",function(){gDesigner.stats("dimension_set_anchors-verticalstart");var e=this._getVerticalAnchorValue(),t=this._defineAnchorProperty("vacr",a.GElement.Anchor.AnchorType.Start,e);this._defineAnchorButtonState(t,null)}.bind(this)).gRichTooltip(r.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.anchor-top-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.anchor-top-tooltip-description")),learnMore:"https://documentation.corelvector.com/design-aids/anchoring/"}))).append($("<div/>").append($("<span/>").addClass("gravit-icon-anchor-middle")).addClass("g-button").addClass("g-group-element").addClass("vacr-middle").attr("data-title",a.GLocale.get(new a.GLocaleKey("GDimensionProperties","action.anchor-middle"))).on("click",function(){gDesigner.stats("dimension_set_anchors-verticalmiddle");var e=this._getVerticalAnchorValue(),t=this._defineAnchorProperty("vacr",a.GElement.Anchor.AnchorType.Middle,e);this._defineAnchorButtonState(t,null)}.bind(this)).gRichTooltip(r.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.anchor-middle-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.anchor-middle-tooltip-description")),learnMore:"https://documentation.corelvector.com/design-aids/anchoring/"}))).append($("<div/>").append($("<span/>").addClass("gravit-icon-anchor-bottom")).addClass("g-button").addClass("g-group-end").addClass("vacr-end").attr("data-title",a.GLocale.get(new a.GLocaleKey("GDimensionProperties","action.anchor-bottom"))).on("click",function(){gDesigner.stats("dimension_set_anchors-verticalend");var e=this._getVerticalAnchorValue(),t=this._defineAnchorProperty("vacr",a.GElement.Anchor.AnchorType.End,e);this._defineAnchorButtonState(t,null)}.bind(this)).gRichTooltip(r.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.anchor-bottom-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.anchor-bottom-tooltip-description")),learnMore:"https://documentation.corelvector.com/design-aids/anchoring/"})))}]}).addClass("anchor-panel").appendTo(e)},h.prototype._setAspectRatioBehavior=function(e){i.GEditorOptions.preserveAspectRatio=e,i.GEditorOptions.allowTextRatioPreservation=e,gContainer.setProperty(h._keepRatioName,e)},h.prototype.isAvailable=function(e){return this._transformButton.toggleClass("g-active",e),gDesigner.isTouchEnabled()&&(e?(this._transformButton.text(a.GLocale.get(new a.GLocaleKey("GLocale","close"))),$(".advanced-transform-toolbar > label").text(a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.transform-advanced"))),this._anchorsPanel.toggleClass("down",!0),this._panel.toggleClass("have-anchor",!1),$(".advanced-transform-properties").toggleClass("have-anchor",!0)):(this._transformButton.text(a.GLocale.get(new a.GLocaleKey("GDimensionProperties","text.transform"))),this._anchorsPanel.toggleClass("down",!1),this._panel.toggleClass("have-anchor",!0),$(".advanced-transform-properties").toggleClass("have-anchor",!1),this._panel.addClass("have-anchor")),this._changeSideBarContinerZIndex(e)),!0},h.prototype._changeSideBarContinerZIndex=function(e){gDesigner.isTouchEnabled()&&(e?gDesigner.getRightSidebars().addClassName("more-z-index"):gDesigner.getRightSidebars().removeClassName("more-z-index"))},h.prototype.update=function(e,t){if(this._document&&(this._document.getScene().removeEventListener(a.GElement.GeometryChangeEvent,this._geometryChange,this),this._document.getScene().removeEventListener(a.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document.getEditor().removeEventListener(i.GEditor.EdGeometryChangeEvent,this._edGeometryChange,this),gDesigner.removeEventListener(u,this._settingChanged),this._document=null),this._elements=[],$(this._panel).find(".anchor-panel").css("display","none"),e){for(var n=0;n<t.length;++n)!t[n].hasMixin(a.GElement.Transform)||t[n]instanceof a.GPage||this._elements.push(t[n]);if(this._elements.length&&this._elements.length===t.length)return this._document=e,this._document.getScene().addEventListener(a.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document.getScene().addEventListener(a.GElement.GeometryChangeEvent,this._geometryChange,this),this._document.getEditor().addEventListener(i.GEditor.EdGeometryChangeEvent,this._edGeometryChange,this),gDesigner.addEventListener(u,this._settingChanged,this),this._updateDimensions(),this._updateToolbar(),this._showAnchor()&&($(this._panel).find(".anchor-panel").css("display",""),this._defineAnchorButtonState(this._getVerticalAnchorValue(),this._getHorizontalAnchorValue())),!0}return!1},h.prototype._toggleTransformMode=function(){gDesigner.stats("dimension_change_transform-mode");var e=gDesigner.getToolManager();e.getActiveTool()&&e.getActiveTool()instanceof i.GSelectTool||e.activateTool(i.GPointerTool),e.getActiveTool()instanceof i.GSelectTool&&e.getActiveTool().setEditMode(e.getActiveTool().getEditMode()===i.GSelectTool.EditMode.Transform?i.GSelectTool.EditMode.Select:i.GSelectTool.EditMode.Transform)},h.prototype._geometryChange=function(e){e.type!==a.GElement.GeometryChangeEvent.Type.After&&e.type!==a.GElement.GeometryChangeEvent.Type.Child||this._elements.indexOf(e.element)>=0&&this._updateDimensions()},h.prototype._edGeometryChange=function(e){this._updateDimensions(!1,!0)},h.prototype._afterPropertiesChange=function(e){!e.temporary&&this._elements&&this._elements.indexOf(e.node)>=0&&this._showAnchor()&&this._defineAnchorButtonState(this._getVerticalAnchorValue(),this._getHorizontalAnchorValue())},h.prototype._settingChanged=function(e){"decimals_num"===e.key&&this._updateDimensions()},h.prototype._getCurrentDimensions=function(e,t){var n=null,o=0;if(!e){this._elementsBBox=null,this._firstElementsBBox=null;for(var r=0;r<this._elements.length;++r){var s=this._elements[r];if(s.hasMixin(a.GElement.Transform)){var l=null;if(t){var c=i.GElementEditor.getEditor(s);c&&c.getElement()&&(l=c.getPEGeometryBBox())}else l=s.getGeometryBBox();l&&(this._elementsBBox=this._elementsBBox?this._elementsBBox.united(l):l,this._firstElementsBBox||(this._firstElementsBBox=l,o=t&&c?c.getRotationAngle():s.getAngle()))}}this._elementsBBox||(this._elementsBBox=null,this._firstElementsBBox=this._elementsBBox)}if(this._firstElementsBBox){var d=this._elements.length>1,u=this._getDelta();if(d){var p=0;if(t){var g=this._document.getEditor().getSelectionEditor();g&&(p=g.getRotationAngle())}n={x:this._elementsBBox.getX()-u.getX(),y:this._elementsBBox.getY()-u.getY(),w:this._elementsBBox.getWidth(),h:this._elementsBBox.getHeight(),angle:p}}else n={x:this._firstElementsBBox.getX()-u.getX(),y:this._firstElementsBBox.getY()-u.getY(),w:this._firstElementsBBox.getWidth(),h:this._firstElementsBBox.getHeight(),angle:o}}return n},h.prototype._updateDimensions=function(e,t){var n=(e,t)=>{var n="";if(null!==t)switch(e){case"x":case"y":case"w":case"h":n=this._document.getScene().pointToString(t,this._document.getScene().getOptimalDecimalsCount());break;case"rotate":n=a.GUtil.formatNumber(a.GMath.toDegrees(t),1)}this._panel.find('input[data-dimension="'+e+'"]').gInputBox("value",n).prop("disabled",null===t)},o=this._getCurrentDimensions(e,t);o?(this._panel.find("[data-ratio]").css("display",""),n("x",o.x),n("y",o.y),n("w",o.w),n("h",o.h),n("rotate",o.angle)):(this._panel.find("[data-ratio]").css("display","none"),n("x",null),n("y",null),n("w",null),n("h",null),n("rotate",0))},h.prototype._updateToolbar=function(){this._toolbar.find("[data-action]").each(function(e,t){var n=$(t);n.prop("disabled",!gDesigner.canExecuteAction(n.attr("data-action")))}.bind(this)),this._toolbar.find(".touchDistribute>input").each(function(e,t){$(t).prop("disabled",!gDesigner.canExecuteAction("arrange.distribute.horizontal"))}.bind(this)),this._toolbar.find(".touchDistribute>button").each(function(e,t){$(t).prop("disabled",!gDesigner.canExecuteAction("arrange.distribute.horizontal"))}.bind(this))},h.prototype._assignDimension=function(e,t){if(this._document){var n=null,o=null,r="",s=this._getCurrentDimensions(!1,!1);switch(e){case"x":case"y":r="Move",n=this._document.getScene().stringToPoint(t),o=s?"x"==e?s.x:s.y:null;break;case"w":case"h":r=a.GLocale.get(new a.GLocaleKey("GDimensionProperties","action.change-size")),n=this._document.getScene().stringToPoint(t),o=s?"w"==e?s.w:s.h:null;break;case"rotate":r=a.GLocale.get(new a.GLocaleKey("GCommonNames","action.rotate")),n=a.GLength.parseEquationValue(t),o=s?s.angle:null}if(null===n||"number"!=typeof n||("w"==e||"h"==e)&&n<=0||n===o)this._updateDimensions();else{if("x"===e||"y"===e){var l=this._getDelta();switch(e){case"x":n+=l.getX();break;case"y":n+=l.getY()}}var c=function(t,o,i){if("w"===e||"h"===e){if("w"===e&&t.getWidth()<=0||"h"===e&&t.getHeight()<=0)return new a.GTransform;var r=1,s=1;switch(e){case"w":r=n/t.getWidth(),o&&(s=r);break;case"h":s=n/t.getHeight(),o&&(r=s)}return(new a.GTransform).translated(-t.getX(),-t.getY()).scaled(r,s).translated(t.getX(),t.getY())}if("x"===e)return(new a.GTransform).translated(n-t.getX(),0);if("y"===e)return(new a.GTransform).translated(0,n-t.getY());if("rotate"===e){var l=t.getSide(a.GRect.Side.CENTER);i=i||0;return(new a.GTransform).translated(-l.getX(),-l.getY()).rotated(i-a.GMath.toRadians(n)).translated(l.getX(),l.getY())}},d=this._elements.length>1,u="yes"===this._panel.find("[data-ratio]").attr("data-ratio"),p=this._document.getEditor();p.beginTransaction();try{for(var g=function(t,n,o,r){if(t=o.length&&o.indexOf(t)>=0?null:t){var s=t instanceof a.GSymbol&&("x"===e||"y"===e)||"rotate"===e||r&&r.fullContentTransform,l=i.GElementEditor.openEditor(t);l?(l._setTransform(n),l.applyTransform(t,s,o)):t.transform(n,s,o)}},h=[],f=0;f<this._elements.length;++f){var m=this._elements[f];h=h.concat(p.getLinkedElementsInSelection(m,this._elements))}if(d){if(this._elementsBBox){var y=c(this._elementsBBox,u);for(f=0;f<this._elements.length;++f)g(this._elements[f],y,h,p.getEdTransformSettings())}}else for(f=0;f<this._elements.length;++f){var v=this._elements[f].getGeometryBBox();if(v)(y=c(v,u,"rotate"===e?this._elements[f].getAngle():null))&&!y.isIdentity()&&g(this._elements[f],y,h,p.getEdTransformSettings())}}finally{p.commitTransaction(r)}}}},h.prototype._showAnchor=function(){for(var e=this._elements,t=!0,n=0;n<e.length;++n)if(!e[n].getParent()||!e[n].getParent().hasMixin(a.GElement.Layout)){t=!1;break}return t},h.prototype._getHorizontalAnchorValue=function(){for(var e=this._elements,t=e[0].getProperty("hacr")?e[0].getProperty("hacr"):0,n=0;n<e.length;++n)if(e[n].getProperty("hacr")!==t){t=0;break}return t},h.prototype._getVerticalAnchorValue=function(){for(var e=this._elements,t=e[0].getProperty("vacr")?e[0].getProperty("vacr"):0,n=0;n<e.length;++n)if(e[n].getProperty("vacr")!==t){t=0;break}return t},h.prototype._defineAnchorButtonState=function(e,t){null!==e&&($(this._panel).find(".vacr-middle").addClass(e===a.GElement.Anchor.AnchorType.Middle?"g-active":""),$(this._panel).find(".vacr-start").addClass(e===a.GElement.Anchor.AnchorType.Stretch||e===a.GElement.Anchor.AnchorType.Start?"g-active":""),$(this._panel).find(".vacr-end").addClass(e===a.GElement.Anchor.AnchorType.Stretch||e===a.GElement.Anchor.AnchorType.End?"g-active":""),$(this._panel).find(".vacr-middle").removeClass(e!==a.GElement.Anchor.AnchorType.Middle?"g-active":""),$(this._panel).find(".vacr-start").removeClass(e!==a.GElement.Anchor.AnchorType.Start&&e!==a.GElement.Anchor.AnchorType.Stretch?"g-active":""),$(this._panel).find(".vacr-end").removeClass(e!==a.GElement.Anchor.AnchorType.End&&e!==a.GElement.Anchor.AnchorType.Stretch?"g-active":"")),null!==t&&($(this._panel).find(".hacr-middle").addClass(t===a.GElement.Anchor.AnchorType.Middle?"g-active":""),$(this._panel).find(".hacr-start").addClass(t===a.GElement.Anchor.AnchorType.Stretch||t===a.GElement.Anchor.AnchorType.Start?"g-active":""),$(this._panel).find(".hacr-end").addClass(t===a.GElement.Anchor.AnchorType.Stretch||t===a.GElement.Anchor.AnchorType.End?"g-active":""),$(this._panel).find(".hacr-middle").removeClass(t!==a.GElement.Anchor.AnchorType.Middle?"g-active":""),$(this._panel).find(".hacr-start").removeClass(t!==a.GElement.Anchor.AnchorType.Start&&t!==a.GElement.Anchor.AnchorType.Stretch?"g-active":""),$(this._panel).find(".hacr-end").removeClass(t!==a.GElement.Anchor.AnchorType.End&&t!==a.GElement.Anchor.AnchorType.Stretch?"g-active":""))},h.prototype._defineAnchorProperty=function(e,t,n){var o=t;return t===n?o=0:t!==a.GElement.Anchor.AnchorType.Middle&&(n===a.GElement.Anchor.AnchorType.Stretch?o=t===a.GElement.Anchor.AnchorType.End?a.GElement.Anchor.AnchorType.Start:a.GElement.Anchor.AnchorType.End:n===a.GElement.Anchor.AnchorType.Start?o=t===a.GElement.Anchor.AnchorType.End?a.GElement.Anchor.AnchorType.Stretch:0:n===a.GElement.Anchor.AnchorType.End&&(o=t===a.GElement.Anchor.AnchorType.Start?a.GElement.Anchor.AnchorType.Stretch:0)),this._assignAnchorProperty([e],[o]),o},h.prototype._assignAnchorProperty=function(e,t){if(this._document){var n=this._document.getEditor();n.beginTransaction();try{for(var o=0;o<this._elements.length;++o){var r=this._elements[o];if(r.getParent().hasMixin(a.GElement.Layout)){var s=i.GElementEditor.getEditor(this._elements[o]);s&&s.applyPropertiesToParts(e,t)||this._elements[o].setProperties(e,t)}}}finally{n.commitTransaction(a.GLocale.get(new a.GLocaleKey("GDimensionProperties","action.change-anchor")))}}else console.warn("GDimensionProperties: empty _document property")},h.prototype._getDelta=function(){return new a.GPoint(0,0)},h.prototype.toString=function(){return"[Object GDimensionProperties]"},e.exports=h},function(e,t,n){"use strict";n(3);var o=n(45),i=n(13),a=n(1),r=n(16),s=n(27);function l(e){this._category=e,this._title=new a.GLocaleKey("GSnapUnitAction","title."+e)}a.GObject.inherit(l,s),l.Type={FullUnit:"full",HalfUnit:"half"},l.ID="arrange.snap-unit",l.prototype._category=null,l.prototype._title=null,l.prototype.getId=function(){return l.ID+"."+this._category},l.prototype.getTitle=function(){return this._title},l.prototype.getCategory=function(){return r.CATEGORY_MODIFY_ALIGN},l.prototype.getGroup=function(){return"arrange/snap-unit"},l.prototype.getShortcut=function(){switch(this._category){case l.Type.FullUnit:return[i.GKey.Constant.SHIFT,i.GKey.Constant.META,"U"];default:return null}},l.prototype.isEnabled=function(e){return(e=e||(gDesigner.getActiveDocument()?gDesigner.getActiveDocument().getEditor().getIndividualSelection():null))&&e.length>0},l.prototype.execute=function(e){var t=gDesigner.getActiveDocument(),n=t.getScene();e||(e=t.getEditor().getIndividualSelection()),o.GEditor.tryRunTransaction(n,function(){for(var t=0;t<e.length;++t){var n=e[t];if(n.hasMixin(a.GElement.Transform)){var o=n.getGeometryBBox();if(o&&o.getWidth()+o.getHeight()!==0){var i=a.GMath.round(o.getX(),!0),r=a.GMath.round(o.getY(),!0),s=a.GMath.round(o.getWidth(),!0),c=a.GMath.round(o.getHeight(),!0);this._category===l.Type.HalfUnit&&(i+=.5,r+=.5,s+=.5,c+=.5);var d=(new a.GTransform).translated(-o.getX(),-o.getY()).scaled(s/(o.getWidth()||1),c/(o.getHeight()||1)).translated(o.getX(),o.getY()).translated(i-o.getX(),r-o.getY());n.transform(d)}}}}.bind(this),a.GLocale.get(this.getTitle()))},l.prototype.toString=function(){return"[Object GSnapUnitAction]"},e.exports=l},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(16),r=n(27);function s(){}o.GObject.inherit(s,r),s.ID="view.clone",s.TITLE=new o.GLocaleKey("GNewWindowAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return a.CATEGORY_VIEW},s.prototype.getGroup=function(){return"view"},s.prototype.getShortcut=function(){return[i.GKey.Constant.META,i.GKey.Constant.OPTION,"N"]},s.prototype.isEnabled=function(){return!!gDesigner.getWindows().getActiveWindow()},s.prototype.execute=function(){gDesigner.getWindows().addWindow(gDesigner.getWindows().getActiveWindow())},s.prototype.toString=function(){return"[Object GNewWindowAction]"},e.exports=s},function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=n(13),r=o(n(16)),s=o(n(27)),l=o(n(427));function c(){}i.GObject.inherit(c,s.default),c.ID="view.outline-view",c.TITLE=new i.GLocaleKey("GOutlineViewAction","title"),c.GroupID="view",c.StoragePropertyName="designer.settings.outline-view.enabled",c.prototype.getId=function(){return c.ID},c.prototype.getTitle=function(){return i.GLocale.get(c.TITLE)},c.prototype.getCategory=function(){return r.default.CATEGORY_VIEW},c.prototype.getGroup=function(){return c.GroupID},c.prototype.isCheckable=function(){return!0},c.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-out-line":null},c.prototype.isChecked=function(){const e=gDesigner.getWindows().getActiveWindow();if(e){const t=e.getView().getViewConfiguration();return!!t&&t.paintMode===i.GScenePaintConfiguration.PaintMode.Outline}return!1},c.prototype.isEnabled=function(){return!!gDesigner.getWindows().getActiveWindow()},c.prototype.getShortcut=function(){return[a.GKey.Constant.OPTION,"Y"]},c.prototype.execute=function(){let e;if(gDesigner.getWindows().getActiveWindow().getView().getViewConfiguration().paintMode===i.GScenePaintConfiguration.PaintMode.Outline){var t=gDesigner.getActiveDocument();if(t){var n=t.getScene().getActivePage();if(n&&!n.isFixedSized())e=i.GScenePaintConfiguration.PaintMode.Full;else e=(n.getProperty(l.default.PAGE_CLIP_PROPERTY_NAME,!0)||l.default.PAGE_CLIP_CONTENT_ENABLED)===l.default.PAGE_CLIP_CONTENT_ENABLED?i.GScenePaintConfiguration.PaintMode.Output:i.GScenePaintConfiguration.PaintMode.Full}else e=i.GScenePaintConfiguration.PaintMode.Output}else e=i.GScenePaintConfiguration.PaintMode.Outline;gDesigner.setPaintMode(e),gDesigner.updateGEditorSceneConfigurationPaintMode(e)},c.prototype.toString=function(){return"[Object GOutlineViewAction]"},e.exports=c},function(e,t,n){"use strict";n(7),n(3);var o=n(1),i=n(27),a=n(16);const r=n(37),s=n(111);function l(){}o.GObject.inherit(l,i),l.ID="use-coupon-action",l.TITLE=new o.GLocaleKey("GUseCouponAction","title"),l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){return l.TITLE},l.prototype.getCategory=function(){return a.CATEGORY_HELP},l.prototype.getGroup=function(){return"help"},l.prototype.isVisible=function(){if(!gDesigner.isInAppPurchaseAllowed())return!1;const e=gDesigner.getLicense(),t=!(e.isPro()&&!e.isExpired()),n=!gDesigner.isAnonymous(),o=!e.isGuest();return t&&n&&o},l.prototype.execute=function(){r.prompt(o.GLocale.get(new o.GLocaleKey("GUseCouponAction","text.hava-coupon")),async e=>{if(e)return s.activateCoupon(e);r.alert(o.GLocale.get(new o.GLocaleKey("GUseCouponAction","text.invalid-coupon")))})},l.prototype.toString=function(){return"[Object GUseCouponAction]"},e.exports=l},function(e,t,n){"use strict";var o=n(14),i=n(1),a=n(13),r=o(n(792));function s(){}i.GObject.inherit(s,r.default),s.ID="".concat(r.default.ID,".safari"),s.prototype.getId=function(){return s.ID},s.prototype.getShortcut=function(){return[a.GKey.Constant.META,a.GKey.Constant.ALT_LEFT,"O"]},s.prototype.isAvailable=function(){return a.GPlatform.webBrowser===a.GPlatform.constructor.WebBrowser.Safari},e.exports=s},function(e,t,n){"use strict";var o=n(14);n(52),n(17),n(578),n(314),n(7),n(18),n(62),n(29),n(28),n(22);var i=n(1),a=n(13),r=o(n(77)),s=n(837),l=o(n(781)),c=o(n(37)),d=n(34),u=o(n(166)),p=n(9),g=o(n(340)),h=n(503);const f=n(1523),m=n(1143),y=n(1524),v=n(1151);let _=null;const b=function e(t,n){this.panel=t,this.filesPanel=n,this._cloudFolders=[],this._permissions=[e.Permission.CreateFolder,e.Permission.RecentFilesShowMore],this._bindedHandleShortcut=this.handleShortcut.bind(this),gDesigner.getUser().then(e=>{this._user=e}),this._isLoadingFolders=!1,(gContainer.getRuntime()===r.default.Runtime.Electron&&i.GSystem.operatingSystem===i.GSystem.OperatingSystem.Windows||i.GSystem.operatingSystem===i.GSystem.OperatingSystem.Unix)&&this.panel.closest(".g-dialog-container").addClass("cross-controls")};b.prototype.filesPanel=null,b.prototype._cloudFolders=null,b.prototype._isLoadingFolders=!1,b.prototype._fileInfoPanel=null,b.prototype._rightSide=null,b.prototype._user=null,b.prototype._contextMenu=null,b.prototype._downloadContextMenu=null,b.prototype._fileInfoPanelIsOpen=!1,b.prototype._fileTypeFilterButton=null,b.prototype._sortButton=null,b.prototype._loadFoldersOnDemand=async function(){if(!this._isLoadingFolders){this._isLoadingFolders=!0;try{const e=this._cloudFolders.filter(e=>e.isStateOpen()&&!e.isDone()).map(e=>e.loadChildrenOnDemand((t,n,o)=>this.filesPanel.drive.fetchFolders(this.filesPanel.getSort(),t,n,o).then(t=>t.map(t=>this._factoryFolder(t,e)))));e.length&&await Promise.all(e)}finally{this._isLoadingFolders=!1}}},b.prototype._factoryFolder=function(e,t){var n=this;e=this.filesPanel.updateCloudItemForUserPermission(e);var o=this.filesPanel.isItemSelected(e),i=this.filesPanel.isItemInClipboard(e),r=!1,s=new f(e,t,this.filesPanel.drive.isRootFolder(e)).onClick((e,t)=>{a.GPlatform.modifiers.metaKey?this.filesPanel.manageSelection(e,t):this.filesPanel.drive.getCurrentFolder()!==e&&(this.filesPanel.handleFolderClick(e,t),"shared_files_with_me"===e.id?this.hideFileTypeFilterButton():this.displayFileTypeFilterButton()),n._closeFileInfoPanel()}).onDoubleClick(()=>{s.getChildren()&&s.getChildren().length?s.toggleState():u().then(()=>s.toggleState())}).onContext((function(e,t,o){gDesigner.stats("filespanel-view_context_cloudfolder"),n.resetSelection(),n._addToSelection(t),n._openContextMenuForEventPosition(o)})).onFileDrop((e,t)=>{this.filesPanel.performFileMove(e,t)}).setRefreshHandler(u).onFolderStateClick(()=>{u().then(()=>{if(s.toggleState(),!s.isRootFolder()&&!r&&s.isStateOpen()){var e=s.getChildren();e&&e.length&&(r=!0,e.forEach(e=>e.refresh()))}})});this._cloudFolders.push(s);const l=this.filesPanel.drive.isRootFolder(e),c=t&&this.filesPanel.drive.isRootFolder(t.getFolder());var d;function u(){return s.isLoading()||s.getChildren()&&s.getChildren().length?d||Promise.resolve():(s.setLoading(!0),d=n.filesPanel.drive.fetchFolders(n.filesPanel.getSort(),e).then(t=>{s.setLoading(!1),s.setChildren(t.map(e=>n._factoryFolder(e,s))),s.update();const o=n.filesPanel.drive.getCurrentFolder();if(o&&"id"in o&&o.id===e.id||o===e){n.manageOpenFolder(null,e,s);let t=s;do{t.isStateOpen()||t.toggleState()}while(t=t.getParent())}}).catch(e=>(console.log(e&&e.stack,e),n.toggleLoading(!1),s.setLoading(!1),Promise.reject(e))))}return(l||c||this.filesPanel.drive.containsInPreviousPath(e))&&(l&&this.filesPanel.drive.resetPreviousSelectedFolderPath(),this.filesPanel.drive.removeLoadedFolderFromPreviousPath(e),u()),l&&s.toggleState(),s.getHTMLElement().addClass(o?"selected":"").addClass(i?"cut":""),s},b.prototype.navigateToFolder=async function(e){try{const f=this.filesPanel.drive;this.toggleLoading(!0),e="string"==typeof e?await f.getFolder(e):e;var t=async(e,t)=>{this.filesPanel.navigateToFolder(e);for(var n=this._cloudFolders.find(t=>t.getFolder().id===e.id),o=0;!(n||(await(0,d.sleep)(100),n=this._cloudFolders.find(t=>t.getFolder().id===e.id),++o>30)););if(this.manageOpenFolder(null,e,n),n){var i=n.getHTMLContainer();0===i[0].offsetTop&&t&&(i=t.getHTMLContainer()),setTimeout(()=>{this.panel.find(".g-left-side").animate({scrollTop:$(i).position().top},150)})}};if(e.family===p.EXTERNAL_APP.ONEDRIVEBUSINESS&&(f.isRootFolder(e)||f.isRootFolder(e.parent))||f.isRootFolder(e.relativeUrl?e.relativeUrl:e.parent))t(e);else{for(var n,o=[e],i=e,a=!1;!n;)if(i=await f.getFolder(i.parent).catch(t=>(t.status===p.gApi.HTTP_STATUS_CODES.NOT_FOUND&&i.id===e.id&&(a=!0),null))){if(o.push(i),o.length>h.MAX_FOLDER_DEPTH_FOR_CLOUD)return Promise.reject(p.gApi.HTTP_STATUS_CODES.NOT_FOUND);f.isRootFolder(i.parent)&&(n=!0)}else{if(a)return Promise.reject(p.gApi.HTTP_STATUS_CODES.NOT_FOUND);n=!0}var r=o.reverse(),s=this._cloudFolders,l=null,c=null,u=null;for(l=c=r.shift();l;){u=s.find(e=>e.getFolder().id===l.id);for(var g=0;!(u||(await(0,d.sleep)(100),u=s.find(e=>e.getFolder().id===l.id),++g>300)););u?(await u.refresh(),s=u.getChildren(),u.toggleState(),(l=r.shift())?c=l:t(c,u)):l=null}}this.toggleLoading(!1)}catch(e){return this.toggleLoading(!1),e}},b.prototype.relayout=function(){this.initLayout(!0)},b.prototype.hasPermission=function(e){return this._permissions.includes(e)},b.prototype._handleDriveEvent=function(e){e.type===l.default.DriveEvent.Type.FileDeleted&&this._getFileInfoPanelFileId()===e.data.id&&this._closeFileInfoPanel()},b.prototype._getFileInfoPanelFileId=function(){return $(".g-file-detail-container").data("fileId")},b.prototype._registerDriveEvent=function(){gDesigner.addEventListener(l.default.DriveEvent,this._handleDriveEvent,this)},b.prototype.initLayout=function(e){window.addEventListener("keydown",this._bindedHandleShortcut,!0),this._registerDriveEvent();var t=this;"native"===this.filesPanel.getCloudSettingsById(this.filesPanel.getCurrentDriveId()).type&&this.panel.addClass("native-cloud"),e&&(this.panel.off("click",_),this.panel.empty()),this.createTopBar(this.filesPanel.getUser()),this.panel.find(".g-files-top-buttons").toggleClass("g-cdgs",!this.filesPanel.getUISettings().dialogControls),this.panel.find(".g-files-top-account").toggleClass("g-cdgs",!this.filesPanel.getUISettings().dialogControls);var n=$("<div />").addClass("g-items-container");this.addSearchBar(n);var o=$("<div />").addClass("g-main").appendTo(n);const a=(0,d.throttle)(this._loadFoldersOnDemand.bind(this),100);let r=0;var s=$("<div />").addClass("g-left-side").scroll(e=>{if(t.filesPanel.drive.isLoadFoldersOnDemandSupported()){const t=$(e.target).scrollTop();t>r&&a(),r=t}}).appendTo(o);this._rightSide=$("<div />").addClass("g-right-side").on("contextmenu",e=>{t.resetSelection(),t._openContextMenuForEventPosition(e)}).appendTo(o),this._fileInfoPanel=b._createFileInfoPanel(),this._fileInfoPanel.appendTo(o);var l=$("<div />").addClass("g-folders-list").addClass("main"),c=$("<div />").addClass("g-folders-list").addClass("fixed-bottom").addClass("custom-folders"),u=$("<div/>").addClass("g-files-list"),p=$("<div/>").addClass("g-empty-panel").hide();const g=$("<div/>").addClass("g-example-files-list").hide(),h=$("<div/>").addClass("g-recent-files-list");_=function(e){e.stopPropagation(),t.filesPanel.getSelection().length&&(t.resetSelection(),t._updateFileInfoPanel(null),gDesigner.stats("filespanel-view_clear_selection"))},this.panel.on("click",_);const f=(0,d.debounce)(()=>this.filesPanel.buildDepth(!1,!1),100);$(this._rightSide).scroll(function(e){var t=$(e.currentTarget);Math.floor(t[0].scrollHeight-t.scrollTop())===Math.floor(t.outerHeight())&&$(u).children().length>0&&f()}.bind(this)),this.createHeader(this.panel),n.appendTo(this.panel),l.appendTo(s),c.appendTo(s),$("<div />").addClass("g-files-top-line g-recent-files").attr("data-title",i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.title-recent-files"))).appendTo(this._rightSide),p.appendTo(this._rightSide),g.appendTo(this._rightSide),h.appendTo(this._rightSide);const m=$("<div />").addClass("g-files-top-line g-all-files").addClass("g-recent-files-separator").attr("data-title",i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.title-all-files"))).hide().appendTo(this._rightSide);this.hasPermission(b.Permission.RecentFilesShowMore)&&m.append($("<div />").addClass("g-recent-files-show-more").text(i.GLocale.get(new i.GLocaleKey("GFilesPanelViewBase","text.show-more"))).on("click",(function(){h.addClass("extended-list"),$(this).hide(),t.updateLayout()})).on("mouseover",(function(e){e.stopPropagation(),e.preventDefault()}))),u.appendTo(this._rightSide),this.createFooter(this.filesPanel.getDefaultFilename()),this._permissionChanged()},b.prototype.updateLayout=function(){const e=this.panel.find(".g-files-list");if(e.hasClass("list-view")){const t=(e,t)=>{let n,o,i;({columnsAmount:o,total:n,totalRows:i}=this._getGridData(e)),t&&e.css("max-height","");const a=e.hasClass("extended-list");if(!n)return void e.addClass("single-row");if(!o||isNaN(o))return;const r=a?6:2;t&&!a&&i>2?this.panel.find(".g-recent-files-show-more").show():this.panel.find(".g-recent-files-show-more").hide(),t&&i>r&&(i=r),1===i?e.addClass("single-row"):e.removeClass("single-row"),e.find(".g-gravit-file").each((function(e){1!==i&&$(this).toggleClass("last-row-file",function(e){return e>=(i-1)*o}(e))}))};t(e),t(this.panel.find(".g-recent-files-list"),!0)}else{const e=this.panel.find(".g-recent-files-list"),t=e.hasClass("extended-list"),{totalRows:n,firstHeight:o}=this._getGridData(e);if(n>1&&!t){const t=o+10;e.css("max-height",t+"px")}else e.css("max-height","1000px")}this._updateContextMenu()},b.prototype._updateContextMenu=function(){this._setContextMenuActiveRangeSize()},b.prototype._getGridData=function(e){const t=e.find(".g-gravit-file"),n=t.length,o=t.eq(0).width(),i=t.eq(0).height();let a=1;o&&!isNaN(o)&&(a=Math.floor(e.width()/o));return{total:n,totalRows:n%a>0?Math.floor(n/a)+1:Math.floor(n/a),columnsAmount:a,firstHeight:i}},b.prototype.toggleLoading=function(e){e?this.panel.closest(".g-dialog-content").find(".cloud-frame").addClass("loading"):this.panel.closest(".g-dialog-content").find(".cloud-frame").removeClass("loading")},b.prototype.toggleRecentFiles=function(e){const t=this.panel.find(".g-right-side");t.toggleClass("g-show-recent-files",!!e);const n=!t.find(".g-files-list").is(":empty")&&!!e;t.find(".g-all-files").toggle(n);const o=!t.find(".g-recent-files-list").is(":empty")&&!!e;t.find(".g-recent-files").toggle(o),this.panel.find(".g-recent-files-separator").toggle(o)},b.prototype.toggleFolders=function(e){this.panel.toggleClass("full-width",!!e);this.panel.find(".g-left-side").toggleClass("g-no-display",!e),this.panel.closest(".cloud-dialog").toggleClass("no-folders",!e)},b.prototype.createTopBar=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=new u.default(e);var o=this.filesPanel.getCloudSettings(),a=this.filesPanel.getCloudSettingsById(this.filesPanel.getCurrentDriveId()),r=this,s=$("<div />").addClass("g-files-top-bar").addClass(n?"default":"").append($("<div />").addClass("g-files-top-buttons").append($("<div />").addClass("g-button").addClass("cloud-button").addClass("maximize-button").attr("data-title",i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.maximize-window"))).on("click",e=>{e.stopPropagation(),this.filesPanel.handleMaximizePanel()}).append($("<span/>").addClass("icon").addClass("gravit-icon-maximize-dialog"))).append($("<div />").addClass("g-button").addClass("cloud-button").addClass("minimize-button").attr("data-title",i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.minimize-window"))).css("display","none").on("click",e=>{e.stopPropagation(),this.filesPanel.handleMinimizePanel()}).append($("<span/>").addClass("icon").addClass("gravit-icon-minimize-dialog"))).append($("<div/>").addClass("g-button").addClass("cloud-button").addClass("close-button").attr("data-title",i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.close-window"))).on("click",e=>{e.stopPropagation(),this.filesPanel.handleClosePanel()}).append($("<span/>").addClass("icon").addClass("gravit-icon-close")))).append($("<div />").addClass("g-files-top-account").append($("<div />").addClass("g-files-top-account-name").html(e.getUserReference())).append(new m(e).build().addClass("g-files-top-avatar")));if(t?this.panel.find(".g-files-top-bar").replaceWith(s):s.appendTo(this.panel),n)return void this._createRefreshButton(s,n);var l=$("<div />").addClass("g-files-top-cloud-menu").append($("<div />").addClass("g-files-top-cloud-menu-icon")).on("click",(function(){r._cloudPane(this),gDesigner.stats("filespanel-view_open_cloud-pane")})).appendTo(s);switch(a.type){case"sharepoint":case"sharepoint-native":l.addClass("sharepoint").append($("<div />").addClass("g-files-top-cloud-menu-name").text(a.name));break;case"onedrivebusiness":case"onedrivebusiness-native":l.addClass("onedrivebusiness").append($("<div />").addClass("g-files-top-cloud-menu-name").text(a.name));break;case"googledrive-native":case"googledrive":l.addClass(a.className).append($("<div />").addClass("g-files-top-cloud-menu-name").text(a.name));break;default:l.addClass("gravit-cloud")}o&&0!==o.length||s.append($("<div />").addClass("g-files-top-add-cloud-account-button").append($("<div />").addClass("icon-container").append($("<span />").addClass("icon").addClass("gravit-icon-plus-add"))).append($("<div />").addClass("text").text(i.GLocale.get(new i.GLocaleKey("GFilesPanelViewBase","text.connect-cloud-drive")))).on("click",function(){this._newCloudAccountDialog()}.bind(this)));const d=this.filesPanel.drive.getActions();d&&d.length&&d.forEach(e=>{let{title:t,icon:n,execute:o}=e;return $("<div/>").addClass("g-files-top-cloud-refresh-content").append($("<div/>").addClass("container").append(n?$("<div/>").addClass("icon").addClass(n):"").append($("<div/>").addClass("text").text(t))).appendTo(s).click(()=>{gDesigner.stats("filespanel-view_execute_action",t),o(this.filesPanel.getContextSource()).catch(e=>{"string"==typeof e?c.default.alert(e):console.error(e)})})}),this._createRefreshButton(s,n)},b.prototype.updateTopBar=function(){this.createTopBar(this.filesPanel.getUser(),!0)},b.prototype._createRefreshButton=function(e,t){$("<div/>").addClass("g-files-top-cloud-refresh-content").addClass(t?"default":"").append($("<div/>").addClass("container").append($("<div/>").addClass("icon").addClass("gravit-icon-refresh")).append($("<div/>").addClass("text").text(i.GLocale.get(new i.GLocaleKey("GFilesPanelViewBase","text.refresh-drive-content"))))).appendTo(e).click(()=>{gDesigner.stats("filespanel-view_refresh_file-list"),this.filesPanel.updateFilesList()})},b.prototype._cloudPane=async function(e){try{var t=this.filesPanel.getCloudSettings(),n=$("<div/>").addClass("cloud-pane").on("click",()=>{gDesigner.stats("filespanel-view_close_cloud-pane"),n.gOverlay("close")}),o=this.filesPanel.getCloudSettingsById(this.filesPanel.getCurrentDriveId()),a=$("<div />").addClass("head").append($("<div />").addClass("cloud-pane-head-icon")).on("click",()=>{gDesigner.stats("filespanel-view_close_cloud-pane"),n.gOverlay("close")}).appendTo(n);switch(o.type){case"sharepoint":case"sharepoint-native":a.addClass("sharepoint").append($("<div />").addClass("cloud-pane-head-name").text(o.name));break;case"googledrive":case"googledrive-native":a.addClass("google-drive").append($("<div />").addClass("cloud-pane-head-name").text(o.name));break;default:a.addClass("native")}if(t&&t.length){for(var r=$("<div />").addClass("items-container"),s=0,l=t.length;s<l;s++)try{var d,u=t[s],p=!1,h=[];if(u.id===o.id&&(d=this.filesPanel.drive.supportsCorporateStorage())){try{h=await this.filesPanel.drive.getCorporateStorages()}catch(e){console.error(e)}p=h.length>0}(e=>{const t=$("<div />").addClass("item").addClass(e.id===this.filesPanel.getCurrentDriveId()?"selected":"").addClass("cloud-".concat(e.type)).append($("<div />").addClass("icon-container").append($("<span />").addClass("icon").addClass(e.className&&"".concat(e.className,"-icon")||""))).append($("<div />").addClass("name").text(e.name)).on("click",async function(){if(e.id!==this.filesPanel.getCurrentDriveId()){gDesigner.stats("filespanel-view_open_cloud-drive",e.name),this.toggleLoading(!0);try{await this.filesPanel.setCloudDrive(e)}catch(e){var t;e&&e instanceof g.default&&(t=e),c.default.alert(t||i.GLocale.get(new i.GLocaleKey("GCommonNames","text.loading-failed"))),console.error(">>>failed to set cloud drive",e)}}n.gOverlay("close")}.bind(this)).appendTo(r);if(d&&p&&t.append($("<div />").addClass("corporate-storage-list").addClass("arrow-open-right")),e.deletable&&t.append($("<div />").addClass("account-settings-container").append($("<span />").addClass("edit-account").addClass("icon").addClass("gravit-icon-context-icon")).on("click",t=>{t.preventDefault(),t.stopPropagation(),this._editCloudPane(e),gDesigner.stats("filespanel-view_open_edit-cloud-account-dialog"),this._closeCorporateSubMenu(),n.gOverlay("close")})),d&&p){var o=this.filesPanel.drive.getCorporateStorage(),a=[{default:!0,name:i.GLocale.get(new i.GLocaleKey("GFilesPanelViewBase","text.my-drive")),active:!o,data:null}];a=a.concat(h.map(e=>({active:o&&e.id===o.id,default:!1,name:e.name,data:e}))),this._corporateStoragesPane(t,a,async e=>{await this.filesPanel.drive.setCorporateStorage(e.data),this.filesPanel.drive.setCurrentFolder(null),this.filesPanel.updateFilesList(),n.gOverlay("close")})}else t.hover(()=>{this._closeCorporateSubMenu()})})(u)}catch(e){console.error(e)}r.appendTo(n)}t.some(e=>["googledrive"].includes(e.type))||$("<div/>").addClass("new-item").append($("<div />").addClass("icon-container").append($("<span />").addClass("icon").addClass("gravit-icon-plus-add"))).append($("<div />").addClass("text-container").append($("<div />").addClass("item-text").text(i.GLocale.get(new i.GLocaleKey("GFilesPanelViewBase","text.connect-new-cloud-drive"))))).on("click",function(){this._newCloudAccountDialog(),n.gOverlay("close")}.bind(this)).appendTo(n),n.gOverlay({padding:!1,releaseOnClose:!0,clazz:"cloud-pane-overlay",offsetX:10,offsetY:-40,closeCallback:()=>{this._closeCorporateSubMenu()}}).gOverlay("open",e,this.panel)}catch(e){c.default.alert(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.loading-failed")))}},b.prototype._editCloudPane=function(e){const t=this;if(e){var n=$("<div />").addClass("edit-account-dialog-content").on("keypress",(function(e){13===e.keyCode&&$(this).closest(".edit-account-dialog").find(".vendor-form-save").click()})).append($("<div />").addClass("g-btn-close").append($("<span />").addClass("gravit-icon-close")).on("click",()=>{gDesigner.stats("filespanel-view_close_edit-cloud-account-dialog",e.name),n.gDialog("close")})).append($("<div />").addClass("title").text(i.GLocale.get(new i.GLocaleKey("GFilesPanelViewBase","text.edit-drive-title")))).append($("<label />").append($("<div />").text(i.GLocale.get(new i.GLocaleKey("GFilesPanelViewBase","text.add-new-account-field-name")))).append($("<input />").attr("type","text").attr("tabindex",1).attr("name","name").val(e.name).attr("id","cloud-account-name"))).gDialog({className:"edit-account-dialog",closable:!0,buttons:[$("<button />").addClass("cloud-button").addClass("edit-account-disconnect-button").attr("tabindex",4).on("click",o=>{o.preventDefault(),o.stopPropagation(),gDesigner.stats("filespanel-view_disconnect_cloud-account",e.name),t.filesPanel.deleteCloudDrive(e).then(async()=>{try{t.filesPanel.getCurrentDriveId()===e.id&&(t.toggleLoading(!0),t.filesPanel.drive instanceof l.default&&await t.filesPanel.drive.uninstall(),t.filesPanel.setCloudDrive(t.filesPanel.getCloudSettingsById(1)))}catch(e){console.error(">>>e",e)}n.gDialog("close")})}).text(i.GLocale.get(new i.GLocaleKey("GFilesPanelViewBase","text.button-edit-cloud-drive-disconnect"))),$("<button />").addClass("vendor-form-cancel").addClass("cloud-button").attr("tabindex",3).on("click",(function(t){t.preventDefault(),t.stopPropagation(),gDesigner.stats("filespanel-view_close_edit-cloud-account-dialog",e.name),n.gDialog("close")})).text(i.GLocale.get(new i.GLocaleKey("GFilesPanelViewBase","text.button-add-cloud-drive-cancel"))),$("<button />").addClass("vendor-form-save").addClass("cloud-button").addClass("primary").attr("tabindex",2).on("click",(async function(o){o.preventDefault(),o.stopPropagation();var i=n.find("#cloud-account-name").val();let a=[];i||a.push("cloud-account-name"),a.length?a.forEach(e=>{n.find("#".concat(e)).addClass("error")}):(gDesigner.stats("filespanel-view_save_edit-cloud-account-dialog",e.name),await t.filesPanel.updateCloudAccountName(e.id,i),n.gDialog("close"))})).text(i.GLocale.get(new i.GLocaleKey("GFilesPanelViewBase","text.button-add-cloud-drive-save")))]});n.gDialog("open",!0),n.find("#cloud-account-name").focus()}else console.error("vendor object is missing")},b.prototype._newCloudAccountDialog=async function(){var e=this,t=await this.filesPanel.getCreateCloudAccountOptions();if(gDesigner.stats("filespanel-view_open_add-cloud-drive-account-dialog"),!(t.length<1)){var n=$("<div />").append($("<div></div>").addClass("g-btn-close").append($("<span></span>").addClass("gravit-icon-close")).on("click",()=>{gDesigner.stats("filespanel-view_close_new-cloud-account-dialog"),n.gDialog("close")})).append($("<div />").addClass("title").text(i.GLocale.get(new i.GLocaleKey("GFilesPanelViewBase","text.add-new-cloud-drive")))),o=$("<div />").addClass("vendor-options");n.gDialog({releaseOnClose:!0,closable:!0,className:"g-cloud-account-options"});for(var a=0,r=t.length;a<r;a++){!function(t){o.append($("<div />").addClass("vendor-option").addClass(t.pro&&!gDesigner.isEnabledProFeatures()?"pro":"").addClass(t.type).append($("<div />").addClass("icon").addClass(t.className&&"".concat(t.className,"-icon")||"")).append($("<div />").addClass("name").text(i.GLocale.get(new i.GLocaleKey("GFilesPanelViewBase","text.connect-cloud-drive-text")).replace("%name",t.name))).on("click",(function(){if(t.pro&&!gDesigner.isEnabledProFeatures())return gDesigner.stats("filespanel-view_nonprotriespro_clouddriver",t.type),gDesigner.handlePROFeatureInterruption();n.gDialog("close"),e._addCloudDriveDialog(t)})))}(t[a])}n.append(o),n.gDialog("open")}},b.prototype._addCloudDriveDialog=function(e){var t=this;if(e){if(gDesigner.stats("filespanel-view_open_add-cloud-drive-account-form-dialog",e.type),"googledrive"===e.type)return function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.filesPanel.saveNewCloudAccount(e).then(async()=>{try{await t.filesPanel.setCloudDrive(e)}catch(o){return t.filesPanel.deleteCloudDrive(e).then(()=>{if(n)throw o.message;c.default.alert(o.message)}),Promise.reject(o)}})}({type:"googledrive",deletable:!1,className:"google-drive",name:i.GLocale.get(new i.GLocaleKey("GFilesPanelViewBase","text.personal-google-drive"))}).then(()=>{const e=this.filesPanel.drive;e&&e.hasEventListeners(l.default.DriveEvent)&&e.trigger(new l.default.DriveEvent(this.filesPanel.getContextSource(),l.default.DriveEvent.Type.Added))})}else console.error("vendor object is missing")},b.prototype._closeCorporateSubMenu=function(){this._corporateSubMenu&&(this._corporateSubMenu.gOverlay("close"),this._corporateSubMenu=null)},b.prototype.updateUserDetails=function(e){let t;e instanceof u.default||(e=new u.default(e)),t=e.getUserReference(),t&&this.panel.find(".g-files-top-account-name").html(t)},b.prototype._corporateStoragesPane=async function(e,t,n){const o=()=>{for(var o=$("<div/>").addClass("corporate-storages-pane").on("click",()=>{gDesigner.stats("filespanel-view_close_corporate-storages-pane"),o.gOverlay("close")}),i=$("<div />").addClass("storage-container"),a=0,s=t.length;a<s;a++){var l=t[a];(function(e){$("<div />").addClass("item").addClass(e.active?"selected":"").append($("<div />").addClass("icon-container").append($("<span />").addClass("icon"))).append($("<div />").addClass("name").text(e.name)).appendTo(i)[0].addEventListener("mousedown",()=>{o.gOverlay("close"),gDesigner.stats("filespanel-view_select_corporate-storage"),n(e)},!0)}).call(this,l)}i.appendTo(o),this._closeCorporateSubMenu(),e.addClass("active"),o.gOverlay({padding:!1,releaseOnClose:!0,clazz:"cloud-corporate-storage-pane-overlay",offsetX:e.outerWidth()-11,offsetY:-e.outerHeight(),closeCallback:()=>{e.removeClass("active"),gContainer.getRuntime()===r.default.Runtime.IPad&&e.gOverlay("close")}}).gOverlay("open",e,this.panel),this._corporateSubMenu=o};gContainer.getRuntime()===r.default.Runtime.IPad?e.click(()=>{e.gOverlay("open"),o()}):e.hover(o)},b.prototype._sortPane=function(e){var t=$("<div/>").addClass("context-pane");void 0!==this.filesPanel.drive.SORT_TYPES.UPDATED&&$("<div/>").addClass("context-button").addClass("sort-option").addClass("updated").append($("<span/>").addClass("icon")).append($("<span/>").addClass("label").text(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.updated")))).on("click",function(){gDesigner.stats("filespanel-view_sort-by_cloud",s.GFilesPanelSortTypes.UPDATED),this.filesPanel.setSortType("updated"),this.filesPanel.sort(),t.gOverlay("close")}.bind(this)).appendTo(t),void 0!==this.filesPanel.drive.SORT_TYPES.NAME&&$("<div/>").addClass("context-button").addClass("sort-option").addClass("name").append($("<span/>").addClass("icon")).append($("<span/>").addClass("label").text(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.name")))).on("click",function(){gDesigner.stats("filespanel-view_sort-by_cloud",s.GFilesPanelSortTypes.NAME),this.filesPanel.setSortType("name"),this.filesPanel.sort(),t.gOverlay("close")}.bind(this)).appendTo(t),void 0!==this.filesPanel.drive.SORT_TYPES.CREATED&&$("<div/>").addClass("context-button").addClass("sort-option").addClass("created").append($("<span/>").addClass("icon")).append($("<span/>").addClass("label").text(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.created")))).on("click",function(){gDesigner.stats("filespanel-view_sort-by_cloud",s.GFilesPanelSortTypes.CREATED),this.filesPanel.setSortType("created"),this.filesPanel.sort(),t.gOverlay("close")}.bind(this)).appendTo(t),$("<hr/>").appendTo(t),$("<div/>").addClass("context-button").addClass("sort-option").addClass("ascending").append($("<span/>").addClass("icon")).append($("<span/>").addClass("label").text(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.ascending")))).on("click",function(){gDesigner.stats("filespanel-view_sort-type_cloud","ascending"),this.filesPanel.setSortDirection(s.GFilesPanelSortDirections.ASCEND),this.filesPanel.sort(),t.gOverlay("close")}.bind(this)).appendTo(t),$("<div/>").addClass("context-button").addClass("sort-option").addClass("descending").append($("<span/>").addClass("icon")).append($("<span/>").addClass("label").text(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.descending")))).on("click",function(){gDesigner.stats("filespanel-view_sort-type_cloud","descending"),this.filesPanel.setSortDirection(s.GFilesPanelSortDirections.DESCEND),this.filesPanel.sort(),t.gOverlay("close")}.bind(this)).appendTo(t),t.gOverlay({padding:!1,releaseOnClose:!0,clazz:"context-overlay",offsetX:-70,offsetY:8}).gOverlay("open",e,this.panel),this._updateSortStates()},b.prototype._handleFilterItemClick=function(e,t,n){const o=$(n);e?this.filesPanel.addFileTypeToSelectedFilter(t):this.filesPanel.deleteFileTypeFromSelectedFilter(t),this.filesPanel.sort(),0!==this.filesPanel.getSelectedFilterForFileTypes().length?o.hasClass("g-check")||o.addClass("g-check"):o.hasClass("g-check")&&o.removeClass("g-check")},b.prototype._createFilterFileTypeOverlay=function(e){var t=$("<div/>").addClass("context-pane");const n=this.filesPanel.getAvailableFileTypesFilter();if(!n||!n.length)return;var o=this;return n.forEach(n=>{!function(t,n){const a=$('<input type="checkbox"/>').on("click",(function(n){n.stopImmediatePropagation(),o._handleFilterItemClick(a[0].checked,t.type,e)}));$("<div/>").addClass("context-button").addClass("sort-option").addClass(t.id).append(a).append($("<label/>").addClass("label").css("cursor","pointer").text(i.GLocale.get(t.name))).on("click",(function(n){n.preventDefault(),n.stopImmediatePropagation(),a[0].checked=!a[0].checked,o._handleFilterItemClick(a[0].checked,t.type,e)})).appendTo(n)}(n,t)}),t.append($("<hr>")),$("<div/>").addClass("context-button").addClass("sort-option").addClass("clear-option").append($("<span>").text(i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.clear")))).on("click",function(){if(0===this.filesPanel.getSelectedFilterForFileTypes().length)return;const e=t.find("input[type=checkbox]");for(let t=0;t<e.length;t++)e[t].checked=!1;this.filesPanel.clearAllFileTypesFromSelectedFilter(),this.clearFileTypeFilterState(),this.filesPanel.sort()}.bind(this)).appendTo(t),t.gOverlay({padding:!1,releaseOnClose:!0,clazz:"context-overlay",offsetX:-70,offsetY:8}).gOverlay("open",e,this.panel),this._updateFilterFileTypeStates(),t},b.prototype._updateSortStates=function(){var e=this.panel.closest(".g-dialog-container");e.find(".sort-option").removeClass("sort-selected"),e.find(".sort-option."+this.filesPanel.getSortType()).addClass("sort-selected"),this.filesPanel.getSortDirection()?e.find(".sort-option.ascending").addClass("sort-selected"):e.find(".sort-option.descending").addClass("sort-selected")},b.prototype._updateFileTypeFilterButtonColor=function(e){0!==this.filesPanel.getSelectedFilterForFileTypes().length&&$(e).addClass("g-check")},b.prototype._updateFilterFileTypeStates=function(){var e=this.panel.closest(".g-dialog-container");if(!e.length)return;this.filesPanel.getSelectedFilterForFileTypes().forEach(t=>{const n=this.filesPanel.getAvailableFileTypesFilter().find(e=>e.type===t);e.find(".sort-option.".concat(n.id)).find("input[type=checkbox]")[0].checked=!0})},b.prototype._addToSelection=function(e){var t=e.data("node");t&&(e.addClass("selected"),this.filesPanel.addToSelection(t))},b.prototype.resetSelection=function(){this.panel.find(".g-gravit-folder").removeClass("selected"),this.panel.find(".g-gravit-file").removeClass("selected").removeClass("last-selected"),this.filesPanel.resetSelection()},b.prototype.manageOpenFolder=function(e,t,n){(this.panel.find(".g-gravit-folder").removeClass("opened"),e)?$(e).addClass("opened"):t&&this.panel.find(".g-gravit-folder").each((e,n)=>{const o=$(n),i=o.data("node");(i&&"id"in i&&(i.id===t.id||i.id===t)||i===t)&&o.addClass("opened")});if(n&&!n.isRootFolder()){var o=n.getChildren();o&&o.length&&o.forEach(e=>e.refresh())}},b.prototype._isMultiSelectionEnabled=function(){return this.filesPanel.isMultiSelectionEnabled()},b.prototype.manageSelection=function(e,t){if(this.panel.find(".g-gravit-file").removeClass("last-selected"),a.GPlatform.modifiers.metaKey)e.hasClass("selected")?(e.removeClass("selected"),this.filesPanel.removeFromSelection(t)):this._addToSelection(e);else if(this._isMultiSelectionEnabled()&&a.GPlatform.modifiers.shiftKey){var n=$(e),o=n.nextAll(".g-cloud-element.selected"),i=n.prevAll(".g-cloud-element.selected"),r=i.length>0?i[0]:null,s=o.length>0?o[0]:null;if(!r||!s){this.resetSelection();var l=[],c=null;if(r?(c=$(r),l=$(r).nextUntil(e)):(c=$(s),l=$(e).nextUntil(s)),l.length>0)for(var d=0;d<l.length;++d){let e=$(l[d]);this._addToSelection(e)}this._addToSelection(e),this._addToSelection(c)}}else this.resetSelection(),this._addToSelection(e),e.addClass("last-selected")},b.prototype.addToClipboard=function(e){let t="";t=this.filesPanel.isClipboardModeCopy(e)?"copy":"cut",this.panel.find(".g-gravit-folder.selected").addClass(t),this.panel.find(".g-gravit-file.selected").addClass(t),this.resetSelection()},b.prototype.resetClipboard=function(e){let t="";this.filesPanel.isClipboardModeCopy(e)?t="copy":this.filesPanel.isClipboardModeCut(e)&&(t="cut"),this.panel.find(".g-gravit-folder").removeClass(t),this.panel.find(".g-gravit-file").removeClass(t)},b.prototype.shouldFilesBeRequested=function(){var e=this.panel.find(".g-right-side");return Math.floor(e[0].scrollHeight-e.scrollTop())===Math.floor(e.outerHeight())},b.prototype.clearFilesAndFolders=function(){this._cloudFolders=[],this.clearFiles(),this.panel.find(".g-folders-list").empty()},b.prototype.clearFiles=function(){this.panel.find(".g-files-list").empty(),this.panel.find(".g-recent-files-list").empty(),this.panel.find(".g-search-no-results").hide(),this.toggleRecentFiles(!1)},b.prototype._showCDRWarningUnsupportedObjects=function(){this.panel.find(".save-form-container").addClass("warning").find(".warning-container").css("display","")},b.prototype.minimizeWindow=function(){this.panel.closest(".g-dialog-container").removeClass("fullscreen"),this.panel.find(".g-files-top-bar").find(".maximize-button").show(),this.panel.find(".g-files-top-bar").find(".minimize-button").hide()},b.prototype.maximizeWindow=function(){this.panel.closest(".g-dialog-container").addClass("fullscreen"),this.panel.find(".g-files-top-bar").find(".maximize-button").hide(),this.panel.find(".g-files-top-bar").find(".minimize-button").show()},b.prototype.toListView=function(){this.panel.find(".g-files-list").addClass("list-view"),this.panel.find(".g-recent-files-list").addClass("list-view"),this.panel.find(".header").find(".g-button.list-view").addClass("g-selected"),this.panel.find(".header").find(".g-button.card-view").removeClass("g-selected"),this.updateLayout()},b.prototype.toCardView=function(){this.panel.find(".g-files-list").removeClass("list-view"),this.panel.find(".g-recent-files-list").removeClass("list-view"),this.panel.find(".header").find(".g-button.card-view").addClass("g-selected"),this.panel.find(".header").find(".g-button.list-view").removeClass("g-selected"),this.updateLayout()},b.prototype.toggleEmptyPanel=function(e){if(e){const e=this.filesPanel.drive.getDefaultEmptyMessage();e&&this.panel.find(".g-empty-panel").empty().prepend($("<div/>").append($("<span/>").html(e.title)).append(e.buttons?e.buttons.map(e=>$("<button/>").addClass("g-highlight-button highlighted").text(e.title).on("click",()=>(gDesigner.stats("filespanel-view_execute_action",e.title),e.execute(this.filesPanel.getContextSource())))):"")).show()}else this.panel.find(".g-empty-panel").hide()},b.prototype.toggleExampleFiles=function(e){e?this.panel.find(".g-example-files-list").show():this.panel.find(".g-example-files-list").hide()},b.prototype.removeExampleFiles=function(){this.panel.find(".g-gravit-example-file").remove()},b.prototype.renderNewFolderButton=function(e,t){var n=$("<div/>").addClass("header-left-actions");$("<div/>").addClass("g-button").addClass("cloud-button").addClass("new-folder").append($("<span/>").addClass("icon").addClass("gravit-icon-w-newfolder")).append($("<span/>").addClass("label").text(i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.new-folder")))).attr("data-title",i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.new-folder-tooltip"))).on("click",e=>{e.stopPropagation();const n=$(e.currentTarget).hasClass("g-disabled");this._isCreateFolderEnabled()&&!n&&this.filesPanel.handleNewFolder(t)}).appendTo(n),n.appendTo(e)},b.prototype._isCreateFolderEnabled=function(){return!gDesigner.getApplicationManager().isOnlyFileOpenFromCloudEnabled()&&this.hasPermission(b.Permission.CreateFolder)},b.prototype.renderSortButton=function(e){var t=this,n=$("<div/>").addClass("g-button").addClass("cloud-button").addClass("sort").css("margin-left","5px").append($("<span/>").addClass("icon").addClass("gravit-icon-w-sort")).attr("data-title",i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.sort"))).on("click",(function(e){e.stopPropagation(),gDesigner.stats("filespanel-view_sort_cloud"),t._sortPane(this)}));this._sortButton=n,n.appendTo(e)},b.prototype.renderFileTypeFilterButton=function(e){var t=this,n=$("<div/>").addClass("g-button").addClass("cloud-button").addClass("filter-button").addClass("sort").append($("<span/>").addClass("icon").addClass("gravit-icon-filter-view")).attr("data-title",i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.filter"))).on("click",(function(e){e.stopPropagation(),t._createFilterFileTypeOverlay(this)}));n.appendTo(e),this._fileTypeFilterButton=n,this._updateFileTypeFilterButtonColor(n)},b.prototype.clearFileTypeFilterState=function(){this._fileTypeFilterButton&&this._fileTypeFilterButton.removeClass("g-check")},b.prototype.hideFileTypeFilterButton=function(){this._fileTypeFilterButton&&(this._fileTypeFilterButton.css("display","none"),this._sortButton.css("marginLeft","15px"))},b.prototype.displayFileTypeFilterButton=function(){this._fileTypeFilterButton&&(this._fileTypeFilterButton.css("display","block"),this._sortButton.css("marginLeft","5px"))},b.prototype.renderToParentFolderButton=function(e){$("<div/>").addClass("g-button").addClass("cloud-button").addClass("back").addClass("g-hidden").attr("data-title",i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.back-tooltip"))).append($("<span/>").addClass("icon").addClass("gravit-icon-w-back")).append($("<span/>").addClass("label").text(i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.back")))).on("click",function(e){e.stopPropagation(),this.filesPanel.handleBack()}.bind(this)).appendTo(e)},b.prototype.renderToRootFolderButton=function(e){$("<div/>").addClass("g-button").addClass("cloud-button").addClass("back").addClass("g-hidden").attr("data-title",i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.my-cloud-tooltip"))).append($("<span/>").addClass("icon").addClass("gravit-icon-w-back")).append($("<span/>").addClass("label").text(i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.my-cloud")))).on("click",function(e){e.stopPropagation(),this.filesPanel.navigateToRoot()}.bind(this)).appendTo(e)},b.prototype.renderGridStyleButtons=function(e){var t=this;$("<div />").addClass("grid-styles-container").append($("<div />").addClass("g-button").addClass("cloud-button").addClass("style-button").addClass("card-view").addClass("g-selected").attr("data-title",i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.card-view-button"))).append($("<span />").addClass("icon").addClass("gravit-icon-card-view")).on("click",(function(e){e.stopPropagation(),$(this).hasClass("g-selected")||(gDesigner.stats("filespanel-view_view-files_card"),t.filesPanel.toCardView())}))).append($("<div />").addClass("g-button").addClass("cloud-button").addClass("style-button").addClass("list-view").attr("data-title",i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.list-view-button"))).append($("<span />").addClass("icon").addClass("gravit-icon-list-view")).on("click",(function(e){e.stopPropagation(),$(this).hasClass("g-selected")||(gDesigner.stats("filespanel-view_view-files_list"),t.filesPanel.toListView())}))).appendTo(e)},b.prototype._getSaveOptions=function(){return{}},b.prototype.addSearchBar=function(){},b.prototype.getSearchValue=function(){},b.prototype.updateControls=function(){},b.prototype.updateToolControls=function(){},b.prototype.createHeader=function(){},b.prototype.createFooter=function(){},b.prototype.addFile=function(){},b.prototype.addFolder=function(){},b.prototype.focusFileNameInput=function(){},b.prototype.scrollToSelectedElement=function(){},b.Permission={CreateFolder:"create-folder",RecentFilesShowMore:"recent-files-show-more"},b.prototype._permissions=[],b.prototype.hasPermission=function(e){return this._permissions.includes(e)},b.prototype.setPermission=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._permissionSupported(e)){if(t)this.hasPermission(e)||this._permissions.push(e);else if(this.hasPermission(e)){var n=this._permissions.indexOf(e);this._permissions.splice(n,1)}this._permissionChanged()}else console.warn("Permission not supported: "+e)},b._createFileInfoPanel=function(){return $("<div/>").on("click",e=>{e.stopPropagation(),e.preventDefault()}).addClass("g-file-info-panel")},b.prototype._closeFileInfoPanel=function(){this._rightSide.toggleClass("show-info-panel",!1),this._fileInfoPanel.toggleClass("g-active",!1),this._fileInfoPanelIsOpen=!1},b.prototype._openFileInfoPanel=function(){this._rightSide.toggleClass("show-info-panel",!0),this._fileInfoPanel.toggleClass("g-active",!0),this._fileInfoPanelIsOpen=!0},b.prototype._updateFileInfoPanel=async function(e,t,n){const o=this.filesPanel.getSelection();if(!e||!this._user||o&&1!==o.length)this._closeFileInfoPanel();else{o[0].id!==e.id&&(e=o[0]);try{this._openFileInfoPanel(),this._fileInfoPanel.toggleClass("loading",!0),this._fileInfoPanel.empty();const o=$("<div/>").addClass("g-file-detail-container").appendTo(this._fileInfoPanel),i=y.getRenderForFile(e);await i.render(o,e),i.addEventListener(v,o=>this._detailRenderEventListener(o,e,t,n))}finally{this._fileInfoPanel.toggleClass("loading",!1),this._scrollToTheFile(t,n),n&&this._expandRecentListIfFileWasHidden(t)}}},b.prototype._detailRenderEventListener=function(e,t,n,o){switch(e.type){case v.Type.DoubleClickFile:this.filesPanel.handleFileDblClick(e.data);break;case v.Type.Reload:this._updateFileInfoPanel(t,n,o);break;case v.Type.UnshareWithMe:this._closeFileInfoPanel(),this.filesPanel.updateFilesList()}},b.prototype._scrollToTheFile=function(e){const t=this._rightSide.height()/3,n=e[0],o=n.offsetTop-t>0?n.offsetTop-t:0;this._rightSide.animate({scrollTop:o+"px"},400)},b.prototype._expandRecentListIfFileWasHidden=function(e){const t=this.panel.find(".g-recent-files-list"),n=this._getGridData(t);t.find(".g-gravit-file").index(e)>=n.columnsAmount&&(this.panel.find(".g-recent-files-show-more").hide(),t.css("max-height","max-content"))},b.prototype._permissionSupported=function(e){return Object.values(b.Permission).includes(e)},b.prototype.handleShortcut=function(e){switch(e.which){case 70:this._forceSearchInput(e);break;case 86:this._handlePasteShortcut(e);break;case 27:this._handleEscShortcut(e)}},b.prototype._forceSearchInput=function(e){if(a.GPlatform.modifiers.metaKey||a.GPlatform.modifiers.ctrlKey){var t=this.panel.find(".search-container > input.search-field");t.length>0&&(e.preventDefault(),t.focus())}},b.prototype._handlePasteShortcut=function(e){function t(){e.preventDefault(),e.stopPropagation()}(a.GPlatform.modifiers.metaKey||a.GPlatform.modifiers.ctrlKey)&&(this.filesPanel.isClipboardModeCut()?(t(),this.filesPanel.performCutPaste()):this.filesPanel.isClipboardModeCopy()&&(t(),this.filesPanel.performCopyPaste()))},b.prototype._handleEscShortcut=function(e){this._fileInfoPanelIsOpen&&(this._closeFileInfoPanel(),e.preventDefault(),e.stopPropagation())},b.prototype.handleParentClose=function(){window.removeEventListener("keydown",this._bindedHandleSearchShortcut,!0),gDesigner.removeEventListener(l.default.DriveEvent,this._handleDriveEvent,this)},b.prototype._setContextMenuActiveRangeSize=function(e){const t=e||this._contextMenu,n=$(".frame.cloud-frame"),o=n.offset();o&&(t.setActiveRangeSize(o.left,o.top,n.height(),n.width()),this._downloadContextMenu&&this._downloadContextMenu.setActiveRangeSize(o.left,o.top,n.height(),n.width()))},b.prototype._permissionChanged=function(){},b.prototype._isContextMenuAvailableForFile=function(e){return this.filesPanel._isContextMenuAvailableForFile(e)},e.exports=b},function(e,t,n){"use strict";function o(){}n(26),n(51),o.prototype.type=null,o.prototype.hasKey=function(e){return this.hasOwnProperty(e)},o.prototype.hasValue=function(e){return this.hasKey(e)&&void 0!==this[e]&&null!==this[e]},o.prototype.getAsInt=function(e){return parseInt(this[e])},o.from=function(e){if(!e||e&&!Object.keys(e).length)return null;var t=new o;return t=Object.assign(t,e)},o.FileExtension={CDR:"cdr",DES:"des",CDRAPP:"cdr",GVDESIGN:"gvdesign"},e.exports=o},function(e,t,n){"use strict";var o=setInterval((function(){navigator.onLine&&($(document).trigger("networkAvailable"),clearInterval(o))}),2e4);t.youtubePlaylist="https://www.youtube.com/playlist?list=PLqsk_4aqUvEYxmy5NpQakcZXa6_3w-I8F"},function(e,t,n){"use strict";n(3);var o=n(45),i=n(1),a=n(13),r=n(845),s=n(848),l=n(1152),c=n(789),d=n(590),u=n(853),p=n(1153),g=n(1154),h=n(846),f=n(790),m=n(1155);const y=n(791);var v=n(1156);const _=n(1280),b=n(1281),w=n(1282),C=n(1283),x=n(1284),S=n(1285);var E=n(849),A=n(852),T=n(850),G=n(851),P=n(223),D=n(325),L=n(783),I=n(1157),k=n(1286),O=n(1287),F=n(1288),R=n(854),M=n(1158);const N=n(855);var B=n(840),U=n(435),j=n(37),K=n(71);function V(e){var t=this._createContextMenu(),n=this._createCropMenu(),i=this._createPageMenu(),a=this._createTouchContextMenu(),r=this._createFillPropertyMenu(),s=this._createBorderPropertyMenu(),l=this._createEffectPropertyMenu();e.on("contextmenu",function(e,c){if(gDesigner.getWindows().getActiveWindow().getView()){var d=c&&c.previousEvent?c.previousEvent:c,u=gDesigner.getToolManager().getActiveTool(),p=e.data&&e.data.context||d&&d.data&&d.data.context;if(!u||!u.catchesContextMenu(p==U.LayerPanel||!1)){var g=t,h=!1;p===U.PagePanel?(g=i,gDesigner.stats("contextmenu_open_page-menu")):p===U.LayerPanel?(h=!0,gDesigner.stats("contextmenu_open_layer-menu")):p===U.FillPropertyPanel?(g=r,gDesigner.stats("contextmenu_open_fill-properties-menu")):p===U.BorderPropertyPanel?(g=s,gDesigner.stats("contextmenu_open_border-properties-menu")):p===U.EffectPropertyPanel?(g=l,gDesigner.stats("contextmenu_open_effect-properties-menu")):u instanceof o.GSelectTool&&u.isCropContext()?(g=n,gDesigner.stats("contextmenu_open_crop-menu")):(h=!0,gDesigner.stats("contextmenu_open_context-menu"));var f="number"==typeof e.clientX?e:d;this._contextMenuClientPosition=gDesigner.getWindows().getActiveWindow().getView()._convertClientPositionFromMousePosition(f);var m=e.pageX?e.pageX:d.pageX,y=e.pageY?e.pageY:d.pageY;return this._mouseEvent=e.pageX?e:d,this._options=c,gDesigner.isTouchEnabled()&&h?a.gOverlay("open",{x:m,y:y},void 0,()=>{gDesigner.trigger(new K(K.Type.ContextMenuOpened,gDesigner.getActiveDocument()))}):g.open({x:m,y:y}),this._contextMenuTouch=a,this._contextMenuDesktop=g,!0}}}.bind(this))}V.ID="context.menu",V.prototype._contextMenuClientPosition=null,V.prototype._mouseEvent=null,V.prototype._options=null,V.prototype._contextMenuTouch=null,V.prototype._contextMenuDesktop=null,V.prototype._createContextMenu=function(){var e=new P;e.__which="context",e.createAddItem(gDesigner.getAction(F.ID));var t=new D(D.Type.Menu,P);t.setCaption(i.GLocale.get(new i.GLocaleKey("GPaste","action.paste"))),t.getMenu().createAddItem(gDesigner.getAction(M.ID),null,null,null,V.ID).addEventListener(D.UpdateEvent,function(){gDesigner.getAction(M.ID).setPosition(this._contextMenuClientPosition)}.bind(this)),t.getMenu().createAddItem(gDesigner.getAction(N.ID)),t.getMenu().createAddItem(gDesigner.getAction(R.ID)),e.addItem(t),e.createAddDivider();var n=new D(D.Type.Menu,P);n.setCaption(i.GLocale.get(new i.GLocaleKey("GContextMenu","text.arrange"))),n.getMenu().createAddItem(gDesigner.getAction(s.ID+"."+o.GEditor.ArrangeOrderType.SendToFront)),n.getMenu().createAddItem(gDesigner.getAction(s.ID+"."+o.GEditor.ArrangeOrderType.BringForward)),n.getMenu().createAddItem(gDesigner.getAction(s.ID+"."+o.GEditor.ArrangeOrderType.SendBackward)),n.getMenu().createAddItem(gDesigner.getAction(s.ID+"."+o.GEditor.ArrangeOrderType.SendToBack)),e.addItem(n);var L=new D(D.Type.Menu,P);L.setCaption(i.GLocale.get(new i.GLocaleKey("GContextMenu","text.align"))),L.getMenu().createAddItem(gDesigner.getAction(r.ID+"."+o.GEditor.ArrangeAlignType.AlignLeft)),L.getMenu().createAddItem(gDesigner.getAction(r.ID+"."+o.GEditor.ArrangeAlignType.AlignCenter)),L.getMenu().createAddItem(gDesigner.getAction(r.ID+"."+o.GEditor.ArrangeAlignType.AlignRight)),L.getMenu().createAddItem(gDesigner.getAction(r.ID+"."+o.GEditor.ArrangeAlignType.AlignJustifyHorizontal)),L.getMenu().createAddDivider(),L.getMenu().createAddItem(gDesigner.getAction(r.ID+"."+o.GEditor.ArrangeAlignType.AlignTop)),L.getMenu().createAddItem(gDesigner.getAction(r.ID+"."+o.GEditor.ArrangeAlignType.AlignMiddle)),L.getMenu().createAddItem(gDesigner.getAction(r.ID+"."+o.GEditor.ArrangeAlignType.AlignBottom)),L.getMenu().createAddItem(gDesigner.getAction(r.ID+"."+o.GEditor.ArrangeAlignType.AlignJustifyVertical)),L.getMenu().createAddDivider(),L.getMenu().createAddItem(gDesigner.getAction(h.ID+"."+h.Type.Horizontal)),L.getMenu().createAddItem(gDesigner.getAction(h.ID+"."+h.Type.Vertical)),e.addItem(L);var k=new D(D.Type.Menu,P);k.setCaption(i.GLocale.get(new i.GLocaleKey("GContextMenu","text.transform"))),k.getMenu().createAddItem(gDesigner.getAction(T.ID+"."+T.Type.Rotate90Left)),k.getMenu().createAddItem(gDesigner.getAction(T.ID+"."+T.Type.Rotate90Right)),k.getMenu().createAddItem(gDesigner.getAction(T.ID+"."+T.Type.FlipHorizontal)),k.getMenu().createAddItem(gDesigner.getAction(T.ID+"."+T.Type.FlipVertical)),e.addItem(k),e.createAddDivider(),e.createAddItem(gDesigner.getAction(f.ID)),e.createAddItem(gDesigner.getAction(y.ID)),e.createAddItem(gDesigner.getAction(E.ID)),e.createAddItem(gDesigner.getAction(I.ID)),e.createAddDivider(),e.createAddItem(gDesigner.getAction(c.ID)),e.createAddItem(gDesigner.getAction(G.ID)),e.createAddItem(gDesigner.getAction(m.ID)),e.createAddItem(gDesigner.getAction(A.ID)),e.createAddDivider(),e.createAddItem(gDesigner.getAction(d.ID)),e.createAddItem(gDesigner.getAction(p.ID)),e.createAddItem(gDesigner.getAction(u.ID)),e.createAddDivider(),e.createAddItem(gDesigner.getAction(l.ID)),e.createAddItem(gDesigner.getAction(g.ID)),e.createAddDivider();const O=new D(D.Type.Menu,P);O.setCaption(i.GLocale.get(new i.GLocaleKey("GContextMenu","text.select-same"))),O.getMenu().createAddItem(gDesigner.getAction(v.ID)),O.getMenu().createAddDivider(),O.getMenu().createAddItem(gDesigner.getAction(_.getId(_.Type.Fill))),O.getMenu().createAddItem(gDesigner.getAction(_.getId(_.Type.Border))),O.getMenu().createAddItem(gDesigner.getAction(_.getId(_.Type.FillAndBorder))),O.getMenu().createAddDivider(),O.getMenu().createAddItem(gDesigner.getAction(b.ID)),O.getMenu().createAddItem(gDesigner.getAction(w.ID)),O.getMenu().createAddItem(gDesigner.getAction(C.ID)),O.getMenu().createAddItem(gDesigner.getAction(x.ID)),O.getMenu().createAddItem(gDesigner.getAction(S.ID)),e.addItem(O),e.createAddDivider();var B=new D(D.Type.Menu,P);return B.setCaption(i.GLocale.get(new i.GLocaleKey("GContextMenu","text.select"))),B.setIcon("gravit-icon-cursor-filled"),B.addEventListener(D.UpdateEvent,function(){B.getMenu().clearItems(),B.setEnabled(!1);var{elementHits:e,filteredElementHits:t,submenus:n}=this._getHitsElments();if(!(e&&e.length>0&&e[0]instanceof i.GPage)&&e&&e.length>0){B.setEnabled(!0);for(var o=0;o<t.length;o++){var r=t[o].element,s=r instanceof i.GBlock?r.getLabel():r.getNodeNameTranslated(),l="temp-"+e.indexOf(t[o]);if(n[l]){var c=new D(D.Type.Menu,P);c.setCaption((o+1).toString()+". "+s),c.setData(l),c.addEventListener(D.UpdateEvent,(function(){var e=n[this.getData()];this.getMenu().clearItems();for(var t=0;t<e.length;t++)this.getMenu().createAddItem((t+1).toString()+". "+(e[t]instanceof i.GBlock?e[t].getLabel():e[t].getNodeNameTranslated()),(function(){this.element.removeFlag(i.GNode.Flag.Highlighted),gDesigner.getActiveDocument().getEditor().updateSelection(a.GPlatform.modifiers.shiftKey,[this.element])}),(function(){this.element.setFlag(i.GNode.Flag.Highlighted)}),(function(){this.element.removeFlag(i.GNode.Flag.Highlighted)})).element=e[t]})),B.getMenu().addItem(c)}else B.getMenu().createAddItem((o+1).toString()+". "+s,(function(){this.element.removeFlag(i.GNode.Flag.Highlighted),gDesigner.getActiveDocument().getEditor().updateSelection(a.GPlatform.modifiers.shiftKey,[this.element])}),(function(){this.element.setFlag(i.GNode.Flag.Highlighted)}),(function(){this.element.removeFlag(i.GNode.Flag.Highlighted)})).element=r}}}.bind(this)),e.addItem(B),e},V.prototype._createCropMenu=function(){var e=new P;return e.__which="crop",e.createAddItem(gDesigner.getAction(k.ID)),e.createAddItem(gDesigner.getAction(O.ID)),e},V.prototype._getHitsElments=function(e){e=e||this._mouseEvent;var t=gDesigner.getWindows().getActiveWindow().getView()._convertClientPositionFromMousePosition(e),n=gDesigner.getActiveDocument().getScene(),a=gDesigner.getWindows().getActiveWindow().getView(),r=a.getWorldTransform(n),s=function(e){return!(e instanceof i.GPage)}.bind(this),l=n.hitTest(t,r,s,!0,-1,o.GEditorOptions.pickDistance,!0,null,!0,!1,a.getViewConfiguration().multiPageView);if(l&&l.length>0&&(l=l.filter((function(e){var t=e.element.getProperty("plkt");return!(t&i.GBlock.ProgramLck.NoEdit&&t&i.GBlock.ProgramLck.NoSizeChanges&&t&i.GBlock.ProgramLck.NoMove&&t&i.GBlock.ProgramLck.NoDelete)}))),l&&l.length>0&&l[0]instanceof i.GPage)return{elementHits:l};var c=[],d={};if(l&&l.length>0)for(var u=0;u<l.length;++u){for(var p=l[u].element.getParent(),g=!1,h=0;h<l.length;++h)if(l[h].element===p){g=!0,d["temp-"+h]?d["temp-"+h].push(l[u].element):d["temp-"+h]=[l[u].element];break}g||c.push(l[u])}return{elementHits:l,filteredElementHits:c,submenus:d}},V.prototype._createPageMenu=function(){var e=new P(null,"g-page-option-menu"),t={DUPLICATE:i.GLocale.get(new i.GLocaleKey("GContextMenu","page-panel.text.duplicate")),DELETE:i.GLocale.get(new i.GLocaleKey("GContextMenu","page-panel.text.delete")),COPY:i.GLocale.get(new i.GLocaleKey("GContextMenu","page-panel.text.copy")),EXPORT:i.GLocale.get(new i.GLocaleKey("GContextMenu","page-panel.text.export"))},n=e.createAddItem(t.DUPLICATE,(function(){var e=gDesigner.getActiveDocument().getScene();o.GEditor.tryRunTransaction(e,(function(){var t=e.getActivePage(),n=t.clone({copy:!0,copyIgnoreProperties:o.GEditorOptions.propertiesExcludedFromCopying});e.insertChild(n),e.renameClone(t,n);var a=n.getPosition(!0,!0,!0,!0);n.setProperty("off",new i.GTransform(1,0,0,1,a.getX(),a.getY()))}),t.DUPLICATE),gDesigner.stats("contextmenu_pages_duplicate")})),a=e.createAddItem(t.DELETE,(function(){var e=gDesigner.getActiveDocument().getScene(),n=e.getActivePage(),a=n.getSlavePages().length>0;n.getProperty("plkt")&i.GBlock.ProgramLck.NoDelete||(a?j.confirm(i.GLocale.get(new i.GLocaleKey("GOutlineSidebar","text.confirm-delete-masterpage")),(function(t){t&&o.GEditor.tryRunTransaction(e,(function(){e.deleteActivePage()}),i.GLocale.get(new i.GLocaleKey("GOutlineSidebar","action.delete-page")))}),null,null,!0,!0):o.GEditor.tryRunTransaction(e,(function(){e.deleteActivePage()}),t.DELETE),gDesigner.stats("contextmenu_pages_delete"))})),r=e.createAddItem(t.COPY,(function(){var e=gDesigner.getActiveDocument(),n=e.getScene();o.GEditor.tryRunTransaction(n,(function(){var t=e.isCommercialProductFile()||!gDesigner.getApplicationManager().isCopyPasteEnabled(),a=n.getActivePage(),r=i.GNode.serialize(a,{copy:!0,copyIgnoreProperties:o.GEditorOptions.propertiesExcludedFromCopying}),s='<gravit mimeType="'+i.GNode.MIME_TYPE+'" restricted="'+(!!t&&e.getStorageItem().getId())+'">'+$("<div/>").text(r).html()+"</gravit>";gContainer.copyToClipboard(s)}),t.COPY),gDesigner.stats("contextmenu_pages_copy")})),s=e.createAddItem(t.EXPORT,(function(){var e=gDesigner.getActiveDocument().getScene().getActivePage();gDesigner.executeAction(B.ID,[{element:e}],null,!0),gDesigner.stats("contextmenu_pages_export")}));return n.setIcon("gravit-icon-duplicate"),a.setIcon("gravit-icon-delete"),r.setIcon("gravit-icon-copy"),s.setIcon("gravit-icon-export"),s.setProFeatureInterruption(!1),e.addEventListener(L.EVENT,(function(e){gDesigner.isEnabledProFeatures()||s.setPro(!0)})),e.__which="page",e},V.prototype._createFillPropertyMenu=function(){var e=new P(null,"fill-context-menu"),t=null,n={DELETE:i.GLocale.get(new i.GLocaleKey("GContextMenu","fill-properties-panel.text.delete-fill")),COPY:i.GLocale.get(new i.GLocaleKey("GContextMenu","fill-properties-panel.text.copy-fill"))},r=e.createAddItem(n.DELETE,(function(){if(t){var e=gDesigner.getActiveDocument().getEditor().getSelection();o.GEditor.tryRunTransaction(e[0],(function(){for(var n=0;n<e.length;n++)for(var o=e[n].getPaintLayers().getFillLayers(),a=0;a<o.length;a++){var r=o[a];if(i.GStylable.FillPaintLayer.equals(r,t)){r.getParent().removeChild(r);break}}}),n.DELETE)}gDesigner.stats("contextmenu_fills_delete")})),s=e.createAddItem(n.COPY,(function(){if(t){var e=i.GNode.serialize([t],{copy:!0,copyIgnoreProperties:o.GEditorOptions.propertiesExcludedFromCopying}),n='<gravit mimeType="'+i.GNode.MIME_TYPE+'">'+$("<div/>").text(e).html()+"</gravit>";gContainer.copyToClipboard(n)}gDesigner.stats("contextmenu_fills_copy")}));return r.setIcon("gravit-icon-trash"),s.setIcon("gravit-icon-copy"),r.setShortcutHint([a.GKey.Constant.DELETE]),s.setShortcutHint([a.GKey.Constant.META,"C"]),e.addEventListener(L,function(){t=this._options&&this._options.data&&this._options.data.paintLayer}.bind(this)),e.__which="fill",e},V.prototype._createBorderPropertyMenu=function(){var e=new P(null,"border-context-menu"),t=null,n={ADVANCED:i.GLocale.get(new i.GLocaleKey("GContextMenu","border-properties-panel.text.advanced-settings")),DELETE:i.GLocale.get(new i.GLocaleKey("GContextMenu","border-properties-panel.text.delete-border")),COPY:i.GLocale.get(new i.GLocaleKey("GContextMenu","border-properties-panel.text.copy-border"))},r=e.createAddItem(n.ADVANCED,function(){this._options&&this._options.data&&this._options.data.openAdvancedSettings(),gDesigner.stats("contextmenu_borders_advanced-settings")}.bind(this)),s=e.createAddItem(n.DELETE,(function(){if(t){var e=gDesigner.getActiveDocument().getEditor().getSelection();o.GEditor.tryRunTransaction(e[0],(function(){for(var n=0;n<e.length;n++)for(var o=e[n].getPaintLayers().getBorderLayers(),a=0;a<o.length;a++){var r=o[a];if(i.GStylable.BorderPaintLayer.equals(r,t)){r.getParent().removeChild(r);break}}}),n.DELETE)}gDesigner.stats("contextmenu_borders_delete")})),l=e.createAddItem(n.COPY,(function(){if(t){var e=i.GNode.serialize([t],{copy:!0,copyIgnoreProperties:o.GEditorOptions.propertiesExcludedFromCopying}),n='<gravit mimeType="'+i.GNode.MIME_TYPE+'">'+$("<div/>").text(e).html()+"</gravit>";gContainer.copyToClipboard(n)}gDesigner.stats("contextmenu_borders_copy")}));return r.setIcon("gravit-icon-settings"),s.setIcon("gravit-icon-trash"),l.setIcon("gravit-icon-copy"),s.setShortcutHint([a.GKey.Constant.DELETE]),l.setShortcutHint([a.GKey.Constant.META,"C"]),e.addEventListener(L,function(){t=this._options&&this._options.data&&this._options.data.paintLayer}.bind(this)),e.__which="border",e},V.prototype._createEffectPropertyMenu=function(){var e=new P(null,"effect-context-menu"),t=null,n={COPY:i.GLocale.get(new i.GLocaleKey("GContextMenu","effect-properties-panel.text.copy-effect")),APPLY_TO_ELEMENT:i.GLocale.get(new i.GLocaleKey("GContextMenu","effect-properties-panel.text.apply-to-element")),APPLY_TO_FILL:i.GLocale.get(new i.GLocaleKey("GContextMenu","effect-properties-panel.text.apply-to-fill")),APPLY_TO_BORDER:i.GLocale.get(new i.GLocaleKey("GContextMenu","effect-properties-panel.text.apply-to-border"))},r=new D(D.Type.Menu,P);r.getMenu().addClass("effect-context-menu");var s=r.getMenu().createAddItem(n.APPLY_TO_ELEMENT,(function(){u(null,n.APPLY_TO_ELEMENT)})),l=r.getMenu().createAddItem(n.APPLY_TO_FILL,(function(){u(i.GStylable.StyleLayer.Fill,n.APPLY_TO_FILL)})),c=r.getMenu().createAddItem(n.APPLY_TO_BORDER,(function(){u(i.GStylable.StyleLayer.Border,n.APPLY_TO_BORDER)})),d=e.createAddItem(n.COPY,(function(){if(t){var e=i.GNode.serialize([t],{copy:!0,copyIgnoreProperties:o.GEditorOptions.propertiesExcludedFromCopying}),n='<gravit mimeType="'+i.GNode.MIME_TYPE+'">'+$("<div/>").text(e).html()+"</gravit>";gContainer.copyToClipboard(n)}gDesigner.stats("contextmenu_effects_copy")})),u=function(e,n){o.GEditor.tryRunTransaction(t,(function(){t.setProperty("ly",e)}),n),gDesigner.stats("contextmenu_effects_change-layer",n)};return r.setCaption(n.APPLY_TO_ELEMENT),d.setIcon("gravit-icon-copy"),s.setIcon("gravit-icon-circle"),l.setIcon("gravit-icon-fill"),c.setIcon("gravit-icon-stroke"),d.setShortcutHint([a.GKey.Constant.META,"C"]),e.addItem(r),e.addEventListener(L,function(){let e=null,o=null,a=(t=this._options&&this._options.data&&this._options.data.effect).getProperty("ly");a===i.GStylable.StyleLayer.Fill?(e="gravit-icon-fill",o=n.APPLY_TO_FILL):a===i.GStylable.StyleLayer.Border?(e="gravit-icon-stroke",o=n.APPLY_TO_BORDER):(e="gravit-icon-circle",o=n.APPLY_TO_ELEMENT),r.setIcon(e),r.setCaption(o)}.bind(this)),e.__which="effect",e},V.prototype.close=function(){this._contextMenuTouch&&this._contextMenuTouch.gOverlay("close"),this._contextMenuDesktop&&this._contextMenuDesktop.close()},V.prototype.toString=function(){return"[Object GContextMenu]"},e.exports=V},function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=o(n(591));function r(e){this._type=e,a.default.call(this,r.getId(e),r.getTitle(e))}i.GObject.inherit(r,a.default),r.ID="edit.select-by-paintlayer",r.getId=function(e){return"".concat(r.ID,".").concat(e)},r.getTitle=function(e){return new i.GLocaleKey("GSelectByPaintLayerAction","title.".concat(e))},r.Type={Fill:"fill",Border:"border",FillAndBorder:"fill_border"},r.prototype._type=null,r.prototype.getGroup=function(){return"edit/select-by-paintlayer"},r.prototype._getValue=function(e){switch(this._type){case r.Type.Fill:return this._getFillPatterns(e);case r.Type.Border:return this._getBorderPatterns(e);case r.Type.FillAndBorder:{const t=this._getFillPatterns(e),n=this._getBorderPatterns(e);return t===a.default.EmptyValue||n===a.default.EmptyValue?a.default.EmptyValue:{fills:t,borders:n}}default:return a.default.EmptyValue}},r.prototype._getFillPatterns=function(e){if(e.hasMixin(i.GStylable)){const t=e.getPaintLayers(),n=t&&t.getFillLayers(!0);if(n&&n.length>0)return n.map(e=>e.getProperty("_pt"))}return a.default.EmptyValue},r.prototype._getBorderPatterns=function(e){if(e.hasMixin(i.GStylable)){const t=e.getPaintLayers(),n=t&&t.getBorderLayers(!0);if(n&&n.length)return n.map(e=>e.getProperty("_pt"))}return a.default.EmptyValue},r.prototype.toString=function(){return"[Object GSelectByPaintLayerAction]"},e.exports=r},function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=o(n(591));function r(){a.default.call(this,r.ID,r.TITLE)}i.GObject.inherit(r,a.default),r.ID="edit.select-by-border-width",r.TITLE=new i.GLocaleKey("GSelectByBorderWidthAction","title"),r.prototype.getGroup=function(){return"edit/select-by-style"},r.prototype._getValue=function(e){if(e.hasMixin(i.GStylable)){const t=e.getPaintLayers(),n=t&&t.getBorderLayers(!0);if(n&&n.length>0)return n.map(e=>e.getProperty("_bw"))}return a.default.EmptyValue},r.prototype.toString=function(){return"[Object GSelectByBorderWidthAction]"},e.exports=r},function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=o(n(591));function r(){a.default.call(this,r.ID,r.TITLE)}i.GObject.inherit(r,a.default),r.ID="edit.select-by-transparency",r.TITLE=new i.GLocaleKey("GSelectByTransparencyAction","title"),r.prototype.getGroup=function(){return"edit/select-by-style"},r.prototype._getValue=function(e){return e.hasMixin(i.GNode.Properties)?e.getProperty("_stop"):a.default.EmptyValue},r.prototype.toString=function(){return"[Object GSelectByTransparencyAction]"},e.exports=r},function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=o(n(591));function r(){a.default.call(this,r.ID,r.TITLE)}i.GObject.inherit(r,a.default),r.ID="edit.select-by-blend-mode",r.TITLE=new i.GLocaleKey("GSelectByBlendModeAction","title"),r.prototype.getGroup=function(){return"edit/select-by-style"},r.prototype._getValue=function(e){return e.hasMixin(i.GNode.Properties)?e.getProperty("_sbl"):a.default.EmptyValue},r.prototype.toString=function(){return"[Object GSelectByBlendModeAction]"},e.exports=r},function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=o(n(591));function r(){a.default.call(this,r.ID,r.TITLE)}i.GObject.inherit(r,a.default),r.ID="edit.select-by-shape",r.TITLE=new i.GLocaleKey("GSelectByShapeAction","title"),r.prototype.getGroup=function(){return"edit/select-by-style"},r.prototype._getValue=function(e){return e.getNodeName()},r.prototype.toString=function(){return"[Object GSelectByShapeAction]"},e.exports=r},function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=o(n(591));function r(){a.default.call(this,r.ID,r.TITLE)}i.GObject.inherit(r,a.default),r.ID="edit.select-by-effect",r.TITLE=new i.GLocaleKey("GSelectByEffectAction","title"),r.prototype.getGroup=function(){return"edit/select-by-style"},r.prototype._getValue=function(e){if(!e.hasMixin(i.GStylable))return a.default.EmptyValue;const t=e.getEffects();return t?t.getChildren():[]},r.prototype.toString=function(){return"[Object GSelectByEffectAction]"},e.exports=r},function(e,t,n){"use strict";n(3);var o=n(1),i=n(45),a=n(16),r=n(97);function s(){}o.GObject.inherit(s,r),s.ID="modify.crop",s.TITLE=new o.GLocaleKey("GCropAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getIcon=function(){return"gravit-icon-crop"},s.prototype.getCategory=function(){return a.CATEGORY_MODIFY},s.prototype.getGroup=function(){return"structure-group"},s.prototype.isEnabled=function(){if(!r.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument();if(e){var t=e.getEditor(),n=t.getIndividualSelection();if(n&&n.length&&n[0]instanceof o.GImage&&t.hasSelectionDetail())return n[0].isReady()}return!1},s.prototype.execute=function(e,t){var n=gDesigner.getToolManager();n.getActiveTool()instanceof i.GSubSelectTool?(n.activateTool(i.GPointerTool,null,!0),n.getActiveTool().setEditMode(i.GSelectTool.EditMode.Select)):n.getActiveTool()instanceof i.GPointerTool&&n.getActiveTool().setEditMode(i.GSelectTool.EditMode.Select)},s.prototype.toString=function(){return"[Object GCropAction]"},e.exports=s},function(e,t,n){"use strict";n(3);var o=n(1),i=n(45),a=n(16),r=(n(27),n(97));function s(){}o.GObject.inherit(s,r),s.ID="modify.cancel-crop",s.TITLE=new o.GLocaleKey("GCancelCropAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getIcon=function(){return null},s.prototype.getCategory=function(){return a.CATEGORY_MODIFY},s.prototype.getGroup=function(){return"structure-group"},s.prototype.isEnabled=function(){if(!r.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument();if(e){var t=e.getEditor(),n=t.getIndividualSelection();if(n&&n.length&&n[0]instanceof o.GImage&&t.hasSelectionDetail())return n[0].isReady()}return!1},s.prototype.execute=function(e,t){if(!r.prototype.isEnabled.call(this))return!1;var n=gDesigner.getActiveDocument();if(n){var a=n.getEditor().getIndividualSelection(),l=a&&a.length?a[0]:null;l&&l instanceof o.GImage&&!o.GTransform.equals(l.getTransform(),l.getImageTransform())&&i.GEditor.tryRunTransaction(l,function(){var e=l.getImageTransform();l.setProperties(["trf","ut","tl_sx"],[e,!0,0])}.bind(this),o.GLocale.get(s.TITLE))}var c=gDesigner.getToolManager();c.getActiveTool()instanceof i.GSubSelectTool?(c.activateTool(i.GPointerTool,null,!0),c.getActiveTool().setEditMode(i.GSelectTool.EditMode.Select)):c.getActiveTool()instanceof i.GPointerTool&&c.getActiveTool().setEditMode(i.GSelectTool.EditMode.Select)},s.prototype.toString=function(){return"[Object GCancelCropAction]"},e.exports=s},function(e,t,n){"use strict";n(3);var o=n(45),i=n(1),a=(n(13),n(16)),r=n(97);function s(){this._title=new i.GLocaleKey("GEditElementActon","title")}i.GObject.inherit(s,r),s.ID="edit.edit",s.prototype._title=null,s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return this._title},s.prototype.getCategory=function(){return a.CATEGORY_EDIT},s.prototype.getGroup=function(){return"select"},s.prototype.getShortcut=function(){return null},s.prototype.isEnabled=function(e){if(!r.prototype.isEnabled.call(this))return!1;var t=!1;if((e=e||(gDesigner.getActiveDocument()?gDesigner.getActiveDocument().getEditor().getIndividualSelection():null))&&e.length>0&&!gDesigner.getActiveDocument().getEditor().isInlineEditing())if(gDesigner.getToolManager().getActiveTool()!=gDesigner.getToolManager().getTool(o.GSubSelectTool))t=!0;else for(var n=0;n<e.length;++n)e[n]instanceof i.GText&&(t=!0);return t},s.prototype.execute=function(e){var t=!1;if((e=e||(gDesigner.getActiveDocument()?gDesigner.getActiveDocument().getEditor().getIndividualSelection():null))&&e.length>0){for(var n=0;n<e.length&&!t;++n)if(e[n]instanceof i.GText){var a=e[n].getGeometryBBox(),r=gDesigner.getWindows().getActiveWindow(),s=r?r.getView():null;a&&s&&(t=gDesigner.getActiveDocument().getEditor().openInlineEditor(e[n],s,new i.GPoint(a.getX(),a.getY())))}t||gDesigner.getToolManager().getActiveTool()==gDesigner.getToolManager().getTool(o.GSubSelectTool)||gDesigner.getToolManager().activateTool(o.GSubSelectTool,null,!0)}},s.prototype.toString=function(){return"[Object GEditElementActon]"},e.exports=s},function(e,t,n){"use strict";n(52),n(17),n(7),n(62),n(28),n(22);var o=n(45),i=n(1),a=n(13),r=n(238),s=n(572),l=n(550);const c=["text/xml","text/plain"],d=["image/svg+xml","image/png","image/jpg","image/jpeg","image/gif","application/pdf"],u=c.concat(d).concat(["text/uri-list"]);function p(){var e=navigator.userAgent.toLowerCase().indexOf("safari")>=0;window.hasOwnProperty("ClipboardEvent")?((navigator.userAgent.toLowerCase().indexOf("firefox")>=0||e)&&(this._pasteArea=$("<div></div>").css({overflow:"hidden",height:"1px",top:"-9999px",position:"absolute"}).prop("contenteditable",!0).prop("tabindex",-1).appendTo($("body"))),document.addEventListener("paste",this._documentPasteEvent.bind(this))):(this._pasteArea=$("<div></div>").css({overflow:"hidden",height:"1px",top:"-9999px",position:"absolute"}).prop("contenteditable",!0).prop("tabindex",-1).appendTo($("body")),this._pasteArea[0].addEventListener("paste",this._documentPasteEvent.bind(this))),this._pasteArea&&this._pasteArea.on("focus",()=>{gDesigner.getWindows()&&(this._allowFocus||(this._pasteArea.blur(),gDesigner.getWindows().getActiveWindow()&&gDesigner.getWindows().getActiveWindow().getView().focus()))})}i.GObject.inherit(p,i.GObject),p.URIListHandler=function(){},p.URIListHandler.prototype.handle=async function(e,t){const n=(await e.text()).split("\n").filter(e=>!(0===e.indexOf("#"))).map(e=>fetch(e).then(e=>e.ok?e.blob():Promise.reject()));(await Promise.all(n)).forEach(e=>{t[e.type]=e})},p.TextHandler=function(){},p.TextHandler.prototype.handle=async function(e,t){const n=await e.text();t[e.type]=n};const g={"text/plain":new p.TextHandler,"text/xml":new p.TextHandler,"text/uri-list":new p.URIListHandler};p.prototype._pasteArea=null,p.prototype._allowFocus=!1,p.prototype._callback=null,p.prototype.pasteFromClipboard=async function(){if(!navigator.clipboard)return Promise.reject();if(navigator.permissions){const e=await navigator.permissions.query({name:"clipboard-read",allowWithoutGesture:!0});if(!e||"denied"===e.state)return Promise.reject()}const e=await navigator.clipboard.read();if(!e)return Promise.reject();for(const t of e){const e={};for(const n of t.types){if(!u.includes(n))continue;const o=await t.getType(n),i=g[n];i?await i.handle(o,e):e[n]=o}this.handlePasteData(e)}},p.prototype._documentPasteEvent=function(e){if(!this._canTrigger())return!1;if(!document.activeElement||!$(document.activeElement).is(":editable")||this._pasteArea&&document.activeElement===this._pasteArea[0]||gDesigner.isGravitIME(document.activeElement)){var t=e.clipboardData;if(e.clipboardData&&e.clipboardData.items&&e.clipboardData.items.length){for(var n=t.items,o={},r=0;r<n.length;r++){var s=null;switch(d=n[r].type){case"image/png":case"image/jpeg":case"image/gif":case"application/pdf":s=n[r].getAsFile();break;default:s=t.getData(d)||null}s&&(o[d]=s)}this._handlePasteData(o),a.GPlatform.webBrowser===a.GPlatform.constructor.WebBrowser.Firefox&&(e.stopPropagation(),e.preventDefault())}else if(this._pasteArea){o={};var l=0;if(t.types&&t.types.length){var c=t.types;for(r=0;r<c.length;r++){var d;if("public.file-url"===(d=c[r])&&t.files&&l<t.files.length){var u=t.files[l++];u&&(o[u.type]=u)}else{(s=t.getData(d))&&(o[d]=s)}}}setTimeout(function(){var e=this._pasteArea.children();if(1===e.length&&e.is("img")){var t=i.GUtil.dataUrlToBlob(e[0].src);t&&(o[t.type]=t)}this._handlePasteData(o),this._pasteArea.empty()}.bind(this),1)}this._pasteArea&&(this._allowFocus=!1,this._pasteArea.blur(),gDesigner.getWindows().getActiveWindow()&&gDesigner.getWindows().getActiveWindow().getView().focus())}},p.prototype._canTrigger=function(){var e=gDesigner.getActiveDocument();const t=e&&e.getEditor();if(t&&t.isInlineEditing()){const e=this._filterForInlineEditing(t.getSelection());if(e&&1===e.length&&e[0]instanceof i.GText)return!0}return!(!e||gDesigner.getRightSidebars().getActiveSidebar()==l.ID)},p.prototype.handlePasteData=function(e){return this._handlePasteData(e)},p.prototype._handlePasteData=function(e){if(!this._canTrigger())return!1;for(var t=!this._callback,n=gDesigner.getActiveDocument(),a=n.getEditor(),l=0;l<c.length;++l){var u=e[c[l]];if(u)try{var p=$.parseXML(u);if(p){if("svg"===p.documentElement.nodeName){e["image/svg+xml"]=new Blob([u],{type:"image/svg+xml"});break}if("gravit"===p.documentElement.nodeName&&p.documentElement.hasAttribute("mimeType")){if(p.documentElement.hasAttribute("restricted")){let e=p.documentElement.getAttribute("restricted");if(e&&"false"!=e&&(!n.getStorageItem()||n.getStorageItem().getId()!=e))return}e[p.documentElement.getAttribute("mimeType")]=$("<div/>").html(p.documentElement.textContent).text()}}}catch(e){}if(e[i.GNode.MIME_TYPE]){var g=i.GNode.deserialize(e[i.GNode.MIME_TYPE]),h=g instanceof i.GPage,f=n.filterUnrestrictedCommercialFileElements(h?g.getChildren():g);if(f&&f.length>0||h){var m=f.filter((function(e){return e instanceof i.GElement})),y=f.filter((function(e){return e instanceof i.GStyle})),v=1===f.length&&f[0]instanceof i.GText&&a.hasSelection()&&a.getSelection()[0]instanceof i.GText&&a.isInlineEditing();if(v||0==m.length&&1==f.length&&!h){var _=f[0];a.beginTransaction();try{if(v){if(!o.GInlineTextEditor.HANDLECOPYPASTE){var b=a.getSelection()[0];o.GElementEditor.getEditor(b).processPaste(_)}}else if(_ instanceof i.GStylable.FillPaintLayer||_ instanceof i.GStylable.BorderPaintLayer){m=a.getSelection();0!=(m=this._filterForStyleExceptions(m)).length&&(m.length>1?m.forEach((function(e){var t=_ instanceof i.GStylable.FillPaintLayer?new i.GStylable.FillPaintLayer:new i.GStylable.BorderPaintLayer;t.assignFrom(_),e.getPaintLayers().appendChild(t)})):m[0].getPaintLayers().appendChild(_))}else if(_ instanceof i.GStylable.Effect){m=a.getSelection();0!=(m=this._filterForStyleExceptions(m)).length&&(m.length>1?m.forEach((function(e){var t=new i.GStylable.Effect;t.assignFrom(_),e.getEffects().appendChild(t)})):m[0].getEffects().appendChild(_))}}finally{a.commitTransaction(i.GLocale.get(new i.GLocaleKey("GPaste","action.paste")))}}else{var w=n.getScene().getStyles();if(m.length>0||h){t&&a.beginTransaction();try{for(var C=0;C<y.length;++C){let e=y[C],t=e.getReferenceId(),o=null;for(var x=w.getFirstChild();null!==x;x=x.getNext())if(x.arePropertiesEqual(e,["ps","defaultStyle"])&&x.equalsStyle(e)){o=x;break}o||(o=new i.GStyle,o.setProperties(["name","defaultStyle","ps"],[e.getProperty("name"),!1,e.getProperty("ps")]),o.assignStyleFrom(e),n.getScene().getStyles().insertChild(o));for(var S=0;S<m.length;++S){let e=m[S];e.hasProperty("sref")&&e.getProperty("sref")===t&&e.setProperty("sref",o.getReferenceId())}}if(!this.executeCallback(m)){var E=gDesigner.getActiveDocument().getScene();h?(g.clearChildren(),g.setProperty("off",null),E.appendChild(g),m.length>0&&a.insertElements(m,!0,!0,!1,!0,g),E.setActivePage(g)):a.insertElements(m,!0,!0,!0,!0),E.isFixedSized()||this._centerToView(!0)}}finally{t&&a.commitTransaction(i.GLocale.get(new i.GLocaleKey("GPaste","action.paste")))}}}}return}if(u){var A,T=r.getProviderInstance(s),G=gDesigner.getWorkspace()&&gDesigner.getWorkspace().getFontManager()&&gDesigner.getWorkspace().getFontManager().getDefaultFont()&&gDesigner.getWorkspace().getFontManager().getDefaultFont().getFamily();const e=this._filterForInlineEditing(a.getSelection());if(e&&e.length>0&&e[0]instanceof i.GText&&a.isInlineEditing()){if(!o.GInlineTextEditor.HANDLECOPYPASTE){var P=e[0];return void o.GElementEditor.getEditor(P).processPaste(u)}}else{(P=new i.GText).setText(u,!0,!0),t&&a.beginTransaction();try{if(!this.executeCallback([P],!0)){if(a.insertElements([P],!1,!0,!0),(A=T&&T.getDefaultFamilyForString(u))&&A!==G){var D=i.GOpenTypeFont.getDirectionForString(u);D!==i.GTLDirectionTextTransformer.LTR?P.setProperties(["_tff","dir","_we"],[A,D,!0]):P.setProperties(["_tff","_we"],[A,!0])}else P.setProperty("_we",!0);o.GElementEditor.getEditor(P).invalidateTextWidth(),this._centerToView()}}finally{return void(t&&a.commitTransaction(i.GLocale.get(new i.GLocaleKey("GPaste","action.paste"))))}}}}for(var L=0;L<d.length;++L){var I=d[L];if(e[I]){t&&a.beginTransaction();try{n.placeOrImport(e[I],null,!1,!0,this.executeCallback.bind(this))}finally{t&&a.commitTransaction(i.GLocale.get(new i.GLocaleKey("GPaste","action.paste-image")))}return}}},p.prototype._filterForInlineEditing=function(e){return e?e.filter(e=>!(e instanceof i.GCollaborativeTextAnnotation)):null},p.prototype._filterForStyleExceptions=function(e){for(var t=[i.GPage,i.GGroup,i.GSymbol],n=[],o=0;o<e.length;o++){for(var a=e[o],r=!0,s=0;s<t.length;s++){if(a instanceof t[s]){r=!1;break}}r&&n.push(a)}return n},p.prototype._centerToView=function(e){var t,n,a=gDesigner.getActiveDocument().getEditor(),r=gDesigner.getActiveDocument().getScene(),s=gDesigner.getWindows().getActiveWindow(),l=r.getActivePage();if(n=r.isFixedSized()?l.getGeometryBBox():r.getPaintBBox(),s){var c=s.getView(),d=c.getViewTransform(l),u=i.GPaintCanvas.getScreenDPI(),p=c.getViewBox().scaled(u,u);t=d.mapRect(p),r.isFixedSized()&&(t=t.intersected(n)),t.isEmpty()&&(t=n)}else t=n;a.arrangeAlign(o.GEditor.ArrangeAlignType.AlignCenter,null,!0,t,!0,e),a.arrangeAlign(o.GEditor.ArrangeAlignType.AlignMiddle,null,!0,t,!0,e)},p.prototype.getArea=function(){return this._pasteArea},p.prototype.setAllowFocus=function(e){this._allowFocus=e},p.prototype.getAllowFocus=function(){return this._allowFocus},p.prototype.assignCallback=function(e){this._callback=e},p.prototype.executeCallback=function(e,t){return!!this._callback&&(this._callback(e,t),this._callback=null,!0)},e.exports=p},function(e,t,n){"use strict";n(17),n(3),n(22);var o=n(1),i=n(13),a=n(34),r=n(16),s=n(97);n(790);function l(){}o.GObject.inherit(l,s),l.USE_DPI=!0,l.ID="modify.path2bmp",l.TITLE=new o.GLocaleKey("GConvertToImageAction","title"),l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){return l.TITLE},l.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-flatten":""},l.prototype.getCategory=function(){return r.CATEGORY_MODIFY},l.prototype.getGroup=function(){return"structure-bitmap"},l.prototype.getShortcut=function(){return[i.GKey.Constant.F7]},l.prototype.isEnabled=function(){if(!s.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument()?gDesigner.getActiveDocument().getEditor().getSelection():null;if(e)for(var t=0;t<e.length;++t)if(e[t]instanceof o.GElement&&e[t].getPaintBBox()&&!e[t].getPaintBBox().isEmpty())return!0;return!1},l.prototype.execute=function(){var e=gDesigner.getActiveDocument(),t=e?e.getEditor():null,n=t?o.GNode.order(t.getIndividualSelection().slice()):null,i=[];if(n)for(var a=0;a<n.length;++a)n[a]instanceof o.GElement&&n[a].getPaintBBox()&&!n[a].getPaintBBox().isEmpty()&&i.push(n[a]);if(i.length){t.beginTransaction(),t.clearSelection();try{var r=this._groupStuff(i);if(r){var s=r.getParent(),l=r.getNext(),c=this._convertToImage(r);c&&(s.insertChild(c,l),s.removeChild(r),t.updateSelection(!1,[c]))}}finally{t.commitTransaction(o.GLocale.get(this.getTitle()))}}},l.prototype._groupStuff=function(e){if(e&&1===e.length)return e[0];for(var t=gDesigner.getActiveDocument(),n=t?t.getEditor():null,i=new o.GGroup,r=[],s=0;s<e.length;++s){(g=e[s]).validateInsertion(i)&&r.push(g)}if(r.length>0){var l,c=r[r.length-1],d=c.getParent(),u=c.getNext();if(!d.isLocked()&&i.validateInsertion(d)){d.insertChild(i,u);var p=gDesigner.getActiveDocument().getScene();try{l=new Set;for(s=0;s<r.length;++s)l.add(r[s].getParent());(0,a.blockChanges)(n,l,p,i);for(s=0;s<r.length;++s){var g;(g=r[s]).getParent().removeChild(g),i.appendChild(g)}}finally{(0,a.releaseChanges)(n,l,p,i)}}}return i},l.prototype._convertToImage=function(e){var t,n;e instanceof o.GImage||(t=o.GPaintCanvas.getScreenDPI()*o.GLength.DPI),e instanceof o.GElement&&(n=e.getScene()),e instanceof o.GImage||(t=Math.max(t||o.GLength.DPI,n&&n.getProperty("dpi")||o.GLength.DPI));var i=e.toBitmap(null,null,null,null,null,t),a=new o.GImage,r=1;e instanceof o.GImage||(r/=t/o.GLength.DPI);var s=e.getPaintBBox().getSide(o.GRect.Side.TOP_LEFT),l=(new o.GTransform).scaled(r,r).translated(s.getX(),s.getY());return a.setProperties(["iw","ih","url","trf","itrf"],[i.getWidth(),i.getHeight(),i.toImageDataUrl(o.GBitmap.ImageType.PNG),l,l]),a},l.prototype.toString=function(){return"[Object GConvertToImageAction]"},e.exports=l},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(16),r=n(97);function s(){}o.GObject.inherit(s,r),s.ID="edit.duplicate",s.TITLE=new o.GLocaleKey("GDuplicateAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return a.CATEGORY_EDIT},s.prototype.getGroup=function(){return"ccp"},s.prototype.getShortcut=function(){return[i.GKey.Constant.META,"D"]},s.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-duplicate":null},s.prototype.getAdditionalShortcuts=function(){return[[i.GKey.Constant.SHIFT,i.GKey.Constant.META,"D"]]},s.prototype.isEnabled=function(){if(!r.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument();return e&&null!=e.getEditor().getSelection()},s.prototype.execute=function(){var e=gDesigner.getActiveDocument().getEditor();e.beginTransaction();try{e.cloneSelection(!1,!0)}finally{e.commitTransaction(o.GLocale.get(this.getTitle()))}},s.prototype.toString=function(){return"[Object GDuplicateAction]"},e.exports=s},function(e,t,n){"use strict";n(17),n(3),n(22);var o=n(1),i=n(13),a=n(34),r=n(16),s=n(97);function l(){}o.GObject.inherit(l,s),l.ID="modify.createnestedcompound",l.TITLE=new o.GLocaleKey("GCreateNestedCompoundAction","title"),l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){return l.TITLE},l.prototype.getCategory=function(){return r.CATEGORY_MODIFY},l.prototype.getGroup=function(){return"structure-boolean"},l.prototype.getShortcut=function(){return[i.GKey.Constant.META,i.GKey.Constant.ALT_LEFT,"M"]},l.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-nested-compound":""},l.prototype.isEnabled=function(){if(!s.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument();if(e){var t=e.getEditor().getSelection(),n=0;if(t&&t.length)for(var i=0;i<t.length;++i){if(t[i]instanceof o.GCompoundShape&&n++,n>=2)return!0}}return!1},l.prototype.execute=function(){var e=gDesigner.getActiveDocument().getEditor(),t=o.GNode.order(e.getIndividualSelection().slice());e.beginTransaction();try{for(var n,i=[],r=new Set,s=0;s<t.length;++s){(l=t[s])instanceof o.GCompoundShape&&(n?(i.push(l),r.add(l.getParent())):n=l)}if(i.length>0){try{(0,a.blockChanges)(e,r,null,n);for(s=0;s<i.length;++s){var l;(l=i[s]).getParent().removeChild(l),n.appendChild(l)}}finally{(0,a.releaseChanges)(e,r,null,n)}e.updateSelection(!1,[n])}}finally{e.commitTransaction("Create nested compound")}},l.prototype.toString=function(){return"[Object GCreateNestedCompoundAction]"},e.exports=l},function(e,t,n){"use strict";n(3);var o=n(1),i=n(1161);function a(){}o.GObject.inherit(a,i),a.ID="modify.offset",a.TITLE=new o.GLocaleKey("GOffsetAction","title"),a.prototype.getId=function(){return a.ID},a.prototype.getTitle=function(){return a.TITLE},a.prototype.getGroup=function(){return"structure/modify"},a.prototype.getShortcut=function(){return null},a.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-expand-shrink":null},a.prototype._dialogPromptMessage=function(){return o.GLocale.get(new o.GLocaleKey("GOffsetAction","text.dialog-prompt-message"))},a.prototype._makeOffsetter=function(e,t){var n;if(t.hasMixin(o.GStylable)){var i=t.getPaintLayers();if(i){var a=i.getBorderLayers(!0).pop();a&&(n=a.$_blc)}}return t=o.GPathUtil.makeClockWise(t),e>0?new o.GVertexOffsetter(t,e,!1,!0,0,n):new o.GVertexOffsetter(t,-e,!0,!1,0,n)},a.prototype._dialogAlertMessage=function(){return o.GLocale.get(new o.GLocaleKey("GOffsetAction","text.invalid-value"))},a.prototype.toString=function(){return"[Object GOffsetAction]"},e.exports=a},function(e,t,n){"use strict";n(17),n(844),n(181),n(3),n(22);var o=n(1),i=n(13),a=n(34),r=n(16),s=n(97),l=n(37);function c(){}o.GObject.inherit(c,s),c.ID="modify.simplify",c.TITLE=new o.GLocaleKey("GSimplifyAction","title"),c.prototype.getId=function(){return c.ID},c.prototype.getTitle=function(){return c.TITLE},c.prototype.getCategory=function(){return r.CATEGORY_MODIFY_PATH},c.prototype.getGroup=function(){return"structure/modify"},c.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-simplity":null},c.prototype.getShortcut=function(){return[i.GKey.Constant.META,i.GKey.Constant.OPTION,"S"]},c.prototype.isEnabled=function(){if(!s.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument()?gDesigner.getActiveDocument().getEditor().getIndividualSelection():null,t=!1;if(e)for(var n=0;!t&&n<e.length;++n)e[n]instanceof o.GImage||!e[n].hasMixin(o.GVertexSource)||(t=!0);return t},c.prototype.execute=function(){var e=gDesigner.getActiveDocument(),t=e?e.getEditor():null,n=t?t.getIndividualSelection():null,i=e?e.getScene():null,r=[];if(n)for(var s=0;s<n.length;++s){var c=n[s];c.hasMixin(o.GVertexSource)&&r.push(c)}if(r.length){var d=$("<div></div>").append($("<div>").gInputSlider({min:0,max:100,step:1}).attr("name","tolerance").css("width","50%").gInputSlider("value",10).on("change",(function(e){if(i){var t=Number(i.stringToPoint($(this).gInputSlider("value")).toFixed(0));$(this).parent().find("input").val(t)}}))).append($("<span>").css("width","50%").append($("<input>").attr("type","text").css("width","3em").val(10).on("change",(function(e){var t=Number(i.stringToPoint($(this).val()).toFixed(0));$(this).parent().find(".g-input-slider").gInputSlider("value",t)}))).append($("<label>").html(o.GLocale.get(new o.GLocaleKey("GSimplifyAction","text.tolerance")))));l.prompt(o.GLocale.get(new o.GLocaleKey("GSimplifyAction","text.simplification")),e=>{if(e){var n=parseFloat(d.find(".g-input-slider").gInputSlider("value"));if(isNaN(n)||!isFinite(n)||o.GMath.isEqualEps(n,0))l.alert(o.GLocale.get(new o.GLocaleKey("GSimplifyAction","text.invalid-value")));else{t.beginTransaction();try{for(var i=[],s=new Set,c=0;c<r.length;++c){var u=r[c].getParent();u&&s.add(u)}try{(0,a.blockChanges)(t,s);for(c=0;c<r.length;++c){var p=r[c],g=p.getParent(),h=p.getNext(),f=this._makeSimplified(n,p),m=o.GPathUtil.createPathFromVertexSource(f);m&&(o.GElement.prototype.assignFrom.call(m,p),g.insertChild(m,h),i.push(m)),g.removeChild(p)}}finally{(0,a.releaseChanges)(t,s),i.length&&t.updateSelection(!1,i)}}finally{t.commitTransaction(o.GLocale.get(this.getTitle()))}}}},d)}},c.prototype._makeSimplified=function(e,t){var n=e>0?e:-e;return new o.GVertexSimplifier(t).simplify(n/2,!1,!0)},c.prototype.toString=function(){return"[Object GSimplifyAction]"},e.exports=c},function(e,t,n){"use strict";n(17),n(3),n(22);var o=n(45),i=n(1),a=n(34),r=n(16),s=n(97);function l(){}i.GObject.inherit(l,s),l.ID="modify.split-line",l.TITLE=new i.GLocaleKey("GSplitLineAction","title"),l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){return l.TITLE},l.prototype.getCategory=function(){return r.CATEGORY_MODIFY_PATH},l.prototype.getGroup=function(){return"structure/path"},l.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-break-curve":null},l.prototype.isEnabled=function(){if(!s.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument()?gDesigner.getActiveDocument().getEditor().getSelection():null,t=!1;if(e)for(var n=0;!t&&n<e.length;++n)e[n]instanceof i.GPath&&(t=this._isPathSplittable(e[n]));return t},l.prototype.execute=function(){var e=gDesigner.getActiveDocument(),t=e?e.getEditor():null,n=t?t.getSelection():null,o=[];if(n)for(var r=0;r<n.length;++r){var s=n[r];s instanceof i.GPath&&this._isPathSplittable(s)&&o.push(s)}if(o.length){t.beginTransaction();try{var l,c=[];l=new Set;for(r=0;r<o.length;++r)l.add(o[r].getParent());try{(0,a.blockChanges)(t,l);for(r=0;r<o.length;++r){var d,u=o[r],p=u.getParent(),g=u.getNext(),h=u.getAnchorPoints(),f=!1;if(u.getProperty("closed"))for(d=h.getFirstChild();null!==d&&!d.hasFlag(i.GNode.Flag.Selected);d=d.getNext());else(d=h.getFirstChild()).hasFlag(i.GNode.Flag.Selected)||(f=!0);var m=d,y=m,v=m?m.getNext()||m.getPrevious():null,_=!1;for(u.getProperty("closed")&&(_=!0);null!==m&&(m.hasFlag(i.GNode.Flag.Selected)||f)&&null!==v;){var b,w=new i.GPath,C=w.getAnchorPoints();if(f=!1,w.assignFrom(u),p.insertChild(w,g),c.push(w),d=h.getNextPoint(m),_)(b=new i.GPathBase.AnchorPoint).deserialize(m.serialize()),m=b,_=!1;else h.removeChild(m);for(C.appendChild(m);null!==d&&!d.hasFlag(i.GNode.Flag.Selected)&&h.getFirstChild();)v=h.getNextPoint(d),h.removeChild(d),C.appendChild(d),d=v;if(null!==d&&d.hasFlag(i.GNode.Flag.Selected)&&h.getFirstChild())(b=new i.GPathBase.AnchorPoint).deserialize(d.serialize()),C.appendChild(b),v=(m=d)===y?null:h.getNextPoint(d);else v=null;w.isLine()&&(w.getPaintLayers().getBorderLayers(!0).length||(u.getPaintLayers().getFillLayers(!0).length?w.getPaintLayers().appendChild(new i.GStylable.BorderPaintLayer(i.GRGBColor.BLACK)):w.getPaintLayers().appendChild(u.getPaintLayers().getFillLayers(!0)[0])))}p.removeChild(u)}}finally{(0,a.releaseChanges)(t,l),c.length&&t.updateSelection(!1,c.slice(-1))}}finally{t.commitTransaction(i.GLocale.get(this.getTitle()))}}},l.prototype._isPathSplittable=function(e){var t=!1,n=o.GElementEditor.getEditor(e),i=n?n.getPartSelection():null;if(i&&i.length)for(var a=0;!t&&a<i.length;++a)i[a].type==o.GPathEditor.PartType.Point&&(e.getProperty("closed")||i[a].point!=e.getAnchorPoints().getFirstChild()&&i[a].point!=e.getAnchorPoints().getLastChild())&&(t=!0);return t},l.prototype.toString=function(){return"[Object GSplitLineAction]"},e.exports=l},function(e,t,n){"use strict";n(17),n(3),n(22);var o=n(1),i=n(13),a=n(34),r=n(16),s=n(97);function l(){}o.GObject.inherit(l,s),l.ID="modify.converttorawpath",l.TITLE=new o.GLocaleKey("GConvertToRawPathAction","title"),l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){return l.TITLE},l.prototype.getCategory=function(){return r.CATEGORY_MODIFY_PATH},l.prototype.getGroup=function(){return"structure/modify"},l.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-convert-to-raw-path":null},l.prototype.getShortcut=function(){return[i.GKey.Constant.META,i.GKey.Constant.SHIFT,"R"]},l.prototype._isValidElement=function(e){if(e instanceof o.GPath||e instanceof o.GCompoundPath){var t=[];if(e instanceof o.GCompoundPath)for(var n=e.getPaths().getFirstChild();null!==n;n=n.getNext())t.push(n);else t=[e];for(var i=0;i<t.length;i++)for(var a=t[i].getAnchorPoints().getFirstChild();a;){if(o.GPathBase.isCornerType(a.getProperty("tp")))return!0;a=a.getNext()}return!1}return!(!e.hasMixin(o.GVertexSource)||e instanceof o.GImage||e instanceof o.GPathsGraph)},l.prototype.isEnabled=function(){if(!s.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument();if(e){var t=e.getEditor().getSelection();if(t)for(var n=0;n<t.length;++n)if(this._isValidElement(t[n]))return!0}return!1},l.prototype.execute=function(){var e,t=gDesigner.getActiveDocument(),n=t?t.getEditor():null,i=n?n.getIndividualSelection():null,r=[],s=new Set;if(i)for(var l=0;l<i.length;++l){var c=i[l];this._isValidElement(c)&&(r.push(c),s.add(c.getParent()))}n.beginTransaction();try{try{(0,a.blockChanges)(n,s),e=[];for(l=0;l<r.length;++l){var d=r[l],u=d.getParent(),p=d.getNext(),g=o.GPathUtil.createPathFromVertexSource(d);g&&(o.GElement.prototype.assignFrom.call(g,d),u.insertChild(g,p),e.push(g)),u.removeChild(d)}}finally{(0,a.releaseChanges)(n,s),e.length&&n.updateSelection(!1,e)}}finally{n.commitTransaction(o.GLocale.get(this.getTitle()))}},l.prototype.toString=function(){return"[Object GConvertToRawPathAction]"},e.exports=l},function(e,t,n){"use strict";n(26),n(3);var o=n(1);function i(e,t){this.notification=Object.assign({popup:!1,annonymous:!1},e||{}),this.builder=t}o.GObject.inherit(i,o.GEvent),i.prototype.notification=null,i.prototype.toString=function(){return"GEvent [GNotificationEvent]"},e.exports=i},function(e,t,n){"use strict";var o=n(14);n(17),n(26),n(7),n(18),n(3),n(29),n(28),n(22),n(117),n(106);var i=n(1),a=o(n(239)),r=o(n(340)),s=n(34);const l=n(37),c=n(278),d=n(71),u=n(203),p=n(206),g=n(377),h=n(1299),f=n(78),{DESIGNER:m,SHARE_ENGINE:y,HAS_ANNOTATIONS:v,gApi:_,ShareRoles:b,SharePermissions:w,Share:C,LEGACY_SHARE_DIALOG:x,ENABLE_REQUEST_ACCESS:S}=n(9),E=n(418),A=n(1300),T=n(166),G=n(1539),P=n(847),D=n(519),L=n(222),I=n(x?1540:1541);function k(){y&&(gDesigner.addEventListener(c,this._userEvent,this),gDesigner.addEventListener(d,this._documentEvent,this)),this._states=new Map,this._isDefaulNotificationAlreadyShown=new Map}k.prototype._states=null,k.prototype._requestAccessDialog=null,k.prototype._requestPermissionDialog=null,k.prototype._requestEmailHasBeenSent=!1,k.prototype._collaboratorsCached={},k.prototype.share=function(e,t){const n=this,o=e instanceof L.Item,i=async function(){let i=null;if(o)i=e;else{const t=e||gDesigner.getActiveDocument();i=t&&t.getStorageItem()}i.supportsExternalSharing()&&await n._syncExternalPermissions(i),n._openShareDialog(await gDesigner.getUser(),i,t)};gDesigner.isOffline()?a.default.openUnavailableFeature(i):this.isShareProRestricted()?gDesigner.handlePROFeatureInterruption():i()},k.prototype._openShareDialog=async function(e,t,n){const o=new I(e,t,n);await o.open()},k.prototype._documentEvent=async function(e){const t=e.document;if(!t||!t.isLockedByVersionHistory())switch(e.type){case d.Type.Activated:await this._checkAccessAndUpdateState(t)&&(this._showDefaultNotification(t),t.removeEventListener(g,this._collaborationEvent,this),t.addEventListener(g,this._collaborationEvent,this));break;case d.Type.Deactivated:t.removeEventListener(g,this._collaborationEvent,this);break;case d.Type.Removed:t.getId()&&delete this._collaboratorsCached[t.getId()],this._states.delete(t);break;case d.Type.StorageItemUpdated:{t.isShareable()&&t.lock();const e=async n=>{if(n.status!==f.Loading)try{t.removeEventListener(u,e),await this._checkAccessAndUpdateState(t)&&this._showDefaultNotification(t)}finally{t.unlock()}};t.addEventListener(u,e);break}}},k.prototype.isPermissionRequestEnabled=function(){return S&&!gDesigner.getLicense().isGuest()},k.prototype.getRole=function(e){e=e||gDesigner.getActiveDocument();const{role:t}=this._getState(e);return t||E.ROLES.NO_ACCESS_ROLE},k.prototype._collaborationEvent=async function(e){const{sender:t,type:n}=e;if(t===gDesigner.getActiveDocument())switch(n){case g.Type.ShareUpdate:this.resetCollaboratorsCached(t),this._getState(t).sharing||await this._updateState(t);const e=this.getRole(t);if(await this._checkAccessAndUpdateState(t)){const n=this.getRole(t);e.equals(n)||t.getStatus()!==f.Loading&&this._showRoleNotification(t)}break;case g.Type.UserUpdate:this._updateRealtimeCollaborators(t)}},k.prototype._userEvent=async function(){const e=gDesigner.getActiveDocument();e&&(await this._updateState(e),this._showDefaultNotification(e))},k.prototype._showRoleNotification=function(e){if(!e)return;const t=this.getRole(e);if(!t)return;const n=i.GLocale.get(new i.GLocaleKey("GShareManager","text.new-role-is-".concat(t.getId())));n&&gDesigner.addNotification({document:e,message:n,anonymous:gDesigner.isAnonymous(),popup:!0})},k.prototype._showDefaultNotification=async function(e){if(!e)return;if(void 0===this._isDefaulNotificationAlreadyShown.get(e.sessionId)&&this._isDefaulNotificationAlreadyShown.set(e.sessionId,!1),this._isDefaulNotificationAlreadyShown.get(e.sessionId))return;const t=e.isDocumentFromTemplate()&&e.isShared();let n;if(t)n={name:m.TITLE};else{const t=await gDesigner.getUser(),o=await this._getFileExtended(e);if(t&&o){o.getPrivateShareList().some(e=>{if(e.owner&&e.id!==t.getUID())return n={name:e.name||e.email,id:e.id},!0});const e=new URL(location.href).searchParams.get("token");if(e){const i=o.getPublicShare();if(i&&i.token===e){const e=i.shared_by;e&&e.id&&e.id!==t.getUID()&&(n=e)}}}}if(n){e.setOwner(n);const o=[];if(t)o.push(i.GLocale.get(new i.GLocaleKey("GShareManager","text.template-shared-by")).replace("%name",n.name));else if(o.push(i.GLocale.get(new i.GLocaleKey("GShareManager","text.shared-by")).replace("%name",n.name)),!x){const t=this.getRole(e);t&&t.getStatus()&&o.push(t.getStatus())}if(x){const t=this._getState(e);t.copy||t.inspect?(t.copy||o.push(i.GLocale.get(new i.GLocaleKey("GShareManager","text.save-warning"))),t.inspect||o.push(i.GLocale.get(new i.GLocaleKey("GShareManager","text.inspect-warning")))):o.push(i.GLocale.get(new i.GLocaleKey("GShareManager","text.combined-warnings")))}o.length&&gDesigner.addNotification({document:e,message:o.join(" "),anonymous:gDesigner.isAnonymous(),popup:!0,closeCallback:()=>{this._isDefaulNotificationAlreadyShown.set(e.sessionId,!0)}})}},k.prototype._canAccess=async function(e){return!!await this._getFileExtended(e).catch(()=>!1)},k.prototype.getRealtimeCollaborators=async function(e){return _.realtime.getCollaborators(e.id,{anonymous:!1}).then(t=>t.map(t=>{const n=(t=>{const n=e.getPrivateShare(t.access_id);if(n)return E.makeFromShare(n);const o=e.getPublicShare();return o?E.makeFromShare(o):E.makeFromShareRole(b.NoAccess)})(t);return new A(Object.assign(t,{role:n}))})).catch(()=>[])},k.prototype._getFileExtended=function(e){return gDesigner.getCloudCommunicationManager().getFileExtendedCached(e)},k.prototype._getCollaborators=async function(e){const t=await this._getFileExtended(e);if(!t)return null;let n=[];return n=n.concat(await this._getFileCollaboratorsAsUsers(t)),n=n.concat(this._getInvitedCollaboratorsAsUsers(t)),n},k.prototype._getInvitedCollaboratorsAsUsers=function(e){return e.getInvitedShareList().map(e=>{const t=E.makeFromShare(e),n=new T({id:e.email});return n.setRole(t),n})},k.prototype._getFileCollaboratorsAsUsers=function(e){return gDesigner.getCloudCommunicationManager().getCollaborators(e.id).then(t=>t.map(t=>{const n=new T(t),o=(t=>{const n=e.getPrivateShare(t.getUID());if(n)return E.makeFromShare(n);const o=e.getPublicShare();return o?E.makeFromShare(o):E.makeFromShareRole(b.NoAccess)})(n);return n.setRole(o),n})).catch(()=>[])},k.prototype.resetCollaboratorsCached=function(e){if((e=e||gDesigner.getActiveDocument())&&e.getId()){const t=this._collaboratorsCached[e.getId()];t&&t.reset()}},k.prototype.getCollaboratorsCached=async function(e){return(e=e||gDesigner.getActiveDocument())&&e.getId()?(this._collaboratorsCached[e.getId()]||(this._collaboratorsCached[e.getId()]=new D(()=>this._getCollaborators(e))),this._collaboratorsCached[e.getId()].get()):[]},k.prototype.getPrivateInvitedShareList=async function(e){const t=await this._getFileExtended(e);return this._getPrivateInvitedShareListForFile(t)},k.prototype.getRoleNameByUserId=async function(e){const t=gDesigner.getActiveDocument();if(!t.isCloudFile()&&!t.isExternalFile())return E.ROLES.OWNER_ROLE.getName();const n=await this.getCollaboratorById(e);return(n&&n.getRole()||E.ROLES.NO_ACCESS_ROLE).getName()},k.prototype.getCollaboratorById=async function(e){let t=null;const n=await this.getCollaboratorsCached();return n&&(t=n.find(t=>t.getUID()===e)),t},k.prototype._getPrivateInvitedShareListForFile=function(e){if(!e)return null;const t=e.getPrivateShareList(),n=e.getInvitedShareList&&e.getInvitedShareList()||[];return t.concat(n)},k.prototype.updateStateForDocument=function(e){this._updateState(e)},k.prototype._updateState=async function(e){const t=this._createDefaultShareStateForDoc(e),n=e&&e.getStorageItem(),o=await gDesigner.getUser();if(!o)return this._setState(e,t);if(e&&e.isDocumentFromTemplate()&&e.isShared())this._applyStateFromTemplate(t);else if(n instanceof p.Item){const n=await this._getFileExtended(e);n&&await this._applyStateFromFile(o,n,t)}else if(n&&n.getId()&&n.supportsSharing()&&n.supportsShadowFile()){const n=await this._getFileExtended(e);n&&(t.share=!0,await this._applyStateFromFile(o,n,t))}else await this._getFileExtended(e);this._setState(e,t),gDesigner.hasEventListeners(P)&&gDesigner.trigger(new P(P.Type.Updated))},k.prototype._createDefaultShareStateForDoc=function(e){return new G(Object.assign({},this._getState(e),{owner:!0,share:!1,sharing:!1,role:E.ROLES.OWNER_ROLE,isPrivate:!0}))},k.prototype._applyStateFromTemplate=function(e){return Object.assign(e,{edit:!0,inspect:!0,copy:!0,comment:!1,share:!1,owner:!1,sharing:!1,realtimeCollaborators:[]})},k.prototype._applyStateFromFile=async function(e,t,n){if(!t)throw new r.default("File object is required");const o=(0,s.getFileStateAndRole)(e,t,n);let i=o.role;const{state:a}=o;if(!i){const e=t.getPublicShare();if(e){const{copy:t,inspect:n,comment:o,edit:r}=e;i=E.makeFromShare(e),Object.assign(a,{owner:!1,edit:r,copy:t,inspect:n,comment:!!v&&o})}}a.role=i||E.ROLES.NO_ACCESS_ROLE;const l=await this.getRealtimeCollaborators(t);Object.assign(a,{realtimeCollaborators:l})},k.prototype._updateRealtimeCollaborators=async function(e){const t=await this._getFileExtended(e);if(t){const n=await this.getRealtimeCollaborators(t);this._setState(e,new G(Object.assign({},this._getState(e),{realtimeCollaborators:n})))}},k.prototype._setState=function(e,t){this._states.set(e,t),gDesigner.hasEventListeners(h)&&gDesigner.trigger(new h(e,t))},k.prototype._getState=function(e){return this._states.get(e)||new G},k.prototype._checkAccessAndUpdateState=async function(e){if(!await this._requestAccessIfAbsent(e))return!1;this._closeRequestAccessDialog();const t=this.getRole(e);await this._updateState(e);const n=this.getRole(e);return t&&t.equals(n)||this._requestPermissionToCommentIfAbsent(e),await this._isUserUnableToOperateSystem(e)&&this._openRequestAccessDialog(e),!0},k.prototype._isUserUnableToOperateSystem=async function(e){if(!e.getId())return!1;var t=await this._getShareLevelForCurrentUser(e);return!!(gDesigner.getLicense().isGuest()&&t<1)},k.prototype._getShareLevelForCurrentUser=async function(e){const t=await gDesigner.getUser(),n=await this._getFileExtended(e);if(t&&n){var o=n.getPrivateShareList().find(e=>{if(e.id===t.getUID())return!0});if(o)return o.getRole().level;const e=n.getPublicShare();return e?e.getRole().level:new E.makeFromShareRole(b.NoAccess)}return new E.makeFromShareRole(b.NoAccess).level},k.prototype._requestAccessIfAbsent=async function(e){return!e.isShareable()||(!!await this._canAccess(e)||(this._openRequestAccessDialog(e),!1))},k.prototype._requestPermissionToCommentIfAbsent=function(e){if(!e.isShareable())return;if(!e.getFocusAnnotationId())return;const t=this.getRole(e);t&&t.is(b.Owner)||t.hasPermission(w.COMMENT)||this._requestPermissionToComment(e)},k.prototype._requestPermissionToComment=function(e){if(this._requestPermissionDialog)return;const t=this.getRole(e);t&&!t.is(b.NoAccess)&&(this._requestPermissionDialog=this._createRequestDialog(e,{className:"g-request-permission-dialog",openCallback:()=>{gDesigner.stats("permission-dialog_comment-access_open")},closeCallback:()=>{this._requestPermissionDialog=null},title:i.GLocale.get(new i.GLocaleKey("GShareManager","text.file-can-not-be-commented-title")).replace("%role",t.getName()),subtitle:i.GLocale.get(new i.GLocaleKey("GShareManager","text.file-can-not-be-commented-info")),requestButton:{label:i.GLocale.get(new i.GLocaleKey("GShareManager","text.file-request-permission-to-comment")),permissions:{comment:!0}},statType:"comment-access"}))},k.prototype._openRequestAccessDialog=function(e){this._requestAccessDialog||(this._requestAccessDialog=this._createRequestDialog(e,{className:"g-request-access-dialog",openCallback:()=>{gDesigner.stats("permission-dialog_no-access_open")},closeCallback:async()=>{this._requestAccessDialog=null,await this._canAccess(e)||(gDesigner.removeDocument(e,null,!0),this._requestEmailHasBeenSent&&(l.alert(i.GLocale.get(new i.GLocaleKey("GShareManager","text.sent-request-email"))),this._requestEmailHasBeenSent=!1))},title:i.GLocale.get(new i.GLocaleKey("GShareManager","text.file-can-not-be-accessed-title")),subtitle:i.GLocale.get(new i.GLocaleKey("GShareManager","text.file-can-not-be-accessed-info")),requestButton:{label:i.GLocale.get(new i.GLocaleKey("GShareManager","text.file-request-access")),permissions:{access:!0}},statType:"no-access"}))},k.prototype._closeRequestAccessDialog=function(){this._requestAccessDialog&&(this._requestAccessDialog.gDialog("close"),this._requestAccessDialog=null)},k.prototype._createRequestDialog=function(e){let{className:t="",title:n,subtitle:o,closeCallback:a,requestButton:{label:r,permissions:s={}}={},statType:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var d=[];return this.isPermissionRequestEnabled()&&d.push({label:r,onclick:t=>{gDesigner.stats("permission-dialog_".concat(c,"_request-access"));const n=Object.assign(s,{isToken:!e.getId()});_.requestPermission(e.getId()||e.getFailedDocumentIdOrToken(),n).then(()=>{t.gDialog("close"),this._requestEmailHasBeenSent=!0}).catch(()=>{l.error(i.GLocale.get(new i.GLocaleKey("GShareManager","text.cannot-request-access")))})}}),d.push({label:i.GLocale.get(new i.GLocaleKey("GLocale","ok")),onclick:async t=>{gDesigner.stats("permission-dialog_".concat(c,"_click-ok")),t.gDialog("close"),await this._isUserUnableToOperateSystem(e)&&gDesigner.signout(!0)},highlighted:!0}),l.custom({icon:"error",closeable:!1,className:t,closeCallback:a,title:n,subtitle:o,buttons:d})},k.prototype._syncExternalPermissions=async function(e){const t=await e.getPermissionsList(),n=await async function t(){return gDesigner.getCloudCommunicationManager().getExternalFile(e.getId()).catch(n=>{if(n&&404===n.status&&e.supportsShadowFile())return e.createShadowFile().then(()=>t.call(this));throw n})}.call(this),o=this._getPrivateInvitedShareListForFile(n),i=await gDesigner.getUser();return function(){const n=[],a=[],r=[];t.forEach(t=>{let{email:i,role:a,externalRole:r}=t;if(i){let t=!1;o.some(n=>{let{email:o,role:a}=n;if(i&&i===o&&e.rolesMatch(r,a))return t=!0,t}),t||n.push({email:i,role:a})}}),o.forEach(e=>{let n=!1;t.some(t=>{let{email:o}=t;if(e.email===o)return n=!0,n}),n||E.makeFromShare(e).is(b.NoAccess)||a.push({email:e.email})}),n.length&&r.concat(n.map(async t=>{let{email:n,role:o}=t;if(i.getEmail()===n)return null;const a=Object.values(b).find(e=>{let{id:t}=e;return t===o}),r=o&&a?a:b.NoAccess,s=(new C).assignRole(r);try{return await _.shareWithUser(e.getId(),n,s)}catch(e){return null}}));a.length&&r.concat(a.map(async t=>{let{email:n}=t;return _.shareWithUser(e.getId(),n,(new C).assignRole(b.NoAccess))}));return Promise.all(r)}.call(this)},k.prototype.getPermalink=async function(e,t){const n=await this._getFileExtended(e);if(n){const e=gDesigner.getAppBaseUrl(!0),o=new URL(n.getShareLink(e));return o.searchParams.set("annot",t.getId()),o.toString()}return null},k.prototype.isShareProRestricted=function(){return C.isPro()&&!gDesigner.isEnabledProFeatures()},e.exports=k},function(e,t,n){"use strict";n(3);var o=n(1);function i(e,t){this.document=e,this.state=t}o.GObject.inherit(i,o.GEvent),i.prototype.document=null,i.prototype.state=null,i.prototype.toString=function(){return"Object [GShareStateChangedEvent]"},e.exports=i},function(e,t,n){"use strict";n(18),n(29);const o=n(166),{SharePermissions:{COMMENT:i,EDIT:a},ShareRoles:r}=n(9),{GLocale:s,GLocaleKey:l}=n(1);e.exports=class extends o{constructor(){let{access_id:e,file_id:t,accessed:n,name:o,last_name:i,avatar:a,anonymous:r=!1,role:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({file_id:t,accessed:n,name:o,last_name:i,avatar:a,anonymous:r}),this.id=e,this._role=s}getTooltip(){const e=this.getRole();return e.is(r.Owner)?s.get(new l("GCollaborators","text.owner-tooltip")).replace("%username",this.getFullUserName()):s.get(new l("GCollaborators",e.hasPermission(a)?"text.can-edit-tooltip":"text.can-comment-tooltip")).replace("%username",this.getFullUserName())}getIcon(){const e=this.getRole();return e.hasPermission(i)&&!e.hasPermission(a)?"gravit-icon-avatar-comment":null}}},function(e,t,n){"use strict";n(26),n(7),n(18),n(510),n(99),n(28);var o=n(9);const i=n(1302),a=n(1552),r=n(239),s=n(426),l={offlineWarning:()=>r.openOfflineWarning(),trialExpired:()=>a.openTrialExpired(),proExpireSoon:()=>a.openProExpireSoon(),proExpireToday:()=>a.openProExpireSoon(),proExpired:()=>a.openProExpired(),upgradeScreen:()=>a.openUpgradeScreen(),proOfferInTrial:()=>a.openTrialMessage(),proOfferInTrialExpired:()=>i.openOfferReminder(),proOfferInTrialExpireSoon:()=>a.openTrialMessage(),proOfferInTrialLastWarning:()=>a.openTrialMessage(),proOfferSpecialPrice:()=>i.openOfferReminder(),proOfferInFree:()=>i.openOfferReminder()};e.exports=new class{constructor(){this._settings=Object.assign({},o.defaultUserSettings.defaultUserSettings),this._intervalId=null,this._flags={proOfferInTrialLastWarning:!0,proOfferInTrialExpireSoon:!0}}async start(){try{let e=await o.gApi.getUserSettings().catch(()=>null);e&&(this._settings=Object.assign(this._settings,e))}catch(e){console.info("GReminderManager","exception",e)}this._settings&&this._settings.reminders&&(this._settings.reminders.proOfferInTrialExpireSoon=o.DateAPI.daysToMilliseconds(1)),setInterval(this.checkReminders.bind(this),o.DateAPI.daysToMilliseconds(1)),await this.checkReminders(),gDesigner.addEventListener(s,this.checkReminders,this)}async checkReminders(){if(!gDesigner.isEnabledSubscriptions())return;let e=gDesigner.getSyncUser();if(!e||e.deactivated)return;if(!this._isAllowedToShowReminders())return;const t=gDesigner.getLicense(),n=gDesigner.now();if(t.canAccessFreemium(n)){if(t.isExpired(n)){if(t.isTrial()&&this.once("trialExpired"))return void this._checkPoint("proOfferInTrialExpired",n);if(t.isPro())return void this.once("proExpired");this.execute("proOfferInTrialExpired")}else if(t.isPro())t.getExpirationDate()&&(this.once("proExpireSoon",t.getExpirationDate())||this.once("proExpireToday",t.getExpirationDate()));else if(t.isTrial())await this._getShowTrialMessage()&&this._waitUntilUserIsInactive()&&(this.execute("proOfferInTrial")||this.once("proOfferInTrialExpireSoon",t.getExpirationDate())||this.once("proOfferInTrialLastWarning",t.getExpirationDate()));else if(t.isFree()){const{reminders:{proOfferInFree:e=15}={}}=this._settings;if(t.getCreationDate()){const i=o.DateAPI.addTime(t.getCreationDate(),e);o.DateAPI.gte(n,i)&&this.execute("proOfferInFree")&&this.reset("proOfferInTrial",n)}}t.isPro()||t.isLegacy()&&t.getSpecialPriceDate()&&this.once("proOfferSpecialPrice",t.getSpecialPriceDate(),!0),t.isOffline()&&!t.isOfflinePeriodExpired()&&(t.isPro()||t.isTrial())&&this.execute("offlineWarning",t.getOfflineWarningDate()),t.isPro()&&!t.isExpired(n)&&(this.reset("proExpired"),this.reset("proExpireToday"))}else await this._getShowTrialMessage()&&this._executeReminder("upgradeScreen")}_isAllowedToShowReminders(){const e=new Date(gDesigner.now()).getTime(),t=gDesigner.getLicense();return!t.isTrial()||!o.DateAPI.lte(e,t.getCreationDate())}execute(e,t){const n=gDesigner.now();t&&(t=o.DateAPI.addTime(t,-this._settings.reminders[e]||0));const i=gDesigner.getSetting(e);return!(i&&!o.DateAPI.isExpired(n,new Date(i),this._settings.reminders[e]))&&(!(t&&!o.DateAPI.isExpired(n,t))&&this._executeReminder(e))}once(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(gDesigner.getSetting(e))return!1;const i=gDesigner.now();return t&&(t=o.DateAPI.addTime(t,-this._settings.reminders[e]||0)),!t||!n&&o.DateAPI.isExpired(i,t)||n&&o.DateAPI.eq(i,t)?this._executeReminder(e):void 0}_checkPoint(e,t){gDesigner.setSetting(e,t)}_executeReminder(e){return!!this._checkFlag(e)&&(/^prod/.test("production")||console.info("ReminderManager",e),this._checkPoint(e,gDesigner.now()),this._handleStats(e),l[e].call(null),!0)}_checkFlag(e){return this._flags.hasOwnProperty(e)?this._flags[e]:!1!==this._settings.flags[e]}_handleStats(e){let t,n;switch(e){case"offlineWarning":gDesigner.pageTracking("/ProOfflineWarning");break;case"trialExpired":gDesigner.pageTracking("/ProTrialExpired");break;case"upgradeScreen":gDesigner.pageTracking("/Upgrade"),gDesigner.getUser().then(async e=>{gDesigner.getAmplitudeHelper().logEvent(o.AmplitudeData.Events.ACCOUNT_TRIAL_EXPIRED_SCREEN,{ACCOUNT_TOTAL_TRIAL_DAYS_GIVEN:e.trial_created?o.DateAPI.millisecondsToDays(o.DateAPI.diff(new Date(e.trial_created),new Date(e.trial_expire))):null,ACCOUNT_TOTAL_SUBSCRIPTION_DAYS_GIVEN:await o.gApi.license.totalSubscriptionDays(e),ACCOUNT_EVER_SUBSCRIBED:await o.gApi.license.everSubscribed()})}).catch(()=>null);break;case"proExpireSoon":t=gDesigner.getLicense(),n=o.DateAPI.millisecondsToDays(o.DateAPI.diff(o.DateAPI.toUTCZone(gDesigner.now()),t.getExpirationDate())),gDesigner.pageTracking("/ProReminders"+n);break;case"proExpireToday":gDesigner.pageTracking("/ProReminders1");break;case"proExpired":gDesigner.pageTracking("/ProSubExpired");break;case"proOfferInTrial":gDesigner.pageTracking("/ProTrial");break;case"proOfferInTrialExpired":gDesigner.pageTracking("/ProTrialExpired");break;case"proOfferInTrialExpireSoon":t=gDesigner.getLicense(),n=o.DateAPI.millisecondsToDays(o.DateAPI.diff(o.DateAPI.toUTCZone(gDesigner.now()),t.getExpirationDate())),gDesigner.pageTracking("/ProTrialExpireSoon"+n);break;case"proOfferInTrialLastWarning":gDesigner.pageTracking("/ProTrialExpireToday");break;case"proOfferSpecialPrice":gDesigner.pageTracking("/ProTrialSpecialPrice");break;case"proOfferInFree":gDesigner.pageTracking("/ProFree");break;case"upgrade":gDesigner.pageTracking("/Upgrade")}}reset(e,t){gDesigner.setSetting(e,t)}resetAll(){Object.keys(l).forEach(e=>this.reset(e))}_waitUntilUserIsInactive(){return!gDesigner.isUserActivelyUsingApp()||(this._intervalId||(this._intervalId=setInterval(()=>{gDesigner.isUserActivelyUsingApp()||(clearInterval(this._intervalId),this._intervalId=null,this.checkReminders())},o.ACTIVE_USAGE_IDLE_TIME)),!1)}async _getShowTrialMessage(){try{const{showTrialMessage:e}=await o.gApi.client.getConfiguration()||{};return!!e}catch(e){console.error("Failed to load client configuration. Skipping trial reminders")}return!1}}},function(e,t,n){"use strict";n(7);var o=n(1);const i=n(1303),a=n(1551);class r{static openOfferReminder(e){return r._openPaywall("reminder",e)}static openSubscriptionOffer(e){return r._openPaywall("subscribe",e)}static async _openPaywall(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"reminder",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await this._getProduct(),r=this._getLayout(),s=gDesigner.getApplicationManager().isInAppPurchaseAvailable();return(await i.newBuilder(a)).setId("paywall-cross-frame").setEndpoint("/pro/paywall/".concat(e)).setTime(gDesigner.now()).setLanguage(o.GLocale.getLanguage()).setCampaign(t.campaign).setShareFile(t.shareFile).setDashboard(t.dashboard).setProduct(n).setInAppPurchasesAvailable(s).setLayout(r).build().open()}static _getProduct(){return gInAppPurchase.getProduct().catch(()=>null)}static _getLayout(){return a.DEFAULT_LAYOUT}}e.exports=r},function(e,t,n){"use strict";n(7);const o=n(1548),i=n(1550);n(1162);e.exports=class{static async newBuilder(e){return await gDesigner.isOfflineAsync()?new i(e):new o}}},function(e,t,n){"use strict";var o=n(1);function i(e){this.paintMode=e}o.GObject.inherit(i,o.GEvent),i.prototype.paintMode=null,e.exports=i},function(e,t,n){"use strict";var o=n(14),i=o(n(859)),a=o(n(1165));class r extends i.default{canActivate(){return!0}activate(e,t){super.activate(e,t),this._panState=new a.default}deactivate(e,t){super.deactivate(e,t),this._panState=null}start(e,t){this._panState&&this._panState.update(e.getOriginalEvent())}move(e,t){this._panState&&e.isCancelable()&&e.iterateChangedTouches(e=>{this._panState.hasActiveIdentifier(e)&&this._dispatchEventFromTouch("mousemove",e)})}end(e,t){super.end(e,t),this._panState=null}cancel(e,t){super.cancel(e,t),this._panState=null}}e.exports=r},function(e,t,n){"use strict";var o=n(1);function i(e){this.fullscreen=e}o.GObject.inherit(i,o.GEvent),i.prototype.fullscreen=!1,e.exports=i},function(e,t,n){"use strict";n(18),n(3),n(29);var o=n(1),i=n(45),a=n(13),r=n(9),s=n(34);const l=n(16),c=n(27),d=n(589),u=n(37);function p(e){this._isCut=e,document.addEventListener(this._isCut?"cut":"copy",this._documentCutOrCopyEvent.bind(this)),document.addEventListener(this._isCut?"beforecut":"beforecopy",this._documentBeforeCutOrCopyEvent.bind(this)),window.hasOwnProperty("ClipboardEvent")||(this._cutCopyArea=$("<textArea></textArea>").css({position:"absolute",top:"-9999px",opacity:0}).prop("tabindex",-1).appendTo($("body")))}o.GObject.inherit(p,c),p.ID_COPY="edit.copy",p.ID_CUT="edit.cut",p.prototype._cutCopyArea=null,p.prototype.getId=function(){return this._isCut?p.ID_CUT:p.ID_COPY},p.prototype.getTitle=function(){return new o.GLocaleKey("GCutCopyAction","title."+(this._isCut?"cut":"copy"))},p.prototype.getIcon=function(){return"gravit-icon-"+(this._isCut?"cut":"copy")},p.prototype.getCategory=function(){return l.CATEGORY_EDIT},p.prototype.getGroup=function(){return"ccp"},p.prototype.getShortcut=function(){return this._isCut?[a.GKey.Constant.META,"X"]:[a.GKey.Constant.META,"C"]},p.prototype.isEnabled=function(){return gDesigner.getActiveDocument()&&!!gDesigner.getActiveDocument().getEditor().getSelection()},p.prototype.executeFromShortcut=function(){return this._isEditableElementFocused()||this._cutCopyArea&&this._cutCopyArea.focus(),!1},p.prototype.execute=function(){this._documentCutOrCopyEvent(null)},p.prototype._documentCutOrCopyEvent=function(e){if(this._isBrowserHandleCopy(e))return;e&&e.preventDefault();const t=gDesigner.getActiveDocument(),n=t&&t.getEditor();if(this._isMouseOverContextStyleCopy()){const t=this._getActiveStyleMouseOverContextBased();this._copyStyleToClipboard(t,e),this._notifyMouseOverContextOfSuccessfulCopy()}else{let t=n&&n.getSelection();this._copySelectionToClipboard(t,e)}this._isCut&&n&&this._deleteCutSelection(),this._cutCopyArea&&this._focusOnActiveArea()},p.prototype._documentBeforeCutOrCopyEvent=function(e){document.activeElement&&$(document.activeElement).is(":editable")&&!gDesigner.isGravitIME(document.activeElement)||e.preventDefault()},p.prototype._focusOnActiveArea=function(){setTimeout((function(){const e=gDesigner.getWindows();e&&e.getActiveWindow()&&e.getActiveWindow().getView().focus()}),1)},p.prototype._filterOutSelectionWithSameParent=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e=o.GNode.order(e.slice());let t=[];const n=function(e){let n=!1;return t.forEach(t=>{e.findParent(e=>{n=e===t})}),n};for(let o=0;o<e.length;++o)n(e[o])||t.push(e[o]);return t},p.prototype._isEditableElementFocused=function(){return!(!document.activeElement||!$(document.activeElement).is(":editable")||gDesigner.isGravitIME(document.activeElement))},p.prototype._isBrowserHandleCopy=function(e){return(this._isEditableElementFocused()||e&&$(e.target).is(":textSelectable"))&&!$(document.activeElement).is("button")&&(!this._cutCopyArea||document.activeElement!==this._cutCopyArea[0])},p.prototype._getActiveStyleMouseOverContextBased=function(){const e=gDesigner.getActiveDocument(),t=gDesigner.getMouseOverContext(),n=e.getActiveStylesList();let o=null;return t.context===d.FillPropertiesPanel?o=n.Fill:t.context===d.BorderPropertiesPanel?o=n.Border:t.context===d.EffectPropertiesPanel&&(o=n.Effect),o},p.prototype._serializeData=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o.GNode.serialize(e,{exceptions:t,copy:!0,copyIgnoreProperties:i.GEditorOptions.propertiesExcludedFromCopying})},p.prototype._copyStyleToClipboard=function(e,t){const n=this._serializeData([e]),i='<gravit mimeType="'+o.GNode.MIME_TYPE+'">'+$("<div/>").text(n).html()+"</gravit>";t?t.clipboardData.setData("text/xml",i):gDesigner.setClipboardContent(o.GNode.MIME_TYPE,n)},p.prototype._isRestricted=function(){return gDesigner.getActiveDocument().isCommercialProductFile()||!gDesigner.getApplicationManager().isCopyPasteEnabled()},p.prototype._filterSupportedCopyNodes=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter((function(e){return e instanceof o.GItem||e instanceof o.GLayer}))},p.prototype._parseTextSelectionToEventClipboard=function(e,t){for(let n=0;n<e.length;n++)if(e[n]instanceof o.GText){let o,a=e[n];const r=a.getTLCore();if(r){const t=i.GElementEditor.getEditor(a);o=t&&1===e.length&&t.isInlineEdit()?r.selectedRange().plainText():r.getDocumentRange().plainText()}else o=a.getContent();t.clipboardData.setData("text/plain",o);break}},p.prototype._buildExceptionsForSelection=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];for(let n=0;n<e.length;n++)t=t.concat(gDesigner.getActiveDocument().getEditor().getLinkedElementsInSelection(e[n],e));return r.HAS_ANNOTATIONS&&(t=t.concat(gDesigner.getActiveDocument().getEditor().getAnnotationsExceptions(e))),t},p.prototype._extractStylesFromSelection=function(e){const t=[];for(let n=0;n<e.length;n++){const o=e[n];o.hasProperty("sref")&&o.getReferencedStyle()&&t.push(o.getReferencedStyle())}return t},p.prototype._deleteCutSelection=function(){let e=o.GLocale.get(new o.GLocaleKey("text.cut-selection"));const t=gDesigner.getActiveDocument(),n=t&&t.getEditor(),i=gDesigner.getMouseOverContext(),a=t.getActiveStylesList();n.beginTransaction();try{if(i.context&&(a.Fill||a.Border||a.Effect)){let t=null,r=null;const l=n.getSelection();i.context===d.FillPropertiesPanel?(t=a.Fill,r="fill"):i.context===d.BorderPropertiesPanel?(t=a.Border,r="border"):i.context===d.EffectPropertiesPanel&&(t=a.Effect,r="effect"),(0,s.iterateEqualStyleLayers)(r,t,l,(function(e){e.getParent().removeChild(e)})),e=o.GLocale.get(this.getTitle())}else n.deleteSelection(!0)}finally{n.commitTransaction(e)}},p.prototype._copySelectionToClipboard=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=gDesigner.getActiveDocument();if(e=this._filterOutSelectionWithSameParent(e),(e=this._filterSupportedCopyNodes(e))&&e.length){const i=this._buildExceptionsForSelection(e),a=this._extractStylesFromSelection(e);e.push.apply(e,a),this._isRestricted()&&(e=n.restrictElements(e));let r=this._serializeData(e,i);gDesigner.setClipboardContent(o.GNode.MIME_TYPE,r);const s=1===e.length&&e[0];if(!(s&&s.hasMixin(o.GNode.Properties)&&s.getProperty("collab"))){const i='<gravit mimeType="'+o.GNode.MIME_TYPE+'" restricted="'+(!!this._isRestricted()&&n.getStorageItem().getId())+'">'+$("<div/>").text(r).html()+"</gravit>";t?(t.clipboardData.setData("text/xml",i),this._parseTextSelectionToEventClipboard(e,t)):gContainer.copyToClipboard(i).catch(()=>{this._showError()})}}},p.prototype._isMouseOverContextStyleCopy=function(){const e=gDesigner.getActiveDocument(),t=gDesigner.getMouseOverContext(),n=e.getActiveStylesList();return t.context&&(n.Fill||n.Border||n.Effect)},p.prototype._notifyMouseOverContextOfSuccessfulCopy=function(){const e=gDesigner.getMouseOverContext();e.contextCallback&&e.contextCallback(e.prevEvt)},p.prototype._showError=function(){const e=this._isCut?o.GLocale.get(new o.GLocaleKey("GCutCopyAction","title.cut")):o.GLocale.get(new o.GLocaleKey("GCutCopyAction","title.copy"));u.alert(o.GLocale.get(new o.GLocaleKey("GCutCopyAction","text.security-issues")).replace("%cutcopy",e).replace("%shortcut",a.GKey.shortcutToString(this.getShortcut())))},p.prototype.toString=function(){return"[Object GCutCopyAction]"},e.exports=p},function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=n(45),r=n(13),s=n(9),l=n(34),c=o(n(37)),d=n(550),u=n(16),p=n(27);const g=n(343),h=n(589);function f(){}i.GObject.inherit(f,p),f.ID="edit.delete",f.TITLE=new i.GLocaleKey("GDeleteAction","title"),f.prototype._isConfirmWindowDisplaying=!1,f.prototype.getId=function(){return f.ID},f.prototype.getTitle=function(){return f.TITLE},f.prototype.getCategory=function(){return u.CATEGORY_EDIT},f.prototype.getGroup=function(){return"ccp"},f.prototype.getShortcut=function(){return[r.GKey.Constant.REMOVE]},f.prototype.getAdditionalShortcuts=function(){var e=[];return i.GSystem.operatingSystem===i.GSystem.OperatingSystem.OSX_IOS?e.push([r.GKey.Constant.DELETE]):e.push([r.GKey.Constant.BACKSPACE]),e},f.prototype.isEnabled=function(){var e=gDesigner.getActiveDocument();if(this._isConfirmWindowDisplaying)return!1;if(e){var t=e.getEditor().getSelection();if(t)for(var n=0;n<t.length;++n)if(t[n]instanceof i.GItem||t[n]instanceof i.GLayer)return!0}return!1},f.prototype.execute=function(){var e=gDesigner.getActiveDocument(),t=e.getEditor(),n=e.getActiveStylesList(),o=gDesigner.getMouseOverContext();if(s.HAS_ANNOTATIONS&&gDesigner.getRightSidebars().getActiveSidebar()===d.ID){var r=t.getSelection().filter(e=>g.canDeleteAnnotation(e));r.length&&(this._setIsConfirmWindowDisplaying(!0),c.default.confirm(i.GLocale.get(new i.GLocaleKey("GAnnotationPanel","text.confirm-remove")),e=>{e&&gDesigner.getActiveDocument()&&gDesigner.getActiveDocument().getEditor()===t&&g.removeAnnotations(r,r[0].getParent(),i.GLocale.get(this.getTitle())),this._setIsConfirmWindowDisplaying(!1)},null,null,null,!0,!0))}else if(o.context&&(n.Fill||n.Border||n.Effect)){var u=null,p=null,m=t.getSelection();if(o.context===h.FillPropertiesPanel)u=n.Fill,p="fill";else if(o.context===h.BorderPropertiesPanel)u=n.Border,p="border";else{if(o.context!==h.EffectPropertiesPanel)return void t.deleteSelection();u=n.Effect,p="effect"}a.GEditor.tryRunTransaction(e.getScene(),(function(){(0,l.iterateEqualStyleLayers)(p,u,m,(function(e){e.getParent().removeChild(e)}))}),i.GLocale.get(f.TITLE))}else t.deleteSelection()},f.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-delete":""},f.prototype._setIsConfirmWindowDisplaying=function(e){this._isConfirmWindowDisplaying=e},f.prototype.toString=function(){return"[Object GDeleteAction]"},e.exports=f},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(16),r=n(27);function s(){}o.GObject.inherit(s,r),s.ID="edit.select-all",s.TITLE=new o.GLocaleKey("GSelectAllAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return a.CATEGORY_EDIT},s.prototype.getGroup=function(){return"select"},s.prototype.getShortcut=function(){return[i.GKey.Constant.META,"A"]},s.prototype.isEnabled=function(){return!(!document.activeElement||!$(document.activeElement).is(":editable"))||!!gDesigner.getActiveDocument()},s.prototype.execute=function(){if(document.activeElement&&$(document.activeElement).is(":editable")&&!$(document.activeElement).is("button")&&!gDesigner.isGravitIME(document.activeElement))document.execCommand("selectAll");else{var e=gDesigner.getActiveDocument().getEditor(),t=gDesigner.getActiveDocument().getScene(),n=t.getActivePage(),i=gDesigner.getActiveDocument().getActiveWindow().getView().getViewConfiguration().multiPageView,a=[];t.accept((function(e){if(e instanceof o.GItem&&!e.hasMixin(o.GAnnotation)&&!(e.getParent()instanceof o.GItem)&&(e.getPage()===n||i)&&!e.isLocked()){var t=!e.getProperty("vis")||e.findParent((function(e){return e instanceof o.GBlock&&!e.getProperty("vis")})),r=e.getProperty("plkt"),s=r&o.GBlock.ProgramLck.NoEdit&&r&o.GBlock.ProgramLck.NoSizeChanges&&r&o.GBlock.ProgramLck.NoMove&&r&o.GBlock.ProgramLck.NoDelete;t||s||a.push(e)}})),e.updateSelection(!1,a)}},s.prototype.toString=function(){return"[Object GSelectAllAction]"},e.exports=s},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(16),r=n(27);function s(){}o.GObject.inherit(s,r),s.ID="edit.deselect-all",s.TITLE=new o.GLocaleKey("GDeselectAllAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return a.CATEGORY_EDIT},s.prototype.getGroup=function(){return"select"},s.prototype.getShortcut=function(){return[i.GKey.Constant.SHIFT,i.GKey.Constant.META,"A"]},s.prototype.isEnabled=function(){if(document.activeElement&&$(document.activeElement).is(":editable"))return!0;if(gDesigner.getActiveDocument()){var e=gDesigner.getActiveDocument().getEditor().getSelection();if(e&&e.length)return!0}return!1},s.prototype.execute=function(){document.activeElement&&$(document.activeElement).is(":editable")&&!$(document.activeElement).is("button")&&!gDesigner.isGravitIME(document.activeElement)?document.execCommand("selectAll"):gDesigner.getActiveDocument().getEditor().clearSelection()},s.prototype.toString=function(){return"[Object GDeselectAllAction]"},e.exports=s},function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=n(13),r=o(n(428)),s=o(n(1306));const{isExecutingOnMSTeamsSync:l}=r.default;var c=n(842),d=n(434),u=n(16),p=n(27),g=n(1562);function h(){this._banner.setBannerText(i.GLocale.get(new i.GLocaleKey("GToggleFullscreenAction","fullscreen-banner")))}i.GObject.inherit(h,p),h.ID="view.fullscreen",h.TITLE=new i.GLocaleKey("GToggleFullscreenAction","title"),h.prototype._lastStates={},h.prototype._banner=new g,h.prototype.getId=function(){return h.ID},h.prototype.getTitle=function(){return h.TITLE},h.prototype.getCategory=function(){return u.CATEGORY_VIEW},h.prototype.getShortcut=function(){return[a.GKey.Constant.ALT_LEFT,a.GKey.Constant.ENTER]},h.prototype.isEnabled=function(){return!!gDesigner.getActiveDocument()&&this._isSupported()},h.prototype.isVisible=function(){return this._isSupported()},h.prototype._isSupported=function(){return!l()},h.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-toggle-full-screen":null},h.prototype.isFullscreen=function(){return!(gDesigner.isPartVisible(c.Header)||gDesigner.isPartVisible(c.Toolbar)||gDesigner.isPartVisible(c.RightSidebars)||gDesigner.isPartVisible(c.LeftSidebars)||gDesigner.isPartVisible(c.Panels))},h.prototype.execute=function(){var e=this.isFullscreen();e?this._banner.hide():(this._updateLastStates(),gDesigner.isTouchEnabled()||this._banner.show()),gDesigner.setPartVisible(c.Header,!!e&&this._lastStates.header,""),gDesigner.setPartVisible(c.Toolbar,!!e&&this._lastStates.toolbar,""),gDesigner.setPartVisible(c.Panels,!!e&&this._lastStates.panels),gDesigner.setPartVisible(c.RightSidebars,!!e&&this._lastStates.rightSidebar),gDesigner.setPartVisible(c.LeftSidebars,!!e&&this._lastStates.leftSidebar),gDesigner.relayout(),gDesigner.executeAction(d.ID,void 0,void 0,!0),gDesigner.hasEventListeners(s.default)&&gDesigner.trigger(new s.default(e))},h.prototype._updateLastStates=function(){this._lastStates={header:gDesigner.isPartVisible(c.Header),toolbar:gDesigner.isPartVisible(c.Toolbar),panels:gDesigner.isPartVisible(c.Panels),leftSidebar:gDesigner.isPartVisible(c.LeftSidebars),rightSidebar:gDesigner.isPartVisible(c.RightSidebars)}},h.prototype.toString=function(){return"[Object GToggleFullscreenAction]"},e.exports=h},function(e,t,n){"use strict";n(3);var o=n(1);const i=n(16),a=n(27),r=n(1563);function s(){}o.GObject.inherit(s,a),s.ID="help.open-quick-help",s.TITLE=new o.GLocaleKey("GOpenQuickHelpScreenAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return i.CATEGORY_HELP},s.prototype.getGroup=function(){return"help"},s.prototype.isEnabled=function(){return!0},s.prototype.isVisible=function(){return gDesigner.isTouchEnabled()},s.prototype.execute=function(){r.open()},s.prototype.toString=function(){return"[Object GOpenQuickHelpScreenAction]"},e.exports=s},function(e,t,n){"use strict";function o(){}o.Orientation={Vertical:"vertical",Horizontal:"horizontal"},function(e){const t={_toggleTransitions:function(t){return e(this).toggleClass("g-transitions-off",!t),this},_toggleVisibilty:function(t){const n=e(this);if(n.hasClass("expanded")!==t)return n.toggleClass("collapsed",!t).toggleClass("expanded",t),n.hasClass(o.Orientation.Vertical)?n.children(".g-collapsible-button:first").find("span").toggleClass("gravit-icon-touch-arrow-up",!t).toggleClass("gravit-icon-touch-arrow-down",t):n.siblings(".g-collapsible-button:first").find("span").toggleClass("gravit-icon-touch-arrow-right",!t).toggleClass("gravit-icon-touch-arrow-left",t),this},init:function(n){n=e.extend({orientation:o.Orientation.Vertical},n);const i=this;return this.each((function(){const o=e(this).addClass("g-collapsible g-transitions-off expanded").addClass(n.orientation);"vertical"===n.orientation?o.prepend(e("<div/>").addClass("g-collapsible-button").append(e("<span/>").addClass("gravit-icon-touch-arrow-down")).on("click",()=>{const e=o.hasClass("expanded");t._toggleTransitions.call(i,!0),t._toggleVisibilty.call(i,!e),o.trigger("visibilitychanged",[!e])})):o.before(e("<div/>").addClass("g-collapsible-button").append(e("<span/>").addClass("gravit-icon-touch-arrow-left")).on("click",()=>{const e=o.hasClass("expanded");t._toggleTransitions.call(i,!0),t._toggleVisibilty.call(i,!e,!0),o.trigger("visibilitychanged",[!e])}))}))},collapse:function(){return t._toggleVisibilty.call(this,!1)},expand:function(){return t._toggleVisibilty.call(this,!0)}};e.fn.gCollapsible=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.gCollapsible"):t.init.apply(this,arguments)}}(jQuery),e.exports=o},function(e,t,n){"use strict";class o{static get Events(){return{SETTING_CHANGED_EVENT:"SETTING_CHANGED_EVENT",USER_COMPLETED_PURCHASE_EVENT:"USER_COMPLETED_PURCHASE_EVENT"}}static isInitialized(){return"undefined"!=typeof dataLayer}static updateProperty(e,t){o.isInitialized()&&dataLayer.push({[e]:t})}static fireEvent(e){o.isInitialized()&&dataLayer.push({event:e})}}e.exports=o},function(e,t,n){"use strict";var o=n(14);n(52),n(18),n(3),n(62),n(29),n(28);var i=n(1),a=n(45),r=n(34),s=n(9),l=n(61),c=o(n(326)),d=n(115),u=n(1130),p=n(125),g=n(585),h=n(1304),f=n(427);const m=n(37),y=n(1578),v=n(71);function _(){}i.GObject.inherit(_,d),_.prototype._panel=null,_.prototype._canvasPropertiesRowInTouch=null,_.prototype._canvasPropertiesRowInNormal=null,_.prototype._hrAfterCanvasRow=null,_.prototype._bleedRowInTouch=null,_.prototype._bleedRowInNormal=null,_.prototype._pageSizeRowInNormal=null,_.prototype._hrAfterPageSizeRow=null,_.prototype._toolbar=null,_.prototype._document=null,_.prototype._oldDocument=null,_.prototype._pages=null,_.prototype._styleEditorChange=!1,_.prototype._styleEdOn=!1,_.prototype._ownChange=!1,_.prototype._chooserElem=null,_.prototype._clipContentButton=null,_.prototype._excludedPresets=[u.TYPE.MERCH],_.prototype._createInput=function(e){var t=this,n=this;if("bck"===e)return $("<div></div>").attr("data-property",e).gPatternChooser({types:[i.GColor,i.GGradient,i.GTexturePattern]}).on("chooseropen",(function(){gDesigner.getWorkspace().getStyleEdManager().updateEditor(n._pages[0],e,!1),n._styleEdOn=!0,n._chooserElem=$(this),n.updatePropertiesAvailability(gDesigner.getActiveDocument().getScene().getActivePage())})).on("chooserclose",(function(e,t,o){if(gDesigner.getWorkspace().getStyleEdManager().getOverlayLock(o))t();else{if(n._document&&n._document.hasCDR()){var a=gPatternChooser.getPattern();!a||a instanceof i.GRGBColor||m.showCDRUnsupportedObjectWarning()}n._styleEdOn=!1,gDesigner.getWorkspace().getStyleEdManager().deactivateEditor()}n._chooserElem=null})).on("patternchange",(function(e,t,o,a,r,s){var l=[],c=[];if(void 0!==t&&(l.push("bck"),c.push(t)),"number"==typeof o&&(l.push("bop"),c.push(o)),n._pages)if(a)n._pages.forEach((function(e){e.setProperties(l,c,!1,!1,a)}));else{var d=null;r&&(d={chooserOn:!0,pagePattern:!0},null!==s&&(d.activeStopIdx=s)),n._assignProperties(l,c,i.GLocale.get(new i.GLocaleKey("GPageProperties","action.change-background")),d)}}));if("preset-size"===e)return $("<select></select>").attr("data-property","preset-size").css("width","100%").on("change",e=>{var t=$(e.target).find("option:selected"),n=t.attr("data-preset-locale-en"),o="";o=n||t.text(),gDesigner.stats("pageproperties_preset_size",o),this._assignPresetSize(e.target.value)});if("w"===e||"h"===e){var o=i.GLocale.get(new i.GLocaleKey("GCommonNames","property-".concat(e.toLowerCase())),e);return $("<div>").append($("<input>").attr("type","text").attr("data-property",e).on("change",(function(){gDesigner.stats("pageproperties_change_size");var t=$(this).gInputBox("value"),o=n._document.getScene().stringToPoint(t);""===t||0===o?n._assignProperties(["w","h"],[o,o],i.GLocale.get(new i.GLocaleKey("GPageProperties","action.change-size"))):null!==o&&"number"==typeof o&&o>=0?n._assignProperty(e,o,i.GLocale.get(new i.GLocaleKey("GPageProperties","action.change-size"))):n._updateProperties()})).gInputBox()).gInputLabel({label:o,autoPadding:o.length>1})}if("bl"===e)return $("<input>").attr("type","text").attr("data-property",e).on("change",(function(){gDesigner.stats("pageproperties_change_bleeding");var t=n._document.getScene().stringToPoint($(this).gInputBox("value"));null!==t&&"number"==typeof t&&t>=0?n._assignProperty(e,t,i.GLocale.get(new i.GLocaleKey("GPageProperties","action.change-bleeding"))):n._updateProperties()})).gInputBox();if("mt"===e||"mb"===e||"ml"===e||"mr"===e)return $("<input>").attr("type","text").attr("data-property",e).on("change",(function(){gDesigner.stats("pageproperties_change_margins");var t=n._document.getScene().stringToPoint($(this).gInputBox("value"));null!==t&&"number"==typeof t&&t>=0?"yes"===n._panel.find("[data-lock-margin]").attr("data-lock-margin")?n._assignProperties(["mt","mb","ml","mr"],[t,t,t,t],i.GLocale.get(new i.GLocaleKey("GPageProperties","action.change-margins"))):n._assignProperty(e,t,i.GLocale.get(new i.GLocaleKey("GPageProperties","action.change-margin"))):n._updateProperties()})).gInputBox();if("equal-margins"===e)return $("<span></span>").addClass("g-button g-flat valign-middle").append($("<span></span>").addClass("gravit-icon-linked")).on("click",(function(){var e=$(this).closest(".g-button");gDesigner.stats("pageproperties_lock_margin",e.attr("data-lock-margin")),"yes"===e.attr("data-lock-margin")?e.attr("data-lock-margin","no").find("span:first-child").attr("class","gravit-icon-unlinked"):e.attr("data-lock-margin","yes").find("span:first-child").attr("class","gravit-icon-linked")})).attr("data-title",i.GLocale.get(new i.GLocaleKey("GPageProperties","action.equal-margin"))).attr("data-lock-margin","yes");if("master-page"===e)return $("<select></select>").attr("data-property","master-page").css("width","100%").gPro().on("mousedown",r.watchDog.trap(null,null,()=>gDesigner.stats("pageproperties_nonprotriespro_masterpages"))).on("change",r.watchDog.trap(e=>{gDesigner.stats("pageproperties_change_masterpages"),this._assignMasterPage($(e.target).find('option[value="'+e.target.value+'"]').data("page"))},null,()=>gDesigner.stats("pageproperties_nonprotriespro_masterpages")));if("bop"===e)return $("<input>").attr("type","text").attr("data-property",e).on("change",(function(){gDesigner.stats("pageproperties_change_canvas-opacity"),n._assignProperty(e,i.GLength.parseEquationValue($(this).gInputBox("value"))/100,i.GLocale.get(new i.GLocaleKey("GPageProperties","action.change-canvas-opacity")))})).gInputBox({minValue:0,maxValue:100,incrementValue:gDesigner.getOpacityIncrement(),postfix:"%"});if("rotate-canvas"===e)return $("<button>").attr("data-property",e).attr("data-title",i.GLocale.get(new i.GLocaleKey("GPageProperties","text.rotate-canvas"))).append($("<span/>").addClass("gravit-icon-flip-canvas")).on("click",(function(){gDesigner.stats("pageproperties_change_rotate");var e=n._pages[0];e&&e.getProperty("w")>0&&e.getProperty("h")>0&&n._assignProperties(["w","h"],[e.getProperty("h"),e.getProperty("w")],i.GLocale.get(new i.GLocaleKey("GPageProperties","action.change-size")))}));if("trim-canvas"===e)return $("<button>").attr("data-property",e).attr("data-title",i.GLocale.get(new i.GLocaleKey("GPageProperties","text.size-trim"))).append($("<span/>").addClass("gravit-icon-trim-canvas")).on("click",(function(){gDesigner.stats("pageproperties_trim_page"),n._panel.find('select[data-property="preset-size"]').val("@trim"),n._assignPresetSize("@trim")}));if("clip-content"===e){this._clipContentButton=$("<button>").attr("data-property",e).attr("disabled",!0).addClass("g-disabled").attr("data-title",i.GLocale.get(new i.GLocaleKey("GPageProperties","text.clip-content"))).append($("<span/>").addClass("gravit-icon-clip-content")).on("click",(function(){var e=gDesigner.getWindows().getActiveWindow();if(e){var t=e.getView().getViewConfiguration().paintMode;gDesigner.stats("pageproperties_clip_content",t!==i.GScenePaintConfiguration.PaintMode.Output),n(t!==i.GScenePaintConfiguration.PaintMode.Output,!1)}}));const n=function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var o;n&&e||(e?(o=i.GScenePaintConfiguration.PaintMode.Output,t._updatePageSetting(f.PAGE_CLIP_CONTENT_ENABLED)):(o=i.GScenePaintConfiguration.PaintMode.Full,t._updatePageSetting(f.PAGE_CLIP_CONTENT_DISABLED)),gDesigner.setPaintMode(o))};return this._clipContentButton}throw new Error("Unknown input property: "+e)},_.prototype._windowEvent=function(e){const{type:t,window:n}=e;if(t!==g.WindowEvent.Type.Activated)return void(t===g.WindowEvent.Type.Removed&&this._lastScene&&(this._lastScene.removeEventListener(i.GNode.AfterPropertiesChangeEvent,this._propertiesUpdateEventHandler,this),this._lastScene.removeEventListener(i.GNode.AfterFlagChangeEvent,this._pageActivationEventHandler,this),this._lastScene=null));if(n.getDocument()!==gDesigner.getActiveDocument())return;const o=gDesigner.getActiveDocument().getScene();o.addEventListener(i.GNode.AfterFlagChangeEvent,this._pageActivationEventHandler,this),o.addEventListener(i.GNode.AfterPropertiesChangeEvent,this._propertiesUpdateEventHandler,this),this._lastScene&&(this._lastScene.removeEventListener(i.GNode.AfterPropertiesChangeEvent,this._propertiesUpdateEventHandler,this),this._lastScene.removeEventListener(i.GNode.AfterFlagChangeEvent,this._pageActivationEventHandler,this)),this._lastScene=o,this._pageActivationEventHandler({node:o.getActivePage(),flag:i.GNode.Flag.Active})},_.prototype._paintModeEvent=function(){this.updatePropertiesAvailability(gDesigner.getActiveDocument().getScene().getActivePage())},_.prototype._pageActivationEventHandler=function(e){let{node:t,flag:n}=e;if(t instanceof i.GPage&&n===i.GNode.Flag.Active){const e=gDesigner.getWindows().getActiveWindow().getView().getViewConfiguration().paintMode,n=!t.isFixedSized();if(n&&e===i.GScenePaintConfiguration.PaintMode.Output)gDesigner.setPaintMode(i.GScenePaintConfiguration.PaintMode.Full),this._updatePageSetting(f.PAGE_CLIP_CONTENT_DISABLED);else if(!n){var o=t.getProperty(f.PAGE_CLIP_PROPERTY_NAME,!0)||(s.PAGE_CLIP_DEFAULT?f.PAGE_CLIP_CONTENT_ENABLED:f.PAGE_CLIP_CONTENT_DISABLED);gDesigner.setPaintMode(o===f.PAGE_CLIP_CONTENT_ENABLED?i.GScenePaintConfiguration.PaintMode.Output:i.GScenePaintConfiguration.PaintMode.Full)}this.updatePropertiesAvailability(t)}},_.prototype._propertiesUpdateEventHandler=function(e){let{node:t,temporary:n,properties:o}=e;if(!n&&t instanceof i.GPage&&(o.indexOf("w")>=0||o.indexOf("h")>=0)){var a=gDesigner.getWindows().getActiveWindow().getView().getViewConfiguration().paintMode,r=!t.isFixedSized();r&&a===i.GScenePaintConfiguration.PaintMode.Output?(gDesigner.setPaintMode(i.GScenePaintConfiguration.PaintMode.Full),this._updatePageSetting(f.PAGE_CLIP_CONTENT_DISABLED)):this._manageClipButtonState(!1,!r)}},_.prototype._updatePageSetting=function(e){gDesigner.getActiveDocument().getScene().getActivePage().setProperty(f.PAGE_CLIP_PROPERTY_NAME,e,!0)},_.prototype._reInitLayout=function(){this._canvasPropertiesRowInNormal=$("<div></div>").attr("data-property-row","canvas-size").addClass("canvas-properties-normal").gPropertyRow({columns:[{width:"25%",content:this._createInput("bck"),label:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.color"))},{width:"25%",content:this._createInput("w"),label:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.width"))},{width:"25%",content:this._createInput("h"),label:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.height"))},{width:"25%",content:this._createInput("bop"),label:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.opacity"))}]}).insertBefore(this._hrAfterbleedRow),this._hrAfterCanvasRow=$("<hr/>").insertBefore(this._hrAfterbleedRow),this._pageSizeRowInNormal=$("<div></div>").addClass("page-size-properties-normal").gPropertyRow({columns:[{width:"25%",content:$("<span>"+i.GLocale.get(new i.GLocaleKey("GPageProperties","text.page-size"))+"</span>")},{width:"30%",content:this._createInput("preset-size")},{width:"15%",content:this._createInput("rotate-canvas")},{width:"15%",content:this._createInput("trim-canvas")},{width:"15%",content:this._createInput("clip-content")}]}).insertBefore(this._hrAfterbleedRow),this._hrAfterPageSizeRow=$("<hr/>").attr("data-property-row","fixed-size").insertBefore(this._hrAfterbleedRow),this._bleedRowInNormal=$("<div></div>").addClass("bleed-properties-normal").attr("data-property-row","fixed-size").gPropertyRow({columns:[{width:"25%",content:$("<span>"+i.GLocale.get(new i.GLocaleKey("GPageProperties","text.bleed"))+"</span>")},{width:"20%",content:this._createInput("bl")}]}).insertBefore(this._hrAfterbleedRow)},_.prototype.init=function(e,t){this._panel=e,this._toolbar=t,gDesigner.getWindows().addEventListener(g.WindowEvent,this._windowEvent,this),gDesigner.addEventListener(h,this._paintModeEvent,this),gDesigner.addEventListener(v,this._documentEvent,this),this.setTouchTools([new c.default({id:"document",icon:"gravit-icon-touch-document",panel:[this._panel,".scene-properties-panel"],toolbar:[this._toolbar,".scene-properties-toolbar"],panelWidth:"380px"})]),t.addClass("filled"),t.addClass("page-toolbar"),t.addClass("page-properties-toolbar"),e.addClass("page-properties-panel"),$("<label></label>").text(i.GLocale.get(new i.GLocaleKey("GPageProperties","title")).toUpperCase()).appendTo(t),this._hrAfterbleedRow=$("<hr/>").attr("data-property-row","fixed-size").appendTo(e);const n=l.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GPageProperties","text.margin-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GPageProperties","text.margin-tooltip-description")),learnMore:"https://documentation.corelvector.com/organizing-your-designs/pages/#margins-7"});$("<div></div>").attr("data-property-row","fixed-size").addClass("page-margin-properties").gPropertyRow({columns:[{clazz:"margin-title-column",content:$("<span>"+i.GLocale.get(new i.GLocaleKey("GPageProperties","text.margin"))+"</span>").addClass("margin-title")},{clazz:"margin-input-column",labelClass:"margin-input-labels",label:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.left")),content:this._createInput("ml").gRichTooltip(n)},{clazz:"margin-input-column",labelClass:"margin-input-labels",label:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.top")),content:this._createInput("mt").gRichTooltip(n)},{clazz:"margin-input-column",labelClass:"margin-input-labels",label:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.right")),content:this._createInput("mr").gRichTooltip(n)},{clazz:"margin-input-column",labelClass:"margin-input-labels",label:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.bottom")),content:this._createInput("mb").gRichTooltip(n)},{clazz:"margin-btn-column",labelClass:"margin-input-labels",content:this._createInput("equal-margins")}]}).appendTo(e),$("<hr/>").attr("data-property-row","fixed-size").appendTo(e);var o=gDesigner.getLicense();$("<div></div>").attr("data-property-row","fixed-size").addClass("master-property-row").gPropertyRow({columns:[{clazz:"master-property-title",content:$("<span>"+i.GLocale.get(new i.GLocaleKey("GPageProperties","text.master"))+"</span>")},{clazz:"master-property-selector",content:$("<div></div>").append(this._createInput("master-page")).append($("<span></span>").gPro()).gRichTooltip(l.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GPageProperties","text.master-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GPageProperties","text.master-tooltip-description")),middle:!1,isPro:!gDesigner.isEnabledProFeatures()||!(o.isPro()&&!o.isExpired()),learnMore:"https://documentation.corelvector.com/organizing-your-designs/pages/#master-pages"}))}]}).appendTo(e),e.find('[data-property="rotate-canvas"]').parent(".content").gRichTooltip(l.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GPageProperties","text.rotate-canvas-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GPageProperties","text.rotate-canvas-tooltip-description")),learnMore:"https://documentation.corelvector.com/organizing-your-designs/pages/#orientation-4"})),e.find('[data-property="trim-canvas"]').parent(".content").gRichTooltip(l.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GPageProperties","text.trim-canvas-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GPageProperties","text.trim-canvas-tooltip-description")),learnMore:"https://documentation.corelvector.com/organizing-your-designs/pages/#trim-canvas-5"})),e.find('[data-property="clip-content"]').parent(".content").gRichTooltip(l.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GPageProperties","text.clip-content-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GPageProperties","text.clip-content-tooltip-description"))})),e.find('[data-property="bl"]').parent(".content").gRichTooltip(l.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GPageProperties","text.bleed-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GPageProperties","text.bleed-tooltip-description")),middle:!1,learnMore:"https://documentation.corelvector.com/organizing-your-designs/pages/#bleed-6"})),gDesigner.getWorkspace().getStyleEdManager().addEventListener(a.GStyleEdManager.EditorEvent,this._styleEditorEventHandler,this),this._updateUI()},_.prototype._documentEvent=function(e){e.type===v.Type.Removed&&this._panel.find('select[data-property="master-page"]').empty().append($("<option></option>"))},_.prototype._assignPresetSize=function(e){if("@infinite"===e)this._assignProperties(["w","h"],[0,0],i.GLocale.get(new i.GLocaleKey("GPageProperties","action.change-size")),null,!0);else if("@trim"===e){this._ownChange=!0;var t=this._document.getEditor();t.beginTransaction();try{this._pages.forEach(e=>e.trimToContent())}finally{t.commitTransaction(i.GLocale.get(new i.GLocaleKey("GPageProperties","action.change-size"))),this._ownChange=!1}}else{var n=this._document.getScene(),o=e.split("x"),a=n.stringToPoint(o[0]),r=n.stringToPoint(o[1]),s=+o[2];n.getProperty("dpi")!==s&&n.setProperty("dpi",s),this._assignProperties(["w","h"],[a,r],i.GLocale.get(new i.GLocaleKey("GPageProperties","action.change-size")))}},_.prototype._assignMasterPage=function(e){var t=this._document.getScene(),n=this._document.getEditor();if(e){n.beginTransaction();try{this._pages.forEach(n=>{var o=n.getMasterPages(),i=!1;o.forEach((function(o){e!==o?t.unlink(o,n):i=!0})),i||t.link(e,n)}),this._updateSlavePages(e)}finally{n.commitTransaction(i.GLocale.get(new i.GLocaleKey("GPageProperties","action.assign-master-page")))}}else{n.beginTransaction();try{this._pages.forEach(e=>{e.getMasterPages().forEach((function(n){t.unlink(n,e)}))})}finally{n.commitTransaction(i.GLocale.get(new i.GLocaleKey("GPageProperties","action.assign-master-page")))}}},_.prototype.update=function(e,t,n){if(this._updateUI(),this._styleEditorChange)return this._styleEditorChange=!1,!0;if(this._ownChange)return!0;this._chooserElem&&this._chooserElem.gPatternChooser("close");var o=e!==this._oldDocument;if(this._oldDocument=e,this._document&&(this._document.getScene().removeEventListener(i.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),gDesigner.removeEventListener(p,this._settingChanged),this._document=null),this._pages=null,e&&(t=t.filter(e=>e instanceof i.GPage)).length)return this._pages=t.slice(),this._document=e,this._document.getScene().addEventListener(i.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),gDesigner.addEventListener(p,this._settingChanged,this),o&&this._updatePresetSizes(),this._updateProperties(n),!0;const r=gDesigner.getActiveDocument(),s=r&&r.getScene();if(gDesigner.isTouchEnabled()&&s&&s.getActivePage()){const e=gDesigner.getActiveView(),t=e&&e.getViewConfiguration();if(t&&t.elementAnnotations){const e=gDesigner.getToolManager().getActiveTool();if(!e||e instanceof a.GSelectTool)return!0}}return!1},_.prototype._afterPropertiesChange=function(e){e.node===this._pages[0]?this._updateProperties():!e.temporary&&e.node===this._document.getScene()&&e.properties.indexOf("ut")>=0&&(this._updatePresetSizes(),this._updateProperties()),this._updateSlavePages(e.node,e.properties)},_.prototype._updateUI=function(){this._removeOldHtmlElement(),gDesigner.isTouchEnabled()?y._reInitLayout.call(this):this._reInitLayout(),this._document?(this._updatePresetSizes(),this._updateProperties()):this._oldDocument&&this._updatePresetSizes()},_.prototype._removeOldHtmlElement=function(){this._removeHtmlElem(this._canvasPropertiesRowInNormal),this._canvasPropertiesRowInNormal=null,this._removeHtmlElem(this._hrAfterCanvasRow),this._hrAfterCanvasRow=null,this._removeHtmlElem(this._bleedRowInNormal),this._bleedRowInNormal=null,this._removeHtmlElem(this._pageSizeRowInNormal),this._pageSizeRowInNormal=null,this._removeHtmlElem(this._hrAfterPageSizeRow),this._hrAfterPageSizeRow=null,this._removeHtmlElem(this._canvasPropertiesRowInTouch),this._canvasPropertiesRowInTouch=null,this._removeHtmlElem(this._bleedRowInTouch),this._bleedRowInTouch=null},_.prototype._removeHtmlElem=function(e){e&&e.remove()},_.prototype._settingChanged=function(e){"decimals_num"===e.key?this._updateProperties():"touch"===e.key&&this._updateUI()},_.prototype._updateSlavePages=function(e,t){var n=["mt","mb","ml","mr","bop","bl","bck"];if(e instanceof i.GPage){t||(t=n);var o=n.filter(e=>t.indexOf(e)>=0);o.length&&e.getSlavePages().forEach(t=>{var n;t.setProperties(o,(n=[],o.forEach(t=>n.push(e.getProperty(t))),n))})}},_.prototype._updatePresetSizes=function(){var e=(this._document||this._oldDocument).getScene().getProperty("ut"),t=this._panel.find('select[data-property="preset-size"]').empty(),n=$("<optgroup></optgroup>").attr("label",i.GLocale.get(new i.GLocaleKey("GPageProperties","text.size-custom")));$("<option></option>").attr("value","@infinite").text(i.GLocale.get(new i.GLocaleKey("GPageProperties","text.size-infinite"))).appendTo(n),t.append(n),u.getPresets().forEach(n=>{var o=$("<optgroup></optgroup>").attr("label",n.name),a=!1;n.layouts.forEach(t=>{if(t.unit===e){var r=t.includes;if(r)for(var s=0;s<r.length;s++){var l=r[s];$("<option></option>").attr("data-preset-id",n.id).attr("data-preset-locale-en",i.GLocale.get(l.localeClass,null,i.GLocaleLanguage.English)).attr("value",l.width+"x"+l.height+"x"+(t.dpi||72)).text("".concat(l.name).concat(l.displaySize?" "+l.width+"x"+l.height:"")).appendTo(o)}else $("<option></option>").attr("data-preset-id",n.id).attr("data-preset-locale-en",i.GLocale.get(t.localeClass,null,i.GLocaleLanguage.English)).attr("value",t.width+"x"+t.height+"x"+(t.dpi||72)).text("".concat(t.name).concat(t.displaySize?" "+t.width+"x"+t.height:"")).appendTo(o);a=!0}}),n.hidden&&o.css({display:"none"}),a&&t.append(o)})},_.prototype._styleEditorEventHandler=function(e){this._styleEdOn&&e.type===a.GStyleEdManager.EditorEventType.PrepareModifiedEvent&&(this._styleEditorChange=!0)},_.prototype._updateProperties=function(e){var t=this._document.getScene(),n=this._pages[0],o=t.isFixedSized(),r=i.GLocale.get(new i.GLocaleKey("GCommonNames","text.page"));gDesigner.isTouchEnabled()&&(r=r.toUpperCase());var s=r+" (";this._pages.length>1?s+=this._pages.length+" "+i.GLocale.get(new i.GLocaleKey("GCommonNames","text.pages")):s+=n.getProperty("name")||i.GLocale.get(new i.GLocaleKey("GCommonNames","text.active")),s+=")",this._toolbar.find("label:first-child").text(s),this._panel.find('input[data-property="bl"]').val(t.pointToString(n.getProperty("bl"),t.getOptimalDecimalsCount())),n.getProperty("bck")||(n.setProperty("bck",i.GRGBColor.WHITE),n.setProperty("bop",0));var l=n.getProperty("bck",!1,!1,!0);if(this._panel.find('[data-property-row="background"]').css("display",""),this._panel.find('[data-property="bck"]').css("display",l?"":"none").gPatternChooser("updateSettings",o?{types:[i.GColor,i.GGradient,i.GTexturePattern]}:{types:[i.GColor]}).gPatternChooser("setPattern",l).gPatternChooser("value",l).gPatternChooser("opacity",n.getProperty("bop",!1,!1,!0)),this._panel.find('input[data-property="bop"]').css("display",l?"":"none").gInputBox("value",i.GUtil.formatOpacity(100*n.getProperty("bop"))),o){var c=t.pointToString(n.getProperty("w"),t.getOptimalDecimalsCount())+"x"+t.pointToString(n.getProperty("h"),t.getOptimalDecimalsCount())+"x"+t.getProperty("dpi"),d=this._panel.find('select[data-property="preset-size"]');d.val(d.find('option[value="'+c+'"]').length?c:"@custom")}else this._panel.find('select[data-property="preset-size"]').val("@infinite");this._panel.find('input[data-property="w"]').gInputBox("value",t.pointToString(n.getProperty("w"),t.getOptimalDecimalsCount())),this._panel.find('input[data-property="h"]').gInputBox("value",t.pointToString(n.getProperty("h"),t.getOptimalDecimalsCount())),this._panel.find('input[data-property="mt"]').gInputBox("value",t.pointToString(n.getProperty("mt"),t.getOptimalDecimalsCount())),this._panel.find('input[data-property="mb"]').gInputBox("value",t.pointToString(n.getProperty("mb"),t.getOptimalDecimalsCount())),this._panel.find('input[data-property="ml"]').gInputBox("value",t.pointToString(n.getProperty("ml"),t.getOptimalDecimalsCount())),this._panel.find('input[data-property="mr"]').gInputBox("value",t.pointToString(n.getProperty("mr"),t.getOptimalDecimalsCount()));var u=this._panel.find('select[data-property="master-page"]').empty().append($("<option></option>")),p=-1,g=null;this._pages.forEach((function(e){var t=e.getMasterPages();t.length&&(null===g?g=t[0]:g!==t[0]&&(g=void 0))})),t.iteratePages(e=>{if(this._pages.indexOf(e)<0){p++;var t=$("<option></option>").data("page",e).attr("value",p).text(e.getProperty("name")).appendTo(u);g===e&&t.prop("selected",!0)}},!0),e&&(e.evtType===a.GEditor.ModifiedEvent.Type.Undo||e.evtType===a.GEditor.ModifiedEvent.Type.Redo)&&e.chooserOn&&e.pagePattern&&this._panel.find('[data-property="bck"]').find(".preview").trigger("click",null!==e.activeStopIdx?e.activeStopIdx:null),this.updatePropertiesAvailability(n)},_.prototype.updatePropertiesAvailability=function(e){var t=e.getProperty("plkt"),n=e.isFixedSized(),o=!1;if(t&&t&i.GBlock.ProgramLck.NoSizeChanges)this._panel.find('[data-property="bck"]').attr("disabled",!0),this._panel.find('input[data-property="bop"]').attr("disabled",!0),this._panel.find('input[data-property="w"]').attr("disabled",!0),this._panel.find('input[data-property="h"]').attr("disabled",!0),this._panel.find('button[data-property="rotate-canvas"]').attr("disabled",!0),this._panel.find('select[data-property="preset-size"]').attr("disabled",!0),this._panel.find('button[data-property="trim-canvas"]').attr("disabled",!0),this._manageClipButtonState(!1,!1),this._panel.find('input[data-property="bl"]').attr("disabled",!0),this._panel.find('input[data-property="mt"]').attr("disabled",!0),this._panel.find('input[data-property="mb"]').attr("disabled",!0),this._panel.find('input[data-property="ml"]').attr("disabled",!0),this._panel.find('input[data-property="mr"]').attr("disabled",!0),this._panel.find("[data-lock-margin]").attr("disabled",!0),this._panel.find('select[data-property="master-page"]').attr("disabled",!0);else{o=this._document&&this._document.isDocumentFromTemplate();var a=e.getProperty("bck",!1,!1,!0),r=this._panel.find('select[data-property="preset-size"]'),s=r.find('option[value="'+r.val()+'"]').data("preset-id"),l=o&&this._excludedPresets.includes(s);r.attr("disabled",l),this._panel.find('[data-property="bck"]').attr("disabled",!a),this._panel.find('input[data-property="bop"]').attr("disabled",!a),this._panel.find('input[data-property="w"]').attr("disabled",!1),this._panel.find('input[data-property="h"]').attr("disabled",!1),n?this._panel.find('button[data-property="rotate-canvas"]').attr("disabled",!1):this._panel.find('button[data-property="rotate-canvas"]').attr("disabled",!0),this._panel.find('button[data-property="trim-canvas"]').attr("disabled",!1),this._manageClipButtonState(gDesigner.getWindows().getActiveWindow()&&gDesigner.getWindows().getActiveWindow().getView()&&gDesigner.getWindows().getActiveWindow().getView().getViewConfiguration().paintMode===i.GScenePaintConfiguration.PaintMode.Output,n),this._panel.find('input[data-property="bl"]').attr("disabled",!1),this._panel.find('input[data-property="mt"]').attr("disabled",!1),this._panel.find('input[data-property="mb"]').attr("disabled",!1),this._panel.find('input[data-property="ml"]').attr("disabled",!1),this._panel.find('input[data-property="mr"]').attr("disabled",!1),this._panel.find("[data-lock-margin]").attr("disabled",!1);var c=!1,d=e.getScene();d&&f.CDR_ORIGIN_PROPERTY_NAME&&(c=!!d.getProperty(f.CDR_ORIGIN_PROPERTY_NAME,!0)),this._panel.find('select[data-property="master-page"]').attr("disabled",c).attr("i18n","text.plkt-no-size-changes")}var u=t&&t&i.GBlock.ProgramLck.NoSizeChanges?"text.plkt-no-size-changes":"text.infinite-canvas-no-size-changes";this._panel.find("[data-title]:not([default-data-title])").each((function(){const e=$(this);e.attr("default-data-title",e.attr("data-title")||"")})),this._panel.find(":disabled").each((function(){const e=$(this);l||(e.attr("default-data-title",e.attr("default-data-title")||""),e.attr("data-title",i.GLocale.get(new i.GLocaleKey("GCommonNames",e.attr("i18n")||u)).replace("%name",e.attr("default-data-title")||"")))})),this._panel.find(":not(:disabled)[default-data-title]").removeAttr("data-title").each((function(){const e=$(this);e.attr("default-data-title").length&&e.attr("data-title",e.attr("default-data-title"))}));const p=e=>$("<div></div>").addClass("tooltip-wrapper").attr("data-title",i.GLocale.get(new i.GLocaleKey("GCommonNames",e&&e.attr("i18n")||u)));this._panel.find(".tooltip-wrapper").remove(),this._panel.find("select:disabled").each((function(){l||p($(this)).insertAfter($(this))})),p().insertAfter(this._panel.find('[data-property="bck"][disabled]'))},_.prototype._manageClipButtonState=function(e,t){this._clipContentButton&&(t||this._clipContentButton.hasClass("g-disabled")?t&&(this._clipContentButton.hasClass("g-disabled")&&(this._clipContentButton.removeAttr("disabled"),this._clipContentButton.removeClass("g-disabled")),e?this._clipContentButton.addClass("g-active"):this._clipContentButton.removeClass("g-active")):(this._clipContentButton.attr("disabled",!0),this._clipContentButton.addClass("g-disabled"),this._clipContentButton.removeClass("g-active")))},_.prototype._assignProperty=function(e,t,n){this._assignProperties([e],[t],n)},_.prototype._assignProperties=function(e,t,n,o,a){this._ownChange=!0;var r=this._document.getEditor();r.beginTransaction();try{this._pages.forEach((function(n){var o=e,r=t;a&&(o=e.slice(),r=t.slice(),n.getProperty("bck")instanceof i.GColor||(o.push("bck"),r.push(i.GRGBColor.WHITE),o.push("bop"),r.push(1)));n.setProperties(o,r)}))}finally{r.commitTransaction(n,o||null),this._ownChange=!1}},_.prototype.toString=function(){return"[Object GPageProperties]"},e.exports=_},function(e,t,n){"use strict";var o=n(14),i=n(13),a=n(1),r=o(n(16)),s=n(185);const l=n(27);class c extends l{getId(){return c.ID}getTitle(){return c.TITLE}getCategory(){return r.default.CATEGORY_EDIT}getShortcut(){return[i.GKey.Constant.OPTION,"R"]}isVisible(){return!1}execute(){const e=gDesigner.getLeftSidebars().getActiveSidebar(),t=gDesigner.getLeftSidebars().getSidebar(s.SidebarsIds.GOutlineSidebar),n=t.getLayerPanel(),{currentFocus:o}=n.data("glayerpanel");if(o&&e===t.getId()){const e=n.gLayerPanel("getTitleOfLayer",$(o.row));e.gAutoEdit("open",e.data("gautoedit"))}}toString(){return"[Object GRenameLayerAction]"}}c.ID="edit.rename-layer",c.TITLE=new a.GLocaleKey("GRenameLayerAction","title"),e.exports=c},function(e,t,n){"use strict";var o=n(14),i=n(1),a=n(13),r=o(n(27)),s=o(n(16)),l=n(185);class c extends r.default{constructor(e){super(),this._type=e,this._title=new i.GLocaleKey("GChangeActivePageAction","title.".concat(this._type))}getId(){return"".concat(c.ID,".").concat(this._type)}getTitle(){return this._title}getCategory(){return s.default.CATEGORY_VIEW}isVisible(){return!1}getShortcut(){const e=[a.GKey.Constant.META,a.GKey.Constant.OPTION];switch(this._type){case c.Type.Next:return e.concat(a.GKey.Constant.DOWN);case c.Type.Previous:return e.concat(a.GKey.Constant.UP);default:return null}}getAdditionalShortcuts(){switch(this._type){case c.Type.Next:return[a.GKey.Constant.PAGE_DOWN];case c.Type.Previous:return[a.GKey.Constant.PAGE_UP];default:return null}}execute(){const e=gDesigner.getLeftSidebars(),t=e&&e.getSidebar(l.SidebarsIds.GOutlineSidebar),n=gDesigner.getActiveDocument(),o=n&&n.getScene();if(t&&o){const e=this.getNextPage(o);t.changeActivePage(e)}}getNextPage(e){const t=e.getActivePage();for(let e=this._getNextPageAccordingToType(t);null!==e;e=this._getNextPageAccordingToType(e))if(e instanceof i.GPage)return e;return null}_getNextPageAccordingToType(e){switch(this._type){case c.Type.Next:return e.getNext();case c.Type.Previous:return e.getPrevious();default:return null}}toString(){return"[Object GChangeActivePageAction]"}}c.ID="view.change-active-page",c.Type={Next:"next",Previous:"previous"},e.exports=c},function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=o(n(16)),r=o(n(27));const s="designer.settings.enhanced-tooltips.enabled";let l=!0;function c(){gContainer.getProperty(s).then(e=>{"boolean"==typeof e&&(l=e)})}i.GObject.inherit(c,r.default),c.ID="help.tooltip-visibility",c.TITLE=new i.GLocaleKey("GEnhancedTooltipsAction","title"),c.GroupID="help/learn",c.StoragePropertyName=s,c.prototype.getId=function(){return c.ID},c.prototype.getTitle=function(){return i.GLocale.get(c.TITLE)},c.prototype.getCategory=function(){return a.default.CATEGORY_HELP_LEARN},c.prototype.getGroup=function(){return c.GroupID},c.prototype.isCheckable=function(){return!0},c.prototype.isChecked=function(){return l},c.prototype.isEnabled=function(){return!0},c.prototype.execute=function(){l=!l,gContainer.setProperty(s,l)},c.prototype.statsValue=function(){return"".concat(c.ID,".").concat(l?"on":"off")},c.prototype.toString=function(){return"[Object GEnhancedTooltipsAction]"},e.exports=c},function(e,t,n){"use strict";n(17),n(89),n(7),n(18),n(29),n(231),n(84),n(28),n(22);var o=n(1);const{TRANSLATION_MANAGER:i}=n(9);function a(){}o.GObject.inherit(a,o.GObject),a.prototype._translationBase=null,a.prototype.getProjectsDescription=function(){return this._translationBase.getMapped().map(e=>e.project)},a.prototype.loadProjectTranslations=function(e){if(!o.GTranslation.Projects.hasOwnProperty(e))throw Error("Can't load translations, invalid project!");this._project=e,this._translations=this._translationBase.getByProject(e),this._classesMap=Object.keys(this._translations.find(e=>e.keyValue===o.GLocaleLanguage.English).translations)},a.prototype.getActiveProject=function(){return this._project},a.prototype._translations=null,a.prototype._project=null,a._CSV_SEPARATOR="|||",a.prototype.init=function(){return this._translationBase=new o.GTranslation,this.loadProjectTranslations(o.GTranslation.Projects.Designer),this._localeLanguage=o.GLocaleLanguage,this.isConsideringExtension()&&o.GLocale.enableExtension(),Promise.resolve()},a.prototype.getTranslationByKey=function(e){return this._translations.find(t=>t.keyValue===e)},a.prototype._clone=function(e){return JSON.parse(JSON.stringify(e))},a.prototype.getTranslationCopy=function(e){return this._clone(this.getTranslationByKey(e))},a.FormatTypes={CSV:"CSV"},a.prototype.import=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.FormatTypes.CSV,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(t){case a.FormatTypes.CSV:return this._handleCSVImport(e).then(e=>this.applyTranslationPatch(e,n))}},a.prototype.applyTranslationPatch=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n=t?this._translations:this._clone(this._translations);return e.forEach(e=>{var t=n.find(t=>t.language===e.language);let i=e.translations;Object.keys(i).forEach(e=>{Object.keys(i[e]).forEach(n=>{t.translations[e][n]=i[e][n]})});let a=e.translationsExtended;a&&Object.keys(a).forEach(e=>{if(0===Object.keys(a[e]).length)delete t.translationsExtended[e];else{t.translationsExtended||(t.translationsExtended={}),t.translationsExtended[e]||(t.translationsExtended[e]={}),Object.keys(a[e]).forEach(n=>{t.translationsExtended[e][n]=a[e][n]})}}),t.translationsExtended&&0===Object.keys(t.translationsExtended).length&&delete t.translationsExtended;var r=this._clone(e);delete r.translations,delete r.translationsExtended,t=o.GUtil.extend(t,r)}),Promise.resolve(n)},a.prototype.export=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.FormatTypes.CSV,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(e){case a.FormatTypes.CSV:return this._exportAsCSV({language:t,onlyEmpty:n})}},a.prototype.getMetaData=function(){return Promise.resolve(JSON.stringify(this._translations,null,4))},a.prototype._exportAsCSV=function(e){let{language:t=null,onlyEmpty:n=!1}=e;const o=function(e){return e&&e.replace(/\r?\n|\r/g,"")||""};var i=null!=t&&!isNaN(t)&&this._translations.filter(e=>e.keyValue===t)||this._translations,r=[];const s=this._translations.find(e=>e.isDefault);return i.forEach(e=>{Object.keys(e.translations).forEach(t=>{Object.keys(e.translations[t]).forEach(i=>{var l;this.isConsideringExtension()&&(l=e.translationsExtended&&e.translationsExtended[t]&&e.translationsExtended[t][i]),n&&""!==e.translations[t][i].trim()||r.push([e.language,t,i,o(n?s.translations[t][i]:e.translations[t][i]),o(l)].join(a._CSV_SEPARATOR))})})}),Promise.resolve(r.join("\r\n"))},a.prototype._handleCSVImport=function(e){var t=e=>e.length>=4,n=[];return new Promise((i,r)=>{if(e){var s=e.split(/\r?\n/);if(s.length<1)return r("No rows were found!");for(let e=0;e<s.length;e++){var l=s[e],c=l.split(a._CSV_SEPARATOR);if(!t(c))return r("Invalid number of columns on row "+(e+1)+(l.trim().length?", content '"+l.substr(0,30)+"...'":", is empty"));var[d,u,p,g,h]=c;if(!o.GLocaleLanguage.hasOwnProperty(d))return r("Language not available ('".concat(d,"'), row ").concat(e+1,"!"));if(!this._classesMap.find(e=>e===u))return r("Reference to UI not available ('".concat(u,"')!, row ").concat(e+1));var f=this._translations.find(e=>e.language===d.trim());if(f){var m=n.find(e=>e.language===d);m||(m={language:d,translations:{}},n.push(m)),f.translations[u]&&(m.translations[u]||(m.translations[u]={}),f.translations[u].hasOwnProperty(p)&&(m.translations[u][p]=g,h&&this.isConsideringExtension()&&(m.translationsExtended||(m.translationsExtended={}),m.translationsExtended[u]||(m.translationsExtended[u]={}),m.translationsExtended[u][p]=h)))}}return i(n)}})},a.prototype.getTranslationRealName=function(e){var t=this._translations.find(t=>t.keyValue===e);return t?t.realName:null},a.prototype.createNewLanguage=async function(e,t,n){return new Promise((o,i)=>{var a=this.getTranslationTemplate();return a.language=e,a.realName=t,a.abbreviation=n,a.keyValue=this._localeLanguage.hasOwnProperty(e)?this._localeLanguage[e]:Math.max(...Object.values(this._localeLanguage))+1,this._translations.push(a),this._localeLanguage.hasOwnProperty(e)||(this._localeLanguage[e]=a.keyValue),o(a)})},a.prototype.getTranslationTemplate=function(){var e=this.getTranslationCopy(this._localeLanguage.Default);return e.keyValue=null,e.language=null,e.isDefault=!1,e.isAvailable=!0,e.abbreviation=null,Object.keys(e.translations).forEach(t=>{Object.keys(e.translations[t]).forEach(n=>{e.translations[t][n]=""})}),e.translationsExtended&&Object.keys(e.translationsExtended).forEach(t=>{Object.keys(e.translationsExtended[t]).forEach(n=>{e.translationsExtended[t][n]=""})}),e},a.prototype.isConsideringExtension=function(){return!!i.CONSIDER_EXTENSION},e.exports=a},function(e,t,n){"use strict";var o=n(14),i=n(13),a=n(1),r=o(n(16)),s=o(n(27)),l=n(185);class c extends s.default{constructor(e){super(),this._type=e,this._title=new a.GLocaleKey("GCycleThroughLayersAction","title.".concat(this._type))}getId(){return"".concat(c.ID,".").concat(this._type)}getTitle(){return this._title}getCategory(){return r.default.CATEGORY_VIEW}getShortcut(){switch(this._type){case c.Type.Next:return[i.GKey.Constant.TAB];case c.Type.Previous:return[i.GKey.Constant.SHIFT,i.GKey.Constant.TAB];default:return null}}isVisible(){return!1}execute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.Mode.Level;const t=gDesigner.getLeftSidebars().getActiveSidebar(),n=gDesigner.getLeftSidebars().getSidebar(l.SidebarsIds.GOutlineSidebar),o=n.getLayerPanel(),i=o.gLayerPanel("getCurrentFocusedNode");if(!i||t!==n.getId())return;const r=this._getNextNodeInIteration(e,i);if(r){const e=o.gLayerPanel("getItem",i),t=o.gLayerPanel("getItem",r);e.removeFlag(a.GNode.Flag.Selected),t.setFlag(a.GNode.Flag.Selected),o.gLayerPanel("setCurrentFocusedNode",r),o.gLayerPanel("relayout")}}_getNextNodeInIteration(e,t){switch(e){case c.Mode.Level:return this._getNextNodeOfCurrentLevel(t);case c.Mode.Focus:return this._getNextFocusableNode(t);default:return null}}_getNextNodeOfCurrentLevel(e){switch(this._type){case c.Type.Next:return e.next||e.parent.firstChild;case c.Type.Previous:return e.previous||e.parent.lastChild;default:return null}}_getNextFocusableNode(e){switch(this._type){case c.Type.Next:return e.getNextFocusableNode();case c.Type.Previous:return e.getPreviousFocusableNode();default:return null}}toString(){return"[Object GCycleThroughLayersAction]"}}c.ID="view.cycle-through-layers",c.Type={Next:"next",Previous:"previous"},c.Mode={Focus:"focus",Level:"level"},e.exports=c},function(e,t,n){"use strict";var o=n(14),i=n(1),a=n(13),r=o(n(16)),s=o(n(1257)),l=n(185);class c extends s.default{getId(){return c.ID}getTitle(){return c.TITLE}getCategory(){return r.default.CATEGORY_MODIFY}isVisible(){return!1}getShortcut(){return[a.GKey.Constant.META,a.GKey.Constant.OPTION,a.GKey.Constant.A]}isEnabled(){return gDesigner.getRightSidebars().getActiveSidebar()===l.SidebarsIds.GInspectorSidebar}toString(){return"[Object GChangeAnchorPointsJointTypeMainAction]"}}c.ID="modify.change-anchor-points-joint-type",c.TITLE=new i.GLocaleKey("GChangeAnchorPointsJointTypeMainAction","title"),e.exports=c},function(e,t,n){"use strict";n(3);var o=n(1);function i(){}o.GObject.inherit(i,o.GEvent),i.prototype.message=null,i.prototype.toString=function(){return"[Object GUnloadEvent]"},e.exports=i},function(e,t,n){"use strict";var o=n(1);function i(e,t){this.type=e,this.data=t}o.GObject.inherit(i,o.GEvent),i.Type={OpenInAppLink:1},i.prototype.type=null,i.prototype.data=null,e.exports=i},function(e,t,n){"use strict";n(7),n(183);var o=n(45),i=n(1);const{gApi:a}=n(9),r=n(377),s=n(203),l=n(78);function c(e){this._document=e,this._currentLock=null,this._openingInlineEditor=!1,this._alreadyRequestedAccess=!1,this._document.addEventListener(r,this._collaborationEvent,this,null,!0);const t=this._document.getEditor();t&&t.addEventListener(o.GEditor.InlineEditorEvent,this._inlineEditorEvent,this,null,!0)}c.StatusChangedEvent=function(e){this.status=e},i.GObject.inherit(c.StatusChangedEvent,i.GEvent),c.StatusChangedEvent.prototype.status=null,c.Status={Initial:0,Editing:1,Finished:2,Previewing:3,Previewed:4,Sending:5,UpdateAvailable:6,Updating:7},c.LockUpdateEvent=function(e){this.lock=e},i.GObject.inherit(c.LockUpdateEvent,i.GEvent),c.LockUpdateEvent.prototype.lock=null,c.prototype._status=c.Status.Initial,c.prototype._openingInlineEditor=!1,c.prototype._currentLock=null,c.prototype._alreadyRequestedAccess=!1,c.prototype.detach=function(){this._document.removeEventListener(r,this._collaborationEvent,this);const e=this._document.getEditor();e&&e.removeEventListener(o.GEditor.InlineEditorEvent,this._inlineEditorEvent,this)},c.prototype.getStatus=function(){return this._status},c.prototype.getCurrentLock=async function(){return this._currentLock||(this._currentLock=await a.lock.get(this._document.getId()).catch(()=>null),this._currentLock&&this._fireLockUpdateEvent()),this._currentLock},c.prototype.acquireLock=async function(){return await this.canLock()?(this._currentLock||(this._currentLock=await a.lock.acquire(this._document.getId()).catch(()=>null),this._currentLock&&this._fireLockUpdateEvent()),this._currentLock):null},c.prototype.releaseLock=function(){return a.lock.release(this._document.getId()).then(()=>{this._currentLock=null})},c.prototype.canLock=async function(){return!await this.getCurrentLock()||this.isLockedByMe()},c.prototype.isLockedByMe=function(){if(!this._currentLock)return!1;const e=gDesigner.getSyncUser();return this._currentLock.isLockedBy(e)},c.prototype.reloadDocument=async function(){this._updateStatus(c.Status.Updating);const e=t=>{t.status!==l.Loading&&(this._document.removeEventListener(s,e),this._document.unlock(),this.resetTextEditing())};await this.releaseLock(),this._document.addEventListener(s,e),this._document.lock(),this._document.reload()},c.prototype.resetTextEditing=function(){this._updateStatus(c.Status.Initial)},c.prototype.finishTextEditing=async function(){this._closeInlineEditor(),this._updateStatus(c.Status.Finished)},c.prototype.backToTextEditing=async function(){this._closeInlineEditor(),this._updateStatus(c.Status.Editing)},c.prototype.sendChanges=async function(){return this._closeInlineEditor(),this._document.lock(),this._updateStatus(c.Status.Sending),new Promise(async(e,t)=>{this._document.storeToCloud(this._document.getScene(),async()=>{await this.releaseLock().catch(e=>console.error(e)),e()},t,!0,{collabTextUpdate:!0,sendEmail:!0})}).then(async()=>{await gDesigner.updateCollabTextPreviews().catch(e=>console.error(e)),this.resetTextEditing()}).catch(e=>{throw this.finishTextEditing(),this._document.updateStatus(l.SaveCancelled),this._document.updateStatus(l.Ready),e}).finally(()=>{this._document.unlock()})},c.prototype.previewChanges=async function(){return this._closeInlineEditor(),this._updateStatus(c.Status.Previewing),this._document.lock(),gDesigner.updateCollabTextPreviews().then(()=>{this._updateStatus(c.Status.Previewed)}).catch(()=>{this.finishTextEditing()}).finally(()=>{this._document.unlock()})},c.prototype.requestAccess=async function(){return a.lock.request(this._document.getId()).then(()=>this._alreadyRequestedAccess=!0)},c.prototype.hasAlreadyRequestedAccess=function(){return this._alreadyRequestedAccess},c.prototype._updateStatus=function(e){e!==this._status&&(this._status=e,this._document.hasEventListeners(c.StatusChangedEvent)&&this._document.trigger(new c.StatusChangedEvent(this._status)))},c.prototype._closeInlineEditor=function(){const e=this._document.getEditor();e&&(e.closeInlineEditor(),e.clearSelection())},c.prototype._inlineEditorEvent=function(e){switch(e.type){case o.GEditor.InlineEditorEvent.Type.TryOpen:this._tryOpenInlineEditor(e)}},c.prototype._tryOpenInlineEditor=async function(e){if(!this._openingInlineEditor&&this._document.isCollaborativeTextEditing())if(e.editor.disableInlineEditingSupport(),e.editor instanceof o.GCollabTextEditor){this._openingInlineEditor=!0;try{gDesigner.toggleLoading(!0);if(!await this.acquireLock())return void this._closeInlineEditor();e.editor.enableInlineEditingSupport();const t=this._document.getEditor();if(t){const n=this._document.getActiveWindow(),o=n&&n.getView();o&&t.openInlineEditor(e.editor.getElement(),o)&&this._updateStatus(c.Status.Editing)}}finally{this._openingInlineEditor=!1,gDesigner.toggleLoading(!1)}}else this._closeInlineEditor()},c.prototype._fireLockUpdateEvent=function(){this._document.hasEventListeners(c.LockUpdateEvent)&&this._document.trigger(new c.LockUpdateEvent(this._currentLock))},c.prototype._collaborationEvent=function(e){if(e.type===r.Type.LockUpdated)this._currentLock=e.data,this._fireLockUpdateEvent();else if(e.type===r.Type.FileUpdate){if(e.data&&e.data.from===gDesigner.getSyncUser().id)return;this._updateStatus(c.Status.UpdateAvailable)}},e.exports=c},function(e,t,n){"use strict";e.exports={CheckingForUpdate:"checking-for-update",UpdateAvailable:"update-available",UpdateNotAvailable:"update-not-available",Error:"error",DownloadProgress:"download-progress",UpdateDownloaded:"update-downloaded",CommandInstallUpdate:"install-update",CommandDownloadUpdate:"donwload-update",CommandCheckForUpdates:"check-for-updates"}},function(e,t,n){"use strict";n(26),n(7);const o=n(323),i=n(1314),{gApi:a,PurchaseStatus:r}=n(9),{IS_TRUNK:s}=n(217);let l;class c{static getInstance(){return l||(l=new c),l}waitForPurchase(){return this.cancelPurchase(),this._promiseCapabilities={},new Promise((e,t)=>{Object.assign(this._promiseCapabilities,{resolve:e,reject:t}),this._ws=new a.WebSocketClient,this._ws.connect("/payload"),this._ws.on("payload",async t=>{try{const{data:n}=t;await this._tryCheckLicense(),await this._tryFireEvent(n),n.licenseHasBeenUpgraded=this._shouldFireUserCompletedPurchaseEvent(n),e(n)}finally{this._ws.close()}})})}cancelPurchase(){this._promiseCapabilities&&this._promiseCapabilities.resolve&&this._promiseCapabilities.resolve(),this._ws&&this._ws.close()}async _tryCheckLicense(){try{await o.checkLicense()}catch(e){console.error("GLicenseManager.checkLicense",e)}}async _tryFireEvent(e){try{this._shouldFireUserCompletedPurchaseEvent(e)&&i.fireEvent(i.Events.USER_COMPLETED_PURCHASE_EVENT)}catch(e){console.error("GTMHelper.fireEvent",e)}}_shouldFireUserCompletedPurchaseEvent(e){const{statusId:t}=e;return!(!s||t!==r.SuccessfulTestOrder)||t===r.Paid}}e.exports=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildLayerItemContainer=function(e,t,n,a){var r=$(e);r.attr("draggable",!1),r.gPro({pro:t instanceof o.GElement&&!!t.getProperty("_pro",!0)});var s=$("<span></span>").addClass("layer-title-group").toggleClass("g-selected",t.hasFlag(o.GNode.Flag.Selected));s.appendTo(r),r.on("mouseenter",(function(e){t.hasFlag(o.GElement.Flag.Hidden)||t.setFlag(o.GNode.Flag.Highlighted)})).on("mouseleave",(function(e){t.hasFlag(o.GElement.Flag.Hidden)||t.removeFlag(o.GNode.Flag.Highlighted)}));var l=t.getProperty("name");l=l||t.getNodeNameTranslated();var c=$("<span></span>").html(l);c.addClass("layer-title").appendTo(s);var d=function(e){return e instanceof o.GSymbol&&!!e.getMasterSymbol()};(d(t)||t.findParent(d))&&r.addClass("g-symbol-row");r.toggleClass("g-active",t.hasFlag(o.GNode.Flag.Active)).toggleClass("g-has-selection",n).toggleClass("g-selected",t.hasFlag(o.GNode.Flag.Selected));var u,{icon:p,overlayIcon:g}=i(t,a);p&&("<svg"===p.substr(0,4)?u=$("<span></span>").addClass("layer-icon").append($(p).addClass("layer-icon").attr({width:"16px",height:"16px"}).css({verticalAlign:"middle",paddingLeft:"1px",opacity:"initial"})).insertBefore(c):(gDesigner.isTouchEnabled()&&(p+="-small"),u=$("<span></span>").addClass("layer-icon "+p).css({opacity:"initial"}).insertBefore(c)));g&&u&&g.appendTo(u);return{container:r,title:c,titleGroup:s}},t.getIconByLayerType=i,t.getLayerOrItemStatus=function(e){var t=!1,n=null,i=!1,a=e;for(;(a=a.getParent())&&!(a instanceof o.GScene);){a instanceof o.GBlock&&(t=!1===a.getProperty("vis")||t,(s=a.getProperty("lkt"))&&(n?s===o.GBlock.LockType.Full&&(n=s):n=s)),a instanceof o.GLayer&&(i=!0===a.getProperty("otl")||i)}var r=t||!1===e.getProperty("vis"),s=n||e.getProperty("lkt"),l=i||e instanceof o.GLayer&&e.getProperty("otl"),c=!1;if(e.hasMixin(o.GNode.Container))for(var d=e.getFirstChild();null!==d&&!c;d=d.getNext())d instanceof o.GItem&&d.hasFlag(o.GNode.Flag.Selected)&&(c=!0);return{parentHidden:t,parentLockType:n,parentOutlined:i,isHidden:r,lockType:s,isOutlined:l,hasSelection:c}};var o=n(1);function i(e,t){var n=null,i=null;if(e instanceof o.GLayer?n=t?"gravit-icon-folderopen":"gravit-icon-folderclose":e instanceof o.GSlice?n="gravit-icon-slice":e instanceof o.GGroup?n="gravit-icon-group":e instanceof o.GShape?e instanceof o.GPathsGraph?n="gravit-icon-pathgraph3":e instanceof o.GSimpleShape?n=e.getIcon():e instanceof o.GText?(n="gravit-icon-textbox",e.isFakeText()&&(i=$("<div></div>").addClass("layer-icon-overlay"))):e instanceof o.GImage?n="gravit-icon-picture":e instanceof o.GEllipse?n="gravit-icon-ellipse":e instanceof o.GRectangle?n="gravit-icon-rectangle":e instanceof o.GPath||e instanceof o.GCompoundPath?n="gravit-icon-pen":e instanceof o.GPolygon?n="gravit-icon-polygon":e instanceof o.GCompoundShape&&(n="gravit-icon-merge-union"):e instanceof o.GSymbol&&(n="gravit-icon-symbol",e.isMaster()?n+="master":e.getMasterSymbol()?n+="instance":n+="detached"),e instanceof o.GShape&&e.getParent()instanceof o.GCompoundShape&&e.getPrevious())switch(e.getProperty("bool")){case o.GVertexPolyBoolean.OR:n="gravit-icon-merge-union";break;case o.GVertexPolyBoolean.AND:n="gravit-icon-merge-intersect";break;case o.GVertexPolyBoolean.SUB:n="gravit-icon-merge-subtract";break;case o.GVertexPolyBoolean.XOR:n="gravit-icon-merge-difference"}return{icon:n,overlayIcon:i}}},function(e,t,n){"use strict";const{GLocale:o,GLocaleKey:i}=n(1),a=n(862);e.exports={createAdditionalMentions:function(){return{MENTION_ALL_REVIEWERS:new a({name:o.get(new i("GAnnotationPanel","text.additional-collaborators-all-reviewers-name")),showText:o.get(new i("GAnnotationPanel","text.additional-collaborators-all-reviewers-show-text")),id:"@reviewers",avatar:"assets/icon/notification-icon.svg",fontWeight:"bold",type:"contact",role:o.get(new i("GAnnotationPanel","text.additional-collaborators-all-reviewers-role")),email:"",additional:!0}),MENTION_ALL_APPROVERS:new a({name:o.get(new i("GAnnotationPanel","text.additional-collaborators-all-approvers-name")),showText:o.get(new i("GAnnotationPanel","text.additional-collaborators-all-approvers-show-text")),id:"@approvers",avatar:"assets/icon/notification-icon.svg",fontWeight:"bold",type:"contact",role:o.get(new i("GAnnotationPanel","text.additional-collaborators-all-approvers-role")),email:"",additional:!0}),MENTION_ALL_CO_AUTHORS:new a({name:o.get(new i("GAnnotationPanel","text.additional-collaborators-all-co-author-name")),showText:o.get(new i("GAnnotationPanel","text.additional-collaborators-all-co-author-show-text")),id:"@coauthors",avatar:"assets/icon/notification-icon.svg",fontWeight:"bold",type:"contact",role:o.get(new i("GAnnotationPanel","text.additional-collaborators-all-co-author-role")),email:"",additional:!0}),MENTION_ALL:new a({name:o.get(new i("GAnnotationPanel","text.additional-collaborators-all-name")),showText:o.get(new i("GAnnotationPanel","text.additional-collaborators-all-show-text")),id:"@all",avatar:"assets/icon/notification-icon.svg",fontWeight:"bold",type:"contact",role:o.get(new i("GAnnotationPanel","text.additional-collaborators-all-role")),email:"",additional:!0}),MENTION_OWNER:new a({name:o.get(new i("GAnnotationPanel","text.additional-collaborators-owner-name")),showText:o.get(new i("GAnnotationPanel","text.additional-collaborators-owner-show-text")),id:"@owner",avatar:"assets/icon/notification-icon.svg",fontWeight:"bold",type:"contact",role:o.get(new i("GAnnotationPanel","text.additional-collaborators-owner-role")),email:"",additional:!0})}}}},function(e,t,n){"use strict";function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this,{fileCache:!0,collaboratorsCache:!0},e)}n(26),n(3),o.NO_CACHE_INVALIDATION=Object.freeze(new o({fileCache:!1,collaboratorsCache:!1})),o.prototype.collaboratorsCache=!0,o.prototype.fileCache=!0,o.prototype.toString=function(){return"[Object GInvalidationOptions]"},e.exports=o},function(e,t,n){"use strict";n(7);var o=n(1);function i(e,t,n,o,i,a,r,s,l,c){this._container=e,this._renderer=t,this._nodeStyle=n,this._expandStyle=o,this._nodeClick=i,this._nodeExpand=a,this._upSpan1Style=r,this._upSpan2Style=s,this._downSpan1Style=l,this._downSpan2Style=c}i.GSimpleTreeNodeNamed=function(e){this.id=e},i.GSimpleTreeNodeNamed.prototype.id=-1,i.GSimpleTreeNodeNamed.prototype.virtualNode=!1,i.GSimpleTreeNodeNamed.prototype._depth=void 0,i.GSimpleTreeNodeNamed.prototype.isVisible=function(){return!0},i.EXPAND_ID=o.GUtil.uuid(),i.COLLAPSE_ID=o.GUtil.uuid(),i.prototype._container=null,i.prototype._renderer=null,i.prototype._nodeStyle=null,i.prototype._expandStyle=null,i.prototype._nodeClick=null,i.prototype._nodeExpand=null,i.prototype._upSpan1Style=null,i.prototype._upSpan2Style=null,i.prototype._downSpan1Style=null,i.prototype._downSpan2Style=null,i.prototype._updateCount=0,i.prototype._nodes=[],i.prototype._invalidation=null,i.prototype.refresh=function(){this.requestInvalidation()},i.prototype._checkTreeSanity=function(){return!0},i.prototype._isInvalidationBlocked=function(){return!0},i.prototype._beforeInvalidationStart=async function(e){},i.prototype._afterInvalidationEnd=function(e){},i.prototype.requestInvalidation=function(e,t){if(null===this._invalidation){var n=$(this._container);if(!this._checkTreeSanity())return;this._invalidation=setTimeout(()=>{if(this._isInvalidationBlocked())return this._invalidation=null,void this.requestInvalidation(500);this._beforeInvalidationStart(t).then(()=>{n.empty();let e=document.createDocumentFragment();for(let t=0;t<this._nodes.length;t++){let n=this._newNode(this._nodes[t]),o=this._renderer(this._nodes[t],n[0]);$(e).append(n),n.hasClass("last-row")&&$(e).append($("<div/>").addClass("last-row-division")),o&&o.length&&n.before(o)}n.append(e),this._afterInvalidationEnd(),this._invalidation=null})},e||1)}},i.prototype.expandAndFocus=function(){},i.prototype.beginUpdate=function(){this._updateCount++},i.prototype.endUpdate=function(e){this._updateCount=Math.max(0,this._updateCount-1),0===this._updateCount&&this.requestInvalidation(0,e)},i.prototype._newNode=function(e){return $("<div>").addClass(this._nodeStyle).attr("id",e.id).css("padding-left",25*e._depth).on("click",t=>{t.stopPropagation(),this._nodeClick(e)})},i.prototype.appendNode=function(e,t,n){var o=e?this._nodes.indexOf(e):0;if(o<0)console.error("no parent found");else if(this._nodes.indexOf(t)>=0)console.error("node already added");else{var i,a=e?e._depth:-1;if(t._depth=a+1,n)for(var r=i=e?o+1:0;r<this._nodes.length;r++){if(this._nodes[r]._depth<=a||this._nodes[r].virtualNode){i=Math.max(0,r-1);break}i=r}else i=e?o:0;var s=null;s=i>=this._nodes.length?this._nodes.length?this._nodes[this._nodes.length-1]:null:this._nodes[i],this.insertNodeAfter(s,t)}},i.prototype.prependNode=function(e,t){if((e?this._nodes.indexOf(e):0)<0)console.error("no parent found");else if(this._nodes.indexOf(t)>=0)console.error("node already added");else{var n=e?e._depth:-1;t._depth=n+1,this.insertNodeAfter(e,t)}},i.prototype.removeNode=function(e){var t=this._nodes.indexOf(e);if(!(t<0)){var n=$(this._container);n.find("#"+this._nodes[t].id).remove(),this._nodes.splice(t,1);for(var o=this._nodes[t];o&&e._depth<o._depth;)n.find("#"+o.id).remove(),this._nodes.splice(t,1),o=this._nodes[t]}},i.prototype.insertNodeAfter=function(e,t){var n=e?this._nodes.indexOf(e):this._nodes.length;if(n<0)console.error("no ref node found");else if(this._nodes.indexOf(t)>=0)console.error("node already added");else{var o=e?e._depth:0;if(void 0===t._depth)t._depth=o;else if(t._depth>o)return void this._nodes.splice(n+1,0,t);for(n+=1;this._nodes[n]&&(this._nodes[n]._depth>o||this._nodes[n].virtualNode&&(0===o||this._nodes[n]._depth<o));)n++;n>=this._nodes.length?this._nodes.push(t):this._nodes.splice(n,0,t)}},i.prototype.insertNodeBefore=function(e,t){var n=e?this._nodes.indexOf(e):-1;if(n<0)console.error("no ref node found");else if(this._nodes.indexOf(t)>=0)console.error("node already added");else{var o=e?e._depth:0;for(void 0===t._depth&&(t._depth=o);n>=0&&(this._nodes[n]._depth>o||this._nodes[n].virtualNode);)n--;n<0?this._nodes.unshift(t):this._nodes.splice(n,0,t)}},i.prototype.clean=function(){this._nodes=[],this.requestInvalidation()},i.prototype.isPendingInvalidation=function(){return null!==this._invalidation},i.prototype.refresh=function(){},e.exports=i},function(e,t,n){"use strict";var o=n(14);n(52),n(17),n(26),n(7),n(18),n(62),n(138),n(29),n(84),n(28),n(22);var i=n(9),a=n(861),r=n(1328),s=n(247),l=n(61),c=o(n(343)),d=o(n(1300)),u=o(n(862));const{GSystem:p,GLocale:g,GLocaleKey:h,GUtil:f,GComment:m,GAnnotation:y,GObject:v,GNode:_}=n(1),{NEW_COMMENT_READ_TIMEOUT:b,ANNOTATION_PERMANENT_LINK:w,IS_COREL:C}=((0,r.createAdditionalMentions)(),n(9)),x=n(1167),S=n(1143),E=n(419),{getAnnotationType:A}=n(34);function T(e){let{container:t,annotation:n,relatedNodesCount:o,sidebarActive:i,isLastRow:a,mentionData:r,onMouseEnter:s,onMouseLeave:l,onChange:c,onToggleState:d,onResolve:u,onReopen:p,onDelete:g,onCancel:h,onExpandClick:f,onCopyPermalinkClick:m,onAssignTo:y,mainAnnotObject:v,isCommentingEditingEnable:_,hasResolveAccess:b,hasReopenAccess:w}=e;this._container=t,this._annotation=n,this._relatedNodesCount=o,this._sidebarActive=i,this._isLastRow=a,this._onMouseEnter=s,this._onMouseLeave=l,this._onChange=c,this._onToggleState=d,this._onResolve=u,this._onReopen=p,this._onDelete=g,this._onCancel=h,this._onExpandClick=f,this._onCopyPermalinkClick=m,this._onAssignTo=y,this._mainAnnotObject=v,this._shouldAssign=!1,this._assignees=[],this._mentionsCollection=[],this._data=r.data,this._owner=r.owner,this._additionalMentions=r.additionalMentions,this._mentionData=r,this._isCommentingEditingEnable=_,this._hasResolveAccess=b,this._hasReopenAccess=w,this._init()}function G(e){if(13!==e.keyCode)return!1;if(p.operatingSystem!==p.OperatingSystem.OSX_IOS){if(!e.shiftKey)return!0}else{if(!e.altKey)return!0;if("keydown"===e.type){let t=$(e.target).val();$(e.target).val(t+"\n")}}return!1}function P(e){return t=>t.getFirstName()===e||t.getFullUserName()===e||t.getEmail()===e}function D(e){const t=(0,r.createAdditionalMentions)();return Object.values(t).find(t=>t.getUID()===e)}function L(e){return f.xss(e)}v.inherit(T,x),T.prototype._isRead=!1,T.prototype._isTypeResolved=!1,T.prototype._isTypeReopened=!1,T.prototype._isParentAnnotResolved=!1,T.prototype._init=function(){var e,t=this._container,n=this._annotation,o=A(this._annotation instanceof m?this._annotation._parent:this._annotation),i=this,r=gDesigner.getSyncUser(),s=c.default.isOwner(r,n),d=gDesigner.getApplicationManager();const u=this._isCommentingEditingEnable&&(this._hasResolveAccess||s),f=this._isCommentingEditingEnable&&(this._hasReopenAccess||s);var v=$("<span></span>").addClass("annotation-title-group").appendTo(t);t.on("mouseenter",this._onMouseEnter).on("mouseleave",this._onMouseLeave);var b=$("<div/>").addClass("email-and-role-tooltop").appendTo(v);gDesigner.getShareManager().getRoleNameByUserId(n.getProperty("uid")).then(e=>{b.gRichTooltip(l.GRichTooltipConfig.from({title:n.getProperty("email")||r.getEmail()||" ",description:e,forceShow:!0,middle:!1,flipHorizontal:!0,marginLeft:26}))});var x=n.getProperty("name");x=x||n.getProperty("login")||n.getProperty("email").split("@")[0]||g.get(new h("GAnnotationPanel","text.empty"));var T=$("<span></span>").html(L(x)).addClass("annotation-title").appendTo(b);gDesigner.getShareManager().getCollaboratorById(n.getProperty("uid")).then(e=>{const t=S.getUserDataFromAnnotAndUser(n,e||r);new S(t).build().addClass("g-user-comment-preview").insertBefore(T)});var P=new Date(n.getProperty("mtime")||n.getProperty("time")),D=g.toLocaleDate(P,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"});$("<span>").text("·").addClass("dot").appendTo(v),$("<span></span>").text(D).addClass("annotation-date").appendTo(v),this._annotationCommentContainer=$("<div/>").addClass("annotation-comment-container").appendTo(t),this._contentEditorButtons=$("<div>");var I=$("<span></span>").addClass("annotation-comment-content").css("userSelect","text").appendTo(this._annotationCommentContainer);if(n instanceof m)switch(this._updateParentAnnotResolvedStatus(n.getParent()),n.getProperty("type")){case m.Type.User:e=this._generateCommentContentHTML(n),I.html(e.html),this._updateReadUnreadStatus(v);break;case m.Type.Open:I.addClass("automatic").text(g.get(new h("GAnnotationPanel","text.re-opened"))),this._updateReadUnreadStatus(v),this._isTypeReopened=!0,this._isTypeResolved=!1;break;case m.Type.Close:I.addClass("automatic").text(g.get(new h("GAnnotationPanel","text.marked-as-resolved"))),this._isRead=!0,this._isTypeResolved=!0,this._isTypeReopened=!1}else this._updateParentAnnotResolvedStatus(n),e=this._generateCommentContentHTML(n),I.html(e.html),this._updateReadUnreadStatus(v);var k=e=>{((e=((e=a.replaceAdditionalCollabShowTextBeforeSend.call(this,e))||"").trim())||n.isEmptyTextAllowed())&&(this._onChange(e),this._shouldAssign&&this._assignees&&this._assignees.length&&i._onAssignTo(i._assignees))},O=$("<textarea></textarea>").appendTo(this._annotationCommentContainer).addClass("annotation-comment-editor").addClass("mention").on("click",(function(e){i.isEditMode()&&e.stopPropagation()})).on("blur",(function(){!i.isEditMode()||i._mentionsCollection&&i._mentionsCollection.length||(k(this.value),i.cancelEditMode())})).on("keydown",(function(e){i.isEditMode()&&G(e)&&e.preventDefault()})).on("keypress",(function(e){i.isEditMode()&&p.operatingSystem===p.OperatingSystem.OSX_IOS&&13===e.keyCode&&e.altKey&&e.preventDefault()})).on("keyup",(function(e){const t=O.parent().find(".mentions-autocomplete-list").data("assign");i.isEditMode()&&(G(e)&&!t?(k(this.value),i.cancelEditMode(),e.preventDefault()):27===e.keyCode&&(i.cancelEditMode(),i._onCancel()))}));if(O.mentionsInput({elastic:!1,onDataRequest:(e,t,n)=>{let o=this._data.filter(e=>e.getFullUserName().toLowerCase().includes(t.toLowerCase())||e.getEmail()&&e.getEmail().toLowerCase().includes(t.toLowerCase()));o.push(...this._additionalMentions),n.call(this,o)},onSelectItem:()=>{gDesigner.stats("commentdocker_mention_select-user",o)}}).on("input",(function(){a.showAssigneeRow.call(i,O),this.style.height=0,this.style.height=this.scrollHeight+"px"})),this._annotationCommentContainer.find(".mentions-autocomplete-list").delegate("li","mousedown",()=>{a.showAssigneeRow.call(this,O)}),this.setMentionOverlayBorderVisiblity(!1),this._onlyOneAssignee=$("<span>").addClass("only-one-assignee").html(1===this._mentionsCollection.length?this._mentionsCollection[0].name:"").css("display","none"),this._assigneeSelector=$("<div>").addClass("assignee-selector").css("display","none").append($("<select>").on("change",e=>{a.updateAssignee.call(this,$(e.target).val())})),this._assigneeCheckBox=$("<input>").attr("type","checkbox").prop("checked",this._shouldAssign).on("change",e=>{this._shouldAssign=$(e.target).prop("checked"),gDesigner.stats("commentdocker_mention_assign-user",o)}),this._assigneeRow=$("<div>").css("display","none").addClass("assignee-row-container").append($("<label>").addClass("label").addClass("assignee-row-label").append(this._assigneeCheckBox).append($("<span>").html(g.get(new h("GAnnotationPanel","text.assign-to")))).append(this._onlyOneAssignee).append(this._assigneeSelector)).appendTo(this._annotationCommentContainer),this._contentEditorButtons.appendTo(this._annotationCommentContainer).css("display","none").addClass("contenteditor-buttonrow").append($("<button>").addClass("annotations-cancelcomment").text(g.get(new h("GAnnotationPanel","text.cancel"))).on("mousedown",e=>{e.preventDefault()}).on("click",e=>{e.stopPropagation(),gDesigner.stats("commentdocker_cancel-btn",o),i.cancelEditMode(),i._onCancel()})).append($("<button>").addClass("annotations-addcomment").text(g.get(new h("GAnnotationPanel","text.fill-contents"))).on("mousedown",e=>{e.preventDefault()}).on("click",e=>{e.stopPropagation(),gDesigner.stats(n.getProperty("text").trim().length>0?"commentdocker_edit-btn":"commentdocker_add-btn",o),k(O.val()),i.cancelEditMode()})),$(t).toggleClass("g-active",n.hasFlag(_.Flag.Active)).toggleClass("g-selected",n.hasFlag(_.Flag.Selected)||n instanceof m&&n.getParent().hasFlag(_.Flag.Selected)),this._relatedNodesCount>1)this.isCollapsible()?(this._container.addClass("collapsible"),this._expandIcon=$("<div></div>").addClass(this._mainAnnotObject.expanded?"gravit-icon-down ":"gravit-icon-right").addClass("annotation-collapse").click(this._onExpandClick),v.prepend(this._expandIcon)):this._mainAnnotObject.expanded?t.show():t.hide();else{const e=$("<div></div>").addClass("annotation-collapse-empty");v.prepend(e)}(n.hasFlag(_.Flag.Selected)||n instanceof m&&n.getParent().hasFlag(_.Flag.Selected))&&(this.setCollapseState(!0),this.setVisiblity(!0));var F=$("<span>").addClass("annotation-action-group").appendTo(v);if(this._isCommentingEditingEnable&&n.hasMixin(y)){var R=n.getProperty("rsv"),M=!1,N="";R?(M=!0,N=f?g.get(new h("GAnnotationPanel","text.reopen")):g.get(new h("GAnnotationPanel","text.marked-as-resolved"))):(M=!1,N=g.get(new h("GAnnotationPanel","text.resolve"))),!R&&!f||(n.getProperty("asgn")||[]).length||$("<span>").addClass("icon "+(R?"gravit-icon-resolved":"gravit-icon-resolve")).addClass(M?"visible":"").addClass("annotation-action").attr("data-title",N).click(e=>{e.stopPropagation(),d.hasAccess(E.RESOLVE_COMMENT_ANNOTATION).then(e=>{e||s?this._onToggleState(n):d.hasAccess(E.REOPEN_COMMENT_ANNOTATION).then(e=>{(e||s)&&this._onToggleState(n)})})}).appendTo(F)}var B=$("<span>").append($("<span></span>").addClass("gravit-annotation-icon-menu")).addClass("annotationpanel-menubutton").addClass("annotation-action"),U=$("<div></div>").addClass("annotations-menu").gOverlay({releaseOnClose:!1,closeCallback:()=>{B.removeClass("g-active")}});if(t.data("annotmenu",U),n.hasMixin(y)&&(u||f)&&!(n.getProperty("asgn")||[]).length&&(n.getProperty("rsv")?U.append($("<label>").append($("<span>").addClass("icon gravit-icon-reopen").addClass("annot-menu-icon")).on("click",e=>{e.stopPropagation(),gDesigner.stats("commentdocker_option_reopen",o),U.gOverlay("close"),this._onReopen(n)}).append($("<span>").text(g.get(new h("GAnnotationPanel","text.reopen"))))):U.append($("<label>").append($("<span>").addClass("icon ".concat(C?"gravit-icon-resolved":"gravit-icon-resolve")).addClass("annot-menu-icon")).on("click",e=>{e.stopPropagation(),gDesigner.stats("commentdocker_option_resolve",o),U.gOverlay("close"),this._onResolve(n)}).append($("<span>").text(g.get(new h("GAnnotationPanel","text.resolve")))))),s&&(n.hasMixin(y)&&!n.getProperty("rsv")||n instanceof m&&!n.getParent().getProperty("rsv"))&&n.isFillingCompleted()){const e=n.getProperty("text").trim().length>0;this._isCommentingEditingEnable&&U.append($("<label>").append($("<span>").addClass("icon gravit-icon-edit").addClass("annot-menu-icon")).on("click",function(t){t.stopPropagation();let a=e?"commentdocker_option_edit":"commentdocker_option_add";gDesigner.stats("".concat(a),o),i._startEditMode(i._annotationCommentContainer,n.getProperty("text").trim().length>0,n.getProperty("text"),I.outerWidth(),I.outerHeight(),i._data,i._additionalMentions),U.gOverlay("close")}.bind(I)).append($("<span>").text(g.get(new h("GAnnotationPanel",e?"text.edit-comment":"text.add-comment")))))}s&&this._isCommentingEditingEnable&&U.append($("<label>").append($("<span>").addClass("icon gravit-icon-trash").addClass("annot-menu-icon")).on("click",e=>{e.stopPropagation(),gDesigner.stats("commentdocker_option_delete",o),U.gOverlay("close"),this._onDelete(n)}).append($("<span>").text(g.get(new h("GAnnotationPanel","text.delete")))));const j=gDesigner.getActiveDocument();w&&j&&j.isShareable()&&U.append($("<label/>").append($("<span/>").addClass("icon gravit-icon-copy-annot").addClass("annot-menu-icon")).append($("<span>").text(g.get(new h("GAnnotationPanel","text.copy-permalink")))).on("click",async e=>{e.stopPropagation(),gDesigner.stats("commentdocker_option_copy-permalink",o);const t=$("<span/>").addClass("g-loading").appendTo($(e.target).closest("label"));try{await this._onCopyPermalinkClick(this._annotation)}finally{t.remove(),U.gOverlay("close")}})),(n.hasMixin(y)||n.getProperty("type")===m.Type.User)&&U.find(".annot-menu-icon").length&&B.on("click",e=>{e.stopPropagation(),B.addClass("g-active"),U.gOverlay("open",$(e.target).closest("span").closest("span"))}).appendTo(F)},T.prototype.isCollapsible=function(){return this._annotation.hasMixin(y)},T.prototype.setCollapseState=function(e){if(this.isCollapsible())return $(this._expandIcon).removeClass(e?"gravit-icon-right":"gravit-icon-down").addClass(e?"gravit-icon-down":"gravit-icon-right")},T.prototype.isEditMode=function(){return this._annotationCommentContainer.hasClass("g-edit-mode")},T.prototype._clearOwnData=function(){var e=this._container.data("annotmenu");e&&(e.empty(),this._container.data("annotmenu",null))},T.prototype.cancelEditMode=function(){this._annotationCommentContainer.removeClass("g-edit-mode"),this._contentEditorButtons.hide(),this._assigneeRow.hide(),this.setMentionOverlayBorderVisiblity(!1)},T.prototype.toggleHighlight=function(e){this._container.toggleClass("g-highlighted-row",e)},T.prototype.isRead=function(){return this._isRead},T.prototype.isTypeResolved=function(){return this._isTypeResolved},T.prototype.isTypeReopened=function(){return this._isTypeReopened},T.prototype.isParentAnnotationResolved=function(){return this._isParentAnnotResolved},T.prototype.setVisiblity=function(e){e?this._container.show():this._container.hide()},T.prototype.setMentionOverlayBorderVisiblity=function(e){e?this._annotationCommentContainer.find(".mentions-input-box").css("display","block"):this._annotationCommentContainer.find(".mentions-input-box").css("display","none")},T.prototype._updateParentAnnotResolvedStatus=function(e){this._isParentAnnotResolved=!!e.getProperty("rsv")},T.prototype._updateReadUnreadStatus=function(e){var t=this._annotation,n=gDesigner.getSyncUser(),o=c.default.isOwner(n,t);if(this._isParentAnnotResolved||o||(t.getProperty("read")||[]).includes(n.getUID()))this._isRead=!0;else{var a=null;i.SHOW_SIDEBAR_BADGE&&(a=$("<div/>").addClass("new-comment").append([$("<span/>").addClass("dot").text("·"),$("<span/>").addClass("text-new").text(g.get(new h("GAnnotationPanel","text.unread-comment")))]).appendTo(e),this._container.addClass("new-element")),this._sidebarActive&&setTimeout(()=>{let e=t.getProperty("read")||[];e.includes(n.getUID())||(t.setProperty("read",e.concat(n.getUID())),a&&a.remove(),this._isRead=!0,this._container.addClass("new-element"))},b)}},T.prototype.scrollIntoView=function(){this._scrollToElement(this._container)},T.prototype._startEditMode=function(e,t,n,o,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];if(!e.hasClass("g-edit-mode")){var s=e.find(".annotation-comment-editor"),l=e.find(".contenteditor-buttonrow");s.val(L(n));var c=this._generateCommentContentHTML(n);let o=c.mentioned.map(e=>e.id),i=a.concat(r).filter(e=>o.includes(e.id)).map(e=>u.default.clone(e));i&&i.length&&(i.forEach(e=>{const t=c.mentioned.find(t=>t.id===e.id);e.value=t.showText,e.showText=t.showText}),e.find(".annotation-comment-editor").mentionsInput("setMentions",i)),this.setMentionOverlayBorderVisiblity(!0),s.trigger("input"),s[0].setSelectionRange(s[0].textLength,s[0].textLength),l.show(),l.find(".annotations-addcomment").text(g.get(new h("GAnnotationPanel",t?"text.edit-comment":"text.add-comment"))),setTimeout(()=>s.focus()),e.addClass("g-edit-mode")}},T.prototype._generateCommentContentHTML=function(e){let t="string"==typeof e?e:L(e.getProperty("text"));if(t=t||"",!gDesigner.getActiveDocument()||!gDesigner.getActiveDocument().getStorageItem())return{html:t,mentioned:[]};let n=t.match(s.GRegex.String.USERNAME_RE);if(!(n||[]).length)return{html:t,mentioned:[]};let o=(this._data||[]).filter(e=>{let t=e.getRole&&e.getRole()||e.role;return!t.is(i.ShareRoles.Viewer)&&!t.is(i.ShareRoles.NoAccess)}),a=[];if(n.forEach(e=>{const t=e.substring(1);if(!t)return;if(D(e))return void a.push(e);const n=o.find(P(t));n&&!a.find(function(e){return t=>e.getFirstName()===t.substring(1)||e.getFullUserName()===t.substring(1)||e.getEmail()===t.substring(1)}(n))&&a.push(e)}),!(a||[]).length)return{html:t,mentioned:[]};let r=o.filter(e=>a.includes("@"+e.getFirstName())||a.includes("@"+e.getFullUserName())||e.getEmail()&&a.includes("@"+e.getEmail()));return r=r.map(e=>{const t=Object.assign(new d.default,e),n="@"+t.getEmail(),o="@"+t.getFirstName();return a.includes(o)?t.showText="@"+t.getFullUserName():a.includes(n)&&(t.showText=n),t}),a.forEach(e=>{let n=e;const o=D(e);if(o)n=o.showText,r.push(o);else{const o=e.substring(1),i=r.find(P(o));i&&(n=i.showText,t.includes(n)&&(e=n))}t=t.replace(e,"<strong><span>"+n+"</span></strong>")}),{html:t,mentioned:r}},e.exports=T},function(e,t,n){"use strict";n(52),n(17),n(62),n(84),n(22);var o=n(13),i=n(861);const a=n(37),{GSystem:r,GLocale:s,GLocaleKey:l,GObject:c,GNode:d}=n(1),u=n(1167),{getAnnotationType:p}=n(34);n(77);function g(e){let{container:t,annotation:n,onSubmit:o,onCancel:i,onAssignTo:a,mentionData:r}=e;this._containter=t,this._annotation=n,this._onSubmit=o,this._onCancel=i,this._onAssignTo=a,this._shouldAssign=!1,this._assignees=[],this._mentionsCollection=[],this._data=r.data,this._owner=r.owner,this._additionalMentions=r.additionalMentions||[],this._mentionData=r,this._init()}function h(e){if(13===e.keyCode)if(r.operatingSystem!==r.OperatingSystem.OSX_IOS){if(!e.shiftKey)return!0}else{if(!e.altKey)return!0;if("keydown"===e.type){let t=$(e.target).val();$(e.target).val(t+"\n")}}return!1}c.inherit(g,u),g.prototype._init=function(){var e=this._containter;this._containter.addClass("reply-docker");var t,n=p(this._annotation);e.toggleClass("g-active",this._annotation.hasFlag(d.Flag.Active)).toggleClass("g-selected",this._annotation.hasFlag(d.Flag.Selected));const c=!this._annotation.isFillingCompleted();e.on("focusout",n=>{if(e.find(n.relatedTarget).length)return n.stopPropagation(),n.preventDefault(),!1;$(n.target).val()||a.isDialogOpen(".g-system-dialog.g-confirm-dialog")||($(n.target).attr("rows",1),t.hide())}).on("keydown",(function(e){h(e)&&e.preventDefault()})).on("keypress",(function(e){r.operatingSystem===r.OperatingSystem.OSX_IOS&&13===e.keyCode&&e.altKey&&e.preventDefault()})).on("keyup",e=>{const t=u.find(".mentions-autocomplete-list").data("assign");h(e)&&!t&&(this._addContent(),e.preventDefault())});var u=$("<span>").addClass("annotations-comment-area").appendTo(e);this._onlyOneAssignee=$("<span>").addClass("only-one-assignee").html(1===this._mentionsCollection.length?this._mentionsCollection[0].name:"").css("display","none"),this._assigneeSelector=$("<div>").addClass("assignee-selector").css("display","none").append($("<select>").on("change",e=>{i.updateAssignee.call(this,$(e.target).val())})),this._assigneeCheckBox=$("<input>").attr("type","checkbox").prop("checked",this._shouldAssign).on("change",e=>{this._shouldAssign=$(e.target).prop("checked"),gDesigner.stats("replydocker_mention_assign-user",n)}),this._assigneeRow=$("<div>").css("display","none").addClass("assignee-row-container").append($("<label>").addClass("label").addClass("assignee-row-label").append(this._assigneeCheckBox).append($("<span>").html(s.get(new l("GAnnotationPanel","text.assign-to")))).append(this._onlyOneAssignee).append(this._assigneeSelector)).appendTo(u),t=$("<div>").css("display","none").addClass("annotations-buttonrow").append($("<button>").addClass("annotations-cancelcomment").text(s.get(new l("GAnnotationPanel","text.cancel"))).on("click",e=>{e.stopImmediatePropagation(),gDesigner.stats("replydocker_cancel-reply",n),t.hide(),this._input.val("").attr("rows",1).trigger("input"),this._onCancel()})).append($("<button>").addClass("annotations-addcomment").text(c?s.get(new l("GAnnotationPanel","text.fill-contents")):s.get(new l("GAnnotationPanel","text.comment"))).on("click",()=>{gDesigner.stats("replydocker_add-reply",n),this._addContent()})).appendTo(u),e.attr("draggable",!1);const g=c&&o.GPlatform.webBrowser!==o.GPlatform.constructor.WebBrowser.Safari;this._input=$("<textarea>").attr("placeholder",s.get(new l("GAnnotationPanel",c?"text.write-annotation-here":"text.write-reply-here"))).attr("rows",1).attr("autofocus",g).addClass("annotations-comment-placeholder").addClass("mention").on("input",(function(){if(gDesigner.isTouchEnabled())this.style.height=0,this.style.height=this.scrollHeight+"px";else{const t=18;var e=Math.ceil(this.scrollHeight/t);this.rows=Math.max(e,5)}})).on("click",e=>{$(e.target).attr("rows")<=5&&$(e.target).attr("rows",5),t.show(),i.showAssigneeRow.call(this,this._input),gDesigner.isTouchEnabled()&&this.requestFocus()}).prependTo(u),this._input.mentionsInput({onDataRequest:(e,t,n)=>{let o=this._data.filter(e=>e.getFullUserName().toLowerCase().includes(t.toLowerCase())||e.getEmail()&&e.getEmail().toLowerCase().includes(t.toLowerCase()));o.push(...this._additionalMentions),n.call(this,o)},onSelectItem:()=>{gDesigner.stats("replydocker_mention_select-user",n)}}).on("input",()=>{i.showAssigneeRow.call(this,this._input)}),u.find(".mentions-autocomplete-list").delegate("li","mousedown",()=>{i.showAssigneeRow.call(this,this._input)}),c&&(this._input.trigger("click"),this._input.focus())},g.prototype._addContent=function(){var e=i.replaceAdditionalCollabShowTextBeforeSend.call(this,$(this._input).val());e=e.trim(),this._onSubmit(e),this._shouldAssign&&this._assignees&&this._assignees.length&&this._onAssignTo(this._assignees)},g.prototype.requestFocus=function(){const e=this._input[0];e&&e.focus?e.focus():this._input.focus()},g.prototype.forceSubmit=function(){this._addContent()},g.prototype.isVisible=function(){return"none"!==this._containter.find(".annotations-buttonrow").css("display")},g.prototype.show=function(){this._containter.find(".annotations-buttonrow").show()},g.prototype.hide=function(){this._containter.find(".annotations-buttonrow").hide()},g.prototype.scrollIntoView=function(){this._scrollToElement(this._input)},e.exports=g},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));var o=function(){function e(){}return e.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:i(),platform:"Web",os:void 0,deviceModel:void 0}},e}(),i=function(){return"undefined"!=typeof navigator&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},a=function(){function e(){this.queue=[]}return e.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},e.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach((function(t){e(t)})),this.queue=[])},e}(),r=function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=function(e,t){var n=typeof e;if(n!==typeof t)return!1;for(var o=0,i=["string","number","boolean","undefined"];o<i.length;o++){if(i[o]===n)return e===t}if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;var a=Array.isArray(e),r=Array.isArray(t);if(a!==r)return!1;if(!a||!r){var l=Object.keys(e).sort(),c=Object.keys(t).sort();if(!s(l,c))return!1;var d=!0;return Object.keys(e).forEach((function(n){s(e[n],t[n])||(d=!1)})),d}for(var u=0;u<e.length;u++)if(!s(e[u],t[u]))return!1;return!0};Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,o=new Array(n);n--;)o[n]=[t[n],e[t[n]]];return o});var l=function(){function e(){this.identity={userProperties:{}},this.listeners=new Set}return e.prototype.editIdentity=function(){var e=this,t=r({},this.identity.userProperties),n=r(r({},this.identity),{userProperties:t});return{setUserId:function(e){return n.userId=e,this},setDeviceId:function(e){return n.deviceId=e,this},setUserProperties:function(e){return n.userProperties=e,this},setOptOut:function(e){return n.optOut=e,this},updateUserProperties:function(e){for(var t=n.userProperties||{},o=0,i=Object.entries(e);o<i.length;o++){var a=i[o],r=a[0],s=a[1];switch(r){case"$set":for(var l=0,c=Object.entries(s);l<c.length;l++){var d=c[l],u=d[0],p=d[1];t[u]=p}break;case"$unset":for(var g=0,h=Object.keys(s);g<h.length;g++){delete t[u=h[g]]}break;case"$clearAll":t={}}}return n.userProperties=t,this},commit:function(){return e.setIdentity(n),this}}},e.prototype.getIdentity=function(){return r({},this.identity)},e.prototype.setIdentity=function(e){var t=r({},this.identity);this.identity=r({},e),s(t,this.identity)||this.listeners.forEach((function(t){t(e)}))},e.prototype.addIdentityListener=function(e){this.listeners.add(e)},e.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},e}(),c="undefined"!=typeof globalThis?globalThis:void 0!==e?e:self,d=function(){function e(){this.identityStore=new l,this.eventBridge=new a,this.applicationContextProvider=new o}return e.getInstance=function(t){return c.analyticsConnectorInstances||(c.analyticsConnectorInstances={}),c.analyticsConnectorInstances[t]||(c.analyticsConnectorInstances[t]=new e),c.analyticsConnectorInstances[t]},e}()}).call(this,n(101))},,,,,,,,,,,,,,,function(e,t,n){"use strict";var o,i,a=n(1349),r=n(1458);function s(){var e=new a;e.initLanguage((function(){o=e.init(r),i&&o.then(()=>{l(i)})}))}function l(e){gDesigner&&gDesigner.setPwaEvent?gDesigner.setPwaEvent(e):window.__pwaEvent__=e}"complete"===document.readyState?s():window.addEventListener("load",s),window.addEventListener("beforeinstallprompt",(function(e){if(e&&"beforeinstallprompt"===e.type){if(!o)return void(i=e);o.then(()=>{l(e)})}})),window.addEventListener("appinstalled",e=>{e&&"appinstalled"===e.type&&location.reload()})},function(e,t,n){"use strict";n(52),n(17),n(89),n(7),n(18),n(3),n(62),n(22),n(117),n(106);var o=n(0),i=n(8),a=n(39),r=n(77),s=n(1171);const l=n(1353);var c=n(238),d=n(1354),u=n(1355),p=n(1095),g=n(1175),h=n(206),f=n(1360),m=n(1361),y=n(111),v=n(151),_=n(78),b=n(1130),w=n(37),C=n(9).LOCAL_FONTS_API_ENABLED;const x=n(1457),{base64StringToString:S}=n(34);function E(){this._storage=new s,"serviceWorker"in navigator&&setTimeout((function(){navigator.serviceWorker.register("/cacher.js").then((function(e){e.update&&e.update()}))}),15e3)}o.inheritAndMix(E,r,[x]),E.prototype.getRuntime=function(){return window.matchMedia("(display-mode: standalone)").matches?r.Runtime.PWA:r.Runtime.Browser},E.prototype.getStorage=function(){return this._storage},E.prototype.getSystemFontsProvider=function(){return u},E.prototype.supportsLocalFonts=function(){return C},E.prototype.registerFontProviders=function(){if(r.prototype.registerFontProviders.call(this),c.registerProvider(p),c.registerProvider(d),this.supportsLocalFonts())try{c.registerProvider(g)}catch(e){console.error("Local Fonts Access API is not available")}window.GSystemFontsProvider=u},E.prototype.openExternalLink=function(e,t){e&&e.preventDefault(),window.open(t,"_blank")},E.prototype.start=function(){var e,t,n,o=new URL(window.location.href),i=null;if(o.searchParams){if(o.searchParams.get("token")&&o.searchParams.get("d"))i=new r.OpenFileRequest(r.OpenFileRequest.Type.DocumentOrToken,JSON.stringify({token:o.searchParams.get(r.OpenFileRequest.Type.Token),doc:o.searchParams.get("d")}));else if(o.searchParams.get("token"))i=new r.OpenFileRequest(r.OpenFileRequest.Type.Token,o.searchParams.get(r.OpenFileRequest.Type.Token));else if(o.searchParams.get("d"))i=new r.OpenFileRequest(r.OpenFileRequest.Type.Document,o.searchParams.get("d"));else if(o.searchParams.get("storeContent"))i=new r.OpenFileRequest(r.OpenFileRequest.Type.StoreContent,o.searchParams.get(r.OpenFileRequest.Type.StoreContent));else if(o.searchParams.get(r.OpenFileRequest.Type.ExternalAsset))i=new r.OpenFileRequest(r.OpenFileRequest.Type.ExternalAsset,o.searchParams.get(r.OpenFileRequest.Type.ExternalAsset));else if(o.searchParams.get("directlink")){t=o.searchParams.get("directlink");try{(e=JSON.parse(S(decodeURIComponent(t))).type)===r.OpenFileRequest.Type.Preset?i=new r.OpenFileRequest(r.OpenFileRequest.Type.Preset,t):e===r.OpenFileRequest.Type.Template&&(i=new r.OpenFileRequest(r.OpenFileRequest.Type.Template,t))}catch(e){"function"==typeof gdb_showScene&&console.warn("Invalid parameters.")}}}else{for(var a=/[&\?]((?:[\0-"\$-<>-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)=((?:[\0-"\$%'-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)/g,s={};n=a.exec(window.location.href);)s[n[1]]=n[2];if(s.token&&s.d)i=new r.OpenFileRequest(r.OpenFileRequest.Type.DocumentOrToken,{token:s[r.OpenFileRequest.Type.Token],doc:s.d});else if(s.token)i=new r.OpenFileRequest(r.OpenFileRequest.Type.Token,s[r.OpenFileRequest.Type.Token]);else if(s.d)i=new r.OpenFileRequest(r.OpenFileRequest.Type.Document,s.d);else if(s.storeContent)i=new r.OpenFileRequest(r.OpenFileRequest.Type.StoreContent,s[r.OpenFileRequest.Type.StoreContent]);else if(s[r.OpenFileRequest.Type.ExternalAsset])i=new r.OpenFileRequest(r.OpenFileRequest.Type.StoreContent,s[r.OpenFileRequest.Type.ExternalAsset]);else if(s.directlink){t=s.directlink;try{(e=JSON.parse(S(decodeURIComponent(t))).type)===r.OpenFileRequest.Type.Preset?i=new r.OpenFileRequest(r.OpenFileRequest.Type.Preset,t):e===r.OpenFileRequest.Type.Template&&(i=new r.OpenFileRequest(r.OpenFileRequest.Type.Template,t))}catch(e){"function"==typeof gdb_showScene&&console.warn("Invalid parameters.")}}}return i},E.prototype.copyToClipboard=function(e){if(navigator.clipboard)return navigator.clipboard.writeText(e);try{var t=function(){if(window.getSelection){var e=window.getSelection();if(e.getRangeAt&&e.rangeCount)return e.getRangeAt(0)}else if(document.selection&&document.selection.createRange)return document.selection.createRange()}(),n=document.createElement("textArea");return n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),function(e){if(e)if(window.getSelection){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}else document.selection&&e.select&&e.select()}(t),Promise.resolve()}catch(e){return Promise.reject(e)}},E.prototype.openStorageFile=function(e,t,n){E.openStorageFile(e,t,n,this._storage)},E.openStorageFile=function(e,t,n,o){var s={progress:null};e.updateStatus(_.Loading,s),async function(){try{let d,u=t.getType(),p=t.getContent();if(u===r.OpenFileRequest.Type.StoreContent)d=await gApi.getProviderContentDetails(p),d&&n(new f.Item(o,d.id,d.name,d),{loadingData:s});else if(u===r.OpenFileRequest.Type.ExternalAsset)d=await gApi.getProviderContentDetails(p),d&&n(new m.Item(o,d.id,d.name,d,p),{loadingData:s});else if(u===r.OpenFileRequest.Type.Preset){let e=JSON.parse(S(decodeURIComponent(p))),t=e&&function(e){let t=b.getPresets(),n=null,o=null;for(let i of t){let t=i.layouts.find(t=>t.template?t.template===e:t.id===e);if(t){n=i.name,o=t;break}}return{presetCategory:n,presetLayout:o}}(e.id);t&&t.presetLayout&&(t.presetLayout.template?(d=await gApi.getPresetTemplate({type:t.presetLayout.template}).catch(()=>null),d&&n(new l(o,d.data,"".concat(e.id,".gvdesign"),d.id),{content:e,file:d,preset:t,loadingData:s})):n(t,{content:e,category:t.presetCategory,loadingData:s}))}else if(u===r.OpenFileRequest.Type.Template){let e=JSON.parse(S(decodeURIComponent(p))),{file:t,data:i}=await y.loadDesignData(e.id),a=v.FileTypes.find(e=>e.mime===t.type).ext;t&&i&&n(new l(o,i,"".concat(t.name,".").concat(a),t.id),{content:e,file:t,category:t.path,loadingData:s})}else{let t;if(u===r.OpenFileRequest.Type.DocumentOrToken){let e=JSON.parse(p);d=await gApi.getShare(e.token,!0).catch(()=>null),d?t=e.token:d=await gApi.getFile(e.doc).catch(()=>null)}else u===r.OpenFileRequest.Type.Document?d=await gApi.getFile(p).catch(()=>null):u===r.OpenFileRequest.Type.Token&&(t=p,d=await gApi.getShare(t,!0).catch(()=>null));if(d)n(new h.Item(o,d.id,d.name,d,null,t,d.autosave),{loadingData:s});else{s.text=i.get(new a("GContainer","text.load-failed")),e.updateStatus(_.LoadFailed,s),e.setFailedDocumentIdOrToken(p),n(null);var c=[];gDesigner.getShareManager().isPermissionRequestEnabled()&&c.push({label:i.get(new a("GShareManager","text.file-request-access")),onclick:e=>{gDesigner.stats("permission-dialog_no-access_request-access"),gApi.requestPermission(p,{access:!0,isToken:u===r.OpenFileRequest.Type.Token}).then(()=>{e.gDialog("close"),w.alert(i.get(new a("GShareManager","text.sent-request-email")))}).catch(()=>{w.error(i.get(new a("GShareManager","text.cannot-request-access")))})}}),c.push({label:i.get(new a("GLocale","ok")),onclick:e=>{gDesigner.stats("permission-dialog_no-access_click-ok"),e.gDialog("close")},highlighted:!0}),w.custom({icon:"error",className:"g-file-can-not-be-found-dialog",closeable:!1,closeCallback:()=>gDesigner.removeDocument(e,null,!0),title:i.get(new a("GShareManager","text.file-can-not-be-accessed-title")),subtitle:i.get(new a("GShareManager","text.file-can-not-be-accessed-info")),buttons:c})}}}catch(t){console.log(t),setTimeout((function(){e.updateStatus(_.LoadFailed,s)}),10),e.updateStatus(_.LoadFailed,s),n(null)}}()},E.prototype.handleDeepLinking=function(e){const t=r.prototype.handleDeepLinking.call(this,e),n=[r.DeepLinking.DirectLink,r.DeepLinking.FocusAnnot,r.DeepLinking.CreateShare];return t&&!n.includes(t.link)&&window.history.pushState(null,null,window.location.pathname),t},E.prototype.toString=function(){return"[Object GBrowserContainer]"},e.exports=E},function(e,t,n){"use strict";var o=n(333),i=n(93),a=n(1351),r=n(116),s=function(e,t,n,l,c,d,u,p){for(var g,h,f=c,m=0,y=!!u&&r(u,p);m<l;)m in n&&(g=y?y(n[m],m,t):n[m],d>0&&o(g)?(h=i(g),f=s(e,t,g,h,f,d-1)-1):(a(f+1),e[f]=g),f++),m++;return f};e.exports=s},function(e,t,n){"use strict";var o=TypeError;e.exports=function(e){if(e>9007199254740991)throw o("Maximum allowed index exceeded");return e}},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";var o=n(14);n(3);var i=o(n(1171));function a(e,t,n,o){i.default.Item.call(this,e,t,n),this._fileId=o}n(1).GObject.inheritAndMix(a,i.default.Item),a.prototype.isRegistrable=function(){return!!this.getId()},a.prototype.getId=function(){return this._fileId},a.prototype.toString=function(){return"[Object GMarketingFileStorageItem]"},e.exports=a},function(e,t,n){"use strict";n(51),n(28);var o=n(1),i=n(365);function a(e){i.call(this,e)}o.GObject.inherit(a,i);var r=o.GUtil.uuid(),s=[],l={};o.GObject.inherit(a,i),a.prototype._totalFonts=0,a.prototype._initialized=!1,a.prototype._initializing=!1,a.prototype._resolveCallbacks=[],a.prototype._loadCallbacks=[],a.prototype._clearCallbacks=function(e){this._resolveCallbacks.forEach((function(t){t(e)})),this._resolveCallbacks=[],this._loadCallbacks.forEach((function(t){t(e)})),this._loadCallbacks=[]},a.prototype.addPreviews=function(e,t){for(var n=new DOMParser,o=!1,i=function(e,t){e?(this.cb=e,this.svg&&e(this.svg)):(this.svg=t,this.cb&&this.cb(t))},a=0;a<e.length;a++)e[a].cachedPreview||e[a].addPreviewCallback||(e[a].addPreviewCallback=i);if(t){e.length;if(!e.length)return;var r=[];for(a=0;a<e.length;a++){for(var l=0;l<s.length;l++)if(s[l].family===e[a].family){var c=parseInt(l/10);r.indexOf(c)<0&&r.push(c);break}if(l===s.length)return void console.warn("Error while generating previews: couldn't find font.")}for(a=0;a<r.length;a++){c=r[a];if(s[10*c].cachedPreview||(o=!0),o){var d=new XMLHttpRequest,u=gContainer.getRootPath();d.open("GET",u+"/assets/data/google_previews/previews"+c+".json"),d.num=c,d.onload=function(){if(this.status>=200&&this.status<300){var e;try{e=JSON.parse(this.response)}catch(e){return void("undefined"!=typeof gdb_loaddesign&&console.warn("couldn't parse font preview"))}for(var t=Math.min(s.length,10*(this.num+1))-10*this.num,o=0;o<t;o++){var a,r=s[10*this.num+o];r.addPreviewCallback||(r.addPreviewCallback=i);try{(a=n.parseFromString(e[o],"image/svg+xml").firstChild)&&a.getAttribute("xmlns")&&(a.setAttribute("height","20px"),r.addPreviewCallback(null,a))}catch(e){"undefined"!=typeof gdb_loaddesign&&console.warn("error parsing svg")}}}},d.send()}}}},a.prototype.initialize=function(){this._initialized||this._initializing||this._load.apply(this,arguments)},a.prototype._load=function(){this._initializing=!0;var e=Array.prototype.slice.call(arguments),t=gContainer.getRootPath(),n=new XMLHttpRequest,o=gDesigner?gDesigner.getVersion():~~(1e4*Math.random());n.open("GET",t+"/assets/data/googlefonts.json?"+o),n.onload=function(){n.status>=200&&n.status<300?(this._initialized=!0,this._initializing=!1,s=JSON.parse(n.response),this._totalFonts=s.length,e.length,this._clearCallbacks()):n.status>=400&&(this._initialized=!0,this._initializing=!1,this._clearCallbacks(!0))}.bind(this),n.onerror=function(){this._initialized=!0,this._initializing=!1,this._clearCallbacks(i.Errors.ConnectionError)}.bind(this),n.send()},a.prototype.load=function(e,t,n,o){if(!this._initialized&&!this._initializing)return this._loadCallbacks.push(function(i){i?o.fail(i):this.load(e,t,n,o)}.bind(this)),void this.initialize(this.load,e,t,n,o);this._initializing?this._loadCallbacks.push(function(i){i?o.fail(i):this.load(e,t,n,o)}.bind(this)):o.done(s.filter(this._searchFilter(e)).slice(t,t+n),!0,null)},a.prototype.getTotalFonts=function(e){return e?s.filter(this._searchFilter(e)).length:this._totalFonts},a.prototype.resolveFont=function(e,t,n,a){if(!this._initialized&&!this._initializing)return this._loadCallbacks.push(function(o){o?a.fail(o):this.resolveFont(e,t,n,a)}.bind(this)),void this.initialize(this.resolveFont,e,t,n,a);if(this._initializing)this._resolveCallbacks.push(function(o){o?a.fail(o):this.resolveFont(e,t,n,a)}.bind(this));else{for(var r=0;r<s.length;r++){var c=s[r];if(c.family===e)for(var d=c.fonts,u=0;u<d.length;u++){var p=d[u];if(p.weight===(n||400)&&p.style===(t||o.GFont.Style.Normal)){if(l[p.url])l[p.url].push(a);else{var g=new XMLHttpRequest;g.responseType="arraybuffer",g.open("GET",p.url),l[p.url]=[],l[p.url].push(a),g.onload=function(){if(this.status>=200&&this.status<300){var e=l[p.url];delete l[p.url],e.forEach(e=>{e.done(this.response)})}},g.onerror=()=>{delete l[p.url],a.fail(i.Errors.ConnectionError)},g.send()}return}}}a.fail()}},a.prototype.getProviderId=function(){return r},a.prototype.resetProvider=function(){this._load()},e.exports=a},function(e,t,n){"use strict";n(17),n(578),n(169),n(51),n(18),n(29),n(124),n(204),n(669),n(177),n(178),n(179),n(180),n(28);var o=n(1),i=n(9),a=n(365);function r(e){if(r._instance)throw new Error("This class cannot be instantiated multiple times");r._instance=this,a.call(this,e)}o.GObject.inherit(r,a);var s=o.GUtil.uuid();r.DEFAULT_PORT=32119,r.START_PORT_SPAN=1,r.PORT_SPAN=5,r.HOST="undefined"==typeof window||!window||window.process&&window.process.type?"":window.location.href.replace(/\/$/,""),r.LAUNCHER_PATH="/assets/data/launcher.swf",r.Cmd={success:0,font:1,list:2,probe:3,close:4,previews:5,error:255,stamp:3735941121},r._instance=null,r._launcherInstall=function(){r._instance._providerManager.setLock()},r._closeLauncher=function(){var e,t=0,n=function(){if(this._isInitialized())return console.log("initialized: finish"),void clearInterval(e);if(!this._taskLock){if(this._fontList=null,this._cachedInstallButton){var n=this._cachedInstallButton.parentElement;n&&n.contains(this._cachedInstallButton)&&n.removeChild(this._cachedInstallButton),this._cachedInstallButton=null}this._providerManager.reset(),t++>10&&(this._cbFatal(),clearInterval(e))}}.bind(r._instance);e=setInterval(n,2e3)},r.prototype._firstConnect=!0,r.prototype._tlsError=!1,r.prototype._initialized=!1,r.prototype._connection=null,r.prototype._tmpConnection=null,r.prototype._fontList=null,r.prototype._doReverse=!1,r.prototype._fontListLength=-1,r.prototype._taskQueue=[],r.prototype._taskLock=!1,r.prototype._resolveCallback=null,r.prototype._oldUnresolved=null,r.prototype._listCallbacks=[],r.prototype._previewCallback=null,r.prototype._cachedInstallButton=null,r.prototype._timeout=null,r.prototype._connect=function(e){var t=e||r.DEFAULT_PORT;if(this._firstConnect?t>r.DEFAULT_PORT+r.START_PORT_SPAN&&this._error():t>r.DEFAULT_PORT+r.PORT_SPAN&&this._error(),!(this._tmpConnection&&this._taskLock||this._connection))if(this._fontList&&1==this._fontList.length&&this._fontList[0].special)this._cbFail();else try{console.log("tasklock: true (connect)"),this._taskLock=!0,t===r.DEFAULT_PORT?this._tmpConnection=new WebSocket("wss://127.0.0.1:"+t):this._tmpConnection=new WebSocket("ws://127.0.0.1:"+t),this._tmpConnection.onopen=this._onOpen.bind(this),this._tmpConnection.onclose=this._onClose.bind(this),this._tmpConnection.onerror=this._error.bind(this),this._timeout||(this._timeout=setTimeout(function(){this._tmpConnection&&this._taskLock&&(this._tmpConnection.close(),this._tmpConnection=null,console.log("tasklock: false"),this._taskLock=!1,this._timeout=null,console.log("connection time out"),this._cbFatal())}.bind(this),3e4))}catch(e){t===r.DEFAULT_PORT?(this._tlsError=!0,setTimeout(this._connect.bind(this),50,t+1)):setTimeout(this._connect.bind(this),2e3,t+1)}},r.prototype._onOpen=function(){this._connection=this._tmpConnection,this._connection.onmessage=this._onmsg.bind(this),this._tmpConnection=null,this._timeout=null;var e=new Uint8Array(5);this._setData(e,r.Cmd.probe),this._connection.send(e.buffer)},r.prototype._onClose=function(e){console.log("socket closing:"+e),this._connection=null,this._tmpConnection=null,this._initialized=!1},r.prototype._error=function(){if(console.log("tasklock: false (error)"),this._taskLock=!1,this._tmpConnection&&!this._connection){var e=this._tmpConnection.url.split(":"),t=parseInt(e[e.length-1]);this._tmpConnection=null;var n=this._firstConnect?r.START_PORT_SPAN:r.PORT_SPAN;if(t>r.DEFAULT_PORT+n)return void this._cbFatal();setTimeout(this._connect.bind(this),2e3,t+1)}},r.prototype._onmsg=function(e){var t=e.data;if(t instanceof Blob){var n=t.slice(0,1),o=t.slice(1,5);t=t.slice(5);var i=null,a=null,s=new FileReader;s.addEventListener("loadend",function(){var e=!1;if(null===i)i=s.result,i=(i=new Uint8Array(i))[0],s.readAsArrayBuffer(o);else if(null===a){a=s.result;var n=new Uint8Array(a),l=new Uint32Array(n.buffer);l[0]!==r.Cmd.stamp?(n.reverse(),(l=new Uint32Array(n.buffer))[0]===r.Cmd.stamp&&(this._doReverse=!0,e=!0)):e=!0,e&&s.readAsArrayBuffer(t)}else this._handleCmd(i,s.result)}.bind(this));try{s.readAsArrayBuffer(n)}catch(e){return}}},r.prototype._cbFail=function(){for(var e=0;e<this._listCallbacks.length;e++){var t=this._listCallbacks[e];this._listCallbacks.shift(),this._fontList&&1==this._fontList.length&&this._fontList[0].special?t.done(this._fontList,!0,null):t.fail()}this._resolveCallback&&(t=this._resolveCallback,this._isInitialized()||(this._oldUnresolved?this._oldUnresolved.push(t):this._oldUnresolved=[t]),this._resolveCallback=null,t.fail?t.fail():t(!0)),this._taskLock=!1},r.prototype._cbFatal=function(){gDesigner.getSetting("system_fonts_enabled",!0)?(this._fontListLength=1,this._fontList=[{family:"",special:!0,fonts:[{weight:400,style:"N"}]}]):(this._fontListLength=0,this._fontList=[]),this._firstConnect=!1,this._cbFail()},r.prototype._cbDone=function(e){var t;if(console.log("cb done"),this._listCallbacks)for(var n=0;n<this._listCallbacks.length;n++)t=this._listCallbacks[n],this._listCallbacks.shift(),this._listCallbacks=null,t.done(this._fontList,!0,null);this._resolveCallback&&(t=this._resolveCallbacks[n],this._resolveCallback=null,e?t.done(e):t()),this._oldUnresolved&&(this._oldUnresolved.forEach((function(t){e?t.done(e):t()})),this._oldUnresolved=null),this._taskLock=!1},r.prototype._handleCmd=function(e,t){try{switch(e){case r.Cmd.probe:var n;if(this._doReverse){var o=new Uint8Array(t);o.reverse(),n=new Uint32Array(o.buffer)}else n=new Uint32Array(t);this._fontListLength=n[0];var i=new Uint8Array(13);this._setData(i,r.Cmd.list),this._connection.send(i.buffer);break;case r.Cmd.list:if((w=(b=new Uint8Array(t))[0])==r.Cmd.success){b=b.slice(3);var a=String.fromCharCode.apply(null,new Uint8Array(b.buffer)),s=JSON.parse(a),l=[],c={};if(s.length)if("string"==typeof s[0]||s[0]instanceof String){for(var d=0;d<s.length;d++){var u=s[d].split("_"),p=(h=u[0]).toLowerCase(),g={weight:parseInt(u[1]),style:0==parseInt(u[2])?"N":"I",f:h};c[p]?c[p].push(g):c[p]=[g]}for(var h in c){g=c[h];l.push({family:g[0].f,fonts:g})}}else for(d=0;d<s.length;d++){for(var f=s[d],m=(h=f[0],[]),y={family:h,fonts:m},v=1;v<f.length;v++){var _=f[v].split("_");m.push({weight:parseInt(_[0]),style:0==parseInt(_[1])?"N":"I"})}l.push(y)}this._fontListLength=l.length,this._fontList=l,this._initialized=!0,console.log("tasklock: false (cmd list)"),this._taskLock=!1,this._cbDone()}else w==r.Cmd.error?(console.log("tasklock: false (cmd list err1)"),this._taskLock=!1,this._cbFail()):(console.log("tasklock: false (cmd list err2)"),this._taskLock=!1,this._cbFail());break;case r.Cmd.previews:break;case r.Cmd.font:var b,w;(w=(b=new Uint8Array(t))[0])==r.Cmd.success?(b=b.slice(1),this._cbDone(b.buffer)):(w==r.Cmd.error||console.warn("Error receiving data"),this._cbFail())}}catch(e){console.warn("Error receiving data from server:"+e.message)}},r.prototype._setData=function(e,t){var n=r.Cmd.stamp;e[0]=n>>24,e[1]=n>>16&255,e[2]=n>>8&255,e[3]=n>>0&255,e[4]=t},r.prototype.hasEnabler=function(){return!0},r.prototype.getEnabler=function(){var e=document.createElement("div");return e.appendChild(this._getInstallButton()),e},r.prototype.isInitialized=function(){return this._isInitialized()},r.prototype._isInitialized=function(){return!(!this._connection||!this._initialized)&&(0==this._connection.readyState||1==this._connection.readyState||(this._connection=null,this._tmpConnection=null,this._initialized=!1,!1))},r.prototype._getInstallButton=function(){if(this._cachedInstallButton)return this._cachedInstallButton;"http://127.0.0.1:9000"===r.HOST&&(r.HOST="https://"+(i.domain.startsWith("corelvector")?"app-":"")+gDesigner.getEnv().split(".")[0]+"."+i.domain);var e=document.createElement("object");e.data=r.LAUNCHER_PATH;var t=document.createElement("div");t.innerHTML="<b>To enable system fonts, either:</b><ul style='list-style:initial'><li>enable flash</li><li>download, install and run gravit font server manually: <a name='_SPECIAL_' href='/assets/data/fonts.air?no_redirect=true'>DOWNLOAD LINK</a></li><li>import fonts into browser in the settings panel.</li></ul>",t.style.width="310px",t.style.textAlign="left";var n=document.createElement("param");return n.setAttribute("name","FlashVars"),n.setAttribute("value","host="+escape(r.HOST)+"&appurl="+escape("/assets/data/fonts.air?no_redirect=true")),e.appendChild(n),(n=document.createElement("param")).setAttribute("name","wmode"),n.setAttribute("value","transparent"),e.appendChild(n),e.type="application/x-shockwave-flash",e.name="_SPECIAL_",e.height="150",e.width="300",this._cachedInstallButton=e,e},r.prototype.addPreviews=function(e){if(e.length)if(1==e.length&&e[0].special){var t=this;e[0].addPreviewCallback=function(e){e(t.getEnabler())}}else{if(!this._isInitialized())return this._previewCallback=this.addPreviews,void this._initialize();for(var n=0;n<e.length;n++)e[n].cachedPreview||(e[n].addPreviewCallback=function(e){var t=document.createElement("div");t.innerHTML=this.family,t.style.fontFamily=this.family,t.style.fontSize="13px",e(t)})}},r.prototype._initialize=function(){gDesigner.getSetting("system_fonts_enabled",!0)?this._taskLock||(this._tlsError?this._connect(r.DEFAULT_PORT+1):this._connect(r.DEFAULT_PORT)):this._cbFatal()},r.prototype.load=function(e,t,n,o){if(!this._isInitialized())return this._listCallbacks.push(o),void this._initialize();o.done(this._fontList.filter((function(t){return e.indexOf("%")>=0?t.family.toLowerCase().startsWith(e.replace(/%/g,"")):t.family.toLowerCase()==e.toLowerCase()})).slice(t,t+n),!0,null)},r.prototype.getTotalFonts=function(e){return this._isInitialized()?e?this._fontList.filter(this._searchFilter(e)).length:this._fontListLength:(this._initialize(),0)},r.prototype.resolveFont=function(e,t,n,o){if(!this._isInitialized())return this._resolveCallback=function(i){i?o.fail():this.resolveFont(e,t,n,o)}.bind(this),void this._initialize();if(!this._taskLock){var i=e.length;this._resolveCallback=o;var a=new Uint8Array(9+i+4);this._setData(a,r.Cmd.font),a[5]=(4278190080&i)>>24,a[6]=(16711680&i)>>16,a[7]=(65280&i)>>8,a[8]=(255&i)>>0;for(var s=9;s<9+i;s++)a[s]=e.charCodeAt(s-9);var l=parseInt(n);a[s]=(65280&l)>>8,a[s+1]=(255&l)>>0,a[s+3]="N"==t?0:1,this._connection.send(a)}},r.prototype.getProviderId=function(){return s},e.exports=r},function(e,t,n){"use strict";n(1357)("asyncIterator")},function(e,t,n){"use strict";var o=n(1358),i=n(58),a=n(1359),r=n(81).f;e.exports=function(e){var t=o.Symbol||(o.Symbol={});i(t,e)||r(t,e,{value:a.f(e)})}},function(e,t,n){"use strict";var o=n(23);e.exports=o},function(e,t,n){"use strict";var o=n(41);t.f=o},function(e,t,n){"use strict";n(7);var o=n(1),i=n(9),a=n(222),r=n(206),s=n(34).decrypt;n(162);function l(){}o.GObject.inherit(l,a),l.prototype.canPromptOpen=function(){return!1},l.prototype.canPromptSave=function(e){return!1},l.prototype.canSave=function(){return!1},l.prototype.canDownload=function(){return!1},l.Item=function(e,t,n,o){r.CommercialProduct.call(this,e,t,n,o)},o.GObject.inherit(l.Item,r.CommercialProduct),l.Item.prototype.getPrice=async function(){return Promise.resolve(this._file.price)},l.Item.prototype.getName=function(){return this._filename?this._filename:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.image"))},l.Item.prototype.getFullName=function(){return this._filename?this._filename:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.image"))},l.Item.prototype.getFormattedPrice=async function(){const e=await this.getPrice(),t=o.GLocale.toLocaleCurrency(e,"USD");return new Promise(e=>e(t))},l.Item.prototype.setFile=function(e){if(!e)throw new Error("File can not be null");this._file=e,this._id=e.id,this._name=e.name},l.Item.prototype.getFile=function(){return this._file},l.Item.prototype.read=async function(e,t,n){var o=await i.gApi.getProviderContentFile(this._file.hash);return e((new TextEncoder).encode(s(o)))},l.Item.prototype.getExtension=function(){return this._file.extension&&this._file.extension.toUpperCase()},e.exports=l},function(e,t,n){"use strict";n(7);var o=n(1),i=n(9),a=n(222),r=(n(206),n(34).decrypt);n(162);function s(){}o.GObject.inherit(s,a),s.prototype.canPromptOpen=function(){return!1},s.prototype.canPromptSave=function(e){return!0},s.prototype.canSave=function(){return!0},s.prototype.canDownload=function(){return!0},s.Item=function(e,t,n,o,i){a.Item.call(this,e),this._filename=n,this._id=t,this._file=o,this._hash=i},o.GObject.inherit(s.Item,a.Item),s.Item.prototype.getName=function(){return this._filename?this._filename:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.image"))},s.Item.prototype.getFullName=function(){return this._filename?this._filename:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.image"))},s.Item.prototype.setFile=function(e){if(!e)throw new Error("File can not be null");this._file=e,this._id=e.id,this._name=e.name},s.Item.prototype.getFile=function(){return this._file},s.Item.prototype.read=async function(e,t,n){try{var o=await i.gApi.getProviderExternalAsset(this._hash||this._file.hash);return e((new TextEncoder).encode(r(o)))}catch(e){return t(e)}},s.Item.prototype.getExtension=function(){return this._file.extension&&this._file.extension.toUpperCase()},e.exports=s},function(e,t,n){"use strict";e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";n(338)("Int8",(function(e){return function(t,n,o){return e(this,t,n,o)}}))},function(e,t){e.exports=require("zlib")},,,,,,,,,,,function(e,t,n){var o={"./effects/sketchblureffect":1100,"./effects/sketchblureffect.js":1100,"./effects/sketchcoloradjusteffect":1101,"./effects/sketchcoloradjusteffect.js":1101,"./effects/sketchdropshadoweffect":1102,"./effects/sketchdropshadoweffect.js":1102,"./effects/sketcheffect":579,"./effects/sketcheffect.js":579,"./effects/sketchinnershadoweffect":1103,"./effects/sketchinnershadoweffect.js":1103,"./geometry/sketchcurvepoint":1104,"./geometry/sketchcurvepoint.js":1104,"./geometry/sketchpoint":580,"./geometry/sketchpoint.js":580,"./geometry/sketchrect":583,"./geometry/sketchrect.js":583,"./model/item/sketchartboard":1105,"./model/item/sketchartboard.js":1105,"./model/item/sketchbitmap":1181,"./model/item/sketchbitmap.js":1181,"./model/item/sketchoval":1182,"./model/item/sketchoval.js":1182,"./model/item/sketchpage":1112,"./model/item/sketchpage.js":1112,"./model/item/sketchpolygon":1183,"./model/item/sketchpolygon.js":1183,"./model/item/sketchrectangle":1184,"./model/item/sketchrectangle.js":1184,"./model/item/sketchshapepath":546,"./model/item/sketchshapepath.js":546,"./model/item/sketchstar":1185,"./model/item/sketchstar.js":1185,"./model/item/sketchtext":1113,"./model/item/sketchtext.js":1113,"./model/item/sketchtriangle":1187,"./model/item/sketchtriangle.js":1187,"./model/sketchbase":775,"./model/sketchbase.js":775,"./model/sketchelement":424,"./model/sketchelement.js":424,"./model/sketchgroup":1188,"./model/sketchgroup.js":1188,"./model/sketchnode":774,"./model/sketchnode.js":774,"./model/sketchpathutil":1111,"./model/sketchpathutil.js":1111,"./model/sketchshape":773,"./model/sketchshape.js":773,"./model/sketchshapegroup":1189,"./model/sketchshapegroup.js":1189,"./model/sketchsymbolinstance":1116,"./model/sketchsymbolinstance.js":1116,"./model/sketchsymbolmaster":1117,"./model/sketchsymbolmaster.js":1117,"./ns/bplistparser":1115,"./ns/bplistparser.js":1115,"./ns/nsarchiver":1114,"./ns/nsarchiver.js":1114,"./pattern/sketchangulargradient":1108,"./pattern/sketchangulargradient.js":1108,"./pattern/sketchcolor":581,"./pattern/sketchcolor.js":581,"./pattern/sketchgradient":772,"./pattern/sketchgradient.js":772,"./pattern/sketchlineargradient":1106,"./pattern/sketchlineargradient.js":1106,"./pattern/sketchnoisepattern":1110,"./pattern/sketchnoisepattern.js":1110,"./pattern/sketchpattern":582,"./pattern/sketchpattern.js":582,"./pattern/sketchradialgradient":1107,"./pattern/sketchradialgradient.js":1107,"./pattern/sketchtexturepattern":1109,"./pattern/sketchtexturepattern.js":1109,"./sketchclasses":544,"./sketchclasses.js":544,"./sketchdocument":1118,"./sketchdocument.js":1118,"./sketchfile":1099,"./sketchfile.js":1099,"./sketchfontsearch":1119,"./sketchfontsearch.js":1119,"./sketchimport":1098,"./sketchimport.js":1098,"./sketchmeta":1190,"./sketchmeta.js":1190,"./sketchparser":545,"./sketchparser.js":545};function i(e){var t=a(e);return n(t)}function a(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=a,e.exports=i,i.id=1375},function(e,t){!function(e){"use strict";var t=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],n=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],o=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],r=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function l(){var e,t,n,o,l,c;function d(e,t,i,a,r,s,d,u,p,g,h){var f,m,y,v,_,b,w,C,x,S,E,A,T,G,P;S=0,_=i;do{n[e[t+S]]++,S++,_--}while(0!==_);if(n[0]==i)return d[0]=-1,u[0]=0,0;for(C=u[0],b=1;b<=15&&0===n[b];b++);for(w=b,C<b&&(C=b),_=15;0!==_&&0===n[_];_--);for(y=_,C>_&&(C=_),u[0]=C,G=1<<b;b<_;b++,G<<=1)if((G-=n[b])<0)return-3;if((G-=n[_])<0)return-3;for(n[_]+=G,c[1]=b=0,S=1,T=2;0!=--_;)c[T]=b+=n[S],T++,S++;_=0,S=0;do{0!==(b=e[t+S])&&(h[c[b]++]=_),S++}while(++_<i);for(i=c[y],c[0]=_=0,S=0,v=-1,A=-C,l[0]=0,E=0,P=0;w<=y;w++)for(f=n[w];0!=f--;){for(;w>A+C;){if(v++,P=(P=y-(A+=C))>C?C:P,(m=1<<(b=w-A))>f+1&&(m-=f+1,T=w,b<P))for(;++b<P&&!((m<<=1)<=n[++T]);)m-=n[T];if(P=1<<b,g[0]+P>1440)return-3;l[v]=E=g[0],g[0]+=P,0!==v?(c[v]=_,o[0]=b,o[1]=C,b=_>>>A-C,o[2]=E-l[v-1]-b,p.set(o,3*(l[v-1]+b))):d[0]=E}for(o[1]=w-A,S>=i?o[0]=192:h[S]<a?(o[0]=h[S]<256?0:96,o[2]=h[S++]):(o[0]=s[h[S]-a]+16+64,o[2]=r[h[S++]-a]),m=1<<w-A,b=_>>>A;b<P;b+=m)p.set(o,3*(E+b));for(b=1<<w-1;0!=(_&b);b>>>=1)_^=b;for(_^=b,x=(1<<A)-1;(_&x)!=c[v];)v--,x=(1<<(A-=C))-1}return 0!==G&&1!=y?-5:0}function u(i){var a;for(e||(e=[],t=[],n=new Int32Array(16),o=[],l=new Int32Array(15),c=new Int32Array(16)),t.length<i&&(t=[]),a=0;a<i;a++)t[a]=0;for(a=0;a<16;a++)n[a]=0;for(a=0;a<3;a++)o[a]=0;l.set(n.subarray(0,15),0),c.set(n.subarray(0,16),0)}this.inflate_trees_bits=function(n,o,i,a,r){var s;return u(19),e[0]=0,-3==(s=d(n,0,19,19,null,null,i,o,a,e,t))?r.msg="oversubscribed dynamic bit lengths tree":-5!=s&&0!==o[0]||(r.msg="incomplete dynamic bit lengths tree",s=-3),s},this.inflate_trees_dynamic=function(n,o,l,c,p,g,h,f,m){var y;return u(288),e[0]=0,0!=(y=d(l,0,n,257,i,a,g,c,f,e,t))||0===c[0]?(-3==y?m.msg="oversubscribed literal/length tree":-4!=y&&(m.msg="incomplete literal/length tree",y=-3),y):(u(288),0!=(y=d(l,n,o,0,r,s,h,p,f,e,t))||0===p[0]&&n>257?(-3==y?m.msg="oversubscribed distance tree":-5==y?(m.msg="incomplete distance tree",y=-3):-4!=y&&(m.msg="empty distance tree with lengths",y=-3),y):0)}}l.inflate_trees_fixed=function(e,t,i,a){return e[0]=9,t[0]=5,i[0]=n,a[0]=o,0};function c(){var e,n,o,i,a=0,r=0,s=0,l=0,c=0,d=0,u=0,p=0,g=0,h=0;function f(e,n,o,i,a,r,s,l){var c,d,u,p,g,h,f,m,y,v,_,b,w,C,x,S;f=l.next_in_index,m=l.avail_in,g=s.bitb,h=s.bitk,v=(y=s.write)<s.read?s.read-y-1:s.end-y,_=t[e],b=t[n];do{for(;h<20;)m--,g|=(255&l.read_byte(f++))<<h,h+=8;if(0!==(p=(d=o)[S=3*((u=i)+(c=g&_))]))for(;;){if(g>>=d[S+1],h-=d[S+1],0!=(16&p)){for(p&=15,w=d[S+2]+(g&t[p]),g>>=p,h-=p;h<15;)m--,g|=(255&l.read_byte(f++))<<h,h+=8;for(p=(d=a)[S=3*((u=r)+(c=g&b))];;){if(g>>=d[S+1],h-=d[S+1],0!=(16&p)){for(p&=15;h<p;)m--,g|=(255&l.read_byte(f++))<<h,h+=8;if(C=d[S+2]+(g&t[p]),g>>=p,h-=p,v-=w,y>=C)y-(x=y-C)>0&&2>y-x?(s.window[y++]=s.window[x++],s.window[y++]=s.window[x++],w-=2):(s.window.set(s.window.subarray(x,x+2),y),y+=2,x+=2,w-=2);else{x=y-C;do{x+=s.end}while(x<0);if(w>(p=s.end-x)){if(w-=p,y-x>0&&p>y-x)do{s.window[y++]=s.window[x++]}while(0!=--p);else s.window.set(s.window.subarray(x,x+p),y),y+=p,x+=p,p=0;x=0}}if(y-x>0&&w>y-x)do{s.window[y++]=s.window[x++]}while(0!=--w);else s.window.set(s.window.subarray(x,x+w),y),y+=w,x+=w,w=0;break}if(0!=(64&p))return l.msg="invalid distance code",m+=w=h>>3<(w=l.avail_in-m)?h>>3:w,f-=w,h-=w<<3,s.bitb=g,s.bitk=h,l.avail_in=m,l.total_in+=f-l.next_in_index,l.next_in_index=f,s.write=y,-3;c+=d[S+2],p=d[S=3*(u+(c+=g&t[p]))]}break}if(0!=(64&p))return 0!=(32&p)?(m+=w=h>>3<(w=l.avail_in-m)?h>>3:w,f-=w,h-=w<<3,s.bitb=g,s.bitk=h,l.avail_in=m,l.total_in+=f-l.next_in_index,l.next_in_index=f,s.write=y,1):(l.msg="invalid literal/length code",m+=w=h>>3<(w=l.avail_in-m)?h>>3:w,f-=w,h-=w<<3,s.bitb=g,s.bitk=h,l.avail_in=m,l.total_in+=f-l.next_in_index,l.next_in_index=f,s.write=y,-3);if(c+=d[S+2],0===(p=d[S=3*(u+(c+=g&t[p]))])){g>>=d[S+1],h-=d[S+1],s.window[y++]=d[S+2],v--;break}}else g>>=d[S+1],h-=d[S+1],s.window[y++]=d[S+2],v--}while(v>=258&&m>=10);return m+=w=h>>3<(w=l.avail_in-m)?h>>3:w,f-=w,h-=w<<3,s.bitb=g,s.bitk=h,l.avail_in=m,l.total_in+=f-l.next_in_index,l.next_in_index=f,s.write=y,0}this.init=function(t,a,r,s,l,c){e=0,u=t,p=a,o=r,g=s,i=l,h=c,n=null},this.proc=function(m,y,v){var _,b,w,C,x,S,E,A=0,T=0,G=0;for(G=y.next_in_index,C=y.avail_in,A=m.bitb,T=m.bitk,S=(x=m.write)<m.read?m.read-x-1:m.end-x;;)switch(e){case 0:if(S>=258&&C>=10&&(m.bitb=A,m.bitk=T,y.avail_in=C,y.total_in+=G-y.next_in_index,y.next_in_index=G,m.write=x,v=f(u,p,o,g,i,h,m,y),G=y.next_in_index,C=y.avail_in,A=m.bitb,T=m.bitk,S=(x=m.write)<m.read?m.read-x-1:m.end-x,0!=v)){e=1==v?7:9;break}s=u,n=o,r=g,e=1;case 1:for(_=s;T<_;){if(0===C)return m.bitb=A,m.bitk=T,y.avail_in=C,y.total_in+=G-y.next_in_index,y.next_in_index=G,m.write=x,m.inflate_flush(y,v);v=0,C--,A|=(255&y.read_byte(G++))<<T,T+=8}if(A>>>=n[(b=3*(r+(A&t[_])))+1],T-=n[b+1],0===(w=n[b])){l=n[b+2],e=6;break}if(0!=(16&w)){c=15&w,a=n[b+2],e=2;break}if(0==(64&w)){s=w,r=b/3+n[b+2];break}if(0!=(32&w)){e=7;break}return e=9,y.msg="invalid literal/length code",v=-3,m.bitb=A,m.bitk=T,y.avail_in=C,y.total_in+=G-y.next_in_index,y.next_in_index=G,m.write=x,m.inflate_flush(y,v);case 2:for(_=c;T<_;){if(0===C)return m.bitb=A,m.bitk=T,y.avail_in=C,y.total_in+=G-y.next_in_index,y.next_in_index=G,m.write=x,m.inflate_flush(y,v);v=0,C--,A|=(255&y.read_byte(G++))<<T,T+=8}a+=A&t[_],A>>=_,T-=_,s=p,n=i,r=h,e=3;case 3:for(_=s;T<_;){if(0===C)return m.bitb=A,m.bitk=T,y.avail_in=C,y.total_in+=G-y.next_in_index,y.next_in_index=G,m.write=x,m.inflate_flush(y,v);v=0,C--,A|=(255&y.read_byte(G++))<<T,T+=8}if(A>>=n[(b=3*(r+(A&t[_])))+1],T-=n[b+1],0!=(16&(w=n[b]))){c=15&w,d=n[b+2],e=4;break}if(0==(64&w)){s=w,r=b/3+n[b+2];break}return e=9,y.msg="invalid distance code",v=-3,m.bitb=A,m.bitk=T,y.avail_in=C,y.total_in+=G-y.next_in_index,y.next_in_index=G,m.write=x,m.inflate_flush(y,v);case 4:for(_=c;T<_;){if(0===C)return m.bitb=A,m.bitk=T,y.avail_in=C,y.total_in+=G-y.next_in_index,y.next_in_index=G,m.write=x,m.inflate_flush(y,v);v=0,C--,A|=(255&y.read_byte(G++))<<T,T+=8}d+=A&t[_],A>>=_,T-=_,e=5;case 5:for(E=x-d;E<0;)E+=m.end;for(;0!==a;){if(0===S&&(x==m.end&&0!==m.read&&(S=(x=0)<m.read?m.read-x-1:m.end-x),0===S&&(m.write=x,v=m.inflate_flush(y,v),S=(x=m.write)<m.read?m.read-x-1:m.end-x,x==m.end&&0!==m.read&&(S=(x=0)<m.read?m.read-x-1:m.end-x),0===S)))return m.bitb=A,m.bitk=T,y.avail_in=C,y.total_in+=G-y.next_in_index,y.next_in_index=G,m.write=x,m.inflate_flush(y,v);m.window[x++]=m.window[E++],S--,E==m.end&&(E=0),a--}e=0;break;case 6:if(0===S&&(x==m.end&&0!==m.read&&(S=(x=0)<m.read?m.read-x-1:m.end-x),0===S&&(m.write=x,v=m.inflate_flush(y,v),S=(x=m.write)<m.read?m.read-x-1:m.end-x,x==m.end&&0!==m.read&&(S=(x=0)<m.read?m.read-x-1:m.end-x),0===S)))return m.bitb=A,m.bitk=T,y.avail_in=C,y.total_in+=G-y.next_in_index,y.next_in_index=G,m.write=x,m.inflate_flush(y,v);v=0,m.window[x++]=l,S--,e=0;break;case 7:if(T>7&&(T-=8,C++,G--),m.write=x,v=m.inflate_flush(y,v),S=(x=m.write)<m.read?m.read-x-1:m.end-x,m.read!=m.write)return m.bitb=A,m.bitk=T,y.avail_in=C,y.total_in+=G-y.next_in_index,y.next_in_index=G,m.write=x,m.inflate_flush(y,v);e=8;case 8:return v=1,m.bitb=A,m.bitk=T,y.avail_in=C,y.total_in+=G-y.next_in_index,y.next_in_index=G,m.write=x,m.inflate_flush(y,v);case 9:return v=-3,m.bitb=A,m.bitk=T,y.avail_in=C,y.total_in+=G-y.next_in_index,y.next_in_index=G,m.write=x,m.inflate_flush(y,v);default:return v=-2,m.bitb=A,m.bitk=T,y.avail_in=C,y.total_in+=G-y.next_in_index,y.next_in_index=G,m.write=x,m.inflate_flush(y,v)}},this.free=function(){}}var d=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function u(e,n){var o,i=this,a=0,r=0,s=0,u=0,p=[0],g=[0],h=new c,f=0,m=new Int32Array(4320),y=new l;i.bitk=0,i.bitb=0,i.window=new Uint8Array(n),i.end=n,i.read=0,i.write=0,i.reset=function(e,t){t&&(t[0]=0),6==a&&h.free(e),a=0,i.bitk=0,i.bitb=0,i.read=i.write=0},i.reset(e,null),i.inflate_flush=function(e,t){var n,o,a;return o=e.next_out_index,(n=((a=i.read)<=i.write?i.write:i.end)-a)>e.avail_out&&(n=e.avail_out),0!==n&&-5==t&&(t=0),e.avail_out-=n,e.total_out+=n,e.next_out.set(i.window.subarray(a,a+n),o),o+=n,(a+=n)==i.end&&(a=0,i.write==i.end&&(i.write=0),(n=i.write-a)>e.avail_out&&(n=e.avail_out),0!==n&&-5==t&&(t=0),e.avail_out-=n,e.total_out+=n,e.next_out.set(i.window.subarray(a,a+n),o),o+=n,a+=n),e.next_out_index=o,i.read=a,t},i.proc=function(e,n){var c,v,_,b,w,C,x,S;for(b=e.next_in_index,w=e.avail_in,v=i.bitb,_=i.bitk,x=(C=i.write)<i.read?i.read-C-1:i.end-C;;)switch(a){case 0:for(;_<3;){if(0===w)return i.bitb=v,i.bitk=_,e.avail_in=w,e.total_in+=b-e.next_in_index,e.next_in_index=b,i.write=C,i.inflate_flush(e,n);n=0,w--,v|=(255&e.read_byte(b++))<<_,_+=8}switch(f=1&(c=7&v),c>>>1){case 0:v>>>=3,v>>>=c=7&(_-=3),_-=c,a=1;break;case 1:var E=[],A=[],T=[[]],G=[[]];l.inflate_trees_fixed(E,A,T,G),h.init(E[0],A[0],T[0],0,G[0],0),v>>>=3,_-=3,a=6;break;case 2:v>>>=3,_-=3,a=3;break;case 3:return v>>>=3,_-=3,a=9,e.msg="invalid block type",n=-3,i.bitb=v,i.bitk=_,e.avail_in=w,e.total_in+=b-e.next_in_index,e.next_in_index=b,i.write=C,i.inflate_flush(e,n)}break;case 1:for(;_<32;){if(0===w)return i.bitb=v,i.bitk=_,e.avail_in=w,e.total_in+=b-e.next_in_index,e.next_in_index=b,i.write=C,i.inflate_flush(e,n);n=0,w--,v|=(255&e.read_byte(b++))<<_,_+=8}if((~v>>>16&65535)!=(65535&v))return a=9,e.msg="invalid stored block lengths",n=-3,i.bitb=v,i.bitk=_,e.avail_in=w,e.total_in+=b-e.next_in_index,e.next_in_index=b,i.write=C,i.inflate_flush(e,n);r=65535&v,v=_=0,a=0!==r?2:0!==f?7:0;break;case 2:if(0===w)return i.bitb=v,i.bitk=_,e.avail_in=w,e.total_in+=b-e.next_in_index,e.next_in_index=b,i.write=C,i.inflate_flush(e,n);if(0===x&&(C==i.end&&0!==i.read&&(x=(C=0)<i.read?i.read-C-1:i.end-C),0===x&&(i.write=C,n=i.inflate_flush(e,n),x=(C=i.write)<i.read?i.read-C-1:i.end-C,C==i.end&&0!==i.read&&(x=(C=0)<i.read?i.read-C-1:i.end-C),0===x)))return i.bitb=v,i.bitk=_,e.avail_in=w,e.total_in+=b-e.next_in_index,e.next_in_index=b,i.write=C,i.inflate_flush(e,n);if(n=0,(c=r)>w&&(c=w),c>x&&(c=x),i.window.set(e.read_buf(b,c),C),b+=c,w-=c,C+=c,x-=c,0!=(r-=c))break;a=0!==f?7:0;break;case 3:for(;_<14;){if(0===w)return i.bitb=v,i.bitk=_,e.avail_in=w,e.total_in+=b-e.next_in_index,e.next_in_index=b,i.write=C,i.inflate_flush(e,n);n=0,w--,v|=(255&e.read_byte(b++))<<_,_+=8}if(s=c=16383&v,(31&c)>29||(c>>5&31)>29)return a=9,e.msg="too many length or distance symbols",n=-3,i.bitb=v,i.bitk=_,e.avail_in=w,e.total_in+=b-e.next_in_index,e.next_in_index=b,i.write=C,i.inflate_flush(e,n);if(c=258+(31&c)+(c>>5&31),!o||o.length<c)o=[];else for(S=0;S<c;S++)o[S]=0;v>>>=14,_-=14,u=0,a=4;case 4:for(;u<4+(s>>>10);){for(;_<3;){if(0===w)return i.bitb=v,i.bitk=_,e.avail_in=w,e.total_in+=b-e.next_in_index,e.next_in_index=b,i.write=C,i.inflate_flush(e,n);n=0,w--,v|=(255&e.read_byte(b++))<<_,_+=8}o[d[u++]]=7&v,v>>>=3,_-=3}for(;u<19;)o[d[u++]]=0;if(p[0]=7,0!=(c=y.inflate_trees_bits(o,p,g,m,e)))return-3==(n=c)&&(o=null,a=9),i.bitb=v,i.bitk=_,e.avail_in=w,e.total_in+=b-e.next_in_index,e.next_in_index=b,i.write=C,i.inflate_flush(e,n);u=0,a=5;case 5:for(;!(u>=258+(31&(c=s))+(c>>5&31));){var P,D;for(c=p[0];_<c;){if(0===w)return i.bitb=v,i.bitk=_,e.avail_in=w,e.total_in+=b-e.next_in_index,e.next_in_index=b,i.write=C,i.inflate_flush(e,n);n=0,w--,v|=(255&e.read_byte(b++))<<_,_+=8}if(c=m[3*(g[0]+(v&t[c]))+1],(D=m[3*(g[0]+(v&t[c]))+2])<16)v>>>=c,_-=c,o[u++]=D;else{for(S=18==D?7:D-14,P=18==D?11:3;_<c+S;){if(0===w)return i.bitb=v,i.bitk=_,e.avail_in=w,e.total_in+=b-e.next_in_index,e.next_in_index=b,i.write=C,i.inflate_flush(e,n);n=0,w--,v|=(255&e.read_byte(b++))<<_,_+=8}if(_-=c,P+=(v>>>=c)&t[S],v>>>=S,_-=S,(S=u)+P>258+(31&(c=s))+(c>>5&31)||16==D&&S<1)return o=null,a=9,e.msg="invalid bit length repeat",n=-3,i.bitb=v,i.bitk=_,e.avail_in=w,e.total_in+=b-e.next_in_index,e.next_in_index=b,i.write=C,i.inflate_flush(e,n);D=16==D?o[S-1]:0;do{o[S++]=D}while(0!=--P);u=S}}g[0]=-1;var L=[],I=[],k=[],O=[];if(L[0]=9,I[0]=6,c=s,0!=(c=y.inflate_trees_dynamic(257+(31&c),1+(c>>5&31),o,L,I,k,O,m,e)))return-3==c&&(o=null,a=9),n=c,i.bitb=v,i.bitk=_,e.avail_in=w,e.total_in+=b-e.next_in_index,e.next_in_index=b,i.write=C,i.inflate_flush(e,n);h.init(L[0],I[0],m,k[0],m,O[0]),a=6;case 6:if(i.bitb=v,i.bitk=_,e.avail_in=w,e.total_in+=b-e.next_in_index,e.next_in_index=b,i.write=C,1!=(n=h.proc(i,e,n)))return i.inflate_flush(e,n);if(n=0,h.free(e),b=e.next_in_index,w=e.avail_in,v=i.bitb,_=i.bitk,x=(C=i.write)<i.read?i.read-C-1:i.end-C,0===f){a=0;break}a=7;case 7:if(i.write=C,n=i.inflate_flush(e,n),x=(C=i.write)<i.read?i.read-C-1:i.end-C,i.read!=i.write)return i.bitb=v,i.bitk=_,e.avail_in=w,e.total_in+=b-e.next_in_index,e.next_in_index=b,i.write=C,i.inflate_flush(e,n);a=8;case 8:return n=1,i.bitb=v,i.bitk=_,e.avail_in=w,e.total_in+=b-e.next_in_index,e.next_in_index=b,i.write=C,i.inflate_flush(e,n);case 9:return n=-3,i.bitb=v,i.bitk=_,e.avail_in=w,e.total_in+=b-e.next_in_index,e.next_in_index=b,i.write=C,i.inflate_flush(e,n);default:return n=-2,i.bitb=v,i.bitk=_,e.avail_in=w,e.total_in+=b-e.next_in_index,e.next_in_index=b,i.write=C,i.inflate_flush(e,n)}},i.free=function(e){i.reset(e,null),i.window=null,m=null},i.set_dictionary=function(e,t,n){i.window.set(e.subarray(t,t+n),0),i.read=i.write=n},i.sync_point=function(){return 1==a?1:0}}var p=[0,0,255,255];function g(){var e=this;function t(e){return e&&e.istate?(e.total_in=e.total_out=0,e.msg=null,e.istate.mode=7,e.istate.blocks.reset(e,null),0):-2}e.mode=0,e.method=0,e.was=[0],e.need=0,e.marker=0,e.wbits=0,e.inflateEnd=function(t){return e.blocks&&e.blocks.free(t),e.blocks=null,0},e.inflateInit=function(n,o){return n.msg=null,e.blocks=null,o<8||o>15?(e.inflateEnd(n),-2):(e.wbits=o,n.istate.blocks=new u(n,1<<o),t(n),0)},e.inflate=function(e,t){var n,o;if(!e||!e.istate||!e.next_in)return-2;for(t=4==t?-5:0,n=-5;;)switch(e.istate.mode){case 0:if(0===e.avail_in)return n;if(n=t,e.avail_in--,e.total_in++,8!=(15&(e.istate.method=e.read_byte(e.next_in_index++)))){e.istate.mode=13,e.msg="unknown compression method",e.istate.marker=5;break}if(8+(e.istate.method>>4)>e.istate.wbits){e.istate.mode=13,e.msg="invalid window size",e.istate.marker=5;break}e.istate.mode=1;case 1:if(0===e.avail_in)return n;if(n=t,e.avail_in--,e.total_in++,o=255&e.read_byte(e.next_in_index++),((e.istate.method<<8)+o)%31!=0){e.istate.mode=13,e.msg="incorrect header check",e.istate.marker=5;break}if(0==(32&o)){e.istate.mode=7;break}e.istate.mode=2;case 2:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need=(255&e.read_byte(e.next_in_index++))<<24&4278190080,e.istate.mode=3;case 3:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need+=(255&e.read_byte(e.next_in_index++))<<16&16711680,e.istate.mode=4;case 4:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need+=(255&e.read_byte(e.next_in_index++))<<8&65280,e.istate.mode=5;case 5:return 0===e.avail_in?n:(n=t,e.avail_in--,e.total_in++,e.istate.need+=255&e.read_byte(e.next_in_index++),e.istate.mode=6,2);case 6:return e.istate.mode=13,e.msg="need dictionary",e.istate.marker=0,-2;case 7:if(-3==(n=e.istate.blocks.proc(e,n))){e.istate.mode=13,e.istate.marker=0;break}if(0==n&&(n=t),1!=n)return n;n=t,e.istate.blocks.reset(e,e.istate.was),e.istate.mode=12;case 12:return 1;case 13:return-3;default:return-2}},e.inflateSetDictionary=function(e,t,n){var o=0,i=n;return e&&e.istate&&6==e.istate.mode?(i>=1<<e.istate.wbits&&(o=n-(i=(1<<e.istate.wbits)-1)),e.istate.blocks.set_dictionary(t,o,i),e.istate.mode=7,0):-2},e.inflateSync=function(e){var n,o,i,a,r;if(!e||!e.istate)return-2;if(13!=e.istate.mode&&(e.istate.mode=13,e.istate.marker=0),0===(n=e.avail_in))return-5;for(o=e.next_in_index,i=e.istate.marker;0!==n&&i<4;)e.read_byte(o)==p[i]?i++:i=0!==e.read_byte(o)?0:4-i,o++,n--;return e.total_in+=o-e.next_in_index,e.next_in_index=o,e.avail_in=n,e.istate.marker=i,4!=i?-3:(a=e.total_in,r=e.total_out,t(e),e.total_in=a,e.total_out=r,e.istate.mode=7,0)},e.inflateSyncPoint=function(e){return e&&e.istate&&e.istate.blocks?e.istate.blocks.sync_point():-2}}function h(){}h.prototype={inflateInit:function(e){return this.istate=new g,e||(e=15),this.istate.inflateInit(this,e)},inflate:function(e){return this.istate?this.istate.inflate(this,e):-2},inflateEnd:function(){if(!this.istate)return-2;var e=this.istate.inflateEnd(this);return this.istate=null,e},inflateSync:function(){return this.istate?this.istate.inflateSync(this):-2},inflateSetDictionary:function(e,t){return this.istate?this.istate.inflateSetDictionary(this,e,t):-2},read_byte:function(e){return this.next_in.subarray(e,e+1)[0]},read_buf:function(e,t){return this.next_in.subarray(e,e+t)}};var f=e.zip||e;f.Inflater=f._jzlib_Inflater=function(){var e=new h,t=new Uint8Array(512),n=!1;e.inflateInit(),e.next_out=t,this.append=function(o,i){var a,r,s=[],l=0,c=0,d=0;if(0!==o.length){e.next_in_index=0,e.next_in=o,e.avail_in=o.length;do{if(e.next_out_index=0,e.avail_out=512,0!==e.avail_in||n||(e.next_in_index=0,n=!0),a=e.inflate(0),n&&-5===a){if(0!==e.avail_in)throw new Error("inflating: bad input")}else if(0!==a&&1!==a)throw new Error("inflating: "+e.msg);if((n||1===a)&&e.avail_in===o.length)throw new Error("inflating: bad input");e.next_out_index&&(512===e.next_out_index?s.push(new Uint8Array(t)):s.push(new Uint8Array(t.subarray(0,e.next_out_index)))),d+=e.next_out_index,i&&e.next_in_index>0&&e.next_in_index!=l&&(i(e.next_in_index),l=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return r=new Uint8Array(d),s.forEach((function(e){r.set(e,c),c+=e.length})),r}},this.flush=function(){e.inflateEnd()}}}(this)},function(e,t){!function(e){"use strict";var t,n="File format is not recognized.",o="Error while reading zip file.";try{t=0===new Blob([new DataView(new ArrayBuffer(0))]).size}catch(e){}function i(){this.crc=-1}function a(){}function r(e,t){var n,o;return n=new ArrayBuffer(e),o=new Uint8Array(n),t&&o.set(t,0),{buffer:n,array:o,view:new DataView(n)}}function s(){}function l(e){var t,n=this;n.size=0,n.init=function(o,i){var a=new Blob([e],{type:"text/plain"});(t=new d(a)).init((function(){n.size=t.size,o()}),i)},n.readUint8Array=function(e,n,o,i){t.readUint8Array(e,n,o,i)}}function c(t){var n,o=this;o.size=0,o.init=function(e){for(var i=t.length;"="==t.charAt(i-1);)i--;n=t.indexOf(",")+1,o.size=Math.floor(.75*(i-n)),e()},o.readUint8Array=function(o,i,a){var s,l=r(i),c=4*Math.floor(o/3),d=4*Math.ceil((o+i)/3),u=e.atob(t.substring(c+n,d+n)),p=o-3*Math.floor(c/4);for(s=p;s<p+i;s++)l.array[s-p]=u.charCodeAt(s);a(l.array)}}function d(e){var t=this;t.size=0,t.init=function(n){t.size=e.size,n()},t.readUint8Array=function(t,n,o,i){var a=new FileReader;a.onload=function(e){o(new Uint8Array(e.target.result))},a.onerror=i;try{a.readAsArrayBuffer(function(e,t,n){if(t<0||n<0||t+n>e.size)throw new RangeError("offset:"+t+", length:"+n+", size:"+e.size);return e.slice?e.slice(t,t+n):e.webkitSlice?e.webkitSlice(t,t+n):e.mozSlice?e.mozSlice(t,t+n):e.msSlice?e.msSlice(t,t+n):void 0}(e,t,n))}catch(e){i(e)}}}function u(){}function p(e){var n;this.init=function(e){n=new Blob([],{type:"text/plain"}),e()},this.writeUint8Array=function(e,o){n=new Blob([n,t?e:e.buffer],{type:"text/plain"}),o()},this.getData=function(t,o){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.onerror=o,i.readAsText(n,e)}}function g(t){var n="",o="";this.init=function(e){n+="data:"+(t||"")+";base64,",e()},this.writeUint8Array=function(t,i){var a,r=o.length,s=o;for(o="",a=0;a<3*Math.floor((r+t.length)/3)-r;a++)s+=String.fromCharCode(t[a]);for(;a<t.length;a++)o+=String.fromCharCode(t[a]);s.length>2?n+=e.btoa(s):o=s,i()},this.getData=function(t){t(n+e.btoa(o))}}function h(e){var n=[];this.init=function(e){e()},this.writeUint8Array=function(e,o){n.push(t?e:e.buffer),o()},this.getData=function(t){t(new Blob(n,{type:e}))}}function f(e,t,n,o,i,a,r,s,l,c){var d,u,p,g=0,h=t.sn;function f(){e.removeEventListener("message",m,!1),s(u,p)}function m(t){var n=t.data,i=n.data,s=n.error;if(s)return s.toString=function(){return"Error: "+this.message},void l(s);if(n.sn===h)switch("number"==typeof n.codecTime&&(e.codecTime+=n.codecTime),"number"==typeof n.crcTime&&(e.crcTime+=n.crcTime),n.type){case"append":i?(u+=i.length,o.writeUint8Array(i,(function(){y()}),c)):y();break;case"flush":p=n.crc,i?(u+=i.length,o.writeUint8Array(i,(function(){f()}),c)):f();break;case"progress":r&&r(d+n.loaded,a);break;case"importScripts":case"newTask":case"echo":break;default:console.warn("zip.js:launchWorkerProcess: unknown message: ",n)}}function y(){(d=524288*g)<=a?n.readUint8Array(i+d,Math.min(524288,a-d),(function(n){r&&r(d,a);var o=0===d?t:{sn:h};o.type="append",o.data=n;try{e.postMessage(o,[n.buffer])}catch(t){e.postMessage(o)}g++}),l):e.postMessage({sn:h,type:"flush"})}u=0,e.addEventListener("message",m,!1),y()}function m(e,t,n,o,a,r,s,l,c,d){var u,p=0,g=0,h="input"===r,f="output"===r,m=new i;!function i(){var r;if((u=524288*p)<a)t.readUint8Array(o+u,Math.min(524288,a-u),(function(t){var o;try{o=e.append(t,(function(e){s&&s(u+e,a)}))}catch(e){return void c(e)}o?(g+=o.length,n.writeUint8Array(o,(function(){p++,setTimeout(i,1)}),d),f&&m.append(o)):(p++,setTimeout(i,1)),h&&m.append(t),s&&s(u,a)}),c);else{try{r=e.flush()}catch(e){return void c(e)}r?(f&&m.append(r),g+=r.length,n.writeUint8Array(r,(function(){l(g,m.get())}),d)):l(g,m.get())}}()}function y(t,n,o,i,r,s,l,c,d,u,p){e.zip.useWebWorkers&&l?f(t,{sn:n,codecClass:"NOOP",crcType:"input"},o,i,r,s,d,c,u,p):m(new a,o,i,r,s,"input",d,c,u,p)}function v(e){var t,n,o="",i=["Ç","ü","é","â","ä","à","å","ç","ê","ë","è","ï","î","ì","Ä","Å","É","æ","Æ","ô","ö","ò","û","ù","ÿ","Ö","Ü","ø","£","Ø","×","ƒ","á","í","ó","ú","ñ","Ñ","ª","º","¿","®","¬","½","¼","¡","«","»","_","_","_","¦","¦","Á","Â","À","©","¦","¦","+","+","¢","¥","+","+","-","-","+","-","+","ã","Ã","+","+","-","-","¦","-","+","¤","ð","Ð","Ê","Ë","È","i","Í","Î","Ï","+","+","_","_","¦","Ì","_","Ó","ß","Ô","Ò","õ","Õ","µ","þ","Þ","Ú","Û","Ù","ý","Ý","¯","´","­","±","_","¾","¶","§","÷","¸","°","¨","·","¹","³","²","_"," "];for(t=0;t<e.length;t++)o+=(n=255&e.charCodeAt(t))>127?i[n-128]:String.fromCharCode(n);return o}function _(e){return decodeURIComponent(escape(e))}function b(e){var t,n="";for(t=0;t<e.length;t++)n+=String.fromCharCode(e[t]);return n}function w(e,t,n,o,i){e.version=t.view.getUint16(n,!0),e.bitFlag=t.view.getUint16(n+2,!0),e.compressionMethod=t.view.getUint16(n+4,!0),e.lastModDateRaw=t.view.getUint32(n+6,!0),e.lastModDate=function(e){var t=(4294901760&e)>>16,n=65535&e;try{return new Date(1980+((65024&t)>>9),((480&t)>>5)-1,31&t,(63488&n)>>11,(2016&n)>>5,2*(31&n),0)}catch(e){}}(e.lastModDateRaw),1!=(1&e.bitFlag)?((o||8!=(8&e.bitFlag))&&(e.crc32=t.view.getUint32(n+10,!0),e.compressedSize=t.view.getUint32(n+14,!0),e.uncompressedSize=t.view.getUint32(n+18,!0)),4294967295!==e.compressedSize&&4294967295!==e.uncompressedSize?(e.filenameLength=t.view.getUint16(n+22,!0),e.extraFieldLength=t.view.getUint16(n+24,!0)):i("File is using Zip64 (4gb+ file size).")):i("File contains encrypted entry.")}function C(t,i,a){var s=0;function l(){}l.prototype.getData=function(o,i,l,c){var d=this;function u(e,t){c&&!function(e){var t=r(4);return t.view.setUint32(0,e),d.crc32==t.view.getUint32(0)}(t)?a("CRC failed."):o.getData((function(e){i(e)}))}function p(e){a(e||"Error while reading file data.")}function g(e){a(e||"Error while writing file data.")}t.readUint8Array(d.offset,30,(function(i){var h,v=r(i.length,i);1347093252==v.view.getUint32(0)?(w(d,v,4,!1,a),h=d.offset+30+d.filenameLength+d.extraFieldLength,o.init((function(){0===d.compressionMethod?y(d._worker,s++,t,o,h,d.compressedSize,c,u,l,p,g):function(t,n,o,i,a,r,s,l,c,d,u){var p=s?"output":"none";e.zip.useWebWorkers?f(t,{sn:n,codecClass:"Inflater",crcType:p},o,i,a,r,c,l,d,u):m(new e.zip.Inflater,o,i,a,r,p,c,l,d,u)}(d._worker,s++,t,o,h,d.compressedSize,c,u,l,p,g)}),g)):a(n)}),p)};var c={getEntries:function(e){var i=this._worker;!function(e){if(t.size<22)a(n);else{i(22,(function(){i(Math.min(65558,t.size),(function(){a(n)}))}))}function i(n,i){t.readUint8Array(t.size-n,n,(function(t){for(var n=t.length-22;n>=0;n--)if(80===t[n]&&75===t[n+1]&&5===t[n+2]&&6===t[n+3])return void e(new DataView(t.buffer,n,22));i()}),(function(){a(o)}))}}((function(s){var c,d;c=s.getUint32(16,!0),d=s.getUint16(8,!0),c<0||c>=t.size?a(n):t.readUint8Array(c,t.size-c,(function(t){var o,s,c,u,p=0,g=[],h=r(t.length,t);for(o=0;o<d;o++){if((s=new l)._worker=i,1347092738!=h.view.getUint32(p))return void a(n);w(s,h,p+6,!0,a),s.commentLength=h.view.getUint16(p+32,!0),s.directory=16==(16&h.view.getUint8(p+38)),s.offset=h.view.getUint32(p+42,!0),c=b(h.array.subarray(p+46,p+46+s.filenameLength)),s.filename=2048==(2048&s.bitFlag)?_(c):v(c),s.directory||"/"!=s.filename.charAt(s.filename.length-1)||(s.directory=!0),u=b(h.array.subarray(p+46+s.filenameLength+s.extraFieldLength,p+46+s.filenameLength+s.extraFieldLength+s.commentLength)),s.comment=2048==(2048&s.bitFlag)?_(u):v(u),g.push(s),p+=46+s.filenameLength+s.extraFieldLength+s.commentLength}e(g)}),(function(){a(o)}))}))},close:function(e){this._worker&&(this._worker.terminate(),this._worker=null),e&&e()},_worker:null};e.zip.useWebWorkers?T("inflater",(function(e){c._worker=e,i(c)}),(function(e){a(e)})):i(c)}function x(e){return unescape(encodeURIComponent(e))}function S(e){var t,n=[];for(t=0;t<e.length;t++)n.push(e.charCodeAt(t));return n}function E(t,n,o,i){var a={},s=[],l=0,c=0;function d(e){o(e||"Error while writing zip file.")}function u(e){o(e||"Error while reading file data.")}var p={add:function(n,p,g,h,v){var _,b,w,C=this._worker;function E(e,n){var o=r(16);l+=e||0,o.view.setUint32(0,1347094280),void 0!==n&&(_.view.setUint32(10,n,!0),o.view.setUint32(4,n,!0)),p&&(o.view.setUint32(8,e,!0),_.view.setUint32(14,e,!0),o.view.setUint32(12,p.size,!0),_.view.setUint32(18,p.size,!0)),t.writeUint8Array(o.array,(function(){l+=16,g()}),d)}function A(){v=v||{},n=n.trim(),v.directory&&"/"!=n.charAt(n.length-1)&&(n+="/"),a.hasOwnProperty(n)?o("File already exists."):(b=S(x(n)),s.push(n),function(e){var o;w=v.lastModDate||new Date,_=r(26),a[n]={headerArray:_.array,directory:v.directory,filename:b,offset:l,comment:S(x(v.comment||""))},_.view.setUint32(0,335546376),v.version&&_.view.setUint8(0,v.version),i||0===v.level||v.directory||_.view.setUint16(4,2048),_.view.setUint16(6,(w.getHours()<<6|w.getMinutes())<<5|w.getSeconds()/2,!0),_.view.setUint16(8,(w.getFullYear()-1980<<4|w.getMonth()+1)<<5|w.getDate(),!0),_.view.setUint16(22,b.length,!0),(o=r(30+b.length)).view.setUint32(0,1347093252),o.array.set(_.array,4),o.array.set(b,30),l+=o.array.length,t.writeUint8Array(o.array,e,d)}((function(){p?i||0===v.level?y(C,c++,p,t,0,p.size,!0,E,h,u,d):function(t,n,o,i,a,r,s,l,c){e.zip.useWebWorkers?f(t,{sn:n,options:{level:a},codecClass:"Deflater",crcType:"input"},o,i,0,o.size,s,r,l,c):m(new e.zip.Deflater,o,i,0,o.size,"input",s,r,l,c)}(C,c++,p,t,v.level,E,h,u,d):E()})))}p?p.init(A,u):A()},close:function(e){this._worker&&(this._worker.terminate(),this._worker=null);var n,o,i,c=0,u=0;for(o=0;o<s.length;o++)c+=46+(i=a[s[o]]).filename.length+i.comment.length;for(n=r(c+22),o=0;o<s.length;o++)i=a[s[o]],n.view.setUint32(u,1347092738),n.view.setUint16(u+4,5120),n.array.set(i.headerArray,u+6),n.view.setUint16(u+32,i.comment.length,!0),i.directory&&n.view.setUint8(u+38,16),n.view.setUint32(u+42,i.offset,!0),n.array.set(i.filename,u+46),n.array.set(i.comment,u+46+i.filename.length),u+=46+i.filename.length+i.comment.length;n.view.setUint32(u,1347093766),n.view.setUint16(u+8,s.length,!0),n.view.setUint16(u+10,s.length,!0),n.view.setUint32(u+12,c,!0),n.view.setUint32(u+16,l,!0),t.writeUint8Array(n.array,(function(){t.getData(e)}),d)},_worker:null};e.zip.useWebWorkers?T("deflater",(function(e){p._worker=e,n(p)}),(function(e){o(e)})):n(p)}i.prototype.append=function(e){for(var t=0|this.crc,n=this.table,o=0,i=0|e.length;o<i;o++)t=t>>>8^n[255&(t^e[o])];this.crc=t},i.prototype.get=function(){return~this.crc},i.prototype.table=function(){var e,t,n,o=[];for(e=0;e<256;e++){for(n=e,t=0;t<8;t++)1&n?n=n>>>1^3988292384:n>>>=1;o[e]=n}return o}(),a.prototype.append=function(e,t){return e},a.prototype.flush=function(){},l.prototype=new s,l.prototype.constructor=l,c.prototype=new s,c.prototype.constructor=c,d.prototype=new s,d.prototype.constructor=d,u.prototype.getData=function(e){e(this.data)},p.prototype=new u,p.prototype.constructor=p,g.prototype=new u,g.prototype.constructor=g,h.prototype=new u,h.prototype.constructor=h;var A={deflater:["z-worker.js","deflate.js"],inflater:["z-worker.js","inflate.js"]};function T(t,n,o){if(null===e.zip.workerScripts||null===e.zip.workerScriptsPath){var i,a,r;if(e.zip.workerScripts){if(i=e.zip.workerScripts[t],!Array.isArray(i))return void o(new Error("zip.workerScripts."+t+" is not an array!"));a=i,r=document.createElement("a"),i=a.map((function(e){return r.href=e,r.href}))}else(i=A[t].slice(0))[0]=(e.zip.workerScriptsPath||"")+i[0];var s=new Worker(i[0]);s.codecTime=s.crcTime=0,s.postMessage({type:"importScripts",scripts:i.slice(1)}),s.addEventListener("message",(function e(t){var i=t.data;if(i.error)return s.terminate(),void o(i.error);"importScripts"===i.type&&(s.removeEventListener("message",e),s.removeEventListener("error",l),n(s))})),s.addEventListener("error",l)}else o(new Error("Either zip.workerScripts or zip.workerScriptsPath may be set, not both."));function l(e){s.terminate(),o(e)}}function G(e){console.error(e)}e.zip={Reader:s,Writer:u,BlobReader:d,Data64URIReader:c,TextReader:l,BlobWriter:h,Data64URIWriter:g,TextWriter:p,createReader:function(e,t,n){n=n||G,e.init((function(){C(e,t,n)}),n)},createWriter:function(e,t,n,o){n=n||G,o=!!o,e.init((function(){E(e,t,n,o)}),n)},useWebWorkers:!0,workerScriptsPath:null,workerScripts:null}}(this)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(26),n(7);var o=n(1444),i=n(9);e.exports=new class{async register(e){const t=gDesigner.getEnv();if("production"===t||"trunk"===t||"lts"===t||"rc"===t){const t=(0,o.getOS)(),n=gDesigner.getVersion();return i.gApi.diagnostic(Object.assign({runtime:gContainer.getRuntime(),os:t,userAgent:window.navigator.userAgent,version:n},e))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOS=void 0;var o=n(1);t.getOS=()=>{let e=null;switch(o.GSystem.operatingSystem){case o.GSystem.OperatingSystem.Unix:e="Unix";break;case o.GSystem.OperatingSystem.Windows:e="Windows";break;case o.GSystem.OperatingSystem.OSX_IOS:e="OSX"}return e}},function(e,t,n){"use strict";n(17),n(22);const o=n(238);e.exports=class{constructor(){this._missingFonts=[]}start(){o.getInstance().addEventListener(o.MissingFontEvent,this._missingFontEvent,this)}stop(){o.getInstance().removeEventListener(o.MissingFontEvent,this._missingFontEvent,this)}getMissingFonts(){return[...new Set(this._missingFonts)]}_missingFontEvent(e){var t=e.evt;this._missingFonts.push(t.family)}}},function(e,t,n){"use strict";n(7);const{GFontManager:o}=n(1);e.exports=class{constructor(e){this._fontManager=e,this._fontManager.addEventListener(o.FontAvailableEvent,this._fontEvent,this),this._fontManager.addEventListener(o.FontUnavailableEvent,this._fontEvent,this),this._promise=new Promise(e=>{this._resolver=e})}_fontEvent(){this._checkPendingFonts()}_checkPendingFonts(){this._fontManager.hasPendingFonts()||(this._fontManager.removeEventListener(o.FontAvailableEvent,this._fontEvent,this),this._fontManager.removeEventListener(o.FontUnavailableEvent,this._fontEvent,this),this._resolver())}waitForAllPendingFonts(){return this._checkPendingFonts(),this._promise}}},function(e,t,n){"use strict";let o;n(17),n(7),n(22);class i{static async getInstance(){if(!o){const e=await n.e(12).then(n.t.bind(null,1712,7));o=e.default}return new i}parse(e){return o({blob:e})}}e.exports=i},function(e,t,n){"use strict";n(7);var o=n(1),i=n(34);n(9);n(1449),n(206),n(37),n(111);function a(e,t,n){this._document=e,this._storageItem=t,this._file=t.getFile(),this._action=n,this._init()}o.GObject.inherit(a,o.GObject),a.prototype._init=function(){this._dialog=$("<div></div>").gDialog({releaseOnClose:!0,className:"g-paywall-dialog",closeTimeout:1100}),$("<div></div>").addClass("header").append($("<span></span>").addClass("gravit-icon-welcome")).appendTo(this._dialog),$("<div></div>").addClass("content").append($("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GPaywallDialog","text.paywall-info"))).append($("<span></span>").addClass("price g-loading")).append($("<span></span>").text("."))).appendTo(this._dialog),$("<hr/>").appendTo(this._dialog),$("<div></div>").addClass("footer").append($("<button></button>").addClass("highlight").append($("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GPaywallDialog","text.paywall-buy")))).append($("<span></span>").addClass("price g-loading")).on("click",this._buy.bind(this))).append($("<button></button>").text(o.GLocale.get(new o.GLocaleKey("GPaywallDialog","text.paywall-edit"))).on("click",this.close.bind(this))).appendTo(this._dialog),this._load()},a.prototype._load=async function(){const e=await this._storageItem.getFormattedPrice();this._dialog.find("span.price").removeClass("g-loading").text(e)},a.prototype._buy=async function(){},a.prototype.open=async function(){this._dialog.gDialog("open",!0),await(0,i.sleep)(100),this._dialog.closest(".g-dialog").addClass("slide-up")},a.prototype.close=function(){this._dialog.gDialog("close"),this._dialog.closest(".g-dialog").removeClass("slide-up")},e.exports=a},function(e,t,n){"use strict";n(52),n(7),n(18),n(62),n(29);var o=n(1),i=n(34);function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"file.save";this._document=e,this._user=t,this._action=n,this._init()}o.GObject.inherit(a,o.GObject),a.prototype._init=function(){this._dialog=$("<div></div>").gDialog({releaseOnClose:!0,className:"g-confirmation-dialog"}),$("<div></div>").addClass("header").append($("<span></span>").addClass("gravit-icon-thanks")).appendTo(this._dialog);const e=gDesigner.getAction(this._action);let t,n="save";e.getId().includes("save")?t=o.GLocale.get(new o.GLocaleKey("GConfirmationDialog","text.confirm-save")):e.getId().includes("export")?(t=o.GLocale.get(new o.GLocaleKey("GConfirmationDialog","text.confirm-export")),n="export"):t=e.getTitle()instanceof o.GLocaleKey?o.GLocale.get(e.getTitle()):e.getTitle(),$("<div></div>").addClass("content").append($("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GConfirmationDialog","text.confirm-info-"+n)).replace("%email",this._user.email))).appendTo(this._dialog),$("<hr/>").appendTo(this._dialog),$("<div></div>").addClass("footer").append($("<button></button>").addClass("highlight").text(t).on("click",()=>{let e=[];"file.save"===this._action&&(e=[void 0,!0]),gDesigner.executeAction(this._action,e,"confirmationdialog"),this.close()})).appendTo(this._dialog)},a.prototype.open=async function(){this._dialog.gDialog("open",!0),await(0,i.sleep)(100),this._dialog.closest(".g-dialog").addClass("slide-up")},a.prototype.close=function(){this._dialog.gDialog("close"),this._dialog.closest(".g-dialog").removeClass("slide-up")},e.exports=a},function(e,t,n){"use strict";n(7);var o=n(776),i=n(1);n(240);function a(e,t,n,o,a,r){this._currentDocument=e,this._newDocument=t,this._localName=n,this._cloudName=o,this._callback=a,this._onCancel=r,this._dialog=$("<div></div>"),$("<div></div>").addClass("g-btn-close").css("display",this._onCancel?"":"none").append($("<span></span>").addClass("gravit-icon-close")).on("click",this.close.bind(this)).appendTo(this._dialog);var s=$("<div></div>").addClass("header").appendTo(this._dialog);$("<div></div>").addClass("title").append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GDocumentChooser","text.cloud.sync.title")))).appendTo(s),$("<div></div>").addClass("subtitle").append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GDocumentChooser","text.cloud.sync.subtitle")))).appendTo(s),this._container=$("<div></div>").addClass("container").appendTo(this._dialog),this._footer=$("<div></div>").addClass("footer").css("display",this._onCancel?"":"none").appendTo(this._dialog);let l=$("<div></div>").addClass("buttons").appendTo(this._footer);$("<button></button>").addClass("g-button").text(i.GLocale.get(new i.GLocaleKey("GLocale","cancel"))).on("click",this.close.bind(this)).appendTo(l);this._dialog.gDialog({releaseOnClose:!0,className:"g-document-chooser"}),this._updatePreview()}i.GObject.inherit(a,i.GObject),a.prototype.open=function(){this._dialog.gDialog("open",!1)},a.prototype.close=function(){this._dialog.gDialog("close"),this._onCancel&&this._onCancel()},a.prototype._updatePreview=function(){this._container.empty(),this._createPreview(this._newDocument,"online",this._cloudName,this._newDocument.lastModifiedDate()>this._currentDocument.lastModifiedDate()),this._createPreview(this._currentDocument,"offline",this._localName,this._currentDocument.lastModifiedDate()>this._newDocument.lastModifiedDate())},a.prototype._loadPreview=function(e,t){return new Promise((function(n){if("offline"!==t){var o=[],a=function(e){if(e.image.getStatus()===i.GImage.ImageStatus.Loaded||e.image.getStatus()===i.GImage.ImageStatus.Error){e.image.removeEventListener(i.GImage.StatusEvent,this);var t=o.indexOf(e.image);-1!==t&&o.splice(t,1),o.length||n()}};e.acceptChildren(e=>{e instanceof i.GImage&&(e.getStatus()===i.GImage.ImageStatus.Error&&e.getStatus()===i.GImage.ImageStatus.Loaded||(o.push(e),e.addEventListener(i.GImage.StatusEvent,a)))}),o.length||n()}else n()}))},a.prototype._createPreview=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=$("<div />").addClass("image"),s=$("<div></div>").addClass("preview").on("click",()=>{gDesigner.stats("documentchooser_click_preview",t),this.close(),this._callback(e)}).appendTo(this._container),l=$("<div></div>").addClass("preview-image loading").css("background",i.GPattern.asCSSBackground(null)).append(r).appendTo(s);this._loadPreview(e,t).then(()=>{var t=o.GBitmapExport.export(e);l.removeClass("loading"),r.css("background-image","url(".concat(t.toImageDataUrl(i.GBitmap.ImageType.JPEG,1),")"))});var c=function(e){return 0===e.getTime()?i.GLocale.get(new i.GLocaleKey("GDocumentChooser","text.cloud.unavailable")):i.GLocale.toLocaleDate(e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"})};s.append($("<div></div>").addClass("title").append($("<span></span>").text(n+" "+i.GLocale.get(new i.GLocaleKey("GDocumentChooser","text.cloud."+t))))).append($("<div></div>").addClass("subtitle").append($("<span></span>").text(c(e.lastModifiedDate())+(a?" "+i.GLocale.get(new i.GLocaleKey("GDocumentChooser","text.cloud.newer-file")):""))))},e.exports=a},function(e,t,n){var o=function(){"use strict";return o=function(e){if(this.REQUEST_TYPE={LOGIN:"LOGIN",RENEW_TOKEN:"RENEW_TOKEN",UNKNOWN:"UNKNOWN"},this.RESPONSE_TYPE={ID_TOKEN_TOKEN:"id_token token",TOKEN:"token"},this.CONSTANTS={ACCESS_TOKEN:"access_token",EXPIRES_IN:"expires_in",ID_TOKEN:"id_token",ERROR_DESCRIPTION:"error_description",SESSION_STATE:"session_state",ERROR:"error",STORAGE:{TOKEN_KEYS:"adal.token.keys",ACCESS_TOKEN_KEY:"adal.access.token.key",EXPIRATION_KEY:"adal.expiration.key",STATE_LOGIN:"adal.state.login",STATE_RENEW:"adal.state.renew",NONCE_IDTOKEN:"adal.nonce.idtoken",SESSION_STATE:"adal.session.state",USERNAME:"adal.username",IDTOKEN:"adal.idtoken",ERROR:"adal.error",ERROR_DESCRIPTION:"adal.error.description",LOGIN_REQUEST:"adal.login.request",LOGIN_ERROR:"adal.login.error",RENEW_STATUS:"adal.token.renew.status",ANGULAR_LOGIN_REQUEST:"adal.angular.login.request"},RESOURCE_DELIMETER:"|",CACHE_DELIMETER:"||",LOADFRAME_TIMEOUT:6e3,TOKEN_RENEW_STATUS_CANCELED:"Canceled",TOKEN_RENEW_STATUS_COMPLETED:"Completed",TOKEN_RENEW_STATUS_IN_PROGRESS:"In Progress",LOGGING_LEVEL:{ERROR:0,WARN:1,INFO:2,VERBOSE:3},LEVEL_STRING_MAP:{0:"ERROR:",1:"WARNING:",2:"INFO:",3:"VERBOSE:"},POPUP_WIDTH:483,POPUP_HEIGHT:600},o.prototype._singletonInstance)return o.prototype._singletonInstance;if(o.prototype._singletonInstance=this,this.instance="https://login.microsoftonline.com/",this.config={},this.callback=null,this.popUp=!1,this.isAngular=!1,this._user=null,this._activeRenewals={},this._loginInProgress=!1,this._acquireTokenInProgress=!1,this._renewStates=[],this._callBackMappedToRenewStates={},this._callBacksMappedToRenewStates={},this._openedWindows=[],this._requestType=this.REQUEST_TYPE.LOGIN,window._adalInstance=this,e.displayCall&&"function"!=typeof e.displayCall)throw new Error("displayCall is not a function");if(!e.clientId)throw new Error("clientId is required");this.config=this._cloneConfig(e),void 0===this.config.navigateToLoginRequestUrl&&(this.config.navigateToLoginRequestUrl=!0),this.config.popUp&&(this.popUp=!0),this.config.callback&&"function"==typeof this.config.callback&&(this.callback=this.config.callback),this.config.instance&&(this.instance=this.config.instance),this.config.loginResource||(this.config.loginResource=this.config.clientId),this.config.redirectUri||(this.config.redirectUri=window.location.href.split("?")[0].split("#")[0]),this.config.postLogoutRedirectUri||(this.config.postLogoutRedirectUri=window.location.href.split("?")[0].split("#")[0]),this.config.anonymousEndpoints||(this.config.anonymousEndpoints=[]),this.config.isAngular&&(this.isAngular=this.config.isAngular),this.config.loadFrameTimeout&&(this.CONSTANTS.LOADFRAME_TIMEOUT=this.config.loadFrameTimeout)},"undefined"!=typeof window&&(window.Logging={piiLoggingEnabled:!1,level:0,log:function(e){}}),o.prototype.login=function(){if(this._loginInProgress)this.info("Login in progress");else{this._loginInProgress=!0;var e=this._guid();this.config.state=e,this._idTokenNonce=this._guid();var t=this._getItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST);t&&""!==t?this._saveItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST,""):t=window.location.href,this.verbose("Expected state: "+e+" startPage:"+t),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,t),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,e,!0),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"");var n=this._getNavigateUrl("id_token",null)+"&nonce="+encodeURIComponent(this._idTokenNonce);this.config.displayCall?this.config.displayCall(n):this.popUp?(this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,""),this._renewStates.push(e),this.registerCallback(e,this.config.clientId,this.callback),this._loginPopup(n)):this.promptUser(n)}},o.prototype._openPopup=function(e,t,n,o){try{var i=window.screenLeft?window.screenLeft:window.screenX,a=window.screenTop?window.screenTop:window.screenY,r=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,s=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l=r/2-n/2+i,c=s/2-o/2+a,d=window.open(e,t,"width="+n+", height="+o+", top="+c+", left="+l);return d.focus&&d.focus(),d}catch(e){return this.warn("Error opening popup, "+e.message),this._loginInProgress=!1,this._acquireTokenInProgress=!1,null}},o.prototype._handlePopupError=function(e,t,n,o,i){this.warn(o),this._saveItem(this.CONSTANTS.STORAGE.ERROR,n),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,o),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,i),t&&this._activeRenewals[t]&&(this._activeRenewals[t]=null),this._loginInProgress=!1,this._acquireTokenInProgress=!1,e&&e(o,null,n)},o.prototype._loginPopup=function(e,t,n){var o=this._openPopup(e,"login",this.CONSTANTS.POPUP_WIDTH,this.CONSTANTS.POPUP_HEIGHT),i=n||this.callback;if(null!=o){if(this._openedWindows.push(o),-1!=this.config.redirectUri.indexOf("#"))var a=this.config.redirectUri.split("#")[0];else a=this.config.redirectUri;var r=this,s=window.setInterval((function(){if(!o||o.closed||void 0===o.closed){var e="Popup Window closed",n="Popup Window closed by UI action/ Popup Window handle destroyed due to cross zone navigation in IE/Edge";return r.isAngular&&r._broadcast("adal:popUpClosed",n+r.CONSTANTS.RESOURCE_DELIMETER+e),r._handlePopupError(i,t,e,n,n),void window.clearInterval(s)}try{var l=o.location;if(-1!=encodeURI(l.href).indexOf(encodeURI(a)))return r.isAngular?r._broadcast("adal:popUpHashChanged",l.hash):r.handleWindowCallback(l.hash),window.clearInterval(s),r._loginInProgress=!1,r._acquireTokenInProgress=!1,r.info("Closing popup window"),r._openedWindows=[],void o.close()}catch(e){}}),1)}else{var l="Popup Window is null. This can happen if you are using IE";this._handlePopupError(i,t,"Error opening popup",l,l)}},o.prototype._broadcast=function(e,t){!function(){if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}();var n=new CustomEvent(e,{detail:t});window.dispatchEvent(n)},o.prototype.loginInProgress=function(){return this._loginInProgress},o.prototype._hasResource=function(e){var t=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS);return t&&!this._isEmpty(t)&&t.indexOf(e+this.CONSTANTS.RESOURCE_DELIMETER)>-1},o.prototype.getCachedToken=function(e){if(!this._hasResource(e))return null;var t=this._getItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+e),n=this._getItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+e),o=this.config.expireOffsetSeconds||300;return n&&n>this._now()+o?t:(this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+e,""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+e,0),null)},o.prototype.getCachedUser=function(){if(this._user)return this._user;var e=this._getItem(this.CONSTANTS.STORAGE.IDTOKEN);return this._user=this._createUser(e),this._user},o.prototype.registerCallback=function(e,t,n){this._activeRenewals[t]=e,this._callBacksMappedToRenewStates[e]||(this._callBacksMappedToRenewStates[e]=[]);var o=this;this._callBacksMappedToRenewStates[e].push(n),this._callBackMappedToRenewStates[e]||(this._callBackMappedToRenewStates[e]=function(n,i,a,r){o._activeRenewals[t]=null;for(var s=0;s<o._callBacksMappedToRenewStates[e].length;++s)try{o._callBacksMappedToRenewStates[e][s](n,i,a,r)}catch(a){o.warn(a)}o._callBacksMappedToRenewStates[e]=null,o._callBackMappedToRenewStates[e]=null})},o.prototype._renewToken=function(e,t,n){this.info("renewToken is called for resource:"+e);var o=this._addAdalFrame("adalRenewFrame"+e),i=this._guid()+"|"+e;this.config.state=i,this._renewStates.push(i),this.verbose("Renew token Expected state: "+i),n=n||"token";var a=this._urlRemoveQueryStringParameter(this._getNavigateUrl(n,e),"prompt");n===this.RESPONSE_TYPE.ID_TOKEN_TOKEN&&(this._idTokenNonce=this._guid(),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),a+="&nonce="+encodeURIComponent(this._idTokenNonce)),a+="&prompt=none",a=this._addHintParameters(a),this.registerCallback(i,e,t),this.verbosePii("Navigate to:"+a),o.src="about:blank",this._loadFrameTimeout(a,"adalRenewFrame"+e,e)},o.prototype._renewIdToken=function(e,t){this.info("renewIdToken is called");var n=this._addAdalFrame("adalIdTokenFrame"),o=this._guid()+"|"+this.config.clientId;this._idTokenNonce=this._guid(),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),this.config.state=o,this._renewStates.push(o),this.verbose("Renew Idtoken Expected state: "+o);var i=null==t?null:this.config.clientId,a=(t=t||"id_token",this._urlRemoveQueryStringParameter(this._getNavigateUrl(t,i),"prompt"));a+="&prompt=none",a=this._addHintParameters(a),a+="&nonce="+encodeURIComponent(this._idTokenNonce),this.registerCallback(o,this.config.clientId,e),this.verbosePii("Navigate to:"+a),n.src="about:blank",this._loadFrameTimeout(a,"adalIdTokenFrame",this.config.clientId)},o.prototype._urlContainsQueryStringParameter=function(e,t){return new RegExp("[\\?&]"+e+"=").test(t)},o.prototype._urlRemoveQueryStringParameter=function(e,t){var n=new RegExp("(\\&"+t+"=)[^&]+");return e=e.replace(n,""),n=new RegExp("("+t+"=)[^&]+&"),e=e.replace(n,""),n=new RegExp("("+t+"=)[^&]+"),e=e.replace(n,"")},o.prototype._loadFrameTimeout=function(e,t,n){this.verbose("Set loading state to pending for: "+n),this._saveItem(this.CONSTANTS.STORAGE.RENEW_STATUS+n,this.CONSTANTS.TOKEN_RENEW_STATUS_IN_PROGRESS),this._loadFrame(e,t);var o=this;setTimeout((function(){if(o._getItem(o.CONSTANTS.STORAGE.RENEW_STATUS+n)===o.CONSTANTS.TOKEN_RENEW_STATUS_IN_PROGRESS){o.verbose("Loading frame has timed out after: "+o.CONSTANTS.LOADFRAME_TIMEOUT/1e3+" seconds for resource "+n);var e=o._activeRenewals[n];e&&o._callBackMappedToRenewStates[e]&&o._callBackMappedToRenewStates[e]("Token renewal operation failed due to timeout",null,"Token Renewal Failed"),o._saveItem(o.CONSTANTS.STORAGE.RENEW_STATUS+n,o.CONSTANTS.TOKEN_RENEW_STATUS_CANCELED)}}),o.CONSTANTS.LOADFRAME_TIMEOUT)},o.prototype._loadFrame=function(e,t){var n=this;n.info("LoadFrame: "+t);var o=t;setTimeout((function(){var t=n._addAdalFrame(o);""!==t.src&&"about:blank"!==t.src||(t.src=e,n._loadFrame(e,o))}),500)},o.prototype.acquireToken=function(e,t){if(this._isEmpty(e))return this.warn("resource is required"),void t("resource is required",null,"resource is required");var n=this.getCachedToken(e);return n?(this.info("Token is already in cache for resource:"+e),void t(null,n,null)):this._user||this.config.extraQueryParameter&&-1!==this.config.extraQueryParameter.indexOf("login_hint")?void(this._activeRenewals[e]?this.registerCallback(this._activeRenewals[e],e,t):(this._requestType=this.REQUEST_TYPE.RENEW_TOKEN,e===this.config.clientId?this._user?(this.verbose("renewing idtoken"),this._renewIdToken(t)):(this.verbose("renewing idtoken and access_token"),this._renewIdToken(t,this.RESPONSE_TYPE.ID_TOKEN_TOKEN)):this._user?(this.verbose("renewing access_token"),this._renewToken(e,t)):(this.verbose("renewing idtoken and access_token"),this._renewToken(e,t,this.RESPONSE_TYPE.ID_TOKEN_TOKEN)))):(this.warn("User login is required"),void t("User login is required",null,"login required"))},o.prototype.acquireTokenPopup=function(e,t,n,o){if(this._isEmpty(e))return this.warn("resource is required"),void o("resource is required",null,"resource is required");if(!this._user)return this.warn("User login is required"),void o("User login is required",null,"login required");if(this._acquireTokenInProgress)return this.warn("Acquire token interactive is already in progress"),void o("Acquire token interactive is already in progress",null,"Acquire token interactive is already in progress");var i=this._guid()+"|"+e;this.config.state=i,this._renewStates.push(i),this._requestType=this.REQUEST_TYPE.RENEW_TOKEN,this.verbose("Renew token Expected state: "+i);var a=this._urlRemoveQueryStringParameter(this._getNavigateUrl("token",e),"prompt");if(a+="&prompt=select_account",t&&(a+=t),n&&-1===a.indexOf("&claims"))a+="&claims="+encodeURIComponent(n);else if(n&&-1!==a.indexOf("&claims"))throw new Error("Claims cannot be passed as an extraQueryParameter");a=this._addHintParameters(a),this._acquireTokenInProgress=!0,this.info("acquireToken interactive is called for the resource "+e),this.registerCallback(i,e,o),this._loginPopup(a,e,o)},o.prototype.acquireTokenRedirect=function(e,t,n){if(this._isEmpty(e))return this.warn("resource is required"),void o("resource is required",null,"resource is required");var o=this.callback;if(!this._user)return this.warn("User login is required"),void o("User login is required",null,"login required");if(this._acquireTokenInProgress)return this.warn("Acquire token interactive is already in progress"),void o("Acquire token interactive is already in progress",null,"Acquire token interactive is already in progress");var i=this._guid()+"|"+e;this.config.state=i,this.verbose("Renew token Expected state: "+i);var a=this._urlRemoveQueryStringParameter(this._getNavigateUrl("token",e),"prompt");if(a+="&prompt=select_account",t&&(a+=t),n&&-1===a.indexOf("&claims"))a+="&claims="+encodeURIComponent(n);else if(n&&-1!==a.indexOf("&claims"))throw new Error("Claims cannot be passed as an extraQueryParameter");a=this._addHintParameters(a),this._acquireTokenInProgress=!0,this.info("acquireToken interactive is called for the resource "+e),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,window.location.href),this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,i,!0),this.promptUser(a)},o.prototype.promptUser=function(e){e?(this.infoPii("Navigate to:"+e),window.location.replace(e)):this.info("Navigate url is empty")},o.prototype.clearCache=function(){this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,""),this._saveItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST,""),this._saveItem(this.CONSTANTS.STORAGE.SESSION_STATE,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,""),this._renewStates=[],this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,""),this._saveItem(this.CONSTANTS.STORAGE.IDTOKEN,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,""),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,"");var e=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS);if(!this._isEmpty(e)){e=e.split(this.CONSTANTS.RESOURCE_DELIMETER);for(var t=0;t<e.length&&""!==e[t];t++)this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+e[t],""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+e[t],0)}this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,"")},o.prototype.clearCacheForResource=function(e){this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,""),this._hasResource(e)&&(this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+e,""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+e,0))},o.prototype.logOut=function(){var e;if(this.clearCache(),this._user=null,this.config.logOutUri)e=this.config.logOutUri;else{var t="common",n="";this.config.tenant&&(t=this.config.tenant),this.config.postLogoutRedirectUri&&(n="post_logout_redirect_uri="+encodeURIComponent(this.config.postLogoutRedirectUri)),e=this.instance+t+"/oauth2/logout?"+n}this.infoPii("Logout navigate to: "+e),this.promptUser(e)},o.prototype._isEmpty=function(e){return void 0===e||!e||0===e.length},o.prototype.getUser=function(e){if("function"!=typeof e)throw new Error("callback is not a function");if(this._user)e(null,this._user);else{var t=this._getItem(this.CONSTANTS.STORAGE.IDTOKEN);this._isEmpty(t)?(this.warn("User information is not available"),e("User information is not available",null)):(this.info("User exists in cache: "),this._user=this._createUser(t),e(null,this._user))}},o.prototype._addHintParameters=function(e){if(this._user&&this._user.profile)if(this._user.profile.sid&&-1!==e.indexOf("&prompt=none"))this._urlContainsQueryStringParameter("sid",e)||(e+="&sid="+encodeURIComponent(this._user.profile.sid));else if(this._user.profile.upn&&(this._urlContainsQueryStringParameter("login_hint",e)||(e+="&login_hint="+encodeURIComponent(this._user.profile.upn)),!this._urlContainsQueryStringParameter("domain_hint",e)&&this._user.profile.upn.indexOf("@")>-1)){var t=this._user.profile.upn.split("@");e+="&domain_hint="+encodeURIComponent(t[t.length-1])}return e},o.prototype._createUser=function(e){var t=null,n=this._extractIdToken(e);return n&&n.hasOwnProperty("aud")&&(n.aud.toLowerCase()===this.config.clientId.toLowerCase()?(t={userName:"",profile:n},n.hasOwnProperty("upn")?t.userName=n.upn:n.hasOwnProperty("email")&&(t.userName=n.email)):this.warn("IdToken has invalid aud field")),t},o.prototype._getHash=function(e){return e.indexOf("#/")>-1?e=e.substring(e.indexOf("#/")+2):e.indexOf("#")>-1&&(e=e.substring(1)),e},o.prototype.isCallback=function(e){e=this._getHash(e);var t=this._deserialize(e);return t.hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)||t.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)||t.hasOwnProperty(this.CONSTANTS.ID_TOKEN)},o.prototype.getLoginError=function(){return this._getItem(this.CONSTANTS.STORAGE.LOGIN_ERROR)},o.prototype.getRequestInfo=function(e){e=this._getHash(e);var t=this._deserialize(e),n={valid:!1,parameters:{},stateMatch:!1,stateResponse:"",requestType:this.REQUEST_TYPE.UNKNOWN};if(t&&(n.parameters=t,t.hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)||t.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)||t.hasOwnProperty(this.CONSTANTS.ID_TOKEN))){n.valid=!0;var o="";if(!t.hasOwnProperty("state"))return this.warn("No state returned"),n;if(this.verbose("State: "+t.state),o=t.state,n.stateResponse=o,this._matchState(n))return n;if(!n.stateMatch&&window.parent){n.requestType=this._requestType;for(var i=this._renewStates,a=0;a<i.length;a++)if(i[a]===n.stateResponse){n.stateMatch=!0;break}}}return n},o.prototype._matchNonce=function(e){var t=this._getItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN);if(t){t=t.split(this.CONSTANTS.CACHE_DELIMETER);for(var n=0;n<t.length;n++)if(t[n]&&t[n]===e.profile.nonce)return!0}return!1},o.prototype._matchState=function(e){var t=this._getItem(this.CONSTANTS.STORAGE.STATE_LOGIN);if(t){t=t.split(this.CONSTANTS.CACHE_DELIMETER);for(var n=0;n<t.length;n++)if(t[n]&&t[n]===e.stateResponse)return e.requestType=this.REQUEST_TYPE.LOGIN,e.stateMatch=!0,!0}var o=this._getItem(this.CONSTANTS.STORAGE.STATE_RENEW);if(o){o=o.split(this.CONSTANTS.CACHE_DELIMETER);for(n=0;n<o.length;n++)if(o[n]&&o[n]===e.stateResponse)return e.requestType=this.REQUEST_TYPE.RENEW_TOKEN,e.stateMatch=!0,!0}return!1},o.prototype._getResourceFromState=function(e){if(e){var t=e.indexOf("|");if(t>-1&&t+1<e.length)return e.substring(t+1)}return""},o.prototype.saveTokenFromHash=function(e){this.info("State status:"+e.stateMatch+"; Request type:"+e.requestType),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"");var t,n=this._getResourceFromState(e.stateResponse);e.parameters.hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)?(this.infoPii("Error :"+e.parameters.error+"; Error description:"+e.parameters[this.CONSTANTS.ERROR_DESCRIPTION]),this._saveItem(this.CONSTANTS.STORAGE.ERROR,e.parameters.error),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,e.parameters[this.CONSTANTS.ERROR_DESCRIPTION]),e.requestType===this.REQUEST_TYPE.LOGIN&&(this._loginInProgress=!1,this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,e.parameters.error_description))):e.stateMatch?(this.info("State is right"),e.parameters.hasOwnProperty(this.CONSTANTS.SESSION_STATE)&&this._saveItem(this.CONSTANTS.STORAGE.SESSION_STATE,e.parameters[this.CONSTANTS.SESSION_STATE]),e.parameters.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)&&(this.info("Fragment has access token"),this._hasResource(n)||(t=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS)||"",this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,t+n+this.CONSTANTS.RESOURCE_DELIMETER)),this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+n,e.parameters[this.CONSTANTS.ACCESS_TOKEN]),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+n,this._expiresIn(e.parameters[this.CONSTANTS.EXPIRES_IN]))),e.parameters.hasOwnProperty(this.CONSTANTS.ID_TOKEN)&&(this.info("Fragment has id token"),this._loginInProgress=!1,this._user=this._createUser(e.parameters[this.CONSTANTS.ID_TOKEN]),this._user&&this._user.profile?this._matchNonce(this._user)?(this._saveItem(this.CONSTANTS.STORAGE.IDTOKEN,e.parameters[this.CONSTANTS.ID_TOKEN]),n=this.config.loginResource?this.config.loginResource:this.config.clientId,this._hasResource(n)||(t=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS)||"",this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,t+n+this.CONSTANTS.RESOURCE_DELIMETER)),this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+n,e.parameters[this.CONSTANTS.ID_TOKEN]),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+n,this._user.profile.exp)):(this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,"Nonce received: "+this._user.profile.nonce+" is not same as requested: "+this._getItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN)),this._user=null):(e.parameters.error="invalid id_token",e.parameters.error_description="Invalid id_token. id_token: "+e.parameters[this.CONSTANTS.ID_TOKEN],this._saveItem(this.CONSTANTS.STORAGE.ERROR,"invalid id_token"),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"Invalid id_token. id_token: "+e.parameters[this.CONSTANTS.ID_TOKEN])))):(e.parameters.error="Invalid_state",e.parameters.error_description="Invalid_state. state: "+e.stateResponse,this._saveItem(this.CONSTANTS.STORAGE.ERROR,"Invalid_state"),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"Invalid_state. state: "+e.stateResponse));this._saveItem(this.CONSTANTS.STORAGE.RENEW_STATUS+n,this.CONSTANTS.TOKEN_RENEW_STATUS_COMPLETED)},o.prototype.getResourceForEndpoint=function(e){if(this.config&&this.config.anonymousEndpoints)for(var t=0;t<this.config.anonymousEndpoints.length;t++)if(e.indexOf(this.config.anonymousEndpoints[t])>-1)return null;if(this.config&&this.config.endpoints)for(var n in this.config.endpoints)if(e.indexOf(n)>-1)return this.config.endpoints[n];return e.indexOf("http://")>-1||e.indexOf("https://")>-1?this._getHostFromUri(e)===this._getHostFromUri(this.config.redirectUri)?this.config.loginResource:null:this.config.loginResource},o.prototype._getHostFromUri=function(e){var t=String(e).replace(/^(https?:)\/\//,"");return t=t.split("/")[0]},o.prototype.handleWindowCallback=function(e){if(null==e&&(e=window.location.hash),this.isCallback(e)){var t=null,n=!1;this._openedWindows.length>0&&this._openedWindows[this._openedWindows.length-1].opener&&this._openedWindows[this._openedWindows.length-1].opener._adalInstance?(t=this._openedWindows[this._openedWindows.length-1].opener._adalInstance,n=!0):window.parent&&window.parent._adalInstance&&(t=window.parent._adalInstance);var o,i,a=t.getRequestInfo(e),r=null;i=n||window.parent!==window?t._callBackMappedToRenewStates[a.stateResponse]:t.callback,t.info("Returned from redirect url"),t.saveTokenFromHash(a),a.requestType===this.REQUEST_TYPE.RENEW_TOKEN&&window.parent?(window.parent!==window?t.verbose("Window is in iframe, acquiring token silently"):t.verbose("acquiring token interactive in progress"),o=a.parameters[t.CONSTANTS.ACCESS_TOKEN]||a.parameters[t.CONSTANTS.ID_TOKEN],r=t.CONSTANTS.ACCESS_TOKEN):a.requestType===this.REQUEST_TYPE.LOGIN&&(o=a.parameters[t.CONSTANTS.ID_TOKEN],r=t.CONSTANTS.ID_TOKEN);var s=a.parameters[t.CONSTANTS.ERROR_DESCRIPTION],l=a.parameters[t.CONSTANTS.ERROR];try{i&&i(s,o,l,r)}catch(e){t.error("Error occurred in user defined callback function: "+e)}window.parent!==window||n||(t.config.navigateToLoginRequestUrl?window.location.href=t._getItem(t.CONSTANTS.STORAGE.LOGIN_REQUEST):window.location.hash="")}},o.prototype._getNavigateUrl=function(e,t){var n="common";this.config.tenant&&(n=this.config.tenant);var o=this.instance+n+"/oauth2/authorize"+this._serialize(e,this.config,t)+this._addLibMetadata();return this.info("Navigate url:"+o),o},o.prototype._extractIdToken=function(e){var t=this._decodeJwt(e);if(!t)return null;try{var n=t.JWSPayload,o=this._base64DecodeStringUrlSafe(n);return o?JSON.parse(o):(this.info("The returned id_token could not be base64 url safe decoded."),null)}catch(e){this.error("The returned id_token could not be decoded",e)}return null},o.prototype._base64DecodeStringUrlSafe=function(e){return e=e.replace(/-/g,"+").replace(/_/g,"/"),window.atob?decodeURIComponent(escape(window.atob(e))):decodeURIComponent(escape(this._decode(e)))},o.prototype._decode=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=(e=String(e).replace(/=+$/,"")).length;if(n%4==1)throw new Error("The token to be decoded is not correctly encoded.");for(var o,i,a,r,s,l,c,d,u="",p=0;p<n;p+=4){if(o=t.indexOf(e.charAt(p)),i=t.indexOf(e.charAt(p+1)),a=t.indexOf(e.charAt(p+2)),r=t.indexOf(e.charAt(p+3)),p+2===n-1){l=(s=o<<18|i<<12|a<<6)>>16&255,c=s>>8&255,u+=String.fromCharCode(l,c);break}if(p+1===n-1){l=(s=o<<18|i<<12)>>16&255,u+=String.fromCharCode(l);break}l=(s=o<<18|i<<12|a<<6|r)>>16&255,c=s>>8&255,d=255&s,u+=String.fromCharCode(l,c,d)}return u},o.prototype._decodeJwt=function(e){if(this._isEmpty(e))return null;var t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);return!t||t.length<4?(this.warn("The returned id_token is not parseable."),null):{header:t[1],JWSPayload:t[2],JWSSig:t[3]}},o.prototype._convertUrlSafeToRegularBase64EncodedString=function(e){return e.replace("-","+").replace("_","/")},o.prototype._serialize=function(e,t,n){var o=[];if(null!==t){o.push("?response_type="+e),o.push("client_id="+encodeURIComponent(t.clientId)),n&&o.push("resource="+encodeURIComponent(n)),o.push("redirect_uri="+encodeURIComponent(t.redirectUri)),o.push("state="+encodeURIComponent(t.state)),t.hasOwnProperty("slice")&&o.push("slice="+encodeURIComponent(t.slice)),t.hasOwnProperty("extraQueryParameter")&&o.push(t.extraQueryParameter);var i=t.correlationId?t.correlationId:this._guid();o.push("client-request-id="+encodeURIComponent(i))}return o.join("&")},o.prototype._deserialize=function(e){var t,n=/\+/g,o=/([^&=]+)=([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(n," "))},a={};for(t=o.exec(e);t;)a[i(t[1])]=i(t[2]),t=o.exec(e);return a},o.prototype._decimalToHex=function(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t},o.prototype._guid=function(){var e=window.crypto||window.msCrypto;if(e&&e.getRandomValues){var t=new Uint8Array(16);return e.getRandomValues(t),t[6]|=64,t[6]&=79,t[8]|=128,t[8]&=191,this._decimalToHex(t[0])+this._decimalToHex(t[1])+this._decimalToHex(t[2])+this._decimalToHex(t[3])+"-"+this._decimalToHex(t[4])+this._decimalToHex(t[5])+"-"+this._decimalToHex(t[6])+this._decimalToHex(t[7])+"-"+this._decimalToHex(t[8])+this._decimalToHex(t[9])+"-"+this._decimalToHex(t[10])+this._decimalToHex(t[11])+this._decimalToHex(t[12])+this._decimalToHex(t[13])+this._decimalToHex(t[14])+this._decimalToHex(t[15])}for(var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",o="0123456789abcdef",i=0,a="",r=0;r<36;r++)"-"!==n[r]&&"4"!==n[r]&&(i=16*Math.random()|0),"x"===n[r]?a+=o[i]:"y"===n[r]?(i&=3,a+=o[i|=8]):a+=n[r];return a},o.prototype._expiresIn=function(e){return e||(e=3599),this._now()+parseInt(e,10)},o.prototype._now=function(){return Math.round((new Date).getTime()/1e3)},o.prototype._addAdalFrame=function(e){if(void 0!==e){this.info("Add adal frame to document:"+e);var t=document.getElementById(e);if(!t){if(document.createElement&&document.documentElement&&(window.opera||-1===window.navigator.userAgent.indexOf("MSIE 5.0"))){var n=document.createElement("iframe");n.setAttribute("id",e),n.setAttribute("aria-hidden","true"),n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height=n.borderWidth="0px",t=document.getElementsByTagName("body")[0].appendChild(n)}else document.body&&document.body.insertAdjacentHTML&&document.body.insertAdjacentHTML("beforeEnd",'<iframe name="'+e+'" id="'+e+'" style="display:none"></iframe>');window.frames&&window.frames[e]&&(t=window.frames[e])}return t}},o.prototype._saveItem=function(e,t,n){if(this.config&&this.config.cacheLocation&&"localStorage"===this.config.cacheLocation){if(!this._supportsLocalStorage())return this.info("Local storage is not supported"),!1;if(n){var o=this._getItem(e)||"";localStorage.setItem(e,o+t+this.CONSTANTS.CACHE_DELIMETER)}else localStorage.setItem(e,t);return!0}return this._supportsSessionStorage()?(sessionStorage.setItem(e,t),!0):(this.info("Session storage is not supported"),!1)},o.prototype._getItem=function(e){return this.config&&this.config.cacheLocation&&"localStorage"===this.config.cacheLocation?this._supportsLocalStorage()?localStorage.getItem(e):(this.info("Local storage is not supported"),null):this._supportsSessionStorage()?sessionStorage.getItem(e):(this.info("Session storage is not supported"),null)},o.prototype._supportsLocalStorage=function(){try{return!!window.localStorage&&(window.localStorage.setItem("storageTest","A"),"A"==window.localStorage.getItem("storageTest")&&(window.localStorage.removeItem("storageTest"),!window.localStorage.getItem("storageTest")))}catch(e){return!1}},o.prototype._supportsSessionStorage=function(){try{return!!window.sessionStorage&&(window.sessionStorage.setItem("storageTest","A"),"A"==window.sessionStorage.getItem("storageTest")&&(window.sessionStorage.removeItem("storageTest"),!window.sessionStorage.getItem("storageTest")))}catch(e){return!1}},o.prototype._cloneConfig=function(e){if(null===e||"object"!=typeof e)return e;var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},o.prototype._addLibMetadata=function(){return"&x-client-SKU=Js&x-client-Ver="+this._libVersion()},o.prototype.log=function(e,t,n,o){if(e<=Logging.level){if(!Logging.piiLoggingEnabled&&o)return;var i=(new Date).toUTCString(),a="";a=this.config.correlationId?i+":"+this.config.correlationId+"-"+this._libVersion()+"-"+this.CONSTANTS.LEVEL_STRING_MAP[e]+" "+t:i+":"+this._libVersion()+"-"+this.CONSTANTS.LEVEL_STRING_MAP[e]+" "+t,n&&(a+="\nstack:\n"+n.stack),Logging.log(a)}},o.prototype.error=function(e,t){this.log(this.CONSTANTS.LOGGING_LEVEL.ERROR,e,t)},o.prototype.warn=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.WARN,e,null)},o.prototype.info=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.INFO,e,null)},o.prototype.verbose=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.VERBOSE,e,null)},o.prototype.errorPii=function(e,t){this.log(this.CONSTANTS.LOGGING_LEVEL.ERROR,e,t,!0)},o.prototype.warnPii=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.WARN,e,null,!0)},o.prototype.infoPii=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.INFO,e,null,!0)},o.prototype.verbosePii=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.VERBOSE,e,null,!0)},o.prototype._libVersion=function(){return"1.0.18"},e.exports&&(e.exports=o,e.exports.inject=function(e){return new o(e)}),o}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GMicrosoftUser=r,t.default=void 0,n(3);var o=n(1),i=n(1453),a=n(1217);function r(e){let{Id:t,Email:n,Title:o,UserId:i,UserPrincipalName:a}=e;this._id=t,this._email=n,this._name=o,this._userId=i,this._userPrincipalName=a}o.GObject.inherit(r,i.GCloudUser),r.ValidRoles=[a.GCloudRole.Type.Viewer,a.GCloudRole.Type.ContentEditor],r.prototype._userId=null,r.prototype.getValidRoles=function(){return r.ValidRoles},r.prototype.getEmail=function(){return this._email},r.prototype.getUserReference=function(){return this.getEmail()},r.prototype.getUserPrincipalName=function(){return this._userPrincipalName},r.prototype.getNameId=function(){return this._userId&&this._userId.NameId},r.prototype.toString=function(){return"[GObject GMicrosoftUser]"};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GCloudUser=r,t.default=void 0,n(52),n(3),n(62);var o=n(1217);const i=n(0),a=n(166);function r(){}i.inherit(r,a),r.ValidRoles=[o.GCloudRole.Type.Viewer,o.GCloudRole.Type.Coauthor,o.GCloudRole.Type.Creator,o.GCloudRole.Type.Reviewer,o.GCloudRole.Type.Approver,o.GCloudRole.Type.ContentEditor],r.prototype._role=null,r.prototype._id=null,r.prototype._name=null,r.prototype._email=null,r.prototype.setRole=function(e){if(!(e instanceof o.GCloudRole))throw new Error("Incorrect type parameter");if(!this.getValidRoles().includes(e.getRole()))throw new Error("Incorrect User role");return this._role=e,this},r.prototype.getRole=function(){return this._role},r.prototype.getValidRoles=function(){return r.ValidRoles},r.prototype.getEmail=function(){return this._email},r.prototype.getId=function(){return this._id},r.prototype.getName=function(){return this._name},r.prototype.toString=function(){return"[Object GCloudUser]"};t.default=r},function(e,t,n){"use strict";n(255);const o=n(9),{IS_LOCALHOST:i,IS_RC:a}=n(217);o.IS_TEAMS="teams.coreldraw.app"===window.location.hostname;const r=window.location.hostname.endsWith(".ngrok.io");o.IS_TEAMS?o.gApi.url=o.cloudTeamsURL:i||r?(o.trunkwebcdr&&(o.gApi.webcdr=o.cloudTrunkURL+"/api/webcdr"),o.gApi.url=o.cloudTrunkURL):o.IS_BETA?(o.cloudBetaURL&&(o.gApi.url=o.cloudBetaURL),o.betaWebcdr&&(o.gApi.webcdr=o.betaWebcdr)):a?(o.cloudRCURL&&(o.gApi.url=o.cloudRCURL),o.stagingWebcdr&&(o.gApi.webcdr=o.stagingWebcdr)):o.IS_TRUNK&&(o.gApi.url=o.cloudTrunkURL,o.trunkwebcdr&&(o.gApi.webcdr=o.trunkwebcdr)),!o.gApi.webcdr&&o.webcdr&&(o.gApi.webcdr=o.webcdr),window.gApi=o.gApi,e.exports=o},function(e,t,n){window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19)}([function(e,t,n){"use strict";var o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,i=0,a=t.length;i<a;i++)!o&&i in t||((o=o||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.sendMessageEventToChild=t.waitForMessageQueue=t.sendMessageToParent=t.uninitializeCommunication=t.initializeCommunication=t.Communication=void 0;var i=n(4),a=n(7),r=n(3),s=function(){};t.Communication=s;var l=function(){function e(){}return e.parentMessageQueue=[],e.childMessageQueue=[],e.nextMessageId=0,e.callbacks={},e}();function c(e,t,n){var o;t instanceof Function?n=t:t instanceof Array&&(o=t),t=s.parentWindow,e=function(e,t){return{id:l.nextMessageId++,func:e,timestamp:Date.now(),args:t||[]}}(e,o),a.GlobalVars.isFramelessWindow?s.currentWindow&&s.currentWindow.nativeInterface&&s.currentWindow.nativeInterface.framelessPostMessage(JSON.stringify(e)):(o=g(t),t&&o?t.postMessage(e,o):p(t).push(e)),n&&(l.callbacks[e.id]=n)}function d(e){var t,n;e&&e.data&&"object"==typeof e.data&&function(e,t){return(!s.currentWindow||e!==s.currentWindow)&&(s.currentWindow&&s.currentWindow.location&&t&&t===s.currentWindow.location.origin||!!(i.validOriginRegExp.test(t.toLowerCase())||a.GlobalVars.additionalValidOriginsRegexp&&a.GlobalVars.additionalValidOriginsRegexp.test(t.toLowerCase())))}(t=e.source||e.originalEvent&&e.originalEvent.source,n=e.origin||e.originalEvent&&e.originalEvent.origin)&&(function(e,t){a.GlobalVars.isFramelessWindow||s.parentWindow&&!s.parentWindow.closed&&e!==s.parentWindow?s.childWindow&&!s.childWindow.closed&&e!==s.childWindow||(s.childWindow=e,s.childOrigin=t):(s.parentWindow=e,s.parentOrigin=t),s.parentWindow&&s.parentWindow.closed&&(s.parentWindow=null,s.parentOrigin=null),s.childWindow&&s.childWindow.closed&&(s.childWindow=null,s.childOrigin=null),h(s.parentWindow),h(s.childWindow)}(t,n),t===s.parentWindow?u(e):t===s.childWindow&&function(e){var t,n;"id"in e.data&&"func"in e.data&&(t=e.data,e=(n=(0,r.callHandler)(t.func,t.args))[0],n=n[1],e&&void 0!==n?f(t.id,Array.isArray(n)?n:[n]):c(t.func,t.args,(function(){for(var e,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];s.childWindow&&(e=n.pop(),f(t.id,n,e))})))}(e))}function u(e){var t,n;"id"in e.data&&"number"==typeof e.data.id?(n=e.data,(t=l.callbacks[n.id])&&(t.apply(null,o(o([],n.args,!0),[n.isPartialResponse],!1)),function(e){return!0===e.data.isPartialResponse}(e)||delete l.callbacks[n.id])):"func"in e.data&&"string"==typeof e.data.func&&(n=e.data,(0,r.callHandler)(n.func,n.args))}function p(e){return e===s.parentWindow?l.parentMessageQueue:e===s.childWindow?l.childMessageQueue:[]}function g(e){return e===s.parentWindow?s.parentOrigin:e===s.childWindow?s.childOrigin:null}function h(e){for(var t=g(e),n=p(e);e&&t&&0<n.length;)e.postMessage(n.shift(),t)}function f(e,t,n){var o=s.childWindow;t=function(e,t,n){return{id:e,args:t||[],isPartialResponse:n}}(e,t,n),n=g(o),o&&n&&o.postMessage(t,n)}t.initializeCommunication=function(e,t){l.messageListener=function(e){return d(e)},s.currentWindow=s.currentWindow||window,s.parentWindow=s.currentWindow.parent!==s.currentWindow.self?s.currentWindow.parent:s.currentWindow.opener,(s.parentWindow||t)&&s.currentWindow.addEventListener("message",l.messageListener,!1),s.parentWindow||(a.GlobalVars.isFramelessWindow=!0,window.onNativeMessage=u);try{s.parentOrigin="*",c("initialize",[i.version],e)}finally{s.parentOrigin=null}},t.uninitializeCommunication=function(){s.currentWindow.removeEventListener("message",l.messageListener,!1),s.parentWindow=null,s.parentOrigin=null,s.childWindow=null,s.childOrigin=null,l.parentMessageQueue=[],l.childMessageQueue=[],l.nextMessageId=0,l.callbacks={}},t.sendMessageToParent=c,t.waitForMessageQueue=function(e,t){var n=s.currentWindow.setInterval((function(){0===p(e).length&&(clearInterval(n),t())}),100)},t.sendMessageEventToChild=function(e,t){var n=s.childWindow;e=function(e,t){return{func:e,args:t||[]}}(e,t),t=g(n),n&&t?n.postMessage(e,t):p(n).push(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processAdditionalValidOrigins=t.isApiSupportedOnMobile=t.isHostClientMobile=t.isAPISupportedByPlatform=t.ensureInitialized=void 0;var o=n(2),i=n(6),a=n(4),r=n(7),s=n(5);function l(e){return void 0===e&&(e=a.defaultSDKVersionForCompatCheck),e=(0,s.compareSDKVersions)(r.GlobalVars.clientSupportedSDKVersion,e),!isNaN(e)&&0<=e}function c(){return r.GlobalVars.hostClientType==o.HostClientType.android||r.GlobalVars.hostClientType==o.HostClientType.ios}t.ensureInitialized=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!r.GlobalVars.initializeCalled)throw new Error("The library has not yet been initialized");if(r.GlobalVars.frameContext&&e&&0<e.length){for(var n=!1,o=0;o<e.length;o++)if(e[o]===r.GlobalVars.frameContext){n=!0;break}if(!n)throw new Error("This call is not allowed in the '"+r.GlobalVars.frameContext+"' context")}},t.isAPISupportedByPlatform=l,t.isHostClientMobile=c,t.isApiSupportedOnMobile=function(e){return void 0===e&&(e=a.defaultSDKVersionForCompatCheck),c()?l(e)?null:{errorCode:i.ErrorCode.OLD_PLATFORM}:{errorCode:i.ErrorCode.NOT_SUPPORTED_ON_PLATFORM}},t.processAdditionalValidOrigins=function(e){e=r.GlobalVars.additionalValidOrigins.concat(e.filter((function(e){return"string"==typeof e&&a.userOriginUrlValidationRegExp.test(e)})));var t={};e=e.filter((function(e){return!t[e]&&(t[e]=!0)})),r.GlobalVars.additionalValidOrigins=e,0<r.GlobalVars.additionalValidOrigins.length?r.GlobalVars.additionalValidOriginsRegexp=(0,s.generateRegExpFromUrls)(r.GlobalVars.additionalValidOrigins):r.GlobalVars.additionalValidOriginsRegexp=null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelType=t.TaskModuleDimension=t.UserTeamRole=t.TeamType=t.FrameContexts=t.HostClientType=void 0,function(e){e.desktop="desktop",e.web="web",e.android="android",e.ios="ios",e.ipados="ipados",e.rigel="rigel",e.surfaceHub="surfaceHub",e.teamsRoomsWindows="teamsRoomsWindows",e.teamsRoomsAndroid="teamsRoomsAndroid",e.teamsPhones="teamsPhones",e.teamsDisplays="teamsDisplays"}(t.HostClientType||(t.HostClientType={})),function(e){e.settings="settings",e.content="content",e.authentication="authentication",e.remove="remove",e.task="task",e.sidePanel="sidePanel",e.stage="stage",e.meetingStage="meetingStage"}(t.FrameContexts||(t.FrameContexts={})),function(e){e[e.Standard=0]="Standard",e[e.Edu=1]="Edu",e[e.Class=2]="Class",e[e.Plc=3]="Plc",e[e.Staff=4]="Staff"}(t.TeamType||(t.TeamType={})),function(e){e[e.Admin=0]="Admin",e[e.User=1]="User",e[e.Guest=2]="Guest"}(t.UserTeamRole||(t.UserTeamRole={})),function(e){e.Large="large",e.Medium="medium",e.Small="small"}(t.TaskModuleDimension||(t.TaskModuleDimension={})),function(e){e.Regular="Regular",e.Private="Private",e.Shared="Shared"}(t.ChannelType||(t.ChannelType={}))},function(e,t,n){"use strict";var o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,i=0,a=t.length;i<a;i++)!o&&i in t||((o=o||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.registerBeforeUnloadHandler=t.registerOnLoadHandler=t.registerFocusEnterHandler=t.registerBackButtonHandler=t.handleThemeChange=t.registerOnThemeChangeHandler=t.removeHandler=t.registerHandler=t.callHandler=t.initializeHandlers=void 0;var i=n(8),a=n(0),r=function(){function e(){}return e.handlers={},e}();function s(e){r.themeChangeHandler&&r.themeChangeHandler(e),a.Communication.childWindow&&(0,a.sendMessageEventToChild)("themeChange",[e])}function l(){r.backButtonPressHandler&&r.backButtonPressHandler()||(0,i.navigateBack)()}function c(e){r.focusEnterHandler&&r.focusEnterHandler(e)}function d(e){r.loadHandler&&r.loadHandler(e),a.Communication.childWindow&&(0,a.sendMessageEventToChild)("load",[e])}function u(){function e(){(0,a.sendMessageToParent)("readyToUnload",[])}r.beforeUnloadHandler&&r.beforeUnloadHandler(e)||e()}t.initializeHandlers=function(){r.handlers.themeChange=s,r.handlers.backButtonPress=l,r.handlers.load=d,r.handlers.beforeUnload=u,r.handlers.focusEnter=c},t.callHandler=function(e,t){return(e=r.handlers[e])?[!0,e.apply(this,t)]:[!1,void 0]},t.registerHandler=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=[]),t?(r.handlers[e]=t,n&&(0,a.sendMessageToParent)("registerHandler",o([e],i,!0))):delete r.handlers[e]},t.removeHandler=function(e){delete r.handlers[e]},t.registerOnThemeChangeHandler=function(e){(r.themeChangeHandler=e)&&(0,a.sendMessageToParent)("registerHandler",["themeChange"])},t.handleThemeChange=s,t.registerBackButtonHandler=function(e){(r.backButtonPressHandler=e)&&(0,a.sendMessageToParent)("registerHandler",["backButton"])},t.registerFocusEnterHandler=function(e){(r.focusEnterHandler=e)&&(0,a.sendMessageToParent)("registerHandler",["focusEnter"])},t.registerOnLoadHandler=function(e){(r.loadHandler=e)&&(0,a.sendMessageToParent)("registerHandler",["load"])},t.registerBeforeUnloadHandler=function(e){(r.beforeUnloadHandler=e)&&(0,a.sendMessageToParent)("registerHandler",["beforeUnload"])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userOriginUrlValidationRegExp=t.validOriginRegExp=t.validOrigins=t.scanBarCodeAPIMobileSupportVersion=t.getMediaCallbackSupportVersion=t.mediaAPISupportVersion=t.captureImageMobileSupportVersion=t.peoplePickerRequiredVersion=t.locationAPIsRequiredVersion=t.getUserJoinedTeamsSupportedAndroidClientVersion=t.imageOutputFormatsAPISupportVersion=t.nonFullScreenVideoModeAPISupportVersion=t.videoAndImageMediaAPISupportVersion=t.defaultSDKVersionForCompatCheck=t.version=void 0,n=n(5),t.version="1.13.1",t.defaultSDKVersionForCompatCheck="2.0.1",t.videoAndImageMediaAPISupportVersion="2.0.2",t.nonFullScreenVideoModeAPISupportVersion="2.0.3",t.imageOutputFormatsAPISupportVersion="2.0.4",t.getUserJoinedTeamsSupportedAndroidClientVersion="2.0.1",t.locationAPIsRequiredVersion="1.9.0",t.peoplePickerRequiredVersion="2.0.0",t.captureImageMobileSupportVersion="1.7.0",t.mediaAPISupportVersion="1.8.0",t.getMediaCallbackSupportVersion="2.0.0",t.scanBarCodeAPIMobileSupportVersion="1.9.0",t.validOrigins=["https://teams.microsoft.com","https://teams.microsoft.us","https://gov.teams.microsoft.us","https://dod.teams.microsoft.us","https://int.teams.microsoft.com","https://teams.live.com","https://devspaces.skype.com","https://ssauth.skype.com","https://local.teams.live.com","https://local.teams.live.com:8080","https://local.teams.office.com","https://local.teams.office.com:8080","https://outlook.office.com","https://outlook-sdf.office.com","https://*.teams.microsoft.com","https://www.office.com","https://word.office.com","https://excel.office.com","https://powerpoint.office.com","https://www.officeppe.com","https://*.www.office.com"],t.validOriginRegExp=(0,n.generateRegExpFromUrls)(t.validOrigins),t.userOriginUrlValidationRegExp=/^https\:\/\//},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateGUID=t.compareSDKVersions=t.getGenericOnCompleteHandler=t.generateRegExpFromUrls=void 0;var o=n(22);function i(e){for(var t="^",n=e.split("."),o=0;o<n.length;o++)t+=(0<o?"[.]":"")+n[o].replace("*","[^/^.]+");return t+"$"}t.generateRegExpFromUrls=function(e){for(var t="",n=0;n<e.length;n++)t+=(0===n?"":"|")+i(e[n]);return new RegExp(t)},t.getGenericOnCompleteHandler=function(e){return function(t,n){if(!t)throw new Error(e||n)}},t.compareSDKVersions=function(e,t){if("string"!=typeof e||"string"!=typeof t)return NaN;var n=e.split("."),o=t.split(".");function i(e){return/^\d+$/.test(e)}if(!n.every(i)||!o.every(i))return NaN;for(;n.length<o.length;)n.push("0");for(;o.length<n.length;)o.push("0");for(var a=0;a<n.length;++a)if(Number(n[a])!=Number(o[a]))return Number(n[a])>Number(o[a])?1:-1;return 0},t.generateGUID=function(){return o.v4()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorCode=t.FileOpenPreference=void 0,function(e){e.Inline="inline",e.Desktop="desktop",e.Web="web"}(t.FileOpenPreference||(t.FileOpenPreference={})),function(e){e[e.NOT_SUPPORTED_ON_PLATFORM=100]="NOT_SUPPORTED_ON_PLATFORM",e[e.INTERNAL_ERROR=500]="INTERNAL_ERROR",e[e.NOT_SUPPORTED_IN_CURRENT_CONTEXT=501]="NOT_SUPPORTED_IN_CURRENT_CONTEXT",e[e.PERMISSION_DENIED=1e3]="PERMISSION_DENIED",e[e.NETWORK_ERROR=2e3]="NETWORK_ERROR",e[e.NO_HW_SUPPORT=3e3]="NO_HW_SUPPORT",e[e.INVALID_ARGUMENTS=4e3]="INVALID_ARGUMENTS",e[e.UNAUTHORIZED_USER_OPERATION=5e3]="UNAUTHORIZED_USER_OPERATION",e[e.INSUFFICIENT_RESOURCES=6e3]="INSUFFICIENT_RESOURCES",e[e.THROTTLE=7e3]="THROTTLE",e[e.USER_ABORT=8e3]="USER_ABORT",e[e.OPERATION_TIMED_OUT=8001]="OPERATION_TIMED_OUT",e[e.OLD_PLATFORM=9e3]="OLD_PLATFORM",e[e.FILE_NOT_FOUND=404]="FILE_NOT_FOUND",e[e.SIZE_EXCEEDED=1e4]="SIZE_EXCEEDED"}(t.ErrorCode||(t.ErrorCode={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalVars=void 0;var o=function(){function e(){}return e.initializeCalled=!1,e.initializeCompleted=!1,e.additionalValidOrigins=[],e.additionalValidOriginsRegexp=null,e.initializeCallbacks=[],e.isFramelessWindow=!1,e.printCapabilityEnabled=!1,e}();t.GlobalVars=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stageView=t.sharing=t.video=t.people=t.monetization=t.meeting=t.location=t.media=t.menus=t.ParentAppWindow=t.ChildAppWindow=t.tasks=t.settings=t.navigateToTab=t.navigateCrossDomain=t.navigateBack=t.returnFocus=t.shareDeepLink=t.setFrameContext=t.registerAppButtonHoverLeaveHandler=t.registerAppButtonHoverEnterHandler=t.registerAppButtonClickHandler=t.registerOnThemeChangeHandler=t.registerOnLoadHandler=t.registerFullScreenHandler=t.registerChangeSettingsHandler=t.registerFocusEnterHandler=t.registerBeforeUnloadHandler=t.registerBackButtonHandler=t.print=t.initializeWithFrameContext=t.initialize=t.getTabInstances=t.getMruTabInstances=t.getContext=t.executeDeepLink=t.enablePrintCapability=t.FileOpenPreference=t.ErrorCode=t.ChannelType=t.UserTeamRole=t.TeamType=t.TaskModuleDimension=t.HostClientType=t.FrameContexts=t.authentication=t.appInitialization=void 0;var o=n(25);Object.defineProperty(t,"appInitialization",{enumerable:!0,get:function(){return o.appInitialization}});var i=n(11);Object.defineProperty(t,"authentication",{enumerable:!0,get:function(){return i.authentication}});var a=n(2);Object.defineProperty(t,"FrameContexts",{enumerable:!0,get:function(){return a.FrameContexts}}),Object.defineProperty(t,"HostClientType",{enumerable:!0,get:function(){return a.HostClientType}}),Object.defineProperty(t,"TaskModuleDimension",{enumerable:!0,get:function(){return a.TaskModuleDimension}}),Object.defineProperty(t,"TeamType",{enumerable:!0,get:function(){return a.TeamType}}),Object.defineProperty(t,"UserTeamRole",{enumerable:!0,get:function(){return a.UserTeamRole}}),Object.defineProperty(t,"ChannelType",{enumerable:!0,get:function(){return a.ChannelType}});var r=n(6);Object.defineProperty(t,"ErrorCode",{enumerable:!0,get:function(){return r.ErrorCode}}),Object.defineProperty(t,"FileOpenPreference",{enumerable:!0,get:function(){return r.FileOpenPreference}});var s=n(26);Object.defineProperty(t,"enablePrintCapability",{enumerable:!0,get:function(){return s.enablePrintCapability}}),Object.defineProperty(t,"executeDeepLink",{enumerable:!0,get:function(){return s.executeDeepLink}}),Object.defineProperty(t,"getContext",{enumerable:!0,get:function(){return s.getContext}}),Object.defineProperty(t,"getMruTabInstances",{enumerable:!0,get:function(){return s.getMruTabInstances}}),Object.defineProperty(t,"getTabInstances",{enumerable:!0,get:function(){return s.getTabInstances}}),Object.defineProperty(t,"initialize",{enumerable:!0,get:function(){return s.initialize}}),Object.defineProperty(t,"initializeWithFrameContext",{enumerable:!0,get:function(){return s.initializeWithFrameContext}}),Object.defineProperty(t,"print",{enumerable:!0,get:function(){return s.print}}),Object.defineProperty(t,"registerBackButtonHandler",{enumerable:!0,get:function(){return s.registerBackButtonHandler}}),Object.defineProperty(t,"registerBeforeUnloadHandler",{enumerable:!0,get:function(){return s.registerBeforeUnloadHandler}}),Object.defineProperty(t,"registerFocusEnterHandler",{enumerable:!0,get:function(){return s.registerFocusEnterHandler}}),Object.defineProperty(t,"registerChangeSettingsHandler",{enumerable:!0,get:function(){return s.registerChangeSettingsHandler}}),Object.defineProperty(t,"registerFullScreenHandler",{enumerable:!0,get:function(){return s.registerFullScreenHandler}}),Object.defineProperty(t,"registerOnLoadHandler",{enumerable:!0,get:function(){return s.registerOnLoadHandler}}),Object.defineProperty(t,"registerOnThemeChangeHandler",{enumerable:!0,get:function(){return s.registerOnThemeChangeHandler}}),Object.defineProperty(t,"registerAppButtonClickHandler",{enumerable:!0,get:function(){return s.registerAppButtonClickHandler}}),Object.defineProperty(t,"registerAppButtonHoverEnterHandler",{enumerable:!0,get:function(){return s.registerAppButtonHoverEnterHandler}}),Object.defineProperty(t,"registerAppButtonHoverLeaveHandler",{enumerable:!0,get:function(){return s.registerAppButtonHoverLeaveHandler}}),Object.defineProperty(t,"setFrameContext",{enumerable:!0,get:function(){return s.setFrameContext}}),Object.defineProperty(t,"shareDeepLink",{enumerable:!0,get:function(){return s.shareDeepLink}});var l=n(27);Object.defineProperty(t,"returnFocus",{enumerable:!0,get:function(){return l.returnFocus}}),Object.defineProperty(t,"navigateBack",{enumerable:!0,get:function(){return l.navigateBack}}),Object.defineProperty(t,"navigateCrossDomain",{enumerable:!0,get:function(){return l.navigateCrossDomain}}),Object.defineProperty(t,"navigateToTab",{enumerable:!0,get:function(){return l.navigateToTab}});var c=n(12);Object.defineProperty(t,"settings",{enumerable:!0,get:function(){return c.settings}});var d=n(28);Object.defineProperty(t,"tasks",{enumerable:!0,get:function(){return d.tasks}});var u=n(16);Object.defineProperty(t,"ChildAppWindow",{enumerable:!0,get:function(){return u.ChildAppWindow}}),Object.defineProperty(t,"ParentAppWindow",{enumerable:!0,get:function(){return u.ParentAppWindow}});var p=n(15);Object.defineProperty(t,"menus",{enumerable:!0,get:function(){return p.menus}});var g=n(17);Object.defineProperty(t,"media",{enumerable:!0,get:function(){return g.media}});var h=n(29);Object.defineProperty(t,"location",{enumerable:!0,get:function(){return h.location}});var f=n(30);Object.defineProperty(t,"meeting",{enumerable:!0,get:function(){return f.meeting}});var m=n(31);Object.defineProperty(t,"monetization",{enumerable:!0,get:function(){return m.monetization}});var y=n(32);Object.defineProperty(t,"people",{enumerable:!0,get:function(){return y.people}});var v=n(33);Object.defineProperty(t,"video",{enumerable:!0,get:function(){return v.video}});var _=n(34);Object.defineProperty(t,"sharing",{enumerable:!0,get:function(){return _.sharing}});var b=n(35);Object.defineProperty(t,"stageView",{enumerable:!0,get:function(){return b.stageView}})},function(e,t){var n,o,i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);i?(n=new Uint8Array(16),e.exports=function(){return i(n),n}):(o=new Array(16),e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o})},function(e,t){for(var n=[],o=0;o<256;++o)n[o]=(o+256).toString(16).substr(1);e.exports=function(e,t){var o=t||0;return[(t=n)[e[o++]],t[e[o++]],t[e[o++]],t[e[o++]],"-",t[e[o++]],t[e[o++]],"-",t[e[o++]],t[e[o++]],"-",t[e[o++]],t[e[o++]],"-",t[e[o++]],t[e[o++]],t[e[o++]],t[e[o++]],t[e[o++]],t[e[+o]]].join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authentication=void 0;var o=n(1),i=n(7),a=n(2),r=n(0),s=n(3);!function(e){var t,n;function l(){c();try{r.Communication.childWindow&&r.Communication.childWindow.close()}finally{r.Communication.childWindow=null,r.Communication.childOrigin=null}}function c(){n&&(clearInterval(n),n=0),(0,s.removeHandler)("initialize"),(0,s.removeHandler)("navigateCrossDomain")}function d(){c(),n=r.Communication.currentWindow.setInterval((function(){if(!r.Communication.childWindow||r.Communication.childWindow.closed)p("CancelledByUser");else{var e=r.Communication.childOrigin;try{r.Communication.childOrigin="*",(0,r.sendMessageEventToChild)("ping")}finally{r.Communication.childOrigin=e}}}),100),(0,s.registerHandler)("initialize",(function(){return[a.FrameContexts.authentication,i.GlobalVars.hostClientType]})),(0,s.registerHandler)("navigateCrossDomain",(function(){return!1}))}function u(e){try{t&&t.successCallback&&t.successCallback(e)}finally{t=null,l()}}function p(e){try{t&&t.failureCallback&&t.failureCallback(e)}finally{t=null,l()}}function g(e,t,n){var o;e&&((o=document.createElement("a")).href=decodeURIComponent(e),o.host&&o.host!==window.location.host&&"outlook.office.com"===o.host&&-1<o.search.indexOf("client_type=Win32_Outlook")&&(t&&"result"===t&&(n&&(o.href=h(o.href,"result",n)),r.Communication.currentWindow.location.assign(h(o.href,"authSuccess",""))),t&&"reason"===t&&(n&&(o.href=h(o.href,"reason",n)),r.Communication.currentWindow.location.assign(h(o.href,"authFailure","")))))}function h(e,t,n){var o=e.indexOf("#"),i=(i=-1===o?"#":e.substr(o))+"&"+t+(""!==n?"="+n:"");return(e=-1===o?e:e.substr(0,o))+i}e.initialize=function(){(0,s.registerHandler)("authentication.authenticate.success",u,!1),(0,s.registerHandler)("authentication.authenticate.failure",p,!1)},e.registerAuthenticationHandlers=function(e){t=e},e.authenticate=function(e){var n=void 0!==e?e:t;(0,o.ensureInitialized)(a.FrameContexts.content,a.FrameContexts.sidePanel,a.FrameContexts.settings,a.FrameContexts.remove,a.FrameContexts.task,a.FrameContexts.stage,a.FrameContexts.meetingStage),i.GlobalVars.hostClientType===a.HostClientType.desktop||i.GlobalVars.hostClientType===a.HostClientType.android||i.GlobalVars.hostClientType===a.HostClientType.ios||i.GlobalVars.hostClientType===a.HostClientType.rigel||i.GlobalVars.hostClientType===a.HostClientType.teamsRoomsWindows||i.GlobalVars.hostClientType===a.HostClientType.teamsRoomsAndroid||i.GlobalVars.hostClientType===a.HostClientType.teamsPhones||i.GlobalVars.hostClientType===a.HostClientType.teamsDisplays?((e=document.createElement("a")).href=n.url,(0,r.sendMessageToParent)("authentication.authenticate",[e.href,n.width,n.height,n.isExternal],(function(e,t){e?n.successCallback(t):n.failureCallback(t)}))):function(e){t=e,l();var n=t.width||600,o=t.height||400,i=(n=Math.min(n,r.Communication.currentWindow.outerWidth-400),o=Math.min(o,r.Communication.currentWindow.outerHeight-200),document.createElement("a"));i.href=t.url.replace("{oauthRedirectMethod}","web");var a=void 0!==r.Communication.currentWindow.screenLeft?r.Communication.currentWindow.screenLeft:r.Communication.currentWindow.screenX;e=void 0!==r.Communication.currentWindow.screenTop?r.Communication.currentWindow.screenTop:r.Communication.currentWindow.screenY,a+=r.Communication.currentWindow.outerWidth/2-n/2,e+=r.Communication.currentWindow.outerHeight/2-o/2,r.Communication.childWindow=r.Communication.currentWindow.open(i.href,"_blank","toolbar=no, location=yes, status=no, menubar=no, scrollbars=yes, top="+e+", left="+a+", width="+n+", height="+o),r.Communication.childWindow?d():p("FailedToOpenWindow")}(n)},e.getAuthToken=function(e){(0,o.ensureInitialized)(),(0,r.sendMessageToParent)("authentication.getAuthToken",[e.resources,e.claims,e.silent],(function(t,n){t?e.successCallback(n):e.failureCallback(n)}))},e.getUser=function(e){(0,o.ensureInitialized)(),(0,r.sendMessageToParent)("authentication.getUser",(function(t,n){t?e.successCallback(n):e.failureCallback(n)}))},e.notifySuccess=function(e,t){g(t,"result",e),(0,o.ensureInitialized)(a.FrameContexts.authentication),(0,r.sendMessageToParent)("authentication.authenticate.success",[e]),(0,r.waitForMessageQueue)(r.Communication.parentWindow,(function(){return setTimeout((function(){return r.Communication.currentWindow.close()}),200)}))},e.notifyFailure=function(e,t){g(t,"reason",e),(0,o.ensureInitialized)(a.FrameContexts.authentication),(0,r.sendMessageToParent)("authentication.authenticate.failure",[e]),(0,r.waitForMessageQueue)(r.Communication.parentWindow,(function(){return setTimeout((function(){return r.Communication.currentWindow.close()}),200)}))}}(t.authentication||(t.authentication={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.settings=void 0;var o=n(1),i=n(2),a=n(5),r=n(0),s=n(3);!function(e){var t,n;function l(e){e=new c(e),t?t(e):e.notifySuccess()}e.initialize=function(){(0,s.registerHandler)("settings.save",l,!1),(0,s.registerHandler)("settings.remove",d,!1)},e.setValidityState=function(e){(0,o.ensureInitialized)(i.FrameContexts.settings,i.FrameContexts.remove),(0,r.sendMessageToParent)("settings.setValidityState",[e])},e.getSettings=function(e){(0,o.ensureInitialized)(i.FrameContexts.content,i.FrameContexts.settings,i.FrameContexts.remove,i.FrameContexts.sidePanel),(0,r.sendMessageToParent)("settings.getSettings",e)},e.setSettings=function(e,t){(0,o.ensureInitialized)(i.FrameContexts.content,i.FrameContexts.settings,i.FrameContexts.sidePanel),(0,r.sendMessageToParent)("settings.setSettings",[e],t||(0,a.getGenericOnCompleteHandler)())},e.registerOnSaveHandler=function(e){(0,o.ensureInitialized)(i.FrameContexts.settings),(t=e)&&(0,r.sendMessageToParent)("registerHandler",["save"])},e.registerOnRemoveHandler=function(e){(0,o.ensureInitialized)(i.FrameContexts.remove,i.FrameContexts.settings),(n=e)&&(0,r.sendMessageToParent)("registerHandler",["remove"])};var c=function(){function e(e){this.notified=!1,this.result=e||{}}return e.prototype.notifySuccess=function(){this.ensureNotNotified(),(0,r.sendMessageToParent)("settings.save.success"),this.notified=!0},e.prototype.notifyFailure=function(e){this.ensureNotNotified(),(0,r.sendMessageToParent)("settings.save.failure",[e]),this.notified=!0},e.prototype.ensureNotNotified=function(){if(this.notified)throw new Error("The SaveEvent may only notify success or failure once.")},e}();function d(){var e=new u;n?n(e):e.notifySuccess()}var u=function(){function e(){this.notified=!1}return e.prototype.notifySuccess=function(){this.ensureNotNotified(),(0,r.sendMessageToParent)("settings.remove.success"),this.notified=!0},e.prototype.notifyFailure=function(e){this.ensureNotNotified(),(0,r.sendMessageToParent)("settings.remove.failure",[e]),this.notified=!0},e.prototype.ensureNotNotified=function(){if(this.notified)throw new Error("The removeEvent may only notify success or failure once.")},e}()}(t.settings||(t.settings={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logs=void 0;var o=n(1),i=n(0),a=n(3);(t.logs||(t.logs={})).registerGetLogHandler=function(e){(0,o.ensureInitialized)(),e?(0,a.registerHandler)("log.request",(function(){var t=e();(0,i.sendMessageToParent)("log.receive",[t])})):(0,a.removeHandler)("log.request")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerUserSettingsChangeHandler=t.getConfigSetting=t.getChatMembers=t.registerCustomHandler=t.sendCustomEvent=t.sendCustomMessage=t.uploadCustomApp=t.showNotification=t.openFilePreview=t.exitFullscreen=t.enterFullscreen=t.getUserJoinedTeams=t.initializePrivateApis=void 0;var o=n(1),i=n(2),a=n(5),r=n(0),s=n(3),l=n(7),c=n(6),d=n(4);t.initializePrivateApis=function(){},t.getUserJoinedTeams=function(e,t){if((0,o.ensureInitialized)(),(l.GlobalVars.hostClientType===i.HostClientType.android||l.GlobalVars.hostClientType===i.HostClientType.teamsRoomsAndroid||l.GlobalVars.hostClientType===i.HostClientType.teamsPhones||l.GlobalVars.hostClientType===i.HostClientType.teamsDisplays)&&!(0,o.isAPISupportedByPlatform)(d.getUserJoinedTeamsSupportedAndroidClientVersion)){var n={errorCode:c.ErrorCode.OLD_PLATFORM};throw new Error(JSON.stringify(n))}(0,r.sendMessageToParent)("getUserJoinedTeams",[t],e)},t.enterFullscreen=function(){(0,o.ensureInitialized)(i.FrameContexts.content),(0,r.sendMessageToParent)("enterFullscreen",[])},t.exitFullscreen=function(){(0,o.ensureInitialized)(i.FrameContexts.content),(0,r.sendMessageToParent)("exitFullscreen",[])},t.openFilePreview=function(e){(0,o.ensureInitialized)(i.FrameContexts.content,i.FrameContexts.task),e=[e.entityId,e.title,e.description,e.type,e.objectUrl,e.downloadUrl,e.webPreviewUrl,e.webEditUrl,e.baseUrl,e.editFile,e.subEntityId,e.viewerAction,e.fileOpenPreference,e.conversationId],(0,r.sendMessageToParent)("openFilePreview",e)},t.showNotification=function(e){(0,o.ensureInitialized)(i.FrameContexts.content),e=[e.message,e.notificationType],(0,r.sendMessageToParent)("showNotification",e)},t.uploadCustomApp=function(e,t){(0,o.ensureInitialized)(),(0,r.sendMessageToParent)("uploadCustomApp",[e],t||(0,a.getGenericOnCompleteHandler)())},t.sendCustomMessage=function(e,t,n){(0,o.ensureInitialized)(),(0,r.sendMessageToParent)(e,t,n)},t.sendCustomEvent=function(e,t){if((0,o.ensureInitialized)(),!r.Communication.childWindow)throw new Error("The child window has not yet been initialized or is not present");(0,r.sendMessageEventToChild)(e,t)},t.registerCustomHandler=function(e,t){var n=this;(0,o.ensureInitialized)(),(0,s.registerHandler)(e,(function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return t.apply(n,e)}))},t.getChatMembers=function(e){(0,o.ensureInitialized)(),(0,r.sendMessageToParent)("getChatMembers",e)},t.getConfigSetting=function(e,t){(0,o.ensureInitialized)(),(0,r.sendMessageToParent)("getConfigSetting",[t],e)},t.registerUserSettingsChangeHandler=function(e,t){(0,o.ensureInitialized)(),(0,s.registerHandler)("userSettingsChange",t,!0,[e])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.menus=void 0;var o=n(1),i=n(0),a=n(3);!function(e){!function(e){e[e.ifRoom=0]="ifRoom",e[e.overflowOnly=1]="overflowOnly"}(e.DisplayMode||(e.DisplayMode={}));var t,n,r,s=function(){this.enabled=!0,this.selected=!1};function l(e){r&&r(e)||((0,o.ensureInitialized)(),(0,i.sendMessageToParent)("viewConfigItemPress",[e]))}function c(e){t&&t(e)||((0,o.ensureInitialized)(),(0,i.sendMessageToParent)("handleNavBarMenuItemPress",[e]))}function d(e){n&&n(e)||((0,o.ensureInitialized)(),(0,i.sendMessageToParent)("handleActionMenuItemPress",[e]))}e.MenuItem=s,function(e){e.dropDown="dropDown",e.popOver="popOver"}(e.MenuListType||(e.MenuListType={})),e.initialize=function(){(0,a.registerHandler)("navBarMenuItemPress",c,!1),(0,a.registerHandler)("actionMenuItemPress",d,!1),(0,a.registerHandler)("setModuleView",l,!1)},e.setUpViews=function(e,t){(0,o.ensureInitialized)(),r=t,(0,i.sendMessageToParent)("setUpViews",[e])},e.setNavBarMenu=function(e,n){(0,o.ensureInitialized)(),t=n,(0,i.sendMessageToParent)("setNavBarMenu",[e])},e.showActionMenu=function(e,t){(0,o.ensureInitialized)(),n=t,(0,i.sendMessageToParent)("showActionMenu",[e])}}(t.menus||(t.menus={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParentAppWindow=t.ChildAppWindow=void 0;var o=n(1),i=n(2),a=n(5),r=n(0),s=n(3);n=function(){function e(){}return e.prototype.postMessage=function(e,t){(0,o.ensureInitialized)(),(0,r.sendMessageToParent)("messageForChild",[e],t||(0,a.getGenericOnCompleteHandler)())},e.prototype.addEventListener=function(e,t){"message"===e&&(0,s.registerHandler)("messageForParent",t)},e}(),t.ChildAppWindow=n,n=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!1,configurable:!0}),e.prototype.postMessage=function(e,t){(0,o.ensureInitialized)(i.FrameContexts.task),(0,r.sendMessageToParent)("messageForParent",[e],t||(0,a.getGenericOnCompleteHandler)())},e.prototype.addEventListener=function(e,t){"message"===e&&(0,s.registerHandler)("messageForChild",t)},e}(),t.ParentAppWindow=n},function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.media=void 0;var a=n(7),r=n(6),s=n(1),l=n(2),c=n(5),d=n(18),u=n(0),p=n(3),g=n(4);!function(e){!function(e){e.Base64="base64",e.ID="id"}(e.FileFormat||(e.FileFormat={}));var t=function(){};e.File=t,e.captureImage=function(e){if(!e)throw new Error("[captureImage] Callback cannot be null");(0,s.ensureInitialized)(l.FrameContexts.content,l.FrameContexts.task),a.GlobalVars.isFramelessWindow?(0,s.isAPISupportedByPlatform)(g.captureImageMobileSupportVersion)?(0,u.sendMessageToParent)("captureImage",e):e({errorCode:r.ErrorCode.OLD_PLATFORM},void 0):e({errorCode:r.ErrorCode.NOT_SUPPORTED_ON_PLATFORM},void 0)};var n,o,h=function(e){function t(t){void 0===t&&(t=null);var n=e.call(this)||this;return t&&(n.content=t.content,n.format=t.format,n.mimeType=t.mimeType,n.name=t.name,n.preview=t.preview,n.size=t.size),n}return i(t,e),t.prototype.getMedia=function(e){if(!e)throw new Error("[get Media] Callback cannot be null");(0,s.ensureInitialized)(l.FrameContexts.content,l.FrameContexts.task),(0,s.isAPISupportedByPlatform)(g.mediaAPISupportVersion)?(0,d.validateGetMediaInputs)(this.mimeType,this.format,this.content)?(0,s.isAPISupportedByPlatform)(g.getMediaCallbackSupportVersion)?this.getMediaViaCallback(e):this.getMediaViaHandler(e):e({errorCode:r.ErrorCode.INVALID_ARGUMENTS},null):e({errorCode:r.ErrorCode.OLD_PLATFORM},null)},t.prototype.getMediaViaCallback=function(e){var t={mediaMimeType:this.mimeType,assembleAttachment:[]},n=[this.content];(0,u.sendMessageToParent)("getMedia",n,(function(n){var o;e&&(n&&n.error?e(n.error,null):n&&n.mediaChunk?n.mediaChunk.chunkSequence<=0?(o=(0,d.createFile)(t.assembleAttachment,t.mediaMimeType),e(n.error,o)):(n=(0,d.decodeAttachment)(n.mediaChunk,t.mediaMimeType),t.assembleAttachment.push(n)):e({errorCode:r.ErrorCode.INTERNAL_ERROR,message:"data received is null"},null))}))},t.prototype.getMediaViaHandler=function(e){var t=(0,c.generateGUID)(),n={mediaMimeType:this.mimeType,assembleAttachment:[]},o=[t,this.content];this.content&&e&&(0,u.sendMessageToParent)("getMedia",o),(0,p.registerHandler)("getMedia"+t,(function(o){var i;e&&((i=JSON.parse(o)).error?(e(i.error,null),(0,p.removeHandler)("getMedia"+t)):i.mediaChunk?i.mediaChunk.chunkSequence<=0?(o=(0,d.createFile)(n.assembleAttachment,n.mediaMimeType),e(i.error,o),(0,p.removeHandler)("getMedia"+t)):(i=(0,d.decodeAttachment)(i.mediaChunk,n.mediaMimeType),n.assembleAttachment.push(i)):(e({errorCode:r.ErrorCode.INTERNAL_ERROR,message:"data received is null"},null),(0,p.removeHandler)("getMedia"+t)))}))},t}(t);e.Media=h,t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getMediaType=function(){return o.Video},t.prototype.notifyEventToApp=function(e){if(this.controllerCallback)switch(e){case n.StartRecording:if(this.controllerCallback.onRecordingStarted){this.controllerCallback.onRecordingStarted();break}}},t}(function(){function e(e){this.controllerCallback=e}return e.prototype.notifyEventToHost=function(e,t){(0,s.ensureInitialized)(l.FrameContexts.content,l.FrameContexts.task);var n=(0,s.isApiSupportedOnMobile)(g.nonFullScreenVideoModeAPISupportVersion);n?t&&t(n):(e={mediaType:this.getMediaType(),mediaControllerEvent:e},(0,u.sendMessageToParent)("media.controller",[e],(function(e){t&&t(e)})))},e.prototype.stop=function(e){this.notifyEventToHost(n.StopRecording,e)},e}()),e.VideoController=t,function(e){e[e.StartRecording=1]="StartRecording",e[e.StopRecording=2]="StopRecording"}(n=n||{}),function(e){e[e.Photo=1]="Photo",e[e.Document=2]="Document",e[e.Whiteboard=3]="Whiteboard",e[e.BusinessCard=4]="BusinessCard"}(e.CameraStartMode||(e.CameraStartMode={})),function(e){e[e.Camera=1]="Camera",e[e.Gallery=2]="Gallery"}(e.Source||(e.Source={})),function(e){e[e.Image=1]="Image",e[e.Video=2]="Video",e[e.VideoAndImage=3]="VideoAndImage",e[e.Audio=4]="Audio"}(o=e.MediaType||(e.MediaType={})),function(e){e[e.ID=1]="ID",e[e.URL=2]="URL"}(e.ImageUriType||(e.ImageUriType={})),function(e){e[e.IMAGE=1]="IMAGE",e[e.PDF=2]="PDF"}(e.ImageOutputFormats||(e.ImageOutputFormats={})),e.selectMedia=function(e,t){if(!t)throw new Error("[select Media] Callback cannot be null");var n,o;(0,s.ensureInitialized)(l.FrameContexts.content,l.FrameContexts.task),(0,s.isAPISupportedByPlatform)(g.mediaAPISupportVersion)?(n=(0,d.isMediaCallSupportedOnMobile)(e))?t(n,null):(0,d.validateSelectMediaInputs)(e)?(0,u.sendMessageToParent)("selectMedia",[e],(function(n,o,i){if(i)(0,d.isVideoControllerRegistered)(e)&&e.videoProps.videoController.notifyEventToApp(i);else if(o){for(var a=[],r=0,s=o;r<s.length;r++){var l=s[r];a.push(new h(l))}t(n,a)}else t(n,null)})):(o={errorCode:r.ErrorCode.INVALID_ARGUMENTS},t(o,null)):(o={errorCode:r.ErrorCode.OLD_PLATFORM},t(o,null))},e.viewImages=function(e,t){if(!t)throw new Error("[view images] Callback cannot be null");(0,s.ensureInitialized)(l.FrameContexts.content,l.FrameContexts.task),(0,s.isAPISupportedByPlatform)(g.mediaAPISupportVersion)?(0,d.validateViewImagesInput)(e)?(0,u.sendMessageToParent)("viewImages",[e],t):t({errorCode:r.ErrorCode.INVALID_ARGUMENTS}):t({errorCode:r.ErrorCode.OLD_PLATFORM})},e.scanBarCode=function(e,t){if(!e)throw new Error("[media.scanBarCode] Callback cannot be null");(0,s.ensureInitialized)(l.FrameContexts.content,l.FrameContexts.task),a.GlobalVars.hostClientType!==l.HostClientType.desktop&&a.GlobalVars.hostClientType!==l.HostClientType.web&&a.GlobalVars.hostClientType!==l.HostClientType.rigel&&a.GlobalVars.hostClientType!==l.HostClientType.teamsRoomsWindows&&a.GlobalVars.hostClientType!==l.HostClientType.teamsRoomsAndroid&&a.GlobalVars.hostClientType!==l.HostClientType.teamsPhones&&a.GlobalVars.hostClientType!==l.HostClientType.teamsDisplays?(0,s.isAPISupportedByPlatform)(g.scanBarCodeAPIMobileSupportVersion)?(0,d.validateScanBarCodeInput)(t)?(0,u.sendMessageToParent)("media.scanBarCode",[t],e):e({errorCode:r.ErrorCode.INVALID_ARGUMENTS},null):e({errorCode:r.ErrorCode.OLD_PLATFORM},null):e({errorCode:r.ErrorCode.NOT_SUPPORTED_ON_PLATFORM},null)}}(t.media||(t.media={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validatePeoplePickerInput=t.validateScanBarCodeInput=t.validateViewImagesInput=t.validateGetMediaInputs=t.isMediaCallForNonFullScreenVideoMode=t.isMediaCallForVideoAndImageInputs=t.isMediaCallForImageOutputFormats=t.validateSelectMediaInputs=t.isVideoControllerRegistered=t.isMediaCallSupportedOnMobile=t.decodeAttachment=t.createFile=void 0;var o=n(17),i=n(4),a=n(1);function r(e){var t;return!((null==e?void 0:e.mediaType)!=o.media.MediaType.Image||null===(t=null==e?void 0:e.imageProps)||void 0===t||!t.imageOutputFormats)}function s(e){return!(!e||e.mediaType!=o.media.MediaType.VideoAndImage&&!e.videoAndImageProps)}function l(e){return!(!e||e.mediaType!=o.media.MediaType.Video||!e.videoProps||e.videoProps.isFullScreenMode)}t.createFile=function(e,t){if(null==e||null==t||e.length<=0)return null;var n,o=1;return e.sort((function(e,t){return e.sequence>t.sequence?1:-1})),e.forEach((function(e){e.sequence==o&&(n=n?new Blob([n,e.file],{type:t}):new Blob([e.file],{type:t}),o++)})),n},t.decodeAttachment=function(e,t){if(null==e||null==t)return null;for(var n=atob(e.chunk),o=new Array(n.length),i=0;i<n.length;i++)o[i]=n.charCodeAt(i);var a=new Uint8Array(o);return t=new Blob([a],{type:t}),{sequence:e.chunkSequence,file:t}},t.isMediaCallSupportedOnMobile=function(e){return s(e)?(0,a.isApiSupportedOnMobile)(i.videoAndImageMediaAPISupportVersion):l(e)?(0,a.isApiSupportedOnMobile)(i.nonFullScreenVideoModeAPISupportVersion):r(e)?(0,a.isApiSupportedOnMobile)(i.imageOutputFormatsAPISupportVersion):null},t.isVideoControllerRegistered=function(e){return!(e.mediaType!=o.media.MediaType.Video||!e.videoProps||!e.videoProps.videoController)},t.validateSelectMediaInputs=function(e){return!(null==e||10<e.maxMediaCount)},t.isMediaCallForImageOutputFormats=r,t.isMediaCallForVideoAndImageInputs=s,t.isMediaCallForNonFullScreenVideoMode=l,t.validateGetMediaInputs=function(e,t,n){return null!=e&&null!=t&&t==o.media.FileFormat.ID&&null!=n},t.validateViewImagesInput=function(e){return!(null==e||e.length<=0||10<e.length)},t.validateScanBarCodeInput=function(e){return!e||!(null===e.timeOutIntervalInSec||e.timeOutIntervalInSec<=0||60<e.timeOutIntervalInSec)},t.validatePeoplePickerInput=function(e){if(e){if(e.title&&"string"!=typeof e.title)return!1;if(e.setSelected&&"object"!=typeof e.setSelected)return!1;if(e.openOrgWideSearchInChatOrChannel&&"boolean"!=typeof e.openOrgWideSearchInChatOrChannel)return!1;if(e.singleSelect&&"boolean"!=typeof e.singleSelect)return!1}return!0}},function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){e[o=void 0===o?n:o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(20),t),i(n(8),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.teams=t.appEntity=t.files=t.remoteCamera=t.meetingRoom=t.conversations=t.registerUserSettingsChangeHandler=t.uploadCustomApp=t.registerCustomHandler=t.sendCustomEvent=t.showNotification=t.sendCustomMessage=t.openFilePreview=t.getUserJoinedTeams=t.getConfigSetting=t.getChatMembers=t.exitFullscreen=t.enterFullscreen=t.UserSettingTypes=t.ViewerActionTypes=t.NotificationTypes=t.logs=t.bot=void 0;var o=n(21);Object.defineProperty(t,"bot",{enumerable:!0,get:function(){return o.bot}});var i=n(13);Object.defineProperty(t,"logs",{enumerable:!0,get:function(){return i.logs}});var a=n(36);Object.defineProperty(t,"NotificationTypes",{enumerable:!0,get:function(){return a.NotificationTypes}}),Object.defineProperty(t,"ViewerActionTypes",{enumerable:!0,get:function(){return a.ViewerActionTypes}}),Object.defineProperty(t,"UserSettingTypes",{enumerable:!0,get:function(){return a.UserSettingTypes}});var r=n(14);Object.defineProperty(t,"enterFullscreen",{enumerable:!0,get:function(){return r.enterFullscreen}}),Object.defineProperty(t,"exitFullscreen",{enumerable:!0,get:function(){return r.exitFullscreen}}),Object.defineProperty(t,"getChatMembers",{enumerable:!0,get:function(){return r.getChatMembers}}),Object.defineProperty(t,"getConfigSetting",{enumerable:!0,get:function(){return r.getConfigSetting}}),Object.defineProperty(t,"getUserJoinedTeams",{enumerable:!0,get:function(){return r.getUserJoinedTeams}}),Object.defineProperty(t,"openFilePreview",{enumerable:!0,get:function(){return r.openFilePreview}}),Object.defineProperty(t,"sendCustomMessage",{enumerable:!0,get:function(){return r.sendCustomMessage}}),Object.defineProperty(t,"showNotification",{enumerable:!0,get:function(){return r.showNotification}}),Object.defineProperty(t,"sendCustomEvent",{enumerable:!0,get:function(){return r.sendCustomEvent}}),Object.defineProperty(t,"registerCustomHandler",{enumerable:!0,get:function(){return r.registerCustomHandler}}),Object.defineProperty(t,"uploadCustomApp",{enumerable:!0,get:function(){return r.uploadCustomApp}}),Object.defineProperty(t,"registerUserSettingsChangeHandler",{enumerable:!0,get:function(){return r.registerUserSettingsChangeHandler}});var s=n(37);Object.defineProperty(t,"conversations",{enumerable:!0,get:function(){return s.conversations}});var l=n(38);Object.defineProperty(t,"meetingRoom",{enumerable:!0,get:function(){return l.meetingRoom}});var c=n(39);Object.defineProperty(t,"remoteCamera",{enumerable:!0,get:function(){return c.remoteCamera}});var d=n(40);Object.defineProperty(t,"files",{enumerable:!0,get:function(){return d.files}});var u=n(41);Object.defineProperty(t,"appEntity",{enumerable:!0,get:function(){return u.appEntity}});var p=n(42);Object.defineProperty(t,"teams",{enumerable:!0,get:function(){return p.teams}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bot=void 0;var o=n(0),i=n(1);!function(e){e.sendQuery=function(e,t,n){(0,i.ensureInitialized)(),(0,o.sendMessageToParent)("bot.executeQuery",[e],(function(e,o){(e?t:n)(o)}))},e.getSupportedCommands=function(e,t){(0,i.ensureInitialized)(),(0,o.sendMessageToParent)("bot.getSupportedCommands",(function(n,o){(n?e:t)(o)}))},e.authenticate=function(e,t,n){(0,i.ensureInitialized)(),(0,o.sendMessageToParent)("bot.authenticate",[e],(function(e,o){(e?t:n)(o)}))},function(e){e.Results="Results",e.Auth="Auth"}(e.ResponseType||(e.ResponseType={}))}(t.bot||(t.bot={}))},function(e,t,n){var o=n(23),i=n(24);(n=i).v1=o,n.v4=i,e.exports=n},function(e,t,n){var o,i,a=n(9),r=n(10),s=0,l=0;e.exports=function(e,t,n){var c=t&&n||0,d=t||[],u=(e=e||{}).node||o,p=void 0!==e.clockseq?e.clockseq:i;null!=u&&null!=p||(h=a(),null==u&&(u=o=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==p&&(p=i=16383&(h[6]<<8|h[7])));var g=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=(n=void 0!==e.nsecs?e.nsecs:l+1,g-s+(n-l)/1e4);if(h<0&&void 0===e.clockseq&&(p=p+1&16383),1e4<=(n=(h<0||s<g)&&void 0===e.nsecs?0:n))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=g,i=p,n=(1e4*(268435455&(g+=122192928e5))+(l=n))%4294967296,d[c++]=n>>>24&255,d[c++]=n>>>16&255,d[c++]=n>>>8&255,d[c++]=255&n,g=g/4294967296*1e4&268435455,d[c++]=g>>>8&255,d[c++]=255&g,d[c++]=g>>>24&15|16,d[c++]=g>>>16&255,d[c++]=p>>>8|128,d[c++]=255&p;for(var f=0;f<6;++f)d[c+f]=u[f];return t||r(d)}},function(e,t,n){var o=n(9),i=n(10);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var s=0;s<16;++s)t[a+s]=r[s];return t||i(r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appInitialization=void 0;var o=n(1),i=n(4),a=n(0);!function(e){e.Messages={AppLoaded:"appInitialization.appLoaded",Success:"appInitialization.success",Failure:"appInitialization.failure",ExpectedFailure:"appInitialization.expectedFailure"},function(e){e.AuthFailed="AuthFailed",e.Timeout="Timeout",e.Other="Other"}(e.FailedReason||(e.FailedReason={})),function(e){e.PermissionError="PermissionError",e.NotFound="NotFound",e.Throttling="Throttling",e.Offline="Offline",e.Other="Other"}(e.ExpectedFailureReason||(e.ExpectedFailureReason={})),e.notifyAppLoaded=function(){(0,o.ensureInitialized)(),(0,a.sendMessageToParent)(e.Messages.AppLoaded,[i.version])},e.notifySuccess=function(){(0,o.ensureInitialized)(),(0,a.sendMessageToParent)(e.Messages.Success,[i.version])},e.notifyFailure=function(t){(0,o.ensureInitialized)(),(0,a.sendMessageToParent)(e.Messages.Failure,[t.reason,t.message])},e.notifyExpectedFailure=function(t){(0,o.ensureInitialized)(),(0,a.sendMessageToParent)(e.Messages.ExpectedFailure,[t.reason,t.message])}}(t.appInitialization||(t.appInitialization={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeWithFrameContext=t.setFrameContext=t.executeDeepLink=t.shareDeepLink=t.getMruTabInstances=t.getTabInstances=t.registerChangeSettingsHandler=t.registerFocusEnterHandler=t.registerBeforeUnloadHandler=t.registerOnLoadHandler=t.registerBackButtonHandler=t.registerAppButtonHoverLeaveHandler=t.registerAppButtonHoverEnterHandler=t.registerAppButtonClickHandler=t.registerFullScreenHandler=t.registerOnThemeChangeHandler=t.getContext=t.print=t.enablePrintCapability=t._uninitialize=t._initialize=t.initialize=void 0;var o=n(1),i=n(7),a=n(4),r=n(12),s=n(5),l=n(13),c=n(2),d=n(0),u=n(11),p=n(14),g=n(15),h=n(3);function f(e,t){i.GlobalVars.initializeCalled||(i.GlobalVars.initializeCalled=!0,h.initializeHandlers(),(0,d.initializeCommunication)((function(e,t,n){void 0===n&&(n=a.defaultSDKVersionForCompatCheck),i.GlobalVars.frameContext=e,i.GlobalVars.hostClientType=t,i.GlobalVars.clientSupportedSDKVersion=n,i.GlobalVars.initializeCallbacks.forEach((function(e){return e()})),i.GlobalVars.initializeCallbacks=[],i.GlobalVars.initializeCompleted=!0}),t),u.authentication.initialize(),r.settings.initialize(),g.menus.initialize(),(0,p.initializePrivateApis)()),Array.isArray(t)&&(0,o.processAdditionalValidOrigins)(t),e&&(i.GlobalVars.initializeCompleted?e():i.GlobalVars.initializeCallbacks.push(e))}function m(){window.print()}function y(e){(0,o.ensureInitialized)(),h.registerOnThemeChangeHandler(e)}function v(e){(0,o.ensureInitialized)(),h.registerHandler("fullScreenChange",e)}function _(e){(0,o.ensureInitialized)(),h.registerBackButtonHandler(e)}function b(e){(0,o.ensureInitialized)(),h.registerOnLoadHandler(e)}function w(e){(0,o.ensureInitialized)(),h.registerBeforeUnloadHandler(e)}function C(e){(0,o.ensureInitialized)(),h.registerFocusEnterHandler(e)}function x(e){(0,o.ensureInitialized)(c.FrameContexts.content),(0,d.sendMessageToParent)("setFrameContext",[e])}t.initialize=f,t._initialize=function(e){d.Communication.currentWindow=e},t._uninitialize=function(){i.GlobalVars.initializeCalled&&(i.GlobalVars.frameContext&&(y(null),v(null),_(null),w(null),C(null),b(null),l.logs.registerGetLogHandler(null)),i.GlobalVars.frameContext===c.FrameContexts.settings&&r.settings.registerOnSaveHandler(null),i.GlobalVars.frameContext===c.FrameContexts.remove&&r.settings.registerOnRemoveHandler(null),i.GlobalVars.initializeCalled=!1,i.GlobalVars.initializeCompleted=!1,i.GlobalVars.initializeCallbacks=[],i.GlobalVars.additionalValidOrigins=[],i.GlobalVars.frameContext=null,i.GlobalVars.hostClientType=null,(i.GlobalVars.isFramelessWindow=!1,d.uninitializeCommunication)())},t.enablePrintCapability=function(){i.GlobalVars.printCapabilityEnabled||(i.GlobalVars.printCapabilityEnabled=!0,(0,o.ensureInitialized)(),document.addEventListener("keydown",(function(e){(e.ctrlKey||e.metaKey)&&80===e.keyCode&&(m(),e.cancelBubble=!0,e.preventDefault(),e.stopImmediatePropagation())})))},t.print=m,t.getContext=function(e){(0,o.ensureInitialized)(),(0,d.sendMessageToParent)("getContext",(function(t){t.frameContext||(t.frameContext=i.GlobalVars.frameContext),e(t)}))},t.registerOnThemeChangeHandler=y,t.registerFullScreenHandler=v,t.registerAppButtonClickHandler=function(e){(0,o.ensureInitialized)(c.FrameContexts.content),h.registerHandler("appButtonClick",e)},t.registerAppButtonHoverEnterHandler=function(e){(0,o.ensureInitialized)(c.FrameContexts.content),h.registerHandler("appButtonHoverEnter",e)},t.registerAppButtonHoverLeaveHandler=function(e){(0,o.ensureInitialized)(c.FrameContexts.content),h.registerHandler("appButtonHoverLeave",e)},t.registerBackButtonHandler=_,t.registerOnLoadHandler=b,t.registerBeforeUnloadHandler=w,t.registerFocusEnterHandler=C,t.registerChangeSettingsHandler=function(e){(0,o.ensureInitialized)(c.FrameContexts.content),h.registerHandler("changeSettings",e)},t.getTabInstances=function(e,t){(0,o.ensureInitialized)(),(0,d.sendMessageToParent)("getTabInstances",[t],e)},t.getMruTabInstances=function(e,t){(0,o.ensureInitialized)(),(0,d.sendMessageToParent)("getMruTabInstances",[t],e)},t.shareDeepLink=function(e){(0,o.ensureInitialized)(c.FrameContexts.content,c.FrameContexts.sidePanel,c.FrameContexts.meetingStage),(0,d.sendMessageToParent)("shareDeepLink",[e.subEntityId,e.subEntityLabel,e.subEntityWebUrl])},t.executeDeepLink=function(e,t){(0,o.ensureInitialized)(c.FrameContexts.content,c.FrameContexts.sidePanel,c.FrameContexts.settings,c.FrameContexts.task,c.FrameContexts.stage,c.FrameContexts.meetingStage),(0,d.sendMessageToParent)("executeDeepLink",[e],t||(0,s.getGenericOnCompleteHandler)())},t.setFrameContext=x,t.initializeWithFrameContext=function(e,t,n){f(t,n),x(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.navigateBack=t.navigateCrossDomain=t.navigateToTab=t.returnFocus=void 0;var o=n(1),i=n(5),a=n(2),r=n(0);t.returnFocus=function(e){(0,o.ensureInitialized)(),(0,r.sendMessageToParent)("returnFocus",[e])},t.navigateToTab=function(e,t){(0,o.ensureInitialized)(),(0,r.sendMessageToParent)("navigateToTab",[e],t||(0,i.getGenericOnCompleteHandler)("Invalid internalTabInstanceId and/or channelId were/was provided"))},t.navigateCrossDomain=function(e,t){(0,o.ensureInitialized)(a.FrameContexts.content,a.FrameContexts.sidePanel,a.FrameContexts.settings,a.FrameContexts.remove,a.FrameContexts.task,a.FrameContexts.stage,a.FrameContexts.meetingStage),(0,r.sendMessageToParent)("navigateCrossDomain",[e],t||(0,i.getGenericOnCompleteHandler)("Cross-origin navigation is only supported for URLs matching the pattern registered in the manifest."))},t.navigateBack=function(e){(0,o.ensureInitialized)(),(0,r.sendMessageToParent)("navigateBack",[],e||(0,i.getGenericOnCompleteHandler)("Back navigation is not supported in the current client or context."))}},function(e,t,n){"use strict";var o=this&&this.__rest||function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n};Object.defineProperty(t,"__esModule",{value:!0}),t.tasks=void 0;var i=n(2),a=n(16),r=n(0),s=n(1);!function(e){e.startTask=function(e,t){return(0,s.ensureInitialized)(i.FrameContexts.content,i.FrameContexts.sidePanel,i.FrameContexts.meetingStage),(0,r.sendMessageToParent)("tasks.startTask",[e],t),new a.ChildAppWindow},e.updateTask=function(e){(0,s.ensureInitialized)(i.FrameContexts.content,i.FrameContexts.sidePanel,i.FrameContexts.task,i.FrameContexts.meetingStage),e.width,e.height;var t=o(e,["width","height"]);if(Object.keys(t).length)throw new Error("updateTask requires a taskInfo argument containing only width and height");(0,r.sendMessageToParent)("tasks.updateTask",[e])},e.submitTask=function(e,t){(0,s.ensureInitialized)(i.FrameContexts.content,i.FrameContexts.sidePanel,i.FrameContexts.task,i.FrameContexts.meetingStage),(0,r.sendMessageToParent)("tasks.completeTask",[e,Array.isArray(t)?t:[t]])}}(t.tasks||(t.tasks={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.location=void 0;var o=n(6),i=n(1),a=n(2),r=n(0),s=n(4);!function(e){e.getLocation=function(e,t){if(!t)throw new Error("[location.getLocation] Callback cannot be null");(0,i.ensureInitialized)(a.FrameContexts.content,a.FrameContexts.task),(0,i.isAPISupportedByPlatform)(s.locationAPIsRequiredVersion)?e?(0,r.sendMessageToParent)("location.getLocation",[e],t):t({errorCode:o.ErrorCode.INVALID_ARGUMENTS},void 0):t({errorCode:o.ErrorCode.OLD_PLATFORM},void 0)},e.showLocation=function(e,t){if(!t)throw new Error("[location.showLocation] Callback cannot be null");(0,i.ensureInitialized)(a.FrameContexts.content,a.FrameContexts.task),(0,i.isAPISupportedByPlatform)(s.locationAPIsRequiredVersion)?e?(0,r.sendMessageToParent)("location.showLocation",[e],t):t({errorCode:o.ErrorCode.INVALID_ARGUMENTS},void 0):t({errorCode:o.ErrorCode.OLD_PLATFORM},void 0)}}(t.location||(t.location={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.meeting=void 0;var o=n(0),i=n(3),a=n(1),r=n(2);!function(e){!function(e){e.Unknown="Unknown",e.Adhoc="Adhoc",e.Scheduled="Scheduled",e.Recurring="Recurring",e.Broadcast="Broadcast",e.MeetNow="MeetNow"}(e.MeetingType||(e.MeetingType={})),function(e){e.OneOnOneCall="oneOnOneCall",e.GroupCall="groupCall"}(e.CallType||(e.CallType={})),e.getIncomingClientAudioState=function(e){if(!e)throw new Error("[get incoming client audio state] Callback cannot be null");(0,a.ensureInitialized)(r.FrameContexts.sidePanel,r.FrameContexts.meetingStage),(0,o.sendMessageToParent)("getIncomingClientAudioState",e)},e.toggleIncomingClientAudio=function(e){if(!e)throw new Error("[toggle incoming client audio] Callback cannot be null");(0,a.ensureInitialized)(r.FrameContexts.sidePanel,r.FrameContexts.meetingStage),(0,o.sendMessageToParent)("toggleIncomingClientAudio",e)},e.getMeetingDetails=function(e){if(!e)throw new Error("[get meeting details] Callback cannot be null");(0,a.ensureInitialized)(r.FrameContexts.sidePanel,r.FrameContexts.meetingStage,r.FrameContexts.settings,r.FrameContexts.content),(0,o.sendMessageToParent)("meeting.getMeetingDetails",e)},e.getAuthenticationTokenForAnonymousUser=function(e){if(!e)throw new Error("[get Authentication Token For AnonymousUser] Callback cannot be null");(0,a.ensureInitialized)(r.FrameContexts.sidePanel,r.FrameContexts.meetingStage),(0,o.sendMessageToParent)("meeting.getAuthenticationTokenForAnonymousUser",e)},e.getLiveStreamState=function(e){if(!e)throw new Error("[get live stream state] Callback cannot be null");(0,a.ensureInitialized)(r.FrameContexts.sidePanel),(0,o.sendMessageToParent)("meeting.getLiveStreamState",e)},e.requestStartLiveStreaming=function(e,t,n){if(!e)throw new Error("[request start live streaming] Callback cannot be null");(0,a.ensureInitialized)(r.FrameContexts.sidePanel),(0,o.sendMessageToParent)("meeting.requestStartLiveStreaming",[t,n],e)},e.requestStopLiveStreaming=function(e){if(!e)throw new Error("[request stop live streaming] Callback cannot be null");(0,a.ensureInitialized)(r.FrameContexts.sidePanel),(0,o.sendMessageToParent)("meeting.requestStopLiveStreaming",e)},e.registerLiveStreamChangedHandler=function(e){if(!e)throw new Error("[register live stream changed handler] Handler cannot be null");(0,a.ensureInitialized)(r.FrameContexts.sidePanel),(0,i.registerHandler)("meeting.liveStreamChanged",e)},e.shareAppContentToStage=function(e,t){if(!e)throw new Error("[share app content to stage] Callback cannot be null");(0,a.ensureInitialized)(r.FrameContexts.sidePanel,r.FrameContexts.meetingStage),(0,o.sendMessageToParent)("meeting.shareAppContentToStage",[t],e)},e.getAppContentStageSharingCapabilities=function(e){if(!e)throw new Error("[get app content stage sharing capabilities] Callback cannot be null");(0,a.ensureInitialized)(r.FrameContexts.sidePanel,r.FrameContexts.meetingStage),(0,o.sendMessageToParent)("meeting.getAppContentStageSharingCapabilities",e)},e.stopSharingAppContentToStage=function(e){if(!e)throw new Error("[stop sharing app content to stage] Callback cannot be null");(0,a.ensureInitialized)(r.FrameContexts.sidePanel,r.FrameContexts.meetingStage),(0,o.sendMessageToParent)("meeting.stopSharingAppContentToStage",e)},e.getAppContentStageSharingState=function(e){if(!e)throw new Error("[get app content stage sharing state] Callback cannot be null");(0,a.ensureInitialized)(r.FrameContexts.sidePanel,r.FrameContexts.meetingStage),(0,o.sendMessageToParent)("meeting.getAppContentStageSharingState",e)},e.registerSpeakingStateChangeHandler=function(e){if(!e)throw new Error("[registerSpeakingStateChangeHandler] Handler cannot be null");(0,a.ensureInitialized)(r.FrameContexts.sidePanel,r.FrameContexts.meetingStage),(0,i.registerHandler)("meeting.speakingStateChanged",e)}}(t.meeting||(t.meeting={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.monetization=void 0;var o=n(0),i=n(1),a=n(2);(t.monetization||(t.monetization={})).openPurchaseExperience=function(e,t){if(!e)throw new Error("[open purchase experience] Callback cannot be null");(0,i.ensureInitialized)(a.FrameContexts.content),(0,o.sendMessageToParent)("monetization.openPurchaseExperience",[t],e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.people=void 0;var o=n(1),i=n(2),a=n(6),r=n(18),s=n(0),l=n(4);(t.people||(t.people={})).selectPeople=function(e,t){if(!e)throw new Error("[people picker] Callback cannot be null");(0,o.ensureInitialized)(i.FrameContexts.content,i.FrameContexts.task,i.FrameContexts.settings),(0,o.isAPISupportedByPlatform)(l.peoplePickerRequiredVersion)?(0,r.validatePeoplePickerInput)(t)?(0,s.sendMessageToParent)("people.selectPeople",[t],e):e({errorCode:a.ErrorCode.INVALID_ARGUMENTS},null):e({errorCode:a.ErrorCode.OLD_PLATFORM},void 0)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.video=void 0;var o=n(0),i=n(1),a=n(2),r=n(3);!function(e){function t(){(0,o.sendMessageToParent)("video.videoFrameProcessed")}function n(e){(0,o.sendMessageToParent)("video.notifyError",[e])}!function(e){e[e.NV12=0]="NV12"}(e.VideoFrameFormat||(e.VideoFrameFormat={})),function(e){e[e.EffectChanged=0]="EffectChanged",e[e.EffectDisabled=1]="EffectDisabled"}(e.EffectChangeType||(e.EffectChangeType={})),e.registerForVideoFrame=function(e,s){(0,i.ensureInitialized)(a.FrameContexts.sidePanel),(0,r.registerHandler)("video.newVideoFrame",(function(o){void 0!==o&&e(o,t,n)})),(0,o.sendMessageToParent)("video.registerForVideoFrame",[s])},e.notifySelectedVideoEffectChanged=function(e,t){(0,i.ensureInitialized)(a.FrameContexts.sidePanel),(0,o.sendMessageToParent)("video.videoEffectChanged",[e,t])},e.registerForVideoEffect=function(e){(0,i.ensureInitialized)(a.FrameContexts.sidePanel),(0,r.registerHandler)("video.effectParameterChange",e)}}(t.video||(t.video={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharing=void 0;var o=n(1),i=n(0),a=n(6),r=n(2);!function(e){e.SharingAPIMessages={shareWebContent:"sharing.shareWebContent"},e.shareWebContent=function(t,n){(function(e,t){if(e&&e.content&&e.content.length)return 1;t&&t({errorCode:a.ErrorCode.INVALID_ARGUMENTS,message:"Shared content is missing"})})(t,n)&&function(e,t){if(e.content.some((function(e){return!e.type})))t&&t({errorCode:a.ErrorCode.INVALID_ARGUMENTS,message:"Shared content type cannot be undefined"});else{if(!e.content.some((function(t){return t.type!==e.content[0].type})))return 1;t&&t({errorCode:a.ErrorCode.INVALID_ARGUMENTS,message:"Shared content must be of the same type"})}}(t,n)&&function(e,t){if("URL"===e.content[0].type){if(!e.content.some((function(e){return!e.url})))return 1;t&&t({errorCode:a.ErrorCode.INVALID_ARGUMENTS,message:"URLs are required for URL content types"})}else t&&t({errorCode:a.ErrorCode.INVALID_ARGUMENTS,message:"Content type is unsupported"})}(t,n)&&((0,o.ensureInitialized)(r.FrameContexts.content,r.FrameContexts.sidePanel,r.FrameContexts.task,r.FrameContexts.stage,r.FrameContexts.meetingStage),(0,i.sendMessageToParent)(e.SharingAPIMessages.shareWebContent,[t],n))}}(t.sharing||(t.sharing={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stageView=void 0;var o=n(0),i=n(1),a=n(2);(t.stageView||(t.stageView={})).open=function(e,t){if((0,i.ensureInitialized)(a.FrameContexts.content),!e)throw new Error("[stageView.open] Stage view params cannot be null");(0,o.sendMessageToParent)("stageView.open",[e],t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserSettingTypes=t.ViewerActionTypes=t.NotificationTypes=void 0,function(e){e.fileDownloadStart="fileDownloadStart",e.fileDownloadComplete="fileDownloadComplete"}(t.NotificationTypes||(t.NotificationTypes={})),function(e){e.view="view",e.edit="edit",e.editNew="editNew"}(t.ViewerActionTypes||(t.ViewerActionTypes={})),function(e){e.fileOpenPreference="fileOpenPreference",e.theme="theme"}(t.UserSettingTypes||(t.UserSettingTypes={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.conversations=void 0;var o=n(1),i=n(2),a=n(0),r=n(3);!function(e){e.openConversation=function(e){(0,o.ensureInitialized)(i.FrameContexts.content),(0,a.sendMessageToParent)("conversations.openConversation",[{title:e.title,subEntityId:e.subEntityId,conversationId:e.conversationId,channelId:e.channelId,entityId:e.entityId}],(function(e,t){if(!e)throw new Error(t)})),e.onStartConversation&&(0,r.registerHandler)("startConversation",(function(t,n,o,i){return e.onStartConversation({subEntityId:t,conversationId:n,channelId:o,entityId:i})})),e.onCloseConversation&&(0,r.registerHandler)("closeConversation",(function(t,n,o,i){return e.onCloseConversation({subEntityId:t,conversationId:n,channelId:o,entityId:i})}))},e.closeConversation=function(){(0,o.ensureInitialized)(i.FrameContexts.content),(0,a.sendMessageToParent)("conversations.closeConversation"),(0,r.removeHandler)("startConversation"),(0,r.removeHandler)("closeConversation")}}(t.conversations||(t.conversations={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.meetingRoom=void 0;var o=n(1),i=n(0),a=n(3);!function(e){!function(e){e.toggleMute="toggleMute",e.toggleCamera="toggleCamera",e.toggleCaptions="toggleCaptions",e.volume="volume",e.showVideoGallery="showVideoGallery",e.showContent="showContent",e.showVideoGalleryAndContent="showVideoGalleryAndContent",e.showLargeGallery="showLargeGallery",e.showTogether="showTogether",e.leaveMeeting="leaveMeeting"}(e.Capability||(e.Capability={})),e.getPairedMeetingRoomInfo=function(e){(0,o.ensureInitialized)(),(0,i.sendMessageToParent)("meetingRoom.getPairedMeetingRoomInfo",e)},e.sendCommandToPairedMeetingRoom=function(e,t){if(!e||0==e.length)throw new Error("[meetingRoom.sendCommandToPairedMeetingRoom] Command name cannot be null or empty");if(!t)throw new Error("[meetingRoom.sendCommandToPairedMeetingRoom] Callback cannot be null");(0,o.ensureInitialized)(),(0,i.sendMessageToParent)("meetingRoom.sendCommandToPairedMeetingRoom",[e],t)},e.registerMeetingRoomCapabilitiesUpdateHandler=function(e){if(!e)throw new Error("[meetingRoom.registerMeetingRoomCapabilitiesUpdateHandler] Handler cannot be null");(0,o.ensureInitialized)(),(0,a.registerHandler)("meetingRoom.meetingRoomCapabilitiesUpdate",(function(t){(0,o.ensureInitialized)(),e(t)}))},e.registerMeetingRoomStatesUpdateHandler=function(e){if(!e)throw new Error("[meetingRoom.registerMeetingRoomStatesUpdateHandler] Handler cannot be null");(0,o.ensureInitialized)(),(0,a.registerHandler)("meetingRoom.meetingRoomStatesUpdate",(function(t){(0,o.ensureInitialized)(),e(t)}))}}(t.meetingRoom||(t.meetingRoom={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.remoteCamera=void 0;var o=n(1),i=n(2),a=n(0),r=n(3);!function(e){!function(e){e.Reset="Reset",e.ZoomIn="ZoomIn",e.ZoomOut="ZoomOut",e.PanLeft="PanLeft",e.PanRight="PanRight",e.TiltUp="TiltUp",e.TiltDown="TiltDown"}(e.ControlCommand||(e.ControlCommand={})),function(e){e[e.CommandResetError=0]="CommandResetError",e[e.CommandZoomInError=1]="CommandZoomInError",e[e.CommandZoomOutError=2]="CommandZoomOutError",e[e.CommandPanLeftError=3]="CommandPanLeftError",e[e.CommandPanRightError=4]="CommandPanRightError",e[e.CommandTiltUpError=5]="CommandTiltUpError",e[e.CommandTiltDownError=6]="CommandTiltDownError",e[e.SendDataError=7]="SendDataError"}(e.ErrorReason||(e.ErrorReason={})),function(e){e[e.None=0]="None",e[e.ControlDenied=1]="ControlDenied",e[e.ControlNoResponse=2]="ControlNoResponse",e[e.ControlBusy=3]="ControlBusy",e[e.AckTimeout=4]="AckTimeout",e[e.ControlTerminated=5]="ControlTerminated",e[e.ControllerTerminated=6]="ControllerTerminated",e[e.DataChannelError=7]="DataChannelError",e[e.ControllerCancelled=8]="ControllerCancelled",e[e.ControlDisabled=9]="ControlDisabled",e[e.ControlTerminatedToAllowOtherController=10]="ControlTerminatedToAllowOtherController"}(e.SessionTerminatedReason||(e.SessionTerminatedReason={})),e.getCapableParticipants=function(e){if(!e)throw new Error("[remoteCamera.getCapableParticipants] Callback cannot be null");(0,o.ensureInitialized)(i.FrameContexts.sidePanel),(0,a.sendMessageToParent)("remoteCamera.getCapableParticipants",e)},e.requestControl=function(e,t){if(!e)throw new Error("[remoteCamera.requestControl] Participant cannot be null");if(!t)throw new Error("[remoteCamera.requestControl] Callback cannot be null");(0,o.ensureInitialized)(i.FrameContexts.sidePanel),(0,a.sendMessageToParent)("remoteCamera.requestControl",[e],t)},e.sendControlCommand=function(e,t){if(!e)throw new Error("[remoteCamera.sendControlCommand] ControlCommand cannot be null");if(!t)throw new Error("[remoteCamera.sendControlCommand] Callback cannot be null");(0,o.ensureInitialized)(i.FrameContexts.sidePanel),(0,a.sendMessageToParent)("remoteCamera.sendControlCommand",[e],t)},e.terminateSession=function(e){if(!e)throw new Error("[remoteCamera.terminateSession] Callback cannot be null");(0,o.ensureInitialized)(i.FrameContexts.sidePanel),(0,a.sendMessageToParent)("remoteCamera.terminateSession",e)},e.registerOnCapableParticipantsChangeHandler=function(e){if(!e)throw new Error("[remoteCamera.registerOnCapableParticipantsChangeHandler] Handler cannot be null");(0,o.ensureInitialized)(i.FrameContexts.sidePanel),(0,r.registerHandler)("remoteCamera.capableParticipantsChange",e)},e.registerOnErrorHandler=function(e){if(!e)throw new Error("[remoteCamera.registerOnErrorHandler] Handler cannot be null");(0,o.ensureInitialized)(i.FrameContexts.sidePanel),(0,r.registerHandler)("remoteCamera.handlerError",e)},e.registerOnDeviceStateChangeHandler=function(e){if(!e)throw new Error("[remoteCamera.registerOnDeviceStateChangeHandler] Handler cannot be null");(0,o.ensureInitialized)(i.FrameContexts.sidePanel),(0,r.registerHandler)("remoteCamera.deviceStateChange",e)},e.registerOnSessionStatusChangeHandler=function(e){if(!e)throw new Error("[remoteCamera.registerOnSessionStatusChangeHandler] Handler cannot be null");(0,o.ensureInitialized)(i.FrameContexts.sidePanel),(0,r.registerHandler)("remoteCamera.sessionStatusChange",e)}}(t.remoteCamera||(t.remoteCamera={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.files=void 0;var o=n(0),i=n(1),a=n(8);!function(e){!function(e){e.Dropbox="DROPBOX",e.Box="BOX",e.Sharefile="SHAREFILE",e.GoogleDrive="GOOGLEDRIVE",e.Egnyte="EGNYTE",e.SharePoint="SharePoint"}(e.CloudStorageProvider||(e.CloudStorageProvider={})),function(e){e[e.Sharepoint=0]="Sharepoint",e[e.WopiIntegration=1]="WopiIntegration",e[e.Google=2]="Google",e[e.OneDrive=3]="OneDrive",e[e.Recent=4]="Recent",e[e.Aggregate=5]="Aggregate",e[e.FileSystem=6]="FileSystem",e[e.Search=7]="Search",e[e.AllFiles=8]="AllFiles",e[e.SharedWithMe=9]="SharedWithMe"}(e.CloudStorageProviderType||(e.CloudStorageProviderType={})),(e.SpecialDocumentLibraryType||(e.SpecialDocumentLibraryType={})).ClassMaterials="classMaterials",(e.DocumentLibraryAccessType||(e.DocumentLibraryAccessType={})).Readonly="readonly",function(e){e.Downloaded="Downloaded",e.Downloading="Downloading",e.Failed="Failed"}(e.FileDownloadStatus||(e.FileDownloadStatus={})),e.getCloudStorageFolders=function(e,t){if((0,i.ensureInitialized)(a.FrameContexts.content),!e||0===e.length)throw new Error("[files.getCloudStorageFolders] channelId name cannot be null or empty");if(!t)throw new Error("[files.getCloudStorageFolders] Callback cannot be null");(0,o.sendMessageToParent)("files.getCloudStorageFolders",[e],t)},e.addCloudStorageFolder=function(e,t){if((0,i.ensureInitialized)(a.FrameContexts.content),!e||0===e.length)throw new Error("[files.addCloudStorageFolder] channelId name cannot be null or empty");if(!t)throw new Error("[files.addCloudStorageFolder] Callback cannot be null");(0,o.sendMessageToParent)("files.addCloudStorageFolder",[e],t)},e.deleteCloudStorageFolder=function(e,t,n){if((0,i.ensureInitialized)(a.FrameContexts.content),!e)throw new Error("[files.deleteCloudStorageFolder] channelId name cannot be null or empty");if(!t)throw new Error("[files.deleteCloudStorageFolder] folderToDelete cannot be null or empty");if(!n)throw new Error("[files.deleteCloudStorageFolder] Callback cannot be null");(0,o.sendMessageToParent)("files.deleteCloudStorageFolder",[e,t],n)},e.getCloudStorageFolderContents=function(e,t,n){if((0,i.ensureInitialized)(a.FrameContexts.content),!e||!t)throw new Error("[files.getCloudStorageFolderContents] folder/providerCode name cannot be null or empty");if(!n)throw new Error("[files.getCloudStorageFolderContents] Callback cannot be null");if("isSubdirectory"in e&&!e.isSubdirectory)throw new Error("[files.getCloudStorageFolderContents] provided folder is not a subDirectory");(0,o.sendMessageToParent)("files.getCloudStorageFolderContents",[e,t],n)},e.openCloudStorageFile=function(e,t,n){if((0,i.ensureInitialized)(a.FrameContexts.content),!e||!t)throw new Error("[files.openCloudStorageFile] file/providerCode cannot be null or empty");if(e.isSubdirectory)throw new Error("[files.openCloudStorageFile] provided file is a subDirectory");(0,o.sendMessageToParent)("files.openCloudStorageFile",[e,t,n])},e.getExternalProviders=function(e,t){if(void 0===e&&(e=!1),(0,i.ensureInitialized)(a.FrameContexts.content),!t)throw new Error("[files.getExternalProviders] Callback cannot be null");(0,o.sendMessageToParent)("files.getExternalProviders",[e],t)},e.copyMoveFiles=function(e,t,n,r,s,l){if(void 0===s&&(s=!1),(0,i.ensureInitialized)(a.FrameContexts.content),!e||0===e.length)throw new Error("[files.copyMoveFiles] selectedFiles cannot be null or empty");if(!t)throw new Error("[files.copyMoveFiles] providerCode cannot be null or empty");if(!n)throw new Error("[files.copyMoveFiles] destinationFolder cannot be null or empty");if(!r)throw new Error("[files.copyMoveFiles] destinationProviderCode cannot be null or empty");if(!l)throw new Error("[files.copyMoveFiles] callback cannot be null");(0,o.sendMessageToParent)("files.copyMoveFiles",[e,t,n,r,s],l)},e.getFileDownloads=function(e){if((0,i.ensureInitialized)(a.FrameContexts.content),!e)throw new Error("[files.getFileDownloads] Callback cannot be null");(0,o.sendMessageToParent)("files.getFileDownloads",[],e)},e.openDownloadFolder=function(e,t){if(void 0===e&&(e=void 0),(0,i.ensureInitialized)(a.FrameContexts.content),!t)throw new Error("[files.openDownloadFolder] Callback cannot be null");(0,o.sendMessageToParent)("files.openDownloadFolder",[e],t)}}(t.files||(t.files={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appEntity=void 0;var o=n(0),i=n(1),a=n(8);(t.appEntity||(t.appEntity={})).selectAppEntity=function(e,t,n,r){if((0,i.ensureInitialized)(a.FrameContexts.content),!e||0==e.length)throw new Error("[appEntity.selectAppEntity] threadId name cannot be null or empty");if(!r)throw new Error("[appEntity.selectAppEntity] Callback cannot be null");(0,o.sendMessageToParent)("appEntity.selectAppEntity",[e,t,n],r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.teams=void 0;var o=n(0),i=n(1),a=n(8);!function(e){!function(e){e[e.Regular=0]="Regular",e[e.Private=1]="Private",e[e.Shared=2]="Shared"}(e.ChannelType||(e.ChannelType={})),e.getTeamChannels=function(e,t){if((0,i.ensureInitialized)(a.FrameContexts.content),!e)throw new Error("[teams.getTeamChannels] groupId cannot be null or empty");if(!t)throw new Error("[teams.getTeamChannels] Callback cannot be null");(0,o.sendMessageToParent)("teams.getTeamChannels",[e],t)},e.refreshSiteUrl=function(e,t){if((0,i.ensureInitialized)(),!e)throw new Error("[teams.refreshSiteUrl] threadId cannot be null or empty");if(!t)throw new Error("[teams.refreshSiteUrl] Callback cannot be null");(0,o.sendMessageToParent)("teams.refreshSiteUrl",[e],t)}}(t.teams||(t.teams={}))}])},function(e,t,n){"use strict";function o(e,t){this._low=parseInt(e,10),this._hight=parseInt(t,10)}n(51),o.Permissions={ViewListItems:1,AddListItems:2,EditListItems:3,DeleteListItems:4,ApproveItems:5,OpenItems:6,ViewVersions:7,DeleteVersions:8,CancelCheckout:9,ManagePersonalViews:10,ManageLists:12,ViewFormPages:13,AnonymousSearchAccessList:14,Open:17,ViewPages:18,AddAndCustomizePages:19,ApplyThemeAndBorder:20,ApplyStyleSheets:21,ViewUsageData:22,CreateSSCSite:23,ManageSubwebs:24,CreateGroups:25,ManagePermissions:26,BrowseDirectories:27,BrowseUserInfo:28,AddDelPrivateWebParts:29,UpdatePersonalWebParts:30,ManageWeb:31,AnonymousSearchAccessWebLists:32,UseClientIntegration:37,UseRemoteAPIs:38,ManageAlerts:39,CreateAlerts:40,EditMyUserInfo:41,EnumeratePermissions:63},o.prototype.hasPermission=function(e){var t=this._low;return e>=32&&(t=this._high,e-=32),2^e-1|t==t},e.exports=o},function(e,t,n){"use strict";n(7);const o=n(1094).saveAs;function i(){}i.prototype.download=async function(){let{buffer:e,name:t,extension:n,mime:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(new Blob([e],i),"".concat(t,".").concat(n))},e.exports=i},function(e,t,n){"use strict";var o=n(14);n(52),n(17),n(158),n(26),n(7),n(183),n(18),n(99),n(29),n(28),n(22),n(117),n(106);var i=n(9),a=n(217),r=n(45),s=n(1),l=n(13),c=n(34),d=n(61),u=o(n(1459)),p=o(n(428)),g=o(n(1460)),h=o(n(1461)),f=o(n(1462));const{nodeEnv:m,isBeta:y,storeVendor:v,isCorel:_,isTeams:b}=n(782),w=n(217),C=!v,x=n(838);n(1463);n(1464);const S=n(1465);var E=n(1466),A=n(151),T=n(845),G=n(848),P=n(1152),D=n(1287),L=n(788),I=n(1571),k=n(789),O=n(1296),F=n(590),R=n(1286),M=n(853),N=n(1153),B=n(1292),U=n(1307),j=n(1308),K=n(1310),V=n(1154),H=n(846),W=n(1291),z=n(1288),q=n(840),Y=n(434),X=n(1572),Q=n(549),J=n(790),Z=n(1573),ee=n(1149),te=n(1155),ne=n(1144);const oe=n(791),ie=n(1574);var ae=n(1575),re=n(1576),se=n(1272),le=n(1293),ce=n(1258),de=n(1161),ue=n(1273),pe=n(1577),ge=n(856),he=n(1159);const fe=n(855);var me=n(1160),ye=n(1158),ve=n(854),_e=n(1579),be=n(1580),we=n(1581),Ce=n(1316),xe=n(792),Se=n(1275),Ee=n(1582),Ae=n(1583),Te=n(1260),Ge=n(1585),Pe=n(432),De=n(1586),Le=n(430),Ie=n(1309),ke=n(1156);const Oe=n(1280),Fe=n(1281),Re=n(1282),Me=n(1283),Ne=n(1284),Be=n(1285);var Ue=n(1587),$e=n(1261),je=n(1146),Ke=n(1262),Ve=n(1588),He=n(1589),We=n(1294),ze=n(1271),qe=n(849),Ye=n(1295),Xe=n(852),Qe=n(1263),Je=n(1264),Ze=n(1265),et=n(1259),tt=n(1256),nt=n(850),ot=n(1148),it=n(851),at=n(1590),rt=n(1290),st=n(1266),lt=n(1267),ct=n(1591),dt=n(1593),ut=n(1311),pt=n(433),gt=n(1232),ht=n(1594),ft=n(1595),mt=n(1312),yt=n(1597),vt=n(822),_t=n(1157),bt=n(1598),wt=n(1318),Ct=n(1274),xt=n(1599),St=n(1600),Et=n(1269),At=n(1601),Tt=n(1602),Gt=n(1603),Pt=n(1604),Dt=n(1606),Lt=n(1607),It=n(1135),kt=n(1608),Ot=n(1609),Ft=n(1610),Rt=n(1611);const Mt=n(1612);var Nt=n(1230),Bt=n(1613),Ut=n(1615);n(1616);const $t=n(1617),jt=n(1619),Kt=n(1620),Vt=n(1621),Ht=n(1320),Wt=n(1321),zt=n(1622),qt=n(1623),Yt=n(1624),Xt=n(1317),Qt=n(1625),Jt=n(1626),Zt=n(1627);n(71),n(78);var en=n(1322),tn=(n(1323),n(1137)),nn=n(1237),on=n(1139),an=n(1240),rn=n(1238),sn=n(1241),ln=n(1242),cn=n(1628),dn=n(1629),un=n(1630),pn=n(843),gn=n(1236),hn=n(550),fn=n(1245),mn=n(1127),yn=n(1631),vn=n(1246),_n=n(1247),bn=n(1315),wn=n(1632),Cn=n(1633),xn=n(1248),Sn=n(1249),En=n(1270),An=n(1634),Tn=n(1250),Gn=n(1635),Pn=n(1636),Dn=n(1639),Ln=n(1640),In=n(1642),kn=n(1643),On=n(1644),Fn=n(77),Rn=n(1646),Mn=(n(222),n(1647)),Nn=n(111),Bn=n(1648),Un=n(37),$n=n(839),jn=n(1649),Kn=n(323),Vn=n(1301),Hn=n(764),Wn=n(1650),zn=n(787),qn=n(278);const Yn=i.FILE_FORMATS.find(e=>e.default).ext,Xn=i.FILE_FORMATS.filter(e=>e.secondary).map(e=>e.ext);var Qn=n(1652);const Jn=new(n(1319));Jn.init();const Zn=n(1658),eo=n(1660),to=n(1661),no=n(1231),{isExecutingOnMSTeams:oo,isExecutingOnMSTeamsSync:io,isTeamsChannel:ao,getTeamsLocale:ro}=p.default;n(16),n(1662),n(1131),n(1663),n(1664),n(1665),n(1667),n(1668);var so=window;const lo=!!/^trunk/.test("production")&&!y;so.gApi=n(9).gApi,so.gApi.webcdr=null;const co=async()=>S.checkMaintenance();co(),lo&&(so.gApi.url=i.cloudTrunkURL,so.gApi.managementUrl="https://cloud-management-trunk.herokuapp.com",i.trunkWebsocketURL&&(so.gApi.websocketURL=i.trunkWebsocketURL),s.GTranslationEvents.addEventListener(s.GTranslationNotificationEvent,e=>{let{project:t,type:n,content:o,data:i}=e;if(t===s.GTranslation.Projects.Designer)switch(n){case s.GTranslationNotificationEvent.Type.Warning:gContainer.getRuntime()===Fn.Runtime.Electron?console.error(o):console.error({content:o,data:i})}},void 0)),y&&(_&&b&&i.cloudTeamsURL?so.gApi.url=i.cloudTeamsURL:i.cloudBetaURL&&(so.gApi.url=i.cloudBetaURL),i.betaWebsocketURL&&(so.gApi.websocketURL=i.betaWebsocketURL)),w.IS_PRODUCTION&&(i.cloudURL&&(so.gApi.url=i.cloudURL),i.websocketURL&&(so.gApi.websocketURL=i.websocketURL)),so.gApi.lang=s.GLocale.getLanguage();let uo=null;so.gravit=null,n(1710),so.gDesigner=new E,so.gDesigner.getUser(),so.gQA=h.default;const po=so.gDesigner.isOfflineAsync();so.gInAppPurchase=Qn.newInAppPurchase(v);const{GA:{customDimensions:go}={}}=n(9);gDesigner.addEventListener(qn,e=>{let{user:t}=e;t&&!gDesigner.isAnonymous()&&"undefined"!=typeof dataLayer&&go&&go.forEach(e=>dataLayer.push({[e]:void 0}))}),gDesigner._translationManager=Jn;var ho=$("<div></div>").addClass("g-drag-image").appendTo($("body"));so.gDragImage=function(){return ho.empty().attr({class:"g-drag-image",style:""})},so.gPatternChooser=null,so.gPatternChooserNormal=null,so.gPatternChooserTouch=null,so.gContainer=null;e.exports=async function(e){so.gContainer=e,(0,c._tryAndCatch)(()=>Kn.start());let t=null;const n=gDesigner.getUser();n.then(e=>{e&&(t=i.gApi.isEnabledSubscriptions())}),window.onerror=function(e,t,n,o,i){Bn.isPluginError(i)?Un.alert(i.message):("production"===m||"trunk"===m||"lts"===m||"rc"===m)&&Nn.isOnline()},x.getRuntimeCode()===i.Runtime.WindowsStore.code&&(new Zn).init(),y&&!_&&(new eo).init(),_?(gContainer.setCookie({name:"_access_token",value:"b03f5f7f11d50a3a"}),gDesigner.setSupportedBrowsers([l.GPlatform.constructor.WebBrowser.Chrome,l.GPlatform.constructor.WebBrowser.Firefox,l.GPlatform.constructor.WebBrowser.Edge]),gDesigner.setSupportedTabletBrowsers([{operatingSystem:s.GSystem.OperatingSystem.Unix,platform:l.GPlatform.constructor.WebBrowser.Chrome},{operatingSystem:s.GSystem.OperatingSystem.OSX_IOS,platform:l.GPlatform.constructor.WebBrowser.Safari}])):(gDesigner.setSupportedBrowsers([l.GPlatform.constructor.WebBrowser.Chrome,l.GPlatform.constructor.WebBrowser.Firefox,l.GPlatform.constructor.WebBrowser.Safari,l.GPlatform.constructor.WebBrowser.Edge]),gDesigner.setSupportedTabletBrowsers([{operatingSystem:s.GSystem.OperatingSystem.Unix,platform:l.GPlatform.constructor.WebBrowser.Chrome},{operatingSystem:s.GSystem.OperatingSystem.OSX_IOS,platform:l.GPlatform.constructor.WebBrowser.Safari}]));if(await co()){if(gContainer.getRuntime()!==Fn.Runtime.Electron||!await n){$("<iframe></iframe>").addClass("cross-frame").attr("src","assets/static/maintenance/index.html").appendTo($("body"));const e=setInterval(async()=>{await co()||(clearInterval(e),location.reload())},6e4);return}}const o=x.getRuntimeCode();o&&gContainer.setCookie({name:"_ginst",value:o,url:i.gApi.url});const p=new URL(window.location.href).searchParams;if(p&&p.has("pd")&&gContainer.setCookie({name:"_gtpd",value:p.get("pd")}),p&&p.has("newuser")&&gDesigner.setShowCreateAccount(!0),p&&p.has("dt")?gContainer.setCookie({name:"_gdt",value:p.get("dt")}):gContainer.setCookie({name:"_gdt",value:""}),p&&p.has("coupon")?gContainer.setCookie({name:"_gcoupon",value:p.get("coupon")}):gContainer.setCookie({name:"_gcoupon",value:""}),p&&p.has("recaptchaToken")&&gContainer.setCookie({name:"__grecaptchaToken",value:p.get("recaptchaToken")}),p&&p.has("x-clickref")&&(gContainer.setCookie({name:"cb_prf_corelcorp",value:p.get("x-clickref")}),gContainer.setCookie({name:"dynPrice_xparamCookie",value:p})),p&&p.has("magiclink")&&(await gContainer.signWithMagicLink(p.get("magiclink"),p.get("d"),p.get("token")).catch(()=>null),t=i.gApi.isEnabledSubscriptions()),p){gDesigner.setUTM(new Map(Array.from(p.entries()).filter(e=>{let[t]=e;return/^utm/.test(t)})));const e=["firstName","lastName","email","to"],t=Array.from(p.entries()).filter(t=>{let[n]=t;return e.includes(n)}).reduce((e,t)=>{let[n,o]=t;return Object.assign(e,{[n]:o})},{});Object.keys(t).length&&gDesigner.setSignupOptions(t)}var h,b,w,S;gContainer.setCookie({name:"_gdesignerv",value:"3.14.3",url:i.gApi.url}),gDesigner.setEnv(m),gContainer.getRuntime()===Fn.Runtime.Electron||_||i.gApi.initRecaptcha(),async function(e,t){const n=await gDesigner.getUser();(0,g.default)(e,t,gDesigner.getAppBaseUrl(),n)}(gContainer.getRuntime(),v),!y||gContainer.getRuntime()!==Fn.Runtime.Browser&&gContainer.getRuntime()!==Fn.Runtime.PWA||(h=window,b=document,h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)},h._hjSettings={hjid:754178,hjsv:6},w=b.getElementsByTagName("head")[0],(S=b.createElement("script")).async=1,S.src="https://static.hotjar.com/c/hotjar-"+h._hjSettings.hjid+".js?sv="+h._hjSettings.hjsv,w.appendChild(S)),gDesigner.setStoreVendor(v),gDesigner.setVersion("3.14.3"),gDesigner.setCommitSHA("909c789fc3610bd90e44795045e4885666443254"),gDesigner.setBuildNum("8500"),gDesigner.setVersionFriendlyName("i015.3");let E,qn=(0,c._tryAndCatch)(()=>gDesigner.preInit(t)),Qn=gContainer.handleDeepLinking();Qn&&(E=await gDesigner.runDeepLink(Qn.link,Qn.options).then(()=>null).catch(e=>e));const ro=async()=>{await new Promise(e=>gContainer.initLanguage(e)),gDesigner.hasEventListeners(zn)&&gDesigner.trigger(new zn(zn.Status.Init)),gDesigner.setIsBeta(y),gravit={plugins:[],actions:[new ae,new yt,new re,new xe,new Se].concat([new pt(pt.Actions.Open),new vt,new Pe,new Le(Yn),...Xn.map(e=>new Le(e)),new pt(pt.Actions.SaveAs),new Et,new At,new qt,new gt,new Nt]).concat([new De]).concat([new et,new Mt(Mt.Source.PHOTOS),new Mt(Mt.Source.FILES),new tt,new St(new Ee),_?new St(new q):new q]).concat(A.FileTypes.filter(e=>e.store&&"cdrapp"!==e.ext&&"des"!==e.ext&&"gvdesign"!==e.ext&&"pdf"!==e.ext).map(e=>new Le(e.ext))).concat([new Le("pdf",{dpi:72}),new Le("pdf",{dpi:96}),new Le("pdf",{dpi:150}),new St(new Le("pdf",{dpi:300})),_?new St(new q({format:"pdf"})):new q({format:"pdf"})]).concat([new Gt,new Pt,new Tt,new Ae,new ee,new Dt,new ot,new Te,new U(!0),new U(!1),new ge,new he,new fe,new me,new ye,new ve,new j,new W,new z,new Ie,new K,new Z,new ke,new Oe(Oe.Type.Fill),new Oe(Oe.Type.Border),new Oe(Oe.Type.FillAndBorder),new Fe,new Re,new Me,new Ne,new Be,new Ue,new jt(jt.Type.Fill),new jt(jt.Type.Border),new Ce,new Vt,new G(r.GEditor.ArrangeOrderType.SendToFront),new G(r.GEditor.ArrangeOrderType.BringForward),new G(r.GEditor.ArrangeOrderType.SendBackward),new G(r.GEditor.ArrangeOrderType.SendToBack),new T(r.GEditor.ArrangeAlignType.AlignLeft),new T(r.GEditor.ArrangeAlignType.AlignCenter),new T(r.GEditor.ArrangeAlignType.AlignRight),new T(r.GEditor.ArrangeAlignType.AlignTop),new T(r.GEditor.ArrangeAlignType.AlignMiddle),new T(r.GEditor.ArrangeAlignType.AlignBottom),new T(r.GEditor.ArrangeAlignType.AlignJustifyHorizontal),new T(r.GEditor.ArrangeAlignType.AlignJustifyVertical),new H(H.Type.Horizontal),new H(H.Type.Vertical),new ze(ze.Type.FullUnit),new ze(ze.Type.HalfUnit),new nt(nt.Type.Rotate45Left),new nt(nt.Type.Rotate90Left),new nt(nt.Type.Rotate180Left),new nt(nt.Type.Rotate45Right),new nt(nt.Type.Rotate90Right),new nt(nt.Type.Rotate180Right),new nt(nt.Type.FlipVertical),new nt(nt.Type.FlipHorizontal),new J,new L,new qe,new _t,new R,new D,new oe(ie),new ie(ie.Type.Intersect),new ie(ie.Type.Difference),new ie(ie.Type.Subtract),new ie(ie.Type.Union),new B,new te,new Xe,new k,new O,new de,new le,new it,new at,new P,new V,new We,new I,new Ye,new Ge,new F,new M,new N,new rt,new be,new Wt(zt),new zt(zt.Type.Straight),new zt(zt.Type.Mirrored),new zt(zt.Type.Disconnected),new zt(zt.Type.Asymmetric),new zt(zt.Type.Connector),new Jt,new Zt,new ce,new Q,new X,new Y,new _e(!1),new _e(!0),new we,new Ht(Ht.Type.Next),new Ht(Ht.Type.Previous),new Yt,new Xt(Xt.Type.Next),new Xt(Xt.Type.Previous),new Qt(Qt.Type.Next),new Qt(Qt.Type.Previous)].concat(ne.ZOOM_LEVELS.map(e=>new ne(e)))).concat([new st,new lt,new ue,new pe,new Ve,new je,new Ke,new $e,new He,new dt,new Kt,new Je,...i.HAS_SNAPZONES?[new Ze]:[],new Qe(r.GGridGuide.ID,s.GLocale.get(new s.GLocaleKey("GCommonNames","text.snap-to-grid"))),new Qe(r.GGuideLinesGuide.ID,s.GLocale.get(new s.GLocaleKey("GCommonNames","text.snap-to-guide-lines"))),new Qe(r.GFullPixelsGuide.ID,s.GLocale.get(new s.GLocaleKey("GCommonNames","text.snap-to-full-pixels"))),new Qe(r.GPointsGuide.ID,s.GLocale.get(new s.GLocaleKey("GCommonNames","text.snap-to-anchor-points"))),new Qe(r.GBBoxGuide.ID,s.GLocale.get(new s.GLocaleKey("GCommonNames","text.snap-to-shapes"))),new Qe(r.GPageGuide.ID,s.GLocale.get(new s.GLocaleKey("GCommonNames","text.snap-to-pages"))),new se,new ct,new ut,new St(new kt)]).concat(ft.Links.filter(e=>"eula"!==e.name).map(e=>new ft(e)),_?[]:new wt,new Lt,new mt).concat(...io()?[]:Fn.GravitLanguages.map(e=>new ht(e,Jn.getTranslationRealName(e)))).concat([..._?[new Ut("STAGING",lo),new Ut("BETA",y)]:[],new bt,...C?[new xt]:[],...ft.Links.filter(e=>"eula"===e.name).map(e=>new ft(e)),new Ct,new It,new Bt,..._?[new Rt]:[],new $t]).concat([new Ot,new Ft]),sidebars:[new pn,...i.HAS_ANNOTATIONS?[new hn]:[],new gn,new Pn,new Gn],panels:[],footer:[new Dn,new Ln,..._?[new In,new kn]:[]],tools:[{tool:r.GPointerTool,toolString:"GPointerTool",title:_?s.GLocale.get(new s.GLocaleKey("GCommonNames","tool.pointer")):s.GLocale.get(new s.GLocaleKey("GPointerTool","name")),group:"select",key:"V",icon:"gravit-icon-cursor-filled",richTooltipConfig:d.GRichTooltipConfig.from({title:s.GLocale.get(new s.GLocaleKey("GPointerTool","tooltip-title")),description:s.GLocale.get(new s.GLocaleKey("GPointerTool","tooltip-description")),middle:!1,shortcut:["V"],video:so.gApi.getRichTooltipVideoURL("Pointer_Tool.mp4"),learnMore:"https://documentation.corelvector.com/tools/selection-tools/#pointer-tool"})},{tool:r.GSubSelectTool,toolString:"GSubSelectTool",title:s.GLocale.get(new s.GLocaleKey("GSubSelectTool","name")),group:"select",key:"D",icon:_?"gravit-icon-cursor-subselect":"gravit-icon-cursor",richTooltipConfig:d.GRichTooltipConfig.from({title:s.GLocale.get(new s.GLocaleKey("GSubSelectTool","tooltip-title")),description:s.GLocale.get(new s.GLocaleKey("GSubSelectTool","tooltip-description")),middle:!1,shortcut:["D"],video:so.gApi.getRichTooltipVideoURL("Subselect_Tool.mp4"),learnMore:"https://documentation.corelvector.com/tools/selection-tools/#subselect-tool"})},{tool:r.GLassoTool,toolString:"GLassoTool",title:s.GLocale.get(new s.GLocaleKey("GLassoTool","name")),group:"select",category:"special",key:"O",icon:"gravit-icon-rope",richTooltipConfig:d.GRichTooltipConfig.from({title:s.GLocale.get(new s.GLocaleKey("GLassoTool","tooltip-title")),description:s.GLocale.get(new s.GLocaleKey("GLassoTool","tooltip-description")),middle:!1,shortcut:["O"],video:so.gApi.getRichTooltipVideoURL("Lasso_Tool.mp4"),learnMore:"https://documentation.corelvector.com/tools/selection-tools/#lasso-tool"})},{tool:r.GLayerTool,toolString:"GLayerTool",title:s.GLocale.get(new s.GLocaleKey("GLayerTool","name")),group:"select",category:"special",icon:"gravit-icon-sheets",richTooltipConfig:d.GRichTooltipConfig.from({title:s.GLocale.get(new s.GLocaleKey("GLayerTool","tooltip-title")),description:s.GLocale.get(new s.GLocaleKey("GLayerTool","tooltip-description")),middle:!1,learnMore:"https://documentation.corelvector.com/tools/selection-tools/#layer-tool"})},{tool:r.GSliceTool,toolString:"GSliceTool",title:s.GLocale.get(new s.GLocaleKey("GSliceTool","name")),group:"select",category:"other",key:"S",icon:"gravit-icon-slice",richTooltipConfig:d.GRichTooltipConfig.from({title:s.GLocale.get(new s.GLocaleKey("GSliceTool","tooltip-title")),description:s.GLocale.get(new s.GLocaleKey("GSliceTool","tooltip-description")),middle:!1,shortcut:["S"],learnMore:"https://documentation.corelvector.com/tools/selection-tools/#slice-tool"})},{tool:r.GPenTool,toolString:"GPenTool",title:s.GLocale.get(new s.GLocaleKey("GPenTool","name")),group:"path",key:"P",icon:"gravit-icon-pen",richTooltipConfig:d.GRichTooltipConfig.from({title:s.GLocale.get(new s.GLocaleKey("GPenTool","tooltip-title")),description:s.GLocale.get(new s.GLocaleKey("GPenTool","tooltip-description")),middle:!1,shortcut:["P"],video:so.gApi.getRichTooltipVideoURL("Pen_Too.mp4"),learnMore:"https://documentation.corelvector.com/tools/drawing-tools/#pen-tool"})},{tool:r.GBezigonTool,toolString:"GBezigonTool",title:s.GLocale.get(new s.GLocaleKey("GBezigonTool","name")),group:"path",key:"B",icon:"gravit-icon-pen-filled",pro:!0,feature:"bezigon",richTooltipConfig:d.GRichTooltipConfig.from({title:s.GLocale.get(new s.GLocaleKey("GBezigonTool","tooltip-title")),description:s.GLocale.get(new s.GLocaleKey("GBezigonTool","tooltip-description")),middle:!1,shortcut:["B"],isPro:gDesigner.isProTooltipNeeded("bezigon"),video:so.gApi.getRichTooltipVideoURL("Bezigon_Tool.mp4"),learnMore:"https://documentation.corelvector.com/tools/drawing-tools/#bezigon-tool"})},{tool:r.GKnifeTool,toolString:"GKnifeTool",title:s.GLocale.get(new s.GLocaleKey("GKnifeTool","name")),group:"knife",category:"modify",key:"K",icon:"gravit-icon-scalpel",richTooltipConfig:d.GRichTooltipConfig.from({title:s.GLocale.get(new s.GLocaleKey("GKnifeTool","tooltip-title")),description:s.GLocale.get(new s.GLocaleKey("GKnifeTool","tooltip-description")),middle:!1,shortcut:["K"],video:so.gApi.getRichTooltipVideoURL("Knife_Tool.mp4"),learnMore:"https://documentation.corelvector.com/tools/other-tools/#knife-tool"})},{tool:r.GFreehandTool,toolString:"GFreehandTool",title:s.GLocale.get(new s.GLocaleKey("GFreehandTool","name")),group:"path",category:"hand",icon:"gravit-icon-free-hand-draw",richTooltipConfig:d.GRichTooltipConfig.from({title:s.GLocale.get(new s.GLocaleKey("GFreehandTool","tooltip-title")),description:s.GLocale.get(new s.GLocaleKey("GFreehandTool","tooltip-description")),middle:!1,video:so.gApi.getRichTooltipVideoURL("Freehand_Tool.mp4"),learnMore:"https://documentation.corelvector.com/tools/drawing-tools/#freehand-tool"})},{tool:r.GMagicTool,toolString:"GMagicTool",title:s.GLocale.get(new s.GLocaleKey("GMagicTool","name")),group:"knife",category:"modify",icon:"gravit-icon-freehand-shape",richTooltipConfig:d.GRichTooltipConfig.from({title:s.GLocale.get(new s.GLocaleKey("GMagicTool","tooltip-title")),description:s.GLocale.get(new s.GLocaleKey("GMagicTool","tooltip-description")),middle:!1,video:so.gApi.getRichTooltipVideoURL("Freehand_Shaping_Tool.mp4"),learnMore:"https://documentation.corelvector.com/tools/other-tools/#freehand-shaping-tool"})},{tool:r.GLineTool,toolString:"GLineTool",title:s.GLocale.get(_?new s.GLocaleKey("GCommonNames","tool.line"):new s.GLocaleKey("GLineTool","name")),group:"shape",key:"L",icon:"gravit-icon-line",richTooltipConfig:d.GRichTooltipConfig.from({title:s.GLocale.get(new s.GLocaleKey("GLineTool","tooltip-title")),description:s.GLocale.get(new s.GLocaleKey("GLineTool","tooltip-description")),middle:!1,shortcut:["L"],video:so.gApi.getRichTooltipVideoURL("Line_Tool.mp4"),learnMore:"https://documentation.corelvector.com/basics/shapes-paths/#line"})},{tool:r.GRectangleTool,toolString:"GRectangleTool",title:s.GLocale.get(new s.GLocaleKey("GRectangleTool","name")),group:"shape",key:"R",shortcuts:[["M"]],icon:"gravit-icon-rectangle",richTooltipConfig:d.GRichTooltipConfig.from({title:s.GLocale.get(new s.GLocaleKey("GRectangleTool","tooltip-title")),description:s.GLocale.get(new s.GLocaleKey("GRectangleTool","tooltip-description")),middle:!1,shortcut:["R"],video:so.gApi.getRichTooltipVideoURL("Rectangle_Tool.mp4"),learnMore:"https://documentation.corelvector.com/basics/shapes-paths/#rectangle-r"})},{tool:r.GEllipseTool,toolString:"GEllipseTool",title:s.GLocale.get(new s.GLocaleKey("GEllipseTool","name")),group:"shape",key:"E",icon:"gravit-icon-ellipse",richTooltipConfig:d.GRichTooltipConfig.from({title:s.GLocale.get(new s.GLocaleKey("GEllipseTool","tooltip-title")),description:s.GLocale.get(new s.GLocaleKey("GEllipseTool","tooltip-description")),middle:!1,shortcut:["E"],video:so.gApi.getRichTooltipVideoURL("Ellipse_Tool.mp4"),learnMore:"https://documentation.corelvector.com/basics/shapes-paths/#ellipse-e"})},{tool:r.GPolygonTool,toolString:"GPolygonTool",title:s.GLocale.get(new s.GLocaleKey("GPolygonTool","name")),group:"shape",category:"polygon",icon:"gravit-icon-polygon",richTooltipConfig:d.GRichTooltipConfig.from({title:s.GLocale.get(new s.GLocaleKey("GPolygonTool","tooltip-title")),description:s.GLocale.get(new s.GLocaleKey("GPolygonTool","tooltip-description")),middle:!1,learnMore:"https://documentation.corelvector.com/basics/shapes-paths/#polygon"})},{tool:r.GTriangleTool,toolString:"GTriangleTool",title:s.GLocale.get(new s.GLocaleKey("GTriangleTool","name")),group:"shape",category:"polygon",icon:"gravit-icon-triangle",richTooltipConfig:d.GRichTooltipConfig.from({title:s.GLocale.get(new s.GLocaleKey("GTriangleTool","tooltip-title")),description:s.GLocale.get(new s.GLocaleKey("GTriangleTool","tooltip-description")),middle:!1,learnMore:"https://documentation.corelvector.com/basics/shapes-paths/#triangle-star"})},{tool:r.GStarTool,toolString:"GStarTool",title:s.GLocale.get(new s.GLocaleKey("GStarTool","name")),group:"shape",category:"polygon",icon:"gravit-icon-star",richTooltipConfig:d.GRichTooltipConfig.from({title:s.GLocale.get(new s.GLocaleKey("GStarTool","tooltip-title")),description:s.GLocale.get(new s.GLocaleKey("GStarTool","tooltip-description")),middle:!1,learnMore:"https://documentation.corelvector.com/basics/shapes-paths/#triangle-star"})},{tool:r.GTextTool,toolString:"GTextTool",title:s.GLocale.get(new s.GLocaleKey("GTextTool","name")),group:"insert",key:"T",icon:"gravit-icon-textbox",richTooltipConfig:d.GRichTooltipConfig.from({title:s.GLocale.get(new s.GLocaleKey("GTextTool","tooltip-title")),description:s.GLocale.get(new s.GLocaleKey("GTextTool","tooltip-description")),middle:!1,video:so.gApi.getRichTooltipVideoURL("Text_Tool.mp4"),shortcut:["T"],learnMore:"https://documentation.corelvector.com/working-with-text/"})},{tool:r.GHandTool,toolString:"GHandTool",title:s.GLocale.get(new s.GLocaleKey("GHandTool","name")),group:"view",key:"H",icon:"gravit-icon-move",richTooltipConfig:d.GRichTooltipConfig.from({title:s.GLocale.get(new s.GLocaleKey("GHandTool","tooltip-title")),description:s.GLocale.get(new s.GLocaleKey("GHandTool","tooltip-description")),middle:!1,shortcut:["H"],learnMore:"https://documentation.corelvector.com/tools/other-tools/#pan"})},{tool:r.GZoomTool,toolString:"GZoomTool",title:s.GLocale.get(new s.GLocaleKey("GZoomTool","name")),group:"view",key:"Z",icon:"gravit-icon-zoom-in",richTooltipConfig:d.GRichTooltipConfig.from({title:s.GLocale.get(new s.GLocaleKey("GZoomTool","tooltip-title")),description:s.GLocale.get(new s.GLocaleKey("GZoomTool","tooltip-description")),middle:!1,shortcut:["Z"],learnMore:"https://documentation.corelvector.com/tools/other-tools/#zoom-tool"})}],properties:[new En,new Tn,new An,new bn,new Cn,new dn,new cn,new un,new vn,new fn,new sn,new Sn,new ln,new _n,new xn,new an,new wn,new tn,new nn,new on,new rn]},"function"!=typeof window.gdb_initsavestepsaction||y||a.IS_RC||window.gdb_initsavestepsaction(window.gravit.actions,Pe),"function"==typeof window.gdb_initsetupsystemdateaction&&window.gdb_initsetupsystemdateaction(window.gravit.actions),"function"!=typeof window.gdb_inittranslationtoolaction||y||a.IS_RC||window.gdb_inittranslationtoolaction(window.gravit.actions,Pe),"function"!=typeof window.gdb_initrecordgravitaction||y||a.IS_RC||window.gdb_initrecordgravitaction(window.gravit.actions,Pe);let t=new On(e._storage);t.load(),t.init(gravit),so.gPatternChooserNormal=new mn,so.gPatternChooserTouch=new yn,gDesigner.isTouchEnabled()?so.gPatternChooser=so.gPatternChooserTouch:so.gPatternChooser=so.gPatternChooserNormal,gDesigner.init(),gDesigner.relayout(),await gDesigner.start().finally(()=>{gDesigner.isTouchDevice()&&!gDesigner.isTouchEnabled()&&i.TOUCH_LAYOUT&&(gDesigner.stats("touch-dialog_open"),Un.confirm("".concat(s.GLocale.get(new s.GLocaleKey("GSystemDialog","text.supported-touch-title")),"<br>\n                         ").concat(s.GLocale.get(new s.GLocaleKey("GSystemDialog","text.supported-touch-footer"))),e=>{gDesigner.stats("touch-dialog_click_".concat(e?"ok":"cancel")),e&&gDesigner.executeAction(kt.ID,void 0,void 0,!0)},s.GLocale.get(new s.GLocaleKey("GLocale","cancel")),{text:s.GLocale.get(new s.GLocaleKey("GLocale","ok")),pro:!0},!1,!1,!1,"designer.settings.dont_show_supported_touch_dialog"))}),"undefined"!=typeof dataLayer&&dataLayer.push({runtime1:gContainer.getRuntime()});var n=e.start();gContainer.getRuntime()===Fn.Runtime.Electron&&gDesigner.getUser().then(e=>{e||po.then(e=>{e||Nn.performLogin()})}),gDesigner.updateRecentDocumentsAction(),Mn.init();let o=gDesigner.getSetting("webcdr_choice",y?"BETA":"STAGING");if(lo?i.trunkwebcdr&&(a.IS_LOCALHOST?so.gApi.webcdr=o&&"BETA"===o?i.cloudBetaURL+"/api/webcdr":i.cloudTrunkURL+"/api/webcdr":so.gApi.webcdr=o&&"BETA"===o?i.betaWebcdr:i.trunkwebcdr):y?so.gApi.webcdr=o&&"BETA"===o?i.betaWebcdr:i.stagingWebcdr:i.webcdr&&(so.gApi.webcdr=i.webcdr),$("body").removeClass("loading"),window.onbeforeunload=function(e){gDesigner.isReloading()||gContainer.canUnload(gDesigner.hasModifiedDocuments(),gDesigner.hasSynchronizingDocuments(),!1)||(e.preventDefault(),e.returnValue="")},window.onunload=function(){gDesigner.hasEventListeners(en)&&gDesigner.trigger(new en)},n){let e=new A;if(gContainer.getRuntime()===Fn.Runtime.Browser||gContainer.getRuntime()===Fn.Runtime.PWA||gContainer.getRuntime()===Fn.Runtime.IPad){let t="";if(n.getType()===Fn.OpenFileRequest.Type.DocumentOrToken)try{t=JSON.parse(n.getContent()).doc}catch(e){}else t=n.getContent();e.setTitle(t),Qn&&e.setFocusAnnotationId(Qn.options.annot),gDesigner.addDocument(e)}gContainer.getRuntime()===Fn.Runtime.Electron?gContainer.openStorageFile(e,n,e=>{e&&gDesigner.openDocument(e)}):no.handleOpenFileRequest(e,n),gDesigner.createNewDocumentDialog()}else f.default.isEnabled()?gDesigner.handleWelcomeScreenOpenWithUserPermissions():gDesigner.newInfiniteDocument();gDesigner.hasEventListeners(zn)&&gDesigner.trigger(new zn(zn.Status.Ready)),(0,c.isSupportedScreenSize)()?!(0,c.isSupportedScreenSize)(document.body.clientWidth)&&i.msTeamsMode&&await ao()&&Un.alert(s.GLocale.get(new s.GLocaleKey("GSystemDialog","text.unsupported-windows-size-msteams"))):i.msTeamsMode?Un.alert(s.GLocale.get(new s.GLocaleKey("GSystemDialog","text.unsupported-screen-size-msteams"))):(gDesigner.stats("touch-dialog_unsupport-size"),Un.showOneTimeDialog(s.GLocale.get(new s.GLocaleKey("GSystemDialog","text.unsupported-screen-size")).replace("%app",i.DESIGNER.TITLE),"designer.settings.dont_show_unsupported_screen_size_dialog")),t.start(),await Vn.start(),C&&await(0,c._tryAndCatch)(()=>{gDesigner._softwareUpdateManager=new Wn,gDesigner._softwareUpdateManager.start()}),so.gMemoryManager=new to,so.gMemoryManager.start()};if("function"!=typeof gdb_initSetupSystemDate||y||await gdb_initSetupSystemDate(),await qn,await(0,c._tryAndCatch)(()=>Hn.init()),await null,_||gDesigner.isEnabledSubscriptions()){const e=async()=>{const e=await gDesigner.getUser();let t;if(e&&e.isAnonymous()&&Qn&&Qn.link===Fn.DeepLinking.DirectLink){let e=Qn.options[Fn.DeepLinking.DirectLink];t=JSON.parse((0,c.base64StringToString)(e)).signup}if(!e||e.reload||e.deactivated||e.isAnonymous()&&t){const n=Qn&&Qn.link;e&&!e.isAnonymous()&&await(0,c._tryAndCatch)(()=>gDesigner.signout(!0,!0));const o=new URL(window.location.href).searchParams.get("token");if(o){const{enterprise:e}=await i.gApi.checkEnterpriseToken(o).catch({enterprise:!1});e&&gDesigner.setEnterpriseLoginForm(!0)}await gContainer.preLogin().catch(e=>{console.warn("gContainer preLogin error",e)}),new $n(ro).open({flow:n,signup:t,version:"i015.3"}),Rn.setupInAppLinkReloadAppForOnce(),p&&p.has(Fn.DeepLinking.PWADialog)&&gDesigner.executeWhenReady(()=>{gDesigner.showInstallPwaDialog(!0)}),E&&Un.error(E)}else await ro(),p&&p.has(Fn.DeepLinking.PWADialog)&&gDesigner.executeWhenReady(()=>{gDesigner.showInstallPwaDialog()})};if(i.msTeamsMode)await oo()?new u.default(ro).load():window.location.replace(window.location.origin);else if(navigator.onLine||gDesigner.isEnabledProFeatures("offline"))await e();else{const t=Un.custom({icon:"clock",title:s.GLocale.get(new s.GLocaleKey("GCommonNames","text.license-offline-title")),subtitle:s.GLocale.get(new s.GLocaleKey("GCommonNames","text.license-offline-expired-subtitle")),closeable:!1}),n=()=>{navigator.onLine&&(e(),t.gDialog("close"),$(window).off("online",n))};$(window).on("online",n)}}else await ro();i.gApi.setHooks({onError:()=>{uo||co().then(e=>e&&void(uo||(uo=new jn,uo.open())))}})}},function(e,t,n){"use strict";var o=n(14);n(7);var i=o(n(165)),a=n(1),r=o(n(1218)),s=o(n(37)),l=o(n(428)),c=n(1219);const{isPrivateChat:d,isTeamsChannel:u}=l.default;function p(e){if("function"!=typeof e)throw"GMSTeamsAppLoader constructor error: Wrong argument is provided";this._callback=e}p.prototype.isExeuteOnMobileDevice=function(){return i.default.hardware===i.default.Hardware.Phone},p.prototype.load=async function(){if(this.isExeuteOnMobileDevice())return void s.default.splashScreenError(a.GLocale.get(new a.GLocaleKey("GSystemDialog","text.unsupported-mobile-for-msteams-new")));const e=[c.MS_TEAMS_COMMAND];await d()?e.push(c.ONE_DRIVE_BUSINESS_COMMAND):await u()&&e.push(c.SHAREPOINT_COMMAND),r.default.getInstance().authenticate(e).then(()=>{this._callback()})},e.exports=p},function(e,t,n){"use strict";var o=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e,t,n,o){var i=void 0!==window.dataLayer?window.dataLayer:[],s=n;i.push({version:"3.14.3"}),i.push({gtmLocation:s}),i.push({hardware:u()}),await(0,r._tryAndCatch)(async()=>{if(o&&!o.isAnonymous()){l&&l.forEach(e=>dataLayer.push({[e]:void 0}));const{type:e="EWOSU",token:t}=o;i.push({[e]:t})}});var c=a.default.getRuntimeCode();i.push({installType:c}),i.push({event:"INIT_GTM_EVENT"})},n(7),n(28);var i=n(1),a=o(n(838)),r=n(34),s=n(782);const{GA:{customDimensions:l}={},GoogleTagManagerSettings:c}=n(9);window.dataLayer=[];const d=c.getContainerId(s.nodeEnv);!function(e,t,n,o,i){e[o]=e[o]||[],e[o].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],r=t.createElement(n);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id="+i,a.parentNode.insertBefore(r,a)}(window,document,"script","dataLayer",d);const u=()=>{switch(i.GSystem.hardware){case i.GSystem.Hardware.Desktop:return"desktop";case i.GSystem.Hardware.Tablet:return"tablet";case i.GSystem.Hardware.Phone:return"phone";default:return"unknown"}}},function(e,t,n){"use strict";var o=n(14);n(26);var i=n(1131),a=o(n(373)),r=o(n(151)),s=o(n(1221)),l=n(1);e.exports={debugDownloadPNG:function(){(0,i.downloadActiveFile)(a.default.PNG.ext)},debugDownloadPDF:function(e){(0,i.downloadActiveFile)(a.default.PDF.ext,{dpi:e||l.GLength.DPI})},debugDownloadSVG:function(){(0,i.downloadActiveFile)(a.default.SVG.ext)},debugDownloadJPEG:function(){(0,i.downloadActiveFile)(a.default.JPG.ext)},debugOpenFile:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=gDesigner.getDefaultStorage(),o=Object.assign({disableFileSystemAccessAPI:!0,silent:!0},t);n.openPrompt(r.default.FileTypes.filter(e=>e.load),t=>{gDesigner.openDocument(t),e&&e()},!1,o)},debugImportFont:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.assign({disableFileSystemAccessAPI:!0,silent:!0},t),o=new s.default;o.import(e,n)}}},function(e,t,n){"use strict";e.exports=class{static getSetting(){return"show_welcome_screen"}static isEnabled(){const e=gDesigner.getSetting("show_welcome_screen");return"boolean"!=typeof e||e}}},function(e,t,n){"use strict";var o=n(14);n(51),n(3),n(28);var i,a=n(9),r=n(34),s=o(n(548));!function(e){var t=function(){function e(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(e.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(e){this._dropEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(e){this._effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),e.prototype.clearData=function(e){null!=e?delete this._data[e]:this._data=null},e.prototype.getData=function(e){return this._data[e]||""},e.prototype.setData=function(e,t){this._data[e]=t},e.prototype.setDragImage=function(e,t,o){var i=n._instance;i._imgCustom=e,i._imgOffset={x:t,y:o}},e}();e.DataTransfer=t;var n=function(){function e(){if(e._instance)throw"DragDropTouch instance already created.";var t=(0,r.isPassiveSupported)();if("ontouchstart"in document||"undefined"!=typeof TouchEvent){this._documentTouchStart=this._documentTouchStart.bind(this),this._documentTouchEnd=this._documentTouchEnd.bind(this),this._documentDragStart=this._documentDragStart.bind(this),document.addEventListener("touchstart",this._documentTouchStart,!t||{passive:!0,capture:!0}),document.addEventListener("touchend",this._documentTouchEnd,!t||{passive:!0,capture:!0}),document.addEventListener("touchcancel",this._documentTouchEnd,!t||{passive:!0,capture:!0}),document.addEventListener("dragstart",this._documentDragStart,!0);var n=document;this._touchstart=this._touchstart.bind(this),this._touchmove=this._touchmove.bind(this),this._touchend=this._touchend.bind(this);var o=!!t&&{passive:!1,capture:!1};n.addEventListener("touchstart",this._touchstart,o)}}return e.getInstance=function(){return e._instance},e.prototype._touching=!1,e.prototype._documentTouchStart=function(e){e.isTrusted&&(this._touching=!0)},e.prototype._documentTouchEnd=function(e){e.isTrusted&&(this._touching=!1,this._touchend(e))},e.prototype._documentDragStart=function(e){e.isTrusted&&this._touching&&e.cancelable&&(e.preventDefault(),e.stopPropagation())},e.prototype._touchstart=function(t){var n=this;if(this._shouldHandle(t)){this._reset();var o=this._closestDraggable(t.target);o&&(e._ISPRESSHOLDMODE=parseInt(o.dataset.dragMode)===s.default.PRESS_AND_HOLD,this._dragSource=o,this._updateImageOffset(t),this._startTouchTime=(new Date).getTime(),this._ptDown=this._getPoint(t),this._lastTouch=t,this._dragSource.addEventListener("touchmove",this._touchmove,!0),this._dragSource.addEventListener("touchend",this._touchend,!0),this._dragSource.addEventListener("touchcancel",this._touchend,!0),e._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout((function(){n._isDragEnabled=!0,n._dragInitEvent=t,n._touchmove(t)}),e._PRESSHOLDAWAIT)))}},e.prototype._touchmove=function(t){if(this._shouldCancelPressHoldMove(t))this._reset();else if(this._shouldHandleMove(t)||this._shouldHandlePressHoldMove(t)){var n=this._getTarget(t);if(!this._img&&this._dragSource&&(t.cancelable&&t.preventDefault(),e._ISPRESSHOLDMODE&&(this._dispatchEvent(this._dragInitEvent||t,"draginit",this._dragSource),this._dragSource.classList.add("g-draggable"),this._dragSource.parentElement&&this._dragSource.parentElement.classList.add("g-draggable-parent"))),!this._img&&this._dragSource&&this._shouldStartDragging(t))t.cancelable&&t.preventDefault(),this._dragSource.classList.remove("g-draggable"),this._dragSource.parentElement&&this._dragSource.parentElement.classList.remove("g-draggable-parent"),this._dispatchEvent(t,"dragstart",this._dragSource)||(this._createImage(t),this._dispatchEvent(t,"dragenter",n));if(this._img){const e=gDesigner.getContextMenu();e&&e.close(),this._lastTouch=t,t.cancelable&&t.preventDefault(),this._dispatchEvent(t,"drag",this._dragSource),n!=this._lastTarget&&(this._dispatchEvent(t,"dragenter",n),this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._lastTarget=n),this._moveImage(t),this._isDropZone=this._dispatchEvent(t,"dragover",n)}}else this._img&&this._destroyImage()},e.prototype._touchend=function(e){try{this._shouldHandle(e)&&this._dragSource&&("touchcancel"!==e.type&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource))}finally{this._reset()}},e.prototype._shouldHandle=function(e){if(e.touches&&1===e.touches.length){var t=e.touches[0]&&e.touches[0].target;if(t&&t.hasAttribute("draggable")&&!t.draggable)return!1}return e&&!e.defaultPrevented&&e.touches&&e.touches.length<2},e.prototype._shouldHandleMove=function(t){return!e._ISPRESSHOLDMODE&&t.cancelable&&this._shouldHandle(t)},e.prototype._shouldHandlePressHoldMove=function(t){return e._ISPRESSHOLDMODE&&this._isDragEnabled&&t&&t.touches&&t.touches.length},e.prototype._shouldCancelPressHoldMove=function(t){return e._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(t)>e._PRESSHOLDMARGIN},e.prototype._shouldStartDragging=function(t){var n=this._getDelta(t);return n>e.DRAG_MOVE_THRESHOLD&&n<=e.DRAG_MOVE_LIMIT&&(new Date).getTime()-this._startTouchTime>=e.DRAG_MOVE_DELAY||e._ISPRESSHOLDMODE&&n>=e._PRESSHOLDTHRESHOLD},e.prototype._reset=function(){this._destroyImage(),this._dragSource&&(this._dragSource.classList.remove("g-draggable"),this._dragSource.parentElement&&this._dragSource.parentElement.classList.remove("g-draggable-parent"),this._dragSource.removeEventListener("touchmove",this._touchmove),this._dragSource.removeEventListener("touchend",this._touchend),this._dragSource.removeEventListener("touchcancel",this._touchend)),this._dragSource=null,this._startTouchTime=0,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new t,this._pressHoldInterval&&clearTimeout(this._pressHoldInterval)},e.prototype._getPoint=function(e,t){return e&&e.touches&&(e=e.touches[0]),{x:t?e.pageX:e.clientX,y:t?e.pageY:e.clientY}},e.prototype._getDelta=function(t){if(e._ISPRESSHOLDMODE&&!this._ptDown)return 0;var n=this._getPoint(t);return Math.abs(n.x-this._ptDown.x)+Math.abs(n.y-this._ptDown.y)},e.prototype._getTarget=function(e){for(var t=this._getPoint(e),n=document.elementFromPoint(t.x,t.y);n&&"none"==getComputedStyle(n).pointerEvents;)n=n.parentElement;return n},e.prototype._translate=function(e,t,n){e.style.transform="translate3d(".concat(t,"px, ").concat(n,"px, 0px)")},e.prototype._createImage=function(t){this._img&&this._destroyImage();var n=this._imgCustom||this._dragSource;this._img=n.cloneNode(!0),this._copyStyle(n,this._img),e._ISPRESSHOLDMODE&&this._img.classList.add("g-draggable-drag-image"),this._img.style.left=this._img.style.top="0px",this._translate(this._img,-9999,-9999);var o=this._img.style;o.position="absolute",o.pointerEvents="none",o["touch-action"]="none",o.zIndex="999999",this._imgCustom||(this._img.style.opacity=e._OPACITY.toString()),this._moveImage(t),document.body.appendChild(this._img)},e.prototype._updateImageOffset=function(e){var t=(this._imgCustom||this._dragSource).getBoundingClientRect(),n=this._getPoint(e);this._imgOffset={x:n.x-t.left,y:n.y-t.top}},e.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},e.prototype._moveImage=function(e){if(this._img){var t=this._getPoint(e);this._translate(this._img,t.x-this._imgOffset.x,t.y-this._imgOffset.y)}},e.prototype._copyProps=function(e,t,n){for(var o=0;o<n.length;o++){var i=n[o];e[i]=t[i]}},e.prototype._copyStyle=function(t,n){if(e._rmvAtts.forEach((function(e){n.removeAttribute(e)})),n.classList.add(e._CUSTOM_DRAGGING_ELEMENT_CLASS),t instanceof HTMLCanvasElement){var o=t,i=n;i.width=o.width,i.height=o.height,i.getContext("2d").drawImage(o,0,0)}for(var a=getComputedStyle(t),r=0;r<a.length;r++){var s=a[r];s.indexOf("transition")<0&&(n.style[s]=a[s])}n.style.pointerEvents="none";for(r=0;r<t.children.length;r++)this._copyStyle(t.children[r],n.children[r])},e.prototype._dispatchEvent=function(t,n,o){try{if(t&&o){var i=document.createEvent("Event"),a=t.touches?t.touches[0]:t;if(i.initEvent(n,!0,!0),i.button=0,i.which=i.buttons=1,this._copyProps(i,t,e._kbdProps),this._copyProps(i,a,e._ptProps),i.dataTransfer=this._dataTransfer,!i.layerX&&!i.layerY){var r=o.getBoundingClientRect(),s=i.clientX-r.left,l=i.clientY-r.top;i.layerX=s,i.layerY=l}const c=o.dispatchEvent(i);return i.defaultPrevented||!1===c}}catch(t){console.warn("DragDropTouch dispatch event error",t)}return!1},e.prototype._closestDraggable=function(e){for(;e;e=e.parentElement)if(e.hasAttribute("draggable")&&e.draggable)return e;return null},e}();n._instance=new n,n._OPACITY=.5,n._ISPRESSHOLDMODE=!1,n._PRESSHOLDAWAIT=a.LONG_PRESS_TIME_OUT,n._PRESSHOLDMARGIN=25,n._PRESSHOLDTHRESHOLD=a.MIN_TOUCH_MOVE_DISTANCE,n.DRAG_MOVE_THRESHOLD=a.MIN_TOUCH_MOVE_DISTANCE||0,n.DRAG_MOVE_LIMIT=25,n.DRAG_MOVE_DELAY=100,n._rmvAtts="draggable".split(","),n._CUSTOM_DRAGGING_ELEMENT_CLASS="g-dragging-shadow-element",n._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),n._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),e.DragDropTouch=n}(i||(i={}))},function(e,t,n){(function(o){var i,a;void 0===(a="function"==typeof(i=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return r(e)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=i(e);if(t){var a=i(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return s(this,n)}}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}function d(){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=c(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}var u=function(){function t(){e(this,t),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(t,[{key:"addEventListener",value:function(e,t,n){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:n})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var n=this.listeners[e],o=0,i=n.length;o<i;o++)if(n[o].callback===t)return void n.splice(o,1)}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var t=this.listeners[e.type].slice(),n=0,o=t.length;n<o;n++){var i=t[n];try{i.callback.call(this,e)}catch(e){Promise.resolve().then((function(){throw e}))}i.options&&i.options.once&&this.removeEventListener(e.type,i.callback)}return!e.defaultPrevented}}}]),t}(),p=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(s,t);var o=l(s);function s(){var t;return e(this,s),(t=o.call(this)).listeners||u.call(r(t)),Object.defineProperty(r(t),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(r(t),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(r(t),"reason",{value:void 0,writable:!0,configurable:!0}),t}return n(s,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),d(i(s.prototype),"dispatchEvent",this).call(this,e)}}]),s}(u),g=function(){function t(){e(this,t),Object.defineProperty(this,"signal",{value:new p,writable:!0,configurable:!0})}return n(t,[{key:"abort",value:function(e){var t;try{t=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}var n=e;if(void 0===n)if("undefined"==typeof document)(n=new Error("This operation was aborted")).name="AbortError";else try{n=new DOMException("signal is aborted without reason")}catch(e){(n=new Error("This operation was aborted")).name="AbortError"}this.signal.reason=n,this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}();function h(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}"undefined"!=typeof Symbol&&Symbol.toStringTag&&(g.prototype[Symbol.toStringTag]="AbortController",p.prototype[Symbol.toStringTag]="AbortSignal"),function(e){if(h(e))if(e.fetch){var t=function(e){"function"==typeof e&&(e={fetch:e});var t=e,n=t.fetch,o=t.Request,i=void 0===o?n.Request:o,a=t.AbortController,r=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,s=void 0!==r&&r;if(!h({fetch:n,Request:i,AbortController:a,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:s}))return{fetch:n,Request:l};var l=i;(l&&!l.prototype.hasOwnProperty("signal")||s)&&((l=function(e,t){var n;t&&t.signal&&(n=t.signal,delete t.signal);var o=new i(e,t);return n&&Object.defineProperty(o,"signal",{writable:!1,enumerable:!1,configurable:!0,value:n}),o}).prototype=i.prototype);var c=n;return{fetch:function(e,t){var n=l&&l.prototype.isPrototypeOf(e)?e.signal:t?t.signal:void 0;if(n){var o;try{o=new DOMException("Aborted","AbortError")}catch(e){(o=new Error("Aborted")).name="AbortError"}if(n.aborted)return Promise.reject(o);var i=new Promise((function(e,t){n.addEventListener("abort",(function(){return t(o)}),{once:!0})}));return t&&t.signal&&delete t.signal,Promise.race([i,c(e,t)])}return c(e,t)},Request:l}}(e),n=t.fetch,o=t.Request;e.fetch=n,e.Request=o,Object.defineProperty(e,"AbortController",{writable:!0,enumerable:!1,configurable:!0,value:g}),Object.defineProperty(e,"AbortSignal",{writable:!0,enumerable:!1,configurable:!0,value:p})}else console.warn("fetch() is not available, cannot install abortcontroller-polyfill")}("undefined"!=typeof self?self:o)})?i.call(t,n,t,e):i)||(e.exports=a)}).call(this,n(101))},function(e,t,n){"use strict";n(7);const{gApi:o}=n(9),i=n(519);class a{static async checkMaintenance(){try{const e=await this._cache.get().catch(()=>null);return!!e&&e.isMaintenanceEnabled()}catch(e){console.log("Maintenance status",e)}return!1}}a._cache=new i(()=>o.maintenance.getStatus(),6e4),e.exports=a},function(e,t,n){"use strict";n(540);var o=n(14);n(52),n(17),n(158),n(578),n(89),n(26),n(51),n(7),n(18),n(3),n(62),n(29),n(124),n(28),n(22);var i=n(45),a=n(1),r=n(13),s=n(9),l=n(342),c=o(n(1467)),d=n(1222),u=n(34),p=n(1223),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var r=i?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(o,a,r):o[a]=e[a]}return o.default=e,n&&n.set(e,o),o}(n(1711)),h=(o(n(1225)),o(n(1132))),f=o(n(539)),m=o(n(713)),y=o(n(1469)),v=o(n(1471)),_=o(n(1472)),b=o(n(1473));function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}var C=n(151),x=n(223),S=n(325),E=n(783),A=n(1475),T=n(1496),G=n(1497),P=n(1236),D=n(843),L=n(550),I=n(1514),k=n(379);n(1515);var O=n(1516),F=n(585),R=n(842),M=n(1270),N=n(125),B=n(1128),U=n(71),j=n(1272),K=n(1149),V=n(1147),H=n(1273),W=(n(1274),n(238)),z=n(572),q=n(1519),Y=n(1534),X=n(1536),Q=n(1279);n(1537);var J=n(111),Z=n(206),ee=n(77),te=n(37),ne=n(1252),oe=n(1538),ie=n(1226),ae=n(277),re=n(1289),se=n(839),le=n(426),ce=n(278),de=n(784),ue=n(1297),pe=n(376),ge=n(847),he=n(1298),fe=n(1542),me=n(1543),ye=n(1545),ve=n(1142),_e=n(1546),be=n(825),we=n(323),Ce=n(1301),xe=n(764),Se=n(239),Ee=n(586),Ae=n(1302),Te=n(1304),Ge=n(787),Pe=n(1164),De=n(432),Le=n(78),Ie=(n(16),n(427));const{defaultLegacyUserSettings:{features:ke}}=s.defaultUserSettings;var Oe=n(9);const{gApi:Fe}=Oe;var Re=n(372),Me=n(1554);const Ne=n(1555),Be=n(1558);var Ue=n(1561);n(589);const $e=n(34),je=n(166),Ke=n(1314),Ve=n(1150),He=(n(1565),n(1566)),We=n(1567),ze=n(1568);var qe=n(1569);n(1570),qe.addKeycodes({173:"-"}),qe.addKeycodes({187:"="}),qe.addKeycodes({61:"="});var Ye,Xe,Qe=0,Je=null;function Ze(){this._settings={},this._settingsLoaded=!1,this._swatches={},this._workspace=new i.GEditorWorkspace,this._documents=[],this._actions=[],this._actionsMap={},this._clipboardMimeTypes={},this._license=void 0,this._reloading=!1,this._mainMenu=new x,this._enabledSubscriptions=!1,this._documentTouchHandler=new Ne(document),this._editorTouchHandler=new Be,fe.clearSingleton(),this._cloudCommunicationManager=new fe(this),this._cursorManager=new c.default,document.addEventListener("gesturechange",(function(e){e.stopPropagation()})),window.addEventListener("dragover",e=>{e.preventDefault()},!1),window.addEventListener("drop",e=>{e.preventDefault();var t=this.getWindows().getActiveWindow(),n=t&&t.getView();n&&n.handleDropEvent(e)},!1),window.addEventListener("wheel",e=>{(r.GPlatform.modifiers.ctrlKey||r.GPlatform.modifiers.metaKey)&&e.preventDefault()},{passive:!1}),window.addEventListener("gesturestart",e=>{e.preventDefault()}),window.addEventListener("gestureend",e=>{e.preventDefault()}),window.addEventListener("gesturechange",e=>{e.preventDefault();var t=e.scale;t>1?t*=-1:t=2-t;var n=new WheelEvent("wheel",{deltaY:t,clientX:e.clientX,clientY:e.clientY,ctrlKey:!0}),o=this.getWindows()&&this.getWindows().getActiveWindow(),i=o&&o.getView()&&o.getView()._htmlElement;i&&i.dispatchEvent(n)}),document.addEventListener("keydown",function(e){if(document.activeElement&&$(document.activeElement).is(":button")&&(13==e.keyCode||32==e.keyCode)&&(e.preventDefault(),document.activeElement.blur()),this._windows){var t=document.activeElement,n=this._windows.getActiveWindow(),o=$(t).is("input")&&"number"===$(t).attr("type")&&!$(t).hasClass("g-disabled")&&"true"!==$(t).attr("disabled");!n||!n.getView()||t&&($(t).is(":editable")||o)||n.getView().focus()}}.bind(this),!1),document.addEventListener("contextmenu",function(e){return!$(e.target).is(":editable")||this.propertyPanelHasContextMenu(e)?(e.preventDefault(),!1):(e.stopPropagation(),!0)}.bind(this),!0),this._workspace.addEventListener(a.GWorkspace.ResolveUrlEvent,this._workspaceResolveUrlEvent,this),this.addEventListener(U,this._documentEvent,this),this.addEventListener(N,this._settingChangedEvent,this),this.addEventListener(ce,this._userLoggedEvent,this),this.addEventListener(de,this._userPropertiesChangedEvent,this),this.addEventListener(le,this._licenseChangedEvent,this),this.addEventListener(Pe.BeforeInstallUpdate,this._beforeInstallUpdate,this),this.addEventListener(Ge,this._applicationStatusEvent,this),this.addEventListener(pe,this._applicationStateChangedEvent,this),this.addEventListener(ge,this._shareEvent,this),this._settings.theme="light",this._settings.snap_disabled=!1,this._settings.snap_zones=!1,this._settings.snap_guides=[i.GGuideLinesGuide.ID,i.GFullPixelsGuide.ID,i.GPointsGuide.ID,i.GBBoxGuide.ID,i.GPageGuide.ID,i.GGridGuide.ID],this._settings.rulers_visible=!1,this._settings.guide_lines_visible=!0,this._settings.symbol_labels_visible=!0,this._settings.grid_visible=!0,this._settings.page_labels_visible=!0,this._settings.highlight_on_hover=!0,this._settings.invert_selection=!1,this._settings.auto_expand_layers=!0,this._settings.system_fonts_enabled=!0,this._settings.symbols_panel_shown=!1,this._settings.decimals_num=null,this._settings.enable_steps_debug=!1,this._settings.enable_cache="function"==typeof gdb_loaddesign,this._settings.ui_toolbar_alignment=!0,this._settings.eps_outline_fonts=!0,this._settings[ne.AUTO_SAVE_SETTING]=!1,this._settings[ne.AUTO_SAVE_INTERVAL_SETTING]=s.AUTOSAVE_INTERVAL_DEFAULT,this._settings.notifications_disabled=!1,this._settings.touch=!1,this._settings[k.getSettingNameForSidebar(k.Orientation.Left)]=!0,this._settings[k.getSettingNameForSidebar(k.Orientation.Right)]=!0,$(document).on("networkAvailable",()=>{this._initialized&&gDesigner.updateRecentDocumentsAction()}),this._paste=new re;const e=e=>{this.hasEventListeners(ae)&&this.trigger(new ae(e))};$(window).on("online",()=>e(!0)),$(window).on("offline",()=>{"undefined"!=typeof dataLayer&&dataLayer.push({event:"NETWORK_DISCONNECTED_EVENT"}),e(!1)})}a.GObject.inherit(Ze,a.GEventTarget),Ze.prototype._documentTouchHandler=null,Ze.prototype._editorTouchHandler=null,Ze.prototype._persona=d.GPersona.GraphicDesign,Ze.prototype._paymentFlow=null,Ze.prototype._license=void 0,Ze.prototype._translationManager=void 0,Ze.prototype._initialized=!1,Ze.prototype._ready=!1,Ze.prototype._settings=null,Ze.prototype._settingsLoaded=!1,Ze.prototype._softwareUpdateManager=null,Ze.prototype._swatches=null,Ze.prototype._workspace=null,Ze.prototype._CDRIntegrationEngine=null,Ze.prototype._documents=null,Ze.prototype._activeDocument=null,Ze.prototype._mainframe=null,Ze.prototype._frame=null,Ze.prototype._info=null,Ze.prototype._footer=null,Ze.prototype._header=null,Ze.prototype._toolbar=null,Ze.prototype._panels=null,Ze.prototype._leftSidebars=null,Ze.prototype._rightSidebars=null,Ze.prototype._windows=null,Ze.prototype._actions=null,Ze.prototype._actionsMap=null,Ze.prototype._clipboardMimeTypes=null,Ze.prototype._newDocumentDialog=null,Ze.prototype._userNameConfigDialog=null,Ze.prototype._contextMenu=null,Ze.prototype._stylesPreview={},Ze.prototype._version=null,Ze.prototype._commitSHA=null,Ze.prototype._buildNum=null,Ze.prototype._isBeta=null,Ze.prototype._storeVendor=null,Ze.prototype._env=null,Ze.prototype._user=null,Ze.prototype._fontsPath=null,Ze.prototype._paste=null,Ze.prototype._enabledSubscriptions=!1,Ze.prototype._reloading=!1,Ze.prototype._utm=null,Ze.prototype._location=null,Ze.prototype._supportedBrowsers=[],Ze.prototype._supportedTabletBrowsers=[],Ze.prototype._isBrowserSupported=!0,Ze.prototype._showCreateAccount=!1,Ze.prototype._signupOptions=null,Ze.prototype._enterpriseLoginForm=!1,Ze.prototype._anonymous=!1,Ze.prototype._assistantBar=null,Ze.prototype._mainMenu=null,Ze.prototype._mouseOverContext={context:null,prevEvt:null,contextCallback:null},Ze.prototype._realtimeManager=null,Ze.prototype._fileReviewManager=null,Ze.prototype._shareManager=null,Ze.prototype._cloudCommunicationManager=null,Ze.prototype._annotationsManager=null,Ze.prototype._cursorManager=null,Ze.prototype._draggableItemIsDragging=!1,Ze.prototype._amplitudeHelper=null,Ze.prototype._banner=null,Ze.prototype._overlay=null,Ze.prototype.getOverlay=function(){return this._overlay},Ze.prototype.getBanner=function(){return this._banner},Ze.prototype.getMainMenu=function(){return this._mainMenu},Ze.prototype.propertyPanelHasContextMenu=function(e){var t=!1;return e.composedPath&&e.composedPath()&&e.path.forEach(e=>{$(e).hasClass("properties-panel")&&(t=!!$(e).data("contextmenu"))}),t},Ze.prototype.getMouseOverContext=function(){return this._mouseOverContext},Ze.prototype.setMouseOverContext=function(e,t,n){this._mouseOverContext={context:e,prevEvt:t,contextCallback:n}},Ze.prototype._pwaEvent=window.__pwaEvent__||null,Ze.prototype.isAnonymous=function(){return this._anonymous},Ze.prototype.toggleLoading=function(e){e?$("body").addClass("g-loading"):$("body").removeClass("g-loading")},Ze.prototype.setSupportedBrowsers=function(e){this._supportedBrowsers=e},Ze.prototype.setSupportedTabletBrowsers=function(e){this._supportedTabletBrowsers=e},Ze.prototype._initBrowserSupported=function(e){var t=t=>t.some(t=>t instanceof Object?a.GSystem.operatingSystem==t.operatingSystem&&e==t.platform:e===t);a.GSystem.hardware===a.GSystem.Hardware.Tablet?this._isBrowserSupported=t(this._supportedTabletBrowsers):a.GSystem.hardware==a.GSystem.Hardware.Desktop?this._isBrowserSupported=t(this._supportedBrowsers):this._isBrowserSupported=!1},Ze.prototype.isBrowserSupported=function(){return gContainer.getRuntime()===ee.Runtime.IPad||this._isBrowserSupported},Ze.prototype.setUTM=function(e){this._utm=e},Ze.prototype.getUTM=function(){return this._utm},Ze.prototype.getTranslationManager=function(){return this._translationManager},Ze.prototype.activatePersona=function(e){var t=this._persona;t!==e&&(this._persona=e,this.hasEventListeners(ie)&&this.trigger(new ie(t,this._persona)))},Ze.prototype.getActivePersona=function(){return this._persona},Ze.prototype.getDefaultStorage=function(){return gContainer.getStorage()},Ze.prototype.getWorkspace=function(){return this._workspace},Ze.prototype.getCDRIntegrationEngine=function(){return this._CDRIntegrationEngine},Ze.prototype.getApplicationManager=function(){return this._applicationManager},Ze.prototype.getSoftwareUpdateManager=function(){return this._softwareUpdateManager},Ze.prototype.getShareManager=function(){return this._shareManager},Ze.prototype.getCloudCommunicationManager=function(){return this._cloudCommunicationManager},Ze.prototype.getAnnotationsManager=function(){return this._annotationsManager},Ze.prototype.getCursorManager=function(){return this._cursorManager},Ze.prototype.getRealtimeManager=function(){return this._realtimeManager},Ze.prototype.getFileReviewManager=function(){return this._fileReviewManager},Ze.prototype.getToolManager=function(){return this._workspace.getToolManager()},Ze.prototype.getDocuments=function(){return this._documents},Ze.prototype.getActiveDocument=function(){return this._activeDocument?this._activeDocument:null},Ze.prototype.getActiveView=function(){const e=gDesigner.getActiveDocument(),t=e&&e.getActiveWindow();return t&&t.getView()},Ze.prototype.getHeader=function(){return this._header},Ze.prototype.getInfo=function(){return this._info},Ze.prototype.getToolbar=function(){return this._toolbar},Ze.prototype.getPanels=function(){return this._panels},Ze.prototype.getLeftSidebars=function(){return this._leftSidebars},Ze.prototype.getRightSidebars=function(){return this._rightSidebars},Ze.prototype.getWindows=function(){return this._windows},Ze.prototype.isPartVisible=function(e){return"none"!==this.getPart(e).css("display")},Ze.prototype.setPartVisible=function(e,t,n){t!=this.isPartVisible(e)&&(this.getPart(e).css("display",t?n||""===n?n:"block":"none"),this.relayout())},Ze.prototype.getPart=function(e){return this._mainframe.find("#"+e.id)},Ze.prototype.getActions=function(){return this._actions},Ze.prototype.getAction=function(e){return this._actionsMap[e]||null},Ze.prototype.addMenu=function(e,t,n,o,i){e=e||this._mainMenu;var a=new S(S.Type.Menu,x);return a.setCaption(t),a.setIcon(o),e.addItem(a),n&&a.getMenu().addEventListener(E,n),i&&a.addEventListener(S.UpdateEvent,()=>i(a)),a.getMenu()},Ze.prototype.addMenuSeparator=function(e,t){var n=new S(S.Type.Divider,null,null,t);return e.addItem(n),n},Ze.prototype.addMenuItem=function(e,t,n,o,i,a,r,s,l,c,d){var u=new S(S.Type.Item);return a&&u.addEventListener(S.ActivateEvent,a),i&&(gDesigner.registerShortcut(i,function(e){return a("shortcut",e)}.bind(this),r),u.setShortcutHint(i)),u.setIcon(n),u.setPro(s),u.setNoHover(d),c&&u.addClass(c),this.updateMenuItem(u,t,!0,!1),e.addItem(u),l&&u.setAction(l),u},Ze.prototype.updateMenuItem=function(e,t,n,o,i,a){e.setCaption(t),e.setEnabled(n),e.setChecked(o),e.setPro(!!i,a)},Ze.prototype.removeMenuItem=function(e,t){e.removeItem(e.indexOf(t))},Ze.prototype.getClipboardMimeTypes=function(){return this._clipboardMimeTypes?Object.keys(this._clipboardMimeTypes):null},Ze.prototype.getClipboardContent=function(e){return this._clipboardMimeTypes&&this._clipboardMimeTypes.hasOwnProperty(e)?this._clipboardMimeTypes[e]:null},Ze.prototype.setClipboardContent=function(e,t){this._clipboardMimeTypes[e]=t},Ze.prototype.getSetting=function(e,t){return this._settings.hasOwnProperty(e)?this._settings[e]:t},Ze.prototype.setSetting=function(e,t){if(this._settingsLoaded){for(var n=e instanceof Array?e:[e],o=e instanceof Array?t:[t],i=!1,r=0;r<n.length;++r){e=n[r],t=o[r];if(!this._settings.hasOwnProperty(e)||!a.GUtil.equals(this._settings[e],t,!0)){var s=this._settings[e];this._settings[e]=t,this.trigger(new N(e,s||void 0,t)),i=!0}}if(i)try{gContainer.setProperty("designer.settings",this._settings)}catch(e){}return i}},Ze.prototype.getSwatches=function(e){if(e.startsWith("document")&&this.getActiveDocument()){var t=this.getActiveDocument().getScene().getSwatches(),n=[];if(t)for(var o=t.getFirstChild();null!==o;o=o.getNext()){var i=a.GPattern.serialize(o.getProperty("_pt"));((i.startsWith("C#")||i.startsWith("Y#"))&&"document"===e||i.startsWith("L#")&&"document-linear-gradient"===e||i.startsWith("R#")&&"document-radial-gradient"===e||i.startsWith("A#")&&"document-angular-gradient"===e||i.startsWith("T#")&&"document-texture-pattern"===e||i.startsWith("N#")&&"document-noise-pattern"===e)&&n.push(o)}return n}return this._swatches[e]},Ze.prototype.setSwatches=function(e,t,n){if((!e.startsWith("document")||this.getActiveDocument())&&(e.startsWith("document")||this._swatches.hasOwnProperty(e))){e.startsWith("document")||(this._swatches[e]=t);var o=e.startsWith("document"),i=e.startsWith("global"),r=this.getActiveDocument().getScene();if(o){if(n)r.getSwatches().clearChildren();else{for(var s=this.getSwatches(e),l=[],c=r.getSwatches().getFirstChild();null!==c;c=c.getNext())for(var d=0;d<s.length;++d)a.GUtil.equals(c,s[d])&&l.push(c);for(d=0;d<l.length;++d)r.getSwatches().removeChild(l[d])}for(d=0;d<t.length;++d)r.getSwatches().appendChild(t[d])}else if(i){var u=this._swatches.global;u=(u=(u=(u=(u=u.concat(this._swatches["global-linear-gradient"])).concat(this._swatches["global-angular-gradient"])).concat(this._swatches["global-radial-gradient"])).concat(this._swatches["global-texture-pattern"])).concat(this._swatches["global-noise-pattern"]);var p=[];for(d=0;d<u.length;++d)p.push(a.GNode.serialize(u[d]));gContainer.setProperty("swatches",p)}this.trigger(new B(e))}},Ze.prototype.getAllSwatches=function(e){var t=[];if(e.startsWith("document"))for(var n=this.getActiveDocument().getScene().getSwatches().getFirstChild();null!==n;n=n.getNext())t.push(n);else t=(t=(t=(t=(t=(t=t.concat(this._swatches.global)).concat(this._swatches["global-linear-gradient"])).concat(this._swatches["global-angular-gradient"])).concat(this._swatches["global-radial-gradient"])).concat(this._swatches["global-texture-pattern"])).concat(this._swatches["global-noise-pattern"]);return t},Ze.prototype.newInfiniteDocument=function(){var e=this.createScene();e.getActivePage().setProperties(["bck","w","h"],[a.GRGBColor.WHITE,0,0]);var t=new C(e);return this.addDocument(t),t},Ze.prototype.createScene=function(e){var t=new a.GScene(this.getWorkspace(),e);return void 0!==i.GEditorOptions.scaleBorderWidth&&t.setBorderScale(i.GEditorOptions.scaleBorderWidth),void 0!==i.GEditorOptions.scaleCorners&&t.setCornersScale(i.GEditorOptions.scaleCorners),t},Ze.prototype.createNewDocumentDialog=function(){this._newDocumentDialog=new q},Ze.prototype.openNewDocumentDialog=function(e){const t=this.getApplicationManager();(t.isCreatingNewDocumentEnabled()||t.isOpenFromCloudEnabled())&&(this._newDocumentDialog||(this._newDocumentDialog=new q),0===$(".g-new-document-dialog").length?this._newDocumentDialog.open(e):e&&e.openFromCloud&&this._newDocumentDialog.getDialogElement().find(".option.cloud-option").click())},Ze.prototype.openCloudSaveDialog=function(e,t,n,o,i){0===$(".g-new-document-dialog").length&&(this._newDocumentDialog||(this._newDocumentDialog=new q),this._newDocumentDialog.saveCloudFile(e,t,n,o,i))},Ze.prototype._shouldOpenUserNameConfigDialog=function(){return!(this._user&&!this._user.canUpdateSelfAccountData())&&(!(this._user&&this._user.isAnonymous()&&!s.ANONYMOUS_SESSION_ENABLED)&&(!this._user||!this._user.getFirstName()))},Ze.prototype.openUserNameConfigDialog=function(){if(!s.ENABLE_COLLABORATION)return;let e=this._shouldOpenUserNameConfigDialog();if(!this._userNameConfigDialog&&e){const e=this._user||{name:"",last_name:"",anonymous:""};this._userNameConfigDialog=new Y(e.name,e.last_name,e.anonymous)}e&&0===$(".g-username-config-dialog").length&&this._userNameConfigDialog.open()},Ze.prototype.closeNewDocumentDialog=function(){this._newDocumentDialog&&this._newDocumentDialog.close()},Ze.prototype.addDocument=function(e,t){void 0!==t?this._documents.splice(t,0,e):this._documents.push(e),this.hasEventListeners(U)&&this.trigger(new U(U.Type.Added,e)),this._windows.addWindow(e,!1,t)},Ze.prototype.notifyDocumentModified=function(e){this.hasEventListeners(U)&&this.trigger(new U(U.Type.Modified,e,null))},Ze.prototype._isNativeDesign=function(e){return e===s.FILE_FORMATS.find(e=>e.default).ext.toUpperCase()},Ze.prototype.isInitialized=function(){return this._initialized},Ze.prototype._canOpenDocument=function(e){if(!this._initialized)return!1;if(!this.isEnabledProFeatures()){let t=C.FileTypes.find(t=>t.ext.toUpperCase()===(e.getExtension()||"").toUpperCase());if(t&&t.pro)return gDesigner.stats("document_nonprotriespro_".concat(t.ext.toLowerCase())),this.handlePROFeatureInterruption(),!1}return!0},Ze.prototype._processOpenDocument=function(e,t){const n=e.getExtension(),o=this._isNativeDesign(n),i=new C(o?e:null);if(i.isExtensionAvailableForLoading(n))return this.addDocument(i,t),i.fileExtension=n,i.load(e),this.trigger(new U(U.Type.Opened,i)),i;var r=!!C.FileTypes.find(e=>e.ext.toUpperCase()===n.toUpperCase()&&"image"===e.category)?"text.suggestion-open-image":"text.unsupported-file-extension";return te.alert(a.GLocale.get(new a.GLocaleKey("GDocument",r))),null},Ze.prototype.openDocumentWithReload=function(e,t){if(this._canOpenDocument(e))return this._processOpenDocument(e,t)},Ze.prototype.openDocument=function(e,t){if(!this._canOpenDocument(e))return;if(e&&(0,p.shouldShowExternalFileError)(e))throw new m.default;const n=e.getExtension();if(this._isNativeDesign(n)){const t=e.getUniqueId();if(null!=t)for(var o=0;o<this._documents.length;++o){const n=this._documents[o];if(n.getStorageItem()&&n.getStorageItem().getUniqueId()===t&&(!n.getStorageItem().getVersionId||!e.getVersionId||n.getStorageItem().getVersionId()===e.getVersionId()))return this.activateDocument(n),n}}return this._processOpenDocument(e,t)},Ze.prototype.addToRecentFiles=function(e){function t(t,n){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];gContainer.getProperty(t).then((function(i){o&&i&&(i=JSON.parse($e.base64StringToString(i))),i||(i=[]);for(var a=0;a<i.length;++a){let t=!1;if(gContainer.getRuntime()===ee.Runtime.Electron)t=i[a]===n(e);else{let n=JSON.parse(i[a]),o=e.getFile();t=n.file.id===o.id}if(t){i.splice(a,1);break}}i.unshift(n(e)),i.splice(10,i.length),o&&(i=$e.stringToBase64String(JSON.stringify(i))),gContainer.setProperty(t,i),gDesigner.updateRecentDocumentsAction()}))}e&&(e instanceof Z.Item?gDesigner.updateRecentDocumentsAction():gContainer.getRuntime()===ee.Runtime.Electron?t("recent_documents",e=>e.getUniqueId()):e instanceof Re.Item&&gDesigner.getUser().then(e=>{t("recent_external_".concat(e.getUID()),e=>{const t=e instanceof f.default.Item?"googledrive":null;return JSON.stringify({type:t,file:e.getFile()})},!0)}))},Ze.prototype.activateDocument=function(e,t){if(e!=this._activeDocument){if(this._activeDocument){var n=this._activeDocument;this._activeDocument=null,n.deactivate(),this.hasEventListeners(U)&&this.trigger(new U(U.Type.Deactivated,n)),n.getActiveWindow()===this._windows.getActiveWindow()&&this._windows.activateWindow(null)}e&&(this._activeDocument=e,t||this._windows.activateWindow(e.getActiveWindow()),e.activate(),this.hasEventListeners(U)&&this.trigger(new U(U.Type.Activated,e)))}},Ze.prototype.replaceDocument=function(e,t,n){var o=this._documents.indexOf(e);o<0||(this.addDocument(t,o),this.removeDocument(e,null,n))},Ze.prototype.removeDocument=function(e,t,n){var o=this._documents.indexOf(e);if(!(o<0)){var i=e.getWindows();if(i.length){var a=function(){i.length>0?this._windows.removeWindow(i[0],a,n):this.removeDocument(e,t)}.bind(this);a()}else e===this.getActiveDocument()&&this.activateDocument(null),e.release(),this._documents.splice(o,1),t&&t(),this.hasEventListeners(U)&&this.trigger(new U(U.Type.Removed,e)),0===this._documents.length&&this.handleWelcomeScreenOpenWithUserPermissions()}},Ze.prototype.handleWelcomeScreenOpenWithUserPermissions=function(){let e={closable:this.getApplicationManager().isCreatingNewDocumentEnabled(),showCloudOptions:!0,closeCallback:e=>{e&&gDesigner.newInfiniteDocument()}};var t;this.getLicense().canAccessFreemium()?this.openNewDocumentDialog(e):(this._newDocumentDialog||(this._newDocumentDialog=new q),null===(t=this._newDocumentDialog)||void 0===t||t._newDocumentCustomSize())},Ze.prototype.canExecuteAction=function(e,t){var n=this.getAction(e);return!!n&&(n.isAvailable()&&n.isEnabled.apply(n,t))},Ze.prototype.canActivateTool=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t||!s.HAS_ANNOTATIONS||this.getRightSidebars().getActiveSidebar()!=L.ID)return!0;const n=["path","shape","knife","insert"],o=["special"];return!gravit.tools.some(t=>{let{tool:i,group:a,category:r}=t;return i===e&&(n.includes(a)||o.includes(r))})},Ze.prototype.executeAction=function(e,t,n,o){var i=this.getAction(e);if(!i)throw new Error("Unable to execute action '"+e+"' - not registered.");var a=this._windows.getActiveWindow();if(!a||!a.isPreview()){if(i.isAvailable()&&i.isEnabled.apply(i,t)){if(e===De.ID)this.getPart(R.Toolbar).find(".toolbar-button[data-action='"+e+"']").find("button").toggleClass("g-disabled",!0);var r=i.execute;if("shortcut"===n&&(r=i.executeFromShortcut),!o){var s=i.isPro()?gDesigner.isEnabledProFeatures(e)?"execute":"nonprotriespro":"execute";this.stats("action_"+s+"_"+(n||"button"),i.statsValue()||e)}var l=r.apply(i,t);if(void 0!==l)return l}return!0}},Ze.prototype.setOpenSansDefaultFont=function(){var e=this._workspace.getFontManager();e.setDefaultFont(e.getFont("Open Sans",a.GFont.Style.Normal,a.GFont.Weight.Regular)),e.setDefaultFontStyles([a.GFont.Style.Normal,a.GFont.Style.Italic]),e.setDefaultFontWeights([300,400,600,700,800])},Ze.prototype.isTouchDevice=function(){return s.TOUCH_LAYOUT&&("ontouchstart"in window||!!navigator.msMaxTouchPoints||!!navigator.maxTouchPoints)},Ze.prototype.isTouchEnabled=function(){return gContainer.getRuntime()===ee.Runtime.IPad||!!s.TOUCH_LAYOUT&&this.isEnabledProFeatures()&&!!this.getSetting("touch",!1)},Ze.prototype.setTouchEnabled=function(e){this.setSetting("touch",!!e)},Ze.prototype.init=function(){this._shareManager=new he,this._realtimeManager=new ye,this._fileReviewManager=new ve,this._annotationsManager=new _e,gContainer.registerFontProviders(),W.getInstance().init();var e=this._workspace.getFontManager();if(e.addEventListener(a.GFontManager.ResolveFontEvent,this._fontManagerResolveFontEvent,this),e.addEventListener(a.GFontManager.QueryFontFamilyEvent,this._fontManagerQueryFontFamilyEvent,this),this.setOpenSansDefaultFont(),a.GLocale.getLanguage()===a.GLocaleLanguage.Chinese||a.GLocale.getLanguage()===a.GLocaleLanguage.ChineseTaiwan)W.getProviderInstance(z).hasFont("Noto Sans CS")&&(e.setDefaultFont(e.getFont("Noto Sans CS",a.GFont.Style.Normal,a.GFont.Weight.Regular)),e.setDefaultFontStyles([a.GFont.Style.Normal]),e.setDefaultFontWeights([100,200,300,400,500,600,800]));else if(a.GLocale.getLanguage()===a.GLocaleLanguage.Japanese){W.getProviderInstance(z).hasFont("Noto Sans CJK JP")&&(e.setDefaultFont(e.getFont("Noto Sans CJK JP",a.GFont.Style.Normal,a.GFont.Weight.Regular)),e.setDefaultFontStyles([a.GFont.Style.Normal]),e.setDefaultFontWeights([400,700]))}this._CDRIntegrationEngine=Me.createCDRIntegrationEngine(),i.GEditorOptions.selectDoubleClickBehavior="subselect",i.GEditorOptions.coordinatesTooltip=!0,i.GEditorOptions.bboxPositionTooltip=!1,i.GEditorOptions.sizeTooltip=!1,i.GEditorOptions.angleTooltip=!1,i.GEditorOptions.showTooltips=!0,i.GEditorOptions.propertiesExcludedFromCopying=Ie.PropertiesToExcludeFromCopying,i.GEditorOptions.adaptiveResizeHandles=!0,i.GSkewHorizontalAnnotation.setIcon("assets/annotation/touch/skew-horizontal-handle.png"),i.GSkewVerticalAnnotation.setIcon("assets/annotation/touch/skew-vertical-handle.png"),i.GPreserveAspectRatioAnnotation.setIcon("assets/annotation/touch/preserve-aspect-ratio-handle.png"),i.GRotateAnnotation.setIcon("assets/annotation/touch/rotate-handle.png"),l.DESIGNER.HIGHLIGHT_COLOR&&(a.GPaintContext.prototype.highlightOutlineColor=l.DESIGNER.HIGHLIGHT_COLOR),gContainer.getProperty(M._keepRatioName).then(e=>{e=e||!1,i.GEditorOptions.preserveAspectRatio=e,i.GEditorOptions.allowTextRatioPreservation=e}),a.GSceneOptions.scaleLabel=!1,a.GSceneOptions.defaultBorderPositionForLines=!0,i.GEditorPaintConfiguration.prototype.pageDecoration.shadow=4,i.GEditorPaintConfiguration.prototype.pageDecoration.shadowOffsetY=2,i.GEditorPaintConfiguration.prototype.pageDecoration.shadowBackground="rgba(0,0,0,0.25)",gContainer.getProperty(H.StoragePropertyName).then(e=>{e&&this.updateGEditorSceneConfigurationPaintMode(a.GScenePaintConfiguration.PaintMode.Outline)}),i.GGridGuide.MIN_CELL_SPACE=5;var t=$("body");t.attr("data-long-press-delay",s.LONG_PRESS_TIME_OUT),t.on("long-press",e=>{const t=jQuery.Event("contextmenu",{pageX:e.detail.clientX,pageY:e.detail.clientY,clientX:e.detail.clientX,clientY:e.detail.clientY});$(e.target).trigger(t)}),this._mainframe=$("<div></div>").attr("id","mainframe").css("display","none").prependTo(t);var n=this._frame=$("<div></div>").appendTo(this._mainframe),o=$("<div></div>").attr("id",R.Windows.id).appendTo(n);this._windows=new F(o);var c=$("<div></div>").attr("id",R.Info.id).appendTo(n);this._info=new G(c);var d=$("<div></div>").attr("id",R.Header.id).appendTo(n);this._header=new A(d);var p=$("<div></div>").attr("id",R.Toolbar.id).appendTo(n);this._toolbar=new O(p);var g=$("<div></div>").attr("id",R.Banner.id).appendTo(n);this._banner=new _.default(g);var h=$("<div></div>").attr("id",R.Overlay.id).appendTo(n);this._overlay=new b.default(h);var f=$("<div></div>").attr("id",R.Panels.id).appendTo(n),m=$("<div></div>").attr("id",R.Footer.id).appendTo(n);this._footer=new T(m),this._panels=new I(f);var y=$("<div></div>").attr("id",R.LeftSidebars.id).on("mousedown",()=>{this._toggleSideBarAndAssistBarZIndex(!0,!1,!1,!1)}).appendTo(n);this._leftSidebars=new k(y,k.Orientation.Left,n);var v=$("<div></div>").attr("id",R.RightSidebars.id).on("mousedown",()=>{this._toggleSideBarAndAssistBarZIndex(!1,!0,!1,!1)}).appendTo(n);this._rightSidebars=new k(v,k.Orientation.Right,n),this._updateStyles(t),this._initBrowserSupported(r.GPlatform.webBrowser),this.isBrowserSupported()||te.showOneTimeDialog(a.GLocale.get(new a.GLocaleKey("GSystemDialog",a.GSystem.hardware===a.GSystem.Hardware.Tablet?"text.unsupported-browser-touch":"text.unsupported-browser")).replace("%app",Oe.DESIGNER.TITLE),"designer.settings.dont_show_unsupported_browser_dialog");let w=(0,u.debounce)(function(){this.relayout(),setTimeout(()=>{this._windows.getActiveWindow()&&this._windows.getActiveWindow().getView().invalidate(null,!0)})}.bind(this),500);$(window).resize(function(){w()}.bind(this));var C=-1;this._actions=gravit.actions.map((e,t)=>(e.getId()===j.ID&&(C=t),e));var x=gravit.sidebars.map(e=>new V(e));if(Array.prototype.splice.apply(this._actions,[C,0].concat(x)),this._createMainMenu(),gravit.tools){for(var S=e=>{let{tool:t,pro:n=!1,feature:o}=e;return()=>!(!this.isEnabledProFeatures(o)&&n)&&(!!this.canActivateTool(t,!0)&&(gDesigner.stats("tools_activate_shortcut",O.getToolName(t)||"unknown_tool"),this.getToolManager().tempToolKeyActivate(t)))},E=e=>{let{tool:t,pro:n=!1,feature:o}=e;return()=>!this.isEnabledProFeatures(o)&&n?(this.handlePROFeatureInterruption(),!1):this.getToolManager().tempToolKeyRelease(t,450)},N=0;N<gravit.tools.length;++N){var B=gravit.tools[N];if(B.key||B.shortcuts){var U=S(B),K=E(B);B.key&&this.registerShortcut([B.key],U,!1,K),Array.isArray(B.shortcuts)&&B.shortcuts.forEach(e=>{this.registerShortcut(e,U,!1,K)})}}this.getToolManager().activateTool(gravit.tools[0].tool);var q=function(){var e=this.getToolManager();return this.getRightSidebars().getActiveSidebar()==L.ID||(e.getActiveTool()&&e.getActiveTool()instanceof i.GSelectTool||e.activateTool(i.GPointerTool),e.getActiveTool()instanceof i.GSelectTool&&e.getActiveTool().getEditMode()!==i.GSelectTool.EditMode.Transform&&e.getActiveTool().setEditMode(i.GSelectTool.EditMode.Transform)),!0}.bind(this);this.registerShortcut(["Q"],q)}this._info.init(),this._header.init(),this._toolbar.init(),this._panels.init(),this._footer.init(),this._leftSidebars.init(),this._rightSidebars.init(),this._windows.init(),this._banner.init(),this._overlay.init(),this._leftSidebars.setActiveSidebar(P.ID),this._rightSidebars.setActiveSidebar(D.ID),this.setPartVisible(R.Panels,!1),this.setPartVisible(R.Info,!1),this._mainframe.css("display",""),a.GColor.setCMYKProfile("USWebCoatedSWOPv2","assets/data/icc/"),this._initialized=!0,this._windows.addEventListener(F.WindowEvent,this._windowEvent,this),this._leftSidebars.addEventListener(k.SidebarEvent,this._sidebarEvent,this),this._rightSidebars.addEventListener(k.SidebarEvent,this._sidebarEvent,this),this._contextMenu=new Q(o),this.updateLicenseInfo(),this._updateTitle({saveToSessionHistory:!1}),s.AUTO_SAVE_ENABLED&&(this._autoSaveManager=ne.getInstance()),this.getCursorManager().init(),this._updateLayout(),this._initAmplitudeProperties(),this._updateState()},Ze.prototype._updateStyles=function(e){switch(r.GPlatform.webBrowser){case r.GPlatform.constructor.WebBrowser.Edge:e.addClass("g-edge");break;case r.GPlatform.constructor.WebBrowser.Opera:e.addClass("g-opera");break;case r.GPlatform.constructor.WebBrowser.Chrome:e.addClass("g-chrome");break;case r.GPlatform.constructor.WebBrowser.Firefox:e.addClass("g-firefox");break;case r.GPlatform.constructor.WebBrowser.Safari:e.addClass("g-safari");break;case r.GPlatform.constructor.WebBrowser.MSIE:e.addClass("g-msie")}switch(a.GSystem.hardware){case a.GSystem.Hardware.Desktop:e.addClass("g-desktop");break;case a.GSystem.Hardware.Tablet:e.addClass("g-tablet");break;case a.GSystem.Hardware.Phone:e.addClass("g-phone")}switch(a.GSystem.operatingSystem){case a.GSystem.OperatingSystem.Unix:e.addClass("g-os-unix");break;case a.GSystem.OperatingSystem.Windows:e.addClass("g-os-windows");break;case a.GSystem.OperatingSystem.OSX_IOS:e.addClass("g-os-osx_ios")}gContainer.getRuntime()===ee.Runtime.IPad&&e.addClass("g-ipad")},Ze.prototype.getContextMenu=function(){return this._contextMenu},Ze.prototype.getAutoSaveManager=function(){if(this._autoSaveManager)return this._autoSaveManager},Ze.prototype.isActiveDocument=function(e){const t=this.getActiveDocument();return!!t&&(!!(e&&e instanceof C)&&(t===e||!(!t.getId()||t.getId()!==e.getId())))},Ze.prototype._setActiveAssistantBar=function(e){if(e){if(!this._assistantBar){const e=$("<div/>").attr("id",R.AssistantBar.id).on("mousedown",()=>{this._toggleSideBarAndAssistBarZIndex(!1,!1,!0,!1)}).appendTo(this._frame);this._assistantBar=new Ue(e)}this._assistantBar.activate()}else this._assistantBar&&this._assistantBar.deactivate()},Ze.prototype._toggleSideBarAndAssistBarZIndex=function(e,t,n,o){gDesigner.isTouchEnabled()&&(this._leftSidebars.getHtmlElement().toggleClass("bring-to-front",e),this._rightSidebars.getHtmlElement().toggleClass("bring-to-front",t),this._assistantBar.getHtmlElement().toggleClass("bring-to-front",n),void 0!==o&&$(".g-notification-panel").toggleClass("bring-to-front",o))},Ze.prototype.sendSideBarAndAssistBarToBack=function(){this._toggleSideBarAndAssistBarZIndex(!1,!1,!1)},Ze.prototype.start=function(){return Promise.all([gContainer.getProperty("designer.settings").then(e=>{for(var t in e=e||{},this._settings)e.hasOwnProperty(t)||(e[t]=this._settings[t]);for(var n in this._settings=e,this._settingsLoaded=!0,this._settings)this.trigger(new N(n,void 0,this._settings[n],!0))}).catch(e=>Promise.reject(e)),gContainer.getProperty("swatches").then(e=>{if(this._swatches.global=[],this._swatches["global-linear-gradient"]=[],this._swatches["global-radial-gradient"]=[],this._swatches["global-angular-gradient"]=[],this._swatches["global-texture-pattern"]=[],this._swatches["global-noise-pattern"]=[],e)for(var t=0;t<e.length;++t){var n=a.GNode.deserialize(e[t])||a.GPattern.deserialize(e[t]),o=n instanceof a.GSwatch?n:new a.GSwatch(n);this._addGlobalSwatch(o)}this.trigger(new B("global"))}).catch(e=>Promise.reject(e))])},Ze.prototype._addGlobalSwatch=function(e){var t=a.GPattern.serialize(e.getProperty("_pt"));t.startsWith("C#")||t.startsWith("Y#")?this._swatches.global.push(e):t.startsWith("L#")?this._swatches["global-linear-gradient"].push(e):t.startsWith("R#")?this._swatches["global-radial-gradient"].push(e):t.startsWith("A#")?this._swatches["global-angular-gradient"].push(e):t.startsWith("T#")?this._swatches["global-texture-pattern"].push(e):t.startsWith("N#")&&this._swatches["global-noise-pattern"].push(e)},Ze.prototype.updateRecentDocumentsAction=function(){let e=[];const t=gContainer.getProperty("recent_documents"),n=gDesigner.getUser();Promise.all([t,n]).then(e=>{let[t,n]=e;return n?Promise.all([t,n,gContainer.getProperty("recent_external_".concat(n.getUID()))]):Promise.reject()}).then(t=>{let[n,o,i]=t;var a,r;if(n)for(a=0,r=n.length;a<r;++a){let t=gContainer.getStorage(),o=new t.constructor.Item(t,n[a]);e.push(o)}if(i)for(i=JSON.parse($e.base64StringToString(i)),a=0,r=i.length;a<r;++a){let t,n=gContainer.getStorage(),o=JSON.parse(i[a]);"googledrive"===o.type&&(o.file.hasOwnProperty("version")&&delete o.file.version,t=new f.default.Item(n,o.file)),t&&e.push(t)}var s=function(){gContainer.updateRecentDocumentsAction(e)};J.getRecentStorageItems().then((async function(t){if(t.length>0)for(var n=0;n<t.length;++n)e.push(await Z.from(gDesigner.getDefaultStorage(),t[n]))})).then(s).catch(s)})},Ze.prototype.removeExternalRecentFiles=function(e,t){gDesigner.getUser().then(e=>e?Promise.all([e,gContainer.getProperty("recent_external_".concat(e.getUID()))]):Promise.reject()).then(n=>{let[o,i]=n,a=i?JSON.parse($e.base64StringToString(i)):[];a instanceof Array||(a=new Array);const r=[];for(let n=0,o=a.length;n<o;n++){let o=JSON.parse(a[n]);o&&((o.type!==e||o.file&&o.file.settings&&!o.file.settings.accountId||o.file&&o.file.settings&&o.file.settings.accountId!==t)&&r.push(JSON.stringify(o)))}a.length>0?gContainer.setProperty("recent_external_".concat(o.getUID()),$e.stringToBase64String(JSON.stringify(r))):gContainer.removeProperty("recent_external_".concat(o.getUID())),gDesigner.updateRecentDocumentsAction()})},Ze.prototype.relayout=function(){if(!this._initialized)return;var e,t,n=0,o=0;e=this._getTopOffset(n,o),n=this._getLeftOffset(e),o=this._getRightOffset(e),t=this._getBottomOffset(n,o);const i=this.isTouchEnabled();this._header.relayout(),this._toolbar.relayout(),this._panels.relayout(),this._footer.relayout(),this._leftSidebars.relayout(),this._rightSidebars.relayout(),this._windows.relayout([i?0:n,e,i?0:o,t])},Ze.prototype.updateCollabTextPreviews=async function(){var e,t=this.getActiveDocument();t&&((e=t.getEditor())&&e.closeInlineEditor(),await this._CDRIntegrationEngine.processCollabText(t))},Ze.prototype._getTopOffset=function(e,t){var n=0,o=this.getPart(R.Info);n+=this.isPartVisible(R.Info)?o.outerHeight():0;var i=this.getPart(R.Header);i.css("top",n.toString()+"px"),n+=this.isPartVisible(R.Header)?i.outerHeight():0;this.getPart(R.Overlay).css("top",n.toString()+"px");var a=this.getPart(R.Toolbar);a.css("left",e.toString()+"px"),a.css("top",n.toString()+"px"),a.css("right",t.toString()+"px"),n+=this.isPartVisible(R.Toolbar)?a.outerHeight():0;const r=this.getPart(R.Banner);return r.css("top",n.toString()+"px"),n+=this.isPartVisible(R.Banner)?r.outerHeight():0},Ze.prototype._getLeftOffset=function(e){var t=0,n=this._leftSidebars.getSidebar(this._leftSidebars.getActiveSidebar()),o=n?n.getMinimumWidth():0,i=this.getPart(R.LeftSidebars),a=this.isPartVisible(R.LeftSidebars);return i.outerWidth()<o&&a&&i.outerWidth(o),i.css("top",e.toString()+"px"),i.height(this._mainframe.height()-e),t+=a?i.outerWidth():0},Ze.prototype._getRightOffset=function(e){var t=0,n=this._rightSidebars.getSidebar(this._rightSidebars.getActiveSidebar()),o=n?n.getMinimumWidth():0,i=this.getPart(R.RightSidebars),a=this.isPartVisible(R.RightSidebars);return i.outerWidth()<o&&a&&i.outerWidth(o),i.css("top",e.toString()+"px"),i.height(this._mainframe.height()-e),t+=a?i.outerWidth():0},Ze.prototype._getBottomOffset=function(e,t){var n=0,o=this.getPart(R.Panels);o.css("left",e.toString()+"px"),o.css("width",(this._mainframe.width()-e-t).toString()+"px");var i=this.getPart(R.Footer);return i.css("left",e.toString()+"px"),i.css("width",(this._mainframe.width()-e-t).toString()+"px"),n+=this.isPartVisible(R.Panels)?o.outerHeight():0,n+=this.isPartVisible(R.Footer)?i.outerHeight():0},Ze.prototype.positionIsOnCanvas=function(e,t){var n,o,i=0,a=0;return n=this._getTopOffset(i,a),i=this._getLeftOffset(n),a=this._getRightOffset(n),o=this._getBottomOffset(i,a),e>i&&e<window.innerWidth-a&&t>n&&t<window.innerHeight-o},Ze.prototype.updateGEditorSceneConfigurationPaintMode=function(e){[a.GScenePaintConfiguration.PaintMode.Full,a.GScenePaintConfiguration.PaintMode.Outline,a.GScenePaintConfiguration.PaintMode.Fast].indexOf(e)<0||(i.GEditorPaintConfiguration.prototype.paintMode=e)},Ze.prototype.registerShortcut=function(e,t,n,o){var s=function(e,t){return n=>{var o,r,s=this.getActiveDocument();if(s&&(o=s.getEditor())&&o.isInlineEditing()){var l=o.getCurrentInlineEditorNode();i.GElementEditor&&l instanceof a.GText&&(r=i.GElementEditor.getEditor(l))}if(!(t&&r&&r.handleKeyDown(n)&&(t||r)||!0!==e(n)))return n.preventDefault(),n.stopPropagation(),!1}}.bind(this),l=n?qe.bindGlobal:qe.bind;2===e.length&&e[0]===r.GKey.Constant.META&&"+"===e[1]?(l(this._shortcutToMouseTrapShortcut(e),s(t,!0)),l("mod+=",s(t,!0),"keydown"),o&&l("mod+=",s(o,!1),"keyup")):(l(this._shortcutToMouseTrapShortcut(e),s(t,!0),"keydown"),o&&l(this._shortcutToMouseTrapShortcut(e),s(o,!1),"keyup"))},Ze.prototype._createMainMenu=function(){for(var e=[],t={items:[]},n=function(t){for(var n=0;n<e.length;++n)if(e[n].item===t)return e[n].group},o=function(t,o,i){if(t.items.length>0){var a=t.items[t.items.length-1];if(n(a)!==i){var r={type:"divider"};if("item"===a.type&&a.action){var s=function(t){for(var o=n(t),i=[],a=0;a<e.length;++a)e[a].group===o&&i.push(t);return i}(a);r.isVisible=function(){return s.some(e=>e.action.isVisible())}}t.items.push(r)}}e.push({item:o,group:i})},i=0;i<this._actions.length;++i){var r=this._actions[i];if(this._actionsMap[r.getId()]=r,!r.isAvailable())continue;let e=r.getCategory();for(var s=[e];e=e.parent;)s.push(e);s.reverse();var l=r.getGroup(),c=r.getGroupIcon(),d=(r.getStyleClass(),l?[""].concat(l.split("/")):null);if(d&&s&&s.length!==d.length-1)throw new Error("The number of categories is different than the number of groups.");var u=t;if(s)for(var p=0;p<s.length;++p){let e=s[p],t=d?d[p]:null;for(var g=null,h=e.label.split("/")[p],f=0;f<u.items.length;++f)h==u.items[f].caption&&(g=u.items[f]);g||(o(u,g={type:"menu",caption:h,items:[],icon:c,category:e},t),u.items.push(g)),u=g}var m={type:"item",action:r};o(u,m,d?d[d.length-1]:null),u.items.push(m)}var y=function(e,t){"menu"===e.type?e.menu=v(e,t):"divider"===e.type?e.separator=this.addMenuSeparator(t,e.isVisible):"item"===e.type&&(e.item=this.addMenuItem(t,a.GLocale.get(e.action.getTitle()),e.action.getIcon(),e.action.isCheckable(),e.action.getShortcut(),function(t,n){if("shortcut"===t)return this._executeShortcutAction(e.action,n)}.bind(this),e.action.isShortcutGlobal(),e.action.isPro(),e.action,e.action._sidebar?e.action.getStyleClass()+" hidepanel":e.action.getStyleClass(),e.action.noHover()),this.registerAdditionalShortcuts(e.action))}.bind(this),v=function(e,t){const n=e.category?t=>{t.setVisible(e.category.visible),t.setIcon(e.category.icon)}:null;for(var o=this.addMenu(t,e.caption,function(){for(var t=0;t<e.items.length;++t){var n=e.items[t];"item"===n.type&&this.updateMenuItem(n.item,a.GLocale.get(n.action.getTitle()),n.action.isEnabled(),!!n.action.isCheckable()&&n.action.isChecked(),n.action.isPro(),n.action.getId())}}.bind(this),e.icon,n),i=0;i<e.items.length;++i)y(e.items[i],o);return o}.bind(this);for(i=0;i<t.items.length;++i)g=t.items[i],v(t.items[i],null);this._mainMenu.update()},Ze.prototype._workspaceResolveUrlEvent=function(e){J.resolveImage(e,this.getActiveDocument())},Ze.prototype._shareEvent=function(e){e.type===ge.Type.Updated&&this._updateSidebars()},Ze.prototype._applicationStateChangedEvent=function(e){this._updateSidebars();const t=this.getActiveDocument();if(t&&t.getStatus()===Le.Ready){this.getApplicationManager().isCommentingEnabled()&&this.openUserNameConfigDialog()}},Ze.prototype._updateSidebars=function(){const e=this.getApplicationManager(),t=e.isInspectEnabled(),n=e.isCommentingEnabled(),o=e.isEditingEnabled();if(k.isOrientationActiveInSetting(k.Orientation.Right)){const e=this._rightSidebars.getSidebar(this._rightSidebars.getActiveSidebar());e&&e.isVisible()||(o||t?this._rightSidebars.setActiveSidebar(D.ID):n?this._rightSidebars.setActiveSidebar(L.ID):this._rightSidebars.setActiveSidebar(null)),this.setPartVisible(R.RightSidebars,n||o||t),this._rightSidebars.relayout()}if(k.isOrientationActiveInSetting(k.Orientation.Left)){const e=this._leftSidebars.getSidebar(this._leftSidebars.getActiveSidebar());e&&e.isVisible()||(t?this._leftSidebars.setActiveSidebar(P.ID):this._leftSidebars.setActiveSidebar(null)),this.setPartVisible(R.LeftSidebars,t),this._leftSidebars.relayout()}},Ze.prototype._fontManagerResolveFontEvent=function(e){const t=Object.assign({},e);try{W.resolveFont(t)}catch(t){throw e.failed(),t}},Ze.prototype._fontManagerQueryFontFamilyEvent=function(e){try{W.resolveQueryFontFamily(e)}catch(t){throw e.failed(),t}},Ze.prototype._documentEvent=function(e){switch(e.type){case U.Type.OwnerUpdated:if(e.document){const t=e.document.getOwner();if(t){const n=e.document.isCloudFile()?e.document.getStorageItem().getFile():null,o=n?n.url_t||n.url:null,i=a.GLocale.get(new a.GLocaleKey("GDesigner","text.preview-by")).replace("%name",t.name).replace("%appname",Oe.DESIGNER.TITLE);$('meta[name="description"]').attr("content",i),$('meta[property="og:title"]').attr("content",a.GLocale.get(new a.GLocaleKey("GDesigner","text.design-by")).replace("%name",t.name).replace("%appname",Oe.DESIGNER.TITLE)),$('meta[property="og:description"]').attr("content",i),o&&$('meta[property="og:image"]').attr("content",o),$('meta[property="og:url"]').attr("content",location.href),$('meta[name="twitter:card"]').attr("content","summary_large_image"),$('meta[property="og:site_name"]').attr("content",Oe.DESIGNER.TITLE)}}this._updateTitle({saveToSessionHistory:!1});break;case U.Type.StorageItemUpdated:this._updateTitle(),this._registerUsage(e.document);break;case U.Type.Added:this._newDocumentDialog&&this._newDocumentDialog.close()}},Ze.prototype._registerUsage=function(e){const t=e.getStorageItem();t&&t.isRegistrable()&&Fe.usage(t.getId()).catch(e=>{console.error("gApi.usage error",e)})},Ze.prototype._windowEvent=function(e){let t;switch(e.type){case F.WindowEvent.Type.Added:case F.WindowEvent.Type.Removed:this._updateTitle();break;case F.WindowEvent.Type.Activated:1===this._windows.getWindows().length&&this._updateTheme(),this.getToolManager().setView(e.window.getView()),this._leftSidebars.setView(e.window.getView()),this._rightSidebars.setView(e.window.getView()),this._updateTitle(),t=e.window.getView().getHtmlElement(),this._editorTouchHandler.activate(t);break;case F.WindowEvent.Type.Deactivated:t=e.window.getView().getHtmlElement(),this._editorTouchHandler.deactivate(t),this.getToolManager().setView(null),this._leftSidebars.setView(null),this._rightSidebars.setView(null),this._updateTitle()}},Ze.prototype._sidebarEvent=function(e){e.type===k.SidebarEvent.Type.Activated&&this.relayout()},Ze.prototype._settingChangedEvent=function(e){switch(e.key){case"touch":e.restoring&&e.newValue&&!this.isTouchEnabled()?this.setTouchEnabled(!1):this._updateLayout(),this._updateEditorOptions(),this._updateGTM();break;case"theme":this._setTheme(e.newValue);break;case"snap_disabled":i.GGuides.options.disabled=e.newValue;break;case"snap_zones":i.GGuides.options.zones=e.newValue;break;case"snap_guides":i.GGuides.options.guides=e.newValue;break;case"highlight_on_hover":i.GEditorOptions.highlightOnHover=e.newValue;break;case"dont_store_textpath":a.GText.dontStorePaths=e.newValue;break;case"decimals_num":a.GScene.decimalsNum=e.newValue;break;case"enable_steps_debug":i.GEditorOptions.debugTransactions=e.newValue;break;case"enable_cache":"function"==typeof gdb_loaddesign&&(a.GRendererConfig.ENABLE_CACHE=e.newValue,gDesigner.getActiveDocument()&&gDesigner.getActiveDocument().getActiveWindow()&&(gDesigner.getActiveDocument().getActiveWindow().getView().cleanCache(),gDesigner.getActiveDocument().getActiveWindow().getView().configureCache()));break;case"ui_toolbar_alignment":e.newValue?this._frame.removeClass("ui-toolbar-center"):this._frame.addClass("ui-toolbar-center")}},Ze.prototype._updateGTM=async function(){const e=!!this.isTouchEnabled();Ke.updateProperty("touch",e),Ke.fireEvent(Ke.Events.SETTING_CHANGED_EVENT)},Ze.prototype._updateEditorOptions=function(){this.isTouchEnabled()?this._applyTouchEditorOptions():this._applyDefaultEditorOptions();const e=this.getActiveDocument(),t=e&&e.getActiveWindow(),n=t&&t.getView();n&&r.GPlatform.scheduleFrame(()=>n.invalidate(null,!0))},Ze.prototype._applyTouchEditorOptions=function(){const e=a.GPaintCanvas.getScreenDPI();i.GEditorOptions.distanceHelperBehaviour=i.GSelectTool._DistanceHelperBehaviour.Click,i.GEditorOptions.resizeHandlesInDetailMode=!1,i.GEditorOptions.rotateHandleInDetailMode=!1,i.GEditorOptions.annotationHandles.suppressRedundantCorners=!0,i.GEditorOptions.annotationHandles.gradient.size=16*e,i.GEditorOptions.annotationHandles.gradient.sizeBig=20*e,i.GEditorOptions.annotationHandles.preserveAspectRatio.side=a.GRect.Side.BOTTOM_RIGHT,i.GEditorOptions.annotationHandles.tranformBox.skew.enabled=!0,i.GEditorOptions.annotationHandles.tranformBox.rotate.enabled=!0,i.GEditorOptions.annotationHandles.preserveAspectRatio.enabled=!0,a.GPaintContext.prototype.transformBoxOutlineColor=a.GPaintContext.prototype.selectionOutlineColor,i.GTransformBox.OUTSIDE_TOLERANCE=0,i.GEditorOptions.annotPickDistance=4,i.GEditorOptions.pickDistance=20,i.GEditorOptions.annotationHandles.tranformBox.size=23*e,i.GEditorOptions.annotationHandles.tranformBox.outlineWidth=3*e,i.GEditorOptions.annotationHandles.tranformBox.pivotSize=23*e,i.GEditorOptions.annotationHandles.tranformBox.pivotOutlineWidth=3*e,i.GEditorOptions.annotationHandles.tranformBox.outsideStroke=!0,i.GEditorOptions.annotationHandles.tranformBox.shadowColor="transparent",i.GEditorOptions.rotateHandle="bottom",i.GEditorOptions.annotationHandles.rotate.size=23*e,i.GEditorOptions.annotationHandles.rotate.iconSize=23*e,i.GEditorOptions.annotationHandles.rotate.outlineWidth=e,i.GEditorOptions.annotationHandles.rotate.shadowColor="transparent",i.GEditorOptions.annotationHandles.rotate.distance=46*e,i.GEditorOptions.annotationHandles.resize.size=23*e,i.GEditorOptions.annotationHandles.resize.outlineWidth=3*e,i.GEditorOptions.annotationHandles.resize.outsideStroke=!0,i.GEditorOptions.annotationHandles.resize.shadowColor="transparent",i.GEditorOptions.annotationHandles.rectangle.size=22*e,i.GEditorOptions.annotationHandles.rectangle.outlineWidth=4*e,i.GEditorOptions.annotationHandles.rectangle.outsideStroke=!0,i.GEditorOptions.annotationHandles.rectangle.shadowColor="transparent",i.GEditorOptions.annotationHandles.rectangle.maxNumberOfDetailedSegments=1,i.GEditorOptions.annotationHandles.polygon.size=22*e,i.GEditorOptions.annotationHandles.polygon.outlineWidth=4*e,i.GEditorOptions.annotationHandles.polygon.outsideStroke=!0,i.GEditorOptions.annotationHandles.polygon.shadowColor="transparent",i.GEditorOptions.annotationHandles.polygon.maxNumberOfDetailedSegments=2,i.GEditorOptions.annotationHandles.ellipse.size=22*e,i.GEditorOptions.annotationHandles.ellipse.outlineWidth=4*e,i.GEditorOptions.annotationHandles.ellipse.outsideStroke=!0,i.GEditorOptions.annotationHandles.ellipse.shadowColor="transparent",i.GEditorOptions.annotationHandles.ellipse.maxNumberOfDetailedSegments=2,i.GEditorOptions.annotationHandles.path.node.size=20*e,i.GEditorOptions.annotationHandles.path.node.outlineWidth=2*e,i.GEditorOptions.annotationHandles.path.control.size=10*e,i.GSkewHorizontalAnnotation.setIconVisible(!0),i.GSkewVerticalAnnotation.setIconVisible(!0),i.GPreserveAspectRatioAnnotation.setIconVisible(!0),i.GRotateAnnotation.setIconVisible(!0)},Ze.prototype._applyDefaultEditorOptions=function(){const e=a.GPaintCanvas.getScreenDPI();i.GEditorOptions.distanceHelperBehaviour=i.GSelectTool._DistanceHelperBehaviour.Default,i.GEditorOptions.resizeHandlesInDetailMode=!0,i.GEditorOptions.rotateHandleInDetailMode=!0,i.GEditorOptions.annotationHandles.suppressRedundantCorners=!1,i.GEditorOptions.annotationHandles.gradient.size=9*e,i.GEditorOptions.annotationHandles.gradient.sizeBig=12*e,i.GSkewHorizontalAnnotation.setIconVisible(!1),i.GSkewVerticalAnnotation.setIconVisible(!1),i.GPreserveAspectRatioAnnotation.setIconVisible(!1),i.GRotateAnnotation.setIconVisible(!1),a.GPaintContext.prototype.transformBoxOutlineColor=new a.GRGBColor([23,104,196]),i.GTransformBox.OUTSIDE_TOLERANCE=100,i.GEditorOptions.annotPickDistance=0,i.GEditorOptions.pickDistance=4,i.GEditorOptions.annotationHandles.tranformBox.size=10*e,i.GEditorOptions.annotationHandles.tranformBox.outlineWidth=null,i.GEditorOptions.annotationHandles.tranformBox.pivotSize=null,i.GEditorOptions.annotationHandles.tranformBox.pivotOutlineWidth=null,i.GEditorOptions.annotationHandles.tranformBox.outsideStroke=!1,i.GEditorOptions.annotationHandles.tranformBox.shadowColor=null,i.GEditorOptions.annotationHandles.tranformBox.skew.enabled=!1,i.GEditorOptions.annotationHandles.tranformBox.rotate.enabled=!1,i.GEditorOptions.annotationHandles.preserveAspectRatio.enabled=!1,i.GEditorOptions.rotateHandle="top",i.GEditorOptions.annotationHandles.rotate.size=10*e,i.GEditorOptions.annotationHandles.rotate.outlineWidth=null,i.GEditorOptions.annotationHandles.rotate.shadowColor=null,i.GEditorOptions.annotationHandles.rotate.distance=16*e,i.GEditorOptions.annotationHandles.resize.size=10*e,i.GEditorOptions.annotationHandles.resize.outlineWidth=null,i.GEditorOptions.annotationHandles.resize.outsideStroke=!1,i.GEditorOptions.annotationHandles.resize.shadowColor=null,i.GEditorOptions.annotationHandles.rectangle.size=8*e,i.GEditorOptions.annotationHandles.rectangle.outlineWidth=null,i.GEditorOptions.annotationHandles.rectangle.outsideStroke=!1,i.GEditorOptions.annotationHandles.rectangle.shadowColor=null,i.GEditorOptions.annotationHandles.polygon.size=8*e,i.GEditorOptions.annotationHandles.polygon.outlineWidth=null,i.GEditorOptions.annotationHandles.polygon.outsideStroke=!1,i.GEditorOptions.annotationHandles.polygon.shadowColor=null,i.GEditorOptions.annotationHandles.ellipse.size=8*e,i.GEditorOptions.annotationHandles.ellipse.outlineWidth=null,i.GEditorOptions.annotationHandles.ellipse.outsideStroke=!1,i.GEditorOptions.annotationHandles.ellipse.shadowColor=null,i.GEditorOptions.annotationHandles.path.node.size=10*e,i.GEditorOptions.annotationHandles.path.node.outlineWidth=null,i.GEditorOptions.annotationHandles.path.control.size=6*e},Ze.prototype._updateLayout=function(){$("body").toggleClass("g-touch",this.isTouchEnabled()),this.isTouchEnabled()||(this._leftSidebars&&this._leftSidebars.getHtmlElement().toggleClass("bring-to-front",!1),this._rightSidebars&&this._rightSidebars.getHtmlElement().toggleClass("bring-to-front",!1),this._assistantBar&&this._assistantBar.getHtmlElement().toggleClass("bring-to-front",!1)),this._initialized&&(this._leftSidebars.getActiveSidebar()||this._leftSidebars.setActiveSidebar(P.ID),this._rightSidebars.getActiveSidebar()||this._rightSidebars.setActiveSidebar(D.ID),this._leftSidebars.setActiveTouchTool(null),this._rightSidebars.setActiveTouchTool(null),this._setActiveAssistantBar(this.isTouchEnabled())),this.relayout()},Ze.prototype._setTheme=function(e){e&&"default"!==e||(e="light");var t=$('head > link[href$=".css"]'),n=t.attr("href").split(".");n[2]=e,t.attr("href",n.join(".")),$(t).load(n.join("."),function(){var t=this._windows.getWindows();l.DESIGNER.GUIDELINE_COLOR?i.GEditorOptions.guideLineColor=l.DESIGNER.GUIDELINE_COLOR:i.GEditorOptions.guideLineColor="light"===e?new a.GRGBColor([107,156,228]):new a.GRGBColor([227,0,97]),l.DESIGNER.GUIDELINEHINT_COLOR?i.GEditorOptions.guideLineHintColor=l.DESIGNER.GUIDELINEHINT_COLOR:i.GEditorOptions.guideLineHintColor="light"===e?"blue":"#F790B6",l.DESIGNER.DISTANCEHELPER_COLOR&&(i.GEditorOptions.distanceHelperColor=l.DESIGNER.DISTANCEHELPER_COLOR),l.DESIGNER.HIGHLIGHTOUTLINE_COLOR&&(a.GPaintContext.prototype.highlightOutlineColor=new a.GRGBColor([197,17,98]));for(var n=0;n<t.length;++n){var o=t[n].getView();o&&(o.setRulers(!o.hasRulers()),o.setRulers(!o.hasRulers()))}this._updateTheme()}.bind(this))},Ze.prototype._updateTheme=function(){var e=this._windows.getActiveWindow();e&&e.getView()&&r.GPlatform.scheduleFrame(function(){var t=a.GRGBColor.BLACK,n=getComputedStyle(this._windows.getHtmlElement()[0]).getPropertyValue("background-color"),o=a.GRGBColor.fromCSSColor(n);if(o){var i=o.toScreen();t=(299*i[0]+587*i[1]+114*i[2])/1e3>=128?a.GRGBColor.BLACK:a.GRGBColor.WHITE}a.GPaintContext.prototype.labelColor=t,e&&e.getView()&&e.getView().invalidate()}.bind(this)),this.relayout()},Ze.prototype._updateTitle=async function(){let{saveToSessionHistory:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t="";let n=Oe.DESIGNER.TITLE;var o=gContainer.getRuntime()===ee.Runtime.Browser||gContainer.getRuntime()===ee.Runtime.PWA;o&&e&&window.history.pushState(null,"Title","/");var i=this.getWindows().getActiveWindow();if(i){t=i.getTitle()+" - ";let e=i.getDocument();if(e&&e.getOwner()&&!e.isDocumentFromTemplate()&&(n="",t=a.GLocale.get(new a.GLocaleKey("GDesigner","text.design-by")).replace("%name",e.getOwner().name).replace("%appname",Oe.DESIGNER.TITLE)),o){let t=e.getStorageItem();e&&t&&(t instanceof Z.Item||t.supportsShadowFile()&&await t.getCollaborativeFile())&&(e.getStorageItem().getToken()?e.getFocusAnnotationId()?window.history.pushState(null,"Title","/?token="+t.getToken()+"&annot="+e.getFocusAnnotationId()):window.history.pushState(null,"Title","/?token="+t.getToken()):t.getId()&&(e.getFocusAnnotationId()?window.history.pushState(null,"Title","/?d="+t.getId()+"&annot="+e.getFocusAnnotationId()):window.history.pushState(null,"Title","/?d="+t.getId())))}}t+=n,document.title=(0,u.decodeHTML)(t)},Ze.prototype.addNotification=function(e,t){this.hasEventListeners(ue)&&this.trigger(new ue(e,t))},Ze.prototype._shortcutToMouseTrapShortcut=function(e){for(var t="",n=0;n<e.length;++n){n>0&&(t+="+");var o=e[n];if("number"==typeof o)switch(o=r.GKey.transformKey(o)){case r.GKey.Constant.SPACE:t+="space";break;case r.GKey.Constant.ENTER:t+="enter";break;case r.GKey.Constant.TAB:t+="tab";break;case r.GKey.Constant.BACKSPACE:t+="backspace";break;case r.GKey.Constant.CONTROL:t+="ctrl";break;case r.GKey.Constant.SHIFT:t+="shift";break;case r.GKey.Constant.ALT_LEFT:case r.GKey.Constant.ALT_RIGHT:t+="alt";break;case r.GKey.Constant.LEFT:t+="left";break;case r.GKey.Constant.UP:t+="up";break;case r.GKey.Constant.RIGHT:t+="right";break;case r.GKey.Constant.DOWN:t+="down";break;case r.GKey.Constant.PAGE_UP:t+="pageup";break;case r.GKey.Constant.PAGE_DOWN:t+="pagedown";break;case r.GKey.Constant.HOME:t+="home";break;case r.GKey.Constant.END:t+="end";break;case r.GKey.Constant.INSERT:t+="ins";break;case r.GKey.Constant.DELETE:t+="del";break;case r.GKey.Constant.COMMAND:t+="meta";break;case r.GKey.Constant.F1:t+="f1";break;case r.GKey.Constant.F2:t+="f2";break;case r.GKey.Constant.F3:t+="f3";break;case r.GKey.Constant.F4:t+="f4";break;case r.GKey.Constant.F5:t+="f5";break;case r.GKey.Constant.F6:t+="f6";break;case r.GKey.Constant.F7:t+="f7";break;case r.GKey.Constant.F8:t+="f8";break;case r.GKey.Constant.F9:t+="f9";break;case r.GKey.Constant.F10:t+="f10";break;case r.GKey.Constant.F11:t+="f11";break;case r.GKey.Constant.F12:t+="f12";break;default:throw new Error("Unknown key code")}else t+=o.toLowerCase()}return t},Ze.prototype.isGravitIME=function(e){return e&&e.className===r.GSceneWidget.GRAVIT_IME},Ze.prototype.hasModifiedDocuments=function(){for(var e=!1,t=this.getDocuments(),n=0;n<t.length;++n)if(t[n].isModified()){e=!0;break}return e},Ze.prototype.getCanvasWidth=function(){return this.getWindows().getActiveWindow().getView().getWidth()-("none"!==$("#right-sidebars").css("display")?$("#right-sidebars").width():0)-("none"!==$("#left-sidebars").css("display")?$("#left-sidebars").width():0)},Ze.prototype.getCanvasHeight=function(){return this.getWindows().getActiveWindow().getView().getHeight()-this.getHeader().getHeight()-this.getToolbar().getHeight()},Ze.prototype.getCanvasCenter=function(){var e=a.GPaintCanvas.getScreenDPI(),t=this.getCanvasWidth()/2,n=this.getCanvasHeight()/2;return t+="none"!==$("#left-sidebars").css("display")?$("#left-sidebars").width():0,n+=this.getHeader().getHeight()+this.getToolbar().getHeight(),new a.GPoint(t*e,n*e)},Ze.prototype.getStylePreview=function(e,t){return this._stylesPreview[e.getReferenceId()]?t?this._stylesPreview[e.getReferenceId()].textBitmap:this._stylesPreview[e.getReferenceId()].bitmap:this.createNewStylePreview(e,!0,t)},Ze.prototype.createStyleElement=function(e,t){var n=new a.GRectangle(0,0,50,50);if(t&&$.inArray(a.GStylable.PropertySet.Text,e.getProperty("ps"))>=0){var o=new a.GText;o.setText("Ab"),o.assignStyleFrom(e),o.setProperty("_tfi","20"),o.setBounds(7,10,50,50),n.appendChild(o)}else n.assignStyleFrom(e),$.inArray(a.GStylable.PropertySet.FillPaintLayers,e.getProperty("ps"))<0&&$.inArray(a.GStylable.PropertySet.BorderPaintLayers,e.getProperty("ps"))<0&&n.getPaintLayers().appendChild(new a.GStylable.FillPaintLayer(new a.GRGBColor([235,235,235]),1));return n},Ze.prototype.createNewStylePreview=function(e,t,n){var o=this.createStyleElement(e,!1),i=this.createStyleElement(e,!0);if(!gDesigner.getActiveDocument())return null;var r=gDesigner.getActiveDocument().getEditor().getSelection()||[];r.length>0&&r[0].appendChild(i);var s=o.toBitmap().toImageDataUrl(a.GBitmap.ImageType.PNG),l=i.toBitmap().toImageDataUrl(a.GBitmap.ImageType.PNG);return r.length>0&&r[0].removeChild(i),t&&(this._stylesPreview[e.getReferenceId()]={preview:o,bitmap:s,textBitmap:l}),n?l:s},Ze.prototype.setVersion=function(e){this._version=e},Ze.prototype.getVersion=function(){return this._version},Ze.prototype.setVersionFriendlyName=function(e){this._versionFriendlyName=e},Ze.prototype.getVersionFriendlyName=function(){return this._versionFriendlyName},Ze.prototype.setCommitSHA=function(e){this._commitSHA=e},Ze.prototype.getCommitSHA=function(){return this._commitSHA},Ze.prototype.setBuildNum=function(e){this._buildNum=e},Ze.prototype.getBuildNum=function(){return this._buildNum},Ze.prototype.setIsBeta=function(e){this._isBeta=e},Ze.prototype.isBeta=function(){return this._isBeta},Ze.prototype.setStoreVendor=function(e){this._storeVendor=e},Ze.prototype.getStoreVendor=function(){return this._storeVendor},Ze.prototype._userLoggedEvent=function(e){let t=e.user,n=this.getHeader();if(n&&n.updateLoginInfo(t),t&&t.getUID())this.executeWhenReady(()=>{this.updateRecentDocumentsAction()}),i.GEditorOptions.userConfig={userName:t.getFullUserName(),uid:t.getUID()};else{const e=a.GLocale.get(new a.GLocaleKey("GCommonNames","text.anonymous-user")),n=t&&t.getFullUserName()||e;i.GEditorOptions.userConfig={userName:n,uid:-1}}},Ze.prototype._userPropertiesChangedEvent=function(e){const{user:t}=e;t&&t.getUID()&&(i.GEditorOptions.userConfig={userName:t.getFullUserName(),uid:t.getUID()})},Ze.prototype._beforeInstallUpdate=function(e){this._reloading=!0},Ze.prototype._updateDataLayerWithLicenseData=function(){if(this._user&&"undefined"!=typeof dataLayer){dataLayer.push({userType:this.getSubscriberUserType()});const r=this.getLicense();var e=r.getExpirationDate()||new Date(0),t=Math.floor(e.getTime()/1e3),n=r.getCreationDate()||new Date(0),o=Math.floor(n.getTime()/1e3),i=s.DateAPI.diff(n,e),a=s.DateAPI.millisecondsToDays(i);s.DateAPI.eq(n,new Date(0))&&(o="0000000000"),s.DateAPI.eq(e,new Date(0))&&(a=0,t="0000000000"),dataLayer.push({expirationDate:t}),dataLayer.push({licenseDuration:a}),dataLayer.push({creationDate:o})}},Ze.prototype._licenseChangedEvent=async function(e){e.license.isDefault()||(this._enabledSubscriptions=!0,gContainer.setProperty("enabled_subscriptions",!0)),"undefined"!=typeof dataLayer&&(this._utm&&this._utm.forEach((e,t)=>dataLayer.push({[t]:e})),this._updateDataLayerWithLicenseData(),dataLayer.push({event:"LICENSE_CHANGED_EVENT"})),e.license.isOffline()&&!this.isEnabledProFeatures("offline")&&this.reload({icon:"clock",title:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.license-offline-title")),subtitle:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.license-offline-subtitle")),footer:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.license-offline-footer")).replace("%close",$("<span/>").addClass("link").text(a.GLocale.get(new a.GLocaleKey("GCommonNames","text.license-offline-footer-highlight"))).prop("outerHTML")).replace("%time",5),buttons:[{label:a.GLocale.get(new a.GLocaleKey("GLocale","ok")),onclick:e=>e.gDialog("close")}],attachTimer:e=>{const t=()=>{this._reloading=!1,this.clearCountdown(e),$(window).off("online",t)};navigator.onLine&&t(),$(window).on("online",t)}}),$("body").toggleClass("pro-expired",this.isEnabledSubscriptions()&&!this.isEnabledProFeatures()).toggleClass("pro-license",this.isEnabledSubscriptions()&&this.isEnabledProFeatures()).toggleClass("pro-legacy",e.license.isLegacy()).toggleClass("pro-subscription",e.license.isPro()&&!e.license.isExpired()).toggleClass("trial-expired",e.license.isTrial()&&e.license.isExpired()),this._toggleAdditionalSubscriptionClasses(e.license),this.isEnabledProFeatures()||this.setTouchEnabled(!1),this._updateState()},Ze.prototype._toggleAdditionalSubscriptionClasses=function(){},Ze.prototype.signout=function(e,t){if(this.isEnabledSubscriptions()&&!e){if(this.getDocuments().some(e=>e.isModified()))return te.alert(a.GLocale.get(new a.GLocaleKey("GCommonNames","text.save-before-logging-out"))),Promise.reject(void 0)}return xe.clear(),new Promise(async(e,n)=>{await(0,u._tryAndCatch)(()=>Fe.signout()),this._user=null,this.hasEventListeners(ce)&&this.trigger(new ce(null)),this.isEnabledSubscriptions()&&(t||(this._reloading=!0,location.reload())),e()})},Ze.prototype.isReloading=function(){return this._reloading},Ze.prototype.reload=function(e){let{title:t,subtitle:n,icon:o,footer:i,buttons:a,attachTimer:r}=e;this._initialized&&(this._reloading||(this._reloading=!0,te.custom({icon:o,title:t,subtitle:n,footer:i,buttons:a,closeCallback:()=>{const e=this.createCountdown(()=>this.signout(!0),3e5);r&&r(e)}}).css({zIndex:9999})))},Ze.prototype.clearCountdown=function(e){let{timeoutID:t,intervalID:n=0}=e;n&&clearInterval(n),t&&clearInterval(t),$(".g-timer[data-interval=".concat(n,"]")).remove()},Ze.prototype.createCountdown=function(e,t){let n=null;const o=s.DateAPI.addTime(new Date,t),i=setInterval(()=>{const e=o-Date.now();if(e<0)return clearInterval(i),void(n&&n.remove());const t=Math.floor(e%36e5/6e4),r=Math.floor(e%6e4/1e3);n||(n=$("<time></time>").attr("data-interval",i).addClass("g-timer").appendTo($("body"))),n.text(a.GLocale.get(new a.GLocaleKey("GCommonNames","text.countdown-timer")).replace("%minutes",t).replace("%seconds",r))},1e3);let r=null;return e&&(r=setTimeout(e,t)),{intervalID:i,timeoutID:r}},Ze.prototype.openDeactivatedUserDialog=async function(e){const t=$("<div>".concat(a.GLocale.get(new a.GLocaleKey("GDocument","text.account-deactivated")).replace("%app",Oe.DESIGNER.TITLE).replace("%name",e.getFullUserName()||e.getEmail()),"</div>"));t.find("a").on("click",t=>{t.preventDefault();let n=$(t.target).closest(".g-dialog-content");return J.resendEmailConfirmation(e).then(()=>n.gDialog("close")),!1}),te.custom({className:"g-deactivated-user-dialog",subtitle:t,icon:"email"})},Ze.prototype.getSyncUser=function(){return this._user},Ze.prototype.getUser=function(){return new Promise(async(e,t)=>{let n=await this.getCloudCommunicationManager().getUser();this._anonymous=!!n&&n.isAnonymous();let o=await this.isOfflineAsync();if(!n&&o){const e=xe.getUser();e&&(n=new je(e))}if(!n||"lts"!==gDesigner.getEnv()||this.isEnabledProFeatures()){if(n&&n.reload)return this.reload({title:"We are currently doing some important maintenance work. Please save your design in the next five minutes to avoid loss of progress!"}),void e(null);if(n)if(!n||this._user&&je.equals(this._user,n)){if(this._user&&n&&!n.isDeactivated()){const e={stats:void 0};a.GUtil.equals(Object.assign({},this._user,e),Object.assign({},n,e),!0)||this.hasEventListeners(de)&&this.trigger(new de(n))}}else"undefined"==typeof dataLayer||n.isAnonymous()||n.isDeactivated()||(dataLayer.push({userId:n.getUID()}),dataLayer.push({userEmail:n.getEmail()}),dataLayer.push({userName:n.name||""}),dataLayer.push({userLogin:n.login}),this._utm&&this._utm.forEach((e,t)=>dataLayer.push({[t]:e})),this._updateDataLayerWithLicenseData(),dataLayer.push({event:"USER_LOGGED_EVENT"})),this.hasEventListeners(ce)&&this.trigger(new ce(n));var i;this._user&&n&&this._user.getUID()===n.getUID()&&(i=this._user.stats),this._user=n,this._user&&!o&&xe.updateUser(this._user),i&&(this._user.stats=i),e(this._user)}else e(null)})},Ze.prototype.stats=function(e,t,n,o){return y.default.pageStats(e,t,this._user,n,o)},Ze.prototype.pageTracking=function(e,t){return y.default.pageTracking(e,t)},Ze.prototype.gtmEvent=function(e,t){"undefined"!=typeof dataLayer&&(t&&t.forEach(e=>{"object"==typeof e&&dataLayer.push(e)}),dataLayer.push({event:e}))},Ze.prototype.intercomStats=function(e){"function"==typeof Intercom&&Intercom("trackEvent",e)},Ze.prototype.saveStats=function(){if(this._user&&this._user.stats){var e=$e.toMD5(JSON.stringify(this._user.stats||""));Xe!==e&&(Fe.updateUser({stats:this._user.stats}),Xe=e)}},Ze.prototype.setEnv=function(e){this._env=e},Ze.prototype.getEnv=function(){return this._env},Ze.prototype.hasSynchronizingDocuments=function(){for(var e=!1,t=this.getDocuments(),n=0;n<t.length;++n)if(t[n].isSynchronizing()){e=!0;break}return e},Ze.prototype.zoomAtViewCenter=function(e,t){var n,o,i=this.getActiveDocument();if(!i||!(o=i.getEditor().getSelectionBBox())){n=!0;var r=e.getScene();r&&(o=r.getPaintBBox())}var s=o&&!o.isEmpty()?o.getSide(a.GRect.Side.CENTER):new a.GPoint(0,0);if(n&&!e.getViewConfiguration().multiPageView){var l=e.getViewTransform().mapPoint(this.getCanvasCenter());isNaN(l.getX())||isNaN(l.getY())||(s=l)}if(e.getViewConfiguration().multiPageView){var c=e.getScene().getActivePage();c&&(s=s.add(c.getPosition(!0)))}e.zoomAtCenter(s,t)},Ze.prototype.handleUnsavedDocuments=function(){return gDesigner.hasModifiedDocuments()?this.getDocuments().filter(e=>e.isModified()).reduce((e,t)=>e.then(()=>new Promise(async(e,n)=>{this.canUnloadDocument(t).then(o=>{o?e():this.executeAction(De.ID,[t,function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{documentStatus:o=null}=t;o&&o===Le.SaveCancelled?n(t):e()}],"unsavedhandler")}).catch(e=>{n(e)})})),Promise.resolve()):Promise.resolve()},Ze.prototype.canUnloadDocument=function(e){let{changeActiveDocument:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((n,o)=>{if(!e.isModified()&&!e.isSynchronizing())return n(!0);t&&this.getActiveDocument()!==e&&this.activateDocument(e),gDesigner.canExecuteAction(De.ID,[e])||n(!0),te.advanced({title:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.document-modified")).replace("%title",e.getTitle()),closeCallback:e=>e&&o({documentStatus:Le.SaveCancelled}),buttons:[{label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.dont-save")),onclick:()=>{n(!0)},closeOnClick:!0,position:"left",shortcut:"n"},{label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.cancel")),onclick:()=>o({documentStatus:Le.SaveCancelled}),closeOnClick:!0,shortcut:"esc"},{label:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.save"))+"...",onclick:()=>{n(!1)},shortcut:this._shortcutToMouseTrapShortcut(r.GKey.Constant.ENTER),highlighted:!0,closeOnClick:!0}]})})},Ze.prototype.exportSwatches=function(e){for(var t=this.getAllSwatches(e),n=new a.GSwatches,o=0;o<t.length;++o){var i=t[o].clone();n.appendChild(i)}var r=pako.gzip(a.GNode.serialize(n),{level:9}),s=this.getDefaultStorage();if(s.canPromptSave())s.savePrompt(null,[{ext:"gvswatch",mime:"application/gzip"}],e=>{e.setSaveCounterMeasureEnabled(!0),e.write(r),e.setSaveCounterMeasureEnabled(!1)},null);else if(s.canDownload()){s.download("Swatches.gvswatch",e=>{e&&(e.setSaveCounterMeasureEnabled(!0),e.write(r),e.setSaveCounterMeasureEnabled(!1))})}},Ze.prototype.importSwatches=function(e){var t=this.getDefaultStorage(),n=e.startsWith("document");t.openPrompt([{ext:"gvswatch",mime:"text/plain"}],t=>{t.read(t=>{try{for(var o=this.getAllSwatches(e),i=a.GNode.deserialize(pako.ungzip(t,{to:"string"})),r=[],s=i.getFirstChild();null!==s;s=s.getNext()){for(var l=!0,c=0;c<o.length;++c)if(a.GUtil.equals(s,o[c])){l=!1;break}l&&r.push(s.clone())}if(o=o.concat(r),n)this.setSwatches(e,o,!0);else{for(c=0;c<r.length;++c)this._addGlobalSwatch(r[c]);this.setSwatches(e,this._swatches[e])}}catch(e){console.warn("error importing swatches: "+e),te.alert(a.GLocale.get(new a.GLocaleKey("GCommonNames","text.fail-import-swatch")))}})},!1)},Ze.prototype.getFontsPath=function(){return this._fontsPath},Ze.prototype.calculateFontsSize=function(e){var t=this;return new Promise((function(n,o){var i={},a=function(e){return new Promise((function(n,o){var a=new XMLHttpRequest;a.open("HEAD",t.getAssetsURL()+""+e,!0),a.onload=function(){this.status>=200&&this.status<400?(i[e]=parseInt(a.getResponseHeader("Content-Length")),n()):o({status:this.status,statusText:a.statusText})},a.onerror=function(){o({status:this.status,statusText:a.statusText})},a.send()}))},r=[];e.forEach(e=>{r.push(a(e.preview));for(var t=0;t<e.fonts.length;++t)r.push(a(e.fonts[t].url))}),Promise.all(r).then(()=>{n(i)},e=>{o(e)})}))},Ze.prototype.downloadFonts=function(e,t){var n=this,o=0,i={},r=Object.keys(t);if(r.length){for(var s=0,l=0;l<r.length;++l)s+=t[r[l]];o=s}$("#right-sidebars").find(".fonts-download-progress").remove();var c=$("<div/>").addClass("fonts-download-progress").append($("<span/>").text(a.GLocale.get(new a.GLocaleKey("GCommonNames","text.downloading-fonts"))).addClass("info")).append($("<span/>").addClass("count").text(" (0%)")).appendTo($("#right-sidebars")),d=function(e){c.find(".info").text(a.GLocale.get(new a.GLocaleKey("GCommonNames",e?"text.fonts-downloaded":"text.error-downloading"))),c.find(".count").remove(),c.append($("<span/>").text("X").addClass("g-button").addClass("close").on("click",(function(){gDesigner.stats("font_downloaded_closebutton"),c.remove()})))};return new Promise((function(t,a){var r=[];try{var s=function(e){return new Promise((function(t,a){var r=new XMLHttpRequest;r.open("GET",n.getAssetsURL()+""+e,!0),r.responseType="blob",r.onprogress=function(t){i[e]=t.loaded,function(){let e=Object.keys(i);if(e.length){let n=0;for(var t=0;t<e.length;++t)n+=i[e[t]];let a=Math.round(n/o*100);c.find(".count").text(" ("+(a<100?a:100)+"%)")}}()},r.onload=function(){this.status>=200&&this.status<400?t({blob:r.response,url:e}):a({status:this.status,statusText:r.statusText})},r.onerror=function(){a({status:this.status,statusText:r.statusText})},r.send()}))},l=[],u=function(e){r.push(e)},p=function(){throw new Exception("error downloading fonts")};e.forEach(e=>{l.push(s(e.preview).then((function(e){u(e)})).catch(()=>{p()}));for(var t=0;t<e.fonts.length;++t)l.push(s(e.fonts[t].url).then((function(e){u(e)})).catch(e=>{console.log(e),p()}))}),Promise.all(l).then(()=>{d(!0),t(r)},e=>{console.log(e),d(!1),a()})}catch(e){console.log(e),d(!1),a()}}))},Ze.prototype.showCreateAccount=function(){return this._showCreateAccount},Ze.prototype.setShowCreateAccount=function(e){this._showCreateAccount=e},Ze.prototype.getSignupOptions=function(){return this._signupOptions},Ze.prototype.setSignupOptions=function(e){this._signupOptions=e},Ze.prototype.enterpriseLoginForm=function(){return!1},Ze.prototype.setEnterpriseLoginForm=function(e){},Ze.prototype.runDeepLink=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(console.log("Called: "+e),e)try{const n=await this.getUser();if(0===e.indexOf("purchase")){let o;return t.hasOwnProperty("newuser")&&(this._showCreateAccount=!0),Oe.PURCHASE.URL_TO_PRODUCT&&(o=Oe.PURCHASE.URL_TO_PRODUCT[e]),o&&(Object.assign(t,{productId:o}),n?await Fe.updateUserSettings({subscription:{annual:{productId:o}}}):gContainer.setCookie({name:"_gproductid",value:o||"",url:Fe.url})),this.openPaymentDialog(null,Object.assign(t,{flow:e}))}if("login_dialog"===e)this._user||J.performLogin();else{if("confirm_email"===e){const{confirm_email:e,flow:o}=t;return this.getCloudCommunicationManager().confirmEmail(e).then(async()=>{let e=await this.getUser();e&&e.isEmailVerified()&&this.executeWhenReady(()=>{const e=this.getLicense();te.custom({title:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.activating-your-account")),subtitle:(e.isPro()||e.isTrial())&&a.GLocale.get(new a.GLocaleKey("GCommonNames","text.activating-your-account-subtitle")),icon:"ok"}),o&&"confirm_email"!==o&&this.runDeepLink(o,t)})}).catch(e=>{if(!n)return Promise.reject(e);this.executeWhenReady(()=>te.error(e))})}if("account"===e)n&&!this.isAnonymous()&&this.executeWhenReady(()=>{new Ee(n).open()});else if("purchases"===e){n&&await Fe.hasPurchases()&&this.executeWhenReady(()=>{new Ee(n,"purchase").open()})}else if("newuser"===e)this._showCreateAccount=!0;else if("enterprise"===e)n||(this._enterpriseLoginForm=!0);else if("reset_trial"===e){const e=()=>{Fe.license.resetTrial().then(()=>gDesigner.requestLicenseUpdate())};n?e():(new h.default).listen(ce).when(e=>!!e&&!!e.user).do(e)}else if("procoupon"===e)this.executeWhenReady(()=>{J.activateCoupon(t.procoupon)});else if("annot"===e)s.HAS_ANNOTATIONS&&this.executeWhenReady(()=>{const{annot:e}=t;this.setPartVisible(R.RightSidebars,!0),this._rightSidebars.setActiveSidebar(L.ID)});else if(e===ee.DeepLinking.CreateShare&&"true"===t[ee.DeepLinking.CreateShare])(new h.default).listen(Ge).when(()=>this._initialized).do(()=>{const e=t=>{if(t.type===ge.Type.Updated){const t=this.getActiveDocument();t&&t.getStatus()===Le.Loaded&&(t.isShareable()&&!this.getApplicationManager().isSharing()&&this.getShareManager().share(),this.removeEventListener(ge,e,this))}};this.addEventListener(ge,e,this)});else if(e===ee.DeepLinking.ActivateTrial&&t[ee.DeepLinking.ActivateTrial]){const e=t[ee.DeepLinking.ActivateTrial];Fe.license.activateTrial(e).then(()=>we.checkLicense())}else{if(e===ee.DeepLinking.SetPassword)return(new He).execute(t);if(e===ee.DeepLinking.ResetPassword)return(new We).execute(t);if(e===ee.DeepLinking.PasswordlessToken)return(new ze).execute(t)}}return Promise.resolve()}catch(e){return Promise.reject(e)}},Ze.prototype.openProOffer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ae.openSubscriptionOffer(e)},Ze.prototype.handlePROFeatureInterruption=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=$.extend({campaign:"profeature"},e),this.isAnonymous()?new se(()=>{}).open({anonymous:!0,signup:!0,animate:!0,options:e}):this.openProOffer(e)},Ze.prototype.handleShareFilePROFeatureInterruption=function(){this.handlePROFeatureInterruption({shareFile:!0})},Ze.prototype._applicationStatusEvent=function(e){e.status===Ge.Status.Ready&&(this._ready=!0)},Ze.prototype.executeWhenReady=function(e){return(new h.default).listen(Ge).when(()=>this._ready).do(e)},Ze.prototype.isReady=function(){return this._ready},Ze.prototype.isInAppPurchaseAllowed=function(){return gInAppPurchase.canMakePayments()},Ze.prototype.openPaymentDialog=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getAmplitudeHelper().logEvent(s.AmplitudeData.Events.ACCOUNT_CART_SCREEN),gInAppPurchase.purchase(e,t)},Ze.prototype.getWebURL=function(){return gContainer.getRuntime()===ee.Runtime.Browser||gContainer.getRuntime()===ee.Runtime.PWA?location.origin:gDesigner.getAssetsURL()},Ze.prototype.getAssetsURL=function(){return"production"===this.getEnv()?s.prodURL:this.isBeta()?s.betaURL:"lts"===this.getEnv()?s.ltsURL:"rc"===this.getEnv()?s.rcURL:"https://app-"+this.getEnv().split(".")[0]+"."+s.domain+"/"},Ze.prototype.getTabByDocument=function(e){return this.getHeader().getWindowTab(this.getWindows().getWindow(e))},Ze.prototype.getOpacityIncrement=function(){return 1},Ze.prototype.registerAdditionalShortcuts=function(e){var t=e.getAdditionalShortcuts();t&&t.length&&t.forEach(t=>{this.registerShortcut(t,t=>this._executeShortcutAction(e,t),!1)})},Ze.prototype._executeShortcutAction=function(e,t){const n=e.isKeyBoardEventRequiredToExecute()?[t]:[void 0];return this.executeAction(e.getId(),n,"shortcut")},Ze.prototype.getPaste=function(){return this._paste},Ze.prototype.getSubscriberUserType=function(){return this.getLicense().getSubscriberUserType()},Ze.prototype.isLegacyFeature=function(e){return!!e&&ke.includes(e)},Ze.prototype.isEnabledProFeatures=function(e){if(!this.isEnabledSubscriptions())return!0;const t=this.getLicense();return!(t.isFree()||this.isAnonymous()||t.isGuest())&&(!(!t.isLegacy()||!this.isLegacyFeature(e))||!t.isExpired()&&(!t.isOffline()||!t.isOfflinePeriodExpired()))},Ze.prototype.isProTooltipNeeded=function(e){const t=this.getLicense();return!(e&&this.isLegacyFeature(e)&&t.isLegacy())&&!(t.isPro()&&!t.isExpired())},Ze.prototype.preInit=async function(e){const t=this;await async function(){e||(e=Fe.isEnabledSubscriptions());if(await e.catch(()=>!1))return t._enabledSubscriptions=!0,void gContainer.setProperty("enabled_subscriptions",t._enabledSubscriptions);t._enabledSubscriptions=await gContainer.getProperty("enabled_subscriptions").catch(()=>!1)}(),await new Promise(e=>{t._applicationManager=new me(e)})},Ze.prototype.isEnabledSubscriptions=function(){return!!this.isInAppPurchaseAllowed()||!!this._enabledSubscriptions},Ze.prototype.setLicense=function(e){!e||this._license&&e.equals(this._license)||(this._license=e,this.hasEventListeners(le)&&this.trigger(new le(this._license))),this.updateLicenseInfo()},Ze.prototype.updateLicenseInfo=async function(){let e=this._license,t=$(".license-info");const n=t.data("type");if(n&&n===e.getLicenseType()||(t.remove(),t=null),e.isFree()&&!this.isAnonymous()){if(!t&&this.getApplicationManager().isLicenseUpgradeable(e)){let{trialDays:e}=await Fe.getUserSettings().catch(()=>Object.create({}));("number"!=typeof e||isNaN(e))&&(e=15),t=$("<div />").addClass("license-info big").append($("<button />").addClass("g-button start-trial-now").text(a.GLocale.get(new a.GLocaleKey("GCommonNames","text.start-trial-now-button")).replace("%days",e)).on("click",()=>{gDesigner.stats("license-info_click_activate-trial"),this.activateTrialLicense()})).appendTo($("#right-sidebars")),t.css("display","")}}else if(e.isTrial()||e.isExpired()&&e.isPro()){let n;if(t||(t=$("<div />").on("click",()=>{gDesigner.stats("license-info_click_purchase-pro"),this.openPaymentDialog()}).addClass("license-info").append($("<span />").addClass("countdown")).append($("<span />").addClass("buy").text(a.GLocale.get(new a.GLocaleKey("GCommonNames","text.buy-now")))).appendTo($("#right-sidebars"))),e.isExpired())n=a.GLocale.get(new a.GLocaleKey("GCommonNames","text.license-".concat(e.isTrial()?"trial":"pro","-expired")));else if(e.isTrial()){let t=s.DateAPI.millisecondsToDays(s.DateAPI.diff(s.DateAPI.toUTCZone(gDesigner.now()),e.getExpirationDate()));n=t>0?a.GLocale.get(new a.GLocaleKey("GCommonNames","text.license-trial-day".concat(t>1?"s":"","-left"))).replace("%days",t):a.GLocale.get(new a.GLocaleKey("GCommonNames","text.license-trial-expires-today"))}t.css("display","").find(".countdown").text(n)}else t&&t.remove();t&&t.data("type",e.getLicenseType())},Ze.prototype.getLicense=function(){return navigator.onLine?this._license||be.newDefaultLicense():be.newOfflineLicense()},Ze.prototype.getLicenseAsync=async function(){return await this.isOfflineAsync()?be.newOfflineLicense():this._license||be.newDefaultLicense()},Ze.prototype.activateTrialLicense=async function(){const e=async()=>{this.toggleLoading(!0);try{await Fe.license.activateTrial().then(()=>gDesigner.requestLicenseUpdate()).catch(e=>te.alert(Fe.formatError(e)))}finally{this.toggleLoading(!1)}};gDesigner.isOffline()?Se.openUnavailableFeature(e):e()},Ze.prototype.requestLicenseUpdate=function(){let{showProOfferInTrial:e=s.LICENSE.UPGRADEABLE}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ce.reset("proOfferInTrial",e?void 0:gDesigner.now()),we.checkLicense()},Ze.prototype.now=function(){return new Date},Ze.prototype.isOffline=function(e){if(!navigator.onLine)return Ye=!0,Qe=Date.now(),!0;const t=e||s.OFFLINE_CHECK_MIN_WAIT;var n=!!Ye;if(Date.now()-Qe>t){n=!1;var o=new XMLHttpRequest;o.onerror=function(){console.log("OFFLINE!!!"),n=!0};try{o.open("HEAD",Fe.url+"/connection/test",!1),o.withCredentials=s.CONNECTION_TEST_WITH_CREDENTIALS,o.setRequestHeader("Accept","text/plain"),o.setRequestHeader("Content-Type","text/plain"),o.send()}catch(e){n=!0}Ye=n}return Qe=Date.now(),!navigator.onLine||n},Ze.prototype.setPaintMode=function(e){var t=this.getWindows().getActiveWindow();if(t){var n=t.getView();n.getViewConfiguration().paintMode=e,r.GPlatform.scheduleFrame(()=>{n.invalidateAndResetCache(null),this.hasEventListeners(Te)&&this.trigger(new Te(e))})}},Ze.prototype.isOfflineAsync=async function(){if(!navigator.onLine)return Ye=!0,Qe=Date.now(),!0;var e=!!Ye,t=!1;if(null===Je&&Date.now()-Qe>3100){var n=this.getHeader();n&&n.showBusyIcon(a.GLocale.get(new a.GLocaleKey("GCommonNames","text.checking-connectivity")));try{await(()=>new Promise((n,o)=>{let i;i=this._initialized?3e3:2e4;var a=new XMLHttpRequest;a.onerror=o=>{e=!0,t=!0,n()},a.onload=o=>{e=!1,t=!0,n()};var r=Je=setTimeout(()=>{r===Je&&(Je=null),t||(e=!0,n())},i);try{a.open("HEAD",Fe.url+"/connection/test",!0),a.withCredentials=s.CONNECTION_TEST_WITH_CREDENTIALS,a.timeout=2e3,a.setRequestHeader("Accept","text/plain"),a.setRequestHeader("Content-Type","text/plain"),a.send()}catch(o){e=!0,t=!0,n()}}))()}finally{n&&n.hideBusyIcon(),Ye=e}}return Qe=Date.now(),!navigator.onLine||e},Ze.prototype.getLinkerParam=function(e){const t=window[window.GoogleAnalyticsObject];if(t){const n=t.getAll&&t.getAll();if(n)for(let t=0;t<n.length;t++){let o=n[t];if(!e||o.get("trackingId")===e)return o.get("linkerParam")}}return null},Ze.prototype.isLocalhost=function(){return"localhost"===window.location.hostname},Ze.prototype.getAppBaseUrl=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return v.default.getAppBaseUrl(e)},Ze.prototype.setPwaEvent=function(e){if(!e||"beforeinstallprompt"!==e.type)return;if(this._pwaEvent=e,this._waitingPwaDialog&&!this._installPwaDialog&&(this.showInstallPwaDialog(this._waitingPwaDialogDarkBackground),this._waitingPwaDialog=null,this._waitingPwaDialogDarkBackground=null),window.screen.availWidth<1024)return;const t=gDesigner.now().getTime();gContainer.getProperty(K.closedInstallPWADialogDatePropName).then(e=>{e&&t-e<s.DateAPI.daysToMilliseconds(30)?gContainer.setProperty(K.installPWA3timesAWeekPropName,JSON.stringify([])):gContainer.getProperty(K.installPWA3timesAWeekPropName).then(e=>{let n,o=[];if(e&&e.length)try{n=JSON.parse(e)}catch(e){}n||(n=[]);for(let e=0,i=n.length;e<i;e++){const i=n[e];t-i<s.DateAPI.daysToMilliseconds(7)&&o.push(i)}2===o.length&&(gDesigner._ready?gDesigner.showInstallPwaDialog():this.executeWhenReady(()=>{gDesigner.showInstallPwaDialog()})),o.push(t),o.length>2&&(o=o.slice(-2)),gContainer.setProperty(K.installPWA3timesAWeekPropName,JSON.stringify(o))})})},Ze.prototype.showInstallPwaDialog=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._installPwaDialog){this._shouldWaitForPWAEvent()?(this._waitingPwaDialog=!0,this._waitingPwaDialogDarkBackground=e):(this._installPwaDialog=new X(e),this._installPwaDialog.open())}},Ze.prototype._shouldWaitForPWAEvent=function(){return!this.hasPwaEvent()&&!!Ve.isSupported()},Ze.prototype.closeInstallPwaDialog=function(){this._installPwaDialog&&(this._installPwaDialog.close(),this._installPwaDialog=null)},Ze.prototype.getPwaEvent=function(){return this._pwaEvent},Ze.prototype.hasPwaEvent=function(){return!!this._pwaEvent},Ze.prototype.draggableItemIsDragging=function(){return this._draggableItemIsDragging},Ze.prototype.setItemDraggingState=function(e){this._draggableItemIsDragging=e},Ze.prototype.hasDocuments=function(){return!!this.getDocuments().length},Ze.prototype.getAmplitudeHelper=function(){return this._amplitudeHelper},Ze.prototype._initAmplitudeProperties=async function(){const e=await this.getUser();this._amplitudeHelper=new s.AmplitudeHelper(g,{userId:null==e?void 0:e.id,apiKey:window.AMPLITUDE_API_KEY}),new oe(this._amplitudeHelper)},Ze.prototype._updateState=function(){var e,t,n,o,i,a,r;const s=gDesigner.getLicense();null===(e=this._toolbar)||void 0===e||e.setEnabled(s.canAccessFreemium()),null===(t=this._leftSidebars)||void 0===t||t.setEnabled(this._leftSidebars,s.canAccessFreemium()),null===(n=this._rightSidebars)||void 0===n||n.setEnabled(this._rightSidebars,s.canAccessFreemium()),null===(o=this._banner)||void 0===o||o.setEnabled(s.canAccessFreemium()),null===(i=this._overlay)||void 0===i||i.setEnabled(s.canAccessFreemium()),null===(a=this._mainMenu)||void 0===a||a.setEnabled(s.canAccessFreemium()),null===(r=this._header)||void 0===r||r.setWindowTabEnable(s.canAccessFreemium()),this.relayout()},Ze.prototype.isUserActivelyUsingApp=function(){var e;const t=null===(e=this.getActiveDocument())||void 0===e||null===(e=e.getEditor())||void 0===e?void 0:e.getUndoStates(),n=(null==t?void 0:t.length)&&t[t.length-1];return!!n&&Date.now()-n.createdAt<Oe.ACTIVE_USAGE_IDLE_TIME},e.exports=Ze},function(e,t,n){"use strict";var o=n(1);e.exports=class{constructor(){this._lastMousePoint=null}init(){document.addEventListener("mousemove",this._mouseMoveEventHandler.bind(this),!0)}_mouseMoveEventHandler(e){let{pageX:t,pageY:n}=e;this._lastMousePoint=new o.GPoint(t,n)}getLastCursorPoint(){return this._lastMousePoint}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(28);t.default=class{constructor(){this._executions=[]}step(e){this._executions.push(e)}abort(){this._executions.forEach(e=>e.abort())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(7),n(18),n(255),n(29),n(124);const{isBeta:o}=n(782);var i=n(1470);let a=0,r=0;const s={pageStats:(e,t,n,l,c)=>{if(l||function(e,t,n){const o=e=>"string"==typeof e;function a(e){return(e||"").split("/").map((function(e){return function(e){if(!e)return"";let t=String(e).replace(/^(?:[\0-\/:-@\[-`\{-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*|(?:[\0-\/:-@\[-`\{-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*$/g,"$").replace(/(?:[\0-\/:-@\[-`\{-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+/g,"$").replace(/([a-z])([A-Z])/g,(function(e,t,n){return t+"$"+n})).toLowerCase().replace(/(\$)([0-9A-Z_a-z]?)/g,(function(e,t,n){return n.toUpperCase()}));return e.startsWith("!")&&(t="!"+t),t}(e)})).join("/")}if("undefined"==typeof _GLOBAL_GA_EVENTS)return;if(!n&&Date.now()-r<=100)return;var l=e.split("_"),c=l[0],d=l[1],u=(l[2]||"")+("string"==typeof t||"number"==typeof t||t instanceof String?":"+t:"");if("undefined"!=typeof dataLayer){var p=function(e,t,n){var r=n?n.split(":"):"",s=e,l=t,c=r[0]||"",d=r[1]||"";if(!s)return null;var u="";if(o(i[s]))u=i[s];else if(l&&o(i[s][l]))u=i[s][l];else if(l&&c&&o(i[s][l][c]))u=i[s][l][c];else{if(!(l&&c&&d&&o(i[s][l][c][d])))return null;u=i[s][l][c][d]}return(u=(u=(u=(u=u.replace("$EVENTNAME",a(s))).replace("$CATEGORY",a(l))).replace("$ACTION",a(c))).replace("$VALUE",a(d)))&&!u.startsWith("/")&&(u="/"+u),u}(c,d,u);p&&s.pageTracking(p),r=Date.now()}}(e,t),n&&(("function"==typeof gdb_loaddesign||o)&&console.log("updating stats:"+e+" value: "+(t||"null")),"undefined"!=typeof _GLOBAL_GA_EVENTS&&"undefined"!=typeof ga)){var d=n;if(!d&&n.isAnonymous()&&(d={}),d){var u=t?e+"_"+t:e;if(d.hasOwnProperty(u)&&"number"==typeof d[u]?d[u]++:d[u]=1,c||Date.now()-a>100){var p=e.split("_"),g=(p[2]||"unknown")+("string"==typeof t||"number"==typeof t||t instanceof String?":"+t:"");ga(_GLOBAL_GA_EVENTS,"event",p[0],p[1]||"unknown",g),a=Date.now()}}}},pageTracking:async function(e,t){"undefined"!=typeof _GLOBAL_GA_EVENTS&&(Date.now()-r<=100||(e.startsWith("/")||(e="/"+e),e.endsWith("/")&&(e=e.slice(0,e.length-1)),t&&(t.startsWith("/")?e+=t:e=e+"/"+t),e=s.modifyPageStatsForUserLicense(e),e=await s.modifyPageStatsForAppMode(e),("function"==typeof gdb_loaddesign||o)&&console.log("pagestats: "+e),window.ga(_GLOBAL_GA_EVENTS,"pageview",e),r=Date.now()))},modifyPageStatsForUserLicense:function(e){return e},modifyPageStatsForAppMode:function(e){return e}};t.default=s},function(e,t,n){"use strict";e.exports={action:{nonprotriespro:{context:{"gravit-versions-history":"NonProTriesPro/MainArea/Canvas/CanvasContextMenu/ShowVersionHistory","font.import":"NonProTriesPro/MainArea/Canvas/CanvasContextMenu/AddFonts","file.export":"NonProTriesPro/MainArea/Canvas/CanvasContextMenu/AdvancedExport","file.save-as.pdf":"NonProTriesPro/MainArea/Canvas/CanvasContextMenu/300Dpi","file.export.pdf":"NonProTriesPro/MainArea/Canvas/CanvasContextMenu/AdvancedOptions","view.toggle-touch":"NonProTriesPro/MainArea/Canvas/CanvasContextMenu/TouchInterface"},menu:{"gravit-versions-history":"NonProTriesPro/MainArea/MenuBar/File/ShowVersionHistory","font.import":"NonProTriesPro/MainArea/MenuBar/FileImport/AddFonts","file.export":"NonProTriesPro/MainArea/MenuBar/FileExport/AdvancedExport","file.save-as.pdf":"NonProTriesPro/MainArea/MenuBar/FileExportPdfDocumentPdf/300Dpi","file.export.pdf":"NonProTriesPro/MainArea/MenuBar/FileExportPdfDocumentPdf/AdvancedOptions","view.toggle-touch":"NonProTriesPro/MainArea/MenuBar/View/TouchInterface"},shortcut:{"gravit-versions-history":"NonProTriesPro/MainArea/Shortcut/ShowVersionHistory","font.import":"NonProTriesPro/MainArea/Shortcut/AddFonts","file.export":"NonProTriesPro/MainArea/Shortcut/AdvancedExport","file.save-as.pdf":"NonProTriesPro/MainArea/Shortcut/300Dpi","file.export.pdf":"NonProTriesPro/MainArea/Shortcut/AdvancedOptions","view.toggle-touch":"NonProTriesPro/MainArea/Shortcut/TouchInterface"},toolbar:{"gravit-versions-history":"NonProTriesPro/MainArea/Toolbar/ShowVersionHistory","font.import":"NonProTriesPro/MainArea/Toolbar/AddFonts","file.export":"NonProTriesPro/MainArea/Toolbar/AdvancedExport","file.save-as.pdf":"NonProTriesPro/MainArea/Toolbar/300Dpi","file.export.pdf":"NonProTriesPro/MainArea/Toolbar/AdvancedOptions","view.toggle-touch":"NonProTriesPro/MainArea/Toolbar/TouchInterface"},button:{}},execute:{button:{},assistantbar:{"view.fullscreen":"Touch/MainArea/AssistantBar/ToggleFullscreen","paste.paste":"Touch/MainArea/AssistantBar/Paste","edit.delete":"Touch/MainArea/AssistantBar/Delete","edit.deselect-all":"Touch/MainArea/AssistantBar/DeselectAll","edit.select-all":"Touch/MainArea/AssistantBar/SelectAll","modify.group":"Touch/MainArea/AssistantBar/GroupSelection","modify.split":"Touch/MainArea/AssistantBar/UngroupSelection","modify.converttopath":"Touch/MainArea/AssistantBar/ConvertToPath","arrange.order.send-front":"Touch/MainArea/AssistantBar/BringToFront","arrange.order.bring-forward":"Touch/MainArea/AssistantBar/BringForward","arrange.order.send-backward":"Touch/MainArea/AssistantBar/SendBackward","arrange.order.send-back":"Touch/MainArea/AssistantBar/SendToBack","edit.copy":"Touch/MainArea/AssistantBar/Copy","edit.paste.in-place":"Touch/MainArea/AssistantBar/PasteInPlace","edit.paste.inside":"Touch/MainArea/AssistantBar/PasteInsideSelection","edit.paste.here":"Touch/MainArea/AssistantBar/PasteHere","edit.paste.style":"Touch/MainArea/AssistantBar/PasteStyle"},touchmenu:{"arrange.transform.rotate-90-left":"Touch/MainArea/ContextualMenu/Rotate90Left","arrange.transform.rotate-90-right":"Touch/MainArea/ContextualMenu/Rotate90Right","arrange.transform.flip-vertical":"Touch/MainArea/ContextualMenu/FlipVertical","arrange.transform.flip-horizontal":"Touch/MainArea/ContextualMenu/FlipHorizontal","paste.paste":"Touch/MainArea/ContextualMenu/Paste","modify.merge":"Touch/MainArea/ContextualMenu/CreateCompound","modify.converttopath":"Touch/MainArea/ContextualMenu/ConvertToPath","modify.createsymbol":"Touch/MainArea/ContextualMenu/CreateSymbol","modify.clip":"Touch/MainArea/ContextualMenu/ClipSelection","modify.mask-with-shape":"Touch/MainArea/ContextualMenu/MaskWithShape","modify.path2bmp":"Touch/MainArea/ContextualMenu/Flatten","edit.duplicate":"Touch/MainArea/ContextualMenu/Duplicate","edit.paste.in-place":"Touch/MainArea/ContextualMenu/PasteInPlace","edit.paste.inside":"Touch/MainArea/ContextualMenu/PasteInsideSelection","edit.paste.here":"Touch/MainArea/ContextualMenu/PasteHere","edit.paste.style":"Touch/MainArea/ContextualMenu/PasteStyle","modify.merge.op-1":"Touch/MainArea/ContextualMenu/Union","modify.merge.op-4":"Touch/MainArea/ContextualMenu/Subtract","modify.merge.op-3":"Touch/MainArea/ContextualMenu/Intersect","modify.merge.op-2":"Touch/MainArea/ContextualMenu/Difference","modify.vectorize":"Touch/MainArea/ContextualMenu/VectorizeBorder","modify.converttorawpath":"Touch/MainArea/ContextualMenu/ConvertToRawPath","modify.ouline":"Touch/MainArea/ContextualMenu/ConvertToOutline","modify.offset":"Touch/MainArea/ContextualMenu/ExpandShrink","modify.simplify":"Touch/MainArea/ContextualMenu/SimplifyPath","modify.join-paths":"Touch/MainArea/ContextualMenu/JoinPaths","modify.split-path":"Touch/MainArea/ContextualMenu/SplitPath","modify.split-line":"Touch/MainArea/ContextualMenu/BreakCurve","modify.detachsymbol":"Touch/MainArea/ContextualMenu/DetachSymbolInstance","modify.resetinstance":"Touch/MainArea/ContextualMenu/ResetInstance","modify.attachToPath":"Touch/MainArea/ContextualMenu/AttachTextToPath","modify.detachFromPath":"Touch/MainArea/ContextualMenu/DetachTextFromPath","edit.selectbyfonttype":"Touch/MainArea/ContextualMenu/SelectByFontType"},context:{"use-coupon-action":"MainArea/Canvas/CanvasContextMenu/UseCoupon","file.new":"MainArea/Canvas/CanvasContextMenu/NewDesign","file.open-from-template":"MainArea/Canvas/CanvasContextMenu/NewDesignFromTemplate","file.new.clipboard":"MainArea/Canvas/CanvasContextMenu/NewFromClipboard","file.open":"MainArea/Canvas/CanvasContextMenu/OpenFile","gravit-cloud.open":"MainArea/Canvas/CanvasContextMenu/OpenFromCloud","file.open-recent":"MainArea/Canvas/CanvasContextMenu/NoRecentFiles","file.save":"MainArea/Canvas/CanvasContextMenu/Save","file.save-as.gvdesign":"MainArea/Canvas/CanvasContextMenu/DownloadFile","gravit-cloud.save-as":"MainArea/Canvas/CanvasContextMenu/SaveToCloud","cloud.sync.sync-to-cloud":"MainArea/Canvas/CanvasContextMenu/SyncToCloud","cloud.sync.unsync-from-cloud":"MainArea/Canvas/CanvasContextMenu/UnsyncFromCloud","cloud.sync.info":"MainArea/Canvas/CanvasContextMenu/LastSyncedAt11197010000Am","gravit-versions-history":"Pro/MainArea/Canvas/CanvasContextMenu/ShowVersionHistory","file.save-all":"MainArea/Canvas/CanvasContextMenu/SaveAll","file.place-import":"MainArea/Canvas/CanvasContextMenu/PlaceImage","file.link-import":"MainArea/Canvas/CanvasContextMenu/LinkImage","font.import":"Pro/MainArea/Canvas/CanvasContextMenu/AddFonts","file.export":"Pro/MainArea/Canvas/CanvasContextMenu/AdvancedExport","file.save-as.png":"MainArea/Canvas/CanvasContextMenu/PngImagePng","file.save-as.jpg":"MainArea/Canvas/CanvasContextMenu/JpegImageJpg","file.save-as.svg":"MainArea/Canvas/CanvasContextMenu/ScalableVectorGraphicsSvg","file.save-as.pdf":"Pro/MainArea/Canvas/CanvasContextMenu/300Dpi","file.export.pdf":"Pro/MainArea/Canvas/CanvasContextMenu/AdvancedOptions","file.share":"MainArea/Canvas/CanvasContextMenu/ShareFile","file.print":"MainArea/Canvas/CanvasContextMenu/Print","file.quit":"MainArea/Canvas/CanvasContextMenu/Quit","edit.undo":"MainArea/Canvas/CanvasContextMenu/Undo","edit.redo":"MainArea/Canvas/CanvasContextMenu/Redo","edit.cut":"MainArea/Canvas/CanvasContextMenu/Cut","edit.copy":"MainArea/Canvas/CanvasContextMenu/Copy","paste.paste":"MainArea/Canvas/CanvasContextMenu/Paste","edit.paste.in-place":"MainArea/Canvas/CanvasContextMenu/PasteInPlace","edit.paste.inside":"MainArea/Canvas/CanvasContextMenu/PasteInsideSelection","edit.paste.here":"MainArea/Canvas/CanvasContextMenu/PasteHere","edit.paste.style":"MainArea/Canvas/CanvasContextMenu/PasteStyle","edit.paste.replace":"MainArea/Canvas/CanvasContextMenu/PasteAndReplace","edit.delete":"MainArea/Canvas/CanvasContextMenu/Delete","edit.duplicate":"MainArea/Canvas/CanvasContextMenu/Duplicate","edit.edit":"MainArea/Canvas/CanvasContextMenu/EditSelection","edit.select-all":"MainArea/Canvas/CanvasContextMenu/SelectAll","edit.deselect-all":"MainArea/Canvas/CanvasContextMenu/DeselectAll","edit.invert-selection":"MainArea/Canvas/CanvasContextMenu/InvertSelection","edit.selectbyfonttype":"MainArea/Canvas/CanvasContextMenu/SelectByFontType","edit.settings":"MainArea/Canvas/CanvasContextMenu/Settings","arrange.order.send-front":"MainArea/Canvas/CanvasContextMenu/BringToFront","arrange.order.bring-forward":"MainArea/Canvas/CanvasContextMenu/BringForward","arrange.order.send-backward":"MainArea/Canvas/CanvasContextMenu/SendBackward","arrange.order.send-back":"MainArea/Canvas/CanvasContextMenu/SendToBack","arrange.align.align-left":"MainArea/Canvas/CanvasContextMenu/AlignLeft","arrange.align.align-center":"MainArea/Canvas/CanvasContextMenu/AlignCenter","arrange.align.align-right":"MainArea/Canvas/CanvasContextMenu/AlignRight","arrange.align.align-top":"MainArea/Canvas/CanvasContextMenu/AlignTop","arrange.align.align-middle":"MainArea/Canvas/CanvasContextMenu/AlignMiddle","arrange.align.align-bottom":"MainArea/Canvas/CanvasContextMenu/AlignBottom","arrange.align.align-justify-horizontal":"MainArea/Canvas/CanvasContextMenu/SameWidth","arrange.align.align-justify-vertical":"MainArea/Canvas/CanvasContextMenu/SameHeight","arrange.distribute.horizontal":"MainArea/Canvas/CanvasContextMenu/DistributeHorizontally","arrange.distribute.vertical":"MainArea/Canvas/CanvasContextMenu/DistributeVertically","arrange.snap-unit.full":"MainArea/Canvas/CanvasContextMenu/SnapToFullUnits","arrange.snap-unit.half":"MainArea/Canvas/CanvasContextMenu/SnapToHalfUnits","arrange.transform.rotate-45-left":"MainArea/Canvas/CanvasContextMenu/Rotate45Left","arrange.transform.rotate-90-left":"MainArea/Canvas/CanvasContextMenu/Rotate90Left","arrange.transform.rotate-180-left":"MainArea/Canvas/CanvasContextMenu/Rotate180Left","arrange.transform.rotate-45-right":"MainArea/Canvas/CanvasContextMenu/Rotate45Right","arrange.transform.rotate-90-right":"MainArea/Canvas/CanvasContextMenu/Rotate90Right","arrange.transform.rotate-180-right":"MainArea/Canvas/CanvasContextMenu/Rotate180Right","arrange.transform.flip-vertical":"MainArea/Canvas/CanvasContextMenu/FlipVertical","arrange.transform.flip-horizontal":"MainArea/Canvas/CanvasContextMenu/FlipHorizontal","modify.group":"MainArea/Canvas/CanvasContextMenu/GroupSelection","modify.merge":"MainArea/Canvas/CanvasContextMenu/CreateCompound","modify.clip":"MainArea/Canvas/CanvasContextMenu/ClipSelection","modify.split":"MainArea/Canvas/CanvasContextMenu/UngroupSelection","modify.mask-with-shape":"MainArea/Canvas/CanvasContextMenu/MaskWithShape","modify.crop":"MainArea/Canvas/CanvasContextMenu/ConfirmCropping","modify.cancel-crop":"MainArea/Canvas/CanvasContextMenu/CancelCropping","modify.merge.op-1":"MainArea/Canvas/CanvasContextMenu/Union","modify.merge.op-4":"MainArea/Canvas/CanvasContextMenu/Subtract","modify.merge.op-3":"MainArea/Canvas/CanvasContextMenu/Intersect","modify.merge.op-2":"MainArea/Canvas/CanvasContextMenu/Difference","modify.createnestedcompound":"MainArea/Canvas/CanvasContextMenu/CreateNestedCompound","modify.join-paths":"MainArea/Canvas/CanvasContextMenu/JoinPaths","modify.split-path":"MainArea/Canvas/CanvasContextMenu/SplitPath","modify.converttopath":"MainArea/Canvas/CanvasContextMenu/ConvertToPath","modify.converttorawpath":"MainArea/Canvas/CanvasContextMenu/ConvertToRawPath","modify.ouline":"MainArea/Canvas/CanvasContextMenu/ConvertToOutline","modify.offset":"MainArea/Canvas/CanvasContextMenu/ExpandShrink","modify.vectorize":"MainArea/Canvas/CanvasContextMenu/VectorizeBorder","modify.bmp2path":"MainArea/Canvas/CanvasContextMenu/VectorizeImage","modify.attachToPath":"MainArea/Canvas/CanvasContextMenu/AttachTextToPath","modify.detachFromPath":"MainArea/Canvas/CanvasContextMenu/DetachTextFromPath","modify.simplify":"MainArea/Canvas/CanvasContextMenu/SimplifyPath","modify.connect-lines":"MainArea/Canvas/CanvasContextMenu/ConnectPathsLines","modify.split-line":"MainArea/Canvas/CanvasContextMenu/BreakCurve","modify.reverse-order":"MainArea/Canvas/CanvasContextMenu/ReverseOrder","modify.createsymbol":"MainArea/Canvas/CanvasContextMenu/CreateSymbol","modify.detachsymbol":"MainArea/Canvas/CanvasContextMenu/DetachSymbolInstance","modify.resetinstance":"MainArea/Canvas/CanvasContextMenu/ResetInstance","modify.path2bmp":"MainArea/Canvas/CanvasContextMenu/Flatten","view.zoom.original":"MainArea/Canvas/CanvasContextMenu/OriginalView","view.zoom.fit-selection":"MainArea/Canvas/CanvasContextMenu/FitSelection","view.zoom.fit-current-layer":"MainArea/Canvas/CanvasContextMenu/FitLayer","view.zoom.fit.all":"MainArea/Canvas/CanvasContextMenu/FitAll","view.magnification.6":"MainArea/Canvas/CanvasContextMenu/6","view.magnification.12":"MainArea/Canvas/CanvasContextMenu/12","view.magnification.25":"MainArea/Canvas/CanvasContextMenu/25","view.magnification.50":"MainArea/Canvas/CanvasContextMenu/50","view.magnification.66":"MainArea/Canvas/CanvasContextMenu/66","view.magnification.100":"MainArea/Canvas/CanvasContextMenu/100","view.magnification.150":"MainArea/Canvas/CanvasContextMenu/150","view.magnification.200":"MainArea/Canvas/CanvasContextMenu/200","view.magnification.300":"MainArea/Canvas/CanvasContextMenu/300","view.magnification.400":"MainArea/Canvas/CanvasContextMenu/400","view.magnification.800":"MainArea/Canvas/CanvasContextMenu/800","view.magnification.1600":"MainArea/Canvas/CanvasContextMenu/1600","view.magnification.3200":"MainArea/Canvas/CanvasContextMenu/3200","view.magnification.6400":"MainArea/Canvas/CanvasContextMenu/6400","view.magnification.12800":"MainArea/Canvas/CanvasContextMenu/12800","view.magnification.25600":"MainArea/Canvas/CanvasContextMenu/25600","view.zoom.in":"MainArea/Canvas/CanvasContextMenu/ZoomIn","zoom.out":"MainArea/Canvas/CanvasContextMenu/ZoomOut","view.outline-view":"MainArea/Canvas/CanvasContextMenu/OutlineView","view.fast-view":"MainArea/Canvas/CanvasContextMenu/FastView","view.canvas.show-rulers":"MainArea/Canvas/CanvasContextMenu/ShowRulers","view.canvas.show-guide-lines":"MainArea/Canvas/CanvasContextMenu/ShowGuideLines","view.canvas.show-symbol-labels":"MainArea/Canvas/CanvasContextMenu/ShowSymbolLabels","view.canvas.show-grid":"MainArea/Canvas/CanvasContextMenu/ShowGrid","view.canvas.show-slices":"MainArea/Canvas/CanvasContextMenu/ShowSlices","view.canvas.show-effects":"MainArea/Canvas/CanvasContextMenu/ShowEffects","view.toggle-snap":"MainArea/Canvas/CanvasContextMenu/UseSnapping","view.toggle-snapzones":"MainArea/Canvas/CanvasContextMenu/UseSnapZones","view.toggle-guide.guide.grid":"MainArea/Canvas/CanvasContextMenu/SnapToGrid","view.toggle-guide.guide.guide-lines":"MainArea/Canvas/CanvasContextMenu/SnapToGuideLines","view.toggle-guide.guide.full-pixels":"MainArea/Canvas/CanvasContextMenu/SnapToFullPixels","view.toggle-guide.guide.points":"MainArea/Canvas/CanvasContextMenu/SnapToAnchorPoints","view.toggle-guide.guide.bbox":"MainArea/Canvas/CanvasContextMenu/SnapToShapes","view.toggle-guide.guide.scene":"MainArea/Canvas/CanvasContextMenu/SnapToPages","view.toggle-sidebar.inspector":"MainArea/Canvas/CanvasContextMenu/ShowInspectorPanel","view.toggle-sidebar.outline":"MainArea/Canvas/CanvasContextMenu/ShowLayersPanel","view.toggle-sidebar.library":"MainArea/Canvas/CanvasContextMenu/ShowLibrariesPanel","view.toggle-sidebar.symbols":"MainArea/Canvas/CanvasContextMenu/ShowSymbolsPanel","view.clone":"MainArea/Canvas/CanvasContextMenu/NewView","view.play":"MainArea/Canvas/CanvasContextMenu/PlayPresent","view.fullscreen":"MainArea/Canvas/CanvasContextMenu/ToggleFullscreen","open-link.contact-us":"MainArea/Canvas/CanvasContextMenu/ContactUs","open-link.user-guide":"MainArea/Canvas/CanvasContextMenu/UserGuide","open-link.tutorials":"MainArea/Canvas/CanvasContextMenu/Tutorials","open-link.changelog":"MainArea/Canvas/CanvasContextMenu/WhatSNew","open-link.blog":"MainArea/Canvas/CanvasContextMenu/Blog","language.0":"MainArea/Canvas/CanvasContextMenu/English","language.1":"MainArea/Canvas/CanvasContextMenu/Deutsch","language.2":"MainArea/Canvas/CanvasContextMenu/中文","language.3":"MainArea/Canvas/CanvasContextMenu/Português","language.4":"MainArea/Canvas/CanvasContextMenu/Español","language.5":"MainArea/Canvas/CanvasContextMenu/Français","language.6":"MainArea/Canvas/CanvasContextMenu/Polski","language.7":"MainArea/Canvas/CanvasContextMenu/Русский","language.8":"MainArea/Canvas/CanvasContextMenu/Türkçe","language.9":"MainArea/Canvas/CanvasContextMenu/Čeština","language.10":"MainArea/Canvas/CanvasContextMenu/繁體中文","language.11":"MainArea/Canvas/CanvasContextMenu/Italiano","language.12":"MainArea/Canvas/CanvasContextMenu/日本語","language.13":"MainArea/Canvas/CanvasContextMenu/Nederlands","open-welcome-screen":"MainArea/Canvas/CanvasContextMenu/ShowWelcomeScreen","check-for-updates":"MainArea/Canvas/CanvasContextMenu/CheckForUpdates","developer-details":"MainArea/Canvas/CanvasContextMenu/SendDeveloperDetails","help.purchase":"MainArea/Canvas/CanvasContextMenu/PurchasePro","example-files":"MainArea/Canvas/CanvasContextMenu/ExploreExampleFiles"},menu:{"use-coupon-action":"MainArea/MenuBar/Help/UseCoupon","file.new":"MainArea/MenuBar/File/NewDesign","file.open-from-template":"MainArea/MenuBar/File/NewDesignFromTemplate","file.new.clipboard":"MainArea/MenuBar/File/NewFromClipboard","file.open":"MainArea/MenuBar/File/OpenFile","gravit-cloud.open":"MainArea/MenuBar/File/OpenFromCloud","file.open-recent":"MainArea/MenuBar/FileOpenRecent/NoRecentFiles","file.save":"MainArea/MenuBar/File/Save","file.save-as.gvdesign":"MainArea/MenuBar/File/DownloadFile","gravit-cloud.save-as":"MainArea/MenuBar/File/SaveToCloud","cloud.sync.sync-to-cloud":"MainArea/MenuBar/File/SyncToCloud","cloud.sync.unsync-from-cloud":"MainArea/MenuBar/File/UnsyncFromCloud","cloud.sync.info":"MainArea/MenuBar/File/LastSyncedAt11197010000Am","gravit-versions-history":"Pro/MainArea/MenuBar/File/ShowVersionHistory","file.save-all":"MainArea/MenuBar/File/SaveAll","file.place-import":"MainArea/MenuBar/FileImport/PlaceImage","file.link-import":"MainArea/MenuBar/FileImport/LinkImage","font.import":"Pro/MainArea/MenuBar/FileImport/AddFonts","file.export":"Pro/MainArea/MenuBar/FileExport/AdvancedExport","file.save-as.png":"MainArea/MenuBar/FileExport/PngImagePng","file.save-as.jpg":"MainArea/MenuBar/FileExport/JpegImageJpg","file.save-as.svg":"MainArea/MenuBar/FileExport/ScalableVectorGraphicsSvg","file.save-as.pdf":"Pro/MainArea/MenuBar/FileExportPdfDocumentPdf/300Dpi","file.export.pdf":"Pro/MainArea/MenuBar/FileExportPdfDocumentPdf/AdvancedOptions","file.share":"MainArea/MenuBar/File/ShareFile","file.share.opensharedfile":"MainArea/MenuBar/File/ShareFile/OpenSharedFile","file.print":"MainArea/MenuBar/File/Print","file.quit":"MainArea/MenuBar/File/Quit","edit.undo":"MainArea/MenuBar/Edit/Undo","edit.redo":"MainArea/MenuBar/Edit/Redo","edit.cut":"MainArea/MenuBar/Edit/Cut","edit.copy":"MainArea/MenuBar/Edit/Copy","paste.paste":"MainArea/MenuBar/EditPaste/Paste","edit.paste.in-place":"MainArea/MenuBar/EditPaste/PasteInPlace","edit.paste.inside":"MainArea/MenuBar/EditPaste/PasteInsideSelection","edit.paste.here":"MainArea/MenuBar//PasteHere","edit.paste.style":"MainArea/MenuBar/EditPaste/PasteStyle","edit.paste.replace":"MainArea/MenuBar/EditPaste/PasteAndReplace","edit.delete":"MainArea/MenuBar/Edit/Delete","edit.duplicate":"MainArea/MenuBar/Edit/Duplicate","edit.edit":"MainArea/MenuBar/Edit/EditSelection","edit.select-all":"MainArea/MenuBar/Edit/SelectAll","edit.deselect-all":"MainArea/MenuBar/Edit/DeselectAll","edit.invert-selection":"MainArea/MenuBar/Edit/InvertSelection","edit.selectbyfonttype":"MainArea/MenuBar/Edit/SelectByFontType","edit.settings":"MainArea/MenuBar/Edit/Settings","arrange.order.send-front":"MainArea/MenuBar/ModifyArrange/BringToFront","arrange.order.bring-forward":"MainArea/MenuBar/ModifyArrange/BringForward","arrange.order.send-backward":"MainArea/MenuBar/ModifyArrange/SendBackward","arrange.order.send-back":"MainArea/MenuBar/ModifyArrange/SendToBack","arrange.align.align-left":"MainArea/MenuBar/ModifyAlign/AlignLeft","arrange.align.align-center":"MainArea/MenuBar/ModifyAlign/AlignCenter","arrange.align.align-right":"MainArea/MenuBar/ModifyAlign/AlignRight","arrange.align.align-top":"MainArea/MenuBar/ModifyAlign/AlignTop","arrange.align.align-middle":"MainArea/MenuBar/ModifyAlign/AlignMiddle","arrange.align.align-bottom":"MainArea/MenuBar/ModifyAlign/AlignBottom","arrange.align.align-justify-horizontal":"MainArea/MenuBar/ModifyAlign/SameWidth","arrange.align.align-justify-vertical":"MainArea/MenuBar/ModifyAlign/SameHeight","arrange.distribute.horizontal":"MainArea/MenuBar/ModifyAlign/DistributeHorizontally","arrange.distribute.vertical":"MainArea/MenuBar/ModifyAlign/DistributeVertically","arrange.snap-unit.full":"MainArea/MenuBar/ModifyAlign/SnapToFullUnits","arrange.snap-unit.half":"MainArea/MenuBar/ModifyAlign/SnapToHalfUnits","arrange.transform.rotate-45-left":"MainArea/MenuBar/ModifyTransform/Rotate45Left","arrange.transform.rotate-90-left":"MainArea/MenuBar/ModifyTransform/Rotate90Left","arrange.transform.rotate-180-left":"MainArea/MenuBar/ModifyTransform/Rotate180Left","arrange.transform.rotate-45-right":"MainArea/MenuBar/ModifyTransform/Rotate45Right","arrange.transform.rotate-90-right":"MainArea/MenuBar/ModifyTransform/Rotate90Right","arrange.transform.rotate-180-right":"MainArea/MenuBar/ModifyTransform/Rotate180Right","arrange.transform.flip-vertical":"MainArea/MenuBar/ModifyTransform/FlipVertical","arrange.transform.flip-horizontal":"MainArea/MenuBar/ModifyTransform/FlipHorizontal","modify.group":"MainArea/MenuBar/Modify/GroupSelection","modify.merge":"MainArea/MenuBar/Modify/CreateCompound","modify.clip":"MainArea/MenuBar/Modify/ClipSelection","modify.split":"MainArea/MenuBar/Modify/UngroupSelection","modify.mask-with-shape":"MainArea/MenuBar/Modify/MaskWithShape","modify.crop":"MainArea/MenuBar/Modify/ConfirmCropping","modify.cancel-crop":"MainArea/MenuBar/Modify/CancelCropping","modify.merge.op-1":"MainArea/MenuBar/ModifyCreateCompoundShape/Union","modify.merge.op-4":"MainArea/MenuBar/ModifyCreateCompoundShape/Subtract","modify.merge.op-3":"MainArea/MenuBar/ModifyCreateCompoundShape/Intersect","modify.merge.op-2":"MainArea/MenuBar/ModifyCreateCompoundShape/Difference","modify.createnestedcompound":"MainArea/MenuBar/Modify/CreateNestedCompound","modify.join-paths":"MainArea/MenuBar/ModifyPath/JoinPaths","modify.split-path":"MainArea/MenuBar/ModifyPath/SplitPath","modify.converttopath":"MainArea/MenuBar/ModifyPath/ConvertToPath","modify.converttorawpath":"MainArea/MenuBar/ModifyPath/ConvertToRawPath","modify.ouline":"MainArea/MenuBar/ModifyPath/ConvertToOutline","modify.offset":"MainArea/MenuBar/ModifyPath/ExpandShrink","modify.vectorize":"MainArea/MenuBar/ModifyPath/VectorizeBorder","modify.bmp2path":"MainArea/MenuBar/ModifyPath/VectorizeImage","modify.attachToPath":"MainArea/MenuBar/ModifyPath/AttachTextToPath","modify.detachFromPath":"MainArea/MenuBar/ModifyPath/DetachTextFromPath","modify.simplify":"MainArea/MenuBar/ModifyPath/SimplifyPath","modify.connect-lines":"MainArea/MenuBar/ModifyPath/ConnectPathsLines","modify.split-line":"MainArea/MenuBar/ModifyPath/BreakCurve","modify.reverse-order":"MainArea/MenuBar/ModifyPath/ReverseOrder","modify.createsymbol":"MainArea/MenuBar/ModifySymbol/CreateSymbol","modify.detachsymbol":"MainArea/MenuBar/ModifySymbol/DetachSymbolInstance","modify.resetinstance":"MainArea/MenuBar/ModifySymbol/ResetInstance","modify.path2bmp":"MainArea/MenuBar/Modify/Flatten","view.zoom.original":"MainArea/MenuBar/View/OriginalView","view.zoom.fit-selection":"MainArea/MenuBar/View/FitSelection","view.zoom.fit-current-layer":"MainArea/MenuBar/View/FitLayer","view.zoom.fit.all":"MainArea/MenuBar/View/FitAll","view.magnification.6":"MainArea/MenuBar/ViewMagnification/6","view.magnification.12":"MainArea/MenuBar/ViewMagnification/12","view.magnification.25":"MainArea/MenuBar/ViewMagnification/25","view.magnification.50":"MainArea/MenuBar/ViewMagnification/50","view.magnification.66":"MainArea/MenuBar/ViewMagnification/66","view.magnification.100":"MainArea/MenuBar/ViewMagnification/100","view.magnification.150":"MainArea/MenuBar/ViewMagnification/150","view.magnification.200":"MainArea/MenuBar/ViewMagnification/200","view.magnification.300":"MainArea/MenuBar/ViewMagnification/300","view.magnification.400":"MainArea/MenuBar/ViewMagnification/400","view.magnification.800":"MainArea/MenuBar/ViewMagnification/800","view.magnification.1600":"MainArea/MenuBar/ViewMagnification/1600","view.magnification.3200":"MainArea/MenuBar/ViewMagnification/3200","view.magnification.6400":"MainArea/MenuBar/ViewMagnification/6400","view.magnification.12800":"MainArea/MenuBar/ViewMagnification/12800","view.magnification.25600":"MainArea/MenuBar/ViewMagnification/25600","view.zoom.in":"MainArea/MenuBar/ViewMagnification/ZoomIn","zoom.out":"MainArea/MenuBar/ViewMagnification/ZoomOut","view.outline-view":"MainArea/MenuBar/View/OutlineView","view.fast-view":"MainArea/MenuBar/View/FastView","view.canvas.show-rulers":"MainArea/MenuBar/ViewCanvas/ShowRulers","view.canvas.show-guide-lines":"MainArea/MenuBar/ViewCanvas/ShowGuideLines","view.canvas.show-symbol-labels":"MainArea/MenuBar/ViewCanvas/ShowSymbolLabels","view.canvas.show-grid":"MainArea/MenuBar/ViewCanvas/ShowGrid","view.canvas.show-slices":"MainArea/MenuBar/ViewCanvas/ShowSlices","view.canvas.show-effects":"MainArea/MenuBar/ViewCanvas/ShowEffects","view.toggle-snap":"MainArea/MenuBar/ViewSnapTo/UseSnapping","view.toggle-snapzones":"MainArea/MenuBar/ViewSnapTo/UseSnapZones","view.toggle-guide.guide.grid":"MainArea/MenuBar/ViewSnapTo/SnapToGrid","view.toggle-guide.guide.guide-lines":"MainArea/MenuBar/ViewSnapTo/SnapToGuideLines","view.toggle-guide.guide.full-pixels":"MainArea/MenuBar/ViewSnapTo/SnapToFullPixels","view.toggle-guide.guide.points":"MainArea/MenuBar/ViewSnapTo/SnapToAnchorPoints","view.toggle-guide.guide.bbox":"MainArea/MenuBar/ViewSnapTo/SnapToShapes","view.toggle-guide.guide.scene":"MainArea/MenuBar/ViewSnapTo/SnapToPages","view.toggle-sidebar.inspector":"MainArea/MenuBar/View/ShowInspectorPanel","view.toggle-sidebar.outline":"MainArea/MenuBar/View/ShowLayersPanel","view.toggle-sidebar.library":"MainArea/MenuBar/View/ShowLibrariesPanel","view.toggle-sidebar.symbols":"MainArea/MenuBar/View/ShowSymbolsPanel","view.clone":"MainArea/MenuBar/View/NewView","view.play":"MainArea/MenuBar/View/PlayPresent","view.fullscreen":"MainArea/MenuBar/View/ToggleFullscreen","open-link.contact-us":"MainArea/MenuBar/HelpSupport/ContactUs","open-link.user-guide":"MainArea/MenuBar/HelpLearn/UserGuide","open-link.tutorials":"MainArea/MenuBar/HelpLearn/Tutorials","open-link.changelog":"MainArea/MenuBar/Help/WhatSNew","open-link.blog":"MainArea/MenuBar/HelpLearn/Blog","language.0":"MainArea/MenuBar/HelpLanguage/English","language.1":"MainArea/MenuBar/HelpLanguage/Deutsch","language.2":"MainArea/MenuBar/HelpLanguage/中文","language.3":"MainArea/MenuBar/HelpLanguage/Português","language.4":"MainArea/MenuBar/HelpLanguage/Español","language.5":"MainArea/MenuBar/HelpLanguage/Français","language.6":"MainArea/MenuBar/HelpLanguage/Polski","language.7":"MainArea/MenuBar/HelpLanguage/Русский","language.8":"MainArea/MenuBar/HelpLanguage/Türkçe","language.9":"MainArea/MenuBar/HelpLanguage/Čeština","language.10":"MainArea/MenuBar/HelpLanguage/繁體中文","language.11":"MainArea/MenuBar/HelpLanguage/Italiano","language.12":"MainArea/MenuBar/HelpLanguage/日本語","language.13":"MainArea/MenuBar/HelpLanguage/Nederlands","open-welcome-screen":"MainArea/MenuBar/Help/ShowWelcomeScreen","check-for-updates":"MainArea/MenuBar/Help/CheckForUpdates","developer-details":"MainArea/MenuBar/HelpSupport/SendDeveloperDetails","help.purchase":"MainArea/MenuBar/Help/PurchasePro","example-files":"MainArea/MenuBar/HelpLearn/ExploreExampleFiles","help.tooltip-visibility":"MainArea/MenuBar/HelpLearn/DisplayEnhancedTooltips","help.tooltip-visibility.on":"MainArea/MenuBar/HelpLearn/DisplayEnhancedTooltips/SwitchOn","help.tooltip-visibility.off":"MainArea/MenuBar/HelpLearn/DisplayEnhancedTooltips/SwitchOff","help.shortcuts":"MainArea/MenuBar/HelpLearn/ShowKeyboardShortcuts","view.toggle-touch.on":"MainArea/MenuBar/View/TouchInterface","view.toggle-touch.off":"MainArea/MenuBar/View/DisableTouchInterface"},shortcut:{"use-coupon-action":"MainArea/Shortcut/UseCoupon","file.new":"MainArea/Shortcut/NewDesign","file.open-from-template":"MainArea/Shortcut/NewDesignFromTemplate","file.new.clipboard":"MainArea/Shortcut/NewFromClipboard","file.open":"MainArea/Shortcut/OpenFile","gravit-cloud.open":"MainArea/Shortcut/OpenFromCloud","file.open-recent":"MainArea/Shortcut/NoRecentFiles","file.save":"MainArea/Shortcut/Save","file.save-as.gvdesign":"MainArea/Shortcut/DownloadFile","gravit-cloud.save-as":"MainArea/Shortcut/SaveToCloud","cloud.sync.sync-to-cloud":"MainArea/Shortcut/SyncToCloud","cloud.sync.unsync-from-cloud":"MainArea/Shortcut/UnsyncFromCloud","cloud.sync.info":"MainArea/Shortcut/LastSyncedAt11197010000Am","gravit-versions-history":"Pro/MainArea/Shortcut/ShowVersionHistory","file.save-all":"MainArea/Shortcut/SaveAll","file.place-import":"MainArea/Shortcut/PlaceImage","file.link-import":"MainArea/Shortcut/LinkImage","font.import":"Pro/MainArea/Shortcut/AddFonts","file.export":"Pro/MainArea/Shortcut/AdvancedExport","file.save-as.png":"MainArea/Shortcut/PngImagePng","file.save-as.jpg":"MainArea/Shortcut/JpegImageJpg","file.save-as.svg":"MainArea/Shortcut/ScalableVectorGraphicsSvg","file.save-as.pdf":"Pro/MainArea/Shortcut/300Dpi","file.export.pdf":"Pro/MainArea/Shortcut/AdvancedOptions","file.share":"MainArea/Shortcut/ShareFile","file.print":"MainArea/Shortcut/Print","file.quit":"MainArea/Shortcut/Quit","file.close-active-window":"MainArea/Shortcut/CloseActiveWindow","edit.undo":"MainArea/Shortcut/Undo","edit.redo":"MainArea/Shortcut/Redo","edit.cut":"MainArea/Shortcut/Cut","edit.copy":"MainArea/Shortcut/Copy","paste.paste":"MainArea/Shortcut/Paste","edit.paste.in-place":"MainArea/Shortcut/PasteInPlace","edit.paste.inside":"MainArea/Shortcut/PasteInsideSelection","edit.paste.here":"MainArea/Shortcut/PasteHere","edit.paste.style":"MainArea/Shortcut/PasteStyle","edit.paste.replace":"MainArea/Shortcut/PasteAndReplace","edit.delete":"MainArea/Shortcut/Delete","edit.duplicate":"MainArea/Shortcut/Duplicate","edit.edit":"MainArea/Shortcut/EditSelection","edit.select-all":"MainArea/Shortcut/SelectAll","edit.deselect-all":"MainArea/Shortcut/DeselectAll","edit.invert-selection":"MainArea/Shortcut/InvertSelection","edit.selectbyfonttype":"MainArea/Shortcut/SelectByFontType","edit.settings":"MainArea/Shortcut/Settings","edit.eyedropper.fill":"MainArea/Shortcut/OpenFillEyeDropper","edit.eyedropper.border":"MainArea/Shortcut/OpenBorderEyeDropper","edit.eyedropper.text":"MainArea/Shortcut/OpenTextEyeDropper","edit.rename-layer":"MainArea/Toolbar/RenameLayer","edit.change-opacity":"MainArea/Toolbar/ChangeOpacity","arrange.order.send-front":"MainArea/Shortcut/BringToFront","arrange.order.bring-forward":"MainArea/Shortcut/BringForward","arrange.order.send-backward":"MainArea/Shortcut/SendBackward","arrange.order.send-back":"MainArea/Shortcut/SendToBack","arrange.align.align-left":"MainArea/Shortcut/AlignLeft","arrange.align.align-center":"MainArea/Shortcut/AlignCenter","arrange.align.align-right":"MainArea/Shortcut/AlignRight","arrange.align.align-top":"MainArea/Shortcut/AlignTop","arrange.align.align-middle":"MainArea/Shortcut/AlignMiddle","arrange.align.align-bottom":"MainArea/Shortcut/AlignBottom","arrange.align.align-justify-horizontal":"MainArea/Shortcut/SameWidth","arrange.align.align-justify-vertical":"MainArea/Shortcut/SameHeight","arrange.distribute.horizontal":"MainArea/Shortcut/DistributeHorizontally","arrange.distribute.vertical":"MainArea/Shortcut/DistributeVertically","arrange.snap-unit.full":"MainArea/Shortcut/SnapToFullUnits","arrange.snap-unit.half":"MainArea/Shortcut/SnapToHalfUnits","arrange.transform.rotate-45-left":"MainArea/Shortcut/Rotate45Left","arrange.transform.rotate-90-left":"MainArea/Shortcut/Rotate90Left","arrange.transform.rotate-180-left":"MainArea/Shortcut/Rotate180Left","arrange.transform.rotate-45-right":"MainArea/Shortcut/Rotate45Right","arrange.transform.rotate-90-right":"MainArea/Shortcut/Rotate90Right","arrange.transform.rotate-180-right":"MainArea/Shortcut/Rotate180Right","arrange.transform.flip-vertical":"MainArea/Shortcut/FlipVertical","arrange.transform.flip-horizontal":"MainArea/Shortcut/FlipHorizontal","modify.group":"MainArea/Shortcut/GroupSelection","modify.merge":"MainArea/Shortcut/CreateCompound","modify.clip":"MainArea/Shortcut/ClipSelection","modify.split":"MainArea/Shortcut/UngroupSelection","modify.mask-with-shape":"MainArea/Shortcut/MaskWithShape","modify.crop":"MainArea/Shortcut/ConfirmCropping","modify.cancel-crop":"MainArea/Shortcut/CancelCropping","modify.merge.op-1":"MainArea/Shortcut/Union","modify.merge.op-4":"MainArea/Shortcut/Subtract","modify.merge.op-3":"MainArea/Shortcut/Intersect","modify.merge.op-2":"MainArea/Shortcut/Difference","modify.createnestedcompound":"MainArea/Shortcut/CreateNestedCompound","modify.join-paths":"MainArea/Shortcut/JoinPaths","modify.split-path":"MainArea/Shortcut/SplitPath","modify.converttopath":"MainArea/Shortcut/ConvertToPath","modify.converttorawpath":"MainArea/Shortcut/ConvertToRawPath","modify.ouline":"MainArea/Shortcut/ConvertToOutline","modify.offset":"MainArea/Shortcut/ExpandShrink","modify.vectorize":"MainArea/Shortcut/VectorizeBorder","modify.bmp2path":"MainArea/Shortcut/VectorizeImage","modify.attachToPath":"MainArea/Shortcut/AttachTextToPath","modify.detachFromPath":"MainArea/Shortcut/DetachTextFromPath","modify.simplify":"MainArea/Shortcut/SimplifyPath","modify.connect-lines":"MainArea/Shortcut/ConnectPathsLines","modify.split-line":"MainArea/Shortcut/BreakCurve","modify.reverse-order":"MainArea/Shortcut/ReverseOrder","modify.createsymbol":"MainArea/Shortcut/CreateSymbol","modify.detachsymbol":"MainArea/Shortcut/DetachSymbolInstance","modify.resetinstance":"MainArea/Shortcut/ResetInstance","modify.path2bmp":"MainArea/Shortcut/Flatten","modify.lock-layer":"MainArea/Shortcut/LockLayer","modify.change-anchor-points-joint-type.straight":"MainArea/Shortcut/ChangeAnchorPointsJointTypeStraight","modify.change-anchor-points-joint-type.mirrored":"MainArea/Shortcut/ChangeAnchorPointsJointTypeMirrored","modify.change-anchor-points-joint-type.disconnected":"MainArea/Shortcut/ChangeAnchorPointsJointTypeDisconnected","modify.change-anchor-points-joint-type.asymmetric":"MainArea/Shortcut/ChangeAnchorPointsJointTypeAsymmetric","modify.change-anchor-points-joint-type.connector":"MainArea/Shortcut/ChangeAnchorPointsJointTypeConnector","modify.swap-paint-layers":"MainArea/Shortcut/SwapPaintLayers","modify.create-new-layer":"MainArea/Shortcut/CreateNewLayer","view.zoom.original":"MainArea/Shortcut/OriginalView","view.zoom.fit-selection":"MainArea/Shortcut/FitSelection","view.zoom.fit-current-layer":"MainArea/Shortcut/FitLayer","view.zoom.fit.all":"MainArea/Shortcut/FitAll","view.magnification.6":"MainArea/Shortcut/6","view.magnification.12":"MainArea/Shortcut/12","view.magnification.25":"MainArea/Shortcut/25","view.magnification.50":"MainArea/Shortcut/50","view.magnification.66":"MainArea/Shortcut/66","view.magnification.100":"MainArea/Shortcut/100","view.magnification.150":"MainArea/Shortcut/150","view.magnification.200":"MainArea/Shortcut/200","view.magnification.300":"MainArea/Shortcut/300","view.magnification.400":"MainArea/Shortcut/400","view.magnification.800":"MainArea/Shortcut/800","view.magnification.1600":"MainArea/Shortcut/1600","view.magnification.3200":"MainArea/Shortcut/3200","view.magnification.6400":"MainArea/Shortcut/6400","view.magnification.12800":"MainArea/Shortcut/12800","view.magnification.25600":"MainArea/Shortcut/25600","view.zoom.in":"MainArea/Shortcut/ZoomIn","zoom.out":"MainArea/Shortcut/ZoomOut","view.outline-view":"MainArea/Shortcut/OutlineView","view.fast-view":"MainArea/Shortcut/FastView","view.canvas.show-rulers":"MainArea/Shortcut/ShowRulers","view.canvas.show-guide-lines":"MainArea/Shortcut/ShowGuideLines","view.canvas.show-symbol-labels":"MainArea/Shortcut/ShowSymbolLabels","view.canvas.show-grid":"MainArea/Shortcut/ShowGrid","view.canvas.show-slices":"MainArea/Shortcut/ShowSlices","view.canvas.show-effects":"MainArea/Shortcut/ShowEffects","view.toggle-snap":"MainArea/Shortcut/UseSnapping","view.toggle-snapzones":"MainArea/Shortcut/UseSnapZones","view.toggle-guide.guide.grid":"MainArea/Shortcut/SnapToGrid","view.toggle-guide.guide.guide-lines":"MainArea/Shortcut/SnapToGuideLines","view.toggle-guide.guide.full-pixels":"MainArea/Shortcut/SnapToFullPixels","view.toggle-guide.guide.points":"MainArea/Shortcut/SnapToAnchorPoints","view.toggle-guide.guide.bbox":"MainArea/Shortcut/SnapToShapes","view.toggle-guide.guide.scene":"MainArea/Shortcut/SnapToPages","view.toggle-sidebar.inspector":"MainArea/Shortcut/ShowInspectorPanel","view.toggle-sidebar.outline":"MainArea/Shortcut/ShowLayersPanel","view.toggle-sidebar.library":"MainArea/Shortcut/ShowLibrariesPanel","view.toggle-sidebar.symbols":"MainArea/Shortcut/ShowSymbolsPanel","view.clone":"MainArea/Shortcut/NewView","view.play":"MainArea/Shortcut/PlayPresent","view.fullscreen":"MainArea/Shortcut/ToggleFullscreen","view.canvas.show-selection-handles":"MainArea/Shortcut/ToggleSelectionHandlesVisibility","view.enter-layer-group":"MainArea/Shortcut/EnterLayerGroup","view.enter-layer-group.reverse":"MainArea/Shortcut/LeaveLayerGroup","view.cycle-through-layers.next":"MainArea/Shortcut/SelectNextLayer","view.cycle-through-layers.previous":"MainArea/Shortcut/SelectPreviousLayer","view.toggle-layer-visibility":"MainArea/Shortcut/ToggleLayerVisibility","view.toggle-paint-layers-visibility.fill":"MainArea/Shortcut/ToggleFillPaintLayersVisibility","view.toggle-paint-layers-visibility.border":"MainArea/Shortcut/ToggleBorderPaintLayersVisibility","view.toggle-multi-page-mode":"MainArea/Shortcut/ToggleMultiPageMode","view.change-active-page.next":"MainArea/Shortcut/SelectNextPage","view.change-active-page.previous":"MainArea/Shortcut/SelectPreviousPage","view.change-active-window.next":"MainArea/Shortcut/SelectNextWindow","view.change-active-window.previous":"MainArea/Shortcut/SelectPreviousWindow","open-link.contact-us":"MainArea/Shortcut/ContactUs","open-link.user-guide":"MainArea/Shortcut/UserGuide","open-link.tutorials":"MainArea/Shortcut/Tutorials","open-link.changelog":"MainArea/Shortcut/WhatSNew","open-link.blog":"MainArea/Shortcut/Blog","language.0":"MainArea/Shortcut/English","language.1":"MainArea/Shortcut/Deutsch","language.2":"MainArea/Shortcut/中文","language.3":"MainArea/Shortcut/Português","language.4":"MainArea/Shortcut/Español","language.5":"MainArea/Shortcut/Français","language.6":"MainArea/Shortcut/Polski","language.7":"MainArea/Shortcut/Русский","language.8":"MainArea/Shortcut/Türkçe","language.9":"MainArea/Shortcut/Čeština","language.10":"MainArea/Shortcut/繁體中文","language.11":"MainArea/Shortcut/Italiano","language.12":"MainArea/Shortcut/日本語","language.13":"MainArea/Shortcut/Nederlands","open-welcome-screen":"MainArea/Shortcut/ShowWelcomeScreen","check-for-updates":"MainArea/Shortcut/CheckForUpdates","developer-details":"MainArea/Shortcut/SendDeveloperDetails","help.purchase":"MainArea/Shortcut/PurchasePro","example-files":"MainArea/Shortcut/ExploreExampleFiles"},toolbar:{"use-coupon-action":"MainArea/Toolbar/UseCoupon","file.new":"MainArea/Toolbar/NewDesign","file.open-from-template":"MainArea/Toolbar/NewDesignFromTemplate","file.new.clipboard":"MainArea/Toolbar/NewFromClipboard","file.open":"MainArea/Toolbar/OpenFile","gravit-cloud.open":"MainArea/Toolbar/OpenFromCloud","file.open-recent":"MainArea/Toolbar/NoRecentFiles","file.save":"MainArea/Toolbar/Save","file.save-as.gvdesign":"MainArea/Toolbar/DownloadFile","gravit-cloud.save-as":"MainArea/Toolbar/SaveToCloud","cloud.sync.sync-to-cloud":"MainArea/Toolbar/SyncToCloud","cloud.sync.unsync-from-cloud":"MainArea/Toolbar/UnsyncFromCloud","cloud.sync.info":"MainArea/Toolbar/LastSyncedAt11197010000Am","gravit-versions-history":"Pro/MainArea/Toolbar/ShowVersionHistory","file.save-all":"MainArea/Toolbar/SaveAll","file.place-import":"MainArea/Toolbar/PlaceImage","file.import-image-from-ios-photos":"MainArea/Toolbar/PlaceImage/Photos","file.import-image-from-ios-files":"MainArea/Toolbar/PlaceImage/Files","file.link-import":"MainArea/Toolbar/LinkImage","font.import":"Pro/MainArea/Toolbar/AddFonts","file.export":"Pro/MainArea/Toolbar/AdvancedExport","file.save-as.png":"MainArea/Toolbar/PngImagePng","file.save-as.jpg":"MainArea/Toolbar/JpegImageJpg","file.save-as.svg":"MainArea/Toolbar/ScalableVectorGraphicsSvg","file.save-as.pdf":"Pro/MainArea/Toolbar/300Dpi","file.export.pdf":"Pro/MainArea/Toolbar/AdvancedOptions","file.share":"MainArea/Toolbar/ShareFile","file.print":"MainArea/Toolbar/Print","file.quit":"MainArea/Toolbar/Quit","edit.undo":"MainArea/Toolbar/Undo","edit.redo":"MainArea/Toolbar/Redo","edit.cut":"MainArea/Toolbar/Cut","edit.copy":"MainArea/Toolbar/Copy","paste.paste":"MainArea/Toolbar/Paste","edit.paste.in-place":"MainArea/Toolbar/PasteInPlace","edit.paste.inside":"MainArea/Toolbar/PasteInsideSelection","edit.paste.here":"MainArea/Toolbar/PasteHere","edit.paste.style":"MainArea/Toolbar/PasteStyle","edit.delete":"MainArea/Toolbar/Delete","edit.duplicate":"MainArea/Toolbar/Duplicate","edit.edit":"MainArea/Toolbar/EditSelection","edit.select-all":"MainArea/Toolbar/SelectAll","edit.deselect-all":"MainArea/Toolbar/DeselectAll","edit.invert-selection":"MainArea/Toolbar/InvertSelection","edit.selectbyfonttype":"MainArea/Toolbar/SelectByFontType","edit.settings":"MainArea/Toolbar/Settings","arrange.order.send-front":"MainArea/Toolbar/BringToFront","arrange.order.bring-forward":"MainArea/Toolbar/BringForward","arrange.order.send-backward":"MainArea/Toolbar/SendBackward","arrange.order.send-back":"MainArea/Toolbar/SendToBack","arrange.align.align-left":"MainArea/Toolbar/AlignLeft","arrange.align.align-center":"MainArea/Toolbar/AlignCenter","arrange.align.align-right":"MainArea/Toolbar/AlignRight","arrange.align.align-top":"MainArea/Toolbar/AlignTop","arrange.align.align-middle":"MainArea/Toolbar/AlignMiddle","arrange.align.align-bottom":"MainArea/Toolbar/AlignBottom","arrange.align.align-justify-horizontal":"MainArea/Toolbar/SameWidth","arrange.align.align-justify-vertical":"MainArea/Toolbar/SameHeight","arrange.distribute.horizontal":"MainArea/Toolbar/DistributeHorizontally","arrange.distribute.vertical":"MainArea/Toolbar/DistributeVertically","arrange.snap-unit.full":"MainArea/Toolbar/SnapToFullUnits","arrange.snap-unit.half":"MainArea/Toolbar/SnapToHalfUnits","arrange.transform.rotate-45-left":"MainArea/Toolbar/Rotate45Left","arrange.transform.rotate-90-left":"MainArea/Toolbar/Rotate90Left","arrange.transform.rotate-180-left":"MainArea/Toolbar/Rotate180Left","arrange.transform.rotate-45-right":"MainArea/Toolbar/Rotate45Right","arrange.transform.rotate-90-right":"MainArea/Toolbar/Rotate90Right","arrange.transform.rotate-180-right":"MainArea/Toolbar/Rotate180Right","arrange.transform.flip-vertical":"MainArea/Toolbar/FlipVertical","arrange.transform.flip-horizontal":"MainArea/Toolbar/FlipHorizontal","modify.group":"MainArea/Toolbar/GroupSelection","modify.clip":"MainArea/Toolbar/ClipSelection","modify.split":"MainArea/Toolbar/UngroupSelection","modify.mask-with-shape":"MainArea/Toolbar/MaskWithShape","modify.crop":"MainArea/Toolbar/ConfirmCropping","modify.cancel-crop":"MainArea/Toolbar/CancelCropping","modify.merge":"MainArea/Toolbar/CreateCompound","modify.merge.op-1":"MainArea/Toolbar/Union","modify.merge.op-2":"MainArea/Toolbar/Difference","modify.merge.op-3":"MainArea/Toolbar/Intersect","modify.merge.op-4":"MainArea/Toolbar/Subtract","modify.createnestedcompound":"MainArea/Toolbar/CreateNestedCompound","modify.join-paths":"MainArea/Toolbar/JoinPaths","modify.split-path":"MainArea/Toolbar/SplitPath","modify.converttopath":"MainArea/Toolbar/ConvertToPath","modify.converttorawpath":"MainArea/Toolbar/ConvertToRawPath","modify.ouline":"MainArea/Toolbar/ConvertToOutline","modify.offset":"MainArea/Toolbar/ExpandShrink","modify.vectorize":"MainArea/Toolbar/VectorizeBorder","modify.bmp2path":"MainArea/Toolbar/VectorizeImage","modify.attachToPath":"MainArea/Toolbar/AttachTextToPath","modify.detachFromPath":"MainArea/Toolbar/DetachTextFromPath","modify.simplify":"MainArea/Toolbar/SimplifyPath","modify.connect-lines":"MainArea/Toolbar/ConnectPathsLines","modify.split-line":"MainArea/Toolbar/BreakCurve","modify.reverse-order":"MainArea/Toolbar/ReverseOrder","modify.createsymbol":"MainArea/Toolbar/CreateSymbol","modify.detachsymbol":"MainArea/Toolbar/DetachSymbolInstance","modify.resetinstance":"MainArea/Toolbar/ResetInstance","modify.path2bmp":"MainArea/Toolbar/Flatten","view.zoom.original":"MainArea/Toolbar/OriginalView","view.zoom.fit-selection":"MainArea/Toolbar/FitSelection","view.zoom.fit-current-layer":"MainArea/Toolbar/FitLayer","view.zoom.fit.all":"MainArea/Toolbar/FitAll","view.magnification.6":"MainArea/Toolbar/6","view.magnification.12":"MainArea/Toolbar/12","view.magnification.25":"MainArea/Toolbar/25","view.magnification.50":"MainArea/Toolbar/50","view.magnification.66":"MainArea/Toolbar/66","view.magnification.100":"MainArea/Toolbar/100","view.magnification.150":"MainArea/Toolbar/150","view.magnification.200":"MainArea/Toolbar/200","view.magnification.300":"MainArea/Toolbar/300","view.magnification.400":"MainArea/Toolbar/400","view.magnification.800":"MainArea/Toolbar/800","view.magnification.1600":"MainArea/Toolbar/1600","view.magnification.3200":"MainArea/Toolbar/3200","view.magnification.6400":"MainArea/Toolbar/6400","view.magnification.12800":"MainArea/Toolbar/12800","view.magnification.25600":"MainArea/Toolbar/25600","view.zoom.in":"MainArea/Toolbar/ZoomIn","zoom.out":"MainArea/Toolbar/ZoomOut","view.outline-view":"MainArea/Toolbar/OutlineView","view.fast-view":"MainArea/Toolbar/FastView","view.canvas.show-rulers":"MainArea/Toolbar/ShowRulers","view.canvas.show-guide-lines":"MainArea/Toolbar/ShowGuideLines","view.canvas.show-symbol-labels":"MainArea/Toolbar/ShowSymbolLabels","view.canvas.show-grid":"MainArea/Toolbar/ShowGrid","view.canvas.show-slices":"MainArea/Toolbar/ShowSlices","view.canvas.show-effects":"MainArea/Toolbar/ShowEffects","view.toggle-snap":"MainArea/Toolbar/UseSnapping","view.toggle-snapzones":"MainArea/Toolbar/UseSnapZones","view.toggle-guide.guide.grid":"MainArea/Toolbar/SnapToGrid","view.toggle-guide.guide.guide-lines":"MainArea/Toolbar/SnapToGuideLines","view.toggle-guide.guide.full-pixels":"MainArea/Toolbar/SnapToFullPixels","view.toggle-guide.guide.points":"MainArea/Toolbar/SnapToAnchorPoints","view.toggle-guide.guide.bbox":"MainArea/Toolbar/SnapToShapes","view.toggle-guide.guide.scene":"MainArea/Toolbar/SnapToPages","view.toggle-sidebar.inspector":"MainArea/Toolbar/ShowInspectorPanel","view.toggle-sidebar.outline":"MainArea/Toolbar/ShowLayersPanel","view.toggle-sidebar.library":"MainArea/Toolbar/ShowLibrariesPanel","view.toggle-sidebar.symbols":"MainArea/Toolbar/ShowSymbolsPanel","view.clone":"MainArea/Toolbar/NewView","view.play":"MainArea/Toolbar/PlayPresent","view.fullscreen":"MainArea/Toolbar/ToggleFullscreen","open-link.contact-us":"MainArea/Toolbar/ContactUs","open-link.user-guide":"MainArea/Toolbar/UserGuide","open-link.tutorials":"MainArea/Toolbar/Tutorials","open-link.changelog":"MainArea/Toolbar/WhatSNew","open-link.blog":"MainArea/Toolbar/Blog","language.0":"MainArea/Toolbar/English","language.1":"MainArea/Toolbar/Deutsch","language.2":"MainArea/Toolbar/中文","language.3":"MainArea/Toolbar/Português","language.4":"MainArea/Toolbar/Español","language.5":"MainArea/Toolbar/Français","language.6":"MainArea/Toolbar/Polski","language.7":"MainArea/Toolbar/Русский","language.8":"MainArea/Toolbar/Türkçe","language.9":"MainArea/Toolbar/Čeština","language.10":"MainArea/Toolbar/繁體中文","language.11":"MainArea/Toolbar/Italiano","language.12":"MainArea/Toolbar/日本語","language.13":"MainArea/Toolbar/Nederlands","open-welcome-screen":"MainArea/Toolbar/ShowWelcomeScreen","check-for-updates":"MainArea/Toolbar/CheckForUpdates","developer-details":"MainArea/Toolbar/SendDeveloperDetails","help.purchase":"MainArea/Toolbar/PurchasePro","example-files":"MainArea/Toolbar/ExploreExampleFiles","view.toggle-touch.on":"MainArea/MenuBar/View/TouchInterface","view.toggle-touch.off":"MainArea/MenuBar/View/DisableTouchInterface"},confirmationdialog:{},windowalert:{"file.save":"CloseWindowAlertDialog/Save"},dimensionproperties:{"arrange.distribute.horizontal":"MainArea/Inspector/DistributeAlign/DistributeHorizontal","arrange.distribute.vertical":"MainArea/Inspector/DistributeAlign/DistributeVertical","arrange.align.align-left":"MainArea/Inspector/DistributeAlign/AlignLeft","arrange.align.align-center":"MainArea/Inspector/DistributeAlign/AlignCenter","arrange.align.align-right":"MainArea/Inspector/DistributeAlign/AlignRight","arrange.align.align-top":"MainArea/Inspector/DistributeAlign/AlignTop","arrange.align.align-middle":"MainArea/Inspector/DistributeAlign/AlignMiddle","arrange.align.align-bottom":"MainArea/Inspector/DistributeAlign/AlignBottom","arrange.align.align-justify-horizontal":"MainArea/Inspector/DistributeAlign/AlignJustifyHorizontal","arrange.align.align-justify-vertical":"MainArea/Inspector/DistributeAlign/AlignJustifyVertical"},alignproperties:{"arrange.distribute.horizontal":"MainArea/Inspector/DistributeAlign/DistributeHorizontal","arrange.distribute.vertical":"MainArea/Inspector/DistributeAlign/DistributeVertical","arrange.align.align-left":"MainArea/Inspector/DistributeAlign/AlignLeft","arrange.align.align-center":"MainArea/Inspector/DistributeAlign/AlignCenter","arrange.align.align-right":"MainArea/Inspector/DistributeAlign/AlignRight","arrange.align.align-top":"MainArea/Inspector/DistributeAlign/AlignTop","arrange.align.align-middle":"MainArea/Inspector/DistributeAlign/AlignMiddle","arrange.align.align-bottom":"MainArea/Inspector/DistributeAlign/AlignBottom","arrange.align.align-justify-horizontal":"MainArea/Inspector/DistributeAlign/AlignJustifyHorizontal","arrange.align.align-justify-vertical":"MainArea/Inspector/DistributeAlign/AlignJustifyVertical"},outlinesidebar:{"view.zoom.fit.all":"MainArea/LayersTab/ClickToFit","view.zoom.fit-selection":"SaveFailedDialog/ClickToFitSelection"},savefailed:{"file.save-as.gvdesign":"SaveFailedDialog/TryAgain","file.save-as.cdrapp":"SaveFailedDialog/TryAgain"},unsavedhandler:{"file.save":"CloseAppAlertDialog/Save"},failedalertdialog:{"file.save":"FailedAlertDialog/TryAgainClick"}},cancelled:{anonymous:"ActionCancelled/$VALUE"},tooltips:{upgradetopro:{"gravit-versions-history":"MainArea/Tooltips/UpgradeToPro/ShowVersionHistory","font.import":"MainArea/Tooltips/UpgradeToPro/FileImport/AddFonts","file.export":"MainArea/Tooltips/UpgradeToPro/FileExport/AdvancedExport","file.save-as.pdf.300":"MainArea/Tooltips/UpgradeToPro/FileExport/PdfDocumentPdf/300DPI","file.export.pdf":"MainArea/Tooltips/UpgradeToPro/FileExport/PdfDocumentPdf/AdvancedOptions","view.toggle-touch":"MainArea/Tooltips/UpgradeToPro/ToggleTouch"}}},toolbar:{click:{menu:{select:"MainArea/Toolbar/Select",knife:"MainArea/Toolbar/Knife",shape:"MainArea/Toolbar/Shape",pen:"MainArea/Toolbar/Pen",text:"MainArea/Toolbar/Text",undoopen:"MainArea/Toolbar/Undo/Open",undoclick:"MainArea/Toolbar/Undo/Click"},share:"MainArea/Toolbar/Share"},nonprotriespro:{share:"NonProTriesPro/MainArea/Toolbar/Share"},activate:{tool:{Pointer:"MainArea/Toolbar/Select/Pointer",Subselect:"MainArea/Toolbar/Select/Subselect",Lasso:"MainArea/Toolbar/Select/Lasso",Layer:"MainArea/Toolbar/Select/Layer",Slice:"MainArea/Toolbar/Select/Slice",Pen:"MainArea/Toolbar/Path/Pen",Bezigon:"Pro/MainArea/Toolbar/Path/Bezigon",Knife:"MainArea/Toolbar/Knife/Knife",Freehand:"MainArea/Toolbar/Path/Freehand","Freehand shaping":"MainArea/Toolbar/Knife/Freehand shaping",Line:"MainArea/Toolbar/Shape/Line",Rectangle:"MainArea/Toolbar/Shape/Rectangle",Ellipse:"MainArea/Toolbar/Shape/Ellipse",Polygon:"MainArea/Toolbar/Shape/Polygon",Triangle:"MainArea/Toolbar/Shape/Triangle",Star:"MainArea/Toolbar/Shape/Star",Text:"MainArea/Toolbar/Insert/Text",Pan:"MainArea/Toolbar/View/Pan",Zoom:"MainArea/Toolbar/View/Zoom","Show Comments":"MainArea/Toolbar/ShowComments","Hide Comments":"MainArea/Toolbar/HideComments"}},zoom:{"manual-input":"MainArea/Toolbar/Zoom/ManualInput"}},filespanel:{export:{"cdr-ok":"CloudDialog/CDRFileSaveSuccess","cdr-failed":"CloudDialog/CDRFileSaveFailed"},create:{cloudfolder:"CloudDialog/Toolbar/CreateNewFolder"},maximize:{cloudfile:"CloudDialog/Header/Maximize"},minimize:{cloudfile:"CloudDialog/Header/Minimize"},close:{cloudfile:"CloudDialog/Header/Close"},delete:{cloud:"CloudDialog/FilesPanel/Context/Delete","cloud-multiple":"CloudDialog/FilesPanel/Context/DeleteMultiple"},cancelsave:{cloud:"CloudDialog/Footer/CancelSave"},"go-to-parent":{cloudfolder:"CloudDialog/Toolbar/Back"},"go-to-root":{cloudfolder:"CloudDialog/Toolbar/ReturnToMain"},download:{"multiple-files":"CloudDialog/Footer/Download",file:"CloudDialog/Footer/Download"},open:{cloudfile:"CloudDialog/File/DblClick",cloudfolder:"CloudDialog/Folder/DblClick",examplefile:"CloudDialog/Open/ExampleFile/$VALUE"},"format-filter":{on:"CloudDialog/Format/Filter/On/$VALUE",off:"CloudDialog/Format/Filter/Off/$VALUE",clear:"CloudDialog/Format/Filter/Clear"},select:{cloudfile:"CloudDialog/File/Select",cloudfolder:"CloudDialog/Folder/Select"},copy:{cloud:"CloudDialog/FilesPanel/Context/Copy","cloud-multiple":"CloudDialog/FilesPanel/Context/CopyMultiple"},cut:{cloud:"CloudDialog/FilesPanel/Context/Cut","cloud-multiple":"CloudDialog/FilesPanel/Context/CutMultiple"},"paste-from-copy":{cloud:"CloudDialog/Footer/PasteFromCopy"},"paste-from-cut":{cloud:"CloudDialog/Footer/PasteFromCut"},save:{cloudfile:"CloudDialog/SaveAs/$VALUE"},focus:{"filename-input":"CloudDialog/FilesPanel/FocusFilenameInput"},"expand-collapse":{cloudfolder:"CloudDialog/FilesPanel/ExpandCollapseFolderContent"},move:"CloudDialog/File/DragNDrop"},cloudtemplates:{click:{backbutton:"WelcomeScreen/Templates/$VALUE/Back"},add:"WelcomeScreen/Templates/$ACTION/$VALUE",load:{template:"WelcomeScreen/Templates/$VALUE"},switch:{size:"WelcomeScreen/Templates/LargePreview/$VALUE"}},savealert:{"save-failed":{"click-save-local":"SaveAlertDialog/TrySaveLocal","dont-save-local":"SaveAlertDialog/AbortSave"}},librarypanel:{click:{backtotop:"MainArea/Libraries/Click/BackToTop",search:"MainArea/Libraries/Search/$VALUE"},change:{category:"MainArea/Libraries/$VALUE"},download:{image:"MainArea/Libraries/DownloadImage"},search:{category:"MainArea/Libraries/$VALUE"}},newfile:{click:{save:"CloudDialog/NewFilePrompt",close:"CloudDialog/NewFilePrompt"},enter:{save:"CloudDialog/NewFilePrompt"}},cornertypes:{click:{open:"MainArea/Inspector/Appearance/Corners",change:"MainArea/Inspector/Appearance/Corners/$VALUE"}},designerstyle:{click:{create:"MainArea/Inspector/StyleEditor/ApplyCreate",finish:"MainArea/Inspector/StyleEditor/FinishCreateStyle",createnewstyle:"MainArea/Inspector/StyleEditor/CreateNewStyle",organize:"MainArea/Inspector/StyleEditor/Organize",openpanel:"Pro/MainArea/Inspector/StyleEditor/Open",assign:"MainArea/Inspector/StyleEditor/Assign",disconnect:"MainArea/Inspector/StyleEditor/Disconnect",open:"Pro/MainArea/Inspector/StyleEditor/Open"},nonprotriespro:{openpanel:"NonProTriesPro/MainArea/Inspector/StyleEditor/Open"}},eyedropper:{click:{pick:"MainArea/Inspector/PatternChooser/EyeDropper"}},fonts:{expand:{textfield:"MainArea/Inspector/Appearance/Fonts/OpenAvailableFonts"},click:{tab:"MainArea/Inspector/Appearance/Fonts/ClickTab/$VALUE",protab:"Pro/MainArea/Inspector/Appearance/Fonts/ClickTab/$VALUE"},nonprotriespro:{protab:"NonProTriesPro/MainArea/Inspector/Appearance/Fonts/ClickTab/$VALUE"}},fontspanel:{click:{deletefont:"MainArea/Inspector/Appearance/Fonts/DeleteFont/$VALUE",setfont:"MainArea/Inspector/Appearance/Fonts/ChooseFont/$VALUE"}},annotations:{deselect:{"all-annotations":"MainArea/AnnotationsTab/Annotations/DeselectAll"},select:{annotation:"MainArea/AnnotationsTab/Annotations/Select"},settings:{"show-resolved":"MainArea/Annotations/Settings/ShowResolved/$VALUE","resolve-all":"MainArea/Annotations/Settings/ResolveAll",notifications:{all:"MainArea/Annotations/Settings/Notification/All",assigned:"MainArea/Annotations/Settings/Notifications/Assigned",none:"MainArea/Annotations/Settings/Notifications/None"}},open:{patternchooser:"MainArea/Annotations/$VALUE/PatternChooser/Open"},click:{"toolbar-btn":"MainArea/Annotations/$VALUE",eyedropper:"MainArea/Annotations/$VALUE/Pick"},toggle:{page:"MainArea/Annotations/Page/$VALUE"},"line-width":"MainArea/Annotations/$VALUE/LineWidth","border-marker":{head:"MainArea/Annotations/Arrow/StartArrow/$VALUE",tail:"MainArea/Annotations/Arrow/EndArrow/$VALUE"}},collabtextpanel:{"bottom-bar":{"back-to-editing":"MainArea/CoText/BottomBar/BackToEditing","preview-changes":"MainArea/CoText/BottomBar/PreviewChanges","finish-editing":"MainArea/CoText/BottomBar/FinishEditing","send-changes":"MainArea/CoText/BottomBar/SendChanges","request-access":"MainArea/CoText/BottomBar/NoEditMsg/RequestAccess","file-update":"MainArea/CoText/BottomBar/UpdatedFileMsg/UpdateNow","cancel-file-update":"MainArea/CoText/BottomBar/UpdatedFileMsg/Cancel","file-locked":"MainArea/CoText/BottomBar/LockedFile"},"request-dialog":{"save-edits":"MainArea/CoText/RequestAccessDialog/SaveEdits","discard-edits":"MainArea/CoText/RequestAccessDialog/DiscardEdits",decline:"MainArea/CoText/RequestAccessDialog/Decline"},"changes-dialog":{"save-edits":"MainArea/CoText/ChangesDialog/SaveEdits","discard-edits":"MainArea/CoText/RequestAccessDialog/DiscardEdits"}},"unsupported-dialog":{open:"MainArea/UnsupportedObjDialog",click:{option:"MainArea/UnsupportedObjDialog/Option/$VALUE",details:"MainArea/UnsupportedObjDialog/Details",cancel:"MainArea/UnsupportedObjDialog/Cancel",submit:"MainArea/UnsupportedObjDialog/Submit"}},layers:{click:{"symbol-reset":"MainArea/LayersTab/Layers/ResetSymbol"},change:{locktype:"MainArea/LayersTab/Layers/ToggleLock"},toggle:{visibility:"MainArea/LayersTab/Layers/ToggleVisibility",outline:"MainArea/LayersTab/Layers/ToggleOutline"},deselect:{"all-layers":"MainArea/LayersTab/Layers/DeselectAll"},insert:{layer:"MainArea/LayersTab/Layers/InsertLayer"},start:{drag:"MainArea/LayersTab/Layers/StartDrag"},select:{layer:"MainArea/LayersTab/Layers/Select","collab-text":"MainArea/LayersTab/Layers/Select/CoText"},delete:{"layer-or-item":"MainArea/LayersTab/Layers/Delete"}},pages:{change:{lock:"MainArea/LayersTab/Pages/ToggleLock",visibility:"MainArea/LayersTab/Pages/ToggleVisibility","multipage-mode":"MainArea/LayersTab/Pages/ToggleMultipage"},insert:{page:"MainArea/LayersTab/Pages/Insert"},delete:{page:"MainArea/LayersTab/Pages/Delete"},start:{drag:"MainArea/LayersTab/Pages/StartDrag"},select:{page:"MainArea/LayersTab/Pages/Select"}},reviewdocker:{open:{"status-history":"MainArea/Annotations/Design/StatusHistory"},design:"MainArea/Annotations/Design/$VALUE",share:"MainArea/Annotations/Design/Share",nonprotriespro:{share:"NonProTriesPro/MainArea/Annotations/Design/Share"}},replydocker:{"add-reply":"MainArea/Annotations/$VALUE/Reply/Add","cancel-reply":"MainArea/Annotations/$VALUE/Reply/Cancel",mention:{"select-user":"MainArea/Annotations/$VALUE/Reply/Mention/Select","assign-user":"MainArea/Annotations/$VALUE/Reply/Mention/Assign"}},commentdocker:{"add-btn":"MainArea/Annotations/$VALUE/Comment/Add","edit-btn":"MainArea/Annotations/$VALUE/Comment/Edit","cancel-btn":"MainArea/Annotations/$VALUE/Comment/Cancel",option:{resolve:"MainArea/Annotations/$VALUE/Comment/Option/Resolve",reopen:"MainArea/Annotations/$VALUE/Comment/Option/Reopen",add:"MainArea/Annotations/$VALUE/Comment/Option/Add",edit:"MainArea/Annotations/$VALUE/Comment/Option/Edit",delete:"MainArea/Annotations/$VALUE/Comment/Option/Delete","copy-permalink":"MainArea/Annotations/$VALUE/Comment/Option/CopyPermalink"},mention:{"select-user":"MainArea/Annotations/$VALUE/Comment/Mention/Select","assign-user":"MainArea/Annotations/$VALUE/Comment/Mention/Assign"}},persona:{click:{"activate-button":"MainArea/Toolbar/Persona/Activate"}},pivot:{click:{"change-button":"MainArea/Inspector/TransformTool/CopiesSmallRectClick"}},symbol:{click:{select:"MainArea/SymbolsTab/Select",focus:"MainArea/SymbolsTab/Focus",createnewsymbol:"MainArea/SymbolsTab/CreateNewSymbol"}},unitbox:{border:{button:"MainArea/Inspector/Borders/ExpandWidthUnitChooser"},effects:{button:"MainArea/Inspector/Effects/ExpandUnitChooser"},text:{button:"MainArea/Inspector/Text/ExpandTextSizeUnitChooser"}},profile:{click:{"open-button":"MainArea/Toolbar/Profile/Open","signout-button":"MainArea/Toolbar/Profile/Logout","purchase-pro":"MainArea/Toolbar/Profile/PurchasePRO"}},font:{downloaded:{closebutton:"MainArea/DownloadFonts/Close"}},document:{open:{cdr:"OpenFile/CDR",svg:"OpenFile/SVG",eps:"Pro/OpenFile/EPS",pdf:"OpenFile/PDF",ai:"Pro/OpenFile/AI",sketch:"Pro/OpenFile/Sketch",jpg:"OpenFile/JPG",jpeg:"OpenFile/JPG",png:"OpenFile/PNG"},nonprotriespro:{eps:"NonProTriesPro/OpenFile/EPS",ai:"NonProTriesPro/OpenFile/AI",sketch:"NonProTriesPro/OpenFile/Sketch"},import:{"cdr-ok":"CDRImportOK","cdr-failed":"CDRImportFailed/$VALUE"},save:{cdr:"SaveCDRFile"},export:{"cdr-ok":"CDRFileSaveOK","cdr-failed":"CDRFileSaveError/$VALUE"},drop:{file:"MainArea/Canvas/DropFile"},canvas:{"select-collab-text":"MainArea/Canvas/Select/CoText"}},appearance:{toggle:{evenodd:{activate:"MainArea/Inspector/Appearance/EvenOdd",deactivate:"MainArea/Inspector/Appearance/NonZero"}},change:{opacity:"MainArea/Inspector/Appearance/Opacity",blending:"MainArea/Inspector/Appearance/Blending/$VALUE"},click:{stylebutton:"MainArea/Inspector/Appearance/StyleSync"}},booleanops:{click:{merge:"MainArea/Inspector/Appearance/Compound/Merge",intersect:"MainArea/Inspector/Appearance/Compound/Intersect",difference:"MainArea/Inspector/Appearance/Compound/Difference",subtract:"MainArea/Inspector/Appearance/Compound/Subtract",unkn:"MainArea/Inspector/Appearance/Compound/Unknown"}},border:{change:{miterlimit:"MainArea/Inspector/Borders/MiterLimit",dash:"MainArea/Inspector/Borders/Dash",markersposition:"MainArea/Inspector/Borders/Position",tailmarkerscalation:"MainArea/Inspector/Borders/ScaleMarker",opacity:"MainArea/Inspector/Borders/Opacity",width:"MainArea/Inspector/Borders/Width",align:"MainArea/Inspector/Borders/Align/$VALUE",cap:"MainArea/Inspector/Borders/Cap/$VALUE",join:"MainArea/Inspector/Borders/Join/$VALUE",headmarker:"MainArea/Inspector/Borders/MarkerType/$VALUE",autoscale:"MainArea/Inspector/Borders/AutoScale/$VALUE",blendmode:"MainArea/Inspector/Borders/Blending/$VALUE"},click:{paste:"MainArea/Inspector/Borders/Paste"},open:{advancedstrokepanel:"MainArea/Inspector/Borders/OpenAdvanced"},remove:{border:"MainArea/Inspector/Borders/Remove"},add:{border:"MainArea/Inspector/Borders/Add"},set:{border:"MainArea/Inspector/Borders/Select"},hide:{border:"MainArea/Inspector/Borders/Hide"},toggle:{markersoutline:"MainArea/Inspector/Borders/MarkerOutline/$VALUE"}},"filespanel-view":{copy:{cloudfile:"CloudDialog/FilesPanel/Context/Copy"},open:{"add-cloud-drive-account-dialog":"Pro/CloudDialog/Header/OpenAddCloudDrive","edit-cloud-account-dialog":"CloudDialog/Header/OpenEditCloudDrive","cloud-drive":"CloudDialog/Header/OpenCloudDrive/$VALUE","add-cloud-drive-account-form-dialog":"CloudDialog/Header/OpenAddCloudDriveAccount","cloud-pane":"CloudDialog/Header/OpenCloudAccountsMenu",cloudfile:"CloudDialog/File/DblClick",cloudfolder:"CloudDialog/FilesPanel/ContextMenu/OpenFolder"},close:{"cloud-pane":"CloudDialog/Header/CloseCloudAccountsMenu","edit-cloud-account-dialog":"CloudDialog/Header/CloseEditCloudDrive","new-cloud-account-dialog":"CloudDialog/Header/CloseAddCloudDrive","corporate-storages-pane":"CloudDialog/Header/CloseCorporateStorageMenu"},select:{"corporate-storage":"CloudDialog/Header/SelectCorporateStorage"},search:{focus:"CloudDialog/Toolbar/FocusSearch"},clear:{"search-field":"CloudDialog/Toolbar/ClearSearch",selection:"CloudDialog/File/ClearSelection"},save:{"edit-cloud-account-dialog":"CloudDialog/Header/SaveCloudDriveName/$VALUE"},cancelsave:{cloud:"CloudDialog/Footer/Cancel"},download:{"multiple-files":"CloudDialog/FilesPanel/Context/DownloadMultiple/$VALUE","multiple-files-permission-dialog":"CloudDialog/FilesPanel/Context/DownloadMultiple/PermissionDialog",cloudfile:"CloudDialog/FilesPanel/Context/Download",file:"CloudDialog/FilesPanel/Context/Download/$VALUE"},update:{"cloudfile-name":"CloudDialog/FilesPanel/File/UpdateName"},context:{cloudfile:"CloudDialog/FilesPanel/OpenFileContextMenu",cloudfolder:"CloudDialog/FilesPanel/OpenFolderContextMenu","checkin-to-sharepoint":"CloudDialog/FilesPanel/ContextMenu/CheckinToSharepoint","checkout-from-sharepoint":"CloudDialog/FilesPanel/ContextMenu/CheckoutFromSharepoint","checkout-from-sharepoint-and-open":"CloudDialog/FilesPanel/ContextMenu/CheckoutFromSharepointAndOpen","discard-checkout-from-sharepoint":"CloudDialog/FilesPanel/ContextMenu/DiscardCheckoutFromSharepoint"},"sharepoint-checkin":{cancel:"CloudDialog/CheckInDialog/Cancel",confirm:"CloudDialog/CheckInDialog/Confirm/$VALUE"},opencontext:{cloud:"CloudDialog/FilesPanel/Context/Open"},rename:{cloud:"CloudDialog/FilesPanel/Context/Rename"},cut:{cloudfile:"CloudDialog/FilesPanel/Context/Cut"},"open-cloudfolder":{"from-search":"CloudDialog/FilesPanel/Folder/DoubleClick"},delete:{cloudfile:"CloudDialog/FilesPanel/Context/Delete"},"checkin-to-sharepoint":"CloudDialog/FilesPanel/SharePointCheckIn","checkout-from-sharepoint":"CloudDialog/FilesPanel/SharePointCheckOut","checkout-from-sharepoint-and-open":"CloudDialog/FilesPanel/SharePointCheckOutAndOpen",disconnect:{"cloud-account":"CloudDialog/FilesPanel/DisconnectCloudAccount"},execute:{action:"CloudDialog/FilesPanel/ExecuteAction/$VALUE",search:"CloudDialog/Toolbar/ExecuteSearch/$VALUE"},refresh:{"file-list":"CloudDialog/FilesPanel/RefreshFilesList"},nonprotriespro:{clouddriver:"NonProTriesPro/CloudDialog/Header/OpenAddCloudDrive"},"sort-by":{cloud:{updated:"CloudDialog/Toolbar/SortByUpdated",created:"CloudDialog/Toolbar/SortByCreationDate",name:"CloudDialog/Toolbar/SortByName"}},"sort-type":{cloud:{ASCEND:"CloudDialog/Toolbar/SortAscending",DESCEND:"CloudDialog/Toolbar/SortDescending"}},sort:{cloud:"CloudDialog/Toolbar/Sort"},"view-files":{card:"CloudDialog/Toolbar/CardView",list:"CloudDialog/Toolbar/ListView"},infoPanel:{share:"CloudDialog/InfoPanel/Share","nonprotriespro-share":"NonProTriesPro/CloudDialog/InfoPanel/Share",unshare:"CloudDialog/InfoPanel/Remove","nonprotriespro-unshare":"NonProTriesPro/CloudDialog/InfoPanel/Remove"}},contextmenu:{open:{"crop-menu":"Canvas/CropContextMenu","context-menu":"Canvas/CanvasContextMenu","page-menu":"MainArea/LayersTab/Pages/ContextMenu","layer-menu":"MainArea/LayersTab/Layers/ContextMenu","fill-properties-menu":"MainArea/Inspector/Fills/ContextMenu","border-properties-menu":"MainArea/Inspector/Borders/ContextMenu","effect-properties-menu":"MainArea/Inspector/Effects/ContextMenu"},pages:{duplicate:"MainArea/LayersTab/Pages/ContextMenu/Duplicate",delete:"MainArea/LayersTab/Pages/ContextMenu/Delete",copy:"MainArea/LayersTab/Pages/ContextMenu/Copy",export:"MainArea/LayersTab/Pages/ContextMenu/Export"},fills:{delete:"MainArea/Inspector/Fills/ContextMenu/Delete",copy:"MainArea/Inspector/Fills/ContextMenu/Copy"},borders:{"advanced-settings":"MainArea/Inspector/Borders/ContextMenu/Delete",delete:"MainArea/Inspector/Borders/ContextMenu/Delete",copy:"MainArea/Inspector/Borders/ContextMenu/Copy"},effects:{"change-layer":"MainArea/Inspector/Effects/ContextMenu/ChangeLayer/$VALUE",copy:"MainArea/Inspector/Effects/ContextMenu/Copy"}},dimension:{set:{positionOrSize:"MainArea/Inspector/Dimensions/SizeOrPosition",rotation:"MainArea/Inspector/Dimensions/Rotation","anchors-horizontalstart":"MainArea/Inspector/Anchors/HorizontalStart","anchors-horizontalmiddle":"MainArea/Inspector/Anchors/Horizontal/Middle","anchors-horizontalend":"MainArea/Inspector/Anchors/Horizontal/End","anchors-verticalstart":"MainArea/Inspector/Anchors/Vertical/Start","anchors-verticalmiddle":"MainArea/Inspector/Anchors/Vertical/Middle","anchors-verticalend":"MainArea/Inspector/Anchors/Vertical/End"},change:{"transform-mode":"MainArea/Inspector/Dimensions/OpenTransformPanel"},toggle:{preserveratio:"MainArea/Inspector/Dimensions/TogglePreserveRatio"}},documentchooser:{click:{preview:{online:"DocumentChooserDialog/ChooseCloudFile",offline:"DocumentChooserDialog/ChooseLocalFile"}}},effects:{delete:{effect:"MainArea/Inspector/Effects/Delete/$VALUE"},change:{effectlayer:"MainArea/Inspector/Effects/LayersContextMenu",layer:{F:"MainArea/Inspector/Effects/FillLayer",B:"MainArea/Inspector/Effects/BorderLayer",E:"MainArea/Inspector/Effects/WholeElement",null:"MainArea/Inspector/Effects/WholeElement"},grading:"MainArea/Inspector/Effects/SelectColorGrading/$VALUE",colorgrading:"MainArea/Inspector/Effects/CustomColorGrading"},toggle:{collapse:"MainArea/Inspector/Effects/Collapse",visibility:"MainArea/Inspector/Effects/Visibility"},choose:{acv:"MainArea/Inspector/Effects/ChooseCustomColorGrading",type:"MainArea/Inspector/Effects/EffectType/$VALUE"},add:{effectdefault:"MainArea/Inspector/Effects/Add/$VALUE",proeffectdefault:"Pro/MainArea/Inspector/Effects/Add/$VALUE",effectsmenu:"MainArea/Inspector/Effects/AddEffect/$VALUE",panelbutton:"MainArea/Inspector/Effects/AddEffect/$VALUE"},nonprotriespro:{proeffectdefault:"NonProTriesPro/MainArea/Inspector/Effects/Add/$VALUE"},assign:{effectproperty:"MainArea/Inspector/Effects/AssignValue/$VALUE"},open:{effectsmenu:{main:"MainArea/Inspector/Effects/OpenEffectsMenu",more:"MainArea/Inspector/Effects/OpenMoreMenu"}}},ellipse:{change:{angle:"MainArea/Inspector/Appearance/Ellipse/Angle",type:"MainArea/Inspector/Appearance/Ellipse/Type/$VALUE"}},error:{close:{button:"ErrorHandlerDialog/Close"}},export:{open:{"size-menu":"ExportDialog/SizeMenu"},change:{"jpeg-quality":"ExportDialog/JpegQuality",decimalprecision:"Pro/ExportDialog/SVGDecimalPrecision",mode:"ExportDialog/$VALUE",documenttype:"ExportDialog/Format/$VALUE",size:"ExportDialog/Size/$VALUE","background-pattern":"ExportDialog/Background/$VALUE",colorspace:"ExportDialog/PDFColorSpace",output:"ExportDialog/Output/$VALUE"},nonprotriespro:{decimalprecision:"NonProTriesPro/ExportDialog/SVGDecimalPrecision","preserve-svg-editing-capabilities":"NonProTriesPro/ExportDialog/PreserveSVGEditing/$VALUE","layer-as-id":"NonProTriesPro/ExportDialog/LayerAsId",size:"NonProTriesPro/ExportDialog/Size","jpeg-quality":"NonProTriesPro/ExportDialog/JpegQuality","select-background":"NonProTriesPro/ExportDialog/SelectBackground","color-space":"NonProTriesPro/ExportDialog/ColorSpace","ignore-effects":"NonProTriesPro/ExportDialog/IgnoreEffects","convert-text-to-path":"NonProTriesPro/ExportDialog/ConvertTextToPath","export-all":"NonProTriesPro/ExportDialog/ExportAll","do-not-downsample-images":"NonProTriesPro/ExportDialog/DoNotDownsampleImages",export:"NonProTriesPro/ExportDialog/Export"},click:{exportall:"ExportDialog/ExportAll","layer-as-id":"Pro/ExportDialog/LayerAsId"},cancel:{button:"ExportDialog/Cancel"},toggle:{ignoreeffects:"ExportDialog/IgnoreEffects/$VALUE","convert-to-path":"ExportDialog/ConverToPath/$VALUE","preserve-svg-editing-capabilities":"Pro/ExportDialog/PreserveSVGEditing/$VALUE","do-not-downsample-images":"ExportDialog/DoNotDownsample/$VALUE"},execute:{button:"ExportDialog/Export"}},exportproperties:{click:{export:"MainArea/LayersTab/Export/DoExport",createslice:"MainArea/LayersTab/Export/CreateSlice","add-item-to-export":"MainArea/LayersTab/Export/Add","change-size":"MainArea/LayersTab/Export/ChangeSize",removeitem:"MainArea/LayersTab/Export/Remove"},cancel:{anonymous:"MainArea/LayersTab/Export/Cancel"},change:{"size-dropdown":"MainArea/LayersTab/Export/SizeDropdown"},toggle:{multiple:"MainArea/LayersTab/Export/ToggleMultiple"},format:{dropdown:"MainArea/LayersTab/Export/Format"}},fill:{open:{advancedfillpanel:"MainArea/Inspector/Fill/OpenAdvanced"},remove:{fill:"MainArea/Inspector/Fill/Remove"},add:{fill:"MainArea/Inspector/Fill/Add"},change:{opacity:"MainArea/Inspector/Fill/Opacity","blend-mode":"MainArea/Inspector/Fill/Blending/$VALUE"},hide:{show:"MainArea/Inspector/Fill/ToggleVisibility"},toggle:{"fill-rule":{enable:"MainArea/Inspector/Fill/FillRule/EvenOdd",disable:"MainArea/Inspector/Fill/FillRule/NonZero"}}},header:{remove:{tab:"MainArea/Files/Close"},change:{tab:"MainArea/Files/Change"},click:{login:"MainArea/AccountPanel/Open","more-button":"MainArea/Files/More"},contextmenu:{tab:"MainArea/Tab/ContextMenu",rename:"MainArea/Files/Rename",save:"MainArea/Files/Save","save-as":"MainArea/Files/SaveAs",share:"MainArea/Files/Share","open-shared-file":"/MainArea/Files/OpenSharedFile","version-history":"MainArea/Files/VersionHistory","advanced-export":"MainArea/Files/AdvancedExport",duplicate:"MainArea/Files/Duplicate","close-other":"MainArea/Files/CloseOther","close-all":"MainArea/Files/CloseAll"}},image:{replace:{image:"MainArea/Inspector/ImageProperties/Replace"},reset:{size:"MainArea/Inspector/ImageProperties/OrigSize"},change:{croptype:"MainArea/Inspector/ImageProperties/Crop"},update:{palette:"MainArea/Inspector/ImageProperties/Colors"}},itemproperties:{click:{through:"MainArea/Inspector/Group/ClickThrough"},toggle:{"scale-with-content":"MainArea/Inspector/ItemProperties/AutoScale/$VALUE"}},missingfonts:{keep:{fonts:"MissingFontsDialog/Keep"},replace:{fonts:"MissingFontsDialog/Replace"}},newdocumentdialog:{show:{gravitversion:"WelcomeScreen/ShowVersion"},open:{cloudfiles:"WelcomeScreen/OpenFromCloud",externallink:"WelcomeScreen/Links/$VALUE",blog:"WelcomeScreen/Blog"},click:{openrecentdocument:"WelcomeScreen/OpenRecent/Open",document:"WelcomeScreen/$VALUE",opendocument:"WelcomeScreen/OpenFromComputer","got-it-checkbox":"WelcomeScreen/GotItCheckbox","got-it":"WelcomeScreen/GotItButton",newdesign:"WelcomeScreen/NewDesign",recent:"WelcomeScreen/OpenRecent",templates:"WelcomeScreen/NewFromTemplate","example-files":"WelcomeScreen/ExampleFiles"},change:{preset:"WelcomeScreen/NewDesign/ChangePreset/$VALUE",unit:{px:"WelcomeScreen/NewDesign/Unit/Pixels",pc:"WelcomeScreen/NewDesign/Unit/Picas",cm:"WelcomeScreen/NewDesign/Unit/Centimeters",mm:"WelcomeScreen/NewDesign/Unit/Millimeters",in:"WelcomeScreen/NewDesign/Unit/Inches",pt:"WelcomeScreen/NewDesign/Unit/Points"}},new:{"custom-sized":"WelcomeScreen/NewDesign/Create","document-from-preset":"WelcomeScreen/NewDesign/$VALUE"},toggle:{"show-welcome-screen":"WelcomeScreen/NewDesign/DontShowAnymore"}},pageproperties:{preset:{size:"MainArea/Inspector/PageProperties/PageSize/$VALUE"},change:{size:"MainArea/Inspector/PageProperties/Size",rotate:"MainArea/Inspector/PageProperties/Rotate",bleeding:"MainArea/Inspector/PageProperties/Bleed",margins:"MainArea/Inspector/PageProperties/Margin",masterpages:"Pro/MainArea/Inspector/PageProperties/Master","canvas-opacity":"MainArea/Inspector/PageProperties/Opacity"},nonprotriespro:{masterpages:"NonProTriesPro/MainArea/Inspector/PageProperties/Master"},lock:{margin:"MainArea/Inspector/PageProperties/EqualMargins"},trim:{page:"MainArea/Inspector/PageProperties/Trim"},clip:{content:"MainArea/Inspector/PageProperties/Clip"}},panels:{set:{active:"Panels/Activate"}},pathproperties:{assign:{nodetype:"MainArea/Inspector/Appearance/Path/$VALUE"},modify:{closed:"MainArea/Inspector/Appearance/Path/ToggleClosed",autoscale:"MainArea/Inspector/Appearance/Path/ToggleAutoScale",x:"MainArea/Inspector/Appearance/Path/Point/x",y:"MainArea/Inspector/Appearance/Path/Point/y",corner:"MainArea/Inspector/Appearance/Path/Point/CornerSize",uniform:"MainArea/Inspector/Appearance/Path/Point/UniformCorners","point-properties":"MainArea/Inspector/Appearance/Path/PointProperties"}},patternchooser:{change:{type:"MainArea/Inspector/PatternChooser/$VALUE","color-from-colorslider":"MainArea/Inspector/PatternChooser/ColorSlider",opacity:"MainArea/Inspector/PatternChooser/Opacity","stops-order":"MainArea/Inspector/PatternChooser/ChangeStopsOrder","noise-amount":"MainArea/Inspector/PatternChooser/NoiseIntensity",noise:"MainArea/Inspector/PatternChooser/NoiseIntensity",texture:"MainArea/Inspector/PatternChooser/Texture/$VALUE",colormode:"MainArea/Inspector/PatternChooser/ColorMode/$VALUE",procolormode:"Pro/MainArea/Inspector/PatternChooser/ColorMode/$VALUE",colorinput:"MainArea/Inspector/PatternChooser/ColorInput"},nonprotriespro:{palette:"NonProTriesPro/MainArea/Inspector/PatternChooser/ActivatePalette/$VALUE",procolormode:"NonProTriesPro/MainArea/Inspector/PatternChooser/ColorMode/$VALUE"},click:{systemcolor:"MainArea/Inspector/PatternChooser/SystemColor",advanced:"MainArea/Inspector/PatternChooser/Texture/Advanced",swatch:"MainArea/Inspector/PatternChooser/ClickPalette",open:"MainArea/Inspector/PatternChooser/Open"},choose:{image:"MainArea/Inspector/PatternChooser/Texture/Browse"},paste:{texture:"MainArea/Inspector/PatternChooser/Texture/Paste"},import:{swatches:"MainArea/Inspector/PatternChooser/Swatches/Import"},export:{swatches:"MainArea/Inspector/PatternChooser/Swatches/Export"},add:{swatch:"MainArea/Inspector/PatternChooser/Swatches/Add$VALUE"},rotate:{gradient:"MainArea/Inspector/PatternChooser/RotateGradient/$VALUE"},activate:{palette:"Pro/MainArea/Inspector/PatternChooser/ActivatePalette/$VALUE"},update:{color:"MainArea/Inspector/PatternChooser/EnterHexColor"}},polygonproperties:{change:{radius:"MainArea/Inspector/Appearance/Polygon/Radius",angle:"MainArea/Inspector/Appearance/Polygon/Angle","corner-radius":"MainArea/Inspector/Appearance/Polygon/SingleCornerRadius","corners-radius":"MainArea/Inspector/Appearance/Polygon/AllCornersRadius","number-of-points":"MainArea/Inspector/Appearance/Polygon/Points","plain-edges":"MainArea/Inspector/Appearance/Polygon/ChangePlainEdges"},click:{"advanced-corners":"MainArea/Inspector/Appearance/Polygon/OpenAdvanced"},toggle:{"plain-edges":"MainArea/Inspector/Appearance/Polygon/PlainEdges","autoscale-corners":"MainArea/Inspector/Appearance/Polygon/AutoscaleCorners"}},rectangleproperties:{scale:{"individual-corners":"MainArea/Inspector/Appearance/Rectangle/Corners/InputScale"},toggle:{"individual-uniform-corners":"MainArea/Inspector/Appearance/Rectangle/Corners/ToggleLock",uniform:"MainArea/Inspector/Appearance/Rectangle/Corners/ToggleUniform","scale-corners":"MainArea/Inspector/Appearance/Rectangle/Corners/ToggleAutoscale"},input:{"corners-radius":"MainArea/Inspector/Appearance/Rectangle/Corner"},slide:{"corners-radius":"MainArea/Inspector/Appearance/Rectangle/InputCorner"},open:{advanced:"MainArea/Inspector/Appearance/Rectangle/OpenAdvanced"}},savedialog:{save:{file:"DesktopSaveChooserDialog/SaveToFile",cloud:"DesktopSaveChooserDialog/SaveToCloud"}},sceneproperties:{change:{"canvas-dpi":"MainArea/Inspector/Page/DPI/$VALUE","rect-grid-settings":"MainArea/Inspector/Page/GridSettings/$VALUE","axono-grid-settings":"MainArea/Inspector/Page/GridIsometricSettings/$VALUE","grid-mode":"MainArea/Inspector/Page/GridMode/$VALUE","color-mode":"MainArea/Inspector/Page/ColorMode/$VALUE","canvas-unit":{px:"MainArea/Inspector/Page/Unit/Pixels",mm:"MainArea/Inspector/Page/Unit/Millimeters",cm:"MainArea/Inspector/Page/Unit/Centimeters",pc:"MainArea/Inspector/Page/Unit/Picas",in:"MainArea/Inspector/Page/Unit/Inches",pt:"MainArea/Inspector/Page/Unit/Points"}},enable:{"cloud-sync":"MainArea/Inspector/Page/EnableCloudSync"},click:{"welcome-to-gravit-cloud-medium-com":"MainArea/Inspector/Page/WelcomeToGravitCloud"},toggle:{sync:"MainArea/Inspector/Page/ToggleSync/$VALUE","cloud-sync":"MainArea/Inspector/Page/EnableSync"}},settings:{toggle:{"highlight-on-hover":"AppSettings/HighlightOnHover","auto-expand-layers":"AppSettings/AutoExpandLayers","auto-save":"AppSettings/AutoSave","auto-save-warning-enabled":"AppSettings/AutoSaveWarning/Enabled/$VALUE","auto-save-not-support-for-cdr-des-reminder-enabled":"AppSettings/AutoSaveNotSupportForCDRDESReminder/Enabled/$VALUE","auto-save-enabled":"MainArea/AutosaveDialog/Enabled","auto-save-disabled":"MainArea/AutosaveDialog/Disabled","auto-save-no-entries-created-warning-enabled":"MainArea/AutoSaveNoEntriesCreatedWaring/Enabled/$VALUE","steps-debug":"AppSettings/StepsDebug",cache:"AppSettings/EnableCache","ui-toolbar-alignment":"AppSettings/LeftAlignedIcons","store-textpath":"AppSettings/SaveTextLayersAsPaths","warning-unsupported-features":"AppSettings/DisableWarningMessages","cdr-warning":"AppSettings/DisableWarningsWhileOpeningCDR","cdr-unsupported-effects":"AppSettings/DisableWarningSavingUnsupportedObjectsCDR","cdr-unsupported-effect":"AppSettings/DisableWarningEditingUnsupportedObjectsCDR","eps-outline-fonts":"AppSettings/OutlineFontsInEpsImport","enable-beta":"AppSettings/EnableBeta","disable-notifications":"AppSettings/DisableNotifications","create-backup-copy":"/AppSettings/DisableBackupCopy","disable-scrubbing":"/AppSettings/DisableScrubbing"},cancel:{settings:"AppSettings/Cancel"},save:{settings:"AppSettings/SaveChanges"},change:{"decimals-num":"AppSettings/Rounding",theme:"AppSettings/ChangeTheme/$VALUE","auto-save-interval":"AppSettings/AutoSave/Interval/$VALUE","email-notification-interval":"AppSettings/EmailNotification/Interval/$VALUE"}},sharedialog:{"invalid-email":"ShareDialog/Msg/InvalidEmail",click:{copy:"ShareDialog/CopyToClipboard",save:"ShareDialog/AllowToSave",inspect:"Pro/ShareDialog/AllowToInspect",sharing:"ShareDialog/ToggleSharing/$VALUE","native-sharing":"ShareDialog/ShareAPI"},"public-share":{role:"ShareDialog/PublicSharingMenu/Set$VALUE"},"private-share":{role:"ShareDialog/PrivateSharing/Set$VALUE",add:"ShareDialog/PrivateSharing/Add",invite:"ShareDialog/PrivateSharing/Invite",resend:"ShareDialog/PrivateSharing/ResendInvitation",cloud:"ShareDialog/PrivateSharing/NativeCloud",googledrive:"ShareDialog/PrivateSharing/ShareWithGoogleDrive",sharepoint:"ShareDialog/PrivateSharing/ShareWithSharePoint",onedrivebusiness:"ShareDialog/PrivateSharing/ShareWithOneDriveBusiness","corporate-googledrive":"ShareDialog/PrivateSharing/ShareWithGSuite","corporate-sharepoint":"ShareDialog/PrivateSharing/ShareWithMSO365","corporate-onedrivebusiness":"ShareDialog/PrivateSharing/ShareWithMSO365"},nonprotriespro:{save:"NonProTriesPro/ShareDialog/AllowToSave",inspect:"NonProTriesPro/ShareDialog/AllowToInspect"}},sliceproperties:{change:{size:"MainArea/Inspector/SliceProperties/LeftRightWidthHeight",background:"MainArea/Inspector/SliceProperties/CheckBackground"},trim:{transparent:"MainArea/Inspector/SliceProperties/TrimTransparent"}},symbolproperties:{select:{swap:"MainArea/Inspector/SymbolProperties/InstanceSwapDropdown"}},symbols:{new:{symbol:"MainArea/SymbolsTab/CreateNewSymbol"},click:{symbol:"MainArea/SymbolsTab/Click"},delete:{symbol:"MainArea/SymbolsTab/DeleteSymbol"}},textproperties:{change:{"vertical-align":"MainArea/Inspector/Appearance/Text/VerticalAlign/$VALUE",size:"MainArea/Inspector/Appearance/Text/Size",wordspacing:"MainArea/Inspector/Appearance/Text/WordSpacing",charspacing:"MainArea/Inspector/Appearance/Text/CharSpacing","line-height":"MainArea/Inspector/Appearance/Text/LineHeight","set-of-fonts":"MainArea/Inspector/Appearance/Text/SetOfFonts","paragraph-spacing":"MainArea/Inspector/Appearance/Text/ParagraphSpacing","paragraph-indent":"MainArea/Inspector/Appearance/Text/Indent","list-type":"MainArea/Inspector/Appearance/Text/List$VALUE",typography:{subscript:"MainArea/Inspector/Appearance/Text/SubScript",superscript:"MainArea/Inspector/Appearance/Text/SuperScript",ligatures:"MainArea/Inspector/Appearance/Text/Ligatures",fractions:"MainArea/Inspector/Appearance/Text/Fractions"},"language-script":"MainArea/Inspector/Appearance/Text/LanguageScript",language:"MainArea/Inspector/Appearance/Text/Language","stylistic-set":"MainArea/Inspector/Appearance/Text/StylisticSet",variation:"MainArea/Inspector/Appearance/Text/Variation",transformation:"MainArea/Inspector/Appearance/Text/Transformation/$VALUE","paragraph-align":"MainArea/Inspector/Appearance/Text/ParagraphAlign/$VALUE","auto-widthheight":"MainArea/Inspector/Appearance/Text/AutoWidthOrHeight/$VALUE","path-attachment":{direction:"MainArea/Inspector/Appearance/Text/OnPathDirection",offset:"MainArea/Inspector/Appearance/Text/OnPathOffset"},decoration:"MainArea/Inspector/Appearance/Text/Decoration/$VALUE","paragraph-spacing-unit":"MainArea/Inspector/Appearance/Text/ChangeParagraphSpacingUnit",orientation:"MainArea/Inspector/Appearance/Text/OnPathOrientation/$VALUE"},choose:{fontstyle:"MainArea/Inspector/Appearance/Text/Style"},scale:{content:"MainArea/Inspector/Appearance/Text/ScaleOnResize"},open:{"advanced-settings":"Pro/MainArea/Inspector/Appearance/Text/OpenAdvanced"},nonprotriespro:{"advanced-settings":"NonProTriesPro/MainArea/Inspector/Appearance/Text/OpenAdvanced"},hotkey:{"change-decoration":"MainArea/Inspector/Appearance/Text/HotKey/$VALUE"}},transformproperties:{open:{advanced:"MainArea/Inspector/Dimensions/Transform/AdvancedOpen"},change:{"move-x":"MainArea/Inspector/Dimensions/Transform/Move-X","move-y":"MainArea/Inspector/Dimensions/Transform/Move-Y","scale-x":"MainArea/Inspector/Dimensions/Transform/Scale-X","scale-y":"MainArea/Inspector/Dimensions/Transform/Scale-Y","rotate-up":"MainArea/Inspector/Dimensions/Transform/RotateUp","rotate-down":"MainArea/Inspector/Dimensions/Transform/RotateDown","skew-x":"MainArea/Inspector/Dimensions/Transform/Skew-X","skew-y":"MainArea/Inspector/Dimensions/Transform/Skew-Y",copies:"MainArea/Inspector/Dimensions/Transform/Copies"},apply:{transformation:"MainArea/Inspector/Dimensions/Transform/Apply"},toggle:{"autoscale-borders":"MainArea/Inspector/Dimensions/ToggleAutoScaleBorders","autoscale-corners":"MainArea/Inspector/Dimensions/ToggleAutoScaleCorners"}},"version-history-panel":{close:{panel:"VersionHistoryPanel/Close",preview:"VersionHistoryPanel/ClosePreview"},click:{"setting-icon":"VersionHistoryPanel/ContextMenu",disabled:"VersionHistoryPanel/ClickDisabled"},"show-preview":{"from-settings-menu":"VersionHistoryPanel/PreviewFromContext","from-main-panel":"VersionHistoryPanel/PreviewFromMainPanel"},"restore-version":{"from-settings-menu":"VersionHistoryPanel/Restore"},dblclick:{disabled:"VersionHistoryPanel/DblClickDisabled"},"apply-version":"VersionHistoryPanel/ApplyVersion","edit-version":"VersionHistoryPanel/EditThisVersion",open:{version:"VersionHistoryPanel/ClickItem"}},"action-cancelled":{export:{open:"CancelOpenFromCloud",new:"CancelNewFromCloud","save-as":"CancelSaveAsFromCloud"},anonymous:{"file.export":"CancelFileExport","file.open":"CancelOpenLocalFile","file.print":"CancelPrint"}},"import-placeimport":{open:{localfile:"PlaceOrImportFile/$VALUE"}},tools:{activate:{shortcut:"MainArea/Toolbar/Shortcut/$VALUE"}},frameproperties:{toggle:{frame:"MainArea/Inspector/FrameProperties/ToggleFrame"}},groupframeproperties:{toggle:{frame:"MainArea/Inspector/Group/ToggleFrame"}},sidebars:{activate:{sidebar:"MainArea/ActivateSidebar/$VALUE"}},"offline-dialog":{retry:"OfflineDialog/Retry",cancel:"OfflineDialog/Cancel"},"license-info":{click:{"activate-trial":"MainArea/Inspector/ActivateTrial","purchase-pro":"MainArea/Inspector/PurchasePRO"}},"profile-dialog":{tab:{account:"ProfileDialog/Tab/AccountPanel",purchase:"ProfileDialog/Tab/PurchasePanel","change-password":"ProfileDialog/Tab/ChangePasswordPanel"},"account-panel":{save:"ProfileDialog/AccountPanel/Save",delete:"ProfileDialog/AccountPanel/Delete","cleverbridge-link":"ProfileDialog/AccountPanel/CleverbridgeLink","account-setting-link":"ProfileDialog/AccountPanel/AccountSettingLink","update-user-name-link":"ProfileDialog/AccountPanel/UpdateUserNameLink"},"purchase-panel":{search:"ProfileDialog/PurchasePanel/Search",sort:"ProfileDialog/PurchasePanel/Sort/$VALUE","order-by":"ProfileDialog/PurchasePanel/OrderBy/$VALUE","activate-subscription":"ProfileDialog/PurchasePanel/ActivateSubscription","cancel-subscription":"ProfileDialog/PurchasePanel/CancelSubscription","cleverbridge-link":"ProfileDialog/PurchasePanel/CleverbridgeLink"},"change-password-panel":{"change-password":"ProfileDialog/ChangePasswordPanel/ChangePassword"},click:{"update-avatar":"ProfileDialog/UpdateAvatar","purchase-pro":"ProfileDialog/PurchasePRO"}},"user-name-config-dialog":{open:"UserNameConfigDialog/Open","update-user-name":"UserNameConfigDialog/Ok"},"permission-dialog":{"no-access":{open:"PermissionDialog/NoAccess","request-access":"PermissionDialog/NoAccess/RequestAccess","click-ok":"PermissionDialog/NoAccess/Ok"},"comment-access":{open:"PermissionDialog/CommentAccess","request-access":"PermissionDialog/CommentAccess/RequestPermission","click-ok":"PermissionDialog/CommentAccess/Ok"}},directlink:{template:{"social-media":"DirectLink/Template/SocialMedia/$VALUE",presentation:"DirectLink/Template/Presentation/$VALUE",poster:"DirectLink/Template/Poster/$VALUE","facebook-post":"DirectLink/Template/FacebookPost/$VALUE","blog-graphic":"DirectLink/Template/BlogGraphic/$VALUE",card:"DirectLink/Template/Card/$VALUE"},preset:{print:"DirectLink/Preset/Print/$VALUE","web-desktop":"DirectLink/Preset/WebDesktop/$VALUE","social-media":"DirectLink/Preset/SocialMedia/$VALUE",devices:"DirectLink/Preset/Devices/$VALUE","print-on-demand":"DirectLink/Preset/PrintOnDemand/$VALUE"}},"login-signup":{login:{open:"LoginSignup/Login",help:"LoginSignup/Login/Help",support:"LoginSignup/Login/Support",login:"LoginSignup/Login/Login","forgot-password":"LoginSignup/Login/ForgotYourPassword","login-facebook":"LoginSignup/Login/LoginWithFacebook","login-google":"LoginSignup/Login/LoginWithGoogle","login-microsoft":"LoginSignup/Login/LoginWithMicrosoft","create-account":"LoginSignup/Login/CreateAccount","learn-more":"LoginSignup/Login/LearnMore","buy-now":"LoginSignup/Login/BuyNow"},"forgot-password":{help:"LoginSignup/ForgotYourPassword/Help",support:"LoginSignup/ForgotYourPassword/Support","send-request":"LoginSignup/ForgotYourPassword/SendRequest","back-to-login":"LoginSignup/ForgotYourPassword/GoBackToLogin","learn-more":"LoginSignup/ForgotYourPassword/LearnMore","buy-now":"LoginSignup/ForgotYourPassword/BuyNow"},"create-account":{open:"LoginSignup/CreateAccount",help:"LoginSignup/CreateAccount/Help",support:"LoginSignup/CreateAccount/Support","back-to-login":"LoginSignup/CreateAccount/GoBackToLogin","i-agree":"LoginSignup/CreateAccount/IAgree",subscribe:"LoginSignup/CreateAccount/Subscribe","create-account":"LoginSignup/CreateAccount/CreateAccount","login-facebook":"LoginSignup/CreateAccount/LoginWithFacebook","login-google":"LoginSignup/CreateAccount/LoginWithGoogle","login-microsoft":"LoginSignup/CreateAccount/LoginWithMicrosoft","terms-of-use":"LoginSignup/CreateAccount/TermsOfUse","privacy-policy":"LoginSignup/CreateAccount/PrivacyPolicy","learn-more":"LoginSignup/CreateAccount/LearnMore",eula:"LoginSignup/CreateAccount/Eula","buy-now":"LoginSignup/CreateAccount/BuyNow"},"account-created":{"try-pro":"LoginSignup/AccountCreated/TryOutPro","trial-activated":"LoginSignup/AccountCreated/TrialActivated","get-started-free":"LoginSignup/AccountCreated/GetStartedFree","send-activation-email":"LoginSignup/AccountCreated/SendActivationEmail","learn-more":"LoginSignup/AccountCreated/LearnMore","buy-now":"LoginSignup/AccountCreated/BuyNow"}},"corel-login":{"sign-in":{open:"SignIn","forgot-password":"SignIn/ForgotPassword","sign-in":"SignIn/SignIn","learn-more":"SignIn/LearnMore"},"enterprise-sign-in":{open:"SignIn/EnterpriseSignIn",gsuite:"SignIn/Enterprise/GSuite",mso365:"SignIn/Enterprise/MSO365","go-back":"SignIn/Enterprise/Back"},"guest-sign-in":{open:"SignIn/SignInAsGuest","send-link":"SignIn/SignInAsGuest/Send","resend-link":"SignIn/SignInAsGuest/Resend"}},"open-shared":{click:{login:"OpenShared/Login","create-account":"OpenShared/CreateAccount","learn-more":"OpenShared/LearnMore"}},virtualkey:{assistantbar:{click:{5:"Touch/MainArea/AssistantBar/VirtualKey/Control",6:"Touch/MainArea/AssistantBar/VirtualKey/Shift",7:"Touch/MainArea/AssistantBar/VirtualKey/Alt",8:"Touch/MainArea/AssistantBar/VirtualKey/Left",9:"Touch/MainArea/AssistantBar/VirtualKey/Up",10:"Touch/MainArea/AssistantBar/VirtualKey/Right",11:"Touch/MainArea/AssistantBar/VirtualKey/Down"}}},touchmenu:{"go-to-master":"Touch/MainArea/ContextualMenu/GoToMaster","crop-image":"Touch/MainArea/ContextualMenu/CropImage","original-size":"Touch/MainArea/ContextualMenu/OriginalSize","replace-image":"Touch/MainArea/ContextualMenu/ReplaceImage","lock-layer":"Touch/MainArea/ContextualMenu/LockLayer","hide-layer":"Touch/MainArea/ContextualMenu/HideLayer"},"touch-dialog":{open:"MainArea/TouchDialog","unsupport-size":"MainArea/UnsupportedScreensizeDialog",click:{ok:"MainArea/TouchDialog/Ok",cancel:"MainArea/TouchDialog/Cancel"}},msteams:{open:"OpenFile",create:"NewFile","template-category":"Template Category",template:"Template"},memorywarningdialog:{open:"MainArea/LowMemoryWarning"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(782),i=n(9);const a=window&&window.location&&"localhost"===window.location.hostname,r={getAppBaseUrl:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(o.nodeEnv){case"production":return i.prodURL;case"lts":return i.ltsURL;case"rc":return i.rcURL}return o.isBeta?i.betaURL:e&&a?"http://localhost:9000":i.trunkURL}};t.default=r},function(e,t,n){"use strict";n(18),n(29);var o=n(9);const{GLocale:i,GLocaleKey:a}=n(1);function r(e){this._htmlElement=e}r.prototype.init=function(){const e=$("<div></div>").addClass("container").appendTo(this._htmlElement);$("<p></p>").html(i.getValue("GBanner","text.access-expire").replace("%link",o.CloudUtils.getYearlySubscriptionUrl(o.UTM.buildStoreCampaignParams(o.UTM.StoreCampaign.CorelVectorTrial,o.UTM.Vehicle.IPM,o.UTM.Source.APP,o.UTM.Medium.IPM)))).appendTo(e)},r.prototype.setEnabled=function(e){$("#banner").css("display",e?"none":"unset")},e.exports=r},function(e,t,n){"use strict";function o(e){this._htmlElement=e}o.prototype.init=function(){$("<div></div>").addClass("container").appendTo(this._htmlElement)},o.prototype.setEnabled=function(e){$("#overlay").css("display",e?"none":"unset")},e.exports=o},function(e,t,n){"use strict";n(3);var o=n(1);function i(e){this.item=e}o.GObject.inherit(i,o.GEvent),i.item=null,i.prototype.toString=function(){return"[Object GMenuActivateEvent]"},i.EVENT=new i,e.exports=i},function(e,t,n){"use strict";var o=n(14);n(17),n(51),n(7),n(341),n(18),n(99),n(3),n(138),n(29),n(84),n(22);var i=n(1),a=n(13),r=n(9),s=n(342),l=o(n(223)),c=o(n(325)),d=o(n(1476)),u=o(n(1477)),p=o(n(585)),g=o(n(71)),h=o(n(203)),f=o(n(78)),m=o(n(111)),y=o(n(432)),v=o(n(433)),_=o(n(840)),b=o(n(1230)),w=o(n(1232)),C=o(n(372)),x=o(n(206)),S=o(n(37)),E=o(n(841)),A=o(n(143)),T=o(n(151)),G=n(247),P=n(1492);const D=n(240);let L=null;r.LICENSE.UPGRADEABLE&&(L=n(426));const I=n(125),k=n(376),O=n(784),{InParenthesis:{NotNegativeNumberInTheEnd:F},NotNegativeNumber:R}=G.GRegex.String,M=[{title:new i.GLocaleKey("GFilesPanel","action.rename"),shortcut:null,callback:function(e,t){const n=this,o=e.getDocument(),a=o.getStorageItem();let s=!0;if(a&&(s=!(a instanceof C.default.Item)),!s)return!1;const l=()=>{const s=t.find("input"),c=e.getTitle();let d=c;a&&r.USE_EXTENSION_IN_FILENAME&&(d+="."+a.getExtension().toLowerCase()),s.off("focusout"),s.off("keypress");var u=t.find("span.cover");u.text(d),s.css("width",u.outerWidth()),s.val(c);var p=s.val(),h=!1;s.show(),u.hide(),s.focus();var f=async function(){try{s.hide(),u.show();let d,h=s.val().trim();if(h&&h!==c)if(a){if(n._updateSyncStatus(t,i.GLocale.get(new i.GLocaleKey("GCommonNames","text.synchronizing"))+"...",!0),a instanceof x.default.Item){let e=a.getFile();const c=new E.default;try{let o=0;if(c.supportsSaveCollisionFlow()){if(e.ext||(e.ext=r.FILE_FORMATS.find(e=>e.default).ext.toUpperCase()),await c.fileExists(h,e.ext,e.parent||c.getRootFolder())&&!await(e=>{let t;return t=i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.file-already-exists-on-current-location")).replace("%filename",'"'.concat(e,'"')),new Promise(e=>{S.default.confirm(t,t=>e(!!t),null,null,!1,!0,!0)})})(h))return n._updateSyncStatus(t,""),l();if(c.requiresOverwriteCollisionHandling())for(d=h;await c.fileExists(d,e.ext,e.parent||c.getRootFolder());)d="".concat(h," (").concat(++o,")")}d||(d=h),await c.renameItem(e,d)}catch(e){return console.log(">>>.error-renaming e",e),s.val(p),n._updateSyncStatus(t,i.GLocale.get(new i.GLocaleKey("GCommonNames","text.failed-to-synch")),!1,!1,!0,o.isCloudFile()),void S.default.alert(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.error-renaming")))}e.name=d}else d=h;o.setTitle(d),a.setFileName(d),gDesigner.trigger(new g.default(g.default.Type.Modified,o)),n._updateSyncStatus(t,""),u.text(d+(r.USE_EXTENSION_IN_FILENAME?"."+a.getExtension().toLowerCase():"")),s.css("width",u.outerWidth())}else e.getDocument().setTitle(h);else s.val(p)}catch(e){throw e}};s.on("focusout",(function(){h||(f(),h=!0)})).on("keypress",(function(e){13!==e.which||h||(f(),h=!0)}))};return l(),!0},stats:"header_contextmenu_rename",requiresPro:!1,isEnabled:()=>gDesigner.getApplicationManager().isEditingEnabled(),isVisible:e=>{const t=e.getDocument().getStorageItem();return!(t&&t instanceof C.default.Item)}},{separator:!0,isVisible:e=>{const t=e.getDocument().getStorageItem();return!(t&&t instanceof C.default.Item)}},{title:y.default.TITLE,shortcut:y.default.SHORTCUT,id:y.default.ID,needsAction:!0,stats:"header_contextmenu_save",icon:()=>gDesigner.getAction(y.default.ID).getIcon(),requiresPro:!1},{title:new i.GLocaleKey("GSaveAsAction","title"),shortcut:[a.GKey.Constant.SHIFT,a.GKey.Constant.META,"S"],id:()=>"".concat(v.default.ID,".").concat(v.default.Actions.SaveAs),needsAction:!0,requiresPro:!1},{separator:!0},{title:new i.GLocaleKey("GToolbar","text.share"),shortcut:null,callback:function(){gDesigner.getShareManager().share()},stats:"header_contextmenu_share",isEnabled:e=>{const t=e.getDocument().getStorageItem();return gDesigner.getApplicationManager().isShareEnabled()&&t instanceof x.default.Item},requiresPro:!1},{title:new i.GLocaleKey("GOpenSharedFileAction","title"),stats:"header_contextmenu_open-shared-file",id:()=>b.default.ID,needsAction:!0,requiresPro:!1},{title:new i.GLocaleKey("GVersionsHistoryAction","title"),shortcut:null,stats:"header_contextmenu_version-history",icon:()=>gDesigner.getAction(w.default.ID).getIcon(),id:w.default.ID,needsAction:!0,requiresPro:!0},{title:_.default.TITLE,shortcut:_.default.SHORTCUT,stats:"header_contextmenu_advanced-export",icon:()=>gDesigner.getAction(_.default.ID).getGroupIcon(),id:_.default.ID,needsAction:!0,requiresPro:!0},{title:new i.GLocaleKey("GHeader","action.context-menu.duplicate"),shortcut:null,callback:function(e){const t=e.getDocument(),n=t.getStorageItem(),o=()=>{const e=t.getScene(),n=new T.default(e.clone(null,gDesigner.getWorkspace()));t.getFileFormatVersion()&&n.setFileFormatVersion(t.getFileFormatVersion());const o=t.getTitle();let i;if(new RegExp(F).test(o)){const e=o.match(F),t=parseInt(e[0].match(R)[0]);i=o.replace(F,"(".concat(t+1,")"))}else i="".concat(o,"(1)");const a=gDesigner.getDocuments().indexOf(t);n.setTitle(i),gDesigner.addDocument(n,a+1)};n&&n instanceof x.default.Item?(()=>{const e=n.getFile().parent,o=gDesigner.getDocuments().indexOf(t),i=new E.default;i.setCurrentFolder(A.default.from({id:e})),i.copyPaste([n.getFile()]).then((function(e){let[{id:t}]=e;return i.openFile(t,o+1)}))})():o()},isEnabled:e=>{if(!gDesigner.getApplicationManager().isSavingAsEnabled())return!1;return!(e.getDocument().getStorageItem()instanceof C.default.Item)},stats:"header_contextmenu_duplicate",icon:"gravit-icon-duplicate",requiresPro:!1},{separator:!0},{title:new i.GLocaleKey("GHeader","action.context-menu.close-other"),shortcut:null,callback:function(e){const t=gDesigner.getWindows().getWindows().slice().filter(t=>t!==e);S.default.confirm(i.GLocale.get(new i.GLocaleKey("GHeader","text.close-other-tabs-confirmation")),e=>{e&&N(t)},null,null,null,!0,!0)},isEnabled:e=>gDesigner.getWindows().getWindows().slice().filter(t=>t!==e).length>0,stats:"header_contextmenu_close-other",requiresPro:!1},{title:new i.GLocaleKey("GHeader","action.context-menu.close-all"),shortcut:null,callback:function(){S.default.confirm(i.GLocale.get(new i.GLocaleKey("GHeader","text.close-all-tabs-confirmation")),e=>{e&&N(gDesigner.getWindows().getWindows().slice())},null,null,null,!0,!0)},stats:"header_contextmenu_close-all",icon:"gravit-icon-close",requiresPro:!1}];function N(e){const t=gDesigner.getWindows();for(let n=0,o=e.length;n<o;n++){const o=e[n];t.removeWindow(o)}}function B(e){this._htmlElement=e,this._menuBar=new d.default(gDesigner.getMainMenu()),this._menuBar.__which="menubar",this._personaBar=new u.default}B.prototype._personaBar=null,B.prototype._menuBar=null,B.prototype._windows=null,B.prototype._login=null,B.prototype._busy=null,B.prototype._contextMenu=null,B.prototype.getMenuBar=function(){return this._menuBar},B.prototype.init=function(){s.SHOW_BETA_BRANDING&&gDesigner.isBeta()&&$("<div></div>").css({width:"40px",backgroundColor:"#29d029",color:"#fff",font:'400 1em "Helvetica Neue", Helvetica, Arial, sans-serif',lineHeight:"1.54em",textAlign:"center",borderRadius:"4px",marginLeft:"12px",marginRight:"-5px",padding:"2px"}).text("βETA").appendTo(this._htmlElement),$("<div></div>").addClass("section menu").append(this._menuBar._htmlElement).appendTo(this._htmlElement),r.LICENSE.UPGRADEABLE&&gDesigner.getLicense().canUpgrade()&&$("<div></div>").addClass("section tryout").append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.try-out-coreldrawpp-pro")))).on("click",()=>gDesigner.activateTrialLicense()).appendTo(this._htmlElement),$("<div></div>").addClass("section persona").append(this._personaBar._htmlElement).appendTo(this._htmlElement),this._windows=$("<div></div>").addClass("section windows").append(this._createWindows()).appendTo(this._htmlElement),r.ALLOW_REARRANGE_TABS&&(0,P.allowRearrangeTabs)(this._htmlElement),this._busy=$("<div></div>").addClass("section busy").css({display:"none",color:"$(BRAND_COLOR}"}).append($("<span>").addClass("txt").css({marginRight:"4px"})).append($("<span>").css({border:"4px solid #f3f3f3",borderTop:"4px solid $(BRAND_COLOR}",borderRadius:"50%",width:"6px",height:"6px",animation:"spin 2s linear infinite"})).appendTo(this._htmlElement),this._createLoginTab().appendTo(this._htmlElement),this.updateLoginInfo(),this.checkUser(),gDesigner.addEventListener(g.default,this._documentEvent,this),gDesigner.addEventListener(I,this._settingChangedEvent,this),gDesigner.getWindows().addEventListener(p.default.WindowEvent,this._windowEvent,this),gDesigner.addEventListener(O,this._userPropertiesChangedEvent,this),gDesigner.addEventListener(k,this._applicationStateChangedEvent,this),$(document).on("networkAvailable",function(){this.checkUser()}.bind(this)),r.LICENSE.UPGRADEABLE&&gDesigner.addEventListener(L,this._licenseChangeEvent,this),this._documentStatusEvent=this._documentStatusEvent.bind(this),this._personaBar.init(),this._updateViewBasedOnPermissions()},B.prototype._updateViewBasedOnPermissions=function(){const e=gDesigner.getApplicationManager().isDocumentTabManagementEnabled();this._windows.find(".tabs").css("display",e?"":"none"),(0,P.toggleRearrangeTabsVisibility)(this._htmlElement,e)},B.prototype.relayout=function(){gDesigner.getApplicationManager().isInspectEnabled()?this._htmlElement.removeClass("lone"):this._htmlElement.addClass("lone")},B.prototype._licenseChangeEvent=function(e){r.LICENSE.UPGRADEABLE&&(e.license.isDefault()||this._htmlElement.find(".tryout").remove())},B.prototype._documentEvent=function(e){r.ALLOW_REARRANGE_TABS&&(0,P.updateTabsInterface)();var t=e.document||gDesigner.getActiveDocument(),n=this.getWindowTab(gDesigner.getWindows().getWindow(t)),o=e.type===g.default.Type.StorageItemUpdated;if(o||e.type===g.default.Type.AutoSaveSynchronized||e.type===g.default.Type.Modified){o&&this.updateWindowIcon($(".windows").find(".tab.g-active"));for(var a=e.document.getWindows(),s=0;s<a.length;++s)this._windows.find(".tab").each((function(t,n){var o=$(n);if(o.data("window")===a[s])return o.find(".title").find(".cover").html(a[s].getTitleWithExtension()+(e.document.isModified()?"*":"")),o.find(".title").find("input").val(a[s].getTitle()+(e.document.isModified()?"*":"")),!1}));e.type!==g.default.Type.Modified&&e.type!==g.default.Type.AutoSaveSynchronized||(this._updateSyncStatus(n,""),this.updateWindowIcon(n,!1,!0,t))}else e.type===g.default.Type.SynchronismUpdated||e.type===g.default.Type.AutoSaveSynchronizing?(t.isSynchronizing()||e.type===g.default.Type.AutoSaveSynchronizing)&&(this.updateWindowIcon(n,!0,!0,t),this._updateSyncStatus(n,i.GLocale.get(new i.GLocaleKey("GCommonNames","text.synchronizing"))+"...",!0)):e.type===g.default.Type.SynchronismUpdateFailed||e.type===g.default.Type.AutoSaveSynchronizationFailed?this._updateSyncStatus(n,i.GLocale.get(new i.GLocaleKey("GCommonNames","text.failed-to-synch")),!1,!1,!0,t.isCloudFile()):e.type===g.default.Type.Activated?e.document.addEventListener(h.default,this._documentStatusEvent):e.type===g.default.Type.Deactivated&&e.document.removeEventListener(h.default,this._documentStatusEvent)},B.prototype._documentStatusEvent=function(e){e.status===f.default.Loaded&&this.updateWindowIcon($(".windows").find(".tab.g-active"))},B.prototype._settingChangedEvent=function(e){"touch"!==e.key||gDesigner.isTouchEnabled()||this._menuBar.setMenu(gDesigner.getMainMenu())},B.prototype._userPropertiesChangedEvent=function(e){this.updateLoginInfo(e.user)},B.prototype._applicationStateChangedEvent=function(){this._updateViewBasedOnPermissions()},B.prototype._windowEvent=function(e){switch(e.type){case p.default.WindowEvent.Type.Added:this._addWindowTab(e.window,e.index);break;case p.default.WindowEvent.Type.Removed:this._removeWindowTab(e.window);break;case p.default.WindowEvent.Type.Activated:case p.default.WindowEvent.Type.Deactivated:this._updateActiveWindowTab()}},B.prototype._addWindowTab=function(e,t){var n=this,o=$("<div></div>").data("window",e).addClass("tab");const i=this._windows.find(".tabs").find(".tab");"number"==typeof t&&t!==i.length?o.insertBefore(i.eq(t)):o.appendTo(this._windows.find(".tabs")),o.append($("<div />").addClass("title").append($("<span />").addClass("cover").html(e.getTitleWithExtension())).append($("<input />").attr("type","text").css("display","none").val(e.getTitle()).css("width",o.find(".cover").outerWidth()))).on("click",(function(){gDesigner.stats("header_change_tab",e.getTitleWithExtension()),gDesigner.getWindows().activateWindow($(this).data("window"),!0)})),o.on("contextmenu",(function(t){t.stopPropagation(),n.handleContextMenu(e,o)})),gDesigner.getLicense().isGuest()||o.append($("<span></span>").addClass("close").html("&#x2715;").on("click",(function(e){gDesigner.stats("header_remove_tab"),e.stopPropagation(),gDesigner.getWindows().removeWindow($(this).parents(".tab").data("window"),void 0,void 0,!0)}))),this.setWindowTabEnable(gDesigner.getLicense().canAccessFreemium())},B.prototype._createLoginTab=function(){var e=$("<div/>").addClass("section login").append($("<div/>").addClass("avatar")).append($("<div/>").addClass("username").append($("<span/>"))).on("click",(function(){gDesigner.stats("header_click_login"),"yes"!==$(this).attr("has-been-clicked")&&($(this).attr("has-been-clicked","yes"),gDesigner.getUser().then(t=>{t&&!gDesigner.isAnonymous()?e.gUserLogin():m.default.performLogin(),$(this).attr("has-been-clicked","no")}))}));return e},B.prototype.checkUser=function(){return gDesigner.getUser().then(e=>{this.updateLoginInfo(e)})},B.prototype.updateLoginInfo=function(e){$(".login").css("display",e&&e.isAnonymous()?"none":""),$(".login .username").find("span").text(e?e.getFullUserName():i.GLocale.get(new i.GLocaleKey("GCommonNames","text.cloud-login"))),e?e.hasOwnPictureAvatar()?($(".login .avatar").css("background-image",'url("'+e.avatar+'")'),$(".login .avatar").removeClass("gravit-user-bonhomme"),$(".login .avatar").css({"background-color":"transparent"}),$(".login .avatar").text("")):$(".login .avatar").addClass("gravit-user-bonhomme").text(e.getUserNameInitials()).css({"background-color":e.getUserColor()}):$(".login .avatar").css("background-image","none"),$(".login .avatar").removeClass(e?"header-cloud":"user-avatar"),$(".login .avatar").addClass(e?"user-avatar":"header-cloud"),e?$(".login").addClass("user"):$(".login").removeClass("user")},B.prototype._removeWindowTab=function(e){this._windows.find(".tab").each((function(t,n){var o=$(n);if(o.data("window")===e)return o.remove(),!1}))},B.prototype._updateActiveWindowTab=function(){this._windows.find(".tab").each((function(e,t){var n=$(t);n.toggleClass("g-active",n.data("window")===gDesigner.getWindows().getActiveWindow())}))},B.prototype._createWindows=function(){return $("<div></div>").addClass("tabs")},B.prototype.getHeight=function(){return this._htmlElement[0].clientHeight},B.prototype.updateWindowIcon=function(e,t,n,o){var i=$(e).find(".header-cloud"),a=o||gDesigner.getActiveDocument();a&&(a.isCloudFile()||a.isExternalFile())||t?0===i.length&&$("<span/>").addClass("header-cloud").addClass(this._getCloudDocumentIconClass(a)).insertBefore($(e).find(".close")):n&&i.length>0?i.fadeOut(2e3,(function(){i.remove()})):i.remove()},B.prototype.showBusyIcon=function(e){this._busy.find(".txt").text(e),this._busy.css({display:"inherit"})},B.prototype.hideBusyIcon=function(){this._busy.css({display:"none"})},B.prototype._updateSyncStatus=function(e,t,n,o,i,a){var r=$(e).find(".sync-status");const s="."+D["header-cloud"];if($(e).find(s).length>0&&(n?$(e).find(s).addClass("animated"):$(e).find(s).removeClass("animated")),o&&$(e).find(s).length>0&&$(e).find(s).addClass("animated"),r&&0!==r.length||$("<span/>").addClass("sync-status").insertAfter($(e).find(".close")),$(e).find(".sync-status").text(t),i){$(e).find(".sync-status").fadeOut(2e3,(function(){$(e).find(".sync-status").remove()}));var l=$(e).find(s);l.length>0&&!a&&l.fadeOut(2e3,(function(){$(e).find(".close").css("margin-left","0px"),l.remove()}))}},B.prototype.getWindowTab=function(e){for(var t=this._windows.find(".tabs").find(".tab"),n=null,o=0;o<t.length;++o)if($(t[o]).data("window")===e){n=t[o];break}return n},B.prototype.handleContextMenu=function(e,t){var n=t.outerWidth()-10;t.addClass("context-pane-opened"),gDesigner.stats("header_contextmenu_tab","Contextmenu"),gDesigner.getWindows().activateWindow(e),this._contextMenu=this._createContextMenu(e,t),this._contextMenu.gOverlay({padding:!1,releaseOnClose:!0,clazz:"g-header-context-overlay",bottomClazz:"from-bottom",customRight:n,offsetY:-13,closeCallback:()=>{t.removeClass("context-pane-opened")}}).gOverlay("open",t)},B.prototype._createContextMenu=function(e,t){const n=new l.default,o=this;return M.map(a=>{let r,s,{title:l,callback:d,shortcut:u,requiresPro:p,separator:g,icon:h,id:f,needsAction:m,stats:y,isEnabled:v,isVisible:_}=a;const b=l instanceof i.GLocaleKey?i.GLocale.get(l):l;if(f&&(r="function"==typeof f?f():f),g){const t=n.createAddDivider();return _ instanceof Function?t.setVisible(_(e)):"boolean"==typeof _&&t.setVisible(_),t}d?s=n.createAddItem(b,()=>{d.call(o,e,t)}):(s=n.createAddItem(b),m&&s.setAction(gDesigner.getAction(r))),u&&s.setShortcutHint(u),p&&s.setPro(p,r),v instanceof Function&&s.setEnabled(v(e)),_ instanceof Function?s.setVisible(_(e)):"boolean"==typeof _&&s.setVisible(_),h&&("function"==typeof h?s.setIcon(h()):s.setIcon(h)),s.addEventListener(c.default.BeforeActivateEvent,()=>{!function(e){e&&gDesigner.stats(e);o._contextMenu.gOverlay("close"),o._contextMenu=null,n.clearItems()}(y),v&&s.setEnabled(v(e))}),s.setCaption(b)}),n.getHtmlElement()},B.prototype._getCloudDocumentIconClass=function(e){var t="",n=e.getStorageItem();switch(n?n.toString():null){case"[Object GGoogleDriveStorage.Item]":t=D["gravit-icon-googledrive-cloud-file"];break;case"[Object GSharePointStorage.Item]":t=D["gravit-icon-sharepoint-cloud-file"];break;case"[Object GOneDriveBusinessStorage.Item]":t=D["gravit-icon-onedrivebusiness-cloud-file"];break;default:t=D["gravit-icon-cloud"]}return t},B.prototype.setWindowTabEnable=function(e){$(".tab > span").css("pointer-events",e?"auto":"none")},e.exports=B},function(e,t,n){"use strict";n(3);var o=n(223),i=n(325),a=n(1134);function r(e){this._htmlElement=$("<nav></nav>").addClass("g-menu-bar"),this.setMenu(e||new o(this))}r.prototype._menu=null,r.prototype.getMenu=function(){return this._menu},r.prototype.isActive=function(){var e=a.getActiveMenu();return!!(e&&e._parent&&e._parent instanceof i)&&e._parent.getMenuBar()===this},r.prototype.getParent=function(){return null},r.prototype.setMenu=function(e){e.detach(),this._menu=e,this._menu._parent=this,this._menu._htmlElement.addClass("g-menu-root"),this._htmlElement.append(this._menu._htmlElement),e.update()},r.prototype.toString=function(){return"[Object GMenuBar]"},e.exports=r},function(e,t,n){"use strict";n(28);var o=n(1222),i=n(1226);e.exports=class{constructor(){this._htmlElement=$("<div></div>").addClass("g-persona-bar"),this._container=$("<div></div>").addClass("g-persona-container").appendTo(this._htmlElement)}init(){var e=Object.keys(o.GPersona);e.length>1&&(gDesigner.addEventListener(i,this._personaChangeEvent,this),e.forEach(e=>{var t=o.GPersona[e];$("<div></div>").data("persona",t).attr("data-title",t.name).addClass("g-persona-item").append($("<img>").attr("src",t.icon)).on("click",e=>{gDesigner.stats("persona_click_activate-button");var t=$(e.target).closest(".g-persona-item").data("persona");gDesigner.activatePersona(t)}).appendTo(this._container)}),this._activate(gDesigner.getActivePersona()))}_activate(e){this._htmlElement.find(".g-persona-item").removeClass("g-active"),this._htmlElement.find(".g-persona-item").each((function(t,n){var o=$(n);if(o.data("persona")===e)return o.addClass("g-active"),!1}))}_personaChangeEvent(e){this._activate(e.newPersona)}}},function(e,t,n){"use strict";n(18),n(3),n(255),n(29);var o=n(45),i=n(1),a=n(13),r=n(34),s=n(9),l=n(78),c=n(203),d=n(71),u=(n(162),n(430)),p=n(238),g=(n(151),n(427));const h=s.FILE_FORMATS.find(e=>e.default).ext;function f(e,t){this._container=$("<div></div>").addClass("window"),this._overlay=$("<div></div>").addClass("window-overlay").append($("<div></div>").addClass("window-overlay-container").append($("<div></div>").addClass("window-overlay-content"))),this._document=e,this._document.addEventListener(c,this._documentStatusChanged,this,void 0,void 0,!0),gDesigner.addEventListener(d,this._documentEvent,this),this._container.on("mousedown",function(e){this._view&&this._view.focus()}.bind(this)),t&&(this._isPreview=t),this._updateScene()}i.GObject.inherit(f,i.GEventTarget),f.VIEW_MARGIN=10,f.prototype._requiresViewTransformation=!0,f.prototype._container=null,f.prototype._document=null,f.prototype._view=null,f.prototype._overlay=null,f.prototype._contextMenuClientPosition=null,f.prototype._isPreview=!1,f.prototype.isPreview=function(){return this._isPreview},f.prototype.getDocument=function(){return this._document},f.prototype.getView=function(){return this._view},f.prototype.getTitle=function(){var e=this._document.getTitle(),t=this._document._windows.indexOf(this);return t>0&&(e+=":"+t.toString()),e},f.prototype.getTitleWithExtension=function(){var e=this.getTitle();if(this._document.getStorageItem()&&s.USE_EXTENSION_IN_FILENAME){const t="."+this._document.getStorageItem().getExtension().toLowerCase();if(!e.endsWith(t))return e+t}return e},f.prototype.activate=function(e){this._view&&(this._requiresViewTransformation&&(1===this._view.getZoom()&&0===this._view.getScrollX()&&0===this._view.getScrollY()||e)&&this.centerAndZoom(),this._requiresViewTransformation=!1,this._view.setRulers(gDesigner.getSetting("rulers_visible")),$("#mainframe").toggleClass("rulers",gDesigner.getWindows().getActiveWindow().getView().hasRulers()),this._view.getViewConfiguration().guideLinesVisible=gDesigner.getSetting("guide_lines_visible"),this._view.getViewConfiguration().symbolLabelsVisible=gDesigner.getSetting("symbol_labels_visible"),this._view.getViewConfiguration().gridVisible=!0,this._view.focus())},f.prototype.deactivate=function(){if(this._document){var e=this._document.getEditor();e&&e.closeInlineEditor(),this._view.cleanCache()}},f.prototype.relayout=function(e,t,n,o){if(this._view){this._container.width(e),this._container.height(t),this._view.setViewOffset(n);var i=this._view.getWidth(),a=this._view.getHeight();this._view.resize(e,t,o,()=>{i&&a&&(i!=e||a!=t)&&this._view.scrollBy((i-e)/2,(a-t)/2)})}this._overlay.css({left:(n?n[0]:0)+"px",top:(n?n[1]:0)+"px",right:(n?n[2]:0)+"px",bottom:(n?n[3]:0)+"px"})},f.prototype.release=function(){this._releaseScene(),this._releaseView(),this._document.removeEventListener(c,this._documentStatusChanged,this),gDesigner.removeEventListener(d,this._documentEvent,this),p.getInstance().releaseDocumentListener(this._document.sessionId)},f.prototype.centerAndZoom=function(){var e=this._document.getScene(),t=e.getActivePage(),n=e.getPaintBBox();if(t)if(this._view.getViewConfiguration().multiPageView){var o=t.getPosition(1),a=t.getPaintBBox(1);a&&(n=a.translated(o.getX(),o.getY()))}else if(g.CDR_ORIGIN_PROPERTY_NAME&&t.getProperty(g.CDR_ORIGIN_PROPERTY_NAME,!0)){var r=t.getContentBBox();n=r&&!r.isEmpty()?r:t.getPaintBBox()}else n=t.getPaintBBox();else e.isFixedSized()&&(n=new i.GRect(0,0,e.getProperty("w"),e.getProperty("h")));var s=this._view.getViewBox(!0);!n||n.isEmpty()||s.isEmpty()?this._view.zoomAt(new i.GPoint(0,0),1):n.getWidth()>=s.getWidth()||n.getHeight()>=s.getHeight()?this._view.zoomAll(n,!1):this._view.zoomAtCenter(n.getSide(i.GRect.Side.CENTER),1)},f.prototype.viewContainsMouse=function(e,t){if(!this._view)return!1;var n=this._view.getViewOffset(),o=n[0],i=n[1],a=this._view.getWidth()-n[2],r=this._view.getHeight()-n[3];return!(e<o||e>a||t<i||t>r)},f.prototype._releaseView=function(){this._view&&(this._view.release(),this._view=null)},f.prototype._releaseScene=function(){this._view&&this._view.getScene()&&(this._view.getScene().removeEventListener(i.GNode.AfterPropertiesChangeEvent,this._sceneAfterPropertiesChanged,this),this._view.getScene().removeEventListener(i.GNode.AfterFlagChangeEvent,this._afterFlagChangeEvent,this))},f.prototype.activateProgress=function(e,t){return this._setOverlayContent($("<div></div>").append($("<span></span>").append($("<p></p>").addClass("text").text(e)).append($("<progress>").attr({min:"0",max:"100"}).css("width","200px").val(0)).append($("<p></p>").css("display","none").addClass("progress-info"))).append($("<div></div>").append($("<button></button>").addClass("cancel-loading").css("display","none"))),t)},f.prototype.deactivateProgress=function(){this._setOverlayContent(null)},f.prototype.activateCancelLoading=function(e){var t=this;this._overlay.find(".cancel-loading").text(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.cancel-loading"))).on("click",(function(){e(),t.deactivateProgress()})).css("display","")},f.prototype._setOverlayContent=function(e,t){if(e){if(this._overlay.appendTo(this._container).find(".window-overlay-content").empty().append(e),t){var n=this;this._overlay.on("click",(function(){n._overlay.unbind("click",this),n._setOverlayContent(null)}))}}else this._overlay.remove();return this._overlay},f.prototype._documentEvent=function(e){e.type===d.Type.StorageItemUpdated&&this._updateViewConfiguration()},f.prototype._documentStatusChanged=function(e){switch(e.status){case l.Ready:this._updateScene(),gDesigner.saveStats();break;case l.Loading:case l.Saving:case l.Syncing:case l.Downloading:var t=i.GLocale.get(new i.GLocaleKey("GCommonNames","text.loading")),n=i.GLocale.get(new i.GLocaleKey("GCommonNames","text.loading-file"));e.status===l.Saving?(t=i.GLocale.get(new i.GLocaleKey("GCommonNames","text.saving")),n=i.GLocale.get(new i.GLocaleKey("GCommonNames","text.saving-file"))):e.status===l.Syncing?(t=i.GLocale.get(new i.GLocaleKey("GCommonNames","text.synchronizing")),n=i.GLocale.get(new i.GLocaleKey("GCommonNames","text.synchronizing-file"))):e.status===l.Downloading&&(t=i.GLocale.get(new i.GLocaleKey("GCommonNames","text.downloading")),n=i.GLocale.get(new i.GLocaleKey("GCommonNames","text.downloading-file")));let c=e.data&&e.data.filename?e.data.filename:this._document.getTitle();c&&(n=n.replace("%name",c));let d=c?n+"...":i.GLocale.get(new i.GLocaleKey("GDocument","text.opening-your-image"));this.activateProgress(d,e.data&&e.data.cancelHandlerHolder?e.data.cancelHandlerHolder:null),e.data.text=(e,t)=>this._overlay.find(".text").text(c&&!t?n:e),e.data.progressInfo=e=>this._overlay.find(".progress-info").text(e).css("display",e?"":"none");var o=0,a=(new Date).getTime(),s=e.data.progress;e.data.progress=function(e){var t,n,i=(new Date).getTime();if(100===e||e-o>=.5&&i-a>=40){a=i;var l=this._overlay.find("progress");l.val(e),o=e;t=l[0],n=t.style.display,t.style.display="none",t.offsetHeight,t.style.display=n,t.offsetHeight,l.hide(0,(function(){$(this).show(),$(this)[0].offsetHeight})),s&&(0,r.isFunction)(s)&&s(e)}}.bind(this);break;case l.LoadCancelled:case l.DownloadCancelled:case l.SaveCancelled:this._setOverlayContent(null);break;case l.Saved:this._document.setErrored(!1),gDesigner.intercomStats("File saved/exported"),this._setOverlayContent(null);break;case l.Loaded:this.centerAndZoom(),gDesigner.intercomStats("File opened");break;case l.SyncFailed:case l.Downloaded:case l.DownloadFailed:this._setOverlayContent(null);break;case l.LoadFailed:t=i.GLocale.get(new i.GLocaleKey("GCommonNames","text.loading-failed"));!e.data||!e.data.text||e.data.text instanceof Function||(t=e.data.text),this._setOverlayContent($("<span></span>").text(t));break;case l.SaveFailed:if(this._document.setErrored(!0),this._document.isCollaborativeTextEditing())return;this._setOverlayContent($("<span></span>").css({padding:"6px",display:"inline-block",backgroundColor:"#333",borderRadius:"6px"}).append($("<p></p>").text("string"==typeof e.data?e.data:i.GLocale.get(new i.GLocaleKey("GCommonNames","text.unable-to-save"))).css({lineHeight:"1.5em",margin:"10px"})).append($("<button></button>").text(i.GLocale.get(new i.GLocaleKey("GLocale","cancel"))).on("click",function(){this._document.updateStatus(l.SaveCancelled),this._setOverlayContent(null)}.bind(this)).css({margin:"10px"})).append($("<button></button>").text(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.try-again"))).on("click",function(){this._document&&gDesigner.executeAction(u.ID+"."+h,[null,this._document,null],"failedalertdialog")}.bind(this)).css({margin:"10px"})))}},f.prototype._updateScene=function(){if(!this._view||this._document.getScene()!==this._view.getScene()){this._releaseScene(),this._releaseView();const e=this._document.getStatus();!this._document.getScene()||e!==l.Ready&&e!==l.Locked||(this._view=new o.GEditorWidget(this._document.getEditor()),this._updateViewConfiguration(),this._view.setViewMargin([f.VIEW_MARGIN,f.VIEW_MARGIN,f.VIEW_MARGIN,f.VIEW_MARGIN]),this._container.empty().append(this._view._htmlElement),this._updateWindowBackground(),this._view.getScene().addEventListener(i.GNode.AfterPropertiesChangeEvent,this._sceneAfterPropertiesChanged,this,void 0,void 0,!0),this._view.getScene().addEventListener(i.GNode.AfterFlagChangeEvent,this._afterFlagChangeEvent,this,void 0,void 0,!0),this._requiresViewTransformation=!0)}},f.prototype._updateViewConfiguration=function(){if(this._document&&this._document.isCommercialProductFile()){var e=new Image;e.onload=()=>{e.naturalWidth>0&&e.naturalHeight>0&&(this._view.getViewConfiguration().watermark=e,this._view.invalidate())},e.src="assets/img/brand/watermark.png"}else this._view.getViewConfiguration().watermark=null,this._view.invalidate()},f.prototype._sceneAfterPropertiesChanged=function(e){!e.temporary&&i.GUtil.containsOneOf(e.properties,["w","h"])&&this._updateWindowBackground()},f.prototype._updateWindowBackground=function(){this._document.getScene().isFixedSized()?this._view._htmlElement.style.background="":this._view._htmlElement.style.background="white"},f.prototype.getVisibleBBox=function(){if(this._document.getScene().isFixedSized()){var e=this._document.getScene();return new i.GRect(0,0,e.getProperty("w"),e.getProperty("h"))}return this._view?new i.GRect(0,0,this._view.getWidth(),this._view.getHeight()):null},f.prototype._afterFlagChangeEvent=function(e){e.node instanceof i.GPage&&e.flag===i.GNode.Flag.Active&&this._updateWindowBackground()},f.prototype.scrollIntoView=function(e){if(e&&!e.isEmpty()){const t=this.getView(),n=t.getViewVisibleArea(),o=t.getWorldTransform().mapRect(e);if(!n.containsRect(o)){let e=n.getSide(i.GRect.Side.CENTER),r=o.getSide(i.GRect.Side.CENTER).subtract(e);a.GPlatform.scheduleFrame(()=>t.scrollBy(r.getX(),r.getY()))}}},e.exports=f},function(e,t,n){var o=n(1480);e.exports=function(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var o=n(1227).default,i=n(1481);e.exports=function(e){var t=i(e,"string");return"symbol"==o(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var o=n(1227).default;e.exports=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";n(276),n(7),n(18),n(29),n(28);var o=n(342),i=n(1),a=n(34);const{gApi:r,LINKS:s,DESIGNER:{TITLE:l}={},SubscriptionStatus:c}=n(9),d=(n(162),n(323)),u=["number","name","price","date"];function p(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._user=e,this._options=n,this._query={skip:0,name:"",issued:"true"},this._messageHandler=t,this._typing=!1,this._init(),this._allowReactivateSubscriptions=!1,this._load()}i.GObject.inherit(p,i.GObject),p.prototype._init=function(){this._container=$("<div></div>").addClass("g-purchase-panel");let e=void 0;const t=()=>this._showInfoIfAny(),n=n=>{e&&clearTimeout(e),e=setTimeout(t,500),this._search($(n.target).closest("input").val())};$("<div></div>").addClass("search-panel").append($("<input>").attr("type","text").attr("data-property","search").attr("placeholder",i.GLocale.get(new i.GLocaleKey("GPurchasePanel","text.search-label"))).on("input",(0,a.debounce)((0,a.throttle)(n,500),500)).on("keyup",e=>{13===e.which&&(gDesigner.stats("profile-dialog_purchase-panel_search"),n(e))})).append($("<label></label>").append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GPurchasePanel","text.orderby-label")))).append($("<select></select>").attr("data-property","orderby").append(u.map(e=>$("<option></option>").attr("value",e).text(i.GLocale.get(new i.GLocaleKey("GPurchasePanel","text.orderby-"+e))))).on("change",e=>{gDesigner.stats("profile-dialog_purchase-panel_order-by",e.target.value),this._orderBy.bind(this)})).append($("<span></span>").data("direction","").attr("data-property","direction").addClass("gravit-icon-sort-asc").on("click",e=>{let t=$(e.target).closest("span"),n=t.data("direction"),o="asc";"-"===n?(n="",o="asc"):(n="-",o="desc"),t.data("direction",n),t.toggleClass("gravit-icon-sort-asc gravit-icon-sort-desc"),gDesigner.stats("profile-dialog_purchase-panel_sort",o),this._orderBy()}))).appendTo(this._container),this._purchaseList=$("<div></div>").addClass("purchase-list").appendTo(this._container),$("<footer></footer>").append($("<span>".concat(i.GLocale.get(new i.GLocaleKey("GPurchasePanel","text.contact-partner-billing-alternative")),"</span>").replace("%partner%",$("<a/>").addClass("cb-link").text(i.GLocale.get(new i.GLocaleKey("GPurchasePanel","text.contact-partner-cleverbridge"))).prop("outerHTML")))).appendTo(this._container),this._container.find(".cb-link").on("click",e=>{gDesigner.stats("profile-dialog_purchase-panel_cleverbridge-link"),gContainer.openExternalLink(e,s.CLEVERBRIDGE_SUPPORT_URL)}),$(this._purchaseList).scroll(e=>{let t=$(e.currentTarget);t[0].scrollHeight-t.scrollTop()===t.outerHeight()&&$(this._purchaseList).children().length>0&&this._load()})},p.prototype._search=async function(e){this._messageHandler(void 0),this._query.skip=0,this._query.name=e,this._query.by=this._container.find('select[data-property="orderby"] > option:selected').attr("value"),this._query.direction=this._container.find('span[data-property="direction"]').data("direction"),await this._load(!0)},p.prototype._orderBy=function(){this._search(this._container.find('input[data-property="search"]').val()),this._showInfoIfAny()},p.prototype._showInfoIfAny=function(){this._purchaseList[0].hasChildNodes()||this._messageHandler(i.GLocale.get(new i.GLocaleKey("GPurchasePanel","text.empty-search")),"info")},p.prototype._load=async function(e){if(-1!==this._query.skip){this._toggleLoading(!0);try{let t=await r.listPurchasedProducts(this._query),n=t.length;this._query.skip=n>0?n<10?-1:this._query.skip+n:-1,e&&this._purchaseList.empty(),t.forEach(e=>this._addOrUpdateItem(e))}catch(e){this._handleError(e)}finally{this._toggleLoading(!1)}}},p.prototype._addOrUpdateItem=function(e,t){const n=e.issued_coupon&&e.issued_coupon.lifetime;(t=t||$("<div></div>").addClass("purchase-item").data("purchase",e).on("click",e=>{this._purchaseList.find(".purchase-item.g-active").removeClass("g-active"),$(e.target).closest(".purchase-item").addClass("g-active")}).appendTo(this._purchaseList)).empty();let a=!1,s=!1;this._options&&this._options.subscription&&e.purchase_id==this._options.subscription.purchase&&(a=!0,s=!!this._options.subscription.reinstate,this._options=null),a&&t.addClass("g-selected");const u=e.name||(n?i.GLocale.get(new i.GLocaleKey("GPurchasePanel","text.pro-subscription-lifetime")).replace("%app",l):i.GLocale.get(new i.GLocaleKey("GPurchasePanel","text.pro-subscription")).replace("%app",l));$("<div></div>").addClass("header").append($("<label></label>").addClass("title").text(u)).appendTo(t);e.invoice&&$("<div></div>").addClass("orderno").append($("<a></a>").attr("href",e.invoice).attr("target","_blank").append($("<span></span>").text("".concat(i.GLocale.get(new i.GLocaleKey("GPurchasePanel","text.orderno"))," ").concat(e.purchase_id)))).appendTo(t),o.PURCHASEPANEL.HAS_PRODUCT_DESCRIPTION&&$("<div></div>").addClass("description").append($("<label></label>").text(e.description)).appendTo(t);let p="".concat(i.GLocale.get(new i.GLocaleKey("GPurchasePanel","text.purchased"))," ").concat(e.created?i.GLocale.toLocaleDate(new Date(e.created)):"");!n&&e.issued_coupon&&e.issued_coupon.expires&&(p+=", ".concat(i.GLocale.get(new i.GLocaleKey("GPurchasePanel","text.purchased-expires")).replace("%date",i.GLocale.toLocaleDate(new Date(e.issued_coupon.expires)))));let g=$("<span></span>").text(p+".");if(e.subscription&&!e.refunded){let a=p;g.text(p+"..."),r.getSubscriptionByPurchase(e.purchase_id,e.provider).then(u=>{const p=(e,n,o,a,r)=>{let s=$("<div></div>").addClass("prompt").append($("<div></div>").append($("<span></span>").addClass("title").text(e)).append($("<div></div>").append($("<button></button>").text(i.GLocale.get(new i.GLocaleKey("GLocale","yes"))).on("click",()=>a(s))).append($("<button></button>").text(i.GLocale.get(new i.GLocaleKey("GLocale","no"))).on("click",()=>s.removeClass("show"))))).append($("<div></div>").append($("<div></div>").addClass("subtitle").append($("<span></span>").html(n)))).insertAfter(t);return $("<div></div>").addClass("subscription").append($("<label></label>").html("&nbsp;")).append($("<button></button>").toggleClass("highlight",!!r).text(o).on("click",()=>s.addClass("show"))).appendTo(t),s};if(u.status===c.Active)n?g.text(a+"."):g.text("".concat(a,", ").concat(i.GLocale.get(new i.GLocaleKey("GPurchasePanel","text.purchased-renews"))," ").concat(i.GLocale.toLocaleDate(new Date(u.endDate)),".")),p(i.GLocale.get(new i.GLocaleKey("GPurchasePanel","text.prompt-cancel-title")),i.GLocale.get(new i.GLocaleKey("GPurchasePanel","text.prompt-cancel-info")).replace("%app",l).replace("%date",i.GLocale.toLocaleDate(new Date(u.endDate))),i.GLocale.get(new i.GLocaleKey("GLocale","cancel")),async n=>{this._toggleLoading(!0);try{await r.deactivateSubscription(u.id,e.provider).then(()=>{gDesigner.stats("profile-dialog_purchase-panel_cancel-subscription"),n.remove(),this._addOrUpdateItem(e,t)}).catch(e=>this._handleError(e)),await d.checkLicense()}finally{this._toggleLoading(!1)}});else{if(g.text("".concat(a,", ").concat(i.GLocale.get(new i.GLocaleKey("GPurchasePanel","text.subscription-ends")).replace("%date",i.GLocale.toLocaleDate(new Date(u.endDate))),".")),!this._allowReactivateSubscriptions)return;if(u.repurchase)return;let n=p(i.GLocale.get(new i.GLocaleKey("GPurchasePanel","text.prompt-activate-title")),i.GLocale.get(new i.GLocaleKey("GPurchasePanel","text.prompt-activate-info")).replace("%date",i.GLocale.toLocaleDate(new Date(u.nextBillingDate))),i.GLocale.get(new i.GLocaleKey("GPurchasePanel","text.prompt-activate-label")),async n=>{this._toggleLoading(!0);try{await r.activateSubscription(u.id,e.provider).then(()=>{gDesigner.stats("profile-dialog_purchase-panel_activate-subscription"),n.remove(),this._addOrUpdateItem(e,t)}).catch(e=>this._handleError(e)),await d.checkLicense()}finally{this._toggleLoading(!1)}},o.PURCHASEPANEL.HAS_HIGHLIGHT);s&&n.addClass("show")}}).catch(()=>g.text(a+"."))}return $("<div></div>").addClass("purchased").append($("<label></label>").append(g)).appendTo(t),t},p.prototype._handleError=function(e){let t=i.GLocale.get(new i.GLocaleKey("GCommonNames","text.something-wrong"));e&&e.message?t=e.message:e&&e.errors&&(t=e.errors.map(e=>e[1]).join("<br>")),this._messageHandler(t)},p.prototype._toggleLoading=function(e){e?this._container.addClass("g-loading"):this._container.removeClass("g-loading")},p.prototype.getHTMLElement=function(){return this._container},e.exports=p},function(e,t,n){"use strict";n(7),n(183),n(18),n(3),n(29),n(84);var o=n(9),i=n(1);const{bypassEmailVerification:a}=o.defaultUserSettings,r=n(37),s=function(e){return e.json().then((function(t){return Promise[e.status>=400?"reject":"resolve"](t)}))};function l(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._user=e,this._messageHandler=t,this._parent=n,this._options=o,this._init()}i.GObject.inherit(l,i.GObject),l.prototype._openAccountDeletionConfirmationDialog=function(){let e="<span>".concat(i.GLocale.get(new i.GLocaleKey("GAccountPanel","text.delete-account-title")),'</span>\n    <mark style="min-width: 100px;\n        background: #F23C3C;\n        border-radius: 3px;\n        padding: 3px 30px;\n        color: white;\n        margin-top: 2px;\n        margin-bottom: 2px;\n        display: block;\n        text-align: center;">\n        ').concat(i.GLocale.get(new i.GLocaleKey("GAccountPanel","text.delete-account-sub-title")),'\n    </mark>\n    <ul style="list-style-type: disc; transform: translateX(30px); margin-bottom: 10px;">\n        <li>').concat(i.GLocale.get(new i.GLocaleKey("GAccountPanel","text.delete-account-list-1")),"</li>\n        <li>").concat(i.GLocale.get(new i.GLocaleKey("GAccountPanel","text.delete-account-list-2")),"</li>\n        <li>").concat(i.GLocale.get(new i.GLocaleKey("GAccountPanel","text.delete-account-list-3")),"</li>\n    </ul>\n    <span>").concat(i.GLocale.get(new i.GLocaleKey("GAccountPanel","text.delete-account-action-cant-undone")),"</span>");r.custom({title:e,styles:{buttons:{"justify-content":"flex-end"}},buttons:[{label:i.GLocale.get(new i.GLocaleKey("GLocale","cancel")),closeOnClick:!0},{label:i.GLocale.get(new i.GLocaleKey("GLocale","ok")),highlighted:!0,onclick:e=>{e.gDialog("close"),this._deleteAccount()}}]})},l.prototype._deleteAccount=function(){return this._toggleLoading(!0),fetch(o.gApi.url+"/user/"+this._user.id,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json",Accept:"json"}}).then(s).then(()=>{this._parent.close(),gDesigner.stats("profile-dialog_account-panel_delete"),gDesigner.signout(!0)}).catch(e=>{this._messageHandler(e&&e.message||e&&e.errors.toString()||"")}).finally(()=>{this._toggleLoading(!1)})},l.prototype._getFooter=function(){const e=$("<footer></footer>").append($("<div></div>").addClass("buttons").append($("<button></button>").addClass("highlight").attr("type","submit").text(i.GLocale.get(new i.GLocaleKey("GAccountPanel","text.save")))).append($("<button></button>").attr("type","button").attr("data-property","delete-account").text(i.GLocale.get(new i.GLocaleKey("GAccountPanel","text.delete"))).on("click",e=>(e.preventDefault(),this._openAccountDeletionConfirmationDialog(),!1))));return o.gApi.hasPurchases({issued:!0}).then(t=>{t&&$("<div/>").addClass("info").append($("<span>".concat(i.GLocale.get(new i.GLocaleKey("GAccountPanel","text.contact-partner-billing-alternative")),"</span>").replace("%partner%",$("<a/>").addClass("cb-link").text(i.GLocale.get(new i.GLocaleKey("GAccountPanel","text.contact-partner-cleverbridge"))).prop("outerHTML")))).appendTo(e),this._container.find(".cb-link").on("click",e=>{gDesigner.stats("profile-dialog_account-panel_cleverbridge-link"),gContainer.openExternalLink(e,o.LINKS.CLEVERBRIDGE_SUPPORT_URL)})}),e},l.prototype._init=function(){this._container=$("<div></div>").addClass("g-account-panel");const e=$("<form></form>").appendTo(this._container).on("submit",e=>(e.preventDefault(),gDesigner.stats("profile-dialog_account-panel_save"),this._updateUser(),!1)),t=$("<div></div>").addClass("section").append($("<div></div>").addClass("header").append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GAccountPanel","text.contact"))))).appendTo(e),n=this._getFooter();n&&n.appendTo(e);const a=(e,t,n,o,i)=>{const a=$("<input>").attr("type",o||"text").attr("placeholder",i||"").attr("value",t||""),s=r(e,n,a);return"password"===o&&s.append($("<span></span>").addClass("gravit-icon-hide btn-display").on("click",e=>{const t=$(e.target).closest(".btn-display").toggleClass("gravit-icon-hide gravit-icon-display"),n=!t.data("visible");t.data("visible",n),s.find("input").attr("type",n?"text":"password")})),s},r=(e,t,n)=>$("<div></div>").addClass("input-field").attr("data-property",t).append($("<label></label>").text(e)).append(n);let s=this._user.getFirstName(),l=this._user.getLastName();if(!l){let{first:e,last:t}=(e=>{let t=(e||"").split(" "),n=t.slice(0,t.length-1).join(" "),o=t.slice(-1).join("");return n.trim().length||(n=o,o=""),{first:n,last:o}})(s);s=e,l=t||""}let c=$("<div></div>").addClass("group-section").appendTo(t);a(i.GLocale.get(new i.GLocaleKey("GAccountPanel","text.first-name")),s,"name").appendTo(c).find("input").attr("required",!0),a(i.GLocale.get(new i.GLocaleKey("GAccountPanel","text.last-name")),l,"last_name").appendTo(c).find("input").attr("required",!0),a(i.GLocale.get(new i.GLocaleKey("GAccountPanel","text.email")),this._user.getEmail(),"email").appendTo(t),a(i.GLocale.get(new i.GLocaleKey("GAccountPanel","text.old-password")),"","old_password","password").appendTo(t),a(i.GLocale.get(new i.GLocaleKey("GAccountPanel","text.new-password")),"","new_password","password",i.GLocale.get(new i.GLocaleKey("GPurchasePanel","text.placeholder-password")).replace("%min-number",o.PasswordRules.PasswordLength.Minimum).replace("%max-number",o.PasswordRules.PasswordLength.Maximum)).appendTo(t)},l.prototype._updateUser=async function(){this._toggleLoading(!0);const e=e=>{let t=i.GLocale.get(new i.GLocaleKey("GAccountPanel","text.error"));e&&e.message?t=e.message:e&&e.errors&&(t=e.errors.map(e=>e[1]).join("<br>")),this._messageHandler(t),this._toggleLoading(!1)};let t={webUrl:gDesigner.getWebURL()},n=this;this._container.find(".input-field > input").each((function(){let e=$(this),o=e.closest(".input-field").attr("data-property");("login"!==o&&"email"!==o||n._user[o]!==e.val().trim())&&(t[o]=e.val())})),this._container.find(".input-field > select").each((function(){let e=$(this),n=e.closest(".input-field").attr("data-property"),o=e.find("option:selected").attr("value");t[n]=o})),this._messageHandler(void 0);try{await gDesigner.getCloudCommunicationManager().updateUser(t).then(()=>this._messageHandler(i.GLocale.get(new i.GLocaleKey("GAccountPanel","text.success")),"success")).then(()=>{t.email&&this._user.getEmail()!==t.email&&!a&&r.alert(i.GLocale.get(new i.GLocaleKey("GAccountPanel","text.user-email-message")).replace("%email",t.email))}).then(async()=>this._user=await gDesigner.getUser()).catch(e)}finally{this._toggleLoading(!1)}},l.prototype.getHTMLElement=function(){return this._container},l.prototype._toggleLoading=function(e){e?this._container.addClass("g-loading"):this._container.removeClass("g-loading")},e.exports=l},function(e,t,n){"use strict";n(18),n(3),n(29),n(84);var o=n(9),i=n(1);function a(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._user=e,this._messageHandler=t,this._parent=n,this._options=a;const r=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return $("<div></div>").addClass("input-field").attr("data-property",t).append($("<span></span>").append($("<label></label>").text(e)).append($("<label></label>").text(o))).append(n)},s=(e,t,n,o,i,a)=>{let s=r(e,n,$("<input>").attr("type",o||"text").attr("placeholder",i||"").val(t||""),a);return"password"===o&&s.append($("<span></span>").addClass("gravit-icon-hide btn-display").on("click",e=>{let t=$(e.target).closest(".btn-display").toggleClass("gravit-icon-hide gravit-icon-display"),n=!t.data("visible");t.data("visible",n),s.find("input").attr("type",n?"text":"password")})),s};this._container=$("<div></div>").addClass("g-change-password-panel");const{changePasswordOptions:{autoClose:l,title:c=i.GLocale.get(new i.GLocaleKey("GChangePasswordPanel","text.change-password")),info:d=i.GLocale.get(new i.GLocaleKey("GChangePasswordPanel","text.reset-password-info"))}={}}=a;let u=$("<div></div>").addClass("section").append($("<div></div>").addClass("header").append($("<span></span>").text(c.replace("%name",e.email)))).appendTo(this._container);$("<footer></footer>").append($("<button></button>").addClass("highlight").text(i.GLocale.get(new i.GLocaleKey("GChangePasswordPanel","text.assign"))).on("click",()=>{const{token:e}=this._options,t=this._container.find('[data-property="new_password"] > input').val().trim(),n=this._container.find('[data-property="confirm_password"] > input').val().trim();gDesigner.stats("profile-dialog_change-password-panel_change-password"),o.gApi.updatePassword({password:t,confirm_password:n},e).then(()=>this._messageHandler(i.GLocale.get(new i.GLocaleKey("GChangePasswordPanel","text.reset-password-done")),"success")).then(()=>this._toggleLoading(!1)).then(()=>{l&&this._parent.close()}).catch(e=>this._messageHandler(o.gApi.formatError(e)))})).appendTo(this._container),s(i.GLocale.get(new i.GLocaleKey("GChangePasswordPanel","text.new-password")),"","new_password","password",i.GLocale.get(new i.GLocaleKey("GChangePasswordPanel","text.placeholder-new-password")),i.GLocale.get(new i.GLocaleKey("GChangePasswordPanel","text.new-password-tip")).replace("%min-number",o.PasswordRules.PasswordLength.Minimum).replace("%max-number",o.PasswordRules.PasswordLength.Maximum)).appendTo(u),s(i.GLocale.get(new i.GLocaleKey("GChangePasswordPanel","text.confirm-password")),"","confirm_password","password",i.GLocale.get(new i.GLocaleKey("GChangePasswordPanel","text.placeholder-confirm-password"))).appendTo(u),this._messageHandler(d,"important")}i.GObject.inherit(a,i.GObject),a.prototype.getHTMLElement=function(){return this._container},a.prototype._toggleLoading=function(e){e?this._container.addClass("g-loading"):this._container.removeClass("g-loading")},a.prototype.toString=function(){return"[Object GChangePasswordPanel]"},e.exports=a},function(e,t,n){"use strict";n(7);var o=n(1),i=n(34),a=n(240);class r{constructor(e){let{closeCallback:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n=this;this._dialog=$("<div/>").addClass("g-save-chooser").append($("<div/>").addClass("save-to-file").append($("<div/>").addClass("content").append($("<span/>").addClass("gravit-icon-local-file").addClass("icon")).append($("<span/>").addClass("label").text(o.GLocale.get(new o.GLocaleKey("GCommonNames","text.save-to-file"))))).on("click",(async function(){gDesigner.stats("savedialog_save_file"),await n.close(),e(r.file())}))).append($("<hr/>")).append($("<div/>").addClass("save-to-file").append($("<div/>").addClass("content").append($("<span/>").addClass(a["gravit-icon-cloud-save-choose"]).addClass("icon")).append($("<span/>").addClass("label").text(o.GLocale.get(new o.GLocaleKey("GCommonNames","text.save-to-cloud"))))).on("click",(async function(){gDesigner.stats("savedialog_save_cloud"),await n.close(),e(r.cloud())}))),this._dialog.gDialog({releaseOnClose:!0,className:"g-save-chooser-dialog",closeTimeout:0,closeCallback:t})}open(){this._dialog.gDialog("open",!0)}close(){return this._dialog.gDialog("close",!1),(0,i.sleep)(0)}static file(){return"file"}static cloud(){return"cloud"}}e.exports=r},function(e,t,n){"use strict";var o=n(1);function i(e,t){this._neverRemind=!1,this._agreeCb=e,this._rejectCb=t||this.close,gContainer.getProperty("designer.settings.warn-linked-image-dialog.never-remind").then(t=>{(t=t||!1)?e():this._init()})}o.GObject.inherit(i,o.GObject),i.prototype._init=function(){this._dialog=$("<div></div>").addClass("container").append($("<div />").addClass("text-content").text(o.GLocale.get(new o.GLocaleKey("GWarnLinkedImageDialog","warn-linked-image.text")))).append($("<div />").addClass("checkbox-content").append($("<input />").attr("type","checkbox").attr("name","never-remind").attr("checked",this._neverRemind).on("change",function(){this._neverRemind=!this._neverRemind}.bind(this))).append($("<span />").addClass("checkbox-text").html(o.GLocale.get(new o.GLocaleKey("GWarnLinkedImageDialog","warn-linked-image.never-remind"))))).gDialog({releaseOnClose:!0,className:"g-warn-linked-image-dialog",buttons:[$("<button />").addClass("native-button").attr("type","submit").html(o.GLocale.get(new o.GLocaleKey("GWarnLinkedImageDialog","warn-linked-image.proceed"))).on("click",this.save.bind(this)),$("<button />").addClass("native-button").html(o.GLocale.get(new o.GLocaleKey("GWarnLinkedImageDialog","warn-linked-image.cancel"))).on("click",this._rejectCb.bind(this))]}),$("<div></div>").addClass("g-btn-close").append($("<span></span>").addClass("gravit-icon-close")).on("click",this.close.bind(this)).appendTo(this._dialog)},i.prototype.save=function(){this._neverRemind&&gContainer&&gContainer.setProperty&&gContainer.setProperty("designer.settings.warn-linked-image-dialog.never-remind",!0),this.close(),this._agreeCb()},i.prototype.open=function(){this._dialog.gDialog("open",!0)},i.prototype.close=function(){this._dialog.gDialog("close")},e.exports=i},function(e,t,n){"use strict";n(1172),n(17),n(1173),n(169),n(7),n(124),n(204),n(177),n(178),n(179),n(180),n(28);var o=n(165),i=n(0);n(9);var a=n(222),r=n(1094).saveAs,s=null,l=null;function c(){this._fileInput=null,this._fileInputCallback=null}function d(e){return e.queryPermission({writable:!0}).then(t=>"granted"!==t?e.requestPermission({writable:!0}):t).then(e=>{if("granted"!==e)throw new Error("Cannot get write access")})}i.inherit(c,a),c.Directory=function(e,t){a.Directory.call(this,e),this._dirHandle=t,this._id=null},i.inherit(c.Directory,a.Directory),c.Directory.prototype._dirHandle=null,c.Directory.prototype._id=null,c.Directory.prototype.getUniqueId=function(){return null},c.Directory.prototype.addDirectory=async function(e){let t=null;try{return t=await this._dirHandle.getDirectory(e,{create:!0}),await d(t),new c.Directory(this._storage,t)}catch(t){throw new Error("Cannot create a directory: "+e)}},c.Directory.prototype.addFile=async function(e){let t=null;try{return t=await this._dirHandle.getFile(e,{create:!0}),await d(t),new c.Item(this._storage,null,t.name,t)}catch(e){throw new Error("Cannot create a file")}},c.Item=function(e,t,n,o){a.Item.call(this,e),this._data=t,this._filename=n,this._fileHandle=o},i.inherit(c.Item,a.Item),c.Item.prototype._data=null,c.Item.prototype._filename=null,c.Item.prototype._fileHandle=null,c.Item.prototype.getFullName=function(){return this._filename},c.Item.prototype.setFileName=function(e){this._filename=e},c.Item.prototype.read=function(e){if(this._data||!this._fileHandle)return e(this._data);this._fileHandle.getFile().then(e=>e.arrayBuffer()).then(t=>{this._data=t,e(this._data)})},c.Item.prototype.write=function(e,t,n,o,i){if(this._verifyFileNotTooSmall(e.length,i),this._fileHandle){let o=null;this._fileHandle.createWritable().then(e=>(o=e,o.truncate(0))).then(()=>o.write(e)).then(()=>o.close()).then(()=>{t&&t()}).catch(o=>{if(o instanceof DOMException&&o.code===DOMException.QUOTA_EXCEEDED_ERR)return this.notEnoughDiskSpace(),void(n?n():t&&t());r(new Blob([e]),this._filename),t&&t()})}else r(new Blob([e]),this._filename),t&&t()},c.prototype._isFileAPIAvailable=function(){return!1},c.prototype._hasDirectoryWriteAPI=function(){return"function"==typeof window.chooseFileSystemEntries},c.prototype.canChooseDirectory=function(){return this._hasDirectoryWriteAPI()&&!0},c.prototype.canPromptOpen=function(){return!0},c.prototype.canPromptSave=function(){return this._isFileAPIAvailable()},c.prototype.canSave=function(){return this._isFileAPIAvailable()},c.prototype.canDownload=function(){return!this._isFileAPIAvailable()},c.prototype.chooseDirectory=function(e,t,n){if(!this._isFileAPIAvailable()||!this.canChooseDirectory())return;var o={type:l||"open-directory"};let i=null;var a=!1;window.chooseFileSystemEntries(o).then(e=>(i=e,d(e))).then(()=>{let t=e(new c.Directory(this,i));return a=!0,t}).catch(e=>{if(e instanceof DOMException&&"SecurityError"===e.name){if(console.warn("Bugged!"),n)return void n()}else!a&&!l&&e instanceof TypeError&&(l="openDirectory");t&&t()})},c.prototype.openPrompt=function(e,t,n){let{disableFileSystemAccessAPI:i=!1,silent:a=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!i&&this._isFileAPIAvailable()){var r={multiple:!!n};if(e.length>0){const t={};r.excludeAcceptAllOptions=!0;for(let n=0,o=e.length;n<o;n++){const{mime:o,ext:i}=e[n];o&&i?void 0!==t[o]?(Array.isArray(t[o])||(t[o]=[t[o]]),t[o].push(i.startsWith(".")?i:".".concat(i))):t[o]=i.startsWith(".")?i:".".concat(i):console.warn('openPrompt warning: no mime or ext. given mime: "'.concat(o,'", given ext: "').concat(i,'"'))}r.types=[{accept:t}]}return window.showOpenFilePicker(r).then(e=>{Array.isArray(e)||(e=[e]),e.forEach(n=>{n.getFile().then(e=>e.arrayBuffer()).then(o=>t(new c.Item(this,new Uint8Array(o),n.name,n),e.length)).catch(()=>{console.log("ERROR reading file")})})}).catch(e=>{e instanceof DOMException||console.warn("showOpenFilePicker warning",e)}),void(this._fileInputCallback=t)}const s=e.map(e=>e.ext).flat();if(!this._fileInput){this._fileInput=document.createElement("input"),this._fileInput.setAttribute("type","file"),this._fileInput.setAttribute("id","file-input"),this._fileInput.multiple=n,this._fileInput.style.opacity=0,this._fileInput.style.position="absolute",this._fileInput.style.zIndex=-1,this._fileInput.style.left="-9999px",this._fileInput.style.top="-9999px";var l=function(e){var t=this._fileInput.files.length;if(e>=t)this._fileInput.value="";else{var n=this._fileInput.files[e],o=n.name;if(n instanceof File||n instanceof Blob){var i=new FileReader;i.onload=function(){this._fileInputCallback(new c.Item(this,new Uint8Array(i.result),o),t),l(e+1)}.bind(this),i.readAsArrayBuffer(n)}else l(e+1)}}.bind(this);this._fileInput.addEventListener("change",()=>{l(0)}),document.body.appendChild(this._fileInput)}o.hardware===o.Hardware.Tablet&&o.operatingSystem===o.OperatingSystem.OSX_IOS?this._fileInput.removeAttribute("accept"):s&&s.length?this._fileInput.setAttribute("accept",s.map(e=>"."+e).join(",")):this._fileInput.removeAttribute("accept"),this._fileInputCallback=t,this._fileInput.focus(),a||this._fileInput.click()},c.prototype.savePrompt=function(e,t,n,o){if(this._isFileAPIAvailable()){var i={suggestedName:e};if(t.length>0){const e={};i.excludeAcceptAllOptions=!0;for(let n=0,o=t.length;n<o;n++){let{mime:o,ext:i}=t[n];o&&i?("jpg"===i&&(o="x-really-an-image/jpeg"),void 0!==e[o]?(Array.isArray(e[o])||(e[o]=[e[o]]),e[o].push(i.startsWith(".")?i:".".concat(i))):e[o]=i.startsWith(".")?i:".".concat(i)):console.warn('openPrompt warning: no mime or ext. given mime: "'.concat(o,'", given ext: "').concat(i,'"'))}let n=[{accept:e}];const o=Object.keys(e);(o||[]).length>1&&(n=o.map(t=>{let n={};return n[t]=e[t],{accept:n}})),i.types=n}var a=!1;window.showSaveFilePicker(i).then(e=>(a=!0,n(new c.Item(this,null,e.name,e)))).catch(t=>{if(!a&&!s&&t instanceof TypeError&&(s="saveFile"),!a&&t.code!==DOMException.ABORT_ERR)return this.download(e,n);o&&o()})}},c.prototype.download=function(e,t){return t(new c.Item(this,null,e))},e.exports=c},function(e,t,n){"use strict";n(17),n(578),n(26),n(51),n(7),n(18),n(29),n(22);var o=n(1),i=n(776),a=n(13),r=n(34),s=n(9),l=n(223),c=n(429),d=n(240),u=n(1229);const p=n(1214);var g=n(37);const h=n(373);var f={};function m(e,t,n){this._document=e,this._options=t,this._settings=o.GUtil.extend({size:"1x",format:"png",jpegQuality:s.JPEG_EXPORT_QUALITY_DEFAULT,backgroundColor:e?e.getScene().getActivePage().getProperty("bck"):null,backgroundOpacity:e?e.getScene().getActivePage().getProperty("bop"):1,chooserColor:e?e.getScene().getActivePage().getProperty("bck"):null,chooserOpacity:e?e.getScene().getActivePage().getProperty("bop"):1,convertTextToPath:!1,decimalPlacesPrecision:3,configuration:{ignoreEffects:!1,forceEffectsWhenZoomed:!0,sceneBackground:!0,isOutline:function(){return!1}},preserveEditingCapabilities:!1,layerNamesAsId:i.GSVGExport.DefaultOptions.layerNamesAsId,downsampleImages:!1},this._options||f);var a=this._isUserFree();this.init(a,n)}o.GObject.inherit(m,o.GObject),m.prototype._warningSection=null,m.prototype._isUserFree=function(){var e=gDesigner.getLicense();return!e.isLegacy()&&(e.isFree()||gDesigner.isAnonymous()||e.isExpired())},m.prototype.init=function(e,t){this._settings.background||(this._settings.background="page-background"),this._chooserElem=null,this._dialog=$("<div></div>"),this._setupContainer=$("<div></div>").addClass("setup-container").appendTo(this._dialog),this._modeContainer=$("<div/>").addClass("mode-container").appendTo(this._setupContainer);var n=function(e,t,n){return $("<label/>").attr("data-mode",e).append($("<span></span>").addClass("icon "+n)).append($("<span></span>").addClass("name").text(t)).on("click",function(t){gDesigner.stats("export_change_mode",e),$(t.target).closest("label").hasClass("g-disabled")||this._setActiveMode(e)}.bind(this)).appendTo(this._modeContainer)}.bind(this);n("canvas",o.GLocale.get(new o.GLocaleKey("GExportDialog","text.canvas")),d["gravit-icon-display"]),n("selection",o.GLocale.get(new o.GLocaleKey("GExportDialog","text.selection")),d["gravit-icon-cursor-filled"]),n("assets",o.GLocale.get(new o.GLocaleKey("GExportDialog","text.assets")),"gravit-icon-layers"),this._settingsContainer=$("<div/>").addClass("settings-container").appendTo(this._setupContainer);var i=function(n,o,i,a){a=$.extend({controlLeft:!1,forbiddenForFree:!0},a);var s=$("<span></span>").addClass("control").append(i);e&&a.forbiddenForFree?(s.find("*").on("mousedown",r.watchDog.trap(null,null,e=>{e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),a.prostats&&gDesigner.stats(a.prostats)},t)).on("click",r.watchDog.trap(null,null,e=>{e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()},t)),s.find("*").each((e,t)=>{$._data(t,"events").click.reverse(),$._data(t,"events").mousedown.reverse()})):a.pro&&s.find("input").gPro().on("click",r.watchDog.trap(null,null,e=>a.prostats&&gDesigner.stats(a.prostats))).after($("<span></span>").gPro()),a.controlLeft&&s.addClass("control-left"),"jpeg-quality"===n&&s.css("width","55%").css("height","100%").css("display","flex").css("justify-content","center");var l=$("<div></div>").attr("data-setting",n);return""!==o&&l.append($("<span></span>").addClass("label").text(o)),l.append(s).appendTo(this._settingsContainer),l}.bind(this),a={controlLeft:!0};i("format",o.GLocale.get(new o.GLocaleKey("GCommonNames","text.format")),$("<select/>").on("change",function(e){this._settings.format=$(e.target).val(),gDesigner.stats("export_change_documenttype",this._settings.format),"pdf"!==this._settings.format&&(this._settings.configuration.ignoreEffects=!1),"pdf"!=this._settings.format&&"jpg"!=this._settings.format||"no-background"!=this._settings.background||(this._settings.background="page-background"),this._updateSettings(),this._updatePreview(),this._updateSizeMenu()}.bind(this)).append($("<option></option>").attr("value","png").text("PNG")).append($("<option></option>").attr("value","jpg").text("JPEG")).append($("<option></option>").attr("value","svg").text("SVG")).append($("<option></option>").attr("value","pdf").text("PDF")),{forbiddenForFree:!1}),i("size",o.GLocale.get(new o.GLocaleKey("GCommonNames","text.size")),$("<div></div>").addClass("g-input-select").append($("<input/>").attr("size","6").val(this._settings.size).on("change",function(e){gDesigner.stats("export_change_size",$(e.target).val()),this._settings.size=$(e.target).val(),this._updatePreview()}.bind(this))).append($("<button></button>").on("click",function(e){gDesigner.stats("export_open_size-menu"),this._sizeMenu.open(e.target,c.Position.Right_Bottom,c.Position.Right_Bottom,function(t){$(e.target).closest("div").find("input").val(this._formatCaption(t.getCaption())).trigger("change").focus().select()}.bind(this))}.bind(this))),{prostats:"export_nonprotriespro_size"});const u=$("<div />").gInputSlider({min:25,max:100}).css("align-self","center").gInputSlider("value",this._settings.jpegQuality).on("change",function(e){gDesigner.stats("export_change_jpeg-quality");var t=parseInt($(e.target).gInputSlider("value"),10);this._settings.jpegQuality=t,this._updatePreview(),p.gInputBox("value",t)}.bind(this)),p=$("<input />").attr("type","text").gInputBox({minValue:25,maxValue:100,incrementValue:1,postfix:"%"}).gInputBox("value",this._settings.jpegQuality).on("change",function(e){var t=parseInt(p.gInputBox("value"),10);t>100?t=100:t<25&&(t=25),u.gInputSlider("value",t),this._settings.jpegQuality=t,this._updatePreview()}.bind(this));i("jpeg-quality",o.GLocale.get(new o.GLocaleKey("GExportDialog","text.jpeg-quality")),$("<div/>").addClass("jpeg-quality").append(u).append($("<label />").append(p)),{prostats:"export_nonprotriespro_jpeg-quality"});var g=$("<div/>").addClass("export-background-selector").append($("<select/>").on("change",function(e){!1&e.isTrigger&&gDesigner.stats("export_change_background-pattern",$(e.target).val()),this._settings.background=$(e.target).val(),$(e.target).next(".export-background-pattern-chooser").css("display","custom-background"===this._settings.background?"":"none"),this._updateBackground(),this._updatePreview()}.bind(this)).append($("<option></option>").attr("value","page-background").text(o.GLocale.get(new o.GLocaleKey("GExportDialog","text.page-background")))).append($("<option></option>").attr("value","custom-background").text(o.GLocale.get(new o.GLocaleKey("GExportDialog","text.custom-background")))).append($("<option></option>").attr("value","no-background").text(o.GLocale.get(new o.GLocaleKey("GExportDialog","text.no-background"))))).append($("<span></span>").css("display","custom-background"===this._settings.background?"":"none").addClass("export-background-pattern-chooser").gPatternChooser({noEyedropper:!0,types:[o.GColor],hasOpacity:!0}).gPatternChooser("value",this._settings.chooserColor).on("chooseropen",(function(){this._chooserElem=$(this)})).on("chooserclose",(function(e,t,n){this._chooserElem=null})).on("patternchange",function(e,t,n,o){t&&(this._settings.backgroundColor=t,this._settings.chooserColor=t),n?(this._settings.backgroundOpacity=n,this._settings.chooserOpacity=n):this._settings.backgroundOpacity=this._document?this._document.getScene().getActivePage().getProperty("bop"):1,this._updateBackground(),this._updatePreview()}.bind(this)));this._settings.chooserColor&&g.find(".export-background-pattern-chooser").gPatternChooser("setPattern",this._settings.chooserColor),this._settings.chooserOpacity&&g.find(".export-background-pattern-chooser").gPatternChooser("opacity",this._settings.chooserOpacity),i("background-color",o.GLocale.get(new o.GLocaleKey("GCommonNames","text.background-color")),g,{prostats:"export_nonprotriespro_select-background"}),g.find('option[value="'+this._settings.background+'"]').prop("selected",!0),i("color-space",o.GLocale.get(new o.GLocaleKey("GExportDialog","text.color-mode")),$("<select/>").on("change",function(e){gDesigner.stats("export_change_colorspace",$(e.target).val()),this._settings.colorSpace=$(e.target).val()}.bind(this)).append($("<option/>").attr("value","rgb").text("RGB")).append($("<option/>").attr("value","cmyk").text("CMYK")),{prostats:"export_nonprotriespro_color-space"}),i("ignore-effects","",$("<label></label>").addClass("label").append($("<input/>").attr("type","checkbox").prop("checked",!0).on("change",function(e){gDesigner.stats("export_toggle_ignoreeffects",$(e.target).prop("checked")?"enable":"disable"),this._settings.configuration.ignoreEffects=!$(e.target).prop("checked"),this._updatePreview()}.bind(this))).append($("<span></span>").html("&nbsp;"+o.GLocale.get(new o.GLocaleKey("GExportDialog","text.with-effects")))),Object.assign({},a,{prostats:"export_nonprotriespro_ignore-effects"})),i("decimal-places-precision",o.GLocale.get(new o.GLocaleKey("GExportDialog","text.decimal-places-precision")),$("<input/>").attr("type","text").css("width","63px").gInputBox({minValue:0,maxValue:6}).gInputBox("value",this._settings.decimalPlacesPrecision).on("change",function(e){gDesigner.stats("export_change_decimalprecision"),this._settings.decimalPlacesPrecision=parseInt($(e.target).gInputBox("value"))}.bind(this)),{pro:!0,prostats:"export_nonprotriespro_decimalprecision"}),i("convert-text-to-path","",$("<label></label>").addClass("label").append($("<input/>").attr("type","checkbox").prop("checked",!0).on("change",function(e){gDesigner.stats("export_toggle_convert-to-path",$(e.target).prop("checked")?"enable":"disable"),this._settings.convertTextToPath=$(e.target).prop("checked")}.bind(this))).append($("<span></span>").html("&nbsp;"+o.GLocale.get(new o.GLocaleKey("GExportDialog","text.export-as-curves")))),Object.assign({},a,{prostats:"export_nonprotriespro_convert-text-to-path"})),i("export-all","",$("<label></label>").addClass("label").append($("<input/>").attr("type","checkbox").prop("checked",!0).on("change",function(e){gDesigner.stats("export_click_exportall");var t=$(e.target).prop("checked");this._previewContainer.find(".item .preview-check input").each((e,n)=>{$(n).prop("checked",t),this._updateStorageDestinationSetting()})}.bind(this))).append($("<span></span>").html("&nbsp;"+o.GLocale.get(new o.GLocaleKey("GExportDialog","text.export-all")))),Object.assign({},a,{prostats:"export_nonprotriespro_export-all"})),i("layer-as-id","",$("<label></label>").addClass("label").append($("<input/>").attr("type","checkbox").prop("checked",this._settings.layerNamesAsId).on("change",function(e){gDesigner.stats("export_click_layer-as-id"),this._settings.layerNamesAsId=$(e.target).prop("checked")}.bind(this))).append($("<span></span>").html("&nbsp;"+o.GLocale.get(new o.GLocaleKey("GExportDialog","text.layer-as-id")))).append($("<div></div>").addClass("description").html(o.GLocale.get(new o.GLocaleKey("GExportDialog","text.layer-as-id-info")))),Object.assign(a,{pro:!0,prostats:"export_nonprotriespro_layer-as-id"})),i("export-preserve-editing-capabilities","",$("<label></label>").addClass("label").append($("<input/>").attr("type","checkbox").prop("checked",!0).on("change",function(e){gDesigner.stats("export_toggle_preserve-svg-editing-capabilities",$(e.target).prop("checked")?"enable":"disable"),this._settings.preserveEditingCapabilities=$(e.target).prop("checked")}.bind(this))).append($("<span></span>").html("&nbsp;"+o.GLocale.get(new o.GLocaleKey("GExportDialog","text.preserve-svg-editing-capabilites")))).append($("<div></div>").addClass("description").html(o.GLocale.get(new o.GLocaleKey("GExportDialog","text.preserve-svg-editing-capabilites-description")))),Object.assign(a,{pro:!0,prostats:"export_nonprotriespro_preserve-svg-editing-capabilities"})),i("do-not-downsample-images","",$("<label></label>").addClass("label").append($("<input/>").attr("type","checkbox").prop("checked",!this._settings.downsampleImages).on("change",function(e){gDesigner.stats("export_toggle_do-not-downsample-images",$(e.target).prop("checked")),this._settings.downsampleImages=!$(e.target).prop("checked")}.bind(this))).append($("<span></span>").html("&nbsp;"+o.GLocale.get(new o.GLocaleKey("GExportDialog","text.do-not-downsample-images")))).append($("<div></div>").addClass("description").html(o.GLocale.get(new o.GLocaleKey("GExportDialog","text.do-not-downsample-images-info")))),Object.assign({},a,{prostats:"do-not-downsample-images"})),i("storage-destination",o.GLocale.get(new o.GLocaleKey("GExportDialog","text.export-to")),$("<select/>").on("change",()=>{const e=this._getSelectedStorageDestination();e&&gDesigner.stats("export_change_output",e.stats)})),this._previewContainer=$("<div></div>").addClass("preview-container").appendTo(this._dialog),this._sizeMenu=new l,this._setActiveMode("canvas",!0),this._updateSettings(),this._updateSizeMenu(),this._dialog.gDialog({releaseOnClose:!0,className:e?"g-export-dialog dialog-expired-pro":"g-export-dialog",buttons:[$("<button>"+o.GLocale.get(new o.GLocaleKey("GLocale","cancel"))+"</button>").on("click",()=>{gDesigner.stats("export_cancel_button"),this.close()}),$("<button>"+o.GLocale.get(new o.GLocaleKey("GCommonNames","text.export"))+"</button>").addClass("primary").on("click",r.watchDog.trap(()=>{gDesigner.stats("export_execute_button",this._settings&&this._settings.format),gDesigner.getAmplitudeHelper().logEvent(s.AmplitudeData.Events.DOCUMENT_EXPORTED,{DOCUMENT_EXPORT_TYPE:s.AmplitudeData.ExportTypes.Advanced,DOCUMENT_FILE_FORMAT:this._getFormat()}),this._export()},null,e=>gDesigner.stats("export_nonprotriespro_export"),t))]}),g.find("select").trigger("change")},m.prototype.open=function(){this._dialog.gDialog("open",!0)},m.prototype.close=function(){this._chooserElem&&this._chooserElem.gPatternChooser("close"),this._dialog.gDialog("close")},m.prototype._shouldWarningBeShown=function(e){if(!this._hasFormat())return!1;if(!(this._settings.format===h.PDF.ext))return!1;if(!e||!e.length)return!1;const t=new o.GLength(200,o.GLength.Unit.IN).toUnit(o.GLength.Unit.PX),n=o.GLength.DPI;return e.some(e=>{const o=i.GBitmapExport.getBitmapPaintArea(e.element,e.size,n);if(o.getWidth()>t||o.getHeight()>t)return!0})},m.prototype._updateWarningSection=function(e){this._shouldWarningBeShown(e)?(this._warningSection||(this._warningSection=this._buildWarningSection().appendTo(this._settingsContainer)),this._warningSection.show()):this._warningSection&&this._warningSection.hide()},m.prototype._buildWarningSection=function(){return $("<div/>").addClass("warning-section").append($("<span/>").addClass("control").append($("<label/>").addClass("label").append($("<span/>").addClass("icon").addClass("gravit-icon-export-warning")).append($("<span/>").addClass("title").text(o.GLocale.get(new o.GLocaleKey("GExportDialog","text.warning")))).append($("<div/>").addClass("description").text(o.GLocale.get(new o.GLocaleKey("GExportDialog","text.canvas-bigger-than-200-in"))))))},m.prototype._getStorageDestinations=function(){const e=this._getFormat();if(e){const t=gContainer.getStorageDestinations();if(t)return t.filter(t=>t.isSupported(e))}return[]},m.prototype._getSelectedStorageDestination=function(){const e=parseInt(this._settingsContainer.find("[data-setting=storage-destination] > .control > select").val());return this._getStorageDestinations().find(t=>t.id===e)},m.prototype._isStorageDestinationSettingAvailable=function(){return!(this._getStorageDestinations().length<2)},m.prototype._updateStorageDestinationSetting=function(){const e=this._isStorageDestinationSettingAvailable(),t=e?this._getStorageDestinations():[];this._settingsContainer.find("[data-setting=storage-destination]").css("display",e?"":"none").find("select").empty().append(t.map(e=>$("<option/>").attr("value",e.id).text(e.label)))},m.prototype._getFormat=function(){if(this._hasFormat()){if("assets"===this._activeMode)return h.ZIP.ext;if(this._previewContainer.find(".item .preview-check input:checked").length>1){if(!(this._settings.format===h.PDF.ext))return h.ZIP.ext}return this._settings.format}return null},m.prototype._setActiveMode=function(e,t){e!==this._activeMode&&(this._activeMode=e,this._modeContainer.find("> label").each((function(t,n){var o=$(n);o.toggleClass("g-active",o.attr("data-mode")===e)})),"selection"===e&&"page-background"===this._settings.background&&(this._settings.background="custom-background"),this._updateSettings(),t||this._updatePreview(),this._updateSizeMenu())},m.prototype._hasBackgroundColor=function(){return"canvas"===this._activeMode||"selection"===this._activeMode&&this._settings.format in{png:1,jpg:1,pdf:1}},m.prototype._hasSize=function(){return this._hasFormat()&&this._settings.format in{png:1,jpg:1,pdf:1}},m.prototype._hasJpegQuality=function(){return this._hasFormat()&&this._settings.format in{jpg:1,pdf:1}},m.prototype._hasFormat=function(){return"canvas"===this._activeMode||"selection"===this._activeMode},m.prototype._updateBackground=function(){if(this._settings.configuration.sceneBackground=!0,!this._hasBackgroundColor())return this._settings.backgroundColor=null,void(this._settings.backgroundOpacity=0);if("custom-background"!==this._settings.background)this._settings.configuration.sceneBackground="page-background"==this._settings.background,this._settings.backgroundColor="jpg"===this._settings.format?o.GRGBColor.WHITE:null,this._settings.backgroundOpacity=1;else{this._settings.configuration.sceneBackground=!1;var e=this._settingsContainer.find("[data-setting=background-color]").find(".export-background-pattern-chooser");if(e.gPatternChooser("value")?(this._settings.backgroundColor=e.gPatternChooser("value"),this._settings.backgroundOpacity=e.gPatternChooser("opacity"),this._settings.backgroundColor instanceof o.GColor||(this._settings.backgroundColor=o.GRGBColor.WHITE,this._settings.backgroundOpacity=1,e.gPatternChooser("value",this._settings.backgroundColor),e.gPatternChooser("opacity",this._settings.backgroundOpacity))):(this._settings.backgroundColor=this._document?this._document.getScene().getActivePage().getProperty("bck"):null,this._settings.backgroundOpacity=this._document?this._document.getScene().getActivePage().getProperty("bop"):1,this._settings.backgroundColor&&this._settings.backgroundColor instanceof o.GColor?null==this._settings.backgroundOpacity&&(this._settings.backgroundOpacity=1):(this._settings.backgroundOpacity=1,this._settings.backgroundColor=o.GRGBColor.WHITE),e.gPatternChooser("value",this._settings.backgroundColor),e.gPatternChooser("opacity",this._settings.backgroundOpacity)),"jpg"===this._settings.format){var t=o.GRGBColor.WHITE.getValue().slice(),n=this._settings.backgroundColor.getValue().slice();t[3]=1,n[3]=this._settings.backgroundOpacity;var i=o.GRGBColor.mix(t,n);this._settings.backgroundColor=new o.GRGBColor(i),this._settings.backgroundOpacity=1}}},m.prototype._updateSettings=function(){this._updateBackground(),this._settingsContainer.find("[data-setting=size]").css("display",this._hasSize()?"":"none"),this._settingsContainer.find("[data-setting=format]").css("display",this._hasFormat()?"":"none"),this._settingsContainer.find("[data-setting=jpeg-quality]").css("display",this._hasJpegQuality()?"":"none"),this._settingsContainer.find("[data-setting=background-color]").css("display",this._hasBackgroundColor()?"":"none"),this._settingsContainer.find("[data-setting=background-color]").find(".export-background-pattern-chooser").css("display","custom-background"===this._settings.background?"":"none"),this._settingsContainer.find("[data-setting=color-space]").css("display",this._hasFormat()&&"pdf"===this._settings.format?"":"none"),this._settingsContainer.find("[value=no-background]").css("display",!this._hasFormat()||"pdf"!==this._settings.format&&"jpg"!==this._settings.format?"":"none"),this._settingsContainer.find("[data-setting=retina-display]").css("display",!this._hasSize()||"jpg"!==this._settings.format&&"png"!==this._settings.format?"none":""),this._settingsContainer.find("[data-setting=ignore-effects]").css("display",this._hasFormat()&&"pdf"===this._settings.format?"":"none").find("input").prop("checked",!this._settings.configuration.ignoreEffects),this._settingsContainer.find("[data-setting=convert-text-to-path]").css("display",!this._hasFormat()||"svg"!==this._settings.format&&"pdf"!==this._settings.format?"none":"").find("input").prop("checked",this._settings.convertTextToPath),this._settingsContainer.find("[data-setting=layer-as-id]").css("display",this._hasFormat()&&"svg"===this._settings.format?"":"none").find("input").prop("checked",this._settings.layerNamesAsId),this._settingsContainer.find("[data-setting=export-preserve-editing-capabilities]").css("display",this._hasFormat()&&"svg"===this._settings.format?"":"none").find("input").prop("checked",this._settings.preserveEditingCapabilities),this._settingsContainer.find("[data-setting=decimal-places-precision]").css("display",this._hasFormat()&&"svg"===this._settings.format?"":"none"),this._settingsContainer.find("[data-setting=format]").find("[value="+this._settings.format+"]").attr("selected",!0),this._settings.colorSpace&&this._settingsContainer.find("[data-setting=color-space]").find("[value="+this._settings.colorSpace+"]").attr("selected",!0),this._settingsContainer.find("[data-setting=do-not-downsample-images]").css("display",this._hasFormat()&&"pdf"===this._settings.format?"":"none").find("input").prop("checked",!this._settings.downsampleImages),this._settingsContainer.find("[data-setting=export-all]").find("input").prop("checked",!this._options||!this._options.element),$(".export-background-selector").find('option[value="page-background"]').css("display","selection"===this._activeMode?"none":""),$(".export-background-selector").find('option[value="'+this._settings.background+'"]').prop("selected",!0),this._updateStorageDestinationSetting()},m.prototype._generateExportables=function(){if("canvas"===this._activeMode||"selection"===this._activeMode){var e={size:this._settings.size,suffix:"",format:this._settings.format,jpegQuality:this._settings.jpegQuality,backgroundColor:this._settings.backgroundColor,backgroundOpacity:this._settings.backgroundOpacity,colorSpace:this._settings.colorSpace,configuration:this._settings.configuration,convertTextToPath:this._settings.convertTextToPath,decimalPlacesPrecision:this._settings.decimalPlacesPrecision,preserveEditingCapabilities:this._settings.preserveEditingCapabilities,layerNamesAsId:this._settings.layerNamesAsId,overrideBackground:"page-background"!==this._settings.background,downsampleImages:this._settings.downsampleImages};if("canvas"===this._activeMode)return u.generateExportables(this._document.getScene(),$.extend({name:this._document.getTitle()},e),!1);var t=this._document.getEditor().getSelection();return t&&t.length?u.generateExportables(t,e,!1):[]}if("assets"===this._activeMode)return u.generateExportables(this._document.getScene(),null,!0)},m.prototype._export=async function(e){this._options||(f=this._settings);var t=this._generateExportables();let n=[];try{var r=this._previewContainer.find(".item .preview-check input");if(r.length){var s=[];r.each((function(e,t){var n=$(t);n.prop("checked")&&s.push(n.closest(".item").data("element"))}));for(var l=[],c=0;c<t.length;++c)for(var d=0;d<s.length;++d){if(s[d]instanceof o.GPage&&t[c].element instanceof o.GPage&&s[d].getReferenceId()===t[c].element.getReferenceId()||s[d]===t[c].element){l.push(t[c]);break}}t=l}var h=i.GBitmapExport.getMaximumCanvasSize();if(t.some(e=>{if("jpg"===e.format||"png"===e.format){var t=o.GLength.DPI,n=i.GBitmapExport.getBitmapPaintArea(e.element,e.size,t);if(n.getWidth()>h.width||n.getHeight()>h.height||n.getWidth()*n.getHeight()>h.area)return!0}return!1}))return void g.alert(o.GLocale.get(new o.GLocaleKey("GExportDialog","text.default-limit")).replace("%width",h.width).replace("%height",h.height).replace("%area",h.area/1024/1024+"MP")).css({width:"500px"});if(t.some(e=>"pdf"===e.format&&!i.GPDFExport.isSupported(e.element,!e.configuration||!e.configuration.ignoreEffects,e.size)))return void g.alert(o.GLocale.get(new o.GLocaleKey("GExportDialog","text.pdf-limit")).replace("%limit",Math.round(a.GPlatform.maxPngDataSize/1024/1024)+"MB")).css({width:"500px"});if(n=this._persistOpacities(t),t.length){const e=this._getSelectedStorageDestination();if(e&&!await this._checkWriteAccess(e))return;var m=$("<div></div>").addClass("export-overlay").text(o.GLocale.get(new o.GLocaleKey("GExportDialog","text.exporting"))+"...").appendTo(this._dialog),y=$("<div></div>").addClass("message").append($("<span></span>"));let n={abort:void 0,message:e=>{y.find("span").text(e)},close:()=>m.remove(),error:()=>n.message(o.GLocale.get(new o.GLocaleKey("GCommonNames","text.pdf-export-error")))};const a={storageDestination:e},r=e=>{e&&g.error(e,{closeCallback:()=>this.close()})};t.length&&"pdf"===t[0].format&&(m.append($("<button>").text(o.GLocale.get(new o.GLocaleKey("GCommonNames","text.cancel"))).on("click",()=>{n.abort&&n.abort(),n.close()})),m.append(y)),u.export(t,this._document.getStorage()||gDesigner.getDefaultStorage(),this._document.getTitle(),()=>{if(this.close(),!gDesigner.getSetting("disable_warning_unsupported_features",!1)){let e=[];for(let n of t)"svg"===n.format&&(e=e.concat(i.GSVGExport.getUnsupportedFeatures(n.element)));e.length&&new p(e).open()}},()=>this.close(),"assets"===this._activeMode,(function(e){var t=m.find("progress");t.length||m.append($("<p>").append(t=$("<progress>").attr({min:"0",max:"100"}).css("width","200px"))),t.val(e)}),n,r,a)}}finally{this._restoreOpacities(t,n)}},m.prototype._checkWriteAccess=async function(e){const t=this._document.getStorage()||gDesigner.getDefaultStorage(),n=await t.getWritePermission(e),o=n.isAuthorized();return!o&&n.hasStatusText()&&g.error(n.getStatusText(),{showTitle:!1}),o},m.prototype._formatCaption=function(e){return"pdf"===this._settings.format?e.replace(/[^0-9\.]/g,"")+"dpi":e},m.prototype._updateSizeMenu=function(){this._sizeMenu.clearItems();let e="1x";if("pdf"===this._settings.format){const t=this._document&&this._document.getScene()&&this._document.getScene().getProperty("dpi");e=isNaN(t)?"72dpi":t+"dpi",this._sizeMenu.createAddItem(o.GLocale.get(new o.GLocaleKey("GCommonNames","text.default"))+" (72dpi)"),this._sizeMenu.createAddItem(o.GLocale.get(new o.GLocaleKey("GCommonNames","text.web"))+" (96dpi)"),this._sizeMenu.createAddItem(o.GLocale.get(new o.GLocaleKey("GExportDialog","text.medium-quality"))+" (150dpi)"),this._sizeMenu.createAddItem(o.GLocale.get(new o.GLocaleKey("GExportDialog","text.high-quality"))+" (300dpi)")}else this._sizeMenu.createAddItem("1x"),this._sizeMenu.createAddItem("2x"),this._sizeMenu.createAddItem("0.5x"),this._sizeMenu.createAddItem("3x"),this._sizeMenu.createAddItem("512w"),this._sizeMenu.createAddItem("512h"),this._sizeMenu.createAddItem("128x128"),this._sizeMenu.createAddItem("300dpi");for(var t=0;t<this._sizeMenu.getItemCount();t++)if(-1!==this._sizeMenu.getItem(t).getCaption().indexOf(this._settings.size))return;this._settings.size=e,this._settingsContainer.find(".g-input-select > input").val(this._settings.size)},m.prototype._updatePreview=function(){this._previewContainer.empty();var e=this._generateExportables();let t=[];try{if(t=this._persistOpacities(e),this._settingsContainer.find("[data-setting=export-all]").css("display","canvas"!==this._activeMode||e.length>1?"":"none"),e.length){for(var n=$("<div></div>").addClass("loader").append($("<span></span>").addClass("text").text(o.GLocale.get(new o.GLocaleKey("GExportDialog","text.preparing-preview"))+"...")).appendTo(this._previewContainer),a=[],r=0;r<e.length;++r){for(var s=e[r],l=null,c=0;c<a.length;++c)if(a[c].element===s.element){l=a[c];break}l||(l={element:s.element,name:s.name,format:s.format,size:s.size,jpegQuality:s.jpegQuality,backgroundColor:s.backgroundColor,backgroundOpacity:s.backgroundOpacity,sizes:"",formats:"",configuration:s.configuration},a.push(l)),""!==l.formats&&(l.formats+=", "),l.formats+=s.format,s.size&&(""!==l.sizes&&(l.sizes+=", "),l.sizes+=s.size)}var d=null;(a.length>1||"assets"===this._activeMode)&&(d=$("<div></div>").addClass("list content").appendTo(this._previewContainer));var u=[];for(r=0;r<a.length;++r){l=a[r];var p,g,h=o.GBitmap.ImageType.PNG,f=null;"jpg"===l.format&&(h=o.GBitmap.ImageType.JPEG,f=(l.jpegQuality||100)/100);var m=window.devicePixelRatio;if(d){var y=new o.GLength(50,o.GLength.Unit.PX);p=(g=l.element.toBitmap(y,y,2,l.backgroundColor,l.configuration,null,l.backgroundOpacity)).toImageDataUrl(h,f)}else{var v=null;this._hasBackgroundColor()&&(v=l.backgroundColor);var _=l.element._getBitmapPaintArea(),b=[0],w=i.GBitmapExport.convertSizeToScale(_.getWidth(),_.getHeight(),l.size,null,b),C=_.getWidth()*(b[0]/o.GLength.DPI)*w.getX(),x=_.getHeight()*(b[0]/o.GLength.DPI)*w.getY(),S=l.size;(C>1920||x>1080)&&(S=Math.min(1920/_.getWidth(),1080/_.getHeight())+"x"),p=(g=i.GBitmapExport.export(l.element,S,v,l.configuration,null,l.backgroundOpacity,!0)).toImageDataUrl(h,f)}var E=g.getWidth()/m,A=g.getHeight()/m,T=$("<img />").attr("src",p),G=$("<div></div>").addClass("preview-image").css("background",o.GPattern.asCSSBackground(null,0)).append(T);if(u.push({img:T,w:E,h:A,preview:G}),d){var P="";"assets"===this._activeMode&&(l.sizes&&(P=l.sizes+" - "),P+=l.formats),$("<div></div>").addClass("item").data("element",l.element).append(G).append($("<div></div>").addClass("preview-check").append($("<input/>").prop("checked",!this._options||!this._options.element||this._options.element==l.element).on("change",()=>{this._updateStorageDestinationSetting()}).attr("type","checkbox"))).append($("<div></div>").addClass("preview-name").text(l.name)).append($("<div></div>").addClass("preview-meta").text(P)).appendTo(d)}else G.addClass("content").appendTo(this._previewContainer)}n.remove()}else switch(this._activeMode){case"selection":$("<div></div>").addClass("empty").text(o.GLocale.get(new o.GLocaleKey("GExportDialog","text.selection-warning"))).appendTo(this._previewContainer);break;case"assets":$("<div></div>").addClass("empty").text(o.GLocale.get(new o.GLocaleKey("GExportDialog","text.assets-warning"))).appendTo(this._previewContainer)}}finally{this._restoreOpacities(e,t)}this._updateStorageDestinationSetting(),this._updateWarningSection(e)},m.prototype._persistOpacities=function(e){let t=[];if("canvas"===this._activeMode&&"svg"!==this._settings.format&&"pdf"!==this._settings.format)for(var n=0;n<e.length;++n){var o=e[n];if(o.overrideBackground){var i=o.element.getProperty("bop");t.push({index:n,opacity:i}),o.element.setProperty("bop",0)}}return t},m.prototype._restoreOpacities=function(e,t){if(t.length>0)for(var n=0;n<e.length;++n)for(var o=e[n],i=0;i<t.length;++i)if(n===t[i].index){o.element.setProperty("bop",t[i].opacity);break}},e.exports=m},function(e,t){(function(){!function(e){"use strict";var t,n="File format is not recognized.",o="Error while reading zip file.";try{t=0===new Blob([new DataView(new ArrayBuffer(0))]).size}catch(e){}function i(){this.crc=-1}function a(){}function r(e,t){var n,o;return n=new ArrayBuffer(e),o=new Uint8Array(n),t&&o.set(t,0),{buffer:n,array:o,view:new DataView(n)}}function s(){}function l(e){var t,n=this;n.size=0,n.init=function(o,i){var a=new Blob([e],{type:"text/plain"});(t=new d(a)).init((function(){n.size=t.size,o()}),i)},n.readUint8Array=function(e,n,o,i){t.readUint8Array(e,n,o,i)}}function c(t){var n,o=this;o.size=0,o.init=function(e){for(var i=t.length;"="==t.charAt(i-1);)i--;n=t.indexOf(",")+1,o.size=Math.floor(.75*(i-n)),e()},o.readUint8Array=function(o,i,a){var s,l=r(i),c=4*Math.floor(o/3),d=4*Math.ceil((o+i)/3),u=e.atob(t.substring(c+n,d+n)),p=o-3*Math.floor(c/4);for(s=p;s<p+i;s++)l.array[s-p]=u.charCodeAt(s);a(l.array)}}function d(e){var t=this;t.size=0,t.init=function(n){t.size=e.size,n()},t.readUint8Array=function(t,n,o,i){var a=new FileReader;a.onload=function(e){o(new Uint8Array(e.target.result))},a.onerror=i;try{a.readAsArrayBuffer(function(e,t,n){if(t<0||n<0||t+n>e.size)throw new RangeError("offset:"+t+", length:"+n+", size:"+e.size);return e.slice?e.slice(t,t+n):e.webkitSlice?e.webkitSlice(t,t+n):e.mozSlice?e.mozSlice(t,t+n):e.msSlice?e.msSlice(t,t+n):void 0}(e,t,n))}catch(e){i(e)}}}function u(){}function p(e){var n;this.init=function(e){n=new Blob([],{type:"text/plain"}),e()},this.writeUint8Array=function(e,o){n=new Blob([n,t?e:e.buffer],{type:"text/plain"}),o()},this.getData=function(t,o){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.onerror=o,i.readAsText(n,e)}}function g(t){var n="",o="";this.init=function(e){n+="data:"+(t||"")+";base64,",e()},this.writeUint8Array=function(t,i){var a,r=o.length,s=o;for(o="",a=0;a<3*Math.floor((r+t.length)/3)-r;a++)s+=String.fromCharCode(t[a]);for(;a<t.length;a++)o+=String.fromCharCode(t[a]);s.length>2?n+=e.btoa(s):o=s,i()},this.getData=function(t){t(n+e.btoa(o))}}function h(e){var n=[];this.init=function(e){e()},this.writeUint8Array=function(e,o){n.push(t?e:e.buffer),o()},this.getData=function(t){t(new Blob(n,{type:e}))}}function f(e,t,n,o,i,a,r,s,l,c){var d,u,p,g=0,h=t.sn;function f(){e.removeEventListener("message",m,!1),s(u,p)}function m(t){var n=t.data,i=n.data,s=n.error;if(s)return s.toString=function(){return"Error: "+this.message},void l(s);if(n.sn===h)switch("number"==typeof n.codecTime&&(e.codecTime+=n.codecTime),"number"==typeof n.crcTime&&(e.crcTime+=n.crcTime),n.type){case"append":i?(u+=i.length,o.writeUint8Array(i,(function(){y()}),c)):y();break;case"flush":p=n.crc,i?(u+=i.length,o.writeUint8Array(i,(function(){f()}),c)):f();break;case"progress":r&&r(d+n.loaded,a);break;case"importScripts":case"newTask":case"echo":break;default:console.warn("zip.js:launchWorkerProcess: unknown message: ",n)}}function y(){(d=524288*g)<=a?n.readUint8Array(i+d,Math.min(524288,a-d),(function(n){r&&r(d,a);var o=0===d?t:{sn:h};o.type="append",o.data=n;try{e.postMessage(o,[n.buffer])}catch(t){e.postMessage(o)}g++}),l):e.postMessage({sn:h,type:"flush"})}u=0,e.addEventListener("message",m,!1),y()}function m(e,t,n,o,a,r,s,l,c,d){var u,p=0,g=0,h="input"===r,f="output"===r,m=new i;!function i(){var r;if((u=524288*p)<a)t.readUint8Array(o+u,Math.min(524288,a-u),(function(t){var o;try{o=e.append(t,(function(e){s&&s(u+e,a)}))}catch(e){return void c(e)}o?(g+=o.length,n.writeUint8Array(o,(function(){p++,setTimeout(i,1)}),d),f&&m.append(o)):(p++,setTimeout(i,1)),h&&m.append(t),s&&s(u,a)}),c);else{try{r=e.flush()}catch(e){return void c(e)}r?(f&&m.append(r),g+=r.length,n.writeUint8Array(r,(function(){l(g,m.get())}),d)):l(g,m.get())}}()}function y(t,n,o,i,r,s,l,c,d,u,p){e.zip.useWebWorkers&&l?f(t,{sn:n,codecClass:"NOOP",crcType:"input"},o,i,r,s,d,c,u,p):m(new a,o,i,r,s,"input",d,c,u,p)}function v(e){var t,n,o="",i=["Ç","ü","é","â","ä","à","å","ç","ê","ë","è","ï","î","ì","Ä","Å","É","æ","Æ","ô","ö","ò","û","ù","ÿ","Ö","Ü","ø","£","Ø","×","ƒ","á","í","ó","ú","ñ","Ñ","ª","º","¿","®","¬","½","¼","¡","«","»","_","_","_","¦","¦","Á","Â","À","©","¦","¦","+","+","¢","¥","+","+","-","-","+","-","+","ã","Ã","+","+","-","-","¦","-","+","¤","ð","Ð","Ê","Ë","È","i","Í","Î","Ï","+","+","_","_","¦","Ì","_","Ó","ß","Ô","Ò","õ","Õ","µ","þ","Þ","Ú","Û","Ù","ý","Ý","¯","´","­","±","_","¾","¶","§","÷","¸","°","¨","·","¹","³","²","_"," "];for(t=0;t<e.length;t++)o+=(n=255&e.charCodeAt(t))>127?i[n-128]:String.fromCharCode(n);return o}function _(e){return decodeURIComponent(escape(e))}function b(e){var t,n="";for(t=0;t<e.length;t++)n+=String.fromCharCode(e[t]);return n}function w(e,t,n,o,i){e.version=t.view.getUint16(n,!0),e.bitFlag=t.view.getUint16(n+2,!0),e.compressionMethod=t.view.getUint16(n+4,!0),e.lastModDateRaw=t.view.getUint32(n+6,!0),e.lastModDate=function(e){var t=(4294901760&e)>>16,n=65535&e;try{return new Date(1980+((65024&t)>>9),((480&t)>>5)-1,31&t,(63488&n)>>11,(2016&n)>>5,2*(31&n),0)}catch(e){}}(e.lastModDateRaw),1!=(1&e.bitFlag)?((o||8!=(8&e.bitFlag))&&(e.crc32=t.view.getUint32(n+10,!0),e.compressedSize=t.view.getUint32(n+14,!0),e.uncompressedSize=t.view.getUint32(n+18,!0)),4294967295!==e.compressedSize&&4294967295!==e.uncompressedSize?(e.filenameLength=t.view.getUint16(n+22,!0),e.extraFieldLength=t.view.getUint16(n+24,!0)):i("File is using Zip64 (4gb+ file size).")):i("File contains encrypted entry.")}function C(t,i,a){var s=0;function l(){}l.prototype.getData=function(o,i,l,c){var d=this;function u(e,t){c&&!function(e){var t=r(4);return t.view.setUint32(0,e),d.crc32==t.view.getUint32(0)}(t)?a("CRC failed."):o.getData((function(e){i(e)}))}function p(e){a(e||"Error while reading file data.")}function g(e){a(e||"Error while writing file data.")}t.readUint8Array(d.offset,30,(function(i){var h,v=r(i.length,i);1347093252==v.view.getUint32(0)?(w(d,v,4,!1,a),h=d.offset+30+d.filenameLength+d.extraFieldLength,o.init((function(){0===d.compressionMethod?y(d._worker,s++,t,o,h,d.compressedSize,c,u,l,p,g):function(t,n,o,i,a,r,s,l,c,d,u){var p=s?"output":"none";e.zip.useWebWorkers?f(t,{sn:n,codecClass:"Inflater",crcType:p},o,i,a,r,c,l,d,u):m(new e.zip.Inflater,o,i,a,r,p,c,l,d,u)}(d._worker,s++,t,o,h,d.compressedSize,c,u,l,p,g)}),g)):a(n)}),p)};var c={getEntries:function(e){var i=this._worker;!function(e){if(t.size<22)a(n);else{i(22,(function(){i(Math.min(65558,t.size),(function(){a(n)}))}))}function i(n,i){t.readUint8Array(t.size-n,n,(function(t){for(var n=t.length-22;n>=0;n--)if(80===t[n]&&75===t[n+1]&&5===t[n+2]&&6===t[n+3])return void e(new DataView(t.buffer,n,22));i()}),(function(){a(o)}))}}((function(s){var c,d;c=s.getUint32(16,!0),d=s.getUint16(8,!0),c<0||c>=t.size?a(n):t.readUint8Array(c,t.size-c,(function(t){var o,s,c,u,p=0,g=[],h=r(t.length,t);for(o=0;o<d;o++){if((s=new l)._worker=i,1347092738!=h.view.getUint32(p))return void a(n);w(s,h,p+6,!0,a),s.commentLength=h.view.getUint16(p+32,!0),s.directory=16==(16&h.view.getUint8(p+38)),s.offset=h.view.getUint32(p+42,!0),c=b(h.array.subarray(p+46,p+46+s.filenameLength)),s.filename=2048==(2048&s.bitFlag)?_(c):v(c),s.directory||"/"!=s.filename.charAt(s.filename.length-1)||(s.directory=!0),u=b(h.array.subarray(p+46+s.filenameLength+s.extraFieldLength,p+46+s.filenameLength+s.extraFieldLength+s.commentLength)),s.comment=2048==(2048&s.bitFlag)?_(u):v(u),g.push(s),p+=46+s.filenameLength+s.extraFieldLength+s.commentLength}e(g)}),(function(){a(o)}))}))},close:function(e){this._worker&&(this._worker.terminate(),this._worker=null),e&&e()},_worker:null};e.zip.useWebWorkers?T("inflater",(function(e){c._worker=e,i(c)}),(function(e){a(e)})):i(c)}function x(e){return unescape(encodeURIComponent(e))}function S(e){var t,n=[];for(t=0;t<e.length;t++)n.push(e.charCodeAt(t));return n}function E(t,n,o,i){var a={},s=[],l=0,c=0;function d(e){o(e||"Error while writing zip file.")}function u(e){o(e||"Error while reading file data.")}var p={add:function(n,p,g,h,v){var _,b,w,C=this._worker;function E(e,n){var o=r(16);l+=e||0,o.view.setUint32(0,1347094280),void 0!==n&&(_.view.setUint32(10,n,!0),o.view.setUint32(4,n,!0)),p&&(o.view.setUint32(8,e,!0),_.view.setUint32(14,e,!0),o.view.setUint32(12,p.size,!0),_.view.setUint32(18,p.size,!0)),t.writeUint8Array(o.array,(function(){l+=16,g()}),d)}function A(){v=v||{},n=n.trim(),v.directory&&"/"!=n.charAt(n.length-1)&&(n+="/"),a.hasOwnProperty(n)?o("File already exists."):(b=S(x(n)),s.push(n),function(e){var o;w=v.lastModDate||new Date,_=r(26),a[n]={headerArray:_.array,directory:v.directory,filename:b,offset:l,comment:S(x(v.comment||""))},_.view.setUint32(0,335546376),v.version&&_.view.setUint8(0,v.version),i||0===v.level||v.directory||_.view.setUint16(4,2048),_.view.setUint16(6,(w.getHours()<<6|w.getMinutes())<<5|w.getSeconds()/2,!0),_.view.setUint16(8,(w.getFullYear()-1980<<4|w.getMonth()+1)<<5|w.getDate(),!0),_.view.setUint16(22,b.length,!0),(o=r(30+b.length)).view.setUint32(0,1347093252),o.array.set(_.array,4),o.array.set(b,30),l+=o.array.length,t.writeUint8Array(o.array,e,d)}((function(){p?i||0===v.level?y(C,c++,p,t,0,p.size,!0,E,h,u,d):function(t,n,o,i,a,r,s,l,c){e.zip.useWebWorkers?f(t,{sn:n,options:{level:a},codecClass:"Deflater",crcType:"input"},o,i,0,o.size,s,r,l,c):m(new e.zip.Deflater,o,i,0,o.size,"input",s,r,l,c)}(C,c++,p,t,v.level,E,h,u,d):E()})))}p?p.init(A,u):A()},close:function(e){this._worker&&(this._worker.terminate(),this._worker=null);var n,o,i,c=0,u=0;for(o=0;o<s.length;o++)c+=46+(i=a[s[o]]).filename.length+i.comment.length;for(n=r(c+22),o=0;o<s.length;o++)i=a[s[o]],n.view.setUint32(u,1347092738),n.view.setUint16(u+4,5120),n.array.set(i.headerArray,u+6),n.view.setUint16(u+32,i.comment.length,!0),i.directory&&n.view.setUint8(u+38,16),n.view.setUint32(u+42,i.offset,!0),n.array.set(i.filename,u+46),n.array.set(i.comment,u+46+i.filename.length),u+=46+i.filename.length+i.comment.length;n.view.setUint32(u,1347093766),n.view.setUint16(u+8,s.length,!0),n.view.setUint16(u+10,s.length,!0),n.view.setUint32(u+12,c,!0),n.view.setUint32(u+16,l,!0),t.writeUint8Array(n.array,(function(){t.getData(e)}),d)},_worker:null};e.zip.useWebWorkers?T("deflater",(function(e){p._worker=e,n(p)}),(function(e){o(e)})):n(p)}i.prototype.append=function(e){for(var t=0|this.crc,n=this.table,o=0,i=0|e.length;o<i;o++)t=t>>>8^n[255&(t^e[o])];this.crc=t},i.prototype.get=function(){return~this.crc},i.prototype.table=function(){var e,t,n,o=[];for(e=0;e<256;e++){for(n=e,t=0;t<8;t++)1&n?n=n>>>1^3988292384:n>>>=1;o[e]=n}return o}(),a.prototype.append=function(e,t){return e},a.prototype.flush=function(){},l.prototype=new s,l.prototype.constructor=l,c.prototype=new s,c.prototype.constructor=c,d.prototype=new s,d.prototype.constructor=d,u.prototype.getData=function(e){e(this.data)},p.prototype=new u,p.prototype.constructor=p,g.prototype=new u,g.prototype.constructor=g,h.prototype=new u,h.prototype.constructor=h;var A={deflater:["z-worker.js","deflate.js"],inflater:["z-worker.js","inflate.js"]};function T(t,n,o){if(null===e.zip.workerScripts||null===e.zip.workerScriptsPath){var i,a,r;if(e.zip.workerScripts){if(i=e.zip.workerScripts[t],!Array.isArray(i))return void o(new Error("zip.workerScripts."+t+" is not an array!"));a=i,r=document.createElement("a"),i=a.map((function(e){return r.href=e,r.href}))}else(i=A[t].slice(0))[0]=(e.zip.workerScriptsPath||"")+i[0];var s=new Worker(i[0]);s.codecTime=s.crcTime=0,s.postMessage({type:"importScripts",scripts:i.slice(1)}),s.addEventListener("message",(function e(t){var i=t.data;if(i.error)return s.terminate(),void o(i.error);"importScripts"===i.type&&(s.removeEventListener("message",e),s.removeEventListener("error",l),n(s))})),s.addEventListener("error",l)}else o(new Error("Either zip.workerScripts or zip.workerScriptsPath may be set, not both."));function l(e){s.terminate(),o(e)}}function G(e){console.error(e)}e.zip={Reader:s,Writer:u,BlobReader:d,Data64URIReader:c,TextReader:l,BlobWriter:h,Data64URIWriter:g,TextWriter:p,createReader:function(e,t,n){n=n||G,e.init((function(){C(e,t,n)}),n)},createWriter:function(e,t,n,o){n=n||G,o=!!o,e.init((function(){E(e,t,n,o)}),n)},useWebWorkers:!0,workerScriptsPath:null,workerScripts:null}}(this)}).call(window)},function(e,t){(function(){!function(){"use strict";var e,t,n=zip.TextWriter,o=zip.BlobWriter,i=zip.Data64URIWriter,a=zip.Reader,r=zip.TextReader,s=zip.BlobReader,l=zip.Data64URIReader,c=zip.createReader,d=zip.createWriter;function u(e){var t,n=this;n.size=0,n.init=function(t){n.size=e.uncompressedSize,t()},n.readUint8Array=function(i,a,r,l){!function(i){n.data?i():e.getData(new o,(function(e){n.data=e,t=new s(e),i()}),null,n.checkCrc32)}((function(){t.readUint8Array(i,a,r,l)}))}}function p(e){var t=0;return function e(n){t+=n.uncompressedSize||0,n.children.forEach(e)}(e),t}function g(e,t,n){var o=0;function i(){++o<e.children.length?a(e.children[o]):t()}function a(e){e.directory?g(e,i,n):(e.reader=new e.Reader(e.data,n),e.reader.init((function(){e.uncompressedSize=e.reader.size,i()})))}e.children.length?a(e.children[o]):t()}function h(e){var t=e.parent.children;t.forEach((function(n,o){n.id==e.id&&t.splice(o,1)}))}function f(e,t,n,o){t.isDirectory?function e(t,n,i){!function(e,t){var n=[];if(e.isDirectory){var i=e.createReader();!function e(){i.readEntries((function(o){o.length?(n=n.concat(o),e()):t(n)}),o)}()}e.isFile&&t(n)}(n,(function(n){var a=0;function r(){var s=n[a];s?function(n){function i(t){e(t,n,(function(){a++,r()}))}n.isDirectory&&i(t.addDirectory(n.name)),n.isFile&&n.file((function(e){var o=t.addBlob(n.name,e);o.uncompressedSize=e.size,i(o)}),o)}(s):i()}r()}))}(e,t,n):t.file((function(o){e.addBlob(t.name,o),n()}),o)}function m(e,t,n,o,i,a,r){var s=0;t.directory?function e(t,n,o,i,a,l){var c=0;function d(){var u=n.children[c];u?function(n){function o(t){s+=n.uncompressedSize||0,e(t,n,(function(){c++,d()}),i,a,l)}n.directory?t.getDirectory(n.name,{create:!0},o,a):t.getFile(n.name,{create:!0},(function(e){n.getData(new zip.FileWriter(e,zip.getMimeType(n.name)),o,(function(e){i&&i(s+e,l)}),r)}),a)}(u):o()}d()}(e,t,n,o,i,a):t.getData(new zip.FileWriter(e,zip.getMimeType(t.name)),n,o,r)}function y(e){e.entries=[],e.root=new w(e)}function v(e,t,n,o){if(e.directory)return o?new w(e.fs,t,n,e):new b(e.fs,t,n,e);throw"Parent entry is not a directory."}function _(){}function b(e,t,n,o){_.prototype.init.call(this,e,t,n,o),this.Reader=n.Reader,this.Writer=n.Writer,this.data=n.data,n.getData&&(this.getData=n.getData)}function w(e,t,n,o){_.prototype.init.call(this,e,t,n,o),this.directory=!0}function C(){y(this)}u.prototype=new a,u.prototype.constructor=u,u.prototype.checkCrc32=!1,_.prototype={init:function(e,t,n,o){if(e.root&&o&&o.getChildByName(t))throw"Entry filename already exists.";n||(n={}),this.fs=e,this.name=t,this.id=e.entries.length,this.parent=o,this.children=[],this.zipVersion=n.zipVersion||20,this.uncompressedSize=0,e.entries.push(this),o&&this.parent.children.push(this)},getFileEntry:function(e,t,n,o,i){var a=this;g(a,(function(){m(e,a,t,n,o,p(a),i)}),o)},moveTo:function(e){if(!e.directory)throw"Target entry is not a directory.";if(e.isDescendantOf(this))throw"Entry is a ancestor of target entry.";if(this!=e){if(e.getChildByName(this.name))throw"Entry filename already exists.";h(this),this.parent=e,e.children.push(this)}},getFullname:function(){for(var e=this.name,t=this.parent;t;)e=(t.name?t.name+"/":"")+e,t=t.parent;return e},isDescendantOf:function(e){for(var t=this.parent;t&&t.id!=e.id;)t=t.parent;return!!t}},_.prototype.constructor=_,b.prototype=e=new _,e.constructor=b,e.getData=function(e,t,n,o){var i=this;!e||e.constructor==i.Writer&&i.data?t(i.data):(i.reader||(i.reader=new i.Reader(i.data,o)),i.reader.init((function(){e.init((function(){!function(e,t,n,o,i){var a=0;!function r(){var s=524288*a;o&&o(s,e.size),s<e.size?e.readUint8Array(s,Math.min(524288,e.size-s),(function(e){t.writeUint8Array(new Uint8Array(e),(function(){a++,r()}))}),i):t.getData(n)}()}(i.reader,e,t,n,o)}),o)})))},e.getText=function(e,t,o,i){this.getData(new n(i),e,t,o)},e.getBlob=function(e,t,n,i){this.getData(new o(e),t,n,i)},e.getData64URI=function(e,t,n,o){this.getData(new i(e),t,n,o)},w.prototype=t=new _,t.constructor=w,t.addDirectory=function(e){return v(this,e,null,!0)},t.addText=function(e,t){return v(this,e,{data:t,Reader:r,Writer:n})},t.addBlob=function(e,t){return v(this,e,{data:t,Reader:s,Writer:o})},t.addData64URI=function(e,t){return v(this,e,{data:t,Reader:l,Writer:i})},t.addFileEntry=function(e,t,n){f(this,e,t,n)},t.addData=function(e,t){return v(this,e,t)},t.importBlob=function(e,t,n){this.importZip(new s(e),t,n)},t.importText=function(e,t,n){this.importZip(new r(e),t,n)},t.importData64URI=function(e,t,n){this.importZip(new l(e),t,n)},t.exportBlob=function(e,t,n){this.exportZip(new o("application/zip"),e,t,n)},t.exportText=function(e,t,o){this.exportZip(new n,e,t,o)},t.exportFileEntry=function(e,t,n,o){this.exportZip(new zip.FileWriter(e,"application/zip"),t,n,o)},t.exportData64URI=function(e,t,n){this.exportZip(new i("application/zip"),e,t,n)},t.importZip=function(e,t,n){var o=this;c(e,(function(e){e.getEntries((function(e){e.forEach((function(e){var t=o,n=e.filename.split("/"),i=n.pop();n.forEach((function(e){t=t.getChildByName(e)||new w(o.fs,e,null,t)})),e.directory||v(t,i,{data:e,Reader:u})})),t()}))}),n)},t.exportZip=function(e,t,n,o){var i=this;g(i,(function(){d(e,(function(e){!function(e,t,n,o,i){var a=0;!function e(t,n,o,i,r){var s=0;!function l(){var c=n.children[s];c?t.add(c.getFullname(),c.reader,(function(){a+=c.uncompressedSize||0,e(t,c,(function(){s++,l()}),i,r)}),(function(e){i&&i(a+e,r)}),{directory:c.directory,version:c.zipVersion}):o()}()}(e,t,n,o,i)}(e,i,(function(){e.close(t)}),n,p(i))}),o)}),o)},t.getChildByName=function(e){var t,n;for(t=0;t<this.children.length;t++)if((n=this.children[t]).name==e)return n},C.prototype={remove:function(e){h(e),this.entries[e.id]=null},find:function(e){var t,n=e.split("/"),o=this.root;for(t=0;o&&t<n.length;t++)o=o.getChildByName(n[t]);return o},getById:function(e){return this.entries[e]},importBlob:function(e,t,n){y(this),this.root.importBlob(e,t,n)},importText:function(e,t,n){y(this),this.root.importText(e,t,n)},importData64URI:function(e,t,n){y(this),this.root.importData64URI(e,t,n)},exportBlob:function(e,t,n){this.root.exportBlob(e,t,n)},exportText:function(e,t,n){this.root.exportText(e,t,n)},exportFileEntry:function(e,t,n,o){this.root.exportFileEntry(e,t,n,o)},exportData64URI:function(e,t,n){this.root.exportData64URI(e,t,n)}},zip.fs={FS:C,ZipDirectoryEntry:w,ZipFileEntry:b},zip.getMimeType=function(){return"application/octet-stream"}}()}).call(window)},function(e,t){(function(){!function(e){"use strict";function t(e,t){var n={raw:!0,chunkSize:1048576};t&&"number"==typeof t.level&&(n.level=t.level),this._backEnd=e?new pako.Deflate(n):new pako.Inflate(n),this._chunks=[],this._dataLength=0,this._backEnd.onData=this._onData.bind(this)}function n(e){t.call(this,!0,e)}function o(){t.call(this,!1)}t.prototype._onData=function(e){this._chunks.push(e),this._dataLength+=e.length},t.prototype._fetchData=function(){var e=this._backEnd;if(0!==e.err)throw new Error(e.msg);var t,n=this._chunks;if(1===n.length)t=n[0];else if(n.length>1){t=new Uint8Array(this._dataLength);for(var o=0,i=n.length,a=0;o<i;o++){var r=n[o];t.set(r,a),a+=r.length}}return n.length=0,this._dataLength=0,t},t.prototype.append=function(e,t){return this._backEnd.push(e,!1),this._fetchData()},t.prototype.flush=function(){return this._backEnd.push(new Uint8Array(0),!0),this._fetchData()},n.prototype=Object.create(t.prototype),o.prototype=Object.create(t.prototype);var i=e.zip||e;i.Deflater=i._pako_Deflater=n,i.Inflater=i._pako_Inflater=o}(this)}).call(window)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REARRANGE_TAB_SELECTOR=t.REARRANGE_TAB_CLASS=void 0,t.allowRearrangeTabs=function(e){$(".tabs").sortable({axis:"x",containment:$("#header"),revert:150,activate:function(e,t){$(t.item[0]).trigger("click"),$(t.placeholder[0]).css({height:"1px"});var n=t.item.offset().top;$(".tabs").children().map((function(){$(this).hasClass("ui-sortable-placeholder")||$(this).offset().top>n&&$(this).addClass("hide")}))},beforeStop:function(){$(".tabs").children().removeClass("hide")}}),$("#mainframe").on("click",(function(){$(".more-button").hasClass("active")&&$(".more-button").removeClass("active")})),$("<div></div>").addClass("more-button").append($("<div></div>").addClass("more-symbol")).append($("<div></div>").addClass("moreTab")).on("click",(function(){gDesigner.stats("header_click_more-button",$(".more-button").hasClass("active")?"Close":"Open"),$(".more-button").hasClass("active")?$(".more-button").removeClass("active"):setTimeout((function(){$(".more-button").addClass("active")}),10),a()})).appendTo(e)},t.toggleRearrangeTabsVisibility=function(e,t){$(e).find(i).css("display",t?"":"none")},t.updateTabsInterface=a,n(1493);const o=t.REARRANGE_TAB_CLASS="more-button",i=t.REARRANGE_TAB_SELECTOR=".".concat(o);function a(){var e=0,t=0;$(".moreTab").empty(),$(".moreTab").append($(".tabs").children().clone(!0)),$(".moreTab").children().children().prepend($("<span/>").addClass("select")),$(".moreTab").css({left:-$(".moreTab").width(),maxHeight:$("body").height()-50}),$(".moreTab").children().off("contextmenu"),$(".tabs").children().each((function(n){if(t);else if((e+=$(this).outerWidth()+7.5)>$(".section.windows").outerWidth())return t=n})),setTimeout((function(){t&&$(".tabs>div").index($(".tab.g-active"))>=t&&$(".tabs").find(".tab.g-active").insertBefore($(".tabs").children().eq(t-1)),$(".moreTab").children().eq($(".tabs>div").index($(".tab.g-active"))).children().children(".select").addClass("more-tab-icon")}),100)}},function(e,t,n){var o,i,a;i=[n(160),n(1494),n(1495),n(1233),n(1235),n(587),n(1234)],void 0===(a="function"==typeof(o=function(e){return e.widget("ui.sortable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&e<t+n},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),e.each(this.items,(function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")}))},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var o=null,i=!1,a=this;return!(this.reverting||this.options.disabled||"static"===this.options.type||(this._refreshItems(t),e(t.target).parents().each((function(){if(e.data(this,a.widgetName+"-item")===a)return o=e(this),!1})),e.data(t.target,a.widgetName+"-item")===a&&(o=e(t.target)),!o||this.options.handle&&!n&&(e(this.options.handle,o).find("*").addBack().each((function(){this===t.target&&(i=!0)})),!i)||(this.currentItem=o,this._removeCurrentsFromItems(),0)))},_mouseStart:function(t,n,o){var i,a,r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",r.cursor),this.storedStylesheet=e("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(a)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!o)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,o,i,a,r=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(t.pageY-this.document.scrollTop()<r.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-r.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<r.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+r.scrollSpeed)),t.pageX-this.document.scrollLeft()<r.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-r.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<r.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+r.scrollSpeed))),!1!==s&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=(o=this.items[n]).item[0],(a=this._intersectsWithPointer(o))&&o.instance===this.currentContainer&&!(i===this.currentItem[0]||this.placeholder[1===a?"next":"prev"]()[0]===i||e.contains(this.placeholder[0],i)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],i))){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(o))break;this._rearrange(t,o),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var o=this,i=this.placeholder.offset(),a=this.options.axis,r={};a&&"x"!==a||(r.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(r.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(r,parseInt(this.options.revert,10)||500,(function(){o._clear(t)}))}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),o=[];return t=t||{},e(n).each((function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&o.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))})),!o.length&&t.key&&o.push(t.key+"="),o.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),o=[];return t=t||{},n.each((function(){o.push(e(t.item||this).attr(t.attribute||"id")||"")})),o},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,o=this.positionAbs.top,i=o+this.helperProportions.height,a=e.left,r=a+e.width,s=e.top,l=s+e.height,c=this.offset.click.top,d=this.offset.click.left,u="x"===this.options.axis||o+c>s&&o+c<l,p="y"===this.options.axis||t+d>a&&t+d<r,g=u&&p;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?g:a<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<r&&s<o+this.helperProportions.height/2&&i-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t,n,o="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width);return!(!o||!i)&&(t=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection(),this.floating?"right"===n||"down"===t?2:1:t&&("down"===t?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),o=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?"right"===i&&n||"left"===i&&!n:o&&("down"===o&&t||"up"===o&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,o,i,a,r=[],s=[],l=this._connectWith();if(l&&t)for(n=l.length-1;n>=0;n--)for(o=(i=e(l[n],this.document[0])).length-1;o>=0;o--)(a=e.data(i[o],this.widgetFullName))&&a!==this&&!a.options.disabled&&s.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);function c(){r.push(this)}for(s.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=s.length-1;n>=0;n--)s[n][0].each(c);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,(function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0}))},_refreshItems:function(t){this.items=[],this.containers=[this];var n,o,i,a,r,s,l,c,d=this.items,u=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],p=this._connectWith();if(p&&this.ready)for(n=p.length-1;n>=0;n--)for(o=(i=e(p[n],this.document[0])).length-1;o>=0;o--)(a=e.data(i[o],this.widgetFullName))&&a!==this&&!a.options.disabled&&(u.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(n=u.length-1;n>=0;n--)for(r=u[n][1],o=0,c=(s=u[n][0]).length;o<c;o++)(l=e(s[o])).data(this.widgetName+"-item",r),d.push({item:l,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var n,o,i,a;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),n=this.items.length-1;n>=0;n--)(o=this.items[n]).instance!==this.currentContainer&&this.currentContainer&&o.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?e(this.options.toleranceElement,o.item):o.item,t||(o.width=i.outerWidth(),o.height=i.outerHeight()),a=i.offset(),o.left=a.left,o.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)a=this.containers[n].element.offset(),this.containers[n].containerCache.left=a.left,this.containers[n].containerCache.top=a.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){var n,o=(t=t||this).options;o.placeholder&&o.placeholder.constructor!==String||(n=o.placeholder,o.placeholder={element:function(){var o=t.currentItem[0].nodeName.toLowerCase(),i=e("<"+o+">",t.document[0]);return t._addClass(i,"ui-sortable-placeholder",n||t.currentItem[0].className)._removeClass(i,"ui-sortable-helper"),"tbody"===o?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(i)):"tr"===o?t._createTrPlaceholder(t.currentItem,i):"img"===o&&i.attr("src",t.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(e,i){n&&!o.forcePlaceholderSize||(i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(o.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),o.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,n){var o=this;t.children().each((function(){e("<td>&#160;</td>",o.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)}))},_contactContainers:function(t){var n,o,i,a,r,s,l,c,d,u,p=null,g=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(p&&e.contains(this.containers[n].element[0],p.element[0]))continue;p=this.containers[n],g=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[g].containerCache.over||(this.containers[g]._trigger("over",t,this._uiHash(this)),this.containers[g].containerCache.over=1);else{for(i=1e4,a=null,r=(d=p.floating||this._isFloating(this.currentItem))?"left":"top",s=d?"width":"height",u=d?"pageX":"pageY",o=this.items.length-1;o>=0;o--)e.contains(this.containers[g].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(l=this.items[o].item.offset()[r],c=!1,t[u]-l>this.items[o][s]/2&&(c=!0),Math.abs(t[u]-l)<i&&(i=Math.abs(t[u]-l),a=this.items[o],this.direction=c?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[g])return void(this.currentContainer.containerCache.over||(this.containers[g]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[g].element,!0),this._trigger("change",t,this._uiHash()),this.containers[g]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",t,this._uiHash(this)),this.containers[g].containerCache.over=1}},_createHelper:function(t){var n=this.options,o=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return o.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(o[0]),o[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),o[0].style.width&&!n.forceHelperSize||o.width(this.currentItem.width()),o[0].style.height&&!n.forceHelperSize||o.height(this.currentItem.height()),o},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,o,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),"document"!==i.containment&&"window"!==i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),o="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(o?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(o?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var o="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*o+this.offset.parent.top*o-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:i.scrollTop())*o,left:n.left+this.offset.relative.left*o+this.offset.parent.left*o-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:i.scrollLeft())*o}},_generatePosition:function(t){var n,o,i=this.options,a=t.pageX,r=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((r-this.originalPageY)/i.grid[1])*i.grid[1],r=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,o=this.originalPageX+Math.round((a-this.originalPageX)/i.grid[0])*i.grid[0],a=this.containment?o-this.offset.click.left>=this.containment[0]&&o-this.offset.click.left<=this.containment[2]?o:o-this.offset.click.left>=this.containment[0]?o-i.grid[0]:o+i.grid[0]:o)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(e,t,n,o){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay((function(){i===this.counter&&this.refreshPositions(!o)}))},_clear:function(e,t){this.reverting=!1;var n,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function i(e,t,n){return function(o){n._trigger(e,o,t._uiHash(t))}}for(this.fromOutside&&!t&&o.push((function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))})),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||o.push((function(e){this._trigger("update",e,this._uiHash())})),this!==this.currentContainer&&(t||(o.push((function(e){this._trigger("remove",e,this._uiHash())})),o.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||o.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(o.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(n=0;n<o.length;n++)o[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})})?o.apply(t,i):o)||(e.exports=a)},function(e,t,n){var o,i,a;i=[n(160),n(1233),n(587),n(1234)],void 0===(a="function"==typeof(o=function(e){var t=!1;return e(document).on("mouseup",(function(){t=!1})),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).on("click."+this.widgetName,(function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var o=this,i=1===n.which,a=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&e(n.target).closest(this.options.cancel).length;return!(i&&!a&&this._mouseCapture(n)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){o.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=!1!==this._mouseStart(n),!this._mouseStarted)?(n.preventDefault(),0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return o._mouseMove(e)},this._mouseUpDelegate=function(e){return o._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,0)))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&e.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,n.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})?o.apply(t,i):o)||(e.exports=a)},function(e,t,n){var o,i,a;i=[n(160),n(587)],void 0===(a="function"==typeof(o=function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(n){return!!e.data(n,t)}})):function(t,n,o){return!!e.data(t,o[3])}})})?o.apply(t,i):o)||(e.exports=a)},function(e,t,n){"use strict";n(28);const o=n(378),i=n(71),a=n(78),r=n(203);function s(e){this._htmlElement=e}s.prototype._root=null,s.prototype._panels=[],s.prototype._activePanel=null,s.prototype.init=function(){this._root=$("<div></div>").addClass("root").appendTo(this._htmlElement),gravit.footer.forEach(e=>{let t=$("<div></div>").addClass("panel-container");this._root.append(t),e.init(t),this._panels.push({container:t,panel:e}),this._activePanel||this.setActivePanel(e.getId()),e.addEventListener(o.UpdateEvent,function(){this._updateFooter(),gDesigner.relayout()}.bind(this))}),this._updateFooter(),gDesigner.addEventListener(i,this._documentEvent,this)},s.prototype._documentEvent=function(e){const t=e.document;switch(e.type){case i.Type.Activated:t.addEventListener(r,this._documentStatusChanged,this),this._document=t;break;case i.Type.Deactivated:t.removeEventListener(r,this._documentStatusChanged,this),this._document=null}},s.prototype._documentStatusChanged=function(e){if(!this._document||gDesigner.getActiveDocument()!==this._document)return;const t=e=>this._htmlElement.toggleClass("document-loading",e);switch(e.status){case a.Loading:case a.Saving:case a.Syncing:case a.Downloading:if((this._document.isCloudFile()||this._document.isExternalFile())&&e.status===a.Saving)return;t(!0);break;case a.LoadCancelled:case a.DownloadCancelled:case a.SaveCancelled:case a.Saved:case a.SyncFailed:case a.Downloaded:case a.DownloadFailed:case a.Loaded:case a.LoadFailed:t(!1)}},s.prototype._updateFooter=function(){const e=this._panels.some(e=>e.panel.isEnabled());this._htmlElement.css("display",e?"":"none")},s.prototype.setActivePanel=function(e){for(var t=0;t<this._panels.length;++t){var n=this._panels[t],o=n.panel.getId();o===e?(n.container.css("display",""),n.panel.activate()):(n.container.css("display","none"),o===this._activePanel&&n.panel.deactivate())}this._activePanel=e},s.prototype.relayout=function(){},s.prototype.getHeight=function(){return this._htmlElement[0].clientHeight},e.exports=s},function(e,t,n){"use strict";var o=n(14);n(7),n(18),n(3),n(29);var i=n(9),a=n(1),r=o(n(71));const s=n(37),l=n(842),c=n(77),d=n(784),u=n(278),{bypassEmailVerification:p}=i.defaultUserSettings;function g(e){this._htmlElement=e}a.GObject.inherit(g,a.GObject),g.prototype._interval=null,g.prototype._needToShow=!1,g.prototype.init=function(){this.update(),gDesigner.addEventListener(d,this._userPropertiesChangedEvent,this),gDesigner.addEventListener(u,this._userLoggedEvent,this),gDesigner.addEventListener(r.default,this._documentEvent,this)},g.prototype.update=async function(){return gDesigner.getUser().then(e=>this._updateInfo(e))},g.prototype._userPropertiesChangedEvent=function(e){this._updateInfo(e.user)},g.prototype._togglePanel=function(e){"boolean"==typeof e&&(!e&&!this._needToShow||e)&&gDesigner.setPartVisible(l.Info,e)},g.prototype._userLoggedEvent=function(e){this._updateInfo(e.user)},g.prototype._documentEvent=function(e){this._togglePanel(!1),this._updateSaveInfo(e),this._updateDocumentSubscription(e)},g.prototype._updateSaveInfo=function(){},g.prototype._updateDocumentSubscription=function(){},g.prototype._updateInfo=function(e){if(this._togglePanel(!1),this._interval&&clearInterval(this._interval),!p&&gDesigner.isEnabledSubscriptions()&&!gDesigner.getLicense().isGuest()&&e&&!e.isEmailVerified()&&!e.isAnonymous()){this._interval=setInterval(this.update.bind(this),i.DateAPI.daysToMilliseconds(1)),i.gApi.listen("/confirmation",()=>this.update(),!0);let t=new Date(e.created);e.email_expire&&(t=new Date(e.email_expire));let n=a.GLocale.get(new a.GLocaleKey("GInfo","text.title")).replace("%date",a.GLocale.toLocaleDate(t));this._htmlElement.empty().append($("<span></span>").text(n)).append($("<span/>").addClass("link").text(a.GLocale.get(new a.GLocaleKey("GInfo","text.resend-email"))).on("click",()=>{let t,n;if(gContainer.getRuntime()===c.Runtime.Electron){const e=gContainer.getPlatform();"darwin"!==e&&"win32"!==e||(t="designer://"),n=gDesigner.getAssetsURL()}else n=location.origin;return i.gApi.resendEmailConfirmation({appUrl:t,webUrl:n,email:e.email,force:!0,origin:location.origin}).then(()=>{s.custom({title:a.GLocale.get(new a.GLocaleKey("GInfo","text.email-sent")),subtitle:a.GLocale.get(new a.GLocaleKey("GInfo","text.email-sent-submessage")),icon:"ok"})}).catch(e=>{s.custom({title:a.GLocale.get(new a.GLocaleKey("GInfo","text.something-went-wrong")),subtitle:i.gApi.formatError(e)})}),!1})),this._togglePanel(!0)}},g.prototype.toString=function(){return"[Object GInfo]"},e.exports=g},function(e,t,n){"use strict";n(3);var o=n(1),i=n(45),a=n(61),r=n(223),s=n(429),l=n(115),c=n(1229),d=n(431),u=n(427);const p=n(125);function g(){}o.GObject.inherit(g,l),g.prototype._panel=null,g.prototype._toolbar=null,g.prototype._exportButton=null,g.prototype._createSliceButton=null,g.prototype._document=null,g.prototype._elements=null,g.prototype._sizeMenu=null,g.prototype.isSticky=function(){return!0},g.prototype.init=function(e,t){this._panel=e,this._toolbar=t,t.addClass("list-toolbar"),$("<label></label>").addClass("panel-title").text(o.GLocale.get(new o.GLocaleKey("GExportProperties","text.make-exportable"))).appendTo(t),this._exportButton=$("<button></button>").addClass("btn-export").attr("id","btn-export").attr("data-title",o.GLocale.get(new o.GLocaleKey("GCommonNames","text.export"))+"...").append($("<span></span>").addClass("gravit-icon-export")).on("click",this._export.bind(this)).appendTo(t),this._createSliceButton=$("<button></button>").attr("data-title",o.GLocale.get(new o.GLocaleKey("GExportProperties","action.create-slice"))).append($("<span></span>").addClass("gravit-icon-slice")).on("click",this._createSlice.bind(this)).appendTo(t).gRichTooltip(a.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GExportProperties","text.create-slice-tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GExportProperties","text.create-slice-tooltip-description")),learnMore:"https://documentation.corelvector.com/import-export/export/#slices"})),$("<button></button>").attr("data-title",o.GLocale.get(new o.GLocaleKey("GExportProperties","action.add"))).append($("<span></span>").addClass("gravit-icon-plus")).on("click",this._addExport.bind(this)).appendTo(t).gRichTooltip(a.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GExportProperties","text.add-export-tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GExportProperties","text.add-export-tooltip-description")),learnMore:"https://documentation.corelvector.com/import-export/export/#mass-exporting-assets-and-slices"})),this._sizeMenu=new r,this._sizeMenu.createAddItem("1x"),this._sizeMenu.createAddItem("2x"),this._sizeMenu.createAddItem("0.5x"),this._sizeMenu.createAddItem("3x"),this._sizeMenu.createAddItem("512w"),this._sizeMenu.createAddItem("512h"),this._sizeMenu.createAddItem("128x128"),this._sizeMenu.createAddItem("300dpi"),gDesigner.addEventListener(p,this._settingChanged,this)},g.prototype.update=function(e){if(this._document&&(this._document.getScene().removeEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document=null),this._elements=null,e){this._document=e;var t=this._getElements();this._elements=[];for(var n=!1,i=0;i<t.length;++i)t[i]instanceof o.GBlock&&this._elements.push(t[i]),t[i]instanceof o.GSlice||(n=!0);if(this._elements&&this._elements.length)return this._document=e,this._document.getScene().addEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._createSliceButton.css("display",n?"":"none"),this._updateProperties(),!0}return!1},g.prototype._getElements=function(){var e=this._document.getEditor();if(this._document&&e&&(this._elements=e.getSelection(),this._elements&&this._elements.length&&(this._elements=e.filterIndividualElements(this._elements)),!this._elements||0===this._elements.length)){var t=gDesigner.getToolManager().getActiveTool(),n=null;t instanceof i.GItemTool&&(n=t.getDefaultStyle())?this._elements=[n]:this._elements=[this._document.getScene().getActivePage()]}return this._elements},g.prototype._export=function(){new d(()=>{gDesigner.stats("exportproperties_click_export");var e=c.generateExportables(this._elements);c.export(e,this._document.getStorage()||gDesigner.getDefaultStorage(),this._document.getTitle(),null,null,!0)},()=>{gDesigner.stats("exportproperties_cancel_anonymous")})},g.prototype._createSlice=function(){gDesigner.stats("exportproperties_click_createslice");var e=this._document.getEditor();e.beginTransaction();try{for(var t=[],n=0;n<this._elements.length;++n){var i=this._elements[n];if(!(i instanceof o.GSlice)){var a=(i.getProperty(u.EXPORT_PROPERTY_NAME,!0,[])||[]).slice(),r=i.getPaintBBox();i.setProperty(u.EXPORT_PROPERTY_NAME,void 0,!0);var s=new o.GSlice;s.setProperties(["x","y","w","h"],[r.getX(),r.getY(),r.getWidth(),r.getHeight()]),s.setProperty(u.EXPORT_PROPERTY_NAME,a,!0),t.push(s)}}e.insertElements(t,!0,!0,!1)}finally{e.commitTransaction(o.GLocale.get(new o.GLocaleKey("GExportProperties","action.create-slices")))}},g.prototype._addExport=function(){gDesigner.stats("exportproperties_click_add-item-to-export");var e=this._document.getEditor();e.beginTransaction();try{for(var t=0;t<this._elements.length;++t){for(var n=this._elements[t],i=(n.getProperty(u.EXPORT_PROPERTY_NAME,!0,[])||[]).slice(),a={sz:"",sf:"",fm:"png"},r=[{sz:"1x",sf:"@1x"},{sz:"2x",sf:"@2x"},{sz:"3x",sf:"@3x"},{sz:"1.5x",sf:"@1,5x"},{sz:"0.5x",sf:"@0,5x"}],s=0;s<r.length;++s){for(var l=r[s],c=!1,d=0;d<i.length;++d)if(i[d].sz===l.sz){c=!0;break}if(!c){a.sz=l.sz,a.sf=i.length>0?l.sf:"";break}}i.push(a),n.setProperty(u.EXPORT_PROPERTY_NAME,i,!0)}}finally{e.commitTransaction(o.GLocale.get(new o.GLocaleKey("GExportProperties","action.add")))}},g.prototype._settingChanged=function(e){"touch"===e.key&&this._updateProperties()},g.prototype._updateExport=function(e,t,n){var i=this._document.getEditor();i.beginTransaction();try{for(var a=0;a<this._elements.length;++a){var r=this._elements[a],s=r.getProperty(u.EXPORT_PROPERTY_NAME,!0);!s||e>=s.length||((s=s.slice())[e]=$.extend({},s[e]),s[e][t]=n,r.setProperty(u.EXPORT_PROPERTY_NAME,s,!0))}}finally{i.commitTransaction(o.GLocale.get(new o.GLocaleKey("GExportProperties","action.update-setting")))}},g.prototype._removeExport=function(e){var t=this._document.getEditor();t.beginTransaction();try{for(var n=0;n<this._elements.length;++n){var i=this._elements[n],a=i.getProperty(u.EXPORT_PROPERTY_NAME,!0);!a||e>=a.length||((a=a.slice()).splice(e,1),i.setProperty(u.EXPORT_PROPERTY_NAME,a,!0))}}finally{t.commitTransaction(o.GLocale.get(new o.GLocaleKey("GExportProperties","action.remove")))}},g.prototype._afterPropertiesChange=function(e){!e.temporary&&this._elements.length&&this._elements[0]===e.node&&e.properties.indexOf(u.EXPORT_PROPERTY_NAME)>=0&&this._updateProperties()},g.prototype._updateProperties=function(){var e=[],t=gDesigner.isTouchEnabled(),n=t?"40%":"30%",i=t?"25%":"35%",a=t?"25%":"30%",r=t?"12%":"5%";if(this._elements)for(let t=0;t<this._elements.length;++t){var l=this._elements[t].getProperty(u.EXPORT_PROPERTY_NAME,!0,[])||[];if(l)for(var c=0;c<l.length;++c)c<e.length?e[c].diff=!0:e.push($.extend({},l[c]))}this._panel.empty().css("margin",e.length?"":"0"),this._toolbar.toggleClass("empty-list",0===e.length).find("label:first-child").text(0===e.length?o.GLocale.get(new o.GLocaleKey("GExportProperties","text.make-exportable")):o.GLocale.get(new o.GLocaleKey("GCommonNames","text.export"))),this._exportButton.css("display",e.length?"":"none");for(let l=0;l<e.length;++l){var d=l+1===e.length,p=e[l];$("<div></div>").data("index",l).gPropertyRow({clazz:"export-properties-row",columns:[{width:n,label:d?o.GLocale.get(new o.GLocaleKey("GCommonNames","text.size")):null,content:$("<div></div>").append($("<input/>").attr("type","text").css("margin","0").css("width","70%").val(p.sz).on("change",function(e){gDesigner.stats("exportproperties_change_size-dropdown");var t=$(e.target);this._updateExport($(e.target).closest(".g-property-row").data("index"),"sz",t.val())}.bind(this))).append($("<button></button>").addClass("g-flat").css("width","30%").append($('<span class="gravit-icon-down"></span>').css("font-size","12px")).on("click",function(e){gDesigner.stats("exportproperties_click_change-size"),this._sizeMenu.open(e.target,s.Position.Left_Top,s.Position.Right_Bottom,(function(t){$(e.target).closest("div").find("input").val(t.getCaption()).trigger("change").focus().select()}))}.bind(this)))},{width:i,label:d?o.GLocale.get(new o.GLocaleKey("GExportProperties","text.suffix")):null,content:$("<input/>").attr("type","text").val(p.diff?null:p.sf).attr("placeholder",p.diff?o.GLocale.get(new o.GLocaleKey("GExportProperties","text.multiple")):o.GLocale.get(new o.GLocaleKey("GCommonNames","text.none"))).on("change",function(e){gDesigner.stats("exportproperties_toggle_multiple");var t=$(e.target);this._updateExport($(e.target).closest(".g-property-row").data("index"),"sf",t.val())}.bind(this))},{width:a,label:d?o.GLocale.get(new o.GLocaleKey("GExportProperties","text.format")):null,content:$("<select></select>").append($("<option></option>").attr("value","png").text("PNG")).append($("<option></option>").attr("value","jpg").text("JPEG")).append($("<option></option>").attr("value","svg").text("SVG")).append($("<option></option>").attr("value","pdf").text("PDF")).val(p.fm).on("change",function(e){gDesigner.stats("exportproperties_format_dropdown");var t=$(e.target);this._updateExport($(e.target).closest(".g-property-row").data("index"),"fm",t.val())}.bind(this))},{width:r,content:$("<button></button>").addClass(t?"g-flat gravit-icon-close":"g-flat").html(t?"":"&#x2715;").on("click",function(e){gDesigner.stats("exportproperties_click_removeitem"),this._removeExport($(e.target).closest(".g-property-row").data("index"))}.bind(this))}]}).appendTo(this._panel)}},g.prototype.toString=function(){return"[Object GExportProperties]"},e.exports=g},function(e,t,n){"use strict";var o=n(25);e.exports=o(1..valueOf)},function(e,t,n){"use strict";var o=n(120),i=n(56),a=n(98),r=RangeError;e.exports=function(e){var t=i(a(this)),n="",s=o(e);if(s<0||s===1/0)throw new r("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(n+=t);return n}},function(e,t,n){"use strict";n(3);var o=n(1),i=n(1502);function a(e){this._htmlElement=$("<div></div>").addClass("g-effects-panel").gOverlay({releaseOnClose:!1,padding:!1}),this._catTranslate=e}a.prototype._htmlElement=null,a.prototype._content=null,a.prototype._catTranslate=null,a.prototype._parent=null,a.prototype.addItem=function(e){this._content.append(e._htmlElement)},a.prototype.createSelector=function(){var e=$("<select></select>").addClass("g-effects-select").addClass("active");return this._htmlElementSelector=$("<div></div>").addClass("g-effects-selector").append(e),this._htmlElement.append(this._htmlElementSelector),e},a.prototype.addItems=function(e){for(this._content||(this._content=$("<div></div>").addClass("g-effects-content"),this._htmlElement.append(this._content));e.length%3!=0;){var t=new i;e.push(t)}this._content.children(".g-effects-button").remove();for(var n=0;n<e.length;++n)if(e[n]instanceof i)this.addItem(e[n]);else{t=new i(o.GLocale.getValue(e[n].i18n,"name"),e[n].icon,e[n].clazz,e[n].cb,!e[n].mostUsed,e[n],this._catTranslate);this.addItem(t)}},a.prototype.open=function(e){this._parent=e,this._htmlElement.gOverlay("open",e)},a.prototype.close=function(e){this._htmlElement.gOverlay("close",e||this._parent)},a.prototype.toString=function(){return"[Object GEffectsPanel]"},e.exports=a},function(e,t,n){"use strict";n(3);var o=n(1),i=n(34);function a(e,t,n,a,r,s,l){var c=e&&t&&n&&a&&l;if(this._htmlElement=$("<li></li>").addClass("g-effects-button"),c){let c="";s&&s.category&&(c=l(s.category)+"/"),this._htmlElement.gPro({pro:r}).append($("<span></span>").addClass("g-effects-button-icon").append($("<i></i>").addClass(t))).append($("<span></span>").addClass("g-effects-button-caption").append(e)).on("click",i.watchDog.trap((function(){let e=n&&o.GLocale.getValue(s&&s.i18n||n,"name","unknown",0)||"unkn";r?gDesigner.stats("effects_add_proeffectdefault",c+e):gDesigner.stats("effects_add_effectdefault",c+e),a(n,s)}),()=>!r,()=>gDesigner.stats("effects_nonprotriespro_proeffectdefault",c+(n&&o.GLocale.getValue(s&&s.i18n||n,"name","unknown",0)||"unkn")))).on("mouseover",function(){this._htmlElement.addClass("active")}.bind(this)).on("mouseout",function(){this._htmlElement.removeClass("active")}.bind(this))}}a.prototype._htmlElement=null,a.prototype.toString=function(){return"[Object GEffectsButton]"},e.exports=a},function(e,t,n){"use strict";var o=n(14);n(17),n(51),n(7),n(18),n(3),n(29),n(22);var i=n(1),a=n(9),r=n(1140),s=o(n(115)),l=o(n(1136)),c=o(n(206)),d=o(n(151)),u=o(n(205)),p=o(n(71)),g=o(n(78)),h=o(n(203)),f=o(n(322)),m=o(n(61));function y(){}i.GObject.inherit(y,s.default),y.ID="version-history",y.TITLE=new i.GLocaleKey("GVersionHistoryProperties","title"),y.prototype._relayoutBindedToActiveDocument=null,y.prototype._panel=null,y.prototype._toolbar=null,y.prototype._loadingIndicator=null,y.prototype._previewOverlay=null,y.prototype._fileId=null,y.prototype._enabledInputs=null,y.prototype._previousDoc=null,y.prototype._previewDoc=null,y.prototype.isGroup=function(e){return!0},y.prototype.isAvailable=function(e){return!1},y.prototype.init=function(e,t){this._panel=e,this._toolbar=t;t.addClass("filled"),t.addClass("version-history-toolbar"),$("<label/>").addClass("version-history-toolbar").append($("<span />").addClass("pro").text(i.GLocale.get(new i.GLocaleKey("GVersionHistoryProperties","title")))).appendTo(t),$("<button/>").append($("<span></span>").addClass("gravit-icon-detach")).on("click",function(){gDesigner.stats("version-history-panel_close_panel"),this.close()}.bind(this)).appendTo(t),this._loadingIndicator=$("<div/>").addClass("version-history-panel-loading g-loading").appendTo(e),this._versionsContainer=$("<div/>").addClass("section").append([$("<div/>").addClass("title").text(i.GLocale.get(new i.GLocaleKey("GVersionHistoryProperties","text.title-manual-save"))).gRichTooltip(m.default.from({title:i.GLocale.get(new i.GLocaleKey("GVersionHistoryProperties","text.title-manual-save-tooltip-title")),middle:!1,marginLeft:10})),$("<div/>").addClass("content")]);var n=$("<div/>").addClass("container").append(this._versionsContainer).appendTo(e);a.AUTO_SAVE_ENABLED&&(this._autoSaveContainer=$("<div/>").addClass("section").append([$("<div/>").addClass("title").text(i.GLocale.get(new i.GLocaleKey("GVersionHistoryProperties","text.title-auto-save"))).gRichTooltip(m.default.from({title:i.GLocale.get(new i.GLocaleKey("GVersionHistoryProperties","text.title-auto-save-tooltip-title")),middle:!1,marginLeft:10})),$("<div/>").addClass("content")]).appendTo(n)),gDesigner.addEventListener(l.default,this._handleEvent,this)},y.prototype._handleEvent=function(e){e.type===l.default.Type.Enable?this._updateVersionHistory(e.fileId):e.type===l.default.Type.Close&&this.close()},y.prototype._updateVersionHistory=function(e){this._versionsContainer.find(".content").empty(),a.AUTO_SAVE_ENABLED&&this._autoSaveContainer.find(".content").empty(),this._toggleLoading(!0);var t=this;this._fileId=e;const n=[a.gApi.listVersions(this._fileId,"tf").then(e=>{const{f:t,t:n}=e;let o=[];for(let e=0,t=n?n.length:0;e<t;e++)n[e]?o.push(a.gApi.getFile(this._fileId,!1,n[e].versionId,"t")):o.push(null);return Promise.all(o).then(e=>{let n=[];for(let o=0,i=t.length;o<i;o++){let i={version:t[o],thumbnail:e[o]||{name:gDesigner.getWindows().getActiveWindow().getTitle(),url_t:"assets/icon/versus.svg"}};n.push(i)}return Promise.resolve(n)})})];a.AUTO_SAVE_ENABLED&&n.push(a.gApi.listAutoSaves(this._fileId).then(e=>{let t=[],n=[];for(let t=0,o=e.versions.length;t<o;t++)n.push(e.versions_t&&e.versions_t[t]?a.gApi.getAutoSaveThumbnail(this._fileId,e.versions_t[t].versionId):null);return Promise.all(n).then(n=>{for(let o=0,i=e.versions.length;o<i;o++){let i={version:e.versions[o],thumbnail:{name:gDesigner.getWindows().getActiveWindow().getTitle(),url_t:n&&n[o]&&n[o].url||"assets/icon/versus.svg"},autosave:!0};t.push(i)}return t})})),Promise.all(n).then(e=>{let[n,o]=e;t._renderVersionsList(n,o),this._toggleLoading(!1)}).catch(e=>(new u.default(i.GLocale.get(new i.GLocaleKey("GVersionHistoryProperties","error-loading"))).open(),this._toggleLoading(!1),!1))},y.prototype._renderVersionsList=function(e,t){const n=gDesigner.isEnabledProFeatures(),o=this,s=gDesigner.getActiveDocument().getStorageItem(),l=s&&s.getVersionId&&s.getVersionId(),c=!!l;let d,u=this._versionsContainer.find(".content");a.AUTO_SAVE_ENABLED&&(d=this._autoSaveContainer.find(".content"));const g=e.find(e=>e.version.latest);let h=g,m=!1;if(a.AUTO_SAVE_ENABLED&&t&&t.length){const e=t.find(e=>e.version.latest);a.DateAPI.lt(g.version.modified,e.version.modified,!1)&&(h=e,m=!0)}const y=(e,t,a)=>{let{version:s,thumbnail:d,autosave:u}=e;return $("<div />").addClass("version-history-item").addClass((c?l===s.versionId:(m&&u||!m&&!u)&&s.latest)?"vhi-initial":"").addClass(n||s.latest?"":"vhi-disabled").addClass((c?l===s.versionId:s.versionId===h.version.versionId)?"vhi-active":"").append($("<div />").addClass("vhi-thumbnail").css("background-image","url("+d.url_t+")")).append($("<div />").addClass("vhi-info").append($("<div />").addClass("vhi-title").text(s.versionId===h.version.versionId?i.GLocale.get(new i.GLocaleKey("GVersionHistoryProperties","text.current-version")):i.GLocale.get(new i.GLocaleKey("GVersionHistoryProperties","text.version")).replace("%version",a-t))).append($("<div />").addClass("vhi-updated").text((0,r.dateToVersionFormat)(s.modified)))).append($("<div />").addClass("vhi-settings").addClass("gravit-icon-settings").on("click",(function(e){e.stopPropagation(),(n||s.latest)&&($(this).find(".vhi-settings-list").toggle(),gDesigner.stats("version-history-panel_click_setting-icon"))})).on("dblclick",(function(e){e.stopPropagation()})).append($("<div />").addClass("vhi-settings-list").append($("<div />").addClass("vhi-settings-item g-menu-item-menu").text(i.GLocale.get(new i.GLocaleKey("GVersionHistoryProperties","preview"))).on("click",(function(e){e.stopPropagation(),gDesigner.stats("version-history-panel_show-preview_from-settings-menu"),gDesigner.intercomStats("Preview version from history"),o._showPreview(s.versionId,d.name,$(this).closest(".version-history-item"),u),$(this).parent(".vhi-settings-list").hide()}))).append($("<div />").addClass("vhi-settings-item g-menu-item-menu").text(i.GLocale.get(new i.GLocaleKey("GVersionHistoryProperties","restore"))).on("click",(function(e){e.stopPropagation(),gDesigner.stats("version-history-panel_restore-version_from-settings-menu"),gDesigner.intercomStats("Open version from history"),o._applyVersion(s.versionId,d.name,u),$(this).parent(".vhi-settings-list").hide()}))))).on("click",(function(e){if($(this).hasClass("vhi-disabled"))return gDesigner.stats("version-history-panel_click_disabled"),gDesigner.handlePROFeatureInterruption(),!1;var t=this;setTimeout((function(){var e=parseInt($(t).data("dblclicked"),10);e?$(t).data("dblclicked",e-1):(gDesigner.stats("version-history-panel_show-preview_from-main-panel"),o._showPreview(s.versionId,d.name,$(t),u),gDesigner.intercomStats("Preview version from history"))}),500)})).on("dblclick",(function(e){if($(this).hasClass("vhi-disabled"))return gDesigner.stats("version-history-panel_dblclick_disabled"),gDesigner.handlePROFeatureInterruption(),!1;$(this).data("dblclicked",2),gDesigner.stats("version-history-panel_apply-version"),o._applyVersion(s.versionId,d.name,u),gDesigner.intercomStats("Open version from history")})).on("mouseenter",(function(){(n||s.latest)&&$(this).addClass("show-icon")})).on("mouseleave",(function(){$(this).removeClass("show-icon"),$(this).find(".vhi-settings-list").hide()}))};function v(e){for(let t=0,n=e.length;t<n;t++){let o=e[t],i=null;i=o.autosave?d:u,i.append(y(o,t,n))}}u.empty(),d&&d.empty(),v(e),a.AUTO_SAVE_ENABLED&&v(t),this._updatePanelHeight(),gDesigner.addEventListener(p.default,this._documentEvent,this),gDesigner.addEventListener(f.default,this._storageEventHandler,this)},y.prototype._updatePanelHeight=function(){let e=parseInt(this._panel.closest(".sidebar-inspector").outerHeight(),10)-parseInt(this._toolbar.outerHeight(),10);this._panel.css("height",e)},y.prototype._documentStatusEventHandler=function(e){let{status:t}=e;t===g.default.LoadFailed&&this._closePreview()},y.prototype._documentEvent=function(e){let{document:t,type:n}=e;if(n===p.default.Type.AutoSaveSynchronized)return void this._updateVersionHistory(this._fileId);if(this._loadingPreview)return;const o=t.getStorageItem()instanceof c.default.Item,i=t.getScene();(o&&t.getStorageItem().getId()!==this._fileId||!o&&i&&i.getProperty("cid")!==this._fileId)&&this.close()},y.prototype._storageEventHandler=function(e){let{type:t,storageItem:n}=e;t===f.default.Type.VersionUpdate&&n instanceof c.default.Item&&this._fileId===n.getId()&&this._updateVersionHistory(this._fileId)},y.prototype._showPreview=async function(e,t,n,o){var a=gDesigner.getActiveDocument();if(a.isModified())return new u.default(i.GLocale.get(new i.GLocaleKey("GVersionsHistoryAction","unsaved-modifications"))).open(),!1;this._loadingPreview=!0;var r=new d.default(await c.default.from(gDesigner.getDefaultStorage(),this._fileId,t,e,!!o));r.lockByVersionHistory(),this._previewDoc?(gDesigner.replaceDocument(this._previewDoc,r),this._previewDoc.removeEventListener(h.default,this._documentStatusEventHandler,this),this._previewDoc=r):(this._previousDoc=a,this._previewDoc=r,gDesigner.replaceDocument(this._previousDoc,r)),r.addEventListener(h.default,this._documentStatusEventHandler,this),r.load(null,{progress:e=>{100==e&&(this._loadingPreview=!1,gDesigner.trigger(new p.default(p.default.Type.StorageItemUpdated,r)))}}),this._enabledInputs||(this._enabledInputs={allEnabledButtons:$("button:not([disabled=true])"),allEnabledInput:$("input:not([disabled=true])"),allEnabledTextarea:$("textarea:not([disabled=true])")},this._enabledInputs.allEnabledButtons.attr("disabled",!0),this._enabledInputs.allEnabledInput.attr("disabled",!0),this._enabledInputs.allEnabledTextarea.attr("disabled",!0)),$(".version-history-item.vhi-active").removeClass("vhi-active"),n.addClass("vhi-active"),this._previewOverlay||(this._previewOverlay=$("<div />").css({position:"absolute",zIndex:9999,left:0,right:0,top:0,bottom:0}).data("versionId",e).data("title",t).appendTo($("body")),this._relayout(e,t,o),this._relayoutBindedToActiveDocument&&window.removeEventListener("resize",this._relayoutBindedToActiveDocument),this._relayoutBindedToActiveDocument=this._relayout.bind(this,e,t,o),window.addEventListener("resize",this._relayoutBindedToActiveDocument))},y.prototype._relayout=function(e,t,n){if(this._previewOverlay){var o=$("#toolbar");this._buttonsToolbar=$("<div />").addClass("vhp-preview-overlay").css({position:o.css("position"),top:o.css("top"),left:o.css("left"),right:o.css("right"),bottom:o.css("bottom"),background:o.css("background")||o.css("background-color"),border:o.css("border")}).append($("<button />").addClass("edit-version").text(i.GLocale.get(new i.GLocaleKey("GVersionHistoryProperties","edit-version"))).on("click",function(){gDesigner.stats("version-history-panel_edit-version"),gDesigner.intercomStats("Open version from history"),this._applyVersion(e,t,n)}.bind(this))).append($("<button />").addClass("close-preview").text(i.GLocale.get(new i.GLocaleKey("GVersionHistoryProperties","close-preview"))).on("click",function(){gDesigner.stats("version-history-panel_close_preview"),this._closePreview()}.bind(this))),this._previewOverlay.empty().append(this._buttonsToolbar),this._panel.addClass("z-index-top"),this._toolbar.addClass("z-index-top")}this._updatePanelHeight()},y.prototype._closePreview=function(){this._enabledInputs&&(this._enabledInputs.allEnabledButtons.removeAttr("disabled"),this._enabledInputs.allEnabledInput.removeAttr("disabled"),this._enabledInputs.allEnabledTextarea.removeAttr("disabled"),this._enabledInputs=null),this._previousDoc&&(gDesigner.openDocument(this._previousDoc.getStorageItem()),this._previousDoc=null),this._previewDoc&&(this._previewDoc.removeEventListener(h.default,this._documentStatusEventHandler,this),this._previewDoc!==gDesigner.getActiveDocument()&&gDesigner.removeDocument(this._previewDoc),this._previewDoc=null,$(".version-history-item.vhi-active").removeClass("vhi-active"),$(".version-history-item.vhi-initial").addClass("vhi-active")),this._previewOverlay&&(window.removeEventListener("resize",this._relayoutBindedToActiveDocument),this._panel.removeClass("z-index-top"),this._toolbar.removeClass("z-index-top"),this._previewOverlay.remove(),this._previewOverlay=null)},y.prototype._applyVersion=async function(e,t,n){gDesigner.stats("version-history-panel_open_version",this._fileId);var o=gDesigner.getActiveDocument();if(o.isModified())return new u.default(i.GLocale.get(new i.GLocaleKey("GVersionsHistoryAction","unsaved-modifications"))).open(),!1;var a=gDesigner.openDocumentWithReload(await c.default.from(gDesigner.getDefaultStorage(),this._fileId,t,e,n));gDesigner.activateDocument(a),this._previousDoc&&(this._previousDoc=null),this._previewDoc||gDesigner.removeDocument(o),this.close()},y.prototype._toggleLoading=function(e){var t=this._panel.find(".container");e?(t.hide(),this._loadingIndicator.show()):(t.show(),this._loadingIndicator.hide())},y.prototype.close=function(){gDesigner.stats("version-history-panel_close_panel",this._fileId),this._closePreview(),gDesigner.trigger(new l.default(l.default.Type.Disable)),gDesigner.removeEventListener(p.default,this._documentEvent,this),gDesigner.removeEventListener(f.default,this._storageEventHandler,this)},y.prototype.toString=function(){return"[Object GVersionHistoryProperties]"},e.exports=y},function(e,t,n){"use strict";const o=n(379);e.exports=function(e){e.prototype._versionHistoryPanelOverlay=null,e.prototype._updateVersionsPanelTouch=function(){if(this._versionHistoryMode){this._versionHistoryPanelOverlay||(this._versionHistoryPanelOverlay=$("<div/>").append(this._versionHistoryPanel).gOverlay({clazz:"g-version-history-panel-overlay",closeCallback:()=>this._versionHistoryProperties.close()}));const e=(this.getOrientation()===o.Orientation.Left?gDesigner.getLeftSidebars():gDesigner.getRightSidebars()).getHtmlElement(),t=e.offset(),n=e.width();this._versionHistoryPanelOverlay.css({minWidth:n}).gOverlay("open",{x:t.left+n,y:t.top})}else this._versionHistoryPanelOverlay&&this._versionHistoryPanelOverlay.gOverlay("close"),this._versionHistoryPanelOverlay=null}}},function(e,t,n){"use strict";n(52),n(7),n(62);const o=n(78),i=n(71),a=n(1506),r=n(1507),s=n(1508),l=n(143),c=n(769),d=n(537);function u(e){this._worker=e,this._docs=[]}u.prototype._docs=null,u.prototype._worker=null,u.prototype.has=function(e){return this._docs.indexOf(e)>=0},u.prototype._addDocToQueue=function(e){this._docs.push(e)},u.prototype._removeDocFromQueue=function(e){this._docs.splice(this._docs.indexOf(e),1)},u.prototype.isSaving=function(){return this._docs.length>0},u.prototype.save=async function(e){if(this.has(e))return Promise.resolve(null);this._addDocToQueue(e);const t=e.getEditor(),n=t&&t.markSavePoint();try{if(this._isDocAllowedToBeAutoSaved(e)){gDesigner.trigger(new i(i.Type.AutoSaveSynchronizing,e));const t=this._getAutoSaveHelper(e.getStorageItem().getFile());return function(t){const n=e.getStorageItem();n.setVersionId&&n.setVersionId(null);n.setFile(t)}(await t.updateFileSceneAndMetadata(e.getId(),e.getStorageItem().getFile(),e.getScene(),await this._createDocumentMetadata(e))),gDesigner.trigger(new i(i.Type.Modified,e)),gDesigner.trigger(new i(i.Type.AutoSaveSynchronized,e)),!0}return!1}catch(t){throw gDesigner.trigger(new i(i.Type.AutoSaveSynchronizationFailed,e)),n&&n.rollback(),t}finally{this._removeDocFromQueue(e)}},u.prototype._isDocAllowedToBeAutoSaved=function(e){return![o.Saving,o.Syncing].includes(e.getStatus())&&e.canSaveToCloud()},u.prototype._createDocumentMetadata=async function(e){const t=new c;return t.thumbnail=await d.fromBlob(await e.buildPreview()),t},u.prototype._getAutoSaveHelper=function(e){let t=null;const n=e.getStorage(),o=gDesigner.getSyncUser();return n===l.Storage.Gravit?t=new a(this._worker,o):n===l.Storage.GoogleDrive?t=new r(this._worker,o):n!==l.Storage.SharePoint&&n!==l.Storage.OneDriveBusiness||(t=new s(this._worker,o)),t},e.exports=u},function(e,t,n){"use strict";n(7);var o=n(1);const{FILE_FORMATS:i,gApi:a}=n(9),r=i.find(e=>e.default),{COMMAND_SAVE:s,COMMAND_SYNC_IMAGES:l}=n(573),c=n(1141);e.exports=class extends c{constructor(e,t){super(e,t)}async updateFileSceneAndMetadata(e,t,n,o){await this._syncSceneImages(e,n);const{sceneSnapshot:i,urls:r}=await this._saveScene(e,t,n);return console.log({documentId:e,file:t,sceneSnapshot:i,urls:r}),await this._saveThumbnail(o.thumbnail.getImageAsBlob(),r.url_t),await a.commitAutoSaveFileUpdate(t.id),a.getFile(e+"?edit")}_syncSceneImages(e,t){return new Promise(n=>{let i=t.getDictionary().getEntries(),r=[];i=i.map(e=>(e.hasOwnProperty("cachedCanvas")&&(e.cachedCanvas=null),e)),t.acceptChildren(e=>{e instanceof o.GImage&&r.push({name:e.getProperty("name"),url:e.getProperty("url")})});const s=Object.create(t),c=this._request(l.REQUEST,{id:e,images:r,entries:i,cloudURL:a.url});this._worker.addEventListener("message",function(e){const{cmd:t,id:i,data:a}=e.data;if(t!==l.SUCCESS||i!==c)return!1;let r=s.getDictionary();s.setCloudSynchronization(null);let d=new o.GDictionary;return d.deserialize(a),r.merge(d),n(),!0}.bind(this),{once:!0})})}_saveScene(e,t,n){return new Promise((i,a)=>{let l=o.GNode.serialize(n,{save:!0});const c=Object.create(n),d=this._request(s.REQUEST,{id:e,file:t,scene:l,type:r.type});this._worker.addEventListener("message",function(e){const{cmd:t,id:n,data:o}=e.data;if(t!==s.SUCCESS&&t!==s.FAILED||n!==d)return!1;t===s.SUCCESS?i({sceneSnapshot:c,urls:o.urls}):t===s.FAILED&&a();return!0}.bind(this),{once:!0})})}_saveThumbnail(e,t){const n=new XMLHttpRequest;n.open("PUT",t);const o={"Content-Type":"image/jpeg","Cache-Control":"public,max-age=31600000"};for(var i in o)n.setRequestHeader(i,o[i]);n.send(e)}}},function(e,t,n){"use strict";n(7);var o=n(1);const{FILE_FORMATS:i}=n(9),a=i.find(e=>e.default),{COMMAND_SAVE:r}=n(573),s=n(1141),l=n(539);e.exports=class extends s{constructor(e,t){super(e,t)}async updateFileSceneAndMetadata(e,t,n,o){const i=await this._requestWorkerToSave(e,t,n,o);return l.convertToCloudItem(i)}_requestWorkerToSave(e,t,n,i){return new Promise((s,l)=>{const c=this._request(r.REQUEST,{id:e,file:t,metadata:i,scene:o.GNode.serialize(n,{save:!0}),type:a.type});this._worker.addEventListener("message",function(e){const{cmd:t,id:n,data:o}=e.data;if(t!==r.SUCCESS&&t!==r.FAILED||n!==c)return!1;t===r.SUCCESS?s(o.file):t===r.FAILED&&l();return!0}.bind(this),{once:!0})})}}},function(e,t,n){"use strict";n(7);var o=n(1);const i=n(143),{FILE_FORMATS:a}=n(9),r=a.find(e=>e.default),{COMMAND_SAVE:s}=n(573),l=n(1141);e.exports=class extends l{constructor(e,t){super(e,t)}async updateFileSceneAndMetadata(e,t,n,o){const a=await this._requestWorkerToSave(e,t,n,o);return i.from(a)}_requestWorkerToSave(e,t,n,i){return new Promise((a,l)=>{const c=this._request(s.REQUEST,{id:e,file:t,metadata:i,scene:o.GNode.serialize(n,{save:!0}),type:r.type});this._worker.addEventListener("message",function(e){const{cmd:t,id:n,data:o}=e.data;if(t!==s.SUCCESS&&t!==s.FAILED||n!==c)return!1;t===s.SUCCESS?a(o.file):t===s.FAILED&&l();return!0}.bind(this),{once:!0})})}}},function(e,t,n){"use strict";function o(){this._queue=new Set}n(17),n(7),n(22),o.prototype._queue=null,o.prototype._isProcessing=!1,o.prototype._onNext=null,o.prototype.add=function(e){return this._queue.add(e),this},o.prototype.delete=function(e){return this._queue.delete(e),this},o.prototype.has=function(e){return this._queue.has(e)},o.prototype.onNext=async function(e){this._onNext=e},o.prototype.process=async function(){if(!this._isProcessing)return this._isProcessing=!0,await this._processQueue(),this._isProcessing=!1,this},o.prototype._processQueue=async function(){const e=this._queue.values().next().value;e&&(await this._onNext(e).catch(e=>{console.error("[GQueue] - It should never get here",e)}),this._queue.delete(e),await this._processQueue())},e.exports=o},function(e,t,n){"use strict";n(52),n(3),n(62),n(28);var o=n(45),i=n(1),a=n(13),r=n(434),s=n(549),l=n(115);const c=n(343),d=n(78),{SHOW_SIDEBAR_BADGE:u}=n(9);function p(){this._elements=[]}i.GObject.inherit(p,l),p.prototype._panel=null,p.prototype._toolbar=null,p.prototype._document=null,p.prototype._elements=null,p.prototype.init=function(e,t,n,o,a,r){this._panel=e,this._toolbar=t,this._addListPanel(e,n,o,a,r),t.append($("<label>").addClass("annotation-panel-label").text(i.GLocale.get(new i.GLocaleKey("GAnnotations","text.page"))))},p.prototype._addListPanel=function(e,t,n,o,s){var l=$("<div></div>").addClass("annotations-container").appendTo(e);this._annotationPanel||(this._annotationPanel=$("<div></div>").addClass("annotations").on("mouseenter",function(){var e=this._document.getScene();e&&e.acceptChildren((function(e){return e.hasFlag(i.GNode.Flag.Highlighted)&&e.removeFlag(i.GNode.Flag.Highlighted),!0})),this._annotationPanel.gAnnotationPanel("setBlockHighlight",!0)}.bind(this)).on("mouseleave",function(){this._annotationPanel.gAnnotationPanel("setBlockHighlight",!1)}.bind(this)).on("click",function(){this._document.getEditor().clearSelection();var e=this._document.getScene();e&&e.setActiveLayer(null),a.GPlatform.modifiers.optionKey&&gDesigner.executeAction(r.ID,void 0,"outlinesidebar")}.bind(this)).on("dragover",(function(e){e.preventDefault(),e.stopPropagation()})).on("dragenter",(function(e){e.preventDefault(),e.stopPropagation()})).on("drop",function(e){e.preventDefault(),e.stopPropagation()}.bind(this)).appendTo(l),this._annotationPanel.gAnnotationPanel({clickCallback:this._clickTreeNodeCallback.bind(this),updateCommentCount:this._updateCommentCount.bind(this),showResolved:n,updateSidebar:o,updateAnnotationCache:s,sidebarActive:t}),window.refreshannot=()=>this._annotationPanel.gAnnotationPanel("refresh"),window.relayoutannot=()=>this._annotationPanel.gAnnotationPanel("relayout"))},p.prototype.relayout=function(e){this._annotationPanel&&this._annotationPanel.gAnnotationPanel("relayout",e)},p.prototype.isAddingAnnotation=function(){return this._annotationPanel.gAnnotationPanel("isEditingOrAddingContent")},p.prototype.toggleShowResolved=function(e){this._annotationPanel.gAnnotationPanel("showResolved",e)},p.prototype.setPage=function(e){this._annotationPanel.gAnnotationPanel("page",e),e&&this._setAnnotationLabel(e.getProperty("name"))},p.prototype._setAnnotationLabel=function(e){this._toolbar.find(".annotation-panel-label").text(e)},p.prototype._updateCommentCount=function(e,t){var n=this._toolbar.find(".g-badge");u&&e>0?(0===n.length&&(n=$("<span/>").addClass("g-badge comment-count"),this._toolbar.append(n)),t>0?n.addClass("unread"):n.removeClass("unread"),n.text(e)):n.remove()},p.prototype.getPage=function(){return this._annotationPanel.gAnnotationPanel("page")},p.prototype.setAnnotations=function(e){return this._annotationPanel.gAnnotationPanel("annotations",e)},p.prototype.setDelayedSyncCallback=function(e){this._annotationPanel.gAnnotationPanel("setDelayedSyncCallback",e)},p.prototype._clickTreeNodeCallback=function(e){if(e instanceof i.GComment&&(e=e.getParent()),e&&!e.hasFlag(i.GNode.Flag.Selected)){this._document.getScene().updateActivePageForElem(e),this._document.getScene().updateActiveLayerForElem(e);var t=this._document.getEditor(),n=!1;if(jQuery(gDesigner.getWindows().getActiveWindow().getView().getHtmlElement()).find("> div[tabindex=0]").focus(),a.GPlatform.modifiers.metaKey||!e.hasFlag(i.GNode.Flag.Selected)&&!e.hasFlag(i.GElement.Flag.FullLocked)&&!a.GPlatform.modifiers.shiftKey){let o=[e];if(e.hasMixin(i.GAnnotation.Linkable)){let t=e.getAnnotableReferences();t&&(t=t.filter(e=>!e.hasFlag(i.GNode.Flag.Selected)),t.length&&(o=o.concat(t),this._document.getScene().updateActivePageForElem(t[0])))}t.updateSelection(a.GPlatform.modifiers.metaKey,o),n=!0}if(n&&a.GPlatform.modifiers.optionKey)t.hasSelection()?gDesigner.executeAction(s.ID,void 0,"outlinesidebar"):gDesigner.executeAction(r.ID,void 0,"outlinesidebar");else if(n){let t;if(e.hasMixin(i.GAnnotation.Linkable)){const n=e.getAnnotableReferences();n&&n.length&&n.forEach(e=>{if(e instanceof i.GElement){const n=e.getPaintBBox();n&&!n.isEmpty()&&(t=t?t.united(n):n)}})}else e instanceof i.GElement&&(t=e.getPaintBBox());const n=this._document&&this._document.getActiveWindow();n&&n.scrollIntoView(t)}}},p.prototype._selectionChangedEvent=function(){const e=this._document&&this._document.getEditor(),t=e&&e.getSelection();if(t&&t.length){t.filter(e=>e.hasMixin(i.GAnnotable)).forEach(e=>{const t=e.getLinkedAnnotations();t&&t.forEach(e=>{e.hasFlag(i.GNode.Flag.Selected)||e.setFlag(i.GNode.Flag.Selected)})})}},p.prototype._isSyncTransactionEvent=function(e){return!(!(e.data&&e.data.nodes&&e.data.parent)||e.data.type!==o.GAnnotationEditor.TransactionType.RemoveAnnotation&&e.data.type!==o.GAnnotationEditor.TransactionType.AddAnnotation)},p.prototype._handleModifiedEvent=function(e){if(this._isSyncTransactionEvent(e)){const n=e.data.evtType===o.GEditor.ModifiedEvent.Type.Undo,i=e.data.evtType===o.GEditor.ModifiedEvent.Type.Redo,a=e.data.type===o.GAnnotationEditor.TransactionType.RemoveAnnotation,r=e.data.type===o.GAnnotationEditor.TransactionType.AddAnnotation,s=!!this._document.getAnnotationsId(),l=n&&a||n&&r||i&&r,d=i&&a;let u;if(s&&l)u=c.filterAnnotationElements(e.data.nodes),u.length&&u.forEach(t=>{c.removeSidFromAnnotations(t),t.getParent()||e.data.parent.insertChild(t)});else if(s&&d){var t=e.data.parent.getChildren();u=c.filterAnnotationElements(e.data.nodes).filter(e=>t.some(t=>t.getId()===e.getId())),u.length&&c.removeAnnotations(u,e.data.parent,void 0,!1)}}},p.prototype.update=function(e,t,n){if(n&&this._annotationPanel.gAnnotationPanel("cleanEmptyAnnotations"),this._document&&(this._document.getScene().removeEventListener(i.GElement.GeometryChangeEvent,this._geometryChange,this),this._document.getScene().removeEventListener(i.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document.getEditor().removeEventListener(o.GEditor.EdGeometryChangeEvent,this._edGeometryChange,this),this._document.getEditor().removeEventListener(o.GEditor.ModifiedEvent,this._handleModifiedEvent,this),this._document.getEditor().removeEventListener(o.GEditor.SelectionChangedEvent,this._selectionChangedEvent,this),this._document=null),this._elements=[],e){for(var a=0;a<t.length;++a)this._elements.push(t[a]);if(this._elements.length===t.length){if(this._document=e,this._elements.length)return this._document.getScene().addEventListener(i.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document.getScene().addEventListener(i.GElement.GeometryChangeEvent,this._geometryChange,this),this._document.getEditor().addEventListener(o.GEditor.EdGeometryChangeEvent,this._edGeometryChange,this),this._document.getEditor().addEventListener(o.GEditor.SelectionChangedEvent,this._selectionChangedEvent,this),this._document.getEditor().addEventListener(o.GEditor.ModifiedEvent,this._handleModifiedEvent,this),this._updateDimensions(),this._updateToolbar(),this._document.getStatus()!==d.Ready&&this._document.getStatus()!==d.Loaded||!this._document.getActiveWindow()||this._document.getActiveWindow().getView().invalidate(null,!0),!0;this._document.getEditor().addEventListener(o.GEditor.ModifiedEvent,this._handleModifiedEvent,this)}}else this.setPage(null);return!1},p.prototype._afterPropertiesChange=function(e){e.node===this.getPage()&&e.properties.includes("name")&&this._setAnnotationLabel(e.node.getProperty("name"))},p.prototype._geometryChange=function(e){e.type!==i.GElement.GeometryChangeEvent.Type.After&&e.type!==i.GElement.GeometryChangeEvent.Type.Child||this._elements.indexOf(e.element)>=0&&this._updateDimensions()},p.prototype._edGeometryChange=function(){this._updateDimensions(!1,!0)},p.prototype._updateDimensions=function(){},p.prototype._updateToolbar=function(){this._toolbar.find("[data-action]").each(function(e,t){var n=$(t);n.prop("disabled",!gDesigner.canExecuteAction(n.attr("data-action")))}.bind(this))},p.prototype.toString=function(){return"[Object GAnnotations]"},e.exports=p},function(e,t,n){"use strict";var o=n(14);n(52),n(17),n(7),n(3),n(62),n(28),n(22);var i=n(45),a=n(1),r=o(n(343)),s=n(115);const l=n(377),c=n(376),d=n(1142),u=n(125);function p(e,t,n,o,i,a,r,s){this._elements=[],this._availableProperties=e||[],this._propertyClass=t,this._propertyTool=n,this._toolbarIcon=o,this._toolbarTooltip=i,this._tooltips=a,this._pendingUpdates=new Map,this._statType=r,this._panelClass=s}a.GObject.inherit(p,s),p.PropertySet={BorderHeadMarker:"_bhm",BorderTailMarker:"_btm",FillLayer:"_ptf",BorderLayer:"_ptb",BorderWidth:"_bw"},p.PropertyTarget={FillLayer:p.PropertySet.FillLayer,BorderLayer:p.PropertySet.BorderLayer,Element:null},p.prototype._panel=null,p.prototype._pendingUpdates=null,p.prototype._document=null,p.prototype._elements=null,p.prototype._availableProperties=null,p.prototype._propertyClass=null,p.prototype._propertyTool=null,p.prototype._toolbarIcon=null,p.prototype._toolbarTooltip=null,p.prototype._tooltips=null,p.prototype._isEditing=!1,p.prototype.init=function(e,t){this._panel=e,this._panel.addClass(this._panelClass);var n=function(e){var t=this;if(e===p.PropertySet.BorderLayer||e===p.PropertySet.FillLayer){let n,o=()=>e===p.PropertySet.FillLayer?t._statType+"/FillColor":e===p.PropertySet.BorderLayer?t._statType+"/OutlineColor":void 0,i=$("<div></div>").attr("data-property",e).toggleClass("g-disabled",!this._getAppManager().isCommentingEditingEnabled()).gPatternChooser({types:[a.GColor],singleOption:!0,onOpen:function(){gDesigner.stats("annotations_open_patternchooser",o())},onClickEyedropper:function(){gDesigner.stats("annotations_click_eyedropper",o())}}).on("chooseropen",(function(){try{t._document.getEditor().hideSelection(),t._chooserElem=$(this)}finally{t.setIsEditing(!0)}})).on("chooserclose",(function(e,n,o){try{gDesigner.getWorkspace().getStyleEdManager().getOverlayLock(o)?n():(t._styleEdOn=!1,gDesigner.getWorkspace().getStyleEdManager().deactivateEditor(),t._document&&t._document.getEditor().resetHideSelection()),t._chooserElem=null}finally{t.setIsEditing(!1)}})).on("patternchange",(function(n,o,i,r,s,l){if(t._getAppManager().isCommentingEditingEnabled()){var c=["_vs"],d=[!0];void 0!==o&&(c.push("_pt"),d.push(o)),"number"==typeof i&&(c.push("_op"),d.push(i));var u=null;s&&(u={chooserOn:!0},null!=l&&(u.activeStopIdx=l)),t._assignProperties(c,d,a.GLocale.get(new a.GLocaleKey("GAnnotationProperties","text.change-annotation-style")),r,e,u)}})).prepend(this._availableProperties.includes(p.PropertySet.BorderLayer)&&this._availableProperties.includes(p.PropertySet.FillLayer)?$("<span>").addClass("gravit-icon").addClass("patternchooser-icon").addClass(e===p.PropertySet.BorderLayer?"gravit-icon-pen":"gravit-icon-annotation-fill"):null);return i.find("span.preview.g-button").attr("data-title",a.GLocale.get(new a.GLocaleKey("GAnnotationProperties",this._tooltips[e]))),i.find("div.eyedropper").attr("data-title",a.GLocale.get(new a.GLocaleKey("GAnnotationProperties",this._tooltips[e+"dropper"]))),n=e===p.PropertySet.BorderLayer?new a.GLocaleKey("GStylable","layer.border"):new a.GLocaleKey("GStylable","layer.fill"),i.append($("<span/>").addClass("layer-title").text(a.GLocale.get(n))),i}if(e===p.PropertySet.BorderWidth){var n=(n,o)=>{if(this._getAppManager().isCommentingEditingEnabled()){gDesigner.stats("annotations_line-width",this._statType);var i=$(n).gUnitBox("value"),r=i?i.toUnit(a.GLength.Unit.PX):null;if(null!==r&&r>=0){const n=["_vs",e],i=[!0,r],a=void 0,s=p.PropertyTarget.BorderLayer;o?this._recordPendingUpdateForSelection(e,n,i,a,s):this._cleanPendingUpdateForSelection(e),t._assignProperties(n,i,a,o,s)}else t._updateProperties()}};return $("<input>").attr("data-property",e).attr("data-title",a.GLocale.get(new a.GLocaleKey("GAnnotationProperties",this._tooltips[e]))).toggleClass("g-disabled",!this._getAppManager().isCommentingEditingEnabled()).prop("disabled",!this._getAppManager().isCommentingEditingEnabled()).on("change",(function(){n(this,!0)})).blur((function(){n(this)})).gUnitBox({minValue:0,source:"border"})}if(e===p.PropertySet.BorderHeadMarker||e===p.PropertySet.BorderTailMarker){const n=n=>{if(!this._getAppManager().isCommentingEditingEnabled())return;const o=$(n.target).prop("checked"),i=e===p.PropertySet.BorderHeadMarker?"head":"tail";gDesigner.stats("annotations_border-marker_".concat(i),o?"on":"off"),t._assignProperty(e,o?a.GStylable.BorderMarker.Arrow:null,void 0,void 0,p.PropertyTarget.BorderLayer)},o=$("<input>").attr("data-property",e).addClass("custom-checkbox-mode").attr("type","checkbox").toggleClass("g-disabled",!this._getAppManager().isCommentingEditingEnabled()).prop("disabled",!this._getAppManager().isCommentingEditingEnabled()).on("change",n);return gDesigner.isTouchEnabled()&&o.gCheckboxSlider(),$("<label>").append(o).append($("<span>").text(e===p.PropertySet.BorderTailMarker?a.GLocale.get(new a.GLocaleKey("GAnnotationProperties","text.end-arrow")):a.GLocale.get(new a.GLocaleKey("GAnnotationProperties","text.start-arrow"))))}throw new Error("Unknown input property: "+e)}.bind(this),o=[];this._availableProperties.indexOf(p.PropertySet.BorderHeadMarker)>=0&&this._availableProperties.indexOf(p.PropertySet.BorderTailMarker)>=0&&(this._availableProperties.splice(this._availableProperties.indexOf(p.PropertySet.BorderHeadMarker),1),this._availableProperties.splice(this._availableProperties.indexOf(p.PropertySet.BorderTailMarker),1),this._availableProperties.push("arrows"));for(var r=0;r<this._availableProperties.length;r++){let e=this._availableProperties[r];o.push({clazz:this._availableProperties.includes(p.PropertySet.BorderLayer)&&this._availableProperties.includes(p.PropertySet.FillLayer)?"larger":"arrows"===e?"auto-grow":"medium",content:"arrows"===e?$("<div>").append(n(p.PropertySet.BorderHeadMarker)).append(n(p.PropertySet.BorderTailMarker)).addClass("arrows"):n(e)})}$("<div></div>").gPropertyRow({columns:o}).appendTo(this._panel),this._availableProperties.indexOf(p.PropertySet.FillLayer)>=0&&this._availableProperties.indexOf(p.PropertySet.BorderLayer)>=0&&this._panel.find('[data-property="'.concat(p.PropertySet.FillLayer,'"]')).closest(".column").css("margin-right","40px"),this._availableProperties.indexOf(p.PropertySet.BorderWidth)>=0&&this._panel.find('[data-property="'.concat(p.PropertySet.BorderWidth,'"]')).closest(".column").css("margin-right","10px"),this._toolbarButton=$("<button>").attr("class","toolbar-button icon "+this._toolbarIcon).toggleClass("g-disabled",!this._getAppManager().isCommentingEditingEnabled()).attr("data-title",a.GLocale.get(new a.GLocaleKey("GAnnotationProperties",this._toolbarTooltip))).on("click",()=>{if(gDesigner.stats("annotations_click_toolbar-btn",this._statType),this._getAppManager().isCommentingEditingEnabled()){var e=gDesigner.getToolManager().getTool(this._propertyTool);e===gDesigner.getToolManager().getActiveTool()?gDesigner.getToolManager().activateTool(i.GPointerTool,null,!0):gDesigner.getToolManager().activateTool(e,null,!0)}}).data("toolClass",this._propertyTool).prependTo(t)},p.prototype._settingChanged=function(e){"touch"===e.key&&this._updateTouchComponents()},p.prototype._updateTouchComponents=function(e){const t=this._panel.find(".custom-checkbox-mode");gDesigner.isTouchEnabled()?t.gCheckboxSlider():t.gCheckboxSlider("unmount")},p.prototype.update=function(e,t,n){if(this._document&&(this._applyPendingUpdateForSelection(),gDesigner.removeEventListener(c,this._stateChangedEvent,this),gDesigner.getFileReviewManager().removeEventListener(d.UpdateEvent,this._handleReviewUpdate,this),gDesigner.removeEventListener(u,this._settingChanged,this),this._document.getScene()&&this._document.getScene().removeEventListener(a.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange),this._document.removeEventListener(l,this._collaborationEvent,this),this._document=null),this._elements=[],e&&t&&e.getScene()){if(gDesigner.addEventListener(c,this._stateChangedEvent,this),gDesigner.getFileReviewManager().addEventListener(d.UpdateEvent,this._handleReviewUpdate,this),gDesigner.addEventListener(u,this._settingChanged,this),t)for(var o=0;o<t.length;++o){var i=t[o];(i instanceof a.GStyle&&n&&n instanceof this._propertyTool||i instanceof this._propertyClass&&i.hasMixin(a.GAnnotation))&&this._elements.push(i)}if(this._elements.length)return this._document=e,this._document.getScene().addEventListener(a.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._document.addEventListener(l,this._collaborationEvent,this),this._updateProperties(),this._updateTouchComponents(),!0}return!1},p.prototype._collaborationEvent=async function(e){switch(e.type){case l.Type.ReviewStatusChanged:this._updateToolbar(),this._elements.length&&this._updateProperties()}},p.prototype._handleReviewUpdate=async function(e){this._updateToolbar(),this._elements.length&&this._updateProperties()},p.prototype._stateChangedEvent=async function(e){this._updateToolbar(),this._document&&e.document===this._document&&this._updateProperties()},p.prototype._getAppManager=function(){return this._appManager||(this._appManager=gDesigner.getApplicationManager()),this._appManager},p.prototype._updateToolbar=function(){this._toolbarButton.toggleClass("g-disabled",!this._getAppManager().isCommentingEditingEnabled())},p.prototype._afterPropertiesChange=function(e){!e.temporary&&e.node===this._elements[0]&&this._availableProperties.some(t=>e.properties.indexOf(t)>=0)&&this._updateProperties()},p.prototype._recordPendingUpdateForSelection=function(e,t,n,o,i){this._pendingUpdates.set(e,{props:t,values:n,title:o,target:i})},p.prototype._cleanPendingUpdateForSelection=function(e){this._pendingUpdates.delete(e)},p.prototype._applyPendingUpdateForSelection=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;function t(e){const t=this._pendingUpdates.get(e);t&&this._assignProperties(t.props,t.values,t.title,!1,t.target)}e?t.call(this,e):this._pendingUpdates.forEach((e,n)=>{t.call(this,n),this._cleanPendingUpdateForSelection(n)})},p.prototype._updateProperties=function(){if(!this._elements||!this._elements.length)return void console.warn("GAnnotationProperties: empty _elements array");if(!this._document.getScene())return void console.warn("Scene is null");var e=this._elements[0];i.GElementEditor.getEditor(e);const t=!e.hasMixin(a.GAnnotation)||r.default.isOwner(gDesigner.getSyncUser(),e),n=this._getAppManager().isCommentingEditingEnabled();if(this._availableProperties.indexOf(p.PropertySet.FillLayer)>=0){var o=e.getPaintLayers().getFillLayers()[0];this._panel.find('[data-property="'.concat(p.PropertySet.FillLayer,'"]')).gPatternChooser("setPattern",o?o.getProperty("_pt",!1,!1,!0):null).gPatternChooser("value",o?o.getProperty("_pt",!1,!1,!0):null).gPatternChooser("opacity",o?o.getProperty("_op",!1,!1,!0):null),t&&n?this._panel.find('[data-property="'.concat(p.PropertySet.FillLayer,'"]')).removeClass("g-disabled"):this._panel.find('[data-property="'.concat(p.PropertySet.FillLayer,'"]')).addClass("g-disabled")}if(this._availableProperties.indexOf(p.PropertySet.BorderLayer)>=0){o=e.getPaintLayers().getBorderLayers()[0];this._panel.find('[data-property="'.concat(p.PropertySet.BorderLayer,'"]')).gPatternChooser("setPattern",o?o.getProperty("_pt",!1,!1,!0):null).gPatternChooser("value",o?o.getProperty("_pt",!1,!1,!0):null).gPatternChooser("opacity",o?o.getProperty("_op",!1,!1,!0):null),t&&n?this._panel.find('[data-property="'.concat(p.PropertySet.BorderLayer,'"]')).removeClass("g-disabled"):this._panel.find('[data-property="'.concat(p.PropertySet.BorderLayer,'"]')).addClass("g-disabled")}if(this._availableProperties.indexOf(p.PropertySet.BorderWidth)>=0){var s=(o=e.getPaintLayers().getBorderLayers()[0]).getProperty(p.PropertySet.BorderWidth).toString(),l=this._panel.find('[data-property="'.concat(p.PropertySet.BorderWidth,'"]'));l.gUnitBox({unit:this._document.getScene().$ut===a.GLength.Unit.PX?a.GLength.Unit.PX:a.GLength.Unit.PT,minValue:0}).gUnitBox("value",null!==s?new a.GLength.parseLength(s,a.GLength.Unit.PT):null),t&&n?l.removeClass("g-disabled").attr("disabled",!1):l.addClass("g-disabled").attr("disabled",!0)}[p.PropertySet.BorderHeadMarker,p.PropertySet.BorderTailMarker].filter(e=>this._availableProperties.indexOf(e)>=0||this._availableProperties.includes("arrows")).forEach(o=>{var i=e.getPaintLayers().getBorderLayers()[0].getProperty(o),a=this._panel.find('[data-property="'+o+'"]');a.prop("checked",!!i),t&&n?(a.removeClass("g-disabled"),a.attr("disabled",!1)):(a.addClass("g-disabled"),a.attr("disabled",!0))})},p.prototype._assignProperty=function(e,t,n,o,i,a){this._assignProperties([e],[t],n,o,i,a)},p.prototype._assignProperties=function(e,t,n,o,i,r){if(this._document){var s=this._document.getEditor();o||s.beginTransaction();try{for(var l=null,c=0;c<this._elements.length;++c){var d;i===p.PropertyTarget.FillLayer?((d=this._elements[c].getPaintLayers().getFillLayers()[0])||(d=new a.GStylable.FillPaintLayer,this._elements[c].getPaintLayers().appendChild(d)),l=$.extend({fillLayerIndex:d.getParent().getIndexOfChild(d)},l||r)):i===p.PropertyTarget.BorderLayer?((d=this._elements[c].getPaintLayers().getBorderLayers()[0])||(d=new a.GStylable.BorderPaintLayer,this._elements[c].getPaintLayers().appendChild(d)),l=$.extend({borderLayerIndex:d.getParent().getIndexOfChild(d)},l||r)):d=this._elements[c],d&&d.setProperties(e,t,!1,!1,o)}}finally{o||s.commitTransaction(n,l)}}else console.warn("GAnnotationProperties: empty _document property")},p.prototype.isEditing=function(){return this._isEditing},p.prototype.setIsEditing=function(e){this._isEditing=e},p.prototype.toString=function(){return"[Object GAnnotationProperties]"},e.exports=p},function(e,t,n){"use strict";var o=n(14);n(52),n(7),n(62);var i=o(n(1132));const{GLocale:a,GLocaleKey:r,GObject:s}=n(1),l=n(376),c=n(1142),d=n(115),u=n(71),p=n(432),{FileStatus:{IN_REVIEW:g,AWAITING_APPROVAL:h,APPROVED:f,REOPENED:m},GFileReviewActions:{ACTION_REQUEST_REVIEW:y,ACTION_REQUEST_APPROVAL:v,ACTION_REOPEN:_,ACTION_APPROVE:b},FileReviewStatusAvailable:w,ShareRoles:C,FILE_REVIEW_ENABLED:x}=n(9),S=n(1513);function E(){}s.inherit(E,d),E.prototype.init=function(e,t){this._container=e,this._fileStatusHistoryDialog=new S,this._init()},E.prototype.update=function(e,t,n){return e!==this._document&&e?(this._document=e,this._reviewManager&&this._reviewManager.removeEventListener(c.UpdateEvent,this._handleReviewUpdate,this),gDesigner.addEventListener(l,this._stateChangedEvent,this),this._reviewManager=gDesigner.getFileReviewManager(),this._reviewManager.addEventListener(c.UpdateEvent,this._handleReviewUpdate,this),this._requestUIUpdate()):e||(gDesigner.removeEventListener(l,this._stateChangedEvent,this),this._reviewManager&&(this._reviewManager.removeEventListener(c.UpdateEvent,this._handleReviewUpdate,this),this._reviewManager=null)),this._document=e,!!this._document},E.prototype.isAvailable=function(){return!!x},E.prototype._init=function(){x&&(this._updatingStatus=!1,this._container.addClass("g-annotation-review-docker"),this._buildMainPanel($("<div/>").addClass("panel").addClass("main-panel").hide()),this._document&&this._requestUIUpdate())},E.prototype._getDAOStatus=async function(e){const t=this._getAppManager();var n;switch(e){case g:return n=await t.hasAccess(y,!0),{status:e,getLabel:()=>a.get(new r("GReviewDockerProperties","text.review-title")),getDescription:()=>a.get(new r("GReviewDockerProperties","text.review-description")),getIcon:()=>null,getIconLabel:()=>null,isAvailable:async()=>n&&!!this._reviewManager&&this._reviewManager.canUpdateToStatus(g)};case m:return n=await t.hasAccess(_,!0),{status:e,getLabel:()=>a.get(new r("GReviewDockerProperties",n?"text.reopen-title":"text.reopened-title")),getDescription:()=>a.get(new r("GReviewDockerProperties","text.reopen-description")),getIcon:()=>null,getIconLabel:()=>null,isAvailable:async()=>n&&!!this._reviewManager&&this._reviewManager.canUpdateToStatus(m)};case h:const i=t.hasRole(C.Owner),s=await this._reviewManager.hasApprovers();return n=await t.hasAccess(v,!0),{status:e,getLabel:()=>a.get(new r("GReviewDockerProperties",n?"text.request-approval-title":"text.requested-approval-title")),getDescription:()=>a.get(new r("GReviewDockerProperties","text.request-approval-description")),getIcon:()=>i&&!s?"info":null,getIconLabel:()=>i&&!s?a.get(new r("GReviewDockerProperties","text.request-approval-tooltip")):null,isAvailable:async()=>{const e=!!this._reviewManager&&this._reviewManager.canUpdateToStatus(h);return s&&n&&e}};case f:n=await t.hasAccess(b,!0);var o=this._getStatus();return{status:e,getLabel:()=>a.get(new r("GReviewDockerProperties",n&&e!==o?"text.approve-title":"text.approved-title")),getDescription:()=>a.get(new r("GReviewDockerProperties","text.approved-description")),getIcon:()=>null,getIconLabel:()=>null,isAvailable:async()=>n&&!!this._reviewManager&&this._reviewManager.canUpdateToStatus(f)}}},E.prototype._stateChangedEvent=function(){this._requestUIUpdate()},E.prototype._handleReviewUpdate=function(){this._requestUIUpdate()},E.prototype._buildMainPanel=function(e){this._mainPanel=e;let t=$("<div/>").addClass("row").addClass("header").appendTo(this._mainPanel);$("<div/>").text(a.get(new r("GReviewDockerProperties","text.current-status"))).addClass("status").click(()=>{this._opened=!1,this._container.gDialog("close")}).appendTo(t),$("<div/>").text(a.get(new r("GReviewDockerProperties","text.status-history"))).addClass("history-actions").hide().click(()=>{gDesigner.stats("reviewdocker_open_status-history"),this._fileStatusHistoryDialog.open()}).appendTo(t),this._statusSelectorContainer=$("<div/>").addClass("row").addClass("status-selector").appendTo(this._mainPanel);let n=$("<div/>").addClass("row").addClass("footer").hide().appendTo(this._mainPanel);$("<div/>").addClass("footer-title").text(a.get(new r("GReviewDockerProperties","text.please-share-to-start"))).appendTo(n),$("<div/>").addClass("footer-action").text(a.get(new r("GReviewDockerProperties","text.share-design-now"))).addClass("footer-action").click(()=>this._requestShare()).appendTo(n),this._mainPanel.appendTo(this._container)},E.prototype._requestShare=function(){const e=gDesigner.getShareManager();e.isShareProRestricted()?gDesigner.stats("reviewdocker_nonprotriespro_share"):gDesigner.stats("reviewdocker_share"),this._document.getStorageItem()?e.share():((new i.default).listen(u).when(e=>!!(e&&e.type&&e.document&&!e.document.isLockedByVersionHistory()&&e.type===u.Type.StorageItemUpdated&&e.document.getId())&&(this._document===e.document||this._document.getStorageItem()&&this._document.getId()===e.document.getId())).do(()=>e.share()),gDesigner.executeAction(p.ID))},E.prototype._requestUIUpdate=async function(){this.isAvailable()&&(this._updatingUI?this._requestedDuringUIUpdate=!0:(this._updatingUI=!0,await this._updateUI(),this._updatingUI=!1,this._requestedDuringUIUpdate&&(this._requestedDuringUIUpdate=!1,await this._updateUI())))},E.prototype._getAppManager=function(){return this._appManager||(this._appManager=gDesigner.getApplicationManager()),this._appManager},E.prototype._updateFooter=function(){var e=this._mainPanel.find(".footer"),t=this._mainPanel.find(".history-actions");const n=!(!this._document||!this._document.getStorageItem());e.find(".footer-title").text(a.get(new r("GReviewDockerProperties",n?"text.please-share-to-start":"text-please-save-share-to-start"))),e.find(".footer-action").text(a.get(new r("GReviewDockerProperties",n?"text.share-design-now":"text.save-share-design-now"))),this._isDocumentSane()?(e.hide(),t.show()):(e.show(),t.hide())},E.prototype._updateUI=async function(){w.includes(this._getStatus())&&(this._statusSelectorContainer.empty(),this._mainPanel&&this._mainPanel.hide(),this._document&&(this._mainPanel&&this._mainPanel.show(),await this._createStatusList(this._statusSelectorContainer),this._updateFooter(),this._mainPanel.show()))},E.prototype._getStatus=function(){return this._reviewManager&&this._reviewManager.getStatus()||g},E.prototype._isDocumentSane=function(){return!!this._document&&(this._getAppManager().isSharing()&&this._document.isCollaborative())},E.prototype._createStatusList=async function(e){var t=this._getStatus(),n=this._isStatusChangeAllowed();$("<div/>").addClass("dropdown-icon").appendTo(e),this._selectedItemContainer=$("<div/>").addClass("selected-item-container").toggleClass("disabled",!this._isDocumentSane()||!n).appendTo(e),this._currentSelectedStatusElement=await this._makeItemForDAO(await this._getDAOStatus(t),{selected:!0,canHover:!1,disabled:!this._isDocumentSane()}),this._currentSelectedStatusElement.appendTo(this._selectedItemContainer),this._statusListOverlay=$("<div/>").gOverlay({padding:!1,clazz:"g-file-status-selector-overlay",offsetY:-66,releaseOnClose:!1}),this._statusSelector=$("<div/>").addClass("g-file-status-selector").appendTo(this._statusListOverlay);const o=async e=>{var n=await this._makeItemForDAO(e,{selected:e.status===t,canHover:!0});n.appendTo(this._statusSelector);await e.isAvailable()?n.on("click",async()=>{if(gDesigner.stats("reviewdocker_design",(e=>{switch(e){case g:return"InReview";case h:return"RequestApproval";case f:return"Approved";case m:return"ReOpened"}})(e.status)),this._statusListOverlay.gOverlay("close"),this._getStatus()!==e.status){this._updatingStatus=!0;const t=await this._makeItemForDAO(e,{selected:!1,canHover:!1,loading:!0});this._currentSelectedStatusElement.replaceWith(t),this._currentSelectedStatusElement=t,this._reviewManager.updateReviewStatus(e.status).then(()=>this._updatingStatus=!1).catch(()=>this._updatingStatus=!1)}}):n.on("click",()=>this._statusListOverlay.gOverlay("close"))};if(this._isDocumentSane()&&n){this._selectedItemContainer.removeClass("disabled");for(let e=0;e<w.length;e++){var i=w[e],a=await this._getDAOStatus(i);await o(a)}e.on("click",async()=>{this._updatingStatus||this._statusListOverlay.gOverlay("open",this._selectedItemContainer)})}},E.prototype._makeItemForDAO=async function(e,t){let{selected:n=!1,canHover:o=!0,loading:i=!1,disabled:a=!1}=t;var r=$("<div/>").addClass("g-annotation-review-docker-status-item").data("status",e).attr("status-id",e.status).toggleClass("disabled",a||!n&&!await e.isAvailable()).toggleClass("can-hover",o).toggleClass("loading",i),s=$("<div/>").addClass("icon-container").toggleClass("loading",i).append($("<div/>").addClass("loading-indicator")).appendTo(r);if(!i){var l=e.getIcon();l?(s.addClass(l),e.getIconLabel()&&s.attr("data-title",e.getIconLabel())):s.toggleClass("selected",n)}var c=$("<div/>").addClass("details-container").appendTo(r);return $("<div/>").addClass("title").text(e.getLabel()).appendTo(c),$("<div/>").addClass("description").text(e.getDescription()).appendTo(c),r},E.prototype._isStatusChangeAllowed=function(){return!0},e.exports=E},function(e,t,n){"use strict";n(7),n(18),n(29);const{GLocale:o,GLocaleKey:i}=n(1),a=n(1143),r=n(166),{gApi:s,Notification:l,NotificationConstants:{ACTIONS:{ACTION_APPROVE:c,ACTION_REQUEST_APPROVE:d,ACTION_REOPEN:u,ACTION_IN_REVIEW:p}={}}}=n(9);function g(){this._container=null,this._opened=!1}g.prototype._updateHistoryList=async function(){const e=this._container.find(".list");e.empty(),e.addClass("loading");var t=await s.annotations.getDesignHistory(gDesigner.getActiveDocument().getId()).catch(e=>[]);e.append(t.map(e=>{const t=l.from(e);var n;switch(t.getAction()){case c:n=o.get(new i("GFileStatusHistoryDialog","text.action-approved"));break;case d:n=o.get(new i("GFileStatusHistoryDialog","text.action-request-approval"));break;case u:n=o.get(new i("GFileStatusHistoryDialog","text.action-reopened"));break;case p:n=o.get(new i("GFileStatusHistoryDialog","text.action-in-review"))}if(n){var r=$("<span></span>").addClass("annotation-title-group"),s=$("<span></span>").html(n.replace("%name",this._getUserNameFromNotification(t))).addClass("annotation-title").appendTo(r),g=o.toLocaleDate(t.created,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"});return $("<span>").text("·").addClass("dot").appendTo(r),$("<span></span>").text(g).addClass("annotation-date").appendTo(r),new a({id:t.uid,name:t.uname,last_name:t.last_name}).build().addClass("g-user-preview-history").insertBefore(s),r}})),e.removeClass("loading")},g.prototype.open=function(){if(this._opened)return;this._opened=!0,this._container&&this._container.remove(),this._container=$("<div/>").gDialog({className:"g-file-status-history-dialog"});let e=$("<div/>").addClass("row").addClass("header").appendTo(this._container);$("<div/>").addClass("title").text(o.get(new i("GFileStatusHistoryDialog","text.status-history"))).appendTo(e),$("<div></div>").addClass("btn-close").click(()=>{this._opened=!1,this._container.gDialog("close")}).append($("<span></span>").addClass("gravit-icon-close")).appendTo(e),$("<div/>").addClass("list").appendTo(this._container);this._container.gDialog("open",!1),this._updateHistoryList()},g.prototype._getUserNameFromNotification=function(e){return new r({name:e.uname,last_name:e.last_name}).getFullUserName()},e.exports=g},function(e,t,n){"use strict";var o=n(1),i=n(378);function a(e){this._htmlElement=e,this._collapseIcon=$('<span class="collapse-icon"><span></span><span></span></span>')}a.CollapseMode={None:"none",Half:"half",Full:"full"},a.prototype._htmlElement=null,a.prototype._collapseIcon=null,a.prototype._panels=null,a.prototype._activePanel=null,a.prototype._collapseMode=null,a.prototype.getCollapseMode=function(){return this._collapseMode},a.prototype.setCollapseMode=function(e){e!==this._collapseMode&&(this._collapseMode&&this._htmlElement.removeClass("collapse-"+this._collapseMode),this._collapseMode=e,this._collapseMode&&this._htmlElement.addClass("collapse-"+this._collapseMode))},a.prototype.toggleCollapseMode=function(){switch(this._collapseMode){case a.CollapseMode.Full:this.setCollapseMode(a.CollapseMode.None);break;case a.CollapseMode.Half:this.setCollapseMode(a.CollapseMode.Full);break;case a.CollapseMode.None:this.setCollapseMode(a.CollapseMode.Half)}},a.prototype.getActivePanel=function(){return this._activePanel},a.prototype.setActivePanel=function(e){if(e===this._activePanel)this.toggleCollapseMode();else{for(var t=0;t<this._panels.length;++t){var n=this._panels[t],o=n.panel.getId();o===e?(n.container.css("display",""),n.tab.addClass("g-active"),n.panel.activate()):(n.container.css("display","none"),n.tab.removeClass("g-active"),o===this._activePanel&&n.panel.deactivate())}this._activePanel=e}},a.prototype.setPanelEnabled=function(e,t){var n=this._getPanelInfo(e);if(n)if(t)n.container.find(".g-disabled-overlay").remove(),n.container.removeClass("g-disabled");else{var o=n.container.find(".g-disabled-overlay");0===o.length&&(o=$("<div></div>").addClass("g-disabled-overlay").appendTo(n.container)),n.container.addClass("g-disabled")}},a.prototype.init=function(){this._panels=[];var e=$("<div></div>").addClass("panels-tabs").appendTo(this._htmlElement),t=$("<div></div>").addClass("panels-frame").appendTo(this._htmlElement),n=function(n){var a=$("<button></button>").addClass("panel-tab").attr("data-panel-id",n.getId()).text(o.GLocale.get(n.getTitle())).on("click",function(e){gDesigner.stats("panels_set_active"),this.setActivePanel($(e.target).closest("button").attr("data-panel-id"))}.bind(this)).on("mousedown",(function(e){e.preventDefault()})).prepend(this._collapseIcon.clone()).appendTo(e),r=$("<div></div>").addClass("panel-container panel-"+n.getId()).css("display","none").appendTo(t);n.init(r),r.find("button").each((function(e,t){t.on("mousedown",(function(e){e.preventDefault()}))})),this.setPanelEnabled(n.getId(),n.isEnabled()),this._panels.push({tab:a,container:r,panel:n}),n.addEventListener(i.UpdateEvent,function(){this.setPanelEnabled(n.getId(),n.isEnabled())}.bind(this))}.bind(this);if(gravit.panels)for(var r=0;r<gravit.panels.length;++r){var s=gravit.panels[r];n(s),this._activePanel||this.setActivePanel(s.getId())}this.setCollapseMode(a.CollapseMode.None)},a.prototype.relayout=function(){},a.prototype._getPanelInfo=function(e){for(var t=0;t<this._panels.length;++t){if(this._panels[t].panel.getId()===e)return this._panels[t]}},e.exports=a},function(e,t,n){"use strict";n(28);var o=n(379);o.prototype._rightSidebarDefaultWidthForTouch=300,o.prototype._updateTouchToolbar=function(e){const t=["fill","border","effect"];if(!gDesigner.isTouchEnabled())return;this._touchToolbar||(this._touchToolbar=$("<div/>").addClass("g-touch-toolbar").prependTo(this._htmlElement));let n=null;this._touchToolbar.empty(),this.removeClassName("align-active"),this._sidebars.forEach(o=>{let{sidebar:i,container:a}=o;const r=i.getTouchTools(e);i&&i.isVisible()&&r&&r.forEach(e=>{e.sidebar=i.getId();const o=!!this._activeTouchTool&&e.id==this._activeTouchTool.id;o&&(n=e);let r=e.panel;if(Array.isArray(e.panel)||(r=[e.panel]),"dimension.align"===e.id&&o&&this.addClassName("align-active"),r.forEach(t=>{let n;n="string"==typeof t?a.find(t):$(t),n.attr("g-touch-tool",e.id).toggleClass("g-active",o).addClass("g-touch-toolbar-panel")}),e.toolbar){let t=e.toolbar;Array.isArray(e.toolbar)||(t=[e.toolbar]),t.forEach(t=>{let n;n="string"==typeof t?a.find(t):$(t),n.attr("g-touch-tool",e.id).toggleClass("g-active",o).addClass("g-touch-toolbar-label")})}var s=$("<button/>").addClass("g-touch-toolbar-button").attr("g-touch-tool",e.id).attr("id",e.id).toggleClass("g-active",o).append($("<span/>").addClass(e.icon||"")).on("click",()=>{this.removeClassName("align-active"),"dimension.align"==e.id?($(".scrolling-panels").addClass("hide"),this.addClassName("align-active")):$(".scrolling-panels").removeClass("hide"),-1!=t.indexOf(e.id)?$(".sidebar-inspector").addClass("expand"):$(".sidebar-inspector").removeClass("expand"),this._activeTouchTool&&this._activeTouchTool.id==e.id?this._isActiveSidebarDeactivatable()&&(this.setActiveTouchTool(null),this._htmlElement.css("width",i.getDefaultWidth()+"px")):this._tryActivateSidebar(i)&&(this.setActiveTouchTool(e),e.panelWidth?this._htmlElement.css("width",e.panelWidth):this._htmlElement.css("width",i.getDefaultWidth()+"px"),".appearance-toolbar"!==e.toolbar?this._htmlElement.find(".appearance-properties-panel").addClass("display-none"):this._htmlElement.find(".appearance-properties-panel").removeClass("display-none"))}).appendTo(this._touchToolbar);if(-1!=t.indexOf(e.id)){var l=$(".".concat(e.id,"-block")).length;s.append($("<div/>").addClass("count").append($("<div/>").addClass("scale").text(l)))}})}),this.setActiveTouchTool(n),n||this._setDefaultRightSidebarWidthForTouch()},o.prototype.updateTouchToolbar=function(){this._updateTouchToolbar()},o.prototype._setDefaultRightSidebarWidthForTouch=function(){this._htmlElement.css("width",this._rightSidebarDefaultWidthForTouch+"px")}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(52),__webpack_require__(17),__webpack_require__(578),__webpack_require__(89),__webpack_require__(26),__webpack_require__(51),__webpack_require__(18),__webpack_require__(3),__webpack_require__(138),__webpack_require__(231),__webpack_require__(28),__webpack_require__(22);var _editor=__webpack_require__(45),_core=__webpack_require__(1),_client=__webpack_require__(13),_config=__webpack_require__(9),_richtooltipconfig=__webpack_require__(61);const GCategory=__webpack_require__(16),GDocument=__webpack_require__(151),GDocumentStatus=__webpack_require__(78),simpleShapes=__webpack_require__(1517),GAnnotationsSidebar=__webpack_require__(550),GInspectorSidebar=__webpack_require__(843),GWindows=__webpack_require__(585),GArrangeAction=__webpack_require__(848),GClipAction=__webpack_require__(788),GConvertToPathAction=__webpack_require__(789),GCreateSymbolAction=__webpack_require__(590),GExportAction=__webpack_require__(840),GFitAllAction=__webpack_require__(434),GGravitCloudAction=__webpack_require__(433),GGroupAction=__webpack_require__(790),GLinkImageAction=__webpack_require__(1256),GMagnificationAction=__webpack_require__(1144),GMergeMainAction=__webpack_require__(791),GOpenAction=__webpack_require__(792),GOriginalViewAction=__webpack_require__(1258),GPlaceImportAction=__webpack_require__(1259),GRedoAction=__webpack_require__(1260),GSaveAction=__webpack_require__(432),GSaveAsAction=__webpack_require__(430),GShowGridAction=__webpack_require__(1261),GShowGuideLinesAction=__webpack_require__(1146),GShowSymbolLabelsAction=__webpack_require__(1262),GSplitAction=__webpack_require__(849),GToggleGuideAction=__webpack_require__(1263),GToggleSidebarAction=__webpack_require__(1147),GToggleSnapAction=__webpack_require__(1264),GToggleSnapZonesAction=__webpack_require__(1265),GTransformAction=__webpack_require__(850),GUndoAction=__webpack_require__(1148),GVectorizeBorderAction=__webpack_require__(851),GZoomInAction=__webpack_require__(1266),GZoomOutAction=__webpack_require__(1267),GMenuOpenEvent=__webpack_require__(783),GMenu=__webpack_require__(223),GMenuItem=__webpack_require__(325),GCollaborators=__webpack_require__(1268),GDocumentEvent=__webpack_require__(71),GSettingChangedEvent=__webpack_require__(125),GApplicationStateChangedEvent=__webpack_require__(376),GShareEvent=__webpack_require__(847),GNetworkAvailabilityChangedEvent=__webpack_require__(277),GUIIcons=__webpack_require__(240),GLicenseChangedEvent=__webpack_require__(426);function GToolbar(e){this._htmlElement=e,this._initShapeMenu=!1}_core.GObject.inherit(GToolbar,_core.GObject),GToolbar.getToolName=function(e){if(e&&gravit)for(var t of gravit.tools)if(t.tool===e||e instanceof t.tool){var n=t.title;if(_core.GLocale.getLanguage()!==_core.GLocaleLanguage.English)try{n=_core.GLocale.get(new _core.GLocaleKey(t.toolString,"name"),void 0,_core.GLocaleLanguage.English)}catch(e){n="[errored]"}return n}return""},GToolbar.getToolTooltipConfig=function(e){return gravit&&gravit.tools&&gravit.tools.length?gravit.tools.filter(t=>{let{toolString:n}=t;return n===e})[0].richTooltipConfig:null},GToolbar.prototype._htmlElement=null,GToolbar.prototype._zoomButton=null,GToolbar.prototype._pageButton=null,GToolbar.prototype._selectSection=null,GToolbar.prototype._commentToggleSection=null,GToolbar.prototype._currentZoomLevel=-1,GToolbar.prototype._symbolsButton=null,GToolbar.prototype._initShapeMenu=!1,GToolbar.prototype._toolsDiv=null,GToolbar.prototype._exportButton=null,GToolbar.prototype._shareButton=null,GToolbar.prototype._viewMenu=null,GToolbar.prototype._collaboratorsDiv=null,GToolbar.prototype.init=function(){$("<div></div>").addClass("section compound-section file-section").append(this._createLabelButton({action:gDesigner.getAction(GSaveAction.ID)})).append(this._createLabelButton({action:gDesigner.getAction(GUndoAction.ID),icon:"gravit-icon-undo",split:!0,menu:()=>this._createQuickHistoryUndoRedoMenu(),click:()=>gDesigner.executeAction(GUndoAction.ID)})).append(this._createLabelButton({action:gDesigner.getAction(GRedoAction.ID)})).appendTo(this._htmlElement),this._initZoomButton(),this._viewMenu=new GMenu,$("<div></div>").addClass("section compound-section view-section").append(this._zoomButton).append(this._createLabelButton({icon:GUIIcons["gravit-icon-expand"],label:_core.GLocale.get(new _core.GLocaleKey("GFitAllAction","title")),click:function(){gDesigner.executeAction(GFitAllAction.ID,void 0,"toolbar")},tooltipConfig:GFitAllAction.TOOLTIP_CONFIG[_richtooltipconfig.TOOLTIP_AREA.TOOLBAR]})).append(this._createLabelButton({icon:"gravit-icon-move",label:_core.GLocale.get(new _core.GLocaleKey("GToolbar","text.view")),menu:this._createToolItems("view",this._viewMenu),getActiveItem:()=>{const e=gDesigner.getToolManager(),t=e&&e.getActiveTool(),n=t&&GToolbar.getToolName(t);return n&&this._viewMenu.findItem(n)},split:!0,click:function(e){this._activateOrResetTool($(e.target).closest(".toolbar-button").data("tool"))}.bind(this),tooltipConfig:GToolbar.getToolTooltipConfig("GHandTool")}).data("tool-group","view").data("tool",_editor.GHandTool)).append(this._createSnapButton()).appendTo(this._htmlElement),this._toolsDiv=$("<div></div>").addClass("section compound-section tool-section").append(this._createLabelButton({icon:"gravit-icon-cursor-filled",label:_core.GLocale.get(new _core.GLocaleKey("GToolbar","text.select")),menu:this._createToolItems("select"),split:!0,click:function(e){gDesigner.stats("toolbar_click_menu","select");var t=$(e.target).closest(".toolbar-button").data("tool");this._activateOrResetTool(t)}.bind(this),tooltipConfig:GToolbar.getToolTooltipConfig("GPointerTool")}).addClass("select-toolbar-button").data("tool-group","select").data("tool",_editor.GPointerTool)).append(this._createLabelButton({icon:"gravit-icon-shapes",label:_core.GLocale.get(new _core.GLocaleKey("GShape","name")),menu:this._createToolItems("shape"),split:!0,click:function(e){gDesigner.stats("toolbar_click_menu","shape"),$(e.target).closest(".toolbar-button").data("tool")&&this._initShapeMenu?this._activateOrResetTool($(e.target).closest(".toolbar-button").data("tool")):$(e.target).closest(".toolbar-button").find("button.dropdown-button").trigger("mousedown")}.bind(this)}).addClass("shapes-toolbar-button").data("tool-group","shape").data("tool",_editor.GRectangleTool)).append(this._createLabelButton({icon:"gravit-icon-pen",label:_core.GLocale.get(new _core.GLocaleKey("GPath","name")),menu:this._createToolItems("path"),split:!0,click:function(e){gDesigner.stats("toolbar_click_menu","pen");var t=$(e.target).closest(".toolbar-button").data("tool");this._activateOrResetTool(t)}.bind(this),tooltipConfig:GToolbar.getToolTooltipConfig("GPenTool")}).addClass("path-toolbar-button").data("tool-group","path").data("tool",_editor.GPenTool)).append(this._createLabelButton({icon:"gravit-icon-scalpel",label:_core.GLocale.get(new _core.GLocaleKey("GKnifeTool","name")),menu:this._createToolItems("knife"),split:!0,click:function(e){gDesigner.stats("toolbar_click_menu","knife");var t=$(e.target).closest(".toolbar-button").data("tool");this._activateOrResetTool(t)}.bind(this),tooltipConfig:GToolbar.getToolTooltipConfig("GKnifeTool")}).addClass("knife-toolbar-button").data("tool-group","knife").data("tool",_editor.GKnifeTool)).append(this._createLabelButton({icon:"gravit-icon-textbox",label:_core.GLocale.get(new _core.GLocaleKey("GText","name")),click:function(e){gDesigner.stats("toolbar_click_menu","text"),this._activateOrResetTool($(e.target).closest(".toolbar-button").data("tool"))}.bind(this),tooltipConfig:GToolbar.getToolTooltipConfig("GTextTool")}).addClass("text-toolbar-button").data("tool",_editor.GTextTool)).append(this._createLabelButton({icon:"gravit-icon-upload-image-icon",label:_core.GLocale.get(new _core.GLocaleKey("GPlaceImportAction","tooltip-title")),menu:this._createImageMenu(),split:!0,click:()=>gDesigner.executeAction(GPlaceImportAction.ID,void 0,"toolbar"),tooltipConfig:GPlaceImportAction.TOOLTIP_CONFIG[_richtooltipconfig.TOOLTIP_AREA.TOOLBAR]}).addClass("image-toolbar-button")).appendTo(this._htmlElement),void 0!==typeof localStorage&&localStorage.getItem("enable_mods")&&(this._toolsDiv.append(this._createLabelButton({icon:"gravit-icon-plus",label:"Add custom button",click:()=>{let e=$("<div/>").append($("<div/>").text("Add custom button code")).append(this._textEdit($('<textarea rows="30" cols="100" wrap="off" class="custom_button_code">').text("function (shapes, scene, selEditor, core, editor, client) {\n\t// your code here\n\t\n}"))).append($("<div/>").append("<label>Name:</label>").append($('<input type="text" class="custom_button_name" value="New custom action">')));e.gDialog({releaseOnClose:!0,className:"context-pane",buttons:[$('<button class="settings-button">Cancel</button>').on("click",()=>{e.gDialog("close")}),$('<button class="settings-button">Save</button>').on("click",()=>{var t=JSON.parse(localStorage.getItem("designer.custom"))||[],n=_core.GUtil.uuid();t.push({name:$(".custom_button_name")[0].value,code:$(".custom_button_code")[0].value,id:n}),localStorage.setItem("designer.custom",JSON.stringify(t)),this._refreshCustomButtons(),e.gDialog("close")})]}),e.gDialog("open",!1),$(".custom_button_code").focus(),$(".custom_button_code")[0].selectionStart=$(".custom_button_code")[0].selectionEnd=$(".custom_button_code")[0].value.indexOf("code here")+11}})),this._refreshCustomButtons()),$("<div></div>").addClass("section compound-section transform-section").append(this._createLabelButton({action:gDesigner.getAction(GTransformAction.ID+"."+GTransformAction.Type.FlipHorizontal),icon:"gravit-icon-flip-horizontal"})).append(this._createLabelButton({action:gDesigner.getAction(GTransformAction.ID+"."+GTransformAction.Type.FlipVertical),icon:"gravit-icon-flip-vertical"})).append(this._createLabelButton({action:gDesigner.getAction(GTransformAction.ID+"."+GTransformAction.Type.Rotate90Left),icon:"gravit-icon-rotate-left"})).append(this._createLabelButton({action:gDesigner.getAction(GTransformAction.ID+"."+GTransformAction.Type.Rotate90Right),icon:"gravit-icon-rotate-right"})).appendTo(this._htmlElement),$("<div></div>").addClass("section compound-section group-section").append(this._createLabelButton({action:gDesigner.getAction(GGroupAction.ID),label:_core.GLocale.get(new _core.GLocaleKey("GToolbar","text.group"))})).append(this._createLabelButton({action:gDesigner.getAction(GSplitAction.ID),label:_core.GLocale.get(new _core.GLocaleKey("GToolbar","text.split"))})).append(this._createLabelButton({action:gDesigner.getAction(GMergeMainAction.ID),label:_core.GLocale.get(new _core.GLocaleKey("GToolbar","text.merge")),menu:this._createMergeMenu(),split:!0})).append(this._createLabelButton({action:gDesigner.getAction(GClipAction.ID),label:_core.GLocale.get(new _core.GLocaleKey("GToolbar","text.clip"))})).appendTo(this._htmlElement),$("<div></div>").addClass("section compound-section arrange-section").append(this._createLabelButton({action:gDesigner.getAction(GArrangeAction.ID+"."+_editor.GEditor.ArrangeOrderType.BringForward)})).append(this._createLabelButton({action:gDesigner.getAction(GArrangeAction.ID+"."+_editor.GEditor.ArrangeOrderType.SendBackward)})).appendTo(this._htmlElement),$("<div></div>").addClass("section compound-section action-section").append(this._createLabelButton({action:gDesigner.getAction(GCreateSymbolAction.ID)})).append(this._createLabelButton({action:gDesigner.getAction(GConvertToPathAction.ID)})).append(this._createLabelButton({action:gDesigner.getAction(GVectorizeBorderAction.ID)})).appendTo(this._htmlElement),this._exportButton=this._createLabelButton({action:gDesigner.getAction(GExportAction.ID),split:!0,menu:this._createExportMenu()}).addClass("export-toolbar-button"),this._exportButton.find(".dropdown-button").addClass("g-touch-only"),this._collaboratorsDiv=$("<div/>").gCollaborators(),this._shareButton=$("<button/>").gShareButton(),$("<div></div>").addClass("section compound-section export-section").append(this._exportButton).append($("<div/>").addClass("share-section").append(this._collaboratorsDiv).append(this._shareButton)).appendTo(this._htmlElement),this._updateActiveTool(gDesigner.getToolManager().getActiveTool()),this._updateContextTools(),this._updateZoomFromWindow(),this._updateShareSection(),this._updateActions(),gDesigner.getToolManager().addEventListener(_editor.GToolManager.ToolChangedEvent,this._toolChangedEvent,this),gDesigner.getWindows().addEventListener(GWindows.WindowEvent,this._windowEvent,this),gDesigner.addEventListener(GDocumentEvent,this._documentEvent,this),gDesigner.addEventListener(GSettingChangedEvent,this._settingChangedEvent,this),gDesigner.addEventListener(GNetworkAvailabilityChangedEvent,this._networkAvailabilityChangedEvent,this),gDesigner.addEventListener(GApplicationStateChangedEvent,this._applicationStateChangedEvent,this),gDesigner.addEventListener(GShareEvent,this._shareEvent,this)},GToolbar.prototype.setVisible=function(e){const t=this.isVisible();this._htmlElement.css("display",e?"":"none"),t!==e&&gDesigner.relayout()},GToolbar.prototype.isVisible=function(){this._htmlElement.is(":visible")},GToolbar.prototype._applicationStateChangedEvent=function(e){this._updateUI(),this._updateViewBasedOnPermissions()},GToolbar.prototype._updateViewBasedOnPermissions=function(){},GToolbar.prototype._shareEvent=function(e){e.type===GShareEvent.Type.Updated&&this._updateUI()},GToolbar.prototype._updateUI=function(){this._updateShareSection(),this._updateActions();const e=!gDesigner.getApplicationManager().isPagesInspectEnabled();if(this._htmlElement.toggleClass("g-simple-ui",e),e){this._pageButton||(this._pageButton=$("<div/>").addClass("page-button").addClass("toolbar-button").gPageButton().prependTo(this._htmlElement.find(".view-section")),this._updatePageButton());const e=gDesigner.getApplicationManager().isCommentingEnabled();this._selectSection?e||(this._selectSection.remove(),this._selectSection=null):e&&(this._selectSection=$("<div></div>").addClass("section compound-section select-section").append(this._createLabelButton({icon:"gravit-icon-cursor-filled",label:_core.GLocale.get(new _core.GLocaleKey("GToolbar","text.select")),click:function(e){gDesigner.stats("toolbar_click_menu","select");var t=$(e.target).closest(".toolbar-button").data("tool");this._activateOrResetTool(t)}.bind(this),tooltipConfig:GToolbar.getToolTooltipConfig("GPointerTool")}).data("tool-group","select").data("tool",_editor.GPointerTool)).insertAfter(this._htmlElement.find(".view-section")),this._updateActiveTool(gDesigner.getToolManager().getTool(_editor.GPointerTool))),this._commentToggleSection?e||(this._commentToggleSection.remove(),this._commentToggleSection=null):e&&(this._commentToggleSection=$("<div></div>").addClass("section compound-section comment-toggle-section").append(this._createCommentToggleToolbarBtn()).insertAfter(this._htmlElement.find(".select-section"))),gDesigner.isTouchEnabled()&&this._updateTouchSimpleUI()}else this._selectSection&&(this._selectSection.remove(),this._selectSection=null),this._pageButton&&(this._pageButton.gPageButton("release"),this._pageButton=null),this._commentToggleSection&&(this._commentToggleSection.remove(),this._commentToggleSection=null)},GToolbar.prototype._networkAvailabilityChangedEvent=function(e){this._collaboratorsDiv.gCollaborators(e.connected?GCollaborators.Mode.Online:GCollaborators.Mode.Offline),e.connected?this._updateShareSection():gDesigner.getApplicationManager().isSharing()&&this._collaboratorsDiv.css("display","")},GToolbar.prototype._updatePageButton=function(){if(this._pageButton){const e=gDesigner.getActiveDocument(),t=e&&e.getScene();this._pageButton.gPageButton("scene",t),this._pageButton.css("display",t?"":"none")}},GToolbar.prototype._updateShareSection=function(){const e=this._isShareButtonVisible(),t=this._isRealtimeCollaboratorsVisible();if(this._shareButton.css("display",e?"":"none"),this._collaboratorsDiv.css("display",t?"":"none"),e){const e=gDesigner.getApplicationManager().isPrivateSharing(),t=gDesigner.getApplicationManager().isSharing();this._shareButton.gShareButton("update",{isPrivate:e,isSharing:t})}t&&this._collaboratorsDiv.gCollaborators("collaborators",this._getRealtimeCollaborators())},GToolbar.prototype._isShareButtonVisible=function(){return gDesigner.getApplicationManager().isShareEnabled()&&gDesigner.getApplicationManager().hasRole(_config.ShareRoles.Owner)},GToolbar.prototype._isRealtimeCollaboratorsVisible=function(){const e=gDesigner.getApplicationManager();if(!e.isSharing())return!1;const t=gDesigner.getActiveDocument();if(!e.hasPermission(t,_config.SharePermissions.EDIT)&&!e.hasPermission(t,_config.SharePermissions.COMMENT))return!1;const n=this._getRealtimeCollaborators();return!!n&&n.length>0},GToolbar.prototype._getRealtimeCollaborators=function(){const e=gDesigner.getSyncUser();return _core.GUtil.bubbleSort((gDesigner.getApplicationManager().getRealtimeCollaborators()||[]).filter(t=>t.getRole().hasPermission(_config.SharePermissions.COMMENT)&&!(e&&e.getUID()===t.getUID())),(function(e,t){const n=e.getRole(),o=t.getRole();return n.equals(o)||!n.is(_config.ShareRoles.CoAuthor)&&!o.is(_config.ShareRoles.CoAuthor)?_core.GUtil.SortOperators.Equals:_core.GUtil.SortOperators.LessThan}))},GToolbar.prototype._createSnapButton=function(){return this._createLabelButton({icon:"gravit-icon-magnet",active:!1===gDesigner.getSetting("snap_disabled"),label:_core.GLocale.get(new _core.GLocaleKey("GToolbar","text.snap")),menu:this._createSnapMenu(),split:!0,click:function(e){var t=$(e.target).closest(".toolbar-button").find(".action-button");t.toggleClass("g-active",!t.hasClass("g-active")),gDesigner.executeAction(GToggleSnapAction.ID,void 0,"toolbar")}.bind(this),tooltipConfig:GToggleSnapAction.TOOLTIP_CONFIG[_richtooltipconfig.TOOLTIP_AREA.TOOLBAR]}).addClass("snap-button")},GToolbar.prototype._createCommentToggleToolbarBtn=function(){let e=gDesigner.getAction(GToggleSidebarAction.ID+"."+GAnnotationsSidebar.ID),t=e.isChecked(),n=t?"gravit-icon-hide-comment":"gravit-icon-show-comment",o=t?_core.GLocale.get(new _core.GLocaleKey("GToolbar","text.comment-off")):_core.GLocale.get(new _core.GLocaleKey("GToolbar","text.comment-on"));return this._createLabelButton({icon:n,label:_core.GLocale.get(new _core.GLocaleKey("GToolbar","text.comment-toggle")),click:function(){gDesigner.executeAction(e.getId(),void 0,"toolbar",!0);let t="Hide Comments";e.isChecked()&&(t="Show Comments"),gDesigner.stats("toolbar_activate_tool",t),this.updateCommentToggleStatus()}.bind(this),tooltipConfig:_richtooltipconfig.GRichTooltipConfig.from({title:o})})},GToolbar.prototype.updateCommentToggleStatus=function(){if(!this._commentToggleSection)return;let e=gDesigner.getAction(GToggleSidebarAction.ID+"."+GAnnotationsSidebar.ID),t=this._commentToggleSection.find(".toolbar-button"),n=t.find(".action-button .icon"),o="gravit-icon-show-comment",i=_richtooltipconfig.GRichTooltipConfig.from({title:_core.GLocale.get(new _core.GLocaleKey("GToolbar","text.comment-on"))});e.isChecked()&&(o="gravit-icon-hide-comment",i=_richtooltipconfig.GRichTooltipConfig.from({title:_core.GLocale.get(new _core.GLocaleKey("GToolbar","text.comment-off"))})),this._updateIcon(n,o),t.gRichTooltip(i)},GToolbar.prototype._createOpenMenu=function(){const e=new GMenu;e.createAddItem(gDesigner.getAction(GOpenAction.ID)),e.createAddItem(gDesigner.getAction("".concat(GGravitCloudAction.ID,".").concat(GGravitCloudAction.Actions.Open)));const t=gContainer.getRecentDocuments();if(t&&t.length){e.createAddDivider();const n=e.createAddItem("".concat(_core.GLocale.get(new _core.GLocaleKey("GFilesPanel","text.title-recent-files")),":"));n.setEnabled(!1),n.addClass("title"),t.forEach(t=>{e.createAddItem(t.getName(),()=>{gDesigner.openDocument(t)}).setIcon(gContainer.getRecentDocumentIconClass(t))})}return e},GToolbar.prototype._createQuickHistoryUndoRedoMenu=function(){const e=new GMenu(null,"g-quick-history-undo-redo-menu");e.addEventListener(GMenuOpenEvent.EVENT,()=>{gDesigner.stats("toolbar_click_menu","undoopen")});var t=gDesigner.getLicense(),n=!(gDesigner.isEnabledProFeatures()||t.isPro()&&!t.isExpired());n&&e.getHtmlElement().addClass("pro");const o=gDesigner.getAction(GRedoAction.ID);e.createAddItem(o);const i=gDesigner.getActiveDocument(),a=i&&i.getEditor();if(!a)return e;const r=a.getCurrentStateId(),s=gDesigner.getAction(GUndoAction.ID);if(a.hasRedoState()){const t=a.getRedoStates();e.createAddDivider(),t.forEach(t=>{this._buildAndIncludeItemForState(t,o,!0,r,e,a,n)})}return a.hasUndoState()&&(e.createAddDivider(),a.getUndoStates().slice().reverse().forEach(t=>{this._buildAndIncludeItemForState(t,s,!1,r,e,a,n)})),e},GToolbar.prototype._buildAndIncludeItemForState=function(e,t,n,o,i,a,r){const s=o===e.id,l=new GMenuItem(GMenuItem.Type.Item,i);l.setCaption(e.name),l.setIcon(s?"gravit-icon-dot":t.getIcon()),s&&l.addClass("g-active"),t.isEnabled()||l.addClass("g-disabled"),l.addEventListener(GMenuItem.ActivateEvent,()=>this._actionHandler(e,n,a,i,r,t)),i.addItem(l)},GToolbar.prototype._actionHandler=function(e,t,n,o,i,a){if(!a.isEnabled())return;if(i)return void gDesigner.handlePROFeatureInterruption();let r=n.getCurrentStateId();if(r!==e.id){gDesigner.stats("toolbar_click_menu","undoclick");do{t?n.redoState():n.undoState(),r=n.getCurrentStateId()}while(r!==e.id)}},GToolbar.prototype._createExportMenu=function(){const e=new GMenu;e.createAddItem(gDesigner.getAction("".concat(GExportAction.ID)));const t=["cdrapp","des","gvdesign","pdf"];GDocument.FileTypes.filter(e=>e.store&&!t.includes(e.ext)).forEach(t=>e.createAddItem(gDesigner.getAction("".concat(GSaveAsAction.ID,".").concat(t.ext))));const n=new GMenuItem(GMenuItem.Type.Menu,GMenu);return n.setCaption(GCategory.CATEGORY_FILE_EXPORT_PDF.label.split("/").slice(-1).pop()),n.getMenu().createAddItem(gDesigner.getAction("".concat(GSaveAsAction.ID,".pdf"))),n.getMenu().createAddItem(gDesigner.getAction("".concat(GSaveAsAction.ID,".pdf.96"))),n.getMenu().createAddItem(gDesigner.getAction("".concat(GSaveAsAction.ID,".pdf.150"))),n.getMenu().createAddItem(gDesigner.getAction("".concat(GSaveAsAction.ID,".pdf.300"))),n.getMenu().createAddItem(gDesigner.getAction("".concat(GExportAction.ID,".pdf"))),e.addItem(n),e},GToolbar.prototype._textEdit=function(e){return e.css({whiteSpace:"pre",fontFamily:"monospace",fontSize:"14px"}).on("keydown",(function(e){if(9===e.keyCode){let n=this.selectionStart;var t=this.selectionEnd;return this.value=this.value.substring(0,n)+"\t"+this.value.substring(t,this.value.length),this.selectionStart=n+1,this.selectionEnd=n+1,e.preventDefault(),!1}e.keyCode})).on("keyup",(function(e){if(13===e.keyCode){for(var t,n="",o=this.selectionStart,i=this.selectionEnd,a=o-1;a>0;){if("\n"===this.value.charAt(a)){var r=0;for(t=a;--a>=0;)if("\n"===this.value.charAt(a)){var s=this.value.substr(a+1,t).match(/^\t+/);if(s&&s.length){r=s[0].length;break}}for(var l=0;l<r;l++)n+="\t";break}a--}this.value=this.value.substring(0,o)+n+this.value.substring(i,this.value.length),this.selectionStart=o+n.length,this.selectionEnd=o+n.length}}))},GToolbar.prototype._refreshCustomButtons=function(){$(".custom_codes_button").remove();var customCode=JSON.parse(localStorage.getItem("designer.custom")),myself=this;if(customCode&&customCode.length){function customMenu(e){var t=new GMenu;return t.createAddItem("Edit",function(){var e=customCode.find(e=>e.id===this);let t=$("<div/>").append($("<div/>").text("Edit code")).append(myself._textEdit($('<textarea rows="30" cols="100" class="custom_button_code_edit">').text(e.code))).append($("<div/>").append("<label>Name:</label>").append($('<input type="text" class="custom_button_name_edit" value="'+e.name+'">')));t.gDialog({releaseOnClose:!0,className:"context-pane",buttons:[$('<button class="settings-button">Cancel</button>').on("click",()=>{t.gDialog("close")}),$('<button class="settings-button">Save</button>').on("click",()=>{e.name=$(".custom_button_name_edit")[0].value,e.code=$(".custom_button_code_edit")[0].value,localStorage.setItem("designer.custom",JSON.stringify(customCode)),t.gDialog("close"),myself._refreshCustomButtons()})]}),t.gDialog("open",!1),$(".custom_button_code_edit").focus()}.bind(e)),t.createAddItem("Delete",function(){var e=localStorage.getItem("designer.custom"),t=JSON.parse(e);t=t.filter(e=>{if(e.id!==this)return!0}),localStorage.setItem("designer.custom",JSON.stringify(t)),$("."+this).remove()}.bind(e)),t}customCode.forEach(item=>{this._toolsDiv.append(this._createLabelButton({icon:"gravit-icon-favorite",label:item.name,menu:customMenu(item.id),split:!0,click:function(evt){var code=$(evt.target).closest(".toolbar-button").data("code");function evaled(){var core=__webpack_require__(1),editor=__webpack_require__(45),client=__webpack_require__(13);eval("("+code+")")(gDesigner.getActiveDocument().getEditor().getSelection(),gDesigner.getActiveDocument().getScene(),gDesigner.getActiveDocument().getEditor(),core,editor,client)}evaled.call(null)}.bind(this)}).data("code",item.code).addClass(item.id).addClass("custom_codes_button"))})}},GToolbar.prototype._initZoomButton=function(){var e=new GMenu;e.setTooltipType(_richtooltipconfig.TOOLTIP_AREA.TOOLBAR);var t=this;e.createAddItem(gDesigner.getAction(GOriginalViewAction.ID)),e.createAddDivider(),GMagnificationAction.ZOOM_LEVELS.forEach(t=>{e.createAddItem(gDesigner.getAction(GMagnificationAction.ID+"."+t.toString()))}),this._zoomButton=this._createLabelButton({caption:"100%",label:_core.GLocale.get(new _core.GLocaleKey("GToolbar","text.zoom")),menu:e,menudblclick:()=>{var e=gDesigner.getWindows().getActiveWindow().getView();this._zoomButton.find(".left-attached").hide(),this._zoomButton.find(".right-attached").hide(),this._zoomButton.find(".gravit-zoom-manual-input").show().find("> input").val(parseInt(100*e.getZoom(),10)).focus().select(),gDesigner.stats("toolbar_zoom_manual-input")}}).addClass("zoom-button"),$("<span></span>").addClass("gravit-icon-zoom-in icon").insertBefore(this._zoomButton.find(".caption")),this._zoomButton.find(".action-button").gRichTooltip(_richtooltipconfig.GRichTooltipConfig.from({title:_core.GLocale.get(new _core.GLocaleKey("GToolbar","text.zoom-button-tooltip-title"))})).addClass("left-attached right-attached").find(".dropdown-icon").remove(),$("<button></button>").addClass("left-attached attached-button").css("width","15px").text("-").on("click",(function(){gDesigner.executeAction(GZoomOutAction.ID,void 0,"toolbar")})).gRichTooltip(GZoomOutAction.TOOLTIP_CONFIG[_richtooltipconfig.TOOLTIP_AREA.TOOLBAR]).insertBefore(this._zoomButton.find(".action-button")),$("<button></button>").addClass("right-attached attached-button").css("width","15px").text("+").on("click",(function(){gDesigner.executeAction(GZoomInAction.ID,void 0,"toolbar")})).gRichTooltip(GZoomInAction.TOOLTIP_CONFIG[_richtooltipconfig.TOOLTIP_AREA.TOOLBAR]).appendTo(this._zoomButton),$("<div />").addClass("gravit-zoom-manual-input").css("display","none").insertBefore(this._zoomButton.find(".action-button")).html([$("<input />").attr("type","number").attr("min",GMagnificationAction.ZOOM_LEVELS[0]).attr("max",GMagnificationAction.ZOOM_LEVELS[GMagnificationAction.ZOOM_LEVELS.length-1]).on("blur",()=>{$(this).data("keydown")||(t._zoomButton.find(".left-attached").show(),t._zoomButton.find(".right-attached").show(),t._zoomButton.find(".gravit-zoom-manual-input").hide())}).on("keydown",e=>{e.stopPropagation(),$(this).data("keydown",!0)}).on("keyup",e=>{if($(this).data("keydown")){if(13===e.which){var n=gDesigner.getWindows().getActiveWindow().getView();t._zoomButton.find(".left-attached").show(),t._zoomButton.find(".right-attached").show(),t._zoomButton.find(".gravit-zoom-manual-input").hide(),gDesigner.zoomAtViewCenter(n,t._zoomButton.find(".gravit-zoom-manual-input > input").val()/100)}else 27===e.which&&(t._zoomButton.find(".left-attached").show(),t._zoomButton.find(".right-attached").show(),t._zoomButton.find(".gravit-zoom-manual-input").hide());$(this).data("keydown",null)}}).on("keypress",e=>{var t=e.keyCode||e.which;if(8===t||46===t||37===t||39===t)return!0;(t<48||t>57)&&e.preventDefault()}),$("<span />").text("%")])},GToolbar.prototype.relayout=function(){},GToolbar.prototype._activateOrResetTool=function(e,t){var n=gDesigner.getToolManager(),o=n.getTool(e);if(o===n.getActiveTool()){if(t)return;o=n.getTool(_editor.GPointerTool)}var i=gDesigner.getRightSidebars().getActiveSidebar(),a=i&&gDesigner.getRightSidebars().getSidebar(i);(!a||a.isToolAllowed(o)||a.isDeactivatable())&&(e&&gDesigner.stats("toolbar_activate_tool",GToolbar.getToolName(e)),n.activateTool(o,null,!0))},GToolbar.prototype._updateActiveTool=function(e,t){for(var n=null,o=0;o<gravit.tools.length;++o)if(e.constructor===gravit.tools[o].tool){n=gravit.tools[o];break}this._htmlElement.find(".toolbar-button").each(function(e,t){var o=$(t),i=o.data("tool"),a=o.data("tool-group");if("shape"===a&&n&&"shape"===n.group&&(this._initShapeMenu=!0),i){if(a&&n&&n.group===a){i=n.tool;var r=o.data("tool",i).find(".action-button .icon"),s=n.icon;if(!s){var l=gDesigner.getToolManager().getTool(i);l.getIcon&&(s=l.getIcon())}n&&n.richTooltipConfig&&o.data("tool",i).gRichTooltip(n.richTooltipConfig).find(".action-button").gRichTooltip(n.richTooltipConfig),this._updateIcon(r,s)}o.find(".action-button").toggleClass("g-active",!(!n||n.tool!==i))}}.bind(this))},GToolbar.prototype._updateIcon=function(e,t){t&&"<svg"===t.substr(0,4)?(e.empty(),e.attr("class","icon"),e.append($(t).attr({width:"16px",height:"16px"}).css("stroke","transparent").css("vertical-align","middle"))):(e.empty(),e.attr("class","icon "+t))},GToolbar.prototype._toolChangedEvent=function(e){if(e.newTool){var t=gDesigner.getRightSidebars().getActiveSidebar();t&&(gDesigner.getRightSidebars().getSidebar(t).isToolAllowed(e.newTool)||gDesigner.getRightSidebars().setActiveSidebar(GInspectorSidebar.ID)),this._updateActiveTool(e.newTool,e.previousTool)}this._clearViewMenuActiveItem()},GToolbar.prototype._clearViewMenuActiveItem=function(){const e=this._viewMenu&&this._viewMenu.getActiveItem();e&&e.changeActiveState(!1)},GToolbar.prototype._updateContextTools=function(){this._htmlElement.find(".toolbar-button").each((function(e,t){var n=$(t),o=n.data("tool");if(o){var i=gDesigner.getToolManager().getTool(o),a=n.find(".action-button");$(a).hasClass("g-disabled")===gDesigner.getToolManager().isContextActivatable(i)&&(gDesigner.getToolManager().isContextActivatable(i)?$(a).removeClass("g-disabled"):$(a).addClass("g-disabled"))}}))},GToolbar.prototype._updateActions=function(){this._htmlElement.find(".toolbar-button[data-action]").each((function(e,t){var n=$(t),o=n.data("action");o&&n.gPro({pro:!!o.isPro(),feature:o.getId()});const i=gDesigner.getApplicationManager();if(i&&!i.isDocumentTabManagementEnabled()){const e=gDesigner.getActiveDocument();if(e&&o instanceof GSaveAction){const t=e.getStatus()===GDocumentStatus.Saving,o=e.isSynchronizing()||t;n.find(".processing").toggleClass("g-active",o)}}n.find("button").toggleClass("g-disabled",!o||!o.isAvailable()||!o.isEnabled())}))},GToolbar.prototype._selectionChangedEvent=function(e){this._updateActions(),this._updateContextTools()},GToolbar.prototype._settingChangedEvent=function(e){"snap_disabled"===e.key?this._htmlElement.find(".snap-button > .action-button").toggleClass("g-active",!1===e.newValue):"touch"===e.key&&(gDesigner.isTouchEnabled()?this._updateTouchUI():this._updateDesktopUI())},GToolbar.prototype._updateDesktopUI=function(){const e=this._htmlElement.find(".view-section > .zoom-button");e.is(this._zoomButton)||(this._zoomButton=null,this._initZoomButton(),e.replaceWith(this._zoomButton),this._updateZoomFromWindow(!0)),this._pageButton&&(this._pageButton.gPageButton("reinit"),this._pageButton.hasClass("dropdown")&&this._pageButton.removeClass("dropdown"))},GToolbar.prototype._updateTouchUI=function(){},GToolbar.prototype._documentEvent=function(e){var t=e.document;switch(e.type){case GDocumentEvent.Type.Activated:t&&t.getEditor()&&t.getEditor().addEventListener(_editor.GEditor.SelectionChangedEvent,this._selectionChangedEvent,this),this._updatePageButton(),this._updateActions(),this._updateContextTools();break;case GDocumentEvent.Type.Deactivated:{t&&t.getEditor()&&t.getEditor().removeEventListener(_editor.GEditor.SelectionChangedEvent,this._selectionChangedEvent,this),this._updatePageButton(),this._updateActions(),this._updateContextTools();const e=gDesigner.getToolManager();if(e){const t=e.getActiveTool();t.supportsElementClick()&&t.clearClickedElement()}break}case GDocumentEvent.Type.Modified:this._updateActions(),this._updateContextTools(),this._updateActiveWindow();break;case GDocumentEvent.Type.StorageItemUpdated:case GDocumentEvent.Type.SynchronismUpdated:this._updateActiveWindow(),this._updateActions()}},GToolbar.prototype._windowEvent=function(e){var t=e.window.getView();switch(e.type){case GWindows.WindowEvent.Type.Activated:t&&t.addEventListener(_client.GSceneWidget.TransformEvent,this._updateZoomFromWindow,this),this._updateZoomFromWindow(),this._updateContextTools();break;case GWindows.WindowEvent.Type.Deactivated:t&&t.removeEventListener(_client.GSceneWidget.TransformEvent,this._updateZoomFromWindow,this),this._updateZoomFromWindow(),this._updateContextTools()}this._updateActiveWindow()},GToolbar.prototype._updateActiveWindow=function(){},GToolbar.prototype._updateZoomFromWindow=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=gDesigner.getWindows().getActiveWindow();if(t&&t.getView()){var n=_core.GMath.round(100*t.getView().getZoom(),!1,0);(this._currentZoomLevel!==n||e)&&(this._htmlElement.find(".zoom-button > .action-button .caption").text(n.toString()+"%"),this._currentZoomLevel=n)}},GToolbar.prototype._createToolItems=function(e,t){t||(t=new GMenu),t.setTooltipType(_richtooltipconfig.TOOLTIP_AREA.TOOLBAR);var n=null;return gravit.tools.forEach((o,i)=>{if(o.group===e)if(n!==o.category&&(i>0&&t.createAddDivider(),n=o.category),"simpleshape"===n)this.createSimpleShapesMenu(t);else{var a=new GMenuItem;a.setCaption(o.title),a.setIcon(o.icon),a.setShortcutHint(o.key?[o.key]:null),a.setPro(o.pro,o.feature),a.addEventListener(GMenuItem.ActivateEvent,()=>{o&&o.title&&gDesigner.stats("toolbar_activate_tool",GToolbar.getToolName(o.tool)),this._activateOrResetTool(o.tool,!0)}),a.addEventListener(GMenuItem.UpdateEvent,()=>{gDesigner.canActivateTool(o.tool,!0)&&o.key?a.setShortcutHint([o.key]):a.setShortcutHint(null)}),o.richTooltipConfig&&a.setTooltipConfig(_richtooltipconfig.GRichTooltipConfig.from(Object.assign({},o.richTooltipConfig.getConfig(),{side:!0}))),t.addItem(a)}}),t},GToolbar.prototype._createLabelButton=function(e){var t=e.label,n=e.className,o=e.icon,i=e.click,a=e.menudblclick||null;let r=!1,s=null;const l=this;e.action&&(r=e.action.isPro(),s=e.action.getTooltipConfig(_richtooltipconfig.TOOLTIP_AREA.TOOLBAR),t||(t=_core.GLocale.get(e.action.getTitle())),o||(o=e.action.getIcon()||e.action.getGroupIcon()),i||(i=function(){gDesigner.executeAction(e.action.getId(),[void 0,function(e){e&&e.documentStatus===GDocumentStatus.SaveCancelled&&l._updateActions()}],"toolbar")})),e.tooltipConfig&&(s=e.tooltipConfig);var c=$("<div></div>").addClass("toolbar-button").gPro({pro:r});n&&c.addClass(n),e.action&&c.attr("data-action",e.action.getId()).data("action",e.action);var d=$("<button></button>").addClass("action-button").toggleClass("g-active",!0===e.active).attr("data-title",t).appendTo(c).on("mousedown",(function(e){e.preventDefault()}));if(s&&d.gRichTooltip(s),o?(this._updateIcon($("<span></span>").appendTo(d),o),d.addClass("icon")):e.caption&&d.append($("<span></span>").addClass("caption").text(e.caption)),i&&d.on("click",i),e.menu||e.menuOpen){var u=null;if(e.split?(c.addClass("dropdown"),u=$("<button></button>").addClass("dropdown-button").append($("<span></span>").addClass("gravit-icon-down")).appendTo(c).on("mouseover",(function(e){_config.IS_COREL||e.stopPropagation()}))):u=d.addClass("menu").append($("<span></span>").addClass("gravit-icon-down dropdown-icon")),e.menu?u.gMenuButton({menu:e.menu,dblclick:a,getActiveItem:e.getActiveItem||null}):e.menuOpen&&u.on("click",e.menuOpen),"gravit-icon-undo"===o){var p=gDesigner.getLicense(),g=gDesigner.isEnabledProFeatures()||p.isPro()&&!p.isExpired();_config.IS_COREL?u.attr("data-title",_core.GLocale.get(new _core.GLocaleKey("GToolbar","text.undoList-button-tooltip-title"))):u.gRichTooltip(_richtooltipconfig.GRichTooltipConfig.from({title:_core.GLocale.get(new _core.GLocaleKey("GToolbar","text.undoList-button-tooltip-title")),description:_core.GLocale.get(new _core.GLocaleKey("GToolbar","text.undoList-button-tooltip-description")),learnMore:"https://documentation.corelvector.com/basics/tools-toolbar/",isPro:!g})),g||u.addClass("pro-without-icon")}}return $("<span/>").addClass("processing").appendTo(c),c},GToolbar.prototype.createSimpleShapesMenu=function(e){var t=function(e){var t=null,n=new _core.GParameterizedVertexProcessor(e.annotations?e.annotations.name:null,e.annotations?e.annotations.annotList:null,e.parameters,e.vertices),o=null;if(e.annotations&&e.annotations.annotList&&e.annotations.annotList.length)for(var i=e.annotations.annotList,a=0;a<i.length;++a){var r=i[a];o?o.push(new _core.GPoint(r.x0,r.y0)):o=[new _core.GPoint(r.x0,r.y0)]}var s=null;if(n){s=new _core.GSimpleShape(n,o,14,14,e.name);var l=(s=new _core.GVertexTransformer(s,new _core.GTransform(1,0,0,1,1,1))).toSVGPath();l&&(t='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="isolation:isolate" width="16" height="16"><path d="'+l+'" style="fill:none;fill-rule:evenodd;stroke:currentColor;""stroke-width:2;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:3;opacity:1;"/></svg>')}t||(t="gravit-icon-rectangle");var c=$("<span></span>");return this._updateIcon(c,t),$("<button></button>").addClass("button").attr("data-sshape",e.name).on("mouseup",function(n){n.preventDefault(),gDesigner.getToolManager().activateTool(_editor.GSimpleShapeTool,t,!0),gDesigner.getToolManager().getActiveTool().init(e)}.bind(this)).addClass("icon").append(c)}.bind(this),n={};for(let e=0;e<simpleShapes.length;++e){var o=simpleShapes[e];n[o.shapeGroup]||(n[o.shapeGroup]={});var i=n[o.shapeGroup];i[o.subGroup]?i[o.subGroup].push(o):i[o.subGroup]=[o]}for(var a in n){var r=e.findItem(a);r||((r=new GMenuItem(GMenuItem.Type.Menu,GMenu)).setCaption(a),e.addItem(r));var s=r.getMenu(),l=n[a];for(var c in l){var d=new GMenuItem;d.setNoHover(!0),s.addItem(d);var u=l[c];for(let e=0;e<u.length;++e){var p=t(u[e]);d._htmlElement.append(p)}}}},GToolbar.prototype._createMergeMenu=function(){const e=new GMenu;e.setTooltipType(_richtooltipconfig.TOOLTIP_AREA.TOOLBAR);return gDesigner.getAction(GMergeMainAction.ID).getSubActions().forEach(t=>{e.createAddItem(t)}),e},GToolbar.prototype._createSnapMenu=function(){var e=new GMenu;return e.setTooltipType(_richtooltipconfig.TOOLTIP_AREA.TOOLBAR),e.createAddItem(gDesigner.getAction(GToggleSnapAction.ID)),_config.HAS_SNAPZONES&&e.createAddItem(gDesigner.getAction(GToggleSnapZonesAction.ID)),e.createAddDivider(),e.createAddItem(gDesigner.getAction(GToggleGuideAction.ID+"."+_editor.GGridGuide.ID)),e.createAddItem(gDesigner.getAction(GToggleGuideAction.ID+"."+_editor.GGuideLinesGuide.ID)),e.createAddItem(gDesigner.getAction(GToggleGuideAction.ID+"."+_editor.GFullPixelsGuide.ID)),e.createAddItem(gDesigner.getAction(GToggleGuideAction.ID+"."+_editor.GPointsGuide.ID)),e.createAddItem(gDesigner.getAction(GToggleGuideAction.ID+"."+_editor.GBBoxGuide.ID)),e.createAddItem(gDesigner.getAction(GToggleGuideAction.ID+"."+_editor.GPageGuide.ID)),e.createAddDivider(),e.createAddItem(gDesigner.getAction(GShowGridAction.ID)),e.createAddItem(gDesigner.getAction(GShowGuideLinesAction.ID)),e.createAddItem(gDesigner.getAction(GShowSymbolLabelsAction.ID)),e},GToolbar.prototype._createImageMenu=function(){var e=new GMenu;return e.setTooltipType(_richtooltipconfig.TOOLTIP_AREA.TOOLBAR),e.createAddItem(gDesigner.getAction(GPlaceImportAction.ID)),e.createAddItem(gDesigner.getAction(GLinkImageAction.ID)),e},GToolbar.prototype.getHeight=function(){return this._htmlElement[0].clientHeight},GToolbar.prototype.setEnabled=function(e){$(".toolbar-button > button")[e?"removeClass":"addClass"]("g-disabled").prop("disabled",!e)},__webpack_require__(1518)(GToolbar),module.exports=GToolbar},function(e,t,n){"use strict";e.exports=[{name:"Rectangle",shapeGroup:"Shapes",subGroup:"Rectangles",vertices:[1,1,-1,1,1,2,1,1,1,1,2,1,1,1,-1,2,1,1,1,-1,2,1,-1,1,-1,2,1,-1,1,-1,5],width:100,height:100},{name:"Rounded Rectangle",shapeGroup:"Shapes",subGroup:"Rectangles",annotations:{name:"annot",annotList:[{x0:-.67,y0:-1,X:"x",Y:-1,minX:-.99,maxX:0}]},parameters:[{name:"rlen",expression:"1 + annot[0].X"},{name:"hlen",expression:"sqrt((1 + annot[0].X) * (1 + annot[0].X) * 2) * 0.310026286"}],vertices:[1,2,"-1 + rlen",1,-1,4,1,-1,2,"-1 + rlen",4,2,"-1 + rlen - hlen",1,-1,4,1,-1,2,"-1 + rlen - hlen",2,1,-1,2,"1 - rlen",4,2,"-1 + rlen",1,1,4,1,-1,2,"1 - rlen + hlen",4,2,"-1 + rlen - hlen",1,1,2,2,"1 - rlen",1,1,4,1,1,2,"1 - rlen",4,2,"1 - rlen + hlen",1,1,4,1,1,2,"1 - rlen + hlen",2,1,1,2,"-1 + rlen",4,2,"1 - rlen",1,-1,4,1,1,2,"-1 + rlen - hlen",4,2,"1 - rlen + hlen",1,-1,5],width:100,height:100},{name:"Snip Single Corner Rectangle",shapeGroup:"Shapes",subGroup:"Rectangles",annotations:{name:"annot",annotList:[{x0:.67,y0:-1,X:"x",Y:-1,minX:0,maxX:.99}]},parameters:[{name:"len",expression:"1 - annot[0].X"}],vertices:[1,1,-1,1,1,2,1,1,1,1,2,1,1,2,"-1 + len",2,2,"1 - len",1,-1,2,1,-1,1,-1,5],width:100,height:100},{name:"Snip Same Side Corner Rectangle",shapeGroup:"Shapes",subGroup:"Rectangles",annotations:{name:"annot",annotList:[{x0:-1,y0:1,X:"x",Y:1,minX:-1,maxX:0},{x0:.67,y0:-1,X:"x",Y:-1,minX:0,maxX:1}]},parameters:[{name:"tlen",expression:"1 - annot[1].X"},{name:"blen",expression:"1 + annot[0].X"}],vertices:[1,1,-1,2,"1 - blen",2,2,"-1 + blen",1,1,2,2,"1 - blen",1,1,2,1,1,2,"1 - blen",2,1,1,2,"-1 + tlen",2,2,"1 - tlen",1,-1,2,2,"-1 + tlen",1,-1,2,1,-1,2,"-1 + tlen",5],width:100,height:100},{name:"Snip Diagonal Corner Rectangle",shapeGroup:"Shapes",subGroup:"Rectangles",annotations:{name:"annot",annotList:[{x0:-1,y0:-1,X:"x",Y:-1,minX:-1,maxX:0},{x0:.67,y0:-1,X:"x",Y:-1,minX:0,maxX:1}]},parameters:[{name:"trbllen",expression:"1 - annot[1].X"},{name:"tlbrlen",expression:"1 + annot[0].X"}],vertices:[1,1,-1,2,"1 - trbllen",2,2,"-1 + trbllen",1,1,2,2,"1 - tlbrlen",1,1,2,1,1,2,"1 - tlbrlen",2,1,1,2,"-1 + trbllen",2,2,"1 - trbllen",1,-1,2,2,"-1 + tlbrlen",1,-1,2,1,-1,2,"-1 + tlbrlen",5],width:100,height:100},{name:"Snip and Round Single Corner Rectangle",shapeGroup:"Shapes",subGroup:"Rectangles",annotations:{name:"annot",annotList:[{x0:-.67,y0:-1,X:"x",Y:-1,minX:-.99,maxX:0},{x0:.67,y0:-1,X:"x",Y:-1,minX:0,maxX:1}]},parameters:[{name:"trlen",expression:"1 - annot[1].X"},{name:"tlrlen",expression:"1 + annot[0].X"},{name:"tlhlen",expression:"sqrt((1 + annot[0].X) * (1 + annot[0].X) * 2) * 0.310026286"}],vertices:[1,1,-1,1,1,2,1,1,1,1,2,1,1,2,"-1 + trlen",2,2,"1 - trlen",1,-1,2,2,"-1 + tlrlen",1,-1,4,1,-1,2,"-1 + tlrlen",4,2,"-1 + tlrlen - tlhlen",1,-1,4,1,-1,2,"-1 + tlrlen - tlhlen",5],width:100,height:100},{name:"Round Single Corner Rectangle",shapeGroup:"Shapes",subGroup:"Rectangles",annotations:{name:"annot",annotList:[{x0:.67,y0:-1,X:"x",Y:-1,minX:0,maxX:.99}]},parameters:[{name:"rlen",expression:"1 - annot[0].X"},{name:"hlen",expression:"sqrt((1 - annot[0].X) * (1 - annot[0].X) * 2) * 0.310026286"}],vertices:[1,1,-1,1,1,2,1,1,1,1,2,1,1,2,"-1 + rlen",4,2,"1 - rlen",1,-1,4,1,1,2,"-1 + rlen - hlen",4,2,"1 - rlen + hlen",1,-1,4,1,-1,1,-1,5],width:100,height:100},{name:"Round Same Side Corner Rectangle",shapeGroup:"Shapes",subGroup:"Rectangles",annotations:{name:"annot",annotList:[{x0:-.99,y0:1,X:"x",Y:1,minX:-.99,maxX:0},{x0:.67,y0:-1,X:"x",Y:-1,minX:0,maxX:.99}]},parameters:[{name:"brlen",expression:"1 + annot[0].X"},{name:"bhlen",expression:"sqrt((1 + annot[0].X) * (1 + annot[0].X) * 2) * 0.310026286"},{name:"trlen",expression:"1 - annot[1].X"},{name:"thlen",expression:"sqrt((1 - annot[1].X) * (1 - annot[1].X) * 2) * 0.310026286"}],vertices:[1,2,"-1 + trlen",1,-1,4,1,-1,2,"-1 + trlen",4,2,"-1 + trlen - thlen",1,-1,4,1,-1,2,"-1 + trlen - thlen",2,1,-1,2,"1 - brlen",4,2,"-1 + brlen",1,1,4,1,-1,2,"1 - brlen + bhlen",4,2,"-1 + brlen - bhlen",1,1,2,2,"1 - brlen",1,1,4,1,1,2,"1 - brlen",4,2,"1 - brlen + bhlen",1,1,4,1,1,2,"1 - brlen + bhlen",2,1,1,2,"-1 + trlen",4,2,"1 - trlen",1,-1,4,1,1,2,"-1 + trlen - thlen",4,2,"1 - trlen + thlen",1,-1,5],width:100,height:100},{name:"Round Diagonal Corner Rectangle",shapeGroup:"Shapes",subGroup:"Rectangles",annotations:{name:"annot",annotList:[{x0:-.67,y0:-1,X:"x",Y:-1,minX:-.99,maxX:0},{x0:.99,y0:-1,X:"x",Y:-1,minX:0,maxX:.99}]},parameters:[{name:"trblrlen",expression:"1 - annot[1].X"},{name:"trblhlen",expression:"sqrt((1 - annot[1].X) * (1 - annot[1].X) * 2) * 0.310026286"},{name:"tlbrrlen",expression:"1 + annot[0].X"},{name:"tlbrhlen",expression:"sqrt((1 + annot[0].X) * (1 + annot[0].X) * 2) * 0.310026286"}],vertices:[1,2,"-1 + tlbrrlen",1,-1,4,1,-1,2,"-1 + tlbrrlen",4,2,"-1 + tlbrrlen - tlbrhlen",1,-1,4,1,-1,2,"-1 + tlbrrlen - tlbrhlen",2,1,-1,2,"1 - trblrlen",4,2,"-1 + trblrlen",1,1,4,1,-1,2,"1 - trblrlen + trblhlen",4,2,"-1 + trblrlen - trblhlen",1,1,2,2,"1 - tlbrrlen",1,1,4,1,1,2,"1 - tlbrrlen",4,2,"1 - tlbrrlen + tlbrhlen",1,1,4,1,1,2,"1 - tlbrrlen + tlbrhlen",2,1,1,2,"-1 + trblrlen",4,2,"1 - trblrlen",1,-1,4,1,1,2,"-1 + trblrlen - trblhlen",4,2,"1 - trblrlen + trblhlen",1,-1,5],width:100,height:100},{name:"Oval",shapeGroup:"Shapes",subGroup:"Various",vertices:[1,1,0,1,-1,4,1,-1,1,0,4,1,-.55191502,1,-1,4,1,-1,1,-.55191502,4,1,0,1,1,4,1,-1,1,.55191502,4,1,-.55191502,1,1,4,1,1,1,0,4,1,.55191502,1,1,4,1,1,1,.55191502,4,1,0,1,-1,4,1,1,1,-.55191502,4,1,.55191502,1,-1,5],width:100,height:100},{name:"Triangle",shapeGroup:"Shapes",subGroup:"Various",annotations:{name:"annot",annotList:[{x0:0,y0:-1,X:"x",Y:-1,minX:-1,maxX:1}]},parameters:[{name:"topx",expression:"annot[0].X"}],vertices:[1,1,-1,1,1,2,1,1,1,1,2,2,"topx",1,-1,5],width:117,height:100},{name:"Right Triangle",shapeGroup:"Shapes",subGroup:"Various",vertices:[1,1,-1,1,1,2,1,1,1,1,2,1,-1,1,-1,5],width:100,height:100},{name:"Parallelogram",shapeGroup:"Shapes",subGroup:"Various",annotations:{name:"annot",annotList:[{x0:-.67,y0:-1,X:"x",Y:-1,minX:-1,maxX:1}]},parameters:[{name:"sidelen",expression:"1 - annot[0].X"}],vertices:[1,1,-1,1,1,2,2,"-1 + sidelen",1,1,2,1,1,1,-1,2,2,"1 - sidelen",1,-1,5],width:133,height:100},{name:"Trapezoid",shapeGroup:"Shapes",subGroup:"Various",annotations:{name:"annot",annotList:[{x0:-.67,y0:-1,X:"x",Y:-1,minX:-1,maxX:0}]},parameters:[{name:"len",expression:"1 + annot[0].X"}],vertices:[1,1,-1,1,1,2,1,1,1,1,2,2,"1 - len",1,-1,2,2,"-1 + len",1,-1,5],width:133,height:100},{name:"Diamond",shapeGroup:"Shapes",subGroup:"Various",vertices:[1,1,0,1,-1,2,1,-1,1,0,2,1,0,1,1,2,1,1,1,0,5],width:133,height:133},{name:"Regular Pentagon",shapeGroup:"Shapes",subGroup:"Various",vertices:[1,1,0,1,-1,2,1,-.95105652,1,-.30901699,2,1,-.58778525,1,.80901699,2,1,.58778525,1,.80901699,2,1,.95105652,1,-.30901699,5],width:105.14622309,height:100},{name:"Hexagon",shapeGroup:"Shapes",subGroup:"Various",annotations:{name:"annot",annotList:[{x0:-.5,y0:-.8660254,X:"x",Y:-.8660254,minX:-1,maxX:0}]},parameters:[{name:"len",expression:"1 + annot[0].X"}],vertices:[1,1,1,1,0,2,2,"1 - len",1,-.8660254,2,2,"-1 + len",1,-.8660254,2,1,-1,1,0,2,2,"-1 + len",1,.8660254,2,2,"1 - len",1,.8660254,5],width:115.47005434,height:100},{name:"Heptagon",shapeGroup:"Shapes",subGroup:"Various",vertices:[1,1,0,1,-1,2,1,-.78183148,1,-.6234898,2,1,-.97492791,1,.22252093,2,1,-.43388374,1,.90096887,2,1,.43388374,1,.90096887,2,1,.97492791,1,.22252093,2,1,.78183148,1,-.6234898,5],width:102.57168598,height:100},{name:"Octagon",shapeGroup:"Shapes",subGroup:"Various",annotations:{name:"annot",annotList:[{x0:-.38268343,y0:-.92387953,X:"x",Y:-.92387953,minX:-.92387953,maxX:0}]},parameters:[{name:"len",expression:"0.92387953 + annot[0].X"}],vertices:[1,1,.92387953,2,"-0.92387953 + len",2,2,"0.92387953 - len",1,-.92387953,2,2,"-0.92387953 + len",1,-.92387953,2,1,-.92387953,2,"-0.92387953 + len",2,1,-.92387953,2,"0.92387953 - len",2,2,"-0.92387953 + len",1,.92387953,2,2,"0.92387953 - len",1,.92387953,2,1,.92387953,2,"0.92387953 - len",5],width:100,height:100},{name:"Decagon",shapeGroup:"Shapes",subGroup:"Various",vertices:[1,1,1,1,0,2,1,.80901699,1,-.58778525,2,1,.30901699,1,-.95105652,2,1,-.30901699,1,-.95105652,2,1,-.80901699,1,-.58778525,2,1,-1,1,0,2,1,-.80901699,1,.58778525,2,1,-.30901699,1,.95105652,2,1,.30901699,1,.95105652,2,1,.80901699,1,.58778525,5],width:100,height:95.105652},{name:"Dodecagon",shapeGroup:"Shapes",subGroup:"Various",vertices:[1,1,.9659258262890683,1,-.25881904510252074,2,1,.7071067811865476,1,-.7071067811865475,2,1,.25881904510252096,1,-.9659258262890682,2,1,-.25881904510252063,1,-.9659258262890683,2,1,-.7071067811865475,1,-.7071067811865476,2,1,-.9659258262890682,1,-.258819045102521,2,1,-.9659258262890683,1,.2588190451025208,2,1,-.7071067811865477,1,.7071067811865475,2,1,-.2588190451025215,1,.9659258262890681,2,1,.2588190451025203,1,.9659258262890684,2,1,.7071067811865468,1,.7071067811865483,2,1,.9659258262890681,1,.25881904510252157,5],width:100,height:100},{name:"Frame",shapeGroup:"Shapes",subGroup:"Various",annotations:{name:"annot",annotList:[{x0:-.75,y0:-1,X:"x",Y:-1,minX:-1,maxX:0}]},parameters:[{name:"width",expression:"1 + annot[0].X"}],vertices:[1,1,-1,1,1,2,1,1,1,1,2,1,1,1,-1,2,1,-1,1,-1,5,1,2,"-1 + width",2,"1 - width",2,2,"1 - width",2,"1 - width",2,2,"1 - width",2,"-1 + width",2,2,"-1 + width",2,"-1 + width",5],width:100,height:100},{name:"Half Frame",shapeGroup:"Shapes",subGroup:"Various",annotations:{name:"annot",annotList:[{x0:-.33,y0:-1,X:"x",Y:-1,minX:-1,maxX:1},{x0:-1,y0:-.33,X:-1,Y:"y",minY:-1,maxY:1}]},parameters:[{name:"xwidth",expression:"1 + annot[0].X"},{name:"ywidth",expression:"min(1 + annot[1].Y, 1 - annot[0].X)"}],vertices:[1,1,1,1,-1,2,1,-1,1,-1,2,1,-1,1,1,2,2,"-1 + xwidth",2,"1 - xwidth",2,2,"-1 + xwidth",2,"-1 + ywidth",2,2,"1 - ywidth",2,"-1 + ywidth",5],width:100,height:100},{name:"Right Arrow",shapeGroup:"Arrows",subGroup:"Classical",annotations:{name:"annot",annotList:[{maxX:.99,Y:-.75,x0:0,y0:-.75,X:"x",minX:-1.99},{x0:-2,y0:-.25,X:-2,Y:"y",minY:-.74,maxY:-.01}]},parameters:[{name:"arrowheadLen",expression:"1 - annot[0].X"},{name:"shaftWidth",expression:"-annot[1].Y * 2"}],vertices:[1,1,-2,2,"-shaftWidth / 2",2,1,-2,2,"shaftWidth / 2",2,2,"1 - arrowheadLen",2,"shaftWidth / 2",2,2,"1 - arrowheadLen",1,.75,2,1,1,1,0,2,2,"1 - arrowheadLen",1,-.75,2,2,"1 - arrowheadLen",2,"-shaftWidth / 2",5],width:100,height:50},{name:"Left-Right Arrow",shapeGroup:"Arrows",subGroup:"Classical",annotations:{name:"annot",annotList:[{x0:0,y0:-.75,X:"x",Y:-.75,minX:-.99,maxX:.99},{x0:-3,y0:-.25,X:-3,Y:"y",minY:-.74,maxY:-.01}]},parameters:[{name:"arrowheadLen",expression:"1 - annot[0].X"},{name:"shaftWidth",expression:"-annot[1].Y * 2"}],vertices:[1,2,"-3 + arrowheadLen",2,"-shaftWidth / 2",2,2,"-3 + arrowheadLen",1,-.75,2,1,-3,1,0,2,2,"-3 + arrowheadLen",1,.75,2,2,"-3 + arrowheadLen",2,"shaftWidth / 2",2,2,"1 - arrowheadLen",2,"shaftWidth / 2",2,2,"1 - arrowheadLen",1,.75,2,1,1,1,0,2,2,"1 - arrowheadLen",1,-.75,2,2,"1 - arrowheadLen",2,"-shaftWidth / 2",5],width:133,height:50},{name:"Plus",shapeGroup:"Equation",subGroup:"Classical",annotations:{name:"annot",annotList:[{x0:-.36,y0:-.12,X:-.36,Y:"y",minY:-.36,maxY:0}]},parameters:[{name:"len",expression:"0.36 + annot[0].Y"}],vertices:[1,1,-.36,2,"-0.36 + len",2,1,-.36,2,"0.36 - len",2,2,"-0.36 + len",2,"0.36 - len",2,2,"-0.36 + len",1,.36,2,2,"0.36 - len",1,.36,2,2,"0.36 - len",2,"0.36 - len",2,1,.36,2,"0.36 - len",2,1,.36,2,"-0.36 + len",2,2,"0.36 - len",2,"-0.36 + len",2,2,"0.36 - len",1,-.36,2,2,"-0.36 + len",1,-.36,2,2,"-0.36 + len",2,"-0.36 + len",5],width:72,height:72},{name:"Minus",shapeGroup:"Equation",subGroup:"Classical",vertices:[1,1,-.36,1,-.12,2,1,-.36,1,.12,2,1,.36,1,.12,2,1,.36,1,-.12,5],width:72,height:24},{name:"Multiply",shapeGroup:"Equation",subGroup:"Classical",annotations:{name:"annot",annotList:[{x0:-.33941126,y0:-.16970563,X:-.33941126,Y:"y",minY:-.33941126,maxY:0}]},parameters:[{name:"projHeight",expression:"-annot[0].Y"}],vertices:[1,1,-.33941126,2,"-projHeight",2,2,"-0.33941126 + projHeight",1,0,2,1,-.33941126,2,"projHeight",2,2,"-projHeight",1,.33941126,2,1,0,2,"0.33941126 - projHeight",2,2,"projHeight",1,.33941126,2,1,.33941126,2,"projHeight",2,2,"0.33941126 - projHeight",1,0,2,1,.33941126,2,"-projHeight",2,2,"projHeight",1,-.33941126,2,1,0,2,"-0.33941126 + projHeight",2,2,"-projHeight",1,-.33941126,5],width:67.882252,height:67.882252},{name:"Equal",shapeGroup:"Equation",subGroup:"Classical",annotations:{name:"annot",annotList:[{x0:-.36,y0:-.06,X:-.36,Y:"y",minY:-.3,maxY:0}]},parameters:[{name:"len",expression:"0.3 + annot[0].Y"}],vertices:[1,1,-.36,2,"-0.3 + len",2,1,.36,2,"-0.3 + len",2,1,.36,1,-.3,2,1,-.36,1,-.3,5,1,1,-.36,2,"0.3 - len",2,1,.36,2,"0.3 - len",2,1,.36,1,.3,2,1,-.36,1,.3,5],width:72,height:60}]},function(e,t,n){"use strict";n(158);const o=n(434),i=n(549),a=n(432),r=n(1148),s=n(1144),l=n(792),c=n(433),d=n(430),u=n(1269),p=n(223),g=n(325),h=n(240),f=n(77),{GSystem:m,GMath:y}=n(1),{FILE_FORMATS:v}=n(9);e.exports=function(e){e.prototype._windowButton=null,e.prototype._nativeButton=null,e.prototype._touchSection=null,e.prototype._updateTouchUI=function(){this._touchSection||(this._touchSection=this._createTouchSection().prependTo(this._htmlElement)),this._windowButton||(this._windowButton=this._createWindowButton().hide().insertBefore(this._exportButton)),this._nativeButton||gContainer.getRuntime()===f.Runtime.Electron&&m.operatingSystem!==m.OperatingSystem.OSX_IOS&&(this._nativeButton=this._createNativeButton().appendTo(this._htmlElement.find(".export-section")));!gDesigner.getApplicationManager().isEditingEnabled()?this._updateTouchSimpleUI():this._updateTouchFullUI(),this._updateActiveWindow(),this._updateZoomFromWindow(!0),this._updateActions(),this._updateContextTools(),this._updateViewBasedOnPermissions()},e.prototype._updateViewBasedOnPermissions=function(){this._windowButton&&(gDesigner.getApplicationManager().isDocumentTabManagementEnabled()?this._windowButton.show():this._windowButton.hide())},e.prototype._updateTouchFullUI=function(){this._htmlElement.find(".menu-section > .zoom-button").length||(this._touchZoomButton&&(this._touchZoomButton=null),this._initTouchZoomButton(),this._touchZoomButton.insertBefore(".menu-section > .snap-button"))},e.prototype._updateTouchSimpleUI=function(){this._updateTouchZoomButtonSimpleUI(),this._updateZoomFromWindow(!0),this._updateTouchPageButton()},e.prototype._updateTouchZoomButtonSimpleUI=function(){const e=this._htmlElement.find(".view-section > .zoom-button");e.is(this._touchZoomButton)||(this._touchZoomButton=null,this._initTouchZoomButton(),e.replaceWith(this._touchZoomButton))},e.prototype._updateTouchPageButton=function(){this._pageButton&&(this._pageButton.gPageButton("reinit"),this._pageButton.addClass("dropdown"))},e.prototype._initTouchZoomButton=function(){const e=$("<button />").addClass("dropdown-button").append($("<span></span>").addClass("gravit-icon-down")),t=new p(void 0,"g-zoom-menu");this._touchZoomButton=$("<div/>").addClass("zoom-button").addClass("toolbar-button").addClass("action-button").addClass("g-menu-button").addClass("dropdown").append($("<div />").addClass("action-button").append($("<span />").addClass("caption").text("100%"))).append(e).gMenuButton({menu:()=>(t.clearItems(),[gDesigner.getAction(o.ID),gDesigner.getAction(i.ID),gDesigner.getAction("".concat(s.ID,".50")),gDesigner.getAction("".concat(s.ID,".100")),gDesigner.getAction("".concat(s.ID,".200")),gDesigner.getAction("".concat(s.ID,".400"))].reduce((e,t)=>(e.createAddItem(t),e),t)),getActiveItem:()=>{var e=gDesigner.getWindows().getActiveWindow(),n=100*(e&&e.getView()).getZoom(),o=n&&y.round(n,!1,0),i=o&&gDesigner.getAction("".concat(s.ID,".").concat(o)),a=i&&i.getTitle();return a&&t.findItem(a)},reference:e})},e.prototype._getTouchMenubarIcon=function(){return gContainer.getRuntime()===f.Runtime.IPad?"gravit-icon-touch-menubar-ipad":"gravit-icon-touch-menubar"},e.prototype._createTouchSection=function(){return this._touchZoomButton||this._initTouchZoomButton(),$("<div></div>").addClass("section menu-section g-touch-only").append(this._createLabelButton({icon:this._getTouchMenubarIcon(),menu:()=>{const e=gDesigner.getMainMenu();return e.detach(),e}}).addClass("menubar-toolbar-button")).append(this._createLabelButton({icon:"gravit-icon-open",split:!0,menu:()=>this._createOpenMenu(),click:()=>gDesigner.executeAction(l.ID)}).addClass("open-toolbar-button")).append(this._createSaveButtonGroup()).append(this._createLabelButton({action:gDesigner.getAction(r.ID),icon:"gravit-icon-undo",split:!0,menu:()=>this._createQuickHistoryUndoRedoMenu(),click:()=>gDesigner.executeAction(r.ID)}).addClass("undo-toolbar-button")).append(this._touchZoomButton).append(this._createSnapButton())},e.prototype._createSaveButtonGroup=function(){const e=gDesigner.getAction(a.ID);return this._createLabelButton({icon:"gravit-icon-save",split:!0,menu:[gDesigner.getAction("".concat(d.ID,".").concat(v.find(e=>e.default).ext)),gDesigner.getAction("".concat(c.ID,".").concat(c.Actions.SaveAs)),gDesigner.getAction(u.ID)].reduce((e,t)=>(e.createAddItem(t),e),new p),click:()=>gDesigner.executeAction(a.ID)}).addClass("save-toolbar-button").attr("data-action",e.getId()).data("action",e)},e.prototype._createWindowButton=function(){const e=new p;return this._createLabelButton({caption:" ",menu:()=>{e.clearItems();const t=gDesigner.getWindows();return t.getWindows().reduce((e,n)=>(this._createAndAppendWindowTabToMenu(t,e,n),e),e)},getActiveItem:()=>this._findActiveWindowItemInMenu(e)}).addClass("window-button").addClass("g-touch-only")},e.prototype._createAndAppendWindowTabToMenu=function(e,t,n){const o=this._getWindowTitle(n),i=t.createAddItem(o,()=>{e.activateWindow(n,!0)});i.setDetachable(!0),i.addEventListener(g.DetachEvent,()=>{e.removeWindow(n)});const a=n.getDocument();a&&(a.isCloudFile()||a.isExternalFile())&&i.setIcon(h["gravit-icon-cloud"])},e.prototype._findActiveWindowItemInMenu=function(e){const t=gDesigner.getWindows(),n=t&&t.getActiveWindow(),o=this._getWindowTitle(n);return o&&e.findItem(o)},e.prototype._createNativeButton=function(){const e=e=>$("<button/>").addClass("native-button").append($("<span/>").addClass(e));return this._createLabelButton({caption:"",icon:"gravit-icon-3-dots",click:t=>{$("<div/>").append($("<div/>").addClass("container").append(e("gravit-icon-minimize").on("click",()=>gContainer.minimizeWindow())).append(e("gravit-icon-maximize").on("click",()=>gContainer.maximizeWindow())).append(e("gravit-icon-close").on("click",()=>gContainer.closeWindow()))).gOverlay({releaseOnClose:!0,clazz:"g-toolbar-native-button-overlay"}).gOverlay("open",$(t.target))}}).addClass("native-button").addClass("g-touch-only")},e.prototype._updateActiveWindow=function(){if(gDesigner.isTouchEnabled()&&this._windowButton)if(gDesigner.getApplicationManager().isDocumentTabManagementEnabled()){const o=gDesigner.getWindows()&&gDesigner.getWindows().getActiveWindow();if(o){const i=o.getDocument();var e=this._getWindowTitle(o),t="..."+e.substr(e.length-3);const a=this._windowButton.show().toggleClass("syncing",i&&i.isSynchronizing()).find(".action-button .caption").text(e);this._windowButton.find(".subicon").remove(),this._windowButton.find(".ending").remove();var n=a[0].offsetWidth<a[0].scrollWidth;this._windowButton.toggleClass("text-overflow",n),n&&$("<span/>").addClass("ending").attr("data-ending",t).insertBefore(this._windowButton.find(".gravit-icon-down")),this._windowButton.find(".subicon").remove(),i&&(i.isCloudFile()||i.isExternalFile())&&$("<span/>").addClass("subicon").addClass(h["gravit-icon-cloud-window"]).insertBefore(this._windowButton.find(".gravit-icon-down"))}else this._windowButton.hide()}else this._windowButton.hide()},e.prototype._getWindowTitle=function(e){const t=e&&e.getDocument();return e&&"".concat(e.getTitleWithExtension()).concat(t&&t.isModified()?"*":"")}}},function(e,t,n){"use strict";var o=n(14);n(52),n(51),n(7),n(62),n(28);var i=n(1),a=n(9),r=n(342),s=n(34),l=o(n(239)),c=o(n(37)),d=o(n(713)),u=n(151),p=n(792),g=n(1275),h=n(111),f=n(1520),m=n(1533),y=n(1130),{youtubePlaylist:v}=n(1278),_=n(431);n(206);const b=n(838),w=n(426);function C(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t=this._createFooter(),n=this;this._createOption.bind(this),this._createPresetsFrame.bind(this),this.open.bind(this),this.isOpen.bind(this),this.close.bind(this),this._newDocumentCustomSize.bind(this),this.getDialogElement.bind(this),this._openFromCloud=!1,this._parentDialogInstance=e,this._spectatorModeClazz="on-spectator-mode",this._cb=null,this._dialog=$("<div></div>");$("<div></div>").addClass("links").append($("<div></div>").addClass("loader").text(i.GLocale.get(new i.GLocaleKey("GLocale","loading"))+"..."));var o=$("<div></div>").addClass("sidebar").appendTo(this._dialog);a.LICENSE.UPGRADEABLE&&(gDesigner.getApplicationManager().isLicenseUpgradeable()||o.addClass("on-pro"));var s=$("<div/>").addClass("sidebar-options").appendTo(o),u=$("<div></div>").addClass("frame").appendTo(this._dialog),p=this._createPresetsFrame().appendTo(u),g=null;this._createSeparator(s,"start-option");var m=function(e){this._dialog.find(".sidebar-options").find(".option").removeClass("active"),this._dialog.find(".sidebar-options").find(e).addClass("active")}.bind(this),y=function(){this._dialog.find(".option.start-option").trigger("click"),this._dialog.find(".frame").removeClass("cloud-frame"),this._dialog.find(".g-dialog-content").removeClass("cloud-dialog"),this._dialog.parent().removeClass("cloud-files-dialog"),m(".start-option")}.bind(this);this._createOption(s,i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.start-option")),i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.start-option-description")),"start-option",(function(e){u.children().detach(),u.append(p);var t=gDesigner.getSetting("show_welcome_screen"),o="boolean"!=typeof t||t;e||n._isSpectatorMode()||gDesigner.stats("newdocumentdialog_click_newdesign"),$("<div></div>").addClass("footer-section").append($("<label></label>").text(i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.start-option-check"))).append($("<input>").attr("type","checkbox").prop("checked",!o).on("change",e=>{gDesigner.stats("newdocumentdialog_toggle_show-welcome-screen",o?"enable":"disable"),gDesigner.setSetting("show_welcome_screen",!$(e.target).is(":checked"))}))).appendTo(u),n._isSpectatorMode()||m(".start-option")})),this._createSeparator(s,"templates-option"),this._createOption(s,i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.templates-option")),i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.templates-option-description")),"templates-option",(function(e){if(n._isSpectatorMode())return;const t=function(){e||gDesigner.stats("newdocumentdialog_click_templates"),gDesigner.getUser().then(e=>{let t=e=>{if(!e)return u.removeClass("loading"),void y();n._loadTemplates()};e?t(e):a.LOGIN_DIALOGS.POPUP?h.performLogin().then(t):n._createCloudLoginFrame("template",t,u)})};gDesigner.isOffline()?l.default.openUnavailableFeature(t):t()})),this._createSeparator(s,"cloud-option"),this._createOption(s,i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.cloud-option")),i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.cloud-option-description")),"cloud-option",(function(e,t,o,i,r,s){const c=function(){e||gDesigner.stats("newdocumentdialog_open_cloudfiles"),n._openFromCloud?(u.children().detach(),u.addClass("loading"),m(".cloud-option"),f.isMaximized().then(e=>{e&&u.closest(".g-dialog-container").addClass("fullscreen")}),gDesigner.getUser().then(e=>{let l=e=>{if(u.children().detach(),!e)return u.removeClass("loading"),void n.close();g||(g=$("<div/>").addClass("cloud-workspace")),u.append(g),g.empty(),n._loadCloudFiles(g,t,o,i,r,s)};e?l(e):a.LOGIN_DIALOGS.POPUP?h.performLogin().then(l):n._createCloudLoginFrame("cloud",l,u)})):new _(()=>{let e={closable:!0,showCloudOptions:!0,openFromCloud:!0,closeCallback:()=>{n._parentDialogInstance&&n._parentDialogInstance.close()}};new C(n).open(e)})};return gDesigner.isOffline()?l.default.openUnavailableFeature(c):c()})),this._createSeparator(s,"local-option"),this._createOption(s,i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.local-option")),i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.local-option-description")),"local-option",function(e){e||gDesigner.stats("newdocumentdialog_click_opendocument"),this._openDocument()}.bind(this),!0),this._createSeparator(s,"recent-option");var v=this._createOption(s,i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.recent-option")),i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.recent-option-description")),"recent-option",function(e){e||gDesigner.stats("newdocumentdialog_click_recent");var t=$("<div></div>").gOverlay({releaseOnClose:!0,clazz:"g-recent-documents",padding:!1}),n=$("<div></div>").addClass("menu").appendTo(t),o=gContainer.getRecentDocuments();o&&o.length?o.forEach(e=>{var t=gContainer.getRecentDocumentIconClass(e);$("<div></div>").addClass("item file").data("file",e).on("click",async e=>{gDesigner.stats("newdocumentdialog_click_openrecentdocument");try{gDesigner.openDocument($(e.target).closest(".file").data("file"))}catch(e){if(!(e instanceof d.default))throw this.close(),e;c.default.externalFileError(!0)}this.close()}).append($("<div/>").addClass("icon").addClass(t||"")).append($("<div/>").addClass("name").append(e.getName()+"."+e.getExtension().toLowerCase())).appendTo(n)}):$("<div></div>").addClass("item").append(i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.recent-option-empty"))).appendTo(n);var a=v.offset().left+v.width()-10,r=v.offset().top-t.height();t.gOverlay("open",{x:a,y:r})}.bind(this),!0);this._createSeparator(s),a.LICENSE.UPGRADEABLE&&$("<div></div>").addClass("activate-trial").css("display",gDesigner.getApplicationManager().isLicenseUpgradeable()?"":"none").append($("<div></div>").addClass("title").html(i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.try-out-pro")))).append($("<div></div>").addClass("subtitle").html(i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.start-free-trial")))).on("click",()=>gDesigner.activateTrialLicense().then(()=>this._updateUI())).appendTo(o);var b=$("<div></div>").addClass("footer").appendTo(o),w=$("<div />").addClass("links-container").appendTo(b),x=$("<div/>").addClass("links-column").appendTo(w),S=$("<div/>").addClass("links-column").appendTo(w),E=$("<div/>").addClass("links-column").appendTo(w),A=0;t.forEach(e=>{e.links.forEach(e=>{var t=$("<div/>").addClass("link");$("<div/>").addClass("link-icon").appendTo(t),$("<a/>").on("click",(function(t){e.statType?gDesigner.stats(e.statType):gDesigner.stats("newdocumentdialog_open_externallink",i.GLocale.get(e.labelLocale,null,i.GLocaleLanguage.English)),e.click?e.click.call(this):gContainer.openExternalLink(t,e.href)})).text(i.GLocale.get(e.labelLocale||e.text)).appendTo(t),A%3==0?t.appendTo(x):A%3==1?t.appendTo(S):t.appendTo(E),++A})}),r.SHOW_BETA_BRANDING&&gDesigner.isBeta()&&$("<div/>").addClass("beta-badge").attr("title","βETA").appendTo(o),this._getVersionInfoWidget().appendTo(o),this._closeCallbackListeners=[],this._dialog.gDialog({closeTimeout:0,releaseOnClose:!1,className:"g-new-document-dialog",closeCallback:e=>{this._closeCallback&&this._closeCallback(e),this._closeCallbackListeners.length&&(this._closeCallbackListeners.forEach(t=>t.call(null,e)),this._closeCallbackListeners=[])},alwaysCloseable:!0}),document.addEventListener("keydown",function(e){13===e.keyCode&&this._dialog.gDialog("isOpen")&&this._newDocumentCustomSize()}.bind(this))}i.GObject.inherit(C,i.GObject),C.prototype._getVersionInfoWidget=function(){let e="";"lts"===gDesigner.getEnv()?e=" LTS":"rc"===gDesigner.getEnv()&&(e=" Staging");const t=b.getRuntime();return t&&(e+=" ".concat(t.abbr)),$("<div/>").addClass("version").html(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.version"))+" "+gDesigner.getVersionFriendlyName()+e).on("click",(function(){if(gDesigner.stats("newdocumentdialog_show_gravitversion"),"production"!==gDesigner.getEnv()&&"lts"!==gDesigner.getEnv()&&"rc"!==gDesigner.getEnv()){var t=$(this),n=t.data("nfo");n||t.data("nfo",n={current:0}),function(n){switch(n.current=(n.current+1)%4,n.current){case 0:t.html(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.version"))+" "+gDesigner.getVersionFriendlyName()+e);break;case 1:t.html(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.internal-version"))+": "+gDesigner.getVersion());break;case 2:t.html(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.build"))+": "+(gDesigner.getBuildNum()||""));break;case 3:t.html(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.commit"))+": "+(gDesigner.getCommitSHA()||"").substr(0,8))}}(n)}}))},C.prototype._licenseChangedEvent=function(e){this._updateUI()},C.prototype._updateUI=function(){if(a.LICENSE.UPGRADEABLE){const e=gDesigner.getApplicationManager().isLicenseUpgradeable();this._dialog.find(".activate-trial").css("display",e?"":"none"),this._dialog.find(".sidebar").toggleClass("on-pro",!e)}this._dialog.find(".templates-option").css("display",gDesigner.isOffline()?"none":""),this._dialog.find(".cloud-option").css("display",gDesigner.isOffline()?"none":""),this._updateForUserLicense()},C.prototype.getDialogElement=function(){return this._dialog},C.prototype._updateForUserLicense=function(){const e=this._dialog.find(".header"),t=this._dialog.find(".presets-frame"),n=e.find(".preset .g-input"),o=t.find(".presets .preset");if(!this._isSpectatorMode())return this._dialog.find(".start-option").removeClass(this._spectatorModeClazz).removeAttr("data-title"),this._dialog.find(".templates-option").removeClass(this._spectatorModeClazz).removeAttr("data-title"),t.removeClass(this._spectatorModeClazz),e.removeClass(this._spectatorModeClazz),e.find(".select-overlay").remove(),n.find("input").removeAttr("readonly").removeAttr("disabled").removeAttr("data-title"),n.find("select").removeAttr("disabled").removeAttr("data-title").removeClass("g-disabled"),n.find(".cloud-button").removeAttr("disabled").removeAttr("data-title").removeClass("g-disabled").addClass("active"),o.find(".icon").removeAttr("data-title"),void o.find(".select-container").removeAttr("data-title");const a=i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.option-not-available-in-view-mode"));this._dialog.find(".start-option").addClass(this._spectatorModeClazz).attr("data-title",a),this._dialog.find(".templates-option").addClass(this._spectatorModeClazz).attr("data-title",a),t.addClass(this._spectatorModeClazz),e.addClass(this._spectatorModeClazz),n.find("input").attr("readonly",!0).attr("disabled",!0).attr("data-title",a),n.find("select").attr("disabled",!0).attr("data-title",a).addClass("g-disabled").insertAfter(),n.find(".cloud-button").attr("data-title",a).addClass("g-disabled").removeClass("active"),o.find(".icon").attr("data-title",a),o.find(".select-container").attr("data-title",a),e.find(".select-overlay").length||$("<div>").addClass("select-overlay").attr("data-title",a).insertAfter(e.find(".preset .g-input select"))},C.prototype._createOption=function(e,t,n,o,i,a){var r=$("<div/>").addClass("option").addClass(o).on("click",function(e,t,n,o,s,l){this._dialog.find(".frame").removeClass("loading"),a||(this._dialog.find(".sidebar-options").find(".option-separator").removeClass("active"),$(r).prevAll(".option-separator:visible").first().addClass("active"),$(r).nextAll(".option-separator:visible").first().addClass("active")),i(!0&e.isTrigger,t,n,o,s,l)}.bind(this)).appendTo(e);$("<div/>").addClass("option-icon").appendTo(r);var s=$("<div/>").addClass("option-text").appendTo(r);return $("<div/>").addClass("option-title").html(t).appendTo(s),$("<div/>").addClass("option-subtitle").html(n).appendTo(s),r},C.prototype._createFooter=function(){return[{section:i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.connect")),links:[{href:"",labelLocale:new i.GLocaleKey("GNewDocumentDialog","text.example-files"),statType:"newdocumentdialog_click_example-files",click:()=>{const e=()=>(new C).open({closable:!0,openFromCloud:!0,showCloudOptions:!0,nativeCloud:!0,showExampleFiles:!0});gDesigner.isOffline()?l.default.openUnavailableFeature(e):e()}},{href:v,labelLocale:new i.GLocaleKey("GOpenLinkAction","title.tutorials")},{href:"https://documentation.corelvector.com",labelLocale:new i.GLocaleKey("GOpenLinkAction","title.user-guide")}]}]},C.prototype._createSeparator=function(e,t){$("<div/>").addClass("option-separator").addClass(t).appendTo(e)},C.prototype._createPresetsFrame=function(){var e=$("<div></div>").addClass("presets-container"),t=$("<div/>").addClass("header").appendTo(e),n=$("<div></div>").addClass("presets").appendTo($("<div/>").addClass("presets-frame").appendTo(e));y.getPresets(!0).forEach((e,t)=>{$("<div/>").addClass("preset").data("preset",e).append($("<p/>").addClass("title").text(e.name)).append($("<div/>").addClass("icon").on("click",t=>{this._isSpectatorMode()||this._showPresetDropdown(t,e)}).append($("<img/>").attr("src","assets/img/new-document/"+e.icon+"-white.svg")).append($("<img/>").attr("src","assets/img/new-document/"+e.icon+"-black.svg").addClass("hover"))).append($("<div/>").addClass("select-container").append([$("<p/>").addClass("name").text(e.subTitle).on("click",t=>{this._isSpectatorMode()||this._showPresetDropdown(t,e)})])).appendTo(n)}),$("<div/>").addClass("preset").append($("<p/>").addClass("title").text(i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.templates-option")))).append($("<div/>").addClass("icon").on("click",()=>{this._isSpectatorMode()||this._dialog.find(".sidebar-options").find(".templates-option").trigger("click")}).css("padding-bottom","42px").append($("<img/>").attr("src","assets/img/new-document/preset-templates-white.svg")).append($("<img/>").attr("src","assets/img/new-document/preset-templates-black.svg").addClass("hover"))).appendTo(n);var o=e=>13===e.keyCode?this._newDocumentCustomSize():void 0;return $("<div/>").addClass("preset custom-size").append($("<div/>").addClass("g-input").on("click",e=>e.stopPropagation()).append($("<div/>").addClass("input-holder").append($("<div/>").append($("<input/>").on("keydown",o).attr("name","width").attr("placeholder",i.GLocale.get(new i.GLocaleKey("GCommonNames","text.width"))).val("").gInputBox({minValue:0,incrementValue:1,allowEmptyValue:!0})).append($("<img/>").addClass("versus").attr("src","assets/icon/versus.svg")).append($("<input/>").on("keydown",o).attr("name","height").attr("placeholder",i.GLocale.get(new i.GLocaleKey("GCommonNames","text.height"))).val("").gInputBox({minValue:0,incrementValue:1,allowEmptyValue:!0})))).append($("<select/>").attr("name","unit").val("px").gUnit({short:!0})).on("change",(function(e){var t=$(this).find(":selected").val()||"px";"undefined"!=typeof gDesigner&&gDesigner.stats("newdocumentdialog_change_unit",t)})).append($("<img/>").addClass("result").attr("src","assets/icon/result.svg")).append($("<button/>").addClass("cloud-button").append($("<span/>").text(i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","action.create-canvas")))).addClass("active").on("click",()=>{this._isSpectatorMode()||this._newDocumentCustomSize()}))).append($("<p/>").addClass("infinite-canvas").text(i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","action.leave-empty-infinite")))).appendTo(t),r.NEWDOCUMENTDIALOG.HR_UNDER_PRESETS&&$("<hr/>").appendTo(t),e},C.prototype._createCloudLoginFrame=function(e,t,n){if(0===$(n).children().length){n.removeClass("loading");var o=$("<div/>").addClass("cloud-login").addClass(e),a="template"===e;$("<div/>").addClass("cloud-logo").addClass(e).appendTo(o);var r=a?i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.templates-login-title")):i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.cloud-login-title")),s=a?i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.templates-login-phrase1")):i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.cloud-login-phrase1")),l=a?i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.templates-login-phrase2")):i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.cloud-login-phrase2"));$("<div/>").html(r).addClass("title").addClass(e).appendTo(o),$("<div/>").html(s).addClass("subtitle").addClass("first").addClass(e).appendTo(o),$("<div/>").html(l).addClass("subtitle").addClass("second").addClass(e).appendTo(o),$("<div/>").addClass("login-buttons").append($("<div/>").addClass("g-button cloud-login-button").addClass("login").html(i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.cloud-login"))).on("click",(function(){h.performLogin().then((function(e){t&&t(e)}))}))).append($("<div/>").addClass("g-button cloud-login-button").html(i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.cloud-signup"))).on("click",(function(){h.performSignup().then((function(e){t&&t(e)}))}))).appendTo(o),n.append(o)}},C.prototype._loadCloudFiles=function(e,t,n,o,i,a){this.handled=!1;var r=new f({parentComponent:e,closeCallback:async function(e){this.handled=!0,await this.close(),this._parentDialogInstance&&await this._parentDialogInstance.close(),e||n&&n()}.bind(this),documentToSave:t,cancelSave:async function(){this.handled=!0,await this.close(),n&&n()}.bind(this),defaultFilename:o,readyStateChange:this.readyStateChange,nativeCloud:i,showExampleFiles:a}),s=()=>{var e=this._closeCallbackListeners.indexOf(s);this._closeCallbackListeners.splice(e,1),this.handled||n&&n(),r.handleParentClose()};this._closeCallbackListeners.push(s)},C.prototype._loadTemplates=function(){new m(function(){this.close()}.bind(this))},C.prototype.open=function(e){let{closable:t,cb:n,showCloudOptions:o,openFromCloud:i,defaultOption:a,newOrFromTemplate:r,documentToSave:s,cancelSaveCallback:l,defaultFilename:c,closeCallback:d,nativeCloud:u,showExampleFiles:p}=e;this._cb=n||null,this._closeCallback=d,this._openFromCloud=i;h.isOnline();var g=function(){this._dialog.find(".sidebar").css("display",""),this._dialog.find(".sidebar-options").find(".option").css("display",""),this._dialog.find(".sidebar-options").find(".option-separator").css("display",""),this._dialog.find(".sidebar").find(".footer").css("display",""),this._dialog.find(".sidebar").find(".version").css("display","")}.bind(this),f=function(){this._dialog.find(".cloud-option").css("display",o?"":"none"),this._dialog.find(".option.start-option").trigger("click"),this._dialog.find(".frame").removeClass("cloud-frame"),this._dialog.find(".g-dialog-content").removeClass("cloud-dialog"),this._dialog.parent().removeClass("cloud-files-dialog"),o&&i&&(this._dialog.find(".sidebar").css("display","none"),this._dialog.addClass("cloud-dialog"),this._dialog.parent().addClass("cloud-files-dialog"),this._dialog.find(".frame").addClass("cloud-frame"),this._dialog.find(".cloud-option").trigger("click",[s,l,c,u,p])),a&&this._dialog.find("."+a).trigger("click")}.bind(this);this._dialog.gDialog("open",t),g(),f(),this._updateUI(),this._closeCallbackListeners.push(()=>{gDesigner.removeEventListener(w,this._licenseChangedEvent,this)}),gDesigner.addEventListener(w,this._licenseChangedEvent,this)},C.prototype.saveCloudFile=function(e,t,n,o,i){let a={closable:!0,showCloudOptions:!0,openFromCloud:!0,cancelSaveCallback:t,documentToSave:e,defaultFilename:n,nativeCloud:i};this.readyStateChange=o,this.open(a)},C.prototype.isOpen=function(){return this._dialog.gDialog("isOpen")},C.prototype.close=function(){return this._dialog.parent().removeClass("cloud-files-dialog"),this._dialog.gDialog("close",!1,0),(0,s.sleep)(0)},C.prototype._newDocumentFromPreset=async function(e,t,n){var o=this._dialog.find(".frame"),r=e.layouts[t];if(gDesigner.stats("newdocumentdialog_new_document-from-preset",n||(r.localeClass?i.GLocale.get(r.localeClass,null,i.GLocaleLanguage.English):r.name),!1,!0),gDesigner.getAmplitudeHelper().logEvent(a.AmplitudeData.Events.DOCUMENT_CREATED,{DOCUMENT_CATEGORY:e.nameEn,DOCUMENT_TYPE:this._getLayoutDisplayName(r),DOCUMENT_TEMPLATE_ID:e.id}),r.template)try{o.addClass("loading");var s=new u,l=await a.gApi.getPresetTemplate({type:r.template});o.removeClass("loading"),gDesigner.addDocument(s),s.setDocumentFromTemplate(!0),s.loadFromData(l.data),this.close(),this._cb&&this._cb()}catch(e){o.hasClass("loading")&&o.removeClass("loading"),this._newDocument(r.width,r.height,r.unit,r.dpi)}else this._newDocument(r.width,r.height,r.unit,r.dpi)},C.prototype._newDocumentCustomSize=function(){gDesigner.stats("newdocumentdialog_new_custom-sized"),gDesigner.getAmplitudeHelper().logEvent(a.AmplitudeData.Events.DOCUMENT_CREATED,{DOCUMENT_CATEGORY:"Blank",DOCUMENT_TYPE:"Blank"});var e=this._dialog.find(".preset.custom-size"),t=e.find('[name="width"]').gInputBox("value"),n=e.find('[name="height"]').gInputBox("value"),o=e.find('[name="unit"]').val(),i=""===t,r=""===n,s=i?0:parseInt(t),l=r?0:parseInt(n);isNaN(s)||isNaN(l)||!o||!s&&!i||!l&&!r||this._newDocument(t,n,o)},C.prototype._newDocument=function(e,t,n,o){var a=gDesigner.createScene();a.setProperties(["ut","dpi"],[n,o||i.GLength.DPI]),a.getActivePage().setProperties(["bck","w","h"],[i.GRGBColor.WHITE,new i.GLength(e,n).toPoint(),new i.GLength(t,n).toPoint()]),gDesigner.addDocument(new u(a)),this.close(),this._cb&&this._cb()},C.prototype._openDocument=function(){gDesigner.executeAction(gDesigner.getAction(g.ID).isAvailable()?g.ID:p.ID,[null,this.close.bind(this)],void 0,!0)},C.prototype._getLayoutFormattedSize=function(e){var t=e.includes,n="";if(t){for(var o=[],i=0,a=t.length;i<a;i++){var r=t[i];o.push(r.width+"x"+r.height)}n=o.join(", ")+" "+e.unit}else n=e.width+"x"+e.height+" "+e.unit;return n},C.prototype._getLayoutDisplayName=function(e){return e.name+" ("+this._getLayoutFormattedSize(e)+")"},C.prototype._showPresetDropdown=function(e,t){e.stopPropagation();var n=$(e.target).closest(".preset").find(".name"),o=$("<ul/>");t.layouts.forEach((e,n)=>{var a=$("<li/>").attr("data-value",n).text(this._getLayoutDisplayName(e)).on("click",e=>{o.gOverlay("close");var n=parseInt($(e.target).attr("data-value")),a="";a=t.localeClass?i.GLocale.get(t.localeClass,null,i.GLocaleLanguage.English):t.name||"",a=t.layouts[n].localeClass?a+"/"+i.GLocale.get(t.layouts[n].localeClass,null,i.GLocaleLanguage.English):a+"/"+t.layouts[n].name,"undefined"!=typeof gDesigner&&gDesigner.stats("newdocumentdialog_change_preset",a),this._newDocumentFromPreset(t,n,a)});o.append(a)}),o.gOverlay({clazz:"preset-select",padding:!1,offsetY:10}),o.gOverlay("open",n)},C.prototype._isSpectatorMode=function(){return!1},e.exports=C},function(e,t,n){"use strict";var o=n(14);n(17),n(158),n(314),n(169),n(89),n(26),n(7),n(341),n(18),n(3),n(255),n(29),n(830),n(84),n(204),n(177),n(178),n(179),n(180),n(28),n(22);var i=n(1),a=n(1521),r=n(34),s=n(1131),l=n(1527),c=n(841),d=n(837),u=o(n(1531)),p=o(n(78)),g=o(n(111)),h=o(n(781)),f=o(n(1216)),m=o(n(430)),y=o(n(37)),v=o(n(340)),_=n(9),b=n(503),w=o(n(1532));const C=n(143),x=n(71);var S=_.CloudIntegration.cloudOptions,E=_.CloudIntegration.nativeOption,A=[..._.CloudIntegration.cloudOptions,_.CloudIntegration.nativeOption];function T(e){this._initializeDefaultValues(e),this._initializingPromise=this._init(e)}T.prototype._initializingPromise=null,T.prototype._GUISettings=null,T.prototype._cloudSettings=null,T.prototype.view=null,T.prototype.drive=null,T.prototype.MODE=null,T.IMAGES_WAIT_TIMEOUT=2e4,T.DriveAccountsSettingName="designer.filespanel.cloud-accounts",T.DriveAccountsActiveSettingsName="designer.filespanel.cloud-accounts.active",i.GObject.inherit(T,i.GObject),T.prototype._showEmptyPanel=!1,T.prototype._hasFolders=!1,T.prototype._showRecentFiles=!1,T.prototype._isSaveMode=!1,T.prototype._documentToSave=null,T.prototype._initializeDefaultValues=function(e){var t=this;let{closeCallback:n=r.fakeFunction,documentToSave:o,cancelSave:i=r.fakeFunction,defaultFilename:a,readyStateChange:s,showExampleFiles:l,GUISettings:c,saveMode:u,driveSettings:p=null,isDashboard:g,isCorporateStoragesEnabled:h=!0}=e;this._GUISettings=c||new T.GUISettings,this._driveSettings=p||new f.default,this.SELECTION=[],this.TEMP_SELECTION=[],this.CURRENT_FILE_LOAD=0,this.CURRENT_UPDATE_OPERATION_ID=-1,this.MODE=d.GFilesPanelClipboardModes.DEFAULT,this.BUILD_IN_PROGRESS=!1,this.DEFAULT_FILENAME=a,this._newClipBoard=!1,this._showExampleFiles=l,this._isDashboard=g,this._isCorporateStoragesEnabled=h,this.readyStateChange=s,this.search=(0,r.debounce)(this.search,200);var m=e=>function(){t._removeEventListeners(),e(...arguments)};this._onCancelSaveCallback=i&&m(i),this._onCloseCallback=n&&m(n),this._documentToSave=o,this._isSaveMode=u||this._documentToSave},T.prototype._init=async function(e){let{parentComponent:t,nativeCloud:n,initCallback:o}=e;return this.USER=await gDesigner.getUser(),this.panel=$("<div/>").addClass("g-files-panel").appendTo(t),this.initLayout(n).then(()=>{o&&o()}).catch(e=>{o&&o(e)})},T.GUISettings=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({dialogControls:!0,downloadSourceFile:!1},e)},T.prototype.unmount=function(){function e(){this.panel&&$(this.panel).remove()}this._initializingPromise?this._initializingPromise.then(()=>e.call(this)):e.call(this)},T.isMaximized=()=>gContainer.getProperty("GFilesPanel.maximized"),T.isFilesGridListStyle=()=>gContainer.getProperty("GFilesPanel.isFilesListStyle"),T.prototype.getContextSource=function(){return{toggleLoading:e=>this.view.toggleLoading(e),update:()=>this.updateFilesList(),close:()=>{this.view.toggleLoading(!0),this._onCloseCallback()}}},T.prototype.initLayout=async function(e){this.drive=l.GCloudDrive.getInstance(),this.drive.setQueryLimit(20),this.view=new a.GFilesPanelViewNative(this.panel,this),this.accountSettingsKey="".concat(T.DriveAccountsSettingName,".").concat(this.USER.id);var t=this;let n=await gContainer.getProperty(T.DriveAccountsActiveSettingsName);return async function(n){let o,i=!0;await t.updateCloudSettings(),e?(i=!1,o=E):(n&&(o=t.getCloudSettingsById(n)),o||(o=E));try{await t.setCloudDrive(o,i)}catch(e){await t.setCloudDrive(E)}await T.isFilesGridListStyle()&&t.toListView(),await T.isMaximized()&&t._maximizeWindow(!0),window.addEventListener("resize",t._minimizeWindow.bind(t))}(n&&n.activeSettingsId)},T.prototype.updateCloudAccountName=function(e,t){var n=this;return gContainer.getProperty(n.accountSettingsKey).then((async function(o){let i,a=o?n._stringToSettings(o):[];a instanceof Array||(a=[]);for(let t=0,n=a.length;t<n;t++)if(a[t].id===e){i=t;break}i>-1&&(a[i].name=t),gContainer.setProperty(n.accountSettingsKey,n._settingsToString(a)),await n.updateCloudSettings(),e===n.getCurrentDriveId()&&n.view.updateTopBar()})).catch(e=>Promise.reject(e))},T.prototype.saveNewCloudAccount=function(e){var t=this;return gContainer.getProperty(t.accountSettingsKey).then((function(n){let o=n?t._stringToSettings(n):[];return o instanceof Array||(o=[]),e.id=(new Date).getTime(),e.deletable=!0,o.push(e),gContainer.setProperty(t.accountSettingsKey,t._settingsToString(o)),t.updateCloudSettings()})).catch(e=>Promise.reject(e))},T.prototype.deleteCloudDrive=function(e){var t=this;return gContainer.getProperty(t.accountSettingsKey).then((async function(n){let o,i=n?t._stringToSettings(n):[];i instanceof Array||(i=[]);for(let t=0,n=i.length;t<n;t++)if(i[t].id===e.id){o=t;break}o>-1&&i.splice(o,1),i.length>0?gContainer.setProperty(t.accountSettingsKey,t._settingsToString(i)):gContainer.removeProperty(t.accountSettingsKey);try{if("googledrive"===e.type){var a=new l.GGoogleDrive;await a.install(),await a.uninstall()}gDesigner.removeExternalRecentFiles(e.type,e.id)}catch(e){console.log(e)}return t.updateCloudSettings()})).catch(e=>Promise.reject(e))},T.prototype.handleNewFolder=function(e){var t=this;let n=!1;gDesigner.stats("filespanel_create_cloudfolder"),this.view.toggleLoading(!0);let o=0;const a=r=>{if(o++,o>b.MAX_FOLDER_DEPTH_FOR_CLOUD)return n=!1,t.view.toggleLoading(!1),void y.default.alert(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.error-creating-folder")));let s={};t.drive.hasTitleValidation()&&(s=t.drive.getTitleValidator()),new u.default((async function(o){if(o=o.trim(),t.view.toggleLoading(!0),t.drive.supportsSaveCollisionFlow()){if(await t.drive.folderExists(o,t.drive.getCurrentFolder())&&!await(l=o,new Promise(e=>{y.default.confirm(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.folder-already-exists-on-current-location")).replace("%foldername",'"'.concat(l,'"')),t=>e(!!t),null,null,!0,!0,!0)})))return a(o);if(t.drive.requiresOverwriteCollisionHandling()){for(var r=0,s=o;await t.drive.folderExists(s,t.drive.getCurrentFolder());)s="".concat(o," (").concat(++r,")");o=s}}var l;n=!0,t.drive.createFolder(o).then(()=>{t.view.toggleLoading(!1),e?e():t.updateFilesList()}).catch(e=>{if(t.view.toggleLoading(!1),e&&e.badName)return y.default.alert(e.message),setTimeout(()=>{a(o)});n=!1,console.error(e),y.default.alert(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.error-creating-folder")))})}),(function(){n||t.view.toggleLoading(!1)}),"primary",r,s).open()};return a(),this},T.prototype.handleMaximizePanel=function(){return this._maximizeWindow(),gDesigner.stats("filespanel_maximize_cloudfile"),this},T.prototype.handleMinimizePanel=function(){return this._minimizeWindow(),gDesigner.stats("filespanel_minimize_cloudfile"),this},T.prototype.handleClosePanel=function(){return this.panel.closest(".g-dialog-container").mousedown(),this._removeEventListeners(),gDesigner.stats("filespanel_close_cloudfile"),this},T.prototype.handleDelete=function(){this.logStatsForCurrentFilesSelection("filespanel_delete_cloud","filespanel_delete_cloud-multiple");var e=this;return y.default.confirm(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.delete-confirm")),function(t){t&&e.deleteSelection()}.bind(this),null,i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.delete-button")),!1,!0,!0),this},T.prototype.handleCancelSave=function(){return gDesigner.stats("filespanel_cancelsave_cloud"),this._onCancelSaveCallback(),this},T.prototype.handleSave=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t||(t=this.getDefaultExtensionForSave());const o=e=>new Promise(t=>{y.default.confirm(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.file-already-exists-on-current-location")).replace("%filename",'"'.concat(e,'"')),e=>t(!!e),null,null,!1,!0,!0)});if(this.view.toggleLoading(!0),gDesigner.stats("filespanel_save_cloudfile",t),(e=(0,r.removeAllSuffixWhichLikeExtension)(e,t)).trim()){try{if(this.drive.supportsSaveCollisionFlow()){if(await this.drive.fileExists(e,t,this.drive.getCurrentFolder())&&!await o(e))return this.view.toggleLoading(!1),void this.view.focusFileNameInput({name:e});if(this.drive.requiresOverwriteCollisionHandling()){for(var a=0,s=e;await this.drive.fileExists(s,t,this.drive.getCurrentFolder());)s="".concat(e," (").concat(++a,")");e=s}}await this._triggerNewFileSave(e,t,n)}catch(e){if(e&&e.badName)return this.view.toggleLoading(!1),void y.default.alert(e.message);this.getDocumentToSave()&&gDesigner.trigger(new x(x.Type.SynchronismUpdateFailed,this.getDocumentToSave()));let t=i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.error-saving-file"));e&&e.message&&e.dontExtend?t=e.message:e&&e.message?t="".concat(t,"<br />").concat(e.message):e&&(t="".concat(t,"<br />").concat(e)),y.default.alert(t),console.error(e)}this._onCloseCallback(!0)}else y.default.alert(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.please-inform-valid-file-name")),()=>{this.view.toggleLoading(!1),this.view.focusFileNameInput({name:i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.untitled"))})});return this},T.prototype._setFileNameInputValue=function(e){this.view.setFileNameInputValue(e)},T.prototype._triggerNewFileSave=async function(e,t,n){await this.drive.saveNewFile(this.getDocumentToSave(),e,t,n,this.readyStateChange)},T.prototype._triggerFileOpen=async function(e){await this.drive.openFile(e)},T.prototype._triggerFileDeleted=async function(e){},T.prototype._triggerFileRenamed=async function(e){},T.prototype.setKeyListener=function(e){return this._handleKeyPress&&document.removeEventListener("keypress",this._handleKeyPress),this._handleKeyPress=t=>{var n=t.which||t.keyCode;e(n,t)},document.addEventListener("keypress",this._handleKeyPress),this},T.prototype.getDefaultSaveFormat=function(){return this.drive.getDefaultFileFormat()},T.prototype.handleBack=function(){if(gDesigner.stats("filespanel_go-to-parent_cloudfolder"),this.drive.getCurrentFolder()){this.view.toggleLoading(!0),this.drive.navigateToParentFolder();var e=this.drive.getCurrentFolder();this.view.manageOpenFolder(null,e),this.view.resetSelection()}return this.updateFilesList(!0,!1),this},T.prototype.navigateToRoot=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return gDesigner.stats("filespanel_go-to-root_cloudfolder"),this.drive.isRootFolder()||(this.view.toggleLoading(!0),this.drive.setCurrentFolder(this.drive.getRootFolder()),this.navigateToFolder(this.drive.getRootFolder(),e),this.view.manageOpenFolder(null,this.drive.getRootFolder()),this.view.resetSelection()),this},T.prototype.handleSaveAs=function(e,t,n){gDesigner.stats("filespanel_download_file",e),this._onCancelSaveCallback(),gDesigner.executeAction("".concat(m.default.ID,".").concat(e.toLowerCase()),[null,null,null,t,n],void 0,!0)},T.prototype.handleDownload=function(){return gDesigner.stats("filespanel_download_multiple-files"),this.downloadSelectedFiles(c.DEFAULT_TYPE),this},T.prototype.handleFileDblClick=function(e){return e.hasPermission(C.Permission.Open)&&!this.isSaveMode()?(gDesigner.stats("filespanel_open_cloudfile"),this.openFile(e)):e.hasPermission(C.Permission.Rename)&&(gDesigner.stats("filespanel_focus_filename-input"),this.view.focusFileNameInput(e)),this},T.prototype.handleFileClick=function(e,t){return gDesigner.stats("filespanel_select_cloudfile"),this.view.manageSelection(t,e),this},T.prototype.handleParentClose=function(){return this._removeEventListeners(),this.view&&this.view.handleParentClose(),this},T.prototype.openFile=async function(e){e.example&&gDesigner.stats("filespanel_open_examplefile",e.name);if(await this.drive.canAccessFile(e).catch(e=>!1))try{this._triggerFileOpen(e),this._onCloseCallback()}catch(e){console.log(e.stack),y.default.alert(e.message),this.updateFilesList()}else y.default.alert(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.file-can-not-be-accessed-missing-permissions")))},T.prototype.handleFolderClick=function(e,t){return gDesigner.stats("filespanel_open_cloudfolder"),this.view.resetSelection(),this.navigateToFolder(e),this.view.manageOpenFolder(t,e),this},T.prototype.manageSelection=function(e,t){return gDesigner.stats("filespanel_select_cloudfolder"),this.view.manageSelection(t,e),this},T.prototype.renameItem=async function(e,t){return this.drive.renameItem(e,t)},T.prototype._removeEventListeners=function(){document.removeEventListener("keypress",this._handleKeyPress),window.removeEventListener("resize",this._minimizeWindow.bind(this))},T.prototype._getFullPathNames=function(e){var t=this.drive.getFolders(),n=[e.name];let o,i;if(!t)return n;for(;e.parent&&(i=t[e.parent],i)&&(o=i.folder,o.name);)n.unshift(o.name),e=o;return n},T.prototype.addFile=function(e,t,n,o){this.view.addFile(this.updateCloudItemForUserPermission(e),t,n,o)},T.prototype._convertBlob=function(e,t,n){return Promise.resolve(e)},T.prototype.downloadFile=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(o){if(!(t=this.drive.getFileFormat(e)))return u(Promise.reject(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.file-not-supported"))))}else t||(t=this.drive.getFileFormat(e)||c.DEFAULT_TYPE);var{ext:a,type:r,mime:s,version:l}=t;r=r||s;const d=this._triggerFileDownload(e,n,a,r,l);function u(t){return{promise:t,file:e,cancel:()=>n.cancel&&n.cancel()}}return u(d)},T.prototype._triggerFileDownload=function(e,t,n,o,i){const a=new AbortController,l=a.signal;return t.progress=t.progress||(()=>{}),this.drive.getRawFile(e,l,t).then(async l=>{let d,u=l;if(t.cancel=(0,r.chaining)(t.cancel,()=>a.abort()),e.type!==o?(u=await this._convertBlob(u,{ext:n,type:o,version:i},t).catch(e=>d=e||!0),u||(d=new Error("Unsupported mime type: #".concat(e.type)))):o===c.DEFAULT_TYPE.type&&(u=await this._repackNativeBlob(u,t).catch(e=>d=e||!0),u||d||(d=new Error("Error fetching file contents for download"))),d){if(d instanceof Error)throw d;throw new Error("Error fetching file contents for download")}{t.done&&t.done();let i=e.name||l.name;i.endsWith(".".concat(n))&&(i=i.replace(new RegExp(".".concat(n,"$")),"")),(0,s.downloadDataURI)(u,i,n,{type:o})}}).catch(e=>{if(t.failed&&t.failed(),e){if(console.error(e),e instanceof Error)throw e;throw new Error("Error fetching file contents for download")}})},T.prototype._repackNativeBlob=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(async(n,o)=>{const a=new FileReader;a.onload=async function(){const e=new Uint8Array(this.result),a=i.GNode.deserialize(g.default.unzipData(e),gDesigner.getWorkspace());var s={cancelled:!1};t.cancel=(0,r.chaining)(t.cancel,()=>s.cancelled=!0),await(0,r.resolveDocumentImages)(a,T.IMAGES_WAIT_TIMEOUT,s).catch(()=>{s.cancelled?o():o(new Error(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.file-no-images-cannot-be-processed"))))});var l=i.GNode.serialize(a,{save:!0});(null===l||""===l||l.length<1||s.cancelled)&&o();var c=new Uint8Array(pako.gzip(l,{level:9}).buffer);c.byteLength>20?n(c):o()},a.onerror=o,a.readAsArrayBuffer(e)})},T.prototype.downloadSelectedFiles=async function(){let{ext:e,type:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.DEFAULT_TYPE,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2?arguments[2]:void 0;if(this.SELECTION.length<1)return;const i=await Promise.all(this.SELECTION.map(async e=>this.drive.isFileSupported(e)&&await this.drive.canAccessFile(e).catch(e=>(console.error("drive.canAccessFile error",e),!1)))),a=this.SELECTION.filter((e,t)=>!!i[t]);await this._triggerSelectedFilesDownload(a,e,t,n,o)},T.prototype._triggerSelectedFilesDownload=async function(e,t,n,o,a){const r=e.map(()=>0),s=e.length,l=100/s,c={};let d=gDesigner.getActiveDocument();d||(d=gDesigner.newInfiniteDocument()),d.updateStatus(p.default.Downloading,c),c.text(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.downloading-files")),!0),c.progressInfo("0/".concat(s));let u=0,g=!1;const h=()=>c.progressInfo("".concat(++u,"/").concat(s)),f=()=>c.progressInfo("".concat(++u,"/").concat(s)),m=()=>g=!0,v=e.map((e,i)=>{var s=o;!s&&this.fileRequiresSourceDownload(e)&&(s=!0);var d={ext:(s&&(e.extension||e.ext)||t).toLowerCase(),type:s&&(e instanceof C&&e.getMimeType()||e.type)||n,version:a};return this.downloadFile(e,d,{progress(e){r[i]=e;const t=r.reduce((e,t)=>e+Math.min(t/100,1)*l,0);c.progress(t)},done:h,failed:f,cancel:m},o)});v.length&&(this._onCancelSaveCallback(),gDesigner.closeNewDocumentDialog()),d.initCancelHandler(()=>{try{v.forEach(e=>e.cancel())}finally{d.updateStatus(p.default.DownloadCancelled)}});const _=await Promise.all(v.map(e=>{let{file:t,promise:n}=e;return n.catch(e=>Object.create({file:t,status:"rejected",error:e}))}));if(g)return void d.updateStatus(p.default.DownloadCancelled);const b=_.filter(e=>e&&"rejected"===e.status);b.length?(d.updateStatus(p.default.DownloadFailed),y.default.alert($("<div/>").addClass("error-download-multiple-files").append($("<span/>").text(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.error-download-multiple-files")))).append($("<ul/>").append(b.map(e=>{let{file:t,error:{message:n=""}={}}=e;return $("<li/>").html("".concat(t.name).concat(n?": "+n:""))}))))):d.updateStatus(p.default.Downloaded)},T.prototype.navigateToFolder=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.getAvailableFileTypesFilter();this._navigateDriveToUserFolderOrRoot(e);const o=this.getAvailableFileTypesFilter();this._clearFileFiltersInCaseAvailableFiltersDoesNotMatch(n,o),t&&this.updateFilesList(!0,!1);var i=this.SELECTION.indexOf(e);i>-1&&this.SELECTION.splice(i,1);var a=this.TEMP_SELECTION.indexOf(e);a>-1&&this.TEMP_SELECTION.splice(a,1),this.SELECTION.length<1&&this.view.resetSelection()},T.prototype._clearFileFiltersInCaseAvailableFiltersDoesNotMatch=function(e,t){i.GUtil.equals(e,t,!0)||this.clearAllFileTypesFromSelectedFilter()},T.prototype._navigateDriveToUserFolderOrRoot=function(e){this._isUserAllowedToOpenTheFolder(e)||(e=this.drive.getRootFolder()),this.drive.setCurrentFolder(e)},T.prototype._isUserAllowedToOpenTheFolder=function(e){return!0},T.prototype.addFolder=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.view.addFolder(this.updateCloudItemForUserPermission(e),t)},T.prototype.addCustomFolder=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.view.addCustomFolder(this.updateCloudItemForUserPermission(e),t)},T.prototype.getSort=function(){let e=this.getCurrentAscend()?"":"-";return e+=this.getCurrentSortType(),e},T.prototype.hasMoreItemsToLoad=function(){return-1!==this.CURRENT_FILE_LOAD||this.drive.hasMoreItemsToLoad()},T.prototype._sortFilesByMimeType=function(e){if(0===this.drive.getSelectedFilterForFileTypes().length)return e;return function(e){let t={};e.forEach(e=>{let n=e.getMimeType();t[n]=t[n]||[],t[n].push(e)});let n=[];return Object.values(t).forEach(e=>{n=n.concat(e)}),n}(e)},T.prototype._displayRecentFiles=async function(){let e;if(this.isRootFolder()&&!this._showExampleFiles)try{e=await this.drive.fetchRecentFiles(),e=this._sortFilesByMimeType(e),e&&(this.view.toggleRecentFiles(!!e&&e.length>0),e.forEach(e=>{this.drive.isItemAllowedToBeRendered(e,!0)&&this.addFile(e,!0),this.drive.itemRequiresLazyUpdate(e).then(t=>{t&&this.drive.getItemLazyUpdate(e).then(e=>{this.addFile(e,!0,!1,!0)})})}))}catch(e){throw new Error(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.error-fetching-files")))}finally{this._showRecentFiles=!!e&&e.length>0}else this._showRecentFiles=!1},T.prototype.buildDepth=async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!gDesigner.getApplicationManager().isOpenFromCloudEnabled())return this.view.toggleLoading(!1),Promise.reject();var n=this;if(this.BUILD_IN_PROGRESS)return Promise.reject(new w.default);async function o(e){let a=!0;try{var r,s=[];let o=n.getSort();var l=n.view.getSearchValue();if(l){if(n.hasMoreItemsToLoad()){try{s=await n.drive.fetchFiles(l,n.CURRENT_FILE_LOAD,o)}catch(e){throw new Error(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.error-fetching-files")))}r=(s=n._sortFilesByMimeType(s)).length,n._updateCurrentFileLoad(r)}s.forEach(e=>{e._rootPath="/ ".concat(n._getFullPathNames(e).join(" / ")),n.addFile(e),n.drive.itemRequiresLazyUpdate(e).then(t=>{t&&n.drive.getItemLazyUpdate(e).then(e=>{n.addFile(e,!1,!1,!0)})})}),e&&n._buildFolder(t)}else{if(n.hasMoreItemsToLoad()&&!n._showExampleFiles){try{await n.drive.getPreviousSelectedFolder()||(a=!1),r=(s=await n.drive.fetchFiles(null,n.CURRENT_FILE_LOAD,o)).length,n.isSaveMode()||n._isDashboard||(s=s.concat(await n.drive.loadExampleFiles())),s=n._sortFilesByMimeType(s)}catch(e){if(console.error(e),!(e instanceof h.default.CloudException&&e.code===h.default.ExceptionCode.InvalidCredentials)){const t=e&&e.message?e.message:i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.error-fetching-files"));throw new v.default(t)}await n.setCloudDrive(E),r=(s=await n.drive.fetchFiles(null,n.CURRENT_FILE_LOAD,o)).length,n.isSaveMode()||n._isDashboard||(s=s.concat(await n.drive.loadExampleFiles())),s=n._sortFilesByMimeType(s)}n._updateCurrentFileLoad(r)}if(await n._displayRecentFiles(),e&&(n._showEmptyPanel=!n._showExampleFiles&&!!n.drive.getDefaultEmptyMessage()&&n.isRootFolder()&&!n._showRecentFiles&&0===r&&!(await n.drive.hasFolders()&&!n.isRootFolder()),n._showExampleFiles&&(s=await n.drive.loadExampleFiles()),0===s.length&&(n._showEmptyPanel=!1),n._buildFolder(t)),n.view.removeExampleFiles(),s.forEach(e=>{(n.drive.isItemAllowedToBeRendered(e)||n._showExampleFiles)&&n.addFile(e,!1,n._showExampleFiles||n._showEmptyPanel),n.drive.itemRequiresLazyUpdate(e).then(t=>{t&&n.drive.getItemLazyUpdate(e).then(e=>{n.addFile(e,!1,n._showExampleFiles,!0)})})}),n.view.toggleRecentFiles(n._showRecentFiles),n.view.toggleExampleFiles(n._showExampleFiles),1===n.SELECTION.length&&e)n.view.scrollToSelectedElement(n.SELECTION[0])||n.view.resetSelection()}n.view.updateControls(e)}catch(e){return console.error(e),y.default.alert("".concat(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.loading-failed")),":<br />").concat(e&&e.message||e||"")),n.view.toggleLoading(!1),Promise.reject()}return n.view.toggleLoading(!1),n.view.shouldFilesBeRequested()&&n.hasMoreItemsToLoad()&&await o(!1),Promise.resolve(a)}if(this.view.toggleLoading(!0),this.hasMoreItemsToLoad()){this.BUILD_IN_PROGRESS=!0;try{const i=await o(e);if(n.view.toggleFolders(n._hasFolders&&!n._showExampleFiles),t&&i){var a=await n.drive.getPreviousSelectedFolder();a&&!n.drive.isRootFolder(a)&&await n.view.navigateToFolder(a).catch(()=>n.view.navigateToFolder(n.drive.getRootFolder()))}}finally{this.BUILD_IN_PROGRESS=!1}}this.view.toggleLoading(!1)},T.prototype._buildFolder=function(e){if(!e)return;if(this._showExampleFiles)return;this.addFolder(this.drive.getRootFolder(),null);const t=[this.drive.getRootFolder()];if(!this.isSaveMode()){const e=this._getSharedWithMeFolder();e&&this.addCustomFolder(e,null)}this._hasFolders=!!t&&t.length>0},T.prototype._getSharedWithMeFolder=function(){return null},T.prototype._updateCurrentFileLoad=function(e){let t;t=e>0?e<this.getQueryLimit()?-1:this.CURRENT_FILE_LOAD+e:-1,this.CURRENT_FILE_LOAD=t},T.prototype.getCloudSettingsById=function(e){return this.CLOUD_SETTINGS.find(t=>{let{id:n}=t;return n===e})},T.prototype.updateCloudItemForUserPermission=function(e){return gDesigner.getApplicationManager().isOnlyFileOpenFromCloudEnabled()&&e&&e instanceof C?(e.setPermissions(Object.values(C.Permission),!1),e.setPermission(C.Permission.Open),e):e},T.prototype.getDefaultCloudSettings=function(){return this.CLOUD_SETTINGS.find(e=>!!e.default)},T.prototype.getCloudSettings=function(){return this.CLOUD_SETTINGS},T.prototype.getCurrentDriveId=function(){return this._currentDriveId},T.prototype.getCurrentDriveSettings=function(){return this.getCloudSettingsById(this.getCurrentDriveId())},T.prototype.setCloudDrive=async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)throw new Error(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.error-incorrect-cloud-drive-settings")));this.view&&this.view.toggleLoading(!0);const n=A.find(t=>t.type===e.type);if(n.pro&&!gDesigner.isEnabledProFeatures())return void gDesigner.handlePROFeatureInterruption();const o=this.drive,r=this.getCurrentDriveId()?this.getCloudSettingsById(this.getCurrentDriveId()):null;try{switch(e.type){case"googledrive":this.drive=new l.GGoogleDrive(void 0,e.id),await this.drive.install(),await this.drive.signIn(),this.view=new a.GFilesPanelViewNative(this.panel,this),this.view.setPermission(a.GFilesPanelViewBase.Permission.CreateFolder,!1);break;default:this.drive=l.GCloudDrive.getInstance(),this.view=new a.GFilesPanelViewNative(this.panel,this)}this._currentDriveId=e.id;const n={activeSettingsId:e.id};if(t&&gContainer.setProperty(T.DriveAccountsActiveSettingsName,n),this.drive.setQueryLimit(this.getQueryLimit()),this.drive.setDriveSettings(this._driveSettings),this.view.relayout(),this.updateFilesList(),this.drive.hasUserProfile()){var s=await this.drive.getUser();s&&this.view.updateUserDetails(s)}o&&o.removeEventListener(h.default.DriveEvent,this._handleDriveEvent,this),this.drive.addEventListener(h.default.DriveEvent,this._handleDriveEvent,this)}catch(e){var c;throw e&&e instanceof v.default&&(c=e),await this._setCorrectCloud(o,r),this.view&&this.view.toggleLoading(!1),c||Error(e.message||i.GLocale.get(new i.GLocaleKey("GCommonNames","text.loading-failed")))}},T.prototype._setCorrectCloud=async function(e,t){e?await this.setCloudDrive(t):await this.setCloudDrive(E)},T.prototype._handleDriveEvent=async function(e){if(e.type===h.default.DriveEvent.Type.UserUpdated){if(this.drive.hasUserProfile()){var t=await this.drive.getUser();t&&this.view.updateUserDetails(t)}}else if(e.type===h.default.DriveEvent.Type.FolderSwitchRequired){const{folder:t}=e.data;this.drive.isRootFolder(t)?(this.isRootFolder()||this.navigateToRoot(!1),this.updateFilesList(!0,!0)):(this.drive.setCurrentFolder(t),this.updateFilesList(!0,!0),this.view.navigateToFolder(t))}},T.prototype.getCreateCloudAccountOptions=async function(){await this.updateCloudSettings();return this.getCloudSettings().some(e=>"googledrive"===e.type)?S.filter(e=>"googledrive"!==e.type):S},T.prototype.updateCloudSettings=function(){var e=this;return gContainer.getProperty(e.accountSettingsKey).then((function(t){let n=t?e._stringToSettings(t):[];return n instanceof Array||(n=[]),n=n.filter(e=>{var t=A.find(t=>e.type===t.type);return t.pro&&gDesigner.isEnabledProFeatures()||!t.pro}),e.CLOUD_SETTINGS=n.concat([E]),!0}))},T.prototype.getDefaultExtensionForSave=function(){return this.drive.getDefaultFileFormat().ext.toUpperCase()},T.prototype.updateFilesList=async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=Math.random();this.CURRENT_UPDATE_OPERATION_ID=n;const o=this.view.getSearchValue();if(await this._waitForBuildToFinish(),n===this.CURRENT_UPDATE_OPERATION_ID&&o===this.view.getSearchValue()){e&&t?this.view.clearFilesAndFolders():this.view.clearFiles(),this.CURRENT_FILE_LOAD=0,this.view.toggleEmptyPanel(!1);try{await this.buildDepth(e,t)}catch(e){return void console.warn(e)}this.view.toggleEmptyPanel(this._showEmptyPanel),this.view.toggleExampleFiles(this._showExampleFiles||this._showEmptyPanel),this.view.toggleRecentFiles(this._showRecentFiles),e&&this.view.updateLayout()}else e&&this.view.updateLayout()},T.prototype._waitForBuildToFinish=async function(){for(;this.BUILD_IN_PROGRESS;)await(0,r.sleep)(200)},T.prototype.search=function(){this.updateFilesList(!1,!1)},T.prototype.addToSelection=function(e){if(0===this.SELECTION.length&&this.TEMP_SELECTION.length>0&&(this._newClipBoard=!0),this.SELECTION.indexOf(e)<0){if(this.SELECTION.length)for(var t=0;t<this.SELECTION.length;t++)this.SELECTION[t].getId()===e.getId()&&this.SELECTION.splice(t,1);this.SELECTION.push(e)}},T.prototype.selectionHasFiles=function(){for(var e=0,t=this.SELECTION.length;e<t;e++)if(this.drive.isFileSupported(this.SELECTION[e]))return!0;return!1},T.prototype.removeFromSelection=function(e){var t=this.SELECTION.indexOf(e);t>-1&&this.SELECTION.splice(t,1),0===this.SELECTION.length&&this._newClipBoard&&(this._newClipBoard=!1)},T.prototype.resetSelection=function(){this.SELECTION=[],this._newClipBoard=!1},T.prototype._resetViewSelection=function(){this.view.resetSelection()},T.prototype.isMultiSelectionEnabled=function(){return!0},T.prototype._addToClipboard=function(){this._newClipBoard&&(this.resetClipboard(d.GFilesPanelClipboardModes.COPY),this.resetClipboard(d.GFilesPanelClipboardModes.CUT),this._newClipBoard=!1),this.TEMP_SELECTION=this.TEMP_SELECTION.concat(this.SELECTION),this.view.addToClipboard(this.MODE)},T.prototype.resetClipboard=function(e){this.TEMP_SELECTION=[],this._newClipBoard=!1,this.view.resetClipboard(e||this.MODE)},T.prototype.performCopyPaste=function(e){var t=this;this.isClipboardModeCopy(e)?(gDesigner.stats("filespanel_paste-from-copy_cloud"),this.view.toggleLoading(!0),this.SELECTION[0]&&this.drive.setCurrentFolder(this.SELECTION[0]),this.drive.copyPaste(this.TEMP_SELECTION).then(()=>{const e=this.MODE;this.MODE=d.GFilesPanelClipboardModes.DEFAULT,t.view.resetSelection(),t.resetClipboard(e),t.updateFilesList()}).catch(e=>{let t=i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.error-moving"));e&&e.cloud&&e.message&&e.message.trim()&&(t=e.message),y.default.alert(t),this.view.toggleLoading(!1),console.error(e)})):(this.logStatsForCurrentFilesSelection("filespanel_copy_cloud","filespanel_copy_cloud-multiple"),this.MODE=d.GFilesPanelClipboardModes.COPY,this._addToClipboard())},T.prototype.performCutPaste=function(e){var t=this;this.isClipboardModeCut(e)?(gDesigner.stats("filespanel_paste-from-cut_cloud"),this.view.toggleLoading(!0),this.SELECTION[0]&&this.drive.setCurrentFolder(this.SELECTION[0]),this.drive.cutPaste(this.TEMP_SELECTION).then(()=>{const e=this.MODE;this.MODE=d.GFilesPanelClipboardModes.DEFAULT,t.view.resetSelection(),t.resetClipboard(e),t.updateFilesList()}).catch(e=>{let t=i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.error-moving"));e&&e.cloud&&e.message&&e.message.trim()&&(t=e.message),y.default.alert(t),this.view.toggleLoading(!1),console.error(e)})):(this.logStatsForCurrentFilesSelection("filespanel_cut_cloud","filespanel_cut_cloud-multiple"),this.MODE=d.GFilesPanelClipboardModes.CUT,this._addToClipboard())},T.prototype.performFileMove=function(e,t){this.view.toggleLoading(!0),gDesigner.stats("filespanel_move"),this.drive.fileMove(e,t).then(()=>{this.view.toggleLoading(!1),this.view.resetSelection(),this.updateFilesList()}).catch(e=>{let t=i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.error-moving"));e&&e.cloud&&e.message&&e.message.trim()&&(t=e.message),y.default.alert(t),this.view.toggleLoading(!1),console.error(e)})},T.prototype.deleteSelection=function(){var e=this;return this.view.toggleLoading(!0),async function(){try{for(var t=0;t<e.SELECTION.length;++t){var n=e.SELECTION[t];await e.drive.deleteItem(n),gDesigner.hasEventListeners(h.default.DriveEvent)&&gDesigner.trigger(new h.default.DriveEvent(null,h.default.DriveEvent.Type.FileDeleted,n))}}catch(t){return y.default.alert(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.error-deleting"))),e.view.toggleLoading(!1),void console.error(t)}if(e.SELECTION[0].getType&&e.SELECTION[0].getType()===C.Type.Folder){let t=null;if(e.SELECTION[0].getParentId()&&e.panel.find(".g-gravit-folder").each((n,o)=>{const i=$(o).data("node");i.id===e.SELECTION[0].getParentId()&&(t=i)}),!t){let n=$(e.panel.find(".g-gravit-folder")[0]);t=n&&n.data("node")}t&&e.drive.setCurrentFolder(t)}e._triggerFileDeleted(e.SELECTION),e.view.toggleLoading(!1),e.view.resetSelection(),e.updateFilesList()}()},T.prototype.sort=function(){this.updateFilesList()},T.prototype._minimizeWindow=function(){this.view.minimizeWindow(),gContainer&&gContainer.setProperty("GFilesPanel.maximized",!1),this.view.updateLayout()},T.prototype._maximizeWindow=function(e){this.view.maximizeWindow(),gContainer&&gContainer.setProperty("GFilesPanel.maximized",!0),this.hasMoreItemsToLoad()&&this.view.shouldFilesBeRequested()?this.buildDepth(e,!1).catch(e=>{}):this.view.updateLayout()},T.prototype.toCardView=function(){this.view.toCardView(),gContainer&&gContainer.setProperty("GFilesPanel.isFilesListStyle",!1)},T.prototype.toListView=function(){this.view.toListView(),gContainer&&gContainer.setProperty("GFilesPanel.isFilesListStyle",!0)},T.prototype.getCurrentFolder=function(){return this.drive.getCurrentFolder()},T.prototype.isRootFolder=function(){return this.drive.isRootFolder()},T.prototype.getFolders=function(){return this.drive.getFolders()},T.prototype.isItemSelected=function(e){if(this.SELECTION.length<1)return!1;for(let t=0,n=this.SELECTION.length;t<n;++t){if(this.SELECTION[t].id===e.id)return!0}return!1},T.prototype.isItemInClipboard=function(e){if(this.TEMP_SELECTION.length<1)return!1;for(let t=0,n=this.TEMP_SELECTION.length;t<n;++t){if(this.TEMP_SELECTION[t].id===e.id)return!0}return!1},T.prototype.isSaveMode=function(){return this._isSaveMode},T.prototype.getSelection=function(){return this.SELECTION},T.prototype.getTempSelection=function(){return this.TEMP_SELECTION},T.prototype.getDocumentToSave=function(){return this._documentToSave},T.prototype.getSortType=function(){return this.drive.getSortType()},T.prototype.setSortType=function(e){return this.drive.setSortType(e),this},T.prototype.getSelectedFilterForFileTypes=function(){return this.drive.getSelectedFilterForFileTypes()},T.prototype.addFileTypeToSelectedFilter=function(e){const t=this.drive.getAvailableFileTypesFilter().find(t=>t.type===e);gDesigner.stats("filespanel_format-filter_on",t.id),this.drive.addFileTypeToSelectedFilter(e)},T.prototype.clearAllFileTypesFromSelectedFilter=function(){gDesigner.stats("filespanel_format-filter_clear"),this.view.clearFileTypeFilterState(),this.drive.clearAllFileTypesFromSelectedFilter()},T.prototype.deleteFileTypeFromSelectedFilter=function(e){const t=this.drive.getAvailableFileTypesFilter().find(t=>t.type===e);gDesigner.stats("filespanel_format-filter_off",t.id),this.drive.deleteFileTypeFromSelectedFilter(e)},T.prototype.getAvailableFileTypesFilter=function(){return this.drive.getAvailableFileTypesFilter()},T.prototype.getSortDirection=function(){return this.drive.getSortDirection()},T.prototype.setSortDirection=function(e){return this.drive.setSortDirection(e),this},T.prototype.getClipboardMode=function(){return this.MODE},T.prototype.isClipboardModeCopy=function(e){return e?e===d.GFilesPanelClipboardModes.COPY:this.MODE===d.GFilesPanelClipboardModes.COPY},T.prototype.isClipboardModeCut=function(e){return e?e===d.GFilesPanelClipboardModes.CUT:this.MODE===d.GFilesPanelClipboardModes.CUT},T.prototype.setDefaultClipboardMode=function(){return this.MODE=d.GFilesPanelClipboardModes.DEFAULT,this},T.prototype.getUser=function(){return this.USER},T.prototype.getDefaultFilename=function(){return this.DEFAULT_FILENAME},T.prototype.getPossibleExtensions=function(){return this.drive.getSupportedExtensions().map(e=>e.toUpperCase())},T.prototype.getAvailableExtensions=function(){for(var e=!1,t=null,n=0;n<this.SELECTION.length&&!e;++n){var o=this.SELECTION[n],i=this.drive.getSupportedFileFormats().find(e=>o.type===e.type);i&&i.secondary&&(t?e=t.type!==i.type:t=i)}return t?e?[c.DEFAULT_TYPE.ext.toUpperCase()]:[c.DEFAULT_TYPE.ext.toUpperCase(),t.ext.toUpperCase()]:this.SELECTION.length?c.FILE_EXTENSIONS:[]},T.prototype.fileRequiresSourceDownload=function(e){return!this.drive.getSupportedFileFormats().some(t=>{var n=e instanceof C?e.getMimeType():e.type;const o=e.extension||e.ext||null;return t.type===n||o&&t.ext.toLowerCase()===o.toLowerCase()})},T.prototype.getUISettings=function(){return this._GUISettings},T.prototype._canDownload=function(){return!0},T.prototype._isContextMenuAvailableForFile=function(e){return!0},T.prototype.logStatsForCurrentFilesSelection=function(e,t,n){gDesigner.stats(1===this.getSelection().length?e:t,n)},T.prototype.getCurrentAscend=function(){return this.drive.getSortDirection()},T.prototype.getCurrentSortType=function(){return this.drive.getSortType()},T.prototype.getQueryLimit=()=>20,T.prototype.getSupportedVersions=function(){return[]},T.prototype.getFooterSaveDescriptionForFileExtension=function(e){return i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.info-".concat(e.toLowerCase())))},T.prototype.toString=function(){return"[Object GFilesPanel]"},T.prototype._stringToSettings=function(e){return JSON.parse((0,r.base64StringToString)(e))},T.prototype._settingsToString=function(e){return(0,r.stringToBase64String)(JSON.stringify(e))},T.prototype.manageOpenFolder=function(e,t,n){this.view.manageOpenFolder(e,t,n)},e.exports=T},function(e,t,n){"use strict";var o=n(14);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GFilesPanelViewBase",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"GFilesPanelViewNative",{enumerable:!0,get:function(){return i.default}}),t.default=void 0;var i=o(n(1522)),a=o(n(1276));t.default={GFilesPanelViewNative:i.default,GFilesPanelViewBase:a.default}},function(e,t,n){"use strict";n(17),n(540),n(22);var o=n(14);n(89),n(7),n(341),n(18),n(99),n(3),n(255),n(29),n(830),n(84),n(28);var i=n(1),a=n(13),r=o(n(1276)),s=n(1140),l=n(34),c=n(575),d=o(n(37)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var r=i?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(o,a,r):o[a]=e[a]}return o.default=e,n&&n.set(e,o),o}(n(841)),p=n(837);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}const h=n(143),{CLOUD_DIALOG:f}=n(9),{GPlatform:m}=n(13),y=n(77),{GRegex:v}=n(247),_=function(){r.default.apply(this,arguments),this._lockEnter=!1,this.panel.addClass("full-width")};i.GObject.inherit(_,r.default);var b=n(223),w=n(325);_.prototype._lockEnter=!1,_.prototype.filesPanel=null,_.prototype.createHeader=function(){var e=this,t=$("<div/>").addClass("header").appendTo(this.panel);this.renderNewFolderButton(t,()=>{var t=e.filesPanel.drive.getCurrentFolder();if(!t||e.filesPanel.drive.isRootFolder())return e.filesPanel.updateFilesList();e._cloudFolders.forEach(e=>{e.getFolder().id===(t.id||t)&&e.refresh()})});var n="";$("<div />").addClass("search-container").append($("<input />").addClass("search-field").attr("type","text").attr("size","12").attr("placeholder",i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.search-placeholder"))).on("keyup",(function(t){t.stopPropagation();var o=$(this).val().trim();o!==n&&(n=$(this).val(),gDesigner.stats("filespanel-view_execute_search",o),e.filesPanel.search(o));var i=e.panel.find(".header").find(".search-container").find(".clear-search-icon"),a=e.panel.find(".header").find(".search-container").find(".search-icon");o.length?(i.show(),a.hide()):(i.hide(),a.show())})).on("focusin",(function(){e.panel.find(".header").find(".search-container").toggleClass("g-active",!0)})).on("focusout",(function(){e.panel.find(".header").find(".search-container").toggleClass("g-active",!1)})).on("input:reset",(function(){$(this).val(""),n="",e.panel.find(".header").find(".search-container").find(".clear-search-icon").hide()})).on("keydown",(function(t){if(a.GKey.translateCode(t.key)===a.GKey.Constant.TAB){var n=$(this).val().trim();e.filesPanel.search(n),t.preventDefault(),t.stopPropagation()}}))).append($("<div />").addClass("clear-search-icon").append($("<span />").addClass("icon").addClass("gravit-icon-close")).on("click",(function(t){t.stopPropagation();var o=e.panel.find(".header").find(".search-container").find(".search-field"),i=e.panel.find(".header").find(".search-container").find(".search-icon");o.val(""),n="",e.filesPanel.updateFilesList(!1,!1),gDesigner.stats("filespanel-view_clear_search-field"),$(this).hide(),o.focus(),i.show()})).hide()).append($("<div />").addClass("search-icon").append($("<span />").addClass("icon").addClass("gravit-icon-magnifier")).on("click",(function(t){t.stopPropagation(),gDesigner.stats("filespanel-view_search_focus"),e.panel.find(".header").find(".search-container").find(".search-field").focus()}))).appendTo(t),$("<div/>").addClass("fake").appendTo(t),this.renderSortButton(t);const o=this.filesPanel.getAvailableFileTypesFilter();"function"==typeof u.default&&this.filesPanel.drive instanceof u.default&&o&&o.length>1&&this.renderFileTypeFilterButton(t),this.renderGridStyleButtons(t),this._buildContextMenu(),this._buildAdditionalContextMenu()},_.prototype._permissionChanged=function(){r.default.prototype._permissionChanged.call(this);const e=this.panel.find(".header").find(".new-folder");if(this._isCreateFolderEnabled())e.attr("data-title",i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.new-folder-tooltip"))),e.removeClass("g-disabled");else{const t=i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.option-isnt-available"),"This option isn’t available for Cloud Drives");e.attr("data-title",t),e.addClass("g-disabled")}},_.prototype.addSearchBar=function(e){$("<div />").addClass("g-search-no-results").hide().text(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.search-not-found"))).appendTo(e)},_.prototype.createFooter=function(e){var t=$("<div/>").addClass("footer").appendTo(this.panel);if(this.filesPanel.isSaveMode()){var n=$("<div />").addClass("save-form-container").appendTo(t);const a=$("<div/>").addClass("input-container").appendTo(n);var o=$("<input/>").addClass("file-name").val(e?(0,l.decodeHTML)(e):i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.untitled"))).appendTo(a);const r=m.webBrowser===m.constructor.WebBrowser.Safari,s=gContainer.getRuntime()===y.Runtime.IPad;(r||s)&&o.on("click",()=>{o.focus()}),$("<div/>").addClass("g-button").addClass("cloud-button").addClass("cancel").attr("data-title",i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.cancel-tooltip"))).html(i.GLocale.get(new i.GLocaleKey("GLocale","cancel"))).on("click",function(e){e.stopPropagation(),this.filesPanel.handleCancelSave()}.bind(this)).appendTo(a),this.filesPanel.setKeyListener((e,t)=>{if(13===e&&!this._lockEnter){const e=this._getSelectedExtension(),n=this._getSaveOptions();if(!this.filesPanel._canDownload(e))return;t.preventDefault(),this.filesPanel.handleSave(o.val(),e,n)}}),gDesigner.getApplicationManager().isSavingToCloudEnabled()&&gDesigner.getApplicationManager().isSavingAsEnabled()&&$("<div/>").addClass("g-button").addClass("cloud-button").addClass("primary").addClass("save").append($("<span/>").addClass("icon").addClass("gravit-icon-w-save")).append($("<span/>").addClass("label").text(i.GLocale.get(new i.GLocaleKey("GSaveAction","title")))).on("click",function(e){e.stopPropagation();const t=this._getSelectedExtension(),n=this._getSaveOptions();this.filesPanel._canDownload(t)&&this.filesPanel.handleSave(o.val(),t,n)}.bind(this)).appendTo(a),this._setSelectedExtension(u.DEFAULT_TYPE.ext),this.panel.find(".g-items-container").addClass("g-items-container-footer"),o.focus()}else t.hide()},_.prototype._getSelectedExtension=function(){const e=this.panel.find(".save-form-container").find("option:selected").val();if(!e)return this.filesPanel.getDefaultSaveFormat()&&this.filesPanel.getDefaultSaveFormat().ext||u.DEFAULT_TYPE.ext;const t=this.filesPanel.getPossibleExtensions();return(0,l.getExtensionFromString)(e,t)||u.DEFAULT_TYPE.ext},_.prototype._getSelectedVersion=function(){const e=this.panel.find(".save-form-container").find("option:selected").val();if(!e)return Number(this.filesPanel.getDefaultVersionForSave());const t=this._getVersionFromValue(e);return Number(t||this.filesPanel.getDefaultVersionForSave())},_.prototype._setSelectedExtension=function(e){this.panel.find('select.file-extension > option[value="'.concat(e.toUpperCase(),'"]')).prop("selected",!0)},_.prototype._removeCDRExtensionFromFileName=function(e){return e.endsWith(".cdr")?e.replace(new RegExp(".cdr$"),""):e},_.prototype.addFile=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=this._removeCDRExtensionFromFileName(e.name);var a=this,r=this.filesPanel.isItemSelected(e),c=this.filesPanel.isItemInClipboard(e),d=null;d=t?this.panel.find(".g-recent-files-list"):n?this.panel.find(".g-example-files-list"):this.panel.find(".g-files-list");var u=$("<div/>").attr("draggable",e.hasPermission(h.Permission.CutPaste)).attr("id",e.id).addClass("g-gravit-file").addClass("g-cloud-element").addClass(e.id).addClass(r?"selected":"").addClass(c&&this.filesPanel.isClipboardModeCut()?"cut":"").data("node",e).attr("data-title",e._rootPath?e._rootPath:o).on("dragstart",(function(t){if(a._isDuringRenaming())return t.stopPropagation(),void t.preventDefault();$(this).addClass("dragging"),$(".g-tooltip").toggleClass("visible",!1);const n=t.dataTransfer||t.originalEvent.dataTransfer,o=document.createElement("div"),i=$(o);i.addClass("drag-ghost-item"),i.text(e.name),document.getElementById(e.id).appendChild(o),n.setDragImage(o,30,15),n.setData("text/plain",JSON.stringify(e))})).on("drag",(function(e){if(a._isDuringRenaming())return e.stopPropagation(),void e.preventDefault();$(".g-tooltip").toggleClass("visible",!1)})).on("dragend",(function(){$(this).removeClass("dragging")})).on("dblclick",function(t){if(t.stopPropagation(),t.preventDefault(),!a._isDuringRenaming())return this.filesPanel.handleFileDblClick(e),!1}.bind(this)).on("click",function(n){n.stopPropagation(),n.preventDefault(),a._isDuringRenaming()||(this.filesPanel.handleFileClick(e,u),this._updateFileInfoPanel(e,u,t))}.bind(this)).on("contextmenu",function(t){t.stopPropagation(),a._handleFileContextMenu(e,u,t)}.bind(this));e.example&&u.addClass("g-gravit-example-file");var g=d.find("#".concat(e.id));g.length?$(g).replaceWith(u):u.appendTo(d);var m,y,v=$("<div />").addClass("image-container").appendTo(u);this.filesPanel.getSortType()===p.GFilesPanelSortTypes.CREATED?(m=(0,s.dateToFilePreviewFormat)(e.created?e.created:e.updated),y=i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.created"))):(m=(0,s.dateToFilePreviewFormat)(e.updated?e.updated:e.created),y=i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.updated")));var _=e instanceof h&&e.getSize(),b="";if(_&&f.SHOW_FILE_SIZE_INFO){var w=(0,l.getSizeInfo)(_);w.gb?b+=(b?"":" ")+"".concat(w.gb," GB"):w.mb?b+=(b?"":" ")+"".concat(w.mb," MB"):w.kb?b+=(b?"":" ")+"".concat(w.kb," KB"):b+=(b?"":" ")+"< 1 KB"}var C=null;e instanceof h&&(C=e.getPreviewURL()),C||(C=e.url_t||e.url_s),C?v.css("background-image",'url("'.concat(C,'")')):v.addClass("default-preview");var x=$("<div/>").addClass("name-container").appendTo(u);$("<div />").addClass("file-name-container").append($("<div />").addClass("name").text(o)).append($("<input />").attr("type","text").css("display","none").addClass("file-name").val(o).css("width",$(this).parent().find(".name").outerWidth())).appendTo(x),this._updateFileNamePreview(u,e),$("<div />").addClass("file-updated").attr("data-title","".concat(y," ").concat(m).concat(b?", "+b:"")).text("".concat(y," ").concat(m).concat(b?", "+b:"")).appendTo(u);var S=$("<div />").addClass("file-top-tile").appendTo(u);return this._isContextMenuAvailableForFile(e)&&$("<div />").addClass("file-context").append($("<span />").addClass("icon").addClass("gravit-icon-w-kebab").on("mouseover",(function(e){e.stopPropagation()}))).on("click",function(t){t.stopPropagation(),a._handleFileContextMenu(e,u,t)}.bind(this)).on("dblclick",(function(e){e.stopPropagation()})).on("mouseover",(function(e){e.stopPropagation()})).appendTo(S),e.hasPermission(h.Permission.Open)&&!this.filesPanel.isSaveMode()&&$("<button />").addClass("open-design-button g-button cloud-button").text(i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.open-design"))).on("click",t=>{t.stopPropagation(),e.example||gDesigner.stats("filespanel-view_open_cloudfile"),this.filesPanel.openFile(e)}).appendTo(S),u},_.prototype._handleFileContextMenu=function(e,t,n){this._isContextMenuAvailableForFile(e)&&(gDesigner.stats("filespanel-view_context_cloudfile"),this.filesPanel.isItemSelected(e)||this.resetSelection(!0),this._addToSelection(t),this._openContextMenuForEventPosition(n))},_.prototype._updateFileNamePreview=function(e,t){const n=this._removeCDRExtensionFromFileName(t.name);var o=$(e).find(".file-name-container");o.attr("data-ending","..."+n.substr(n.length-4));var i=o.find(".name");i.text(n),(e=>e&&e.offsetWidth<e.scrollWidth)(i[0])&&o.addClass("ending")},_.prototype.addFolder=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._factoryFolder(e,t).getHTMLContainer().appendTo(this.panel.find(".g-folders-list.main"))},_.prototype.addCustomFolder=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._factoryFolder(e,t).getHTMLContainer().appendTo(this.panel.find(".g-folders-list.custom-folders")),"shared_files_with_me"===e.id&&("shared_files_with_me"===this.filesPanel.drive.getCurrentFolder().id?this.hideFileTypeFilterButton():this.displayFileTypeFilterButton())},_.prototype.scrollToSelectedElement=function(e){var t=null;return this.panel.find(".g-files-list").find(".g-gravit-file").each(function(n,o){if($(o).data("node").id===e.id)return t=$(o).data("node"),setTimeout(()=>{this.panel.find(".g-items-container").scrollTop($(o).position().top)}),!1}.bind(this)),t},_.prototype.updateControls=function(e){this.panel.find(".g-gravit-folder").length>0?this.panel.find(".g-folders-list").show():this.panel.find(".g-folders-list").hide();const t=this.panel.find(".header"),n=t.find(".new-folder"),o=t.find(".back");this.getSearchValue()?(n.addClass("g-disabled"),o.addClass("g-hidden"),this.panel.find(".g-files-list").find(".g-gravit-file").length<1&&this._showNoResultsInfo()):this._isCreateFolderEnabled()&&n.removeClass("g-disabled"),this.filesPanel.isRootFolder()?o.addClass("g-hidden"):o.removeClass("g-hidden"),e&&this.filesPanel.isSaveMode()&&this.panel.find(".footer").find("input.file-name").select()},_.prototype._showNoResultsInfo=function(){this.panel.find(".g-search-no-results").show()},_.prototype._checkItemPermission=function(e,t){return(e instanceof Array?e:[e]).every(e=>e instanceof h?e.hasPermission(t):(console.error("Wrong check for file permission",e),!0))},_.prototype._openContextMenuForEventPosition=function(e){var t=e.pageX,n=e.pageY;this._contextMenu.open({x:t,y:n})},_.prototype._renameFile=function(e,t,n){const o=this._removeCDRExtensionFromFileName(e.name),r=this;r.toggleLoading(!1);var s=t.find("input");s.off("focusout"),s.off("keypress");var l=t.find("div.name");t.addClass("renaming"),$(t).attr("data-title",o),l.text(o),s.css("width",l.outerWidth()),s.val(o),$(t).find(".file-name-container").removeClass("ending"),s.css("width",l.outerWidth());var c=s.val(),u=!1;s.show(),l.hide(),s.focus();const p=t=>{let n;return n=e.getType()===h.Type.File?i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.file-already-exists-on-current-location")).replace("%filename",'"'.concat(t,'"')):i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.folder-already-exists-on-current-location")).replace("%foldername",'"'.concat(t,'"')),new Promise(e=>{d.default.confirm(n,t=>e(!!t),null,null,!1,!0,!0)})};var g=async function(){try{s.hide(),l.show();let o,a=s.val();if(e.getType()===h.Type.File&&!r._isUserInputValidFileName(a))return d.default.alert(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.new-file-name-invalid"))),void s.val(c);if(a.trim()&&a.trim()!==e.name){r.toggleLoading(!0);try{let i=0;const s=e.ext||e.extension;if(r.filesPanel.drive.supportsSaveCollisionFlow())if(e.getType()===h.Type.File){if(await r.filesPanel.drive.fileExists(a,s,e.parent||r.filesPanel.drive.getRootFolder())&&!await p(a))return r._renameFile(e,t,n);if(r.filesPanel.drive.requiresOverwriteCollisionHandling())for(o=a;await r.filesPanel.drive.fileExists(o,s,e.parent||r.filesPanel.drive.getRootFolder());)o="".concat(a," (").concat(++i,")")}else{if(await r.filesPanel.drive.folderExists(a,e.parent||r.filesPanel.drive.getRootFolder())&&!await p(a))return r._renameFile(e,t,n);if(r.filesPanel.drive.requiresOverwriteCollisionHandling())for(o=a;await r.filesPanel.drive.folderExists(o,e.parent||r.filesPanel.drive.getRootFolder());)o="".concat(a," (").concat(++i,")")}o||(o=a),await r.filesPanel.renameItem(e,o)}catch(e){return r.toggleLoading(!1),e&&e.badName?void d.default.alert(e.message):(s.val(c),void d.default.alert(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.error-renaming"))))}!function(t){const n=gDesigner.getWindows(),o=n&&n.getWindows();if(!o||!o.length)return;for(let n=0,i=o.length;n<i;n++){let i=o[n].getDocument();if(i&&i.getId()===e.id){i.setTitle(t);break}}}(o),e.name=o,s.css("width",l.outerWidth());const u=t=>{$(t).data("node").name=o,$(t).attr("data-title",o),$(t).find("div.name").text(o),r._updateFileNamePreview(t,e)};e.getType()===h.Type.Folder?u(t):$.each(r._rightSide.find(".".concat(e.id)),(e,t)=>{u(t)}),r._fileInfoPanelIsOpen&&r._updateFileInfoPanel(e,t,!1),r.filesPanel._triggerFileRenamed(e),r.toggleLoading(!1),n&&n()}else s.val(c)}catch(e){throw console.log("err changing the name",e),e}};s.on("focusout",(function(){u||(g(),u=!0),t.removeClass("renaming")})).on("keypress",(function(e){const n=e.which||e.charCode||e.keyCode;a.GKey.translateKey(n)!==a.GKey.Constant.ENTER||u||(gDesigner.stats("filespanel-view_update_cloudfile-name"),g(),u=!0),t.removeClass("renaming")}))},_.prototype._updateMenuItemCaption=function(e,t){this.filesPanel.getSelection().length>1?e.setCaption(i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.selection-multiple")).replace("%selection",t).replace("%multiple",i.GLocale.get(new i.GLocaleKey("GFilesPanel","text.multiple")))):e.setCaption(t)},_.prototype._isFolderSelected=function(){var e=this.filesPanel.getSelection();return 1===e.length&&e[0].getType()===h.Type.Folder},_.prototype._getNativeMenuItems=function(){return[{caption:i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.open")),click:()=>{if(this._isFolderSelected()){gDesigner.stats("filespanel-view_open_cloudfolder");var e=this.filesPanel.getSelection(),t=this._getSelectedFolderUIElement();this.filesPanel.navigateToFolder(e[0]),this.filesPanel.manageOpenFolder(t,e[0]),this._expandSelectedFolder()}else{gDesigner.stats("filespanel-view_opencontext_cloud");e=this.filesPanel.getSelection();this.filesPanel.openFile.call(this.filesPanel,e[0])}},update:e=>{var t=this.filesPanel.getSelection();e.sender.setEnabled(1===t.length),e.sender.setVisible(!(0,c.hasRootFolderInSelections)(this.filesPanel.drive,t)&&this._checkItemPermission(t,h.Permission.Open))}},{caption:i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.rename")),click:()=>{var e=this.filesPanel.getSelection();gDesigner.stats("filespanel-view_rename_cloud");const t=this._isFolderSelected()?$(".g-gravit-folder.selected"):this._rightSide.find(".selected").eq(0);this._renameFile(e[0],t)},update:e=>{var t=this.filesPanel.getSelection();e.sender.setEnabled(1===t.length),e.sender.setVisible(!(0,c.hasRootFolderInSelections)(this.filesPanel.drive,t)&&this._checkItemPermission(t,h.Permission.Rename))}},{caption:i.GLocale.get(new i.GLocaleKey("GPasteAction","title")),click:()=>{this.filesPanel.isClipboardModeCut()?this.filesPanel.performCutPaste():this.filesPanel.performCopyPaste()},update:e=>{var t=this.filesPanel.getSelection();const n=this.filesPanel.isClipboardModeCut()||this.filesPanel.isClipboardModeCopy();e.sender.setEnabled(n),e.sender.setVisible(this._checkItemPermission(t,h.Permission.CutPaste)||(0,c.hasRootFolderInSelections)(this.filesPanel.drive,t))}},{caption:i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.copy")),click:()=>{this.filesPanel.performCopyPaste(p.GFilesPanelClipboardModes.DEFAULT)},update:e=>{var t=this.filesPanel.getSelection();this._updateMenuItemCaption(e.sender,i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.copy"))),e.sender.setEnabled(t.length>0),e.sender.setVisible(!(0,c.hasRootFolderInSelections)(this.filesPanel.drive,t)&&this._checkItemPermission(t,h.Permission.Copy))}},{caption:i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.cut")),click:()=>{this.filesPanel.performCutPaste(p.GFilesPanelClipboardModes.DEFAULT)},update:e=>{var t=this.filesPanel.getSelection();this._updateMenuItemCaption(e.sender,i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.cut"))),e.sender.setEnabled(t.length>0),e.sender.setVisible(!(0,c.hasRootFolderInSelections)(this.filesPanel.drive,t)&&this._checkItemPermission(t,h.Permission.CutPaste))}},{caption:i.GLocale.get(new i.GLocaleKey("GDeleteAction","title")),click:()=>{this.filesPanel.handleDelete()},update:e=>{var t=this.filesPanel.getSelection();this._updateMenuItemCaption(e.sender,i.GLocale.get(new i.GLocaleKey("GDeleteAction","title"))),e.sender.setEnabled(t.length>0),e.sender.setVisible(!(0,c.hasRootFolderInSelections)(this.filesPanel.drive,t)&&this._checkItemPermission(t,h.Permission.Delete))}},{caption:i.GLocale.get(new i.GLocaleKey("GUnshareWithMeAction","title")),click:async()=>{if(gDesigner.getShareManager().isShareProRestricted())gDesigner.handleShareFilePROFeatureInterruption();else{const e=await gDesigner.getUser();if(!e)return;const t=this.filesPanel.getSelection()[0].getId(),n=e.getUID();console.log("About to call unshare with item id: %s and user id: %s",t,n),await gApi.unshareWithUser(t,n),this._closeFileInfoPanel(),this.filesPanel.updateFilesList()}},update:e=>{var t=this.filesPanel.getSelection();this._updateMenuItemCaption(e.sender,i.GLocale.get(new i.GLocaleKey("GUnshareWithMeAction","title"))),e.sender.setEnabled(t.length>0),e.sender.setVisible(!(0,c.hasRootFolderInSelections)(this.filesPanel.drive,t)&&this._checkItemPermission(t,h.Permission.UnshareWithMe))}}]},_.prototype._buildContextMenu=function(){this._contextMenu=new b(null,"g-file-panel-context-menu"),this._setContextMenuActiveRangeSize();this._getNativeMenuItems().forEach(e=>{this._contextMenu.createAddItem(e.caption,e.click).addEventListener(w.UpdateEvent,e.update.bind(this))}),this._createContextMenuDownloadMenu()},_.prototype._buildAdditionalContextMenu=function(){},_.prototype._createContextMenuDownloadMenu=async function(){this._contextMenu.createAddItem(i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.download-title")),()=>{1===this.filesPanel.getSelection().length?gDesigner.stats("filespanel-view_download_file"):gDesigner.stats("filespanel-view_download_multiple-files"),this.filesPanel.handleDownload()}).addEventListener(w.UpdateEvent,e=>{var t=this.filesPanel.getSelection();this._updateMenuItemCaption(e.sender,i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.download-title")),t),e.sender.setEnabled(t.length>0),e.sender.setVisible(!(0,c.hasRootFolderInSelections)(this.filesPanel.drive,t)&&this._checkItemPermission(t,h.Permission.Download)&&!this._isFolderSelected())})},_.prototype.toggleFolders=function(e){this.panel.find(".g-left-side").toggleClass("g-no-display",!e)},_.prototype.getSearchValue=function(){const e=this.panel.find(".header").find(".search-container").find(".search-field").val();return e?e.trim():""},_.prototype.focusFileNameInput=function(e){this.setFileNameInputValue(e.name),this.panel.find(".footer").find("input.file-name").focus().select()},_.prototype.setFileNameInputValue=function(e){this.panel.find(".footer").find("input.file-name").val(e)},_.prototype._isDuringRenaming=function(){return!!this.panel.find(".g-gravit-file.selected.renaming").length},_.prototype._expandSelectedFolder=function(){$(".g-gravit-folder.opened .folder-state-icon.closed").click()},_.prototype.setLockEnterState=function(e){this._lockEnter=e},_.prototype._isUserInputValidFileName=function(e){return v.String.ValidFileName.test(e)},_.prototype._getSelectedFolderUIElement=function(){return $(".g-gravit-folder.g-cloud-element.selected")},e.exports=_},function(e,t,n){"use strict";n(7),n(183);const o=n(143);function i(e,t,n){var o;this._folder=e,this._isRootFolder=n,this._container=$("<div/>").addClass("g-container").data("node",e),this._element=o=$("<div/>").addClass("g-gravit-folder").addClass("g-cloud-element").attr("data-title",e.name).data("node",e).appendTo(this._container),this._childrenContainer=$("<div/>").addClass("g-children").appendTo(this._container),this._folderContainer=$("<div/>").addClass("folder-container").appendTo(o),this._folderState=$("<div />").addClass("folder-state-icon").appendTo(this._folderContainer),this._folderIcon=$("<div />").addClass("folder-icon").appendTo(this._folderContainer),$("<div />").addClass("name").text(e.name).appendTo(this._folderContainer),$("<input />").attr("type","text").css("display","none").addClass("folder-name").css("width",this._folderContainer.find(".name").outerWidth()).val(e.name).appendTo(this._folderContainer),this._parent=t,this._folderContext=$("<div/>").addClass("folder-context").append($("<span />").addClass("icon").addClass("gravit-icon-w-kebab").on("mouseover",(function(e){e.stopPropagation()}))).on("mouseover",(function(e){e.stopPropagation()})).appendTo(o),this._update()}i.prototype._isRootFolder=!1,i.prototype._parent=null,i.prototype._container=null,i.prototype._element=null,i.prototype._folderContainer=null,i.prototype._folderContext=null,i.prototype._folder=null,i.prototype._loading=!1,i.prototype._children=null,i.prototype._isOpen=!1,i.prototype._done=!1,i.prototype.isRootFolder=function(){return this._isRootFolder},i.prototype.isLoading=function(){return this._loading},i.prototype.getFolder=function(){return this._folder},i.prototype.getParent=function(){return this._parent},i.prototype.setLoading=function(e){this._loading!==e&&(this._loading=e,this._update())},i.prototype.onToggle=function(e){return this._onToggle=e,this},i.prototype.toggleState=function(){gDesigner.stats("filespanel_expand-collapse_cloudfolder"),this._folderState.removeClass("open"),this._folderState.removeClass("closed"),this._isOpen=!this._isOpen,this._update(),this._onToggle&&this._onToggle(this._isOpen)},i.prototype.isStateOpen=function(){return this._isOpen},i.prototype.update=function(){this._update()},i.prototype.setRefreshHandler=function(e){return this._refreshCallback=e,this},i.prototype.isDone=function(){return this._done},i.prototype.loadChildrenOnDemand=function(e){this.setLoading(!0);const t=(this._children||[]).length;return e(this._folder,100,t).then(e=>{this._done=e.length<100,e.length&&(this._childrenContainer.append(e.map(e=>e.getHTMLContainer())),this._children=this._children.concat(e)),this.update()}).finally(()=>{this.setLoading(!1)})},i.prototype.refresh=function(){return this.setChildren([]),this.update(),this._refreshCallback&&this._refreshCallback(this)},i.prototype._update=function(){this._children&&this._children.length?(this._folderState.addClass(this._isOpen?"open":"closed"),this._isOpen?this._childrenContainer.show():this._childrenContainer.hide()):this._childrenContainer.hide(),this._folderIcon.empty(),this._folderIcon.append($("<div />").addClass("icon").addClass(this._loading?"loading":this._folder.getIcon()||"gravit-icon-w-folder"))},i.prototype.onClick=function(e){return this._folderContainer.on("click",t=>{t.stopPropagation(),e(this._folder,this.getHTMLElement())}),this},i.prototype.onDoubleClick=function(e){return this._folderContainer.on("dblclick",t=>{t.stopPropagation(),e(this._folder,this.getHTMLElement())}),this},i.prototype.onFolderStateClick=function(e){return this._folderState.on("click",t=>{t.stopPropagation(),e(this._folder,this.getHTMLElement())}),this},i.prototype.onContext=function(e){return this._folderContext&&(this._element.on("contextmenu",t=>{t.stopPropagation(),e(this._folder,this.getHTMLElement(),t)}),this._folderContext.on("click",t=>{t.stopPropagation(),e(this._folder,this.getHTMLElement(),t)})),this},i.prototype.onFileDrop=function(e){let t=null,n=this;return this._element.on("drop",(async function(t){$(this).removeClass("drag-over");const i=t.originalEvent.dataTransfer,a=JSON.parse(i.getData("text"));var r=o.from(a);e(r,n._folder)})).on("dragover",(function(e){$(this).addClass("drag-over"),t||(t=setTimeout(()=>{n._isOpen||n._folderState.trigger("click")},1e3))})).on("dragleave",(function(e){$(this).removeClass("drag-over"),t&&clearTimeout(t),t=null})),this},i.prototype.getHTMLContainer=function(){return this._container},i.prototype.setChildren=function(e){this._children=e,this._childrenContainer.empty(),this._children&&this._children.length||(this._isOpen=!1),this._children&&this._children.length&&this._childrenContainer.append(e.map(e=>e.getHTMLContainer()))},i.prototype.getChildren=function(){return this._children},i.prototype.getHTMLElement=function(){return this._element},e.exports=i},function(e,t,n){"use strict";const o=n(1525);function i(){}i.getRenderForFile=function(e){return new o},e.exports=i},function(e,t,n){"use strict";var o=n(14);n(7),n(18),n(29);var i=n(1),a=n(1140),r=o(n(1067)),s=o(n(343)),l=n(34),c=n(9);const d=n(0),u=n(1526),p=n(1151);function g(){}d.inherit(g,u),g.prototype.render=async function(e,t){this._createUI(e),await this._updateUIForFile(e,t)},g.prototype._createUI=function(e){$("<div/>").addClass("file-preview-container").append($("<img/>").addClass("file-preview").attr("src","")).appendTo(e);const t=$("<div/>").addClass("file-button-container").appendTo(e);$("<button/>").gShareButton({clazz:"file-panel-share-button",defaultText:i.GLocale.get(new i.GLocaleKey("GFilesPanelViewBase","text.share-this-file")),stats:"filespanel-view_infoPanel_share",restrictedStats:"filespanel-view_infoPanel_nonprotriespro-share"}).appendTo(t).hide(),$("<div/>").addClass("file-name").appendTo(e),$("<div/>").addClass("file-created").appendTo(e);var n=$("<div/>").addClass("collaboration").appendTo(e);$("<span/>").addClass("collaborators").append($("<div/>").addClass("gravit-icon-collaborators")).append($("<div/>").addClass("collaborators-number").text("0")).append($("<span/>").text(" "+i.GLocale.get(new i.GLocaleKey("GFilesPanelViewBase","text.collaborators")))).appendTo(n).hide(),$("<span/>").addClass("comments").append($("<div/>").addClass("gravit-icon-comment")).append($("<div/>").addClass("comments-number").text("0")).append($("<span/>").addClass("comments-label").text(i.GLocale.get(new i.GLocaleKey("GFilesPanelViewBase","text.comments")))).appendTo(n).hide(),$("<div/>").addClass("status").append($("<div/>").addClass("label").text(i.GLocale.get(new i.GLocaleKey("GFilesPanelViewBase","text.status"))+": ")).append($("<div/>").addClass("state").text("")).appendTo(e).hide()},g.prototype._updateUIForFile=async function(e,t){const n=e.find(".share-button"),o=e.find(".comments-number"),d=e.find(".comments-label"),u=e.find(".collaborators-number"),g=e.find(".file-created"),h=e.find(".collaboration"),f=e.find(".status"),m=e.find(".collaborators");e.find(".file-preview").attr("src",t.getPreviewURL()||c.DEFAULT_FILE_THUMBNAIL),e.find(".file-preview").unbind("dblclick"),e.find(".file-preview").on("dblclick",e=>{e.stopPropagation(),e.preventDefault(),this._triggerEvent(p.Type.DoubleClickFile,t)}),e.find(".file-name").text(t.name),e.data("fileId",t.id);const y=await r.default.createStorageItem(t);y.supportsShadowFile()&&await y.syncShadowFile();const v=await c.gApi.getFileExtended(y.getId()).catch(()=>null);g.text(i.GLocale.get(new i.GLocaleKey("GFilesPanelViewBase","text.created")).replace("%createdTime",(0,a.dateToFilePreviewFormat)(t.created||v.created)));const _=v&&s.default.getCommentsCount(v)||0;o.text(_),d.text(i.GLocale.get(new i.GLocaleKey("GFilesPanelViewBase",1===_?"text.comment":"text.comments")));let b=null,w=null,C=!1;if(!v)return h.hide(),n.gShareButton("update",{disabled:!0,isSharing:!1}),void n.attr("data-title",i.GLocale.get(new i.GLocaleKey("GFilesPanelViewBase","text.can-only-share-by-owner")));{const e=gDesigner.getSyncUser();({state:{isPrivate:b,sharing:w,owner:C}}=(0,l.getFileStateAndRole)(e,v,{})),!gDesigner.getApplicationManager().isShareEngineEnabled()||w&&!C||n.show(),h.show()}if(n.gShareButton("update",{disabled:!1,storeItem:y,isSharing:w,closeCallback:()=>{this._triggerEvent(p.Type.Reload)},isPrivate:b}),n.removeAttr("data-title"),!w)return f.hide(),e.find(".collaborators").hide(),void e.find(".comments").hide();const x=await gDesigner.getFileReviewManager().getDocumentReviewHistory(y.getId());e.find(".comments").show(),x.length>1&&v?(f.show(),this._updateStatus(e,v.status)):f.hide();const S=v.getPrivateShareList().filter(e=>!e.owner).length;S>0?(m.show(),u.text(S)):m.hide()},g.prototype._updateStatus=function(e,t){const n=e.find(".state");switch(t){case c.FileStatus.IN_REVIEW:n.text(i.GLocale.get(new i.GLocaleKey("GReviewDockerProperties","text.review-title")));break;case c.FileStatus.REOPENED:n.text(i.GLocale.get(new i.GLocaleKey("GReviewDockerProperties","text.reopen-title")));break;case c.FileStatus.AWAITING_APPROVAL:n.text(i.GLocale.get(new i.GLocaleKey("GReviewDockerProperties","text.request-approval-title")));break;case c.FileStatus.APPROVED:n.text(i.GLocale.get(new i.GLocaleKey("GReviewDockerProperties","text.approved-title")))}},e.exports=g},function(e,t,n){"use strict";n(7);const o=n(68),i=n(0),a=n(1151);function r(){}i.inherit(r,o),r.prototype.render=async function(e,t){throw"Not implemented!"},r.prototype._triggerEvent=async function(e,t){this.hasEventListeners(a)&&this.trigger(new a(e,t))},e.exports=r},function(e,t,n){"use strict";var o=n(14);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GGoogleDrive=t.GCloudDrive=void 0;var i=o(n(841));const a=t.GCloudDrive=i.default;var r=n(1528);t.GGoogleDrive=r;t.default={GCloudDrive:a,GGoogleDrive:r}},function(e,t,n){"use strict";var o=n(14);n(89),n(26),n(7),n(183),n(28);var i=n(1),a=o(n(151)),r=o(n(71)),s=o(n(78)),l=o(n(781)),c=o(n(340));const d=n(1529),u=n(1277),p=n(539),g=n(143),h=n(1530),f=n(827),m=n(577),y=n(504),v=n(111),{gApi:_,CloudIntegration:b}=n(9),{decrypt:w}=n(34),C=n(37);let x;function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;l.default.call(this,e),this._accountId=t;const{clientId:n=null,apiKey:o=null,appId:a=null,accessToken:r,expires:s,corporate:c=!1}=this._settings;if(this._settings=Object.assign(this._settings,{clientId:n,apiKey:o,appId:a,accessToken:r,expires:s,corporate:c}),this._settings.corporate&&(this._securityLevel=y.SecurityLevel.Highest),r&&(this._googleDriveClient=this._buildGoogleClient({accessToken:r,expires:s,corporate:c,accountId:t})),this._clientId=n,this._apiKey=o,this._appId=a,this._folders={},this.isLowestSecurityLevel()){const e=async e=>this._googlePickerLoaded?this._openFilePicker(e).catch(()=>C.alert(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.loading-failed")))):gContainer.getGoogleAPI().loadFilePicker().then(()=>{this._googlePickerLoaded=!0}).then(()=>this._openFilePicker(e)).catch(e=>{console.log("[GGoogleDrive error - Google Drive Picker]",e),C.alert(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.loading-failed")))});this.addAction({title:i.GLocale.get(new i.GLocaleKey("GGoogleDrive","text.add-files")),icon:"gravit-icon-add-files",execute:e}),this.setDefaultEmptyMessage({title:i.GLocale.get(new i.GLocaleKey("GGoogleDrive","text.you-have-not-added")),buttons:[{title:i.GLocale.get(new i.GLocaleKey("GGoogleDrive","text.add-additional-files")),execute:e}]}),this.addEventListener(l.default.DriveEvent,t=>{if(t.type===l.default.DriveEvent.Type.Added){const n=$("<div/>").gDialog({className:"g-googledrive-warning-dialog",releaseOnClose:!0}).append($("<div></div>").addClass("g-btn-close").append($("<span></span>").addClass("gravit-icon-close")).on("click",()=>n.gDialog("close"))).append($("<span/>").text(i.GLocale.get(new i.GLocaleKey("GGoogleDrive","text.warning-message")))).append($("<div/>").addClass("buttons").append($("<button/>").addClass("g-highlight-button").text(i.GLocale.get(new i.GLocaleKey("GLocale","ok"))).on("click",()=>n.gDialog("close"))).append($("<button/>").addClass("g-highlight-button highlighted").text(i.GLocale.get(new i.GLocaleKey("GGoogleDrive","text.add-additional-files"))).on("click",()=>{e(t.source),n.gDialog("close")}))).gDialog("open",!1)}})}}i.GObject.inherit(S,l.default),S.LAST_TEAM_DRIVE_ID_PROP_NAME=b&&b.cloudOptions&&(b.cloudOptions.find(e=>"googledrive"===e.type)||{}).lastTeamDrivePropName||null,S.prototype._securityLevel=y.SecurityLevel.Lowest,S.prototype._googlePickerLoaded=!1,S.prototype._googleDriveClient=null,S.prototype.CURRENT_FOLDER_PROP="designer.filespanel.google-drive.current-folder",S.getInstance=function(){return x||(x=new S),x},S.prototype.setCorporateStorage=function(e){if(l.default.prototype.setCorporateStorage.call(this,e),S.LAST_TEAM_DRIVE_ID_PROP_NAME){let t=null;e&&({id:t}=e),this.saveLastTeamDriveId(S.LAST_TEAM_DRIVE_ID_PROP_NAME,t)}},S.prototype.getPreviousSelectedFolder=function(){return l.default.prototype.getPreviousSelectedFolder.apply(this,arguments).then(e=>e?g.from(e):e)},S.prototype._openFilePicker=function(e){const t=this;async function n(e){const n=t.getRootFolder();let o,i,a=!1;if(({parentId:o}=e[0]),o!==n.id)try{i=await t._googleDriveClient.getFileDetails(o)}catch(e){o=n.id,a=!0}return i||(i=n),{folder:i,showMessage:a}}async function o(e,o){for(let n=0;n<e.length;n++){let o=e[n];const{id:i,type:a}=o;"folder"!==a&&await t._googleDriveClient.updateFileDetails(i,{viewedByMeTime:(new Date).toISOString()})}const{showMessage:a,folder:r}=await n(e);a&&C.messageWithInfo({mainMessage:i.GLocale.get(new i.GLocaleKey("GGoogleDrive","text.selected-files-folder-not-added")),infoMessage:i.GLocale.get(new i.GLocaleKey("GGoogleDrive","text.selected-files-folder-not-added-additional"))}),t.trigger(new l.default.DriveEvent(null,l.default.DriveEvent.Type.FolderSwitchRequired,{folder:r})),o()}return new Promise((t,a)=>{if(!this.isSignedIn()||!this._googlePickerLoaded)return a();gContainer.getGoogleAPI().openFilePicker(r=>{if(e.toggleLoading(!0),1===r.length){const s=r[0],{id:l,type:c}=s;"folder"!==c?(n(r).then(e=>{let{showMessage:t}=e;t&&C.messageWithInfo({mainMessage:i.GLocale.get(new i.GLocaleKey("GGoogleDrive","text.selected-file-folder-not-added")),infoMessage:i.GLocale.get(new i.GLocaleKey("GGoogleDrive","text.selected-files-folder-not-added-additional"))})}),this.getFile(l).then(e=>this._convertToCloudItems(e).then(e=>e[0])).then(e=>new Promise((t,n)=>{if(this.isFileSupported(e))return t(e);C.alert(i.GLocale.get(new i.GLocaleKey("GDocument","text.unsupported-file-extension")),n)})).then(e=>this.openFile(e)).then(()=>e.close()).then(t).catch(a).finally(()=>e.toggleLoading(!1))):o(r,t)}else o(r,t)},a)})},S.prototype.hasUserProfile=function(){return!0},S.prototype.isRootFolder=function(e){e=void 0!==e?e:this.getCurrentFolder();var t=this.getRootFolder();return"string"==typeof e?e===t.id:!e||e&&!e.id||e===t||e.id===t.id},S.prototype.getRootFolder=function(){return this.getCorporateStorage()?this.getCorporateStorage():g.from({id:"root",name:i.GLocale.get(new i.GLocaleKey("GFilesPanel","action.my-cloud"))})},S.prototype.uninstall=async function(){return new Promise(async e=>(l.default.prototype.uninstall.call(this),this.isLowestSecurityLevel()&&this.isSignedIn()&&await this.signOut(),e()))},S.prototype.getUser=async function(){return new Promise(async(e,t)=>{try{var n;if(this._settings.corporate)n=await gDesigner.getUser();else{if(!gContainer.getGoogleAPI().isLoaded())return t("Google Drive Client not loaded!");n=await gContainer.getGoogleAPI().getBasicProfile()}return e(n)}catch(e){t(e)}})},S.prototype.install=function(e){return this.isInstalled()?Promise.resolve():this.isLowestSecurityLevel()?gContainer.getGoogleAPI().install(e).then(()=>this._loadClient()).then(()=>this._driveInstalled=!0):(this._driveInstalled=!0,Promise.resolve())},S.prototype.isLowestSecurityLevel=function(){return this._securityLevel===y.SecurityLevel.Lowest},S.prototype._loadClient=function(){return new Promise(async(e,t)=>{const n=this.isLowestSecurityLevel()?"https://www.googleapis.com/auth/drive.file         https://www.googleapis.com/auth/userinfo.email":"https://www.googleapis.com/auth/drive";var o,a,r;try{if(this._apiKey&&this._clientId)a=this._clientId,o=this._apiKey,r=this._appId;else{var s=await _.cloudServices.googleDrive.getClientConfiguration();const{GOOGLE_DRIVE_PUBLIC_CLIENT_ID:e,GOOGLE_DRIVE_PUBLIC_API_KEY:t,GOOGLE_DRIVE_APP_ID:n}=JSON.parse(w(s));a=e,o=t,r=n,this._apiKey=o,this._clientId=a,this._appId=r}}catch(e){return t(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.loading-failed")))}gContainer.getGoogleAPI().init({appId:r,apiKey:o,clientId:a,discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],scope:n}).then(()=>{e()},e=>{t(e)})})},S.prototype.isSignedIn=async function(){return gContainer.getGoogleAPI().isLoaded()||console.error("Google Drive Client not loaded!"),gContainer.getGoogleAPI().isSignedIn()},S.prototype.signIn=function(){return new Promise(async(e,t)=>gContainer.getGoogleAPI().isLoaded()?await this.isSignedIn()?(this._googleDriveClient=await this._buildGoogleClient(),e()):gContainer.getGoogleAPI().signIn().then(async()=>{this._googleDriveClient=await this._buildGoogleClient(),e()}).catch(e=>e&&"popup_blocked_by_browser"===e.error?t(new c.default(i.GLocale.get(new i.GLocaleKey("GExternalStorage","text.error-window-blocked-alternative")))):t(e)):t("Google Drive Client not loaded!"))},S.prototype.signOut=function(){if(!gContainer.getGoogleAPI().isLoaded())throw Error("Google Drive Client not loaded!");return gContainer.getGoogleAPI().signOut()},S.prototype.fetchFolders=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;var o=t?this._getParentReference(t):this._getParentContext();return this._search(u.from({type:g.Type.Folder,limit:n>0?n:1e3,orderBy:S.SearchEngine.SortMap[e],parent:o})).then(async e=>{this._currentPage=e;let n=e.getItems();return this.isRootFolder(t)&&!this.PREVIOUS_SELECTED_FOLDER_PATH.length&&(this._rootFolderID=n&&n.length&&"root"===n[0].getParentId()?n[0].parents[0]:null,await this.generatePreviousSelectedFolderPath()),n})},S.prototype._buildSearchQuery=function(e){const t=new d;var n=e.hasValue("type")&&e.type;const o=n===g.Type.Folder,i=n===g.Type.File;return o?t.add("mimeType","=",f.MimeType.Folder):i&&(t.group(e=>{this.getSupportedExtensions().forEach(t=>e.or("fileExtension","=",t)),this.getSupportedMIMETypes().forEach(t=>e.or("mimeType","=",t))}),this.shouldOnlyListOwnedFiles()&&t.in("me","owners")),e.hasValue("parent")?"*"!==e.parent&&t.in(e.parent,"parents"):t.in("root","parents"),e.hasValue("name")&&t.add("name","contains",e.name),e.hasValue("exactname")&&t.add("name","=",e.exactname),e.hasValue("fileExtension")&&t.add("fileExtension","=",e.fileExtension.toLowerCase()),t.add("trashed","=",new d.RawValue(!1)),t.build()},S.prototype._getParentContext=function(){return this._getParentReference(this.getCurrentFolder())||this._getParentReference(this.getCorporateStorage())},S.prototype.getFolders=function(){var e={},t=this._getParentContext();return t&&(e[t]={folder:{name:null,id:null,parent:null}}),e},S.prototype._search=async function(e,t){var n=e.hasKey("limit")&&e.getAsInt("limit")||this.getQueryLimit();t=t||new h({query:e});return new Promise(async(o,i)=>{try{var a={q:this._buildSearchQuery(e),pageSize:n-t.getSize(),fields:"nextPageToken, files( id, driveId, parents, name, fileExtension, fullFileExtension, hasThumbnail, thumbnailLink, size, contentHints(thumbnail(image, mimeType)), description, mimeType, version, createdTime, modifiedTime, webContentLink, capabilities(canDownload, canEdit) )",pageToken:e.hasValue("nextPageToken")&&e.nextPageToken||""},r=this.getCorporateStorage();r&&(a=Object.assign(a,{includeItemsFromAllDrives:!0,corpora:"drive",supportsAllDrives:!0,driveId:r.id})),e.hasValue("orderBy")&&(a.orderBy=e.orderBy);const i=await this._googleDriveClient.searchFiles(a);var{files:s,nextPageToken:l}=i;if(!s.length)return o(t);s=t.getSize()+s.length>n?s.slice(0,Math.max(n-t.getSize(),0)):s;var c=await this._convertToCloudItems(s);return e.hasValue("parent")&&c.forEach(t=>{t.parent=e.parent}),t.update({nextPageToken:l,items:c}),t.getSize()<n&&l&&(t=await this._search(e,t)),o(t)}catch(e){i()}})},S.prototype._convertToCloudItems=async function(e){return(e=e instanceof Array?e:[e]).map(e=>p.convertToCloudItem(e))},S.prototype.navigateToParentFolder=function(){var e=this._currentFolder.parent?this._currentFolder.parent:null;return this.setCurrentFolder(this._getParentReference(e)),this},S.prototype._getParentReference=function(e){return e&&"object"==typeof e?e._id||e.id:e},S.prototype.getFile=function(e){return this._googleDriveClient.getFileDetails(e,this.getCorporateStorage()?{supportsAllDrives:!0}:{})},S.prototype.getFolder=async function(e){const t=await this._googleDriveClient.getFileDetails(e.id||e,this.getCorporateStorage()?{supportsAllDrives:!0}:{});return this._convertToCloudItems(t).then(e=>e[0])},S.prototype.supportsSaveCollisionFlow=function(){return!0},S.prototype.fileExists=async function(e,t,n){var o=n?this._getParentReference(n):this._getParentContext();return this._search(u.from({type:g.Type.File,parent:o,exactname:"".concat(e,".").concat(t),fileExtension:t})).then(e=>!!e.getItems().length)},S.prototype.folderExists=function(e,t){var n=t?this._getParentReference(t):this._getParentContext();return this._search(u.from({type:g.Type.Folder,parent:n,exactname:e})).then(e=>!!e.getItems().length)},S.prototype.getRawFile=function(e,t,n){return this._googleDriveClient.getFile(e.id,this.getCorporateStorage()?{supportsAllDrives:!0}:{},t,n&&n.progress)},S.prototype._createStorageItem=async function(e,t,n){const o=t&&await v.createUint8ArrayFromBlob(t);return new p.Item(gDesigner.getDefaultStorage(),e,o,n)},S.prototype.openFile=async function(e,t){return new Promise(async function(n,o){try{const o=Object.assign(e,{settings:this._googleDriveClient.getTokenIssuerSettings()});var i=await this._createStorageItem(o,await this.getRawFile(e));i.setCloudClient(this._googleDriveClient),gDesigner.openDocument(i,t),await this._googleDriveClient.updateFileDetails(i.getUniqueId(),{viewedByMeTime:(new Date).toISOString()},{supportsAllDrives:!0}),n()}catch(e){o(e)}}.bind(this))},S.prototype.saveNewFile=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=arguments.length>4?arguments[4]:void 0;return new Promise(async(c,d)=>{const u=function(e,t,n){console.log(e);const o=gDesigner.getHeader(),a=o.getWindowTab(gDesigner.getWindows().getWindow(t)),r=o.getWindowTab(gDesigner.getWindows().getWindow(n));a&&r?(n.updateStatus(s.default.SaveFailed),gDesigner.removeDocument(n,(function(){t.updateStatus(s.default.SaveFailed)}))):a?t.updateStatus(s.default.SaveFailed):n.updateStatus(s.default.SaveFailed),d(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.error-saving-file")))};var p=new a.default;try{n=n||this.getDefaultFileFormat().ext.toUpperCase();var g=e.getScene();g.getActivePage().getGeometryBBox()||d(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.error-emtpy-infinite-canvas"))),o=e.updateSaveOptionsLastModifiedDate(o);const a=(this.findFileFormatByExtension(n)||this.getDefaultFileFormat()).mime,f={name:t,mimeType:a,fileExtension:n,parent:this._getParentContext(),settings:this._settings},m=a!==this.getDefaultFileFormat().mime,y=this.getCorporateStorage();y&&(f.driveId=y.id);var h=await this._createStorageItem(f);h.setCloudClient(this._googleDriveClient),gDesigner.addDocument(p),p.setSynchronizing(!0),p.setTitle(t),p.updateStatus(s.default.Saving);const v=i.GNode.store(g,o);v.cfs=!1;const _=JSON.stringify(v);return p.deserializeData(_).then(async()=>{e.getFileFormatVersion()&&p.setFileFormatVersion(e.getFileFormatVersion()),l&&l(s.default.Loaded),o=p.updateSaveOptionsLastModifiedDate(o),h.write(p,async()=>{e&&e.getEditor()&&gDesigner.removeDocument(e,null,!0),p.setStorageItem(h),await p.saveAnnotations(m,!0),p.setSynchronizing(!1),l&&l(s.default.Saved),gDesigner.hasEventListeners(r.default)&&(gDesigner.trigger(new r.default(r.default.Type.Modified,p)),gDesigner.trigger(new r.default(r.default.Type.Activated,p))),gDesigner.addToRecentFiles(h),p.updateStatus(s.default.Saved),c()},()=>{console.error(">>>saveNewFile write error",arguments),p.setSynchronizing(!1),l&&l(s.default.SaveFailed),d()},null,o)}).catch(t=>u(t,p,e))}catch(t){u(t,p,e)}})},S.prototype.fetchRecentFiles=function(){return this._fetchFiles(null,0,"-viewed","*",this._currentRecentFilesPage).then(e=>(this._currentRecentFilesPage=e,e.getItems()))},S.prototype.fetchFiles=async function(e,t,n){var o=this.getCurrentFolder(),i=o&&this._getParentReference(o);this._currentFilesPage&&(this._currentFilesPage.__parent===i&&this._currentFilesPage.__search===e&&this._currentFilesPage.__sort===n||(this._currentFilesPage=null));return await this._fetchFiles(e,t,n,o,this._currentFilesPage).then(t=>(this._currentFilesPage=t,this._currentFilesPage.__search=e,this._currentFilesPage.__sort=n,this._currentFilesPage.__parent=i,t.getItems()))},S.prototype._fetchFiles=async function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4?arguments[4]:void 0;var a=o?this._getParentReference(o):this._getParentContext();if(t&&i&&!i.nextPageToken){var r=h.from(i);return r.items=[],r}return this._search(u.from({type:g.Type.File,limit:this.getQueryLimit(),orderBy:S.SearchEngine.SortMap[n],nextPageToken:t?i&&i.nextPageToken:"",parent:a,name:e}))},S.prototype.isItemAllowedToBeRendered=function(e){return e.hasPermission(g.Permission.Download)},S.prototype.isFileAllowedToBeOpened=function(e){return e.hasPermission(g.Permission.Download)},S.prototype.supportsCorporateStorage=function(){return!0},S.prototype.getCorporateStorages=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new u,t=arguments.length>1?arguments[1]:void 0;if(this.shouldOnlyListOwnedFiles())return Promise.resolve([]);var n=e.hasKey("limit")&&e.getAsInt("limit")||this.getQueryLimit();return t=t||new h({query:e}),new Promise(async(o,i)=>{try{const i={pageSize:n-t.getSize(),fields:"*",nextPageToken:e.hasValue("nextPageToken")&&e.nextPageToken},l=await this._googleDriveClient.searchTeamDrives(i);var{drives:a,nextPageToken:r}=l;if(!a.length)return o(t);a=t.getSize()+a.length>n?a.slice(0,Math.max(n-t.getSize(),0)):a;var s=await this._convertToCloudItems(a);return t.update({nextPageToken:r,items:s}),t.getSize()<n&&r&&(t=await this.getStorages(e,t)),o(t.getItems())}catch(e){i()}})},S.prototype._buildGoogleClient=async function(e){if(!e){if(!gContainer.getGoogleAPI().isLoaded())throw Error("Google Drive Client not loaded!");e=await gContainer.getGoogleAPI().getTokenConfiguration({corporate:!1,accountId:this._accountId})}return new f(new m(e))},S.prototype.getSupportedFileFormats=function(){return p.getSupportedFileFormats()},S.prototype.generatePreviousSelectedFolderPath=async function(){const e=this.getCurrentFolder();if(this.isRootFolder(e))return this.PREVIOUS_SELECTED_FOLDER_PATH=[],this.PREVIOUS_SELECTED_FOLDER_PATH;this.PREVIOUS_SELECTED_FOLDER_PATH.push(e.id);let t=e.getParentId()?e.getParentId():e.parents?e.parents[0]:null;if(t&&t!==this._rootFolderID){let e=await this.getFolder(t).catch(()=>null);for(;e;)this.PREVIOUS_SELECTED_FOLDER_PATH.push(e.id),t=e.getParentId()?e.getParentId():e.parents?e.parents[0]:null,e=t&&t!==this._rootFolderID?await this.getFolder(t).catch(()=>null):null}return this.PREVIOUS_SELECTED_FOLDER_PATH},S.SearchEngine={SortMap:{"-updated":"".concat(f.SearchEngine.OrderBy.ModifiedTime," ").concat(f.SearchEngine.Sorts.Descending),updated:"".concat(f.SearchEngine.OrderBy.ModifiedTime," ").concat(f.SearchEngine.Sorts.Ascending),"-created":"".concat(f.SearchEngine.OrderBy.CreatedTime," ").concat(f.SearchEngine.Sorts.Descending),created:"".concat(f.SearchEngine.OrderBy.CreatedTime," ").concat(f.SearchEngine.Sorts.Ascending),"-name":"".concat(f.SearchEngine.OrderBy.Name," ").concat(f.SearchEngine.Sorts.Descending),name:"".concat(f.SearchEngine.OrderBy.Name," ").concat(f.SearchEngine.Sorts.Ascending),"-viewed":"".concat(f.SearchEngine.OrderBy.ViewedByMeTime," ").concat(f.SearchEngine.Sorts.Descending),viewed:"".concat(f.SearchEngine.OrderBy.ViewedByMeTime," ").concat(f.SearchEngine.Sorts.Ascending)}},e.exports=S},function(e,t,n){"use strict";function o(){this.stack=[]}o.RawValue=function(e){this.value=e},o.RawValue.prototype.getValue=function(){return this.value},o.prototype._checkRaw=function(e){return e instanceof o.RawValue?e.getValue():"'".concat(e,"'")},o.prototype.add=function(e,t,n,i){return this._add(e instanceof o.RawValue?e:new o.RawValue(e),t,n,i)},o.prototype._add=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.Connector.AND;return this.stack.push({field:e,operator:t,value:n,connector:i}),this},o.prototype.group=function(e){var t=new o;return this.stack.push(t),e(t),this},o.prototype.and=function(e,t,n){return this.add(e,t,n,o.Connector.AND)},o.prototype.or=function(e,t,n){return this.add(e,t,n,o.Connector.OR)},o.prototype.in=function(e,t){return this._add(e,o.Connector.IN,t instanceof o.RawValue?t:new o.RawValue(t))},o.prototype.build=function(){var e=this;return this.stack.map((function(t,n){return t instanceof o?"".concat(0!==n?o.Connector.AND+" ":"","(").concat(t.build(),")"):"".concat(0!==n?t.connector+" ":"").concat(e._checkRaw(t.field)," ").concat(t.operator," ").concat(e._checkRaw(t.value))})).join(" ")},o.Connector={AND:"AND",IN:"IN",OR:"OR"},e.exports=o},function(e,t,n){"use strict";n(26);const o=n(143),i=n(1277);function a(e){var t,n,o;if(e&&(t=e.nextPageToken,n=e.items,o=e.query),n&&!this._isItemValid(n))throw Error("Must be a cloud item");this.nextPageToken=t,this.items=n||[],this.query=o}a.prototype._isItemValid=function(e){return!(e=e instanceof Array?e:[e]).some(e=>!e instanceof o)},a.prototype.nextPageToken=null,a.prototype.items=null,a.prototype.isEmpty=function(){return!this.items||this.items instanceof Array&&!this.items.length},a.prototype.getSize=function(){return this.items.length},a.prototype.getItems=function(){return this.items},a.prototype.update=function(e){var t=e.nextPageToken,n=e.items,o=e.query;if(!this._isItemValid(n))throw Error("Must be a cloud item");this.nextPageToken=t,this.items=this.items.concat(n),o&&(this.query=o)},a.from=function(e){var t=new a;return(t=Object.assign(t,e)).query&&(t.query=i.from(t.query)),t.items&&(t.items=t.items.map(e=>o.from(e))),t},e.exports=a},function(e,t,n){"use strict";var o=n(14);n(18),n(29),n(84);var i=n(1),a=o(n(37));function r(e,t,n,o){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};var s=this;this._dialog=$("<div></div>"),$("<div/>").css("display","grid").append($("<span/>").css("display","block").html(i.GLocale.get(new i.GLocaleKey("GNewFilePrompt","text.name-document")))).append($("<input/>").attr("type","text").css("margin-top","10px").css("width","100%").val(o||"").addClass("name")).appendTo(this._dialog);var l=function(e){13===e.which&&(gDesigner.stats("newfile_enter_save"),c(),e.stopPropagation())},c=function(){if($(s._dialog).find(".name").val().trim()){var t=$(s._dialog).find(".name").val();r&&r.fn&&!r.fn(t)?a.default.alert(r.errorMessage.replace("%fileName%",'"'.concat(t,'"'))):(e(t),s.close())}};$(s._dialog).find(".name").keypress(l),this._dialog.gDialog({className:"g-new-file-prompt-dialog",releaseOnClose:!1,closeCallback:t,buttons:[$("<button".concat(n?' class="'.concat(n,'"'):"",">").concat(i.GLocale.get(new i.GLocaleKey("GNewFilePrompt","action.create")),"</button>")).on("click",(function(){gDesigner.stats("newfile_click_save"),c()})),$("<button>"+i.GLocale.get(new i.GLocaleKey("GLocale","cancel"))+"</button>").on("click",(function(){gDesigner.stats("newfile_click_close"),s.close()}))]})}i.GObject.inherit(r,i.GObject),r.prototype.open=function(){this._dialog.gDialog("open",!0),$(this._dialog).find(".name").focus()},r.prototype.close=function(){this._dialog.gDialog("close")},e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class o extends Error{constructor(){super("REPEAT"),this.name="GRepeatActionError"}}t.default=o},function(e,t,n){"use strict";n(158),n(51),n(7),n(183),n(28);var o=n(1),i=n(9),a=n(111),r=n(151);const{debounce:s}=n(34),l=i.FILE_FORMATS.find(e=>e.default);var c={},d=null;const u=i.CATEGORIES.filter(e=>e.active);class p{constructor(e){this._templatesPanel=$("<div/>").addClass("g-templates-panel").appendTo($("body")),this._templatesPanel.gDialog({closeTimeout:0,releaseOnClose:!0,className:"g-templates-panel-container",alwaysCloseable:!0}),this._templatesPanel.gDialog("open",!0),d=e,this._breadcrumbs=[{key:p.DefaultBreadcrumbs.Welcome,name:o.GLocale.getValue("GCloudTemplates","text.welcome"),click:e=>{e.stopPropagation(),this._templatesPanel.gDialog("close")},tooltip:o.GLocale.getValue("GFilesPanel","action.close-window")}],this._initTopBar(this._templatesPanel),this._loadHeader(),this._contentPanel=$("<div/>").addClass("templates").appendTo(this._templatesPanel),this._initCategories(),this._initResizeHandler()}_initResizeHandler(){this._debouncedResizeHandler=s(function(){this._initMasonryLayoutColumns(null,null,null,!0)}.bind(this),200),$(window).resize(function(){this._debouncedResizeHandler()}.bind(this))}_openPreset(e){return a.loadDesignData(e.id).then(t=>{var n=new r;return gDesigner.addDocument(n),n.loadFromData(t.data),i.gApi.usage(e.id).catch(e=>{console.error("gApi.usage error",e)})}).catch(e=>{e&&console.log(e)}).finally(()=>{this._templatesPanel.gDialog("close")})}_getActivePresetCategory(){if(this._currentSubcategory||this._currentCategory)return this._currentSubcategory?this._currentSubcategory:this._currentCategory}_initLoadPage(e,t){c={},t===p.AssetType.Category?(this._currentCategory=e,this._breadcrumbs.push({key:p.DefaultBreadcrumbs.Templates,name:o.GLocale.getValue("GCloudTemplates","text.templates"),click:t=>{t.stopPropagation(),gDesigner.stats("cloudtemplates_click_backbutton",e?e.name:""),this._initCategories()}})):t===p.AssetType.Subcategory&&(this._currentSubcategory=e,this._breadcrumbs.push({key:this._currentCategory.key,name:o.GLocale.getValue("GCommonNames",this._currentCategory.key),click:t=>{t.stopPropagation(),gDesigner.stats("cloudtemplates_click_backbutton",e?e.name:""),this._breadcrumbs=this._breadcrumbs.filter(e=>e.key!==this._currentCategory.key),this._initSubcategories()}})),this._loadBreadcrumbs(),this._loadHeader(),t===p.AssetType.Category&&this._currentCategory.subcategories?this._initSubcategories():(this._presetsCount=0,this._presetsCurrentSkip=0,this._presetsLoadMore=!0,this._loadPresets(!1))}_loadPresets(e){this._toggleLoadMoreButton(!1),this._toggleLoading(!0),this._doLoadPresets(e)}async _doLoadPresets(e){var t=this;this._presetsLoadMore&&async function(n){try{var o=await i.gApi.listMarketV2({path:t._getActivePresetCategory().path,type:l.type,sort:"-usages",limit:i.PRESET_LIMIT,skip:t._presetsCurrentSkip});c[t._getActivePresetCategory().key]||(c[t._getActivePresetCategory().key]=[]),c[t._getActivePresetCategory().key]=c[t._getActivePresetCategory().key].concat(o.data),o.count&&(t._presetsCount=o.count),c[t._getActivePresetCategory().key].length==t._presetsCount?t._presetsLoadMore=!1:t._presetsCurrentSkip+=i.PRESET_LIMIT,n(o.data,e)}catch(e){n(c[t._getActivePresetCategory().key],!1),console.error(e)}}((function(e,n){n||t._contentPanel.empty(),t._initMasonryLayoutColumns(e,p.AssetType.Preset,n),t._loadMoreButton(),t._toggleLoading(!1)}))}_loadMoreButton(){this._contentPanel.find(".button-wrapper").remove(),this._presetsLoadMore&&(this._doLoadMoreButton(),this._toggleLoadMoreButton(!0))}_doLoadMoreButton(){this._contentPanel.append($("<div/>").addClass("button-wrapper").addClass("hidden").append($("<div/>").addClass("g-button").addClass("cloud-button").addClass("load-more").on("click",()=>{this._loadPresets(!0)}).append($("<span/>").addClass("label").text(o.GLocale.get(new o.GLocaleKey("GCommonNames","text.library-load-more"))))))}_initSubcategories(){this._contentPanel.empty(),this._currentSubcategory=null,this._loadHeader(),this._loadBreadcrumbs(),this._initMasonryLayoutColumns(this._currentCategory.subcategories,p.AssetType.Subcategory)}_initCategories(){this._contentPanel.empty(),this._currentCategory=null,this._currentSubcategory=null,this._loadHeader(),this._loadBreadcrumbs(!0),this._initMasonryLayoutColumns(u,p.AssetType.Category)}_initMasonryLayoutColumns(e,t,n,a){var r=this._contentPanel.find(".assets-wrapper");if(0===r.length&&(r=$("<div/>").addClass("assets-wrapper")).appendTo(this._contentPanel),a&&(e=r.find(".column").children()).unwrap(),0===e.length)return;this._wrapperWidth=r.css("width")?parseInt(r.css("width").split("px")[0]):235;var s,l=[],c=1,u=null;if(c=Math.max(Math.ceil(this._wrapperWidth/235),c),s=this._wrapperWidth/c-32/c*(c-1),u=1==c||c>2?s/this._wrapperWidth*100+"%":"calc(50% - 32px)",n)l=r.find(".column").toArray();else for(var g=0;g<c;g++){var h=$("<div/>").addClass("column").css("width",u);g>0&&h.css({"margin-left":"32px"}),l.push(h)}const f=l.map(this._getChildrenHeight.bind(this)),m=[];for(var y=0;y<e.length;y++){var v;if(a)v=e[y];else if(t===p.AssetType.Preset){let t=e[y];var _=$("<img/>").addClass("asset").attr("src",t.url_t).css("width",t.width||"235px").on("click",function(){d&&d(),gDesigner.stats("cloudtemplates_add_"+(this._getActivePresetCategory()?this._getActivePresetCategory().name:"default"),t.name),gDesigner.getAmplitudeHelper().logEvent(i.AmplitudeData.Events.DOCUMENT_CREATED,{DOCUMENT_CATEGORY:this._getActivePresetCategory().name,DOCUMENT_TYPE:t.name,DOCUMENT_TEMPLATE_ID:t.id}),i.IS_TRUNK&&console.log("Template ID: ",t.id),this._openPreset(t)}.bind(this));(v=$("<div/>").addClass("asset-container preset-container").css("margin-bottom","32px").data("asset",t)).append(_)}else{let n=e[y];_=$("<div/>").addClass("asset").css("width",n.width+"px").append($("<img/>").attr("src",n.url).on("click",()=>{gDesigner.stats("cloudtemplates_load_template",n.name),this._initLoadPage(n,t)})).append($("<div/>").addClass("template-info").append($("<div/>").addClass("template-name").html(o.GLocale.get(new o.GLocaleKey("GCommonNames",n.key)))));(v=$("<div/>").addClass("asset-container category-container").css("margin-bottom","32px").data("asset",n)).append(_)}const n=this._getSmallestColumnIndex(f),r=$(v).data("asset"),s=this._getThumbnailSize(r).getHeight();f[n]=(f[n]||0)+s;const l=m[n]||[];l.push(v),m[n]=l}l.forEach((e,t)=>{$(e).append(m[t])}),n||r.append(l),this._removeEmptyColumns()}_removeEmptyColumns(){const e=this._contentPanel.find(".assets-wrapper").children(".column");e.each((t,n)=>{n.children.length||e[t].remove()})}_getThumbnailSize(e){const t=235/e.width,n=parseInt(e.height*t)+32;return new o.GRect(0,0,235,n)}_getChildrenHeight(e){return $(e).children().toArray().reduce((e,t)=>e+$(t).height(),0)}_getSmallestColumnIndex(e){return e.indexOf(Math.min.apply(null,e))||0}_loadHeader(){const e=this._templatesPanel.find(".header");0===e.length&&$("<div/>").addClass("header").appendTo(this._templatesPanel),e.empty(),e.append($("<span/>").addClass("title").html(this._getActivePresetCategory()?o.GLocale.getValue("GCommonNames",this._getActivePresetCategory().key):o.GLocale.getValue("GCloudTemplates","text.templates")))}_initTopBar(e){this.topBar=$("<div />").addClass("top-bar").append($("<div />").addClass("breadcrumbs")).append($("<div />").addClass("top-buttons").append($("<div/>").addClass("g-button").addClass("cloud-button").addClass("close-button").attr("data-title",o.GLocale.get(new o.GLocaleKey("GFilesPanel","action.close-window"))).on("click",e=>{e.stopPropagation(),this._templatesPanel.gDialog("close")}).append($("<span/>").addClass("icon").addClass("gravit-icon-close")))).appendTo(e),this._loadBreadcrumbs()}_loadBreadcrumbs(e){e&&(this._breadcrumbs=this._breadcrumbs.filter(e=>e.key==p.DefaultBreadcrumbs.Welcome));const t=this.topBar.find(".breadcrumbs");t.empty(),this._breadcrumbs.forEach(e=>{var n;t.append($("<span/>").addClass("g-breadcrumb").append($("<span/>").addClass("breadcrumb-name").html(e.name).on("click",e.click).attr("data-title",null!==(n=e.tooltip)&&void 0!==n?n:o.GLocale.getValue("GFilesPanel","action.back-tooltip"))).append($("<span/>").addClass("breadcrumb-divider").html("›")))})}_toggleLoading(e){this._templatesPanel.toggleClass("loading",e)}_toggleLoadMoreButton(e){let t=this._contentPanel.find(".button-wrapper");t&&t[e?"removeClass":"addClass"]("hidden")}}p.AssetType={Category:"CATEGORY",Subcategory:"SUBCATEGORY",Preset:"PRESET"},p.DefaultBreadcrumbs={Welcome:"welcome",Templates:"templates"},e.exports=p},function(e,t,n){"use strict";var o=n(14);n(89),n(26),n(7);var i=n(1),a=n(45),r=o(n(1535)),s=o(n(166));const{gApi:l}=n(9);e.exports=class{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._firstName=e,this._lastName=t,this._anonymous=n,this._confirmBtn=$("<button/>").addClass("confirm-btn").attr("disabled",this._checkNameFieldsFilled()).text(i.GLocale.get(new i.GLocaleKey("GUserNameConfigDialog","text.ok"))).on("click",()=>{gDesigner.stats("user-name-config-dialog_update-user-name"),this._updateUserName()}),this._dialog=$("<div/>").append($("<div/>").addClass("header").append($("<span/>").addClass("title").text(i.GLocale.get(new i.GLocaleKey("GUserNameConfigDialog","text.dialog-title"))))).append($("<div/>").addClass("tips-content-container").append($("<span/>").addClass("tips").text(i.GLocale.get(new i.GLocaleKey("GUserNameConfigDialog","text.name-usage-tips"))))).append(this._buildNameFields()).append(this._confirmBtn).gDialog({releaseOnClose:!0,className:"g-username-config-dialog"})}_buildNameFields(){return $("<div/>").addClass("name-fields").append($("<div/>").addClass("label-and-input").addClass("first-name-field").append($("<span/>").text(i.GLocale.get(new i.GLocaleKey("GUserNameConfigDialog","text.first-name")))).append($("<input/>").addClass("field-input").val(this._firstName).on("input",e=>this._nameFieldValueChange(!0,e)).on("change",e=>this._nameFieldValueChange(!0,e)))).append($("<div/>").addClass("label-and-input").addClass("last-name-field").append($("<span/>").text(i.GLocale.get(new i.GLocaleKey("GUserNameConfigDialog","text.last-name")))).append($("<input/>").addClass("field-input").val(this._lastName).on("input",e=>this._nameFieldValueChange(!1,e)).on("change",e=>this._nameFieldValueChange(!1,e))))}async _updateUserName(){const e={name:this._firstName,last_name:this._lastName},t=new s.default(e);this._anonymous?gContainer.setCookie({name:r.default.ANONYMOUS_USERNAME,value:encodeURIComponent(JSON.stringify(e))}):await l.updateUser(e),await this._updateUserProperties(t),this.close()}async _updateUserProperties(e){a.GEditorOptions.userConfig=Object.assign({},a.GEditorOptions.userConfig,{userName:e.getFullUserName()}),gDesigner.getCloudCommunicationManager().userPropertiesChanged(),await gDesigner.getUser()}_checkNameFieldsFilled(){return!this._firstName||!this._firstName.length}_nameFieldValueChange(e,t){e?this._firstName=$(t.target).val():this._lastName=$(t.target).val(),this._confirmBtn.attr("disabled",this._checkNameFieldsFilled())}open(){gDesigner.stats("user-name-config-dialog_open"),this._dialog.gDialog("open",!1)}close(){this._dialog.gDialog("close")}}},function(e,t,n){"use strict";e.exports={COLLABORATION_FLAG:"_gcollab",ANONYMOUS_USERNAME:"_ANONYMOUS_USERNAME",SESSION_TOKEN:"_gvt"}},function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=n(13),r=o(n(1149)),s=o(n(1150));function l(e){const t=e=>{if(a.GKey.translateKey(e.keyCode)===a.GKey.Constant.ESC)return e.preventDefault(),e.stopPropagation(),$(document).off("keydown",t),this._dialog.gDialog("close"),!1};let n="g-install-pwa-dialog";e&&(n+="-dark"),this._dialog=$("<div />").gDialog({releaseOnClose:!0,className:n,alwaysCloseable:!0,closeCallback:()=>$(document).off("keydown",t)}),$(document).on("keydown",t),this._dialog.append(this._getCloseButton()).append(this._getDialogContent())}i.GObject.inherit(l,i.GObject),l.prototype._getCloseButton=function(){return $("<div />").addClass("g-btn-close").append($("<span />").addClass("gravit-icon-close")).on("click",this.close.bind(this))},l.prototype._getDialogContent=function(){return $("<div />").addClass("content").append(this._getHeader()).append(this._getMainContent())},l.prototype._getHeader=function(){return $("<div />").addClass("header")},l.prototype._getMainContent=function(){return $("<div />").addClass("main-content").append($("<div />").addClass("title").text(i.GLocale.get(new i.GLocaleKey("GInstallPwaDialog","text.title")))).append($("<div />").addClass("description").append($("<span />").text(i.GLocale.get(new i.GLocaleKey("GInstallPwaDialog","text.description-text")))).append($("<a />").attr("href","https://www.corelvector.com/pro").attr("target","_blank").text(i.GLocale.get(new i.GLocaleKey("GInstallPwaDialog","text.description-pro-link")))).append($("<span />").text(i.GLocale.get(new i.GLocaleKey("GInstallPwaDialog","text.end-sentence-dot"))))).append(s.default.isSupported()?this._getButtons():this._buildChromiumInfoSection()).append(this._getFooter())},l.prototype._getButtons=function(){var e=this;return $("<div />").addClass("buttons").append($("<button />").addClass("primary").addClass("g-button").text(i.GLocale.get(new i.GLocaleKey("GInstallPwaDialog","action.install-button"))).on("click",(function(t){try{gDesigner.executeAction(r.default.ID)}catch(t){r.default.install()}e.close()}))).append($("<button />").addClass("g-button").text(i.GLocale.get(new i.GLocaleKey("GInstallPwaDialog","action.not-now-button"))).on("click",()=>{const e=gDesigner.now().getTime();gContainer.setProperty(r.default.closedInstallPWADialogDatePropName,e),this.close()}))},l.prototype._buildChromiumInfoSection=function(){return $("<div />").addClass("chromium-section").append($("<div/>").addClass("chromium-content").html(i.GLocale.get(new i.GLocaleKey("GInstallPwaDialog","text.pwa-requires"))))},l.prototype._getFooter=function(){return $("<div />").addClass("footer").append($("<span />").text(i.GLocale.get(new i.GLocaleKey("GInstallPwaDialog","text.footer-main-text")))).append($("<span />").text(i.GLocale.get(new i.GLocaleKey("GInstallPwaDialog","action.footer-link-text")))).append($("<span />").text(i.GLocale.get(new i.GLocaleKey("GInstallPwaDialog","text.end-sentence-dot")))).append($("<span> </span>")).append($("<a />").attr("href","https://www.corelvector.com/en/gravit-designer/progressive-web-app-for-design/").attr("target","_blank").text(i.GLocale.get(new i.GLocaleKey("GInstallPwaDialog","action.footer-more-information"))))},l.prototype._dialog=null,l.prototype.open=function(){this._dialog.gDialog("open",!1)},l.prototype.close=function(){this._dialog.gDialog("close")},l.prototype.toString=function(){return"[Object GInstallPwaDialog]"},e.exports=l},function(e,t,n){"use strict";n(28);var o=n(1),i=n(45),a=n(1279),r=n(1152),s=n(789),l=n(590),c=n(853),d=n(1153),u=n(1154),p=n(1155);const g=n(791);var h=n(1156),f=n(852),m=n(850),y=n(851),v=n(223),_=n(325),b=n(429),w=n(1157),C=n(856),x=n(1159),S=n(1160),E=n(1158),A=n(854),T=n(788),G=n(1290),P=n(1291),D=n(1292),L=n(1161),I=n(1293),k=n(1294),O=n(1295),F=n(1296),R=n(549),M=n(27),{replaceImage:N,setOriginSize:B,cropImage:U}=n(1244),j=n(71);const K=n(855);a.prototype._contextMenuContainerTouch=null,a.prototype._createTouchContextMenu=function(){var e=$("<div/>").gOverlay({releaseOnClose:!1,clazz:"context-menu-touch-overlay"}),t=this;this._contextMenuContainerTouch=e;$("<div/>").addClass("transform-section").gPropertyRow({columns:[{width:"48%",content:this._createActionButtons([{action:gDesigner.getAction(m.ID+"."+m.Type.FlipHorizontal)},{action:gDesigner.getAction(m.ID+"."+m.Type.FlipVertical)}])},{width:"4%"},{width:"48%",content:this._createActionButtons([{action:gDesigner.getAction(m.ID+"."+m.Type.Rotate90Left),icon:"gravit-icon-rotate-left"},{action:gDesigner.getAction(m.ID+"."+m.Type.Rotate90Right),icon:"gravit-icon-rotate-right"}])}]}).appendTo(e);$("<div/>").addClass("paste-section").gPropertyRow({columns:[{content:this._createActionButtonWithMenu(gDesigner.getAction(C.ID),o.GLocale.get(new o.GLocaleKey("GContextMenu","text.paste")),[gDesigner.getAction(x.ID),gDesigner.getAction(S.ID),gDesigner.getAction(E.ID),gDesigner.getAction(K.ID),gDesigner.getAction(A.ID)])}]}).appendTo(e);const n=gDesigner.getAction(g.ID),i=n&&n.getSubActions().concat(gDesigner.getAction(D.ID));$("<div/>").addClass("compound-section").gPropertyRow({columns:[{content:this._createActionButtonWithMenu(gDesigner.getAction(g.ID),o.GLocale.get(new o.GLocaleKey("GContextMenu","text.create-compound")),i)}]}).appendTo(e),$("<div/>").addClass("path-section").gPropertyRow({columns:[{content:this._createActionButtonWithMenu(gDesigner.getAction(s.ID),o.GLocale.get(new o.GLocaleKey("GContextMenu","text.convert-to-path")),[gDesigner.getAction(y.ID),gDesigner.getAction(F.ID),gDesigner.getAction(L.ID),gDesigner.getAction(I.ID),gDesigner.getAction(k.ID),gDesigner.getAction(p.ID),gDesigner.getAction(f.ID),gDesigner.getAction(O.ID)])}]}).appendTo(e),$("<div/>").addClass("symbol-section").gPropertyRow({columns:[{content:this._createActionButtonWithMenu(gDesigner.getAction(l.ID),o.GLocale.get(new o.GLocaleKey("GContextMenu","text.create-symbol")),[gDesigner.getAction(d.ID),gDesigner.getAction(c.ID),{caption:o.GLocale.get(new o.GLocaleKey("GContextMenu","text.go-to-master")),click:e=>{var t=gDesigner.getActiveDocument(),n=t.getEditor();if(t){var i=t.getEditor().getIndividualSelection();if(i&&i.length){var a=i.find(e=>e instanceof o.GSymbol&&!e.isLocked()&&!e.isMaster());if(a){var r=a;n.beginTransaction(),n.clearSelection(),n.updateSelection(!1,[r]),gDesigner.executeAction(R.ID,void 0,void 0,!0),n.commitTransaction(o.GLocale.get(new o.GLocaleKey("GContextMenu","text.go-to-master")))}}}gDesigner.stats("touchmenu_go-to-master")},icon:"gravit-icon-go-to-master",isEnabled:()=>{var e=gDesigner.getActiveDocument();if(e){var t=e.getEditor().getIndividualSelection();if(t&&t.length)if(t.find(e=>e instanceof o.GSymbol&&!e.isLocked()&&!e.isMaster()))return!0}return!1}}])}]}).appendTo(e);$("<div/>").addClass("text-section").gPropertyRow({columns:[{content:this._createActionButtonMenu("gravit-icon-textbox",o.GLocale.get(new o.GLocaleKey("GContextMenu","text.text")),[gDesigner.getAction(r.ID),gDesigner.getAction(u.ID),gDesigner.getAction(h.ID)],()=>!!this._getFirstSelectedTextElement())}]}).appendTo(e);var a=[{caption:o.GLocale.get(new o.GLocaleKey("GContextMenu","text.crop")),click:e=>{var t=gDesigner.getActiveDocument().getEditor().hasSelectionDetail();U(this._getFirstSelectedImageElement(),t),gDesigner.stats("touchmenu_crop-image")},icon:"gravit-icon-crop",update:e=>{var t=gDesigner.getActiveDocument().getEditor().hasSelectionDetail();e.setCaption(o.GLocale.get(new o.GLocaleKey("GImageProperties",t?"action.no-crop":"action.crop")))}},{caption:o.GLocale.get(new o.GLocaleKey("GContextMenu","text.original-size")),click:e=>{B(this._getFirstSelectedImageElement()),gDesigner.stats("touchmenu_original-size")},icon:"gravit-icon-expand"},{caption:o.GLocale.get(new o.GLocaleKey("GContextMenu","text.replace-image")),click:e=>{gDesigner.stats("touchmenu_replace-image"),N(this._getFirstSelectedImageElement(),gDesigner.getActiveDocument())},icon:"gravit-icon-replaceimg"}];$("<div/>").addClass("image-section").gPropertyRow({columns:[{content:this._createActionButtonMenu("gravit-icon-image",o.GLocale.get(new o.GLocaleKey("GContextMenu","text.image")),a,()=>!!this._getFirstSelectedImageElement())}]}).appendTo(e);return $("<div/>").addClass("").gPropertyRow({columns:[{width:"48%",content:this._createActionButtons([{action:gDesigner.getAction(T.ID)},{action:gDesigner.getAction(w.ID),icon:"gravit-icon-mask-with-shape"}])},{width:"4%"},{width:"48%",content:this._createActionButtons([{action:gDesigner.getAction(G.ID),icon:"gravit-icon-flatten"},{action:gDesigner.getAction(P.ID),icon:"gravit-icon-duplicate"}])}]}).appendTo(e),$("<div/>").addClass("").gPropertyRow({columns:[{width:"48%",content:this._createActionButtons([{icon:"gravit-icon-lock",click:e=>{t._setAllSelectionsLocked(),this._contextMenuContainerTouch.gOverlay("close"),gDesigner.stats("touchmenu_lock-layer")},isEnabled:()=>t._getSelectedItems().length>0},{icon:"gravit-icon-hide-big",click:e=>{t._setAllSelectionsHidden(),this._contextMenuContainerTouch.gOverlay("close"),gDesigner.stats("touchmenu_hide-layer")},isEnabled:()=>t._getSelectedItems().length>0}])},{width:"4%"},{width:"48%",content:this._createSelectMenuButton()}]}).appendTo(e),gDesigner.addEventListener(j,this._documentEvent.bind(this)),e},a.prototype._elementsToCheck=[],a.prototype._documentEvent=function(e){e.type===j.Type.ContextMenuOpened&&(gDesigner.getAction(E.ID).setPosition(this._contextMenuClientPosition),this._elementsToCheck.forEach(e=>{e.isEnabled&&e.element&&e.element.attr("disabled",!e.isEnabled(this._mouseEvent))}))},a.prototype._createActionButtons=function(e){var t=$("<div/>").addClass("button-group");return(e=e instanceof Array?e:[e]).forEach(e=>{var n=this._createActionButton(e);t.append(n)}),t},a.prototype._createActionButton=function(e){var t=e.label,n=e.icon,i=e.click;let a=e.isEnabled,r=!1;e.action&&(r=e.action.isPro(),t||(t=o.GLocale.get(e.action.getTitle())),n||(n=e.action.getIcon()||e.action.getGroupIcon()),i||(i=function(){gDesigner.executeAction(e.action.getId(),void 0,"touchmenu")}),a||(a=function(){return gDesigner.canExecuteAction(e.action.getId())}));var s=$("<div></div>").gPro({pro:r});e.action&&s.addClass("action").attr("data-action",e.action.getId()).data("action",e.action);var l=$("<button></button>").addClass("action-button").addClass(e.longButton?"long-button":"").toggleClass("g-active",!0===e.active).appendTo(s).on("mousedown",(function(e){e.preventDefault()}));return this._elementsToCheck.push({element:l,isEnabled:a}),n&&(this._updateIcon($("<span></span>").appendTo(l),n),l.addClass("icon")),e.label&&l.append($("<span></span>").addClass("label").text(e.label)),e.isMenu&&l.append($("<span></span>").addClass("icon item-tail gravit-icon-chevron-left-small")),i&&l.on("click",i),s},a.prototype._createActionButtonWithMenu=function(e,t,n){var o=$("<div/>").addClass("action-button-with-menu");o.append(this._createActionButton({action:e,label:t,longButton:!0}));var i=new v(null,"g-context-menu");i.__which="touchmenu",n.forEach(e=>{if(e instanceof M)i.createAddItem(e,null,null,null,e.getId()===E.ID?a.ID:null);else{var t=i.createAddItem(e.caption,e.click);t.setIcon(e.icon),t.addEventListener(_.UpdateEvent,(function(){t.setEnabled(e.isEnabled())}))}});var r=$("<button/>").addClass("open-menu icon gravit-icon-chevron-left-small").on("click",e=>{i.open($(e.target),b.Position.Right_Bottom,b.Position.Center)});return this._elementsToCheck.push({element:r,isEnabled:()=>n.some(e=>e.isEnabled())}),o.append(r),o},a.prototype._createActionButtonMenu=function(e,t,n,o){var i=new v(null,"g-context-menu");i.__which="touchmenu",n.forEach(e=>{if(e instanceof M)i.createAddItem(e);else{var t=i.createAddItem(e.caption,e.click);t.setIcon(e.icon),t.addEventListener(_.UpdateEvent,(function(){e.update&&e.update(t)}))}});var a=$("<div/>").addClass("action-menu-button");return a.append(this._createActionButton({label:t,icon:e,click:e=>{i.open($(e.target).closest(".action-menu-button"),b.Position.Right_Bottom,b.Position.Center)},isMenu:!0,isEnabled:o})),a},a.prototype._createSelectMenuButton=function(){var e=$("<div/>").addClass("select-menu-button");return e.append(this._createActionButton({label:o.GLocale.get(new o.GLocaleKey("GContextMenu","text.select")),click:e=>{var t=this._getHitsElments(),n=gDesigner.getActiveDocument().getEditor(),o=$("<div/>").gOverlay({releaseOnClose:!0,offsetX:100,offsetY:-25,clazz:"selected-menu-overlay"}),i=$("<div/>").appendTo(o);o.gOverlay("open",$(e.target).closest(".select-menu-button"));i.gSelectedPanel({clickCallback:e=>{n.clearSelection(),n.updateSelection(!1,[e])},renderFinishCallback:()=>{o.gOverlay("relayout")}}).gSelectedPanel("setSelections",t)},isMenu:!0,isEnabled:e=>{var t=this._getHitsElments(e);return!!(t&&t.elementHits&&t.elementHits.length>0)}})),e},a.prototype._updateIcon=function(e,t){e.empty(),e.attr("class","icon "+t)},a.prototype._getSelectedItems=function(){var e=gDesigner.getActiveDocument();if(e){var t=e.getEditor();if(t){var n=t.getSelection();return n||[]}}return[]},a.prototype._getFirstSelectedImageElement=function(){var e=this._getSelectedItems();return e&&e.length>0?e.find(e=>e instanceof o.GImage):null},a.prototype._getFirstSelectedTextElement=function(){var e=this._getSelectedItems();return e&&e.length>0?e.find(e=>e instanceof o.GText):null},a.prototype._setAllSelectionsHidden=function(){var e=this._getSelectedItems();e&&e.length>0&&i.GEditor.tryRunTransaction(gDesigner.getActiveDocument().getScene(),(function(){for(var t=0;t<e.length;t++)e[t].setProperty("vis",!1),e[t].removeFlag(o.GNode.Flag.Highlighted)}),o.GLocale.get(new o.GLocaleKey("GCommonNames","action.toggle-visibility")))},a.prototype._setAllSelectionsLocked=function(){var e=this._getSelectedItems();e&&e.length>0&&i.GEditor.tryRunTransaction(gDesigner.getActiveDocument().getScene(),(function(){for(;e.length>0;)e[0].setProperty("lkt",o.GBlock.LockType.Full),e[0].removeFlag(o.GNode.Flag.Highlighted),e[0].accept((function(e){e.removeFlag(o.GNode.Flag.Selected)}))}),o.GLocale.get(new o.GLocaleKey("GCommonNames","action.toggle-lock")))}},function(e,t,n){"use strict";n(17),n(540),n(22);var o=n(14);n(7),n(255);var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var r=i?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(o,a,r):o[a]=e[a]}return o.default=e,n&&n.set(e,o),o}(n(9)),a=o(n(373)),r=n(1);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}const l=n(71),c=n(426),{PRODUCT_NAME:d,PRODUCT_APP_NAME:u,PRODUCT_BUILD_NUMBER:p,PRODUCT_LANGUAGE:g,PRODUCT_ENVIRONMENT:h}=i.AmplitudeData.UserProperties;e.exports=class{constructor(e){gDesigner.addEventListener(l,this._handleDocumentEvent,this),gDesigner.addEventListener(c,this._handleLicenseChangedEvent,this),this._amplitudeHelper=e,this._updateUserProperties()}_updateUserProperties(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gDesigner.getLicense();this._amplitudeHelper.updateUserProperties({[d]:i.default.DESIGNER.TITLE,[u]:i.default.DESIGNER.TITLE,[p]:gDesigner.getVersion(),[g]:r.GLocale.lookupLocale(r.GLocale.getLanguage()).toUpperCase(),[h]:"production"},e)}_handleLicenseChangedEvent(e){this._updateUserProperties(e.license)}async _handleDocumentEvent(e){switch(e.type){case l.Type.Opened:this._amplitudeHelper.logEvent(i.AmplitudeData.Events.DOCUMENT_OPENED,{DOCUMENT_FILE_FORMAT:this._getDocumentOpenedFileFormat(e).toLowerCase(),DOCUMENT_SOURCE:this._getSource(e.document),DOCUMENT_RECENT:gContainer.isRecentDocument(e.document._storageItem)});break;case l.Type.Saving:const{referer:t}=e.data;this._isSimplifiedExporting(t)?this._documentExported(e):this._documentSaved(e)}}_documentExported(e){this._amplitudeHelper.logEvent(i.AmplitudeData.Events.DOCUMENT_EXPORTED,{DOCUMENT_EXPORT_TYPE:i.AmplitudeData.ExportTypes.Simple,DOCUMENT_FILE_FORMAT:e.data.ext})}_documentSaved(e){this._amplitudeHelper.logEvent(i.AmplitudeData.Events.DOCUMENT_SAVED,{DOCUMENT_FILE_FORMAT:this._getDocumentSavedFileFormat(e).toLowerCase(),DOCUMENT_DESTINATION:this._getSource(e.document)})}_isSimplifiedExporting(e){return!!e&&!e.endsWith(a.default.GVDESIGN.ext)}_getDocumentOpenedFileFormat(e){return e.document.fileExtension||e.document.getExtension()}_getDocumentSavedFileFormat(e){return e.data.ext||e.document.getExtension()}_getSource(e){return e.isCloudFile()?"cloud":"local"}}},function(e,t,n){"use strict";n(26),n(3);const o=n(418);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this,{edit:!1,inspect:!1,copy:!1,owner:!0,share:!1,sharing:!1,isPrivate:!1,comment:!1,role:o.ROLES.NO_ACCESS_ROLE,realtimeCollaborators:[]},e)}i.prototype.edit=!1,i.prototype.inspect=!1,i.prototype.copy=!1,i.prototype.owner=!0,i.prototype.share=!1,i.prototype.sharing=!1,i.prototype.comment=!1,i.prototype.role=o.ROLES.NO_ACCESS_ROLE,i.prototype.isPrivate=!1,i.prototype.realtimeCollaborators=[],i.prototype.toString=function(){return"Object [GShareState]"},e.exports=i},function(e,t,n){"use strict";n(17),n(158),n(26),n(7),n(183),n(3),n(84),n(28),n(22),n(117),n(106);var o=n(1);const{gApi:i,IS_TRUNK:a,IS_BETA:r,NODE_ENV:s,trunkURL:l,betaURL:c,ltsURL:d,rcURL:u,prodURL:p,HAS_ANNOTATIONS:g}=n(9),{sleep:h,watchDog:f}=n(34),m=n(37),y=n(77),v=[{id:"copy",label:new o.GLocaleKey("GShareDialog","text.allow-to-save-label"),info:new o.GLocaleKey("GShareDialog","text.allow-to-save-info"),pro:!1,sharePermissions:{copy:!0,comment:!!g},analyticsRef:"save"},{id:"inspect",label:new o.GLocaleKey("GShareDialog","text.allow-to-inspect-label"),info:new o.GLocaleKey("GShareDialog","text.allow-to-inspect-info"),pro:!0,default:!0,sharePermissions:{inspect:!0,comment:!!g},analyticsRef:"inspect"}];e.exports=class{constructor(e,t){this._user=e,this._dialog=$("<div/>").append($("<div/>").addClass("header").append($("<span/>").addClass("title").text(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.title")))).append($("<div/>").addClass("share-switch").append($("<span/>").text(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.switch-on")))).append($("<div/>").addClass("editor").append($("<label/>").addClass("g-switch").append($("<input>").attr("type","checkbox").on("change",e=>{const t=$(e.target).closest("input").is(":checked");gDesigner.stats("sharedialog_click_sharing",t);let n={access:t};t&&this._lastSharePermissions&&(n=Object.assign({},this._lastSharePermissions,n)),this._toggleLoading(!0),this._setSharePermissions(n).catch(this._handleException).finally(()=>{this._toggleLoading(!1)})})).append($("<div></div>")))))).append($("<span/>").addClass("subtitle").text(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.subtitle-on")))).append($("<div/>").addClass("share-link").append($("<div/>").addClass("share-input").append($("<input>").attr("type","text").attr("readonly",!0)).append($("<div/>").addClass("share-copied").append($("<span/>").text(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.copied")))))).append($("<div/>").addClass("share-copy").addClass("g-highlight-button").addClass("highlighted").append($("<span/>").addClass("icon").addClass("gravit-icon-share-copy")).append($("<span/>").text(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.copy")))).on("click",async e=>{const t=$(e.target).closest(".share-link"),n=t.find("input").val();n&&n.trim().length&&(gDesigner.stats("sharedialog_click_copy"),gContainer.copyToClipboard(n.trim()).then(async()=>{const e=t.find(".share-copied");e.addClass("visible"),await h(2e3),e.removeClass("visible")}).catch(e=>{m.alert(e&&e.message||o.GLocale.get(new o.GLocaleKey("GShareDialog","text.failed-copying-to-clipboard")))}))}))).append($("<div/>").addClass("share-settings").append(v.map(e=>{let{id:t,label:n,info:i,sharePermissions:a,shareBy:r,pro:s,default:l,analyticsRef:c}=e;const d=$("<div/>").attr("id",t).addClass("share-setting-container"),u=e=>{this._toggleLoading(!0);const t=$(e.target).closest("input").is(":checked");gDesigner.stats("sharedialog_click_${analyticsRef}",t);const n=Object.entries(a).reduce((e,n)=>(e[n[0]]=n[1]&&t,e),{}),o=Object.assign(this._getSharePermissions(),n,{access:!0});this._lastSharePermissions=o,this._setSharePermissions(o).catch(this._handleException).finally(()=>{this._toggleLoading(!1)})},p=()=>gDesigner.stats("sharedialog_nonprotriespro_".concat(c));return $("<label/>").addClass("share-setting-input").append($("<input>").attr("type","checkbox").on("click",s?f.trap(u,null,p):u).on("mousedown",s?f.trap(null,null,p):()=>{})).append($("<div/>").addClass("share-setting-panel").append($("<span/>").addClass("title").text(o.GLocale.get(n)).append(s?$("<span></span>").gPro():"")).append($("<span/>").addClass("subtitle").text(o.GLocale.get(i)))).appendTo(d),r&&this._buildShareByInput(r).appendTo(d),d}))).gDialog({releaseOnClose:!0,className:"g-share-dialog-legacy"}),$("<div/>").addClass("g-btn-close").append($("<span />").addClass("gravit-icon-close")).on("click",()=>this.close()).appendTo(this._dialog),this._toggleLoading(!0),i.getFile(t.getId(),!0).then(async e=>{if(this._file=e,this._updateProperties(),this._shareList&&this._shareList.length)this._lastSharePermissions=this._getSharePermissions();else{const e=v.map(e=>{let{sharePermissions:t}=e;return t}).reduce((e,t)=>Object.assign({},t,e),{});this._lastSharePermissions=e,await this._setSharePermissions(Object.assign(e,{access:!0}))}}).catch(this._handleException).finally(()=>{this._toggleLoading(!1)})}_handleException(e){m.alert(i.formatError(e))}_isSharingByLink(){return!0}_getSharePermissions(){if(this._shareList){const e=this._shareList.reduce((e,t)=>Object.assign(e,t),{});return v.filter(e=>{let{pro:t}=e;return!!t}).forEach(t=>{let{sharePermissions:n}=t;Object.entries(n).forEach(t=>{let[n,o]=t;Object.assign(e,{[n]:f.check(e[n],o)})})}),e}return{}}async _setSharePermissions(e){e&&Object.keys(e).length?(delete e.role,this._isSharingByLink()&&(this._shareList&&this._shareList.length?await Promise.all(this._shareList.map(t=>{let{token:n}=t;return i.updateShare(n,e)})):await i.createShare(this._file.id,e))):this._isSharingByLink()&&await Promise.all(this._shareList.map(e=>{let{token:t}=e;return i.deleteShare(t)})),this._file=await i.getFile(this._file.id,!0),this._updateProperties()}_updateProperties(){const e=this._file.link_accesses||[];this._shareList=e;const t=this._shareList.length&&!!this._shareList[0].access,n=this._shareList.length&&!!this._shareList[0].copy,i=this._shareList.length&&!!this._shareList[0].inspect;this._dialog.toggleClass("share-on",!!t),this._dialog.find(".subtitle").first().text(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.subtitle-".concat(t?"on":"off")))),this._dialog.find(".share-switch > span").text(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.switch-".concat(t?"on":"off")))),this._dialog.find(".share-switch input").prop("checked",t),this._dialog.find("#copy > .share-setting-input > input").prop("checked",n),this._dialog.find("#inspect > .share-setting-input > input").prop("checked",i);let a="";if(this._shareList&&this._shareList.length){const e=new URL(this._getOrigin()),t=e.searchParams;this._isSharingByLink()?t.set("token",this._shareList[0].token):t.set("d",this._file.id),a=e.toString()}this._dialog.find(".share-link > .share-input > input").val(a)}_getOrigin(){return gContainer.getRuntime()===y.Runtime.Browser||gContainer.getRuntime()===y.Runtime.PWA?location.origin:a?l:r?c:"rc"===s?u:"lts"===s?d:p}_buildShareByInput(e){if("user"===e)return $("<div/>").css("display","none").addClass("share-emails").gShareUserInput()}_toggleLoading(e){this._dialog.toggleClass("g-loading",!!e)}open(){this._dialog.gDialog("open",!0)}close(){this._dialog.gDialog("close")}}},function(e,t,n){"use strict";n(52),n(17),n(26),n(7),n(183),n(18),n(3),n(62),n(29),n(84),n(22),n(117),n(106);var o=n(1),i=n(13);const{FileExtended:a,gApi:r,trunkURL:s,betaURL:l,ltsURL:c,rcURL:d,prodURL:u,DateAPI:p,ShareRoles:g,Share:h,REMOVE_GUEST_USER_WHEN_ROLE_IS_NO_ACCESS:f,ENABLE_GUEST_ACCESS:m,defaultUserSettings:{share:{defaults:{private:{pro:y=!0}={}}={},quotas:{free:{private:v=0}={}}={}}={}}={}}=n(9),{IS_TRUNK:_,IS_BETA:b,IS_RC:w,IS_LTS:C}=n(217),{sleep:x}=n(34),S=n(166),E=n(37),A=n(77),T=n(372),G=n(418),P=n(240),D=n(421),L=n(322);class I{constructor(e,t,n){this._user=e,this._sharedFile=new a,this._initialSharedFile=null,this._statistics=null,this._storageItem=t,this._closeCallback=n}_initialize(){if(!this._isInitialized)return this._initLayout(),this._toggleLoading(!0),this._loadShare().then(()=>this._loadShareInit()).then(()=>this._updateProperties()).then(()=>{this._isInitialized=!0}).catch(e=>this._handleException(e)).finally(()=>this._toggleLoading(!1))}async _loadShareInit(){if(!this._sharedFile.getPublicShare()){const t=G.ROLES.DEFAULT_PUBLIC_ROLE;if(t){const n=(new h).assignRole(t);return this._storageItem.supportsExternalSharing()?this._storageItem.requestExternalShare(null,n).then(()=>e.call(this,n)).catch(e=>this._handleException(e)):e.call(this,n)}}function e(e){return r.createShare(this._storageItem.getId(),e).then(()=>(gDesigner.hasEventListeners(L)&&gDesigner.trigger(new L(L.Type.ShareCreated,this._storageItem)),this._loadShare()))}}_initLayout(){this._infoSection=$("<div/>").addClass("share-info-section").css("display","none").append($("<span/>").addClass("gravit-icon-info")).append($("<span/>").text(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.participants-will-be-invited")))),this._dialog=$("<div/>").append($("<div/>").addClass("header").append($("<span/>").addClass("title").text(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.title"))))).append($("<div/>").addClass("share-link").append($("<div/>").addClass("share-input").append($("<input>").attr("type","text").attr("readonly",!0)).append($("<div/>").addClass("share-copied").append($("<span/>").text(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.copied")))))).append($("<div/>").addClass("share-copy").addClass("g-highlight-button").addClass("highlighted").append($("<span/>").addClass("icon").addClass(P["gravit-icon-share-copy"])).append($("<span/>").text(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.copy")))).on("click",async e=>{const t=$(e.target).closest(".share-link"),n=t.find("input").val();if(n&&n.trim().length)return gDesigner.stats("sharedialog_click_copy"),gContainer.copyToClipboard(n.trim()).then(async()=>{const e=t.find(".share-copied");e.addClass("visible"),await x(2e3),e.removeClass("visible")}).catch(e=>{E.alert(e&&e.message||o.GLocale.get(new o.GLocaleKey("GShareDialog","text.failed-copying-to-clipboard")))})})).append(this._buildNativeShareButton())).append(this._buildShareByLink()).append(this._buildShareByUser()).append(this._infoSection).gDialog({releaseOnClose:!0,className:"g-share-dialog",closeCallback:()=>{this._sendInvitationEmails(),this._closeCallback&&this._closeCallback()}}),$("<div/>").addClass("g-btn-close").append($("<span />").addClass("gravit-icon-close")).on("click",()=>this.close()).appendTo($(this._dialog).parent())}_buildNativeShareButton(){if(!gContainer.isNativeShareLinkSupported())return null;const e=$("<div/>").addClass("share-native").addClass("g-highlight-button").addClass("highlighted").append($("<span/>").addClass("icon").addClass("gravit-icon-share-link-native"));return e.on("click",e=>{gDesigner.stats("sharedialog_click_native-sharing");const t=this._dialog.find(".share-link").find("input").val();if(t&&t.trim().length){const e=this._user.getFullUserName(),n=this._sharedFile.name,i=o.GLocale.get(new o.GLocaleKey("GShareDialog","text.native-link-share-title")).replace("%filename",n),a=o.GLocale.get(new o.GLocaleKey("GShareDialog","text.native-link-share-description")).replace("%username",e);gContainer.nativeShareLink(i,a,t).catch(e=>console.error(e))}}),e}_getRole(e){return G.makeFromShare(e)}_loadShare(){if(!this._storageItem.hasMixin(D))throw console.log("Storage item not supported"),"Storage not supported";return this._storageItem.getOrCreateCollaborativeFile().then(e=>{this._sharedFile=e,this._initialSharedFile||(this._initialSharedFile=this._sharedFile.clone())}).then(async()=>{this._statistics=await r.getSharingStatistics()})}_setSelectedPrivateShare(e){if(this._dialog.find(".share-by-user > .share-settings > .share-setting.g-selected").removeClass("g-selected"),e){const t=this._dialog.find('.share-by-user > .share-settings > .share-setting[user_id="'.concat(e,'"]')).addClass("g-selected")[0];t&&t.scrollIntoView({behavior:"smooth"})}}_handleException(e){console.error(e.stack?e.stack:e),E.alert(r.formatError(e)),this._toggleLoading(!1)}_getPrivateAndInvitedShareList(){const e=this._sharedFile.getPrivateShareList().filter(e=>!e.owner||e.id!==this._user.getUID()),t=this._sharedFile.getInvitedShareList&&this._sharedFile.getInvitedShareList()||[];return e.concat(t)}_getShareListLayout(e){return o.GUtil.bubbleSort(e,(e,t)=>{let{created:n}=e,{created:o}=t;return p.gt(n,o,!1)?1:p.lt(n,o,!1)?-1:0}).map(e=>{const t=new S(e),n=t.getUID(),i=t.getEmail(),{guest:a=!1}=e,s=this._getRole(e),l=this._canResendInvitationEmail(e)?[{icon:"gravit-icon-resend-invitation-email",label:o.GLocale.get(new o.GLocaleKey("GShareDialog","text.resend-invitation-email")),click:()=>{gDesigner.stats("sharedialog_private-share_resend"),this._toggleLoading(!0),r.share.sendInvitationEmails(this._storageItem.getId(),[i]).then(()=>{E.alert(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.resent-invitation-email")).replace("%email",i))}).catch(e=>this._handleException(e)).finally(()=>this._toggleLoading(!1))}}]:[],c=this._createShareSetting({label:i,icon:this._getAvatar(t),defaultRole:G.ROLES.DEFAULT_PRIVATE_ROLE,removeCallback:()=>{this._unshareWithUser({id:n,email:i,role:s})},buttons:l}).attr("user_id",n).on("click",()=>{this._setSelectedPrivateShare(n)});return c.find(".g-role-selector").gRoleSelector("role",s).on("rolechange",t=>{const r=$(t.target).closest(".g-role-selector").gRoleSelector("role");r?f&&a&&r.is(g.NoAccess)?this._unshareWithUser({id:n,email:i,role:r}):this._shareWithUser({id:n,email:i,role:r},e.assignRole(r)).catch(()=>{$(t.target).closest(".g-role-selector").gRoleSelector("restoreRole")}):E.alert(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.role-required")))}),c})}_updateProperties(){if(this._sharedFile.getPublicShare()){const e=this._getRole(this._sharedFile.getPublicShare());this._dialog.find(".share-by-link .g-role-selector").gRoleSelector("role",e)}this._infoSection.css("display",this._hasNewInvitationEmails()?"":"none");const e=this._getPrivateAndInvitedShareList(),t=gDesigner.getLicense();if(0===t.getPrivateShareQuota())this._dialog.find(".share-by-user").addClass("g-disabled").on("click",e=>{$(e.target).hasClass("share-by-user")&&gDesigner.handlePROFeatureInterruption()});else if(t.getPrivateShareQuota()>0){const n=this._statistics?this._statistics.getPrivateShareQuota():0,i=t.getPrivateShareQuota()-n;this._dialog.find(".share-by-user .subtitle").css("display","").text(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.projects-left")).replace("%number",i));const a=i<=0&&!(e&&e.length);this._dialog.find(".share-by-user .add-button").prop("disabled",a)}else this._dialog.find(".share-by-user .subtitle").css("display","none"),this._dialog.find(".share-by-user .add-button").prop("disabled",!1);this._dialog.find(".share-by-user > .share-settings").empty(),e&&e.length&&this._dialog.find(".share-by-user > .share-settings").append(this._getShareListLayout(e));let n="";const i=new URL(this._getOrigin()),a=i.searchParams;this._sharedFile.getPublicShare()?a.set("token",this._sharedFile.getPublicShare().token):a.set("d",this._storageItem.getId()),n=i.toString(),this._dialog.find(".share-link > .share-input > input").val(n)}_getOrigin(){return gContainer.getRuntime()===A.Runtime.Browser||gContainer.getRuntime()===A.Runtime.PWA?location.origin:_?s:b?l:w?d:C?c:u}_buildShareByLink(){const e=this._createShareSetting({icon:$("<span/>").addClass("gravit-icon-public-share-link").addClass("icon"),label:o.GLocale.get(new o.GLocaleKey("GShareDialog","text.public-share-link")),defaultRole:G.ROLES.DEFAULT_PUBLIC_ROLE}),t=e.find(".g-role-selector");return e.find(".g-role-selector").on("rolechange",()=>{const n=t.gRoleSelector("role");if(!n)return void E.alert(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.role-required")));gDesigner.stats("sharedialog_public-share_role",n.name);const i=this._sharedFile.getPublicShare();if(i)return this._toggleLoading(!0),this._storageItem.supportsExternalSharingByLink()?this._storageItem.updateDomainShare(n).then(()=>{a.call(this)}).catch(t=>{E.alert(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.error-change-role-failed"))),e.find(".g-role-selector").gRoleSelector("restoreRole"),this._toggleLoading(!1),console.error("updateDomainShare error: ",t)}):a.call(this);function a(){r.updateShare(i.token,i.assignRole(n)).then(()=>this._loadShare()).then(()=>this._updateProperties()).catch(e=>this._handleException(e)).finally(()=>this._toggleLoading(!1))}}),$("<div/>").addClass("share-settings-section").append($("<div/>").addClass("share-settings-container").addClass("share-by-link").append($("<div/>").addClass("share-settings").append(e)))}_buildShareByUser(){const e=$("<input/>").addClass("private-share-email-input").attr("placeholder",o.GLocale.get(new o.GLocaleKey("GShareDialog","text.private-share-placeholder"))).attr("type","email").on("keypress",e=>{const t=e.which||e.charCode||e.keyCode;if(i.GKey.translateKey(t)===i.GKey.Constant.ENTER)return e.preventDefault(),e.stopPropagation(),$(e.target).closest(".share-by-user").find(".add-button").trigger("click"),!1}),t=$("<div/>").gRoleSelector({defaultRole:G.ROLES.DEFAULT_PRIVATE_ROLE});return t.on("rolechange",()=>{const e=t.gRoleSelector("role");gDesigner.stats("sharedialog_private-share_role",e.name)}),$("<div/>").addClass("share-settings-section").append($("<div/>").addClass("share-settings-container").addClass("share-by-user").append($("<div/>").addClass("share-settings-header").append($("<div/>").addClass("share-settings-header-caption").append($("<span/>").addClass("title").text(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.private-sharing"))).gPro({pro:y||-1!==v,badgeAlwaysVisible:!0})).append($("<span/>").addClass("subtitle"))).append($("<div/>").addClass("share-settings-header-input").append($("<div/>").addClass("input-section").append(e).append(t)).append($("<button/>").addClass("add-button").addClass("g-highlight-button highlighted").text(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.private-sharing-add"))).on("click",n=>{const o=(e.val()||"").trim(),i=t.gRoleSelector("role");this._tryPrivateShareWithUser(o,i,n)})))).append($("<div/>").addClass("share-settings")))}async _tryPrivateShareWithUser(e,t,n){if(gDesigner.stats("sharedialog_private-share_add"),!e)return void E.alert(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.empty-email")));if(!t)return void E.alert(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.role-required")));this._toggleLoading(!0);try{if(this._storageItem instanceof T.Item&&!await this._storageItem.isEmailFromCorporateDomain(e))return this._handleException(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.you-can-not-invite-user-from-another-domain"))),void this._toggleLoading(!1)}catch(e){}const i=e=>{this._toggleLoading(!0);const n=(new h).assignRole(t),o=this._dialog.find(".share-settings-header-input"),i=o.find(".g-role-selector"),a=o.find(".private-share-email-input");this._shareWithUser(e,n,!1).then(e=>{e?a.val(null):gDesigner.stats("sharedialog_invalid-email")}).catch(()=>{i.gRoleSelector("restoreRole")}).finally(()=>{this._toggleLoading(!1)})};try{let t=await r.listUsers({q:e,all:!0}).then(e=>e.filter(e=>e.id!==this._user.getUID()).map(e=>new S(e)));const a=t&&t.length>0;let s=!0;if(a){this._storageItem instanceof T.Item&&this._storageItem.getCloudClient().isCorporate()&&(t=t.filter(e=>e.corporate_provider&&e.corporate_provider===this._storageItem.getCloudClient().getCorporateProviderName()));const e=(this._sharedFile.getPrivateShareList()||[]).filter(e=>e.role!==g.Owner.id).map(e=>e.id);e&&e.length&&(t=t.filter(t=>{let{id:n}=t;return!e.includes(n)}),s=!1)}if(t&&t.length>0)if(this._toggleLoading(!1),t.length>1){const o=$(n.target).closest(".share-settings-header-input");this._pickUser(e,t,o).then(t=>{t&&i(Object.assign(t,{email:e}))}).catch(this._handleException)}else i(Object.assign(t[0],{email:e}));else s?i({id:e,email:e}):this._handleException(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.private-share-no-options-left")).replace("%email",e))}catch(e){this._handleException(e)}}_createShareSetting(e){let{icon:t,label:n,defaultRole:o,removeCallback:i,buttons:a}=e;return $("<div/>").addClass("share-setting").append(t||"").append($("<span/>").addClass("label").text(n)).append($("<div/>").gRoleSelector({defaultRole:o,buttons:a})).append(i?$("<div/>").addClass("gravit-icon-x-delete").on("click",i):"")}_getAvatar(e){const t=e.getUserColor(),{avatar:n}=e,o=$("<div/>").addClass("avatar");return this._shouldShowAvatar(e)?this._isSVGAvatar(n)?$(n).appendTo(o):o.css({backgroundImage:'url("'.concat(n,'")')}):(e.getFirstName()&&!e.guest||(e.name=e.getFullUserName()),o.css("border-color",t).css("background-color",t).append($("<span/>").text(e.getUserNameInitials()))),o}_getAvatarForPicker(e){const t=e.getUserColor(),{avatar:n}=e,o=$("<div/>").append($("<div/>").addClass("g-user-selector-avatar").css("border-color",t).css("background-color",t).append($("<span/>").text(e.getUserNameInitials()))).addClass("g-user-selector-all-avatar");return this._shouldShowAvatar(e)&&(this._isSVGAvatar(n)?$(n).appendTo(o):o.append($("<div/>").addClass("avatar").append($("<div/>").addClass("gravatar-avatar").css({backgroundImage:'url("'.concat(n,'")')})))),o}_isSVGAvatar(e){return"<svg>"===e.substr(0,"<svg>".length)}_shouldShowAvatar(e){return!!e.hasOwnPictureAvatar()||!(!e.avatar||-1===e.avatar.indexOf("static/assets"))}_isSameUser(e,t){let n=Object.assign({},e),o=Object.assign({},t);return n.id||(n.id=n.email),o.id||(o.id=o.email),e.id===t.id||e.id===t.email||e.id===t.login||e.email===t.email||e.login===t.email}_shareWithUser(e,t){let n,i,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("object"!=typeof e||!e.email)throw Error("Invalid args");({email:i,id:n}=e),n||(n=i);const r=this._user;return n===r.id||n===r.email||n===r.login?(E.alert(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.you-can-not-invite-yourself"))),Promise.reject()):(this._toggleLoading(!0),this._storageItem instanceof T.Item?this._storageItem.isEmailFromCorporateDomain(i).then(e=>{if(e)return this._prepareShare(i,t,n,a);throw o.GLocale.get(new o.GLocaleKey("GShareDialog","text.you-can-not-invite-user-from-another-domain"))}).catch(e=>{throw this._handleException(e),e}):this._prepareShare(i,t,n,a))}_prepareShare(e,t,n,o){return this._storageItem.supportsExternalSharing()?this._storageItem.requestExternalShare(e,t).then(()=>this._processShare(e,t,n,o)).catch(e=>{throw this._handleException(e),e}):this._processShare(e,t,n,o)}_processShare(e,t,n,i){const a=i?t:Object.assign(t,{sendEmail:i,validated:!0}),s=this._storageItem.toString();let l=!1;return this._storageItem instanceof T.Item&&(l=this._storageItem.getCloudClient().isCorporate()),s.indexOf("GCloudStorage")>=0?gDesigner.stats("sharedialog_private-share_cloud"):s.indexOf("GGoogleDriveStorage")>=0?gDesigner.stats("sharedialog_private-share_".concat(l?"corporate-":"","googledrive")):s.indexOf("GSharePointStorage")>=0&&gDesigner.stats("sharedialog_private-share_".concat(l?"corporate-":"","sharepoint")),r.shareWithUser(this._storageItem.getId(),n,a).then(async e=>(await this._loadShare(),this._updateProperties(),this._setSelectedPrivateShare(e.user_id),e)).catch(t=>{if(t.status)switch(t.status){case r.HTTP_STATUS_CODES.CONFLICT:return void E.alert(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.you-can-not-invite-yourself")));case r.HTTP_STATUS_CODES.NOT_FOUND:return void E.alert(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.invalid-email")).replace("%email",e));case r.HTTP_STATUS_CODES.FORBIDDEN:return void("only same domain users allowed"===t.message?E.alert(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.you-can-not-invite-user-from-another-domain"))):E.alert(o.GLocale.get(new o.GLocaleKey("GCommonNames","error.http.forbidden"))))}this._handleException(t)}).finally(()=>this._toggleLoading(!1))}_unshareWithUser(e){const{email:t,role:n}=e,{id:o=t}=e;return this._toggleLoading(!0),this._storageItem.supportsExternalSharing()?this._storageItem.requestExternalUnShare(t,n).then(()=>i.call(this)).catch(e=>{this._handleException(e)}):i.call(this);function i(){return r.unshareWithUser(this._storageItem.getId(),o).then(()=>this._setSelectedPrivateShare(null)).then(()=>this._loadShare()).then(()=>this._updateProperties()).catch(e=>this._handleException(e)).finally(()=>this._toggleLoading(!1))}}_toggleLoading(e){this._isLoading=!!e,$(this._dialog).data("gdialog").closable=!e,this._dialog.toggleClass("g-loading",!!e)}async open(){await this._initialize(),this._dialog.gDialog("open",!0)}close(){this._isLoading||this._dialog.gDialog("close")}_canResendInvitationEmail(e){const t=G.makeFromShare(e);if(t&&!t.is(g.NoAccess)){return(this._initialSharedFile&&this._initialSharedFile.getPrivateShareList().map(e=>e.id).concat(this._initialSharedFile.getInvitedShareList().map(e=>e.id))||[]).includes(e.id)}return!1}_hasNewInvitationEmails(){return this._getNewAddedShareEmails().length>0}async _sendInvitationEmails(){const e=this._getNewAddedShareEmails();if(e&&e.length>0)return m?this._sendGuestInvitation(e):this._sendUserInvitation(e)}_sendUserInvitation(e){return gDesigner.stats("sharedialog_private-share_invite"),r.share.sendInvitationEmails(this._storageItem.getId(),e).then(()=>{this._showSentInvitationEmailAlert(e)})}_sendGuestInvitation(e){let t=[],n=e.slice();return Promise.all(n.map(e=>r.signupGuestUser({email:e,file_id:this._storageItem.getId()}).catch(()=>{t.push(e)}))).then(()=>{if(t.length)return r.share.sendInvitationEmails(this._storageItem.getId(),t).catch(()=>{})}).then(()=>{this._showSentInvitationEmailAlert(e)})}_showSentInvitationEmailAlert(e){E.alert(o.GLocale.get(new o.GLocaleKey("GShareDialog","text.sent-invitation-email")).replace("%emails",e.join(", ")),null,{className:"g-sent-invitation-email-dialog"})}_pickUser(e,t,n){return new Promise(o=>{let i;const a=$("<div/>").addClass("g-user-selector").append($("<div/>").addClass("g-user-selector-container").append(t.map(t=>$("<div/>").addClass("g-user-selector-content").append(this._getAvatarForPicker(t)).append($("<div/>").addClass("g-user-selector-info").append($("<span/>").text(t.getFullUserName())).append($("<span/>").text(e))).on("click",()=>{i=t,a.gOverlay("close")})))).gOverlay({clazz:"g-share-dialog-user-selector",releaseOnClose:!0,padding:!1,closeCallback:()=>o(i)}).gOverlay("open",n)})}_getNewAddedShareEmails(){const e=this._initialSharedFile&&this._initialSharedFile.getPrivateShareList().map(e=>e.id)||[],t=this._initialSharedFile&&this._initialSharedFile.getInvitedShareList().map(e=>e.email)||[];return this._sharedFile.getPrivateShareList().filter(t=>!e.includes(t.id)).filter(e=>!t.includes(e.email)).map(e=>e.email).concat(this._sharedFile.getInvitedShareList().filter(e=>!t.includes(e.email)).map(e=>e.email))}}I.prototype._isInitialized=!1,I.prototype._sharedFile=null,I.prototype._isLoading=!1,e.exports=I},function(e,t,n){"use strict";n(52),n(17),n(7),n(18),n(99),n(62),n(124),n(22);var o=n(9);const i=n(278),a=n(206),r=n(71),s=n(519),l=n(166),c=n(377);var d=null;function u(e){if(d)throw new Error("GCloudCommunicationManager is a singleton");e.addEventListener(i,this._userLoggedEvent,this),e.addEventListener(r,this._documentEvent,this),d=this,this.initialize()}u.clearSingleton=function(){d=null},u.prototype._fileCacheMapExt={},u.prototype._userCache=null,u.prototype.getUser=async function(){this._initializeUserCache();const e=await this._userCache.get();return e||this._userCache.reset(),e},u.prototype.confirmEmail=function(e){return o.gApi.confirmEmail(e).then(e=>(this._removeUserCache(),e))},u.prototype.updateUser=function(e){return o.gApi.updateUser(e).then(e=>(this._removeUserCache(),new l(e)))},u.prototype.updateAvatar=function(e){return o.gApi.updateAvatar(e).then(e=>(this._removeUserCache(),e))},u.prototype.useAuthorizationToken=function(e){this._removeUserCache(),o.gApi.useAuthorizationToken(e)},u.prototype.userPropertiesChanged=function(){this._removeUserCache()},u.prototype.getFileExtendedCached=async function(e){var t=(e=e||gDesigner.getActiveDocument()).getId();return t?(this._fileCacheMapExt[t]||(this._fileCacheMapExt[t]=new s(()=>this._getFileExtended(e))),this._fileCacheMapExt[t].get()):null},u.prototype._userLoggedEvent=function(e){const{user:t}=e;t?(this._initializeUserCache(),this._userCache.setCacheValue(t)):this._removeUserCache(),this._resetAllCache()},u.prototype._removeUserCache=function(){this._userCache=null},u.prototype._initializeUserCache=async function(){this._userCache||(this._userCache=new s(()=>o.gApi.getUser().then(e=>new l(e)).catch(()=>null),o.USER_CHECK_MIN_WAIT))},u.prototype._updateDocState=function(e){this._resetFileCache(e)},u.prototype._resetFileCache=function(e){if(e){var t=e.getId();return t&&this._fileCacheMapExt[t]?this._fileCacheMapExt[t].reset():void 0}},u.prototype._resetAllCache=function(){this._fileCacheMapExt={}},u.prototype._documentEvent=function(e){const t=e.document;if(t)switch(e.type){case r.Type.Added:this._updateDocState(t),t.addEventListener(c,this._collaborationEvent,this);break;case r.Type.Removed:t.removeEventListener(c,this._collaborationEvent,this);break;case r.Type.Modified:this._updateDocState(t)}},u.prototype._collaborationEvent=function(e){const{sender:t,type:n}=e;n===c.Type.ShareUpdate&&this._updateDocState(t)},u.prototype._getFileExtended=async function(e){const t=(e=e||gDesigner.getActiveDocument())&&e.getStorageItem();if(!t)return null;const n=t.getId();return n?t instanceof a.Item?this.getFileExtended(n).catch(()=>null):t&&t.supportsSharing()&&t.supportsShadowFile()?t.getOrCreateCollaborativeFile():null:null};var p={};async function g(e,t,n){let i,a;try{if(i=o.gApi[t](n),!(i instanceof Promise))return i;a=await i}catch(e){throw e}finally{delete e[n]}return a}u.prototype.initialize=function(){const e=Object.keys(d).filter(e=>e.startsWith("get")),t=o.CACHED_GAPI_FUNCTIONS.filter(t=>/^is|^get/.test(t)&&!e.includes(t));for(let e of t)p[e]={},d[e]=async function(e){const t=p[this];if(void 0!==t[e])return t[e];const n=g(t,this,e);return n instanceof Promise&&(t[e]=n),n}.bind(e)},e.exports=u},function(e,t,n){"use strict";var o=n(14);n(26),n(7);var i=o(n(10));n(1298);const a=n(787),r=n(1544),s=n(376),l=n(1299),c=n(426),{SHARE_ENGINE:d,HAS_ANNOTATIONS:u,ShareRoles:p,FileStatus:{APPROVED:g},FILE_REVIEW_ENABLED:h,LEGACY_SHARE_DIALOG:f}=n(9);function m(e){this._state=new r,d&&gDesigner.addEventListener(l,this._shareStateChangedEvent,this),gDesigner.addEventListener(a,this._applicationStatusEvent,this),gDesigner.addEventListener(c,this._licenseChangedEvent,this),this._init(e)}m.prototype._init=async function(e){e&&e()},m.prototype._shareStateChangedEvent=function(e){const t=new r(Object.assign({},this._state)),{owner:n,share:o,sharing:i,edit:a,inspect:s,copy:l,comment:c,isPrivate:d,role:p,realtimeCollaborators:g=[]}=e.state;n?Object.assign(t,{edit:!0,saveAs:!0,export:!0,inspect:!0,copyPaste:!0,comment:!!u}):Object.assign(t,{edit:a,saveAs:l,export:l,copyPaste:l,inspect:s,comment:c}),Object.assign(t,{isShareEnabled:o,isSharing:i,isPrivateSharing:d,role:p,realtimeCollaborators:g}),this._setState(t,e.document)},m.prototype._setState=function(e,t){i.default.equals(e,this._state,!0)||(this._state=e,this._triggerAppStateEvent(t,e))},m.prototype._triggerAppStateEvent=function(e,t){gDesigner.hasEventListeners(s)&&gDesigner.trigger(new s(e,t))},m.prototype._applicationStatusEvent=function(e){e.status===a.Status.Ready&&gDesigner.isAnonymous()&&gDesigner.addNotification({anonymous:!0})},m.prototype._licenseChangedEvent=function(e){},m.prototype.isShareEnabled=function(){return!!this._state.isShareEnabled&&d},m.prototype.isShareEngineEnabled=function(){return d},m.prototype.isSharing=function(){return!!this._state.isSharing&&d},m.prototype.isPrivateSharing=function(){return this._state.isPrivateSharing&&!!d},m.prototype.getRealtimeCollaborators=function(){return d&&this._state.realtimeCollaborators||[]},m.prototype.isEditingEnabled=function(){return!gDesigner.getLicense().isGuest()&&(this._state.edit||!!f&&this._state.inspect)},m.prototype.isSavingAsEnabled=function(){return!gDesigner.getLicense().isGuest()&&this._state.saveAs},m.prototype.isSavingToCloudEnabled=function(){return!gDesigner.getLicense().isGuest()&&this._state.edit},m.prototype.isExportEnabled=function(){return!gDesigner.getLicense().isGuest()&&this._state.export},m.prototype.isInspectEnabled=function(){return this._state.inspect||this._state.edit},m.prototype.isPagesInspectEnabled=function(){return this.isInspectEnabled()},m.prototype.isCommentingEnabled=function(){return this._state.comment&&u},m.prototype.isCommentingEditingEnabled=function(){if(!this.isCommentingEnabled())return!1;if(h){var e=!0,t=gDesigner.getActiveDocument(),n=t&&t.getStorageItem(),o=n&&n.getFile();return o&&o.status===g&&(e=!1),e}return!0},m.prototype.isCopyPasteEnabled=function(){return this._state.copyPaste},m.prototype.hasAccess=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=gDesigner.getShareManager().getRole();return!(!n||!(!t&&n.is(p.Owner)||await n.can(e)))},m.prototype.hasPermission=function(e,t){const n=gDesigner.getShareManager().getRole(e);return!(!n||!n.hasPermission(t))},m.prototype.hasRole=function(e){const t=gDesigner.getShareManager().getRole();return!!t&&t.is(e)},m.prototype.isFileFormatEnabledForSaveAs=function(e){return this._state.saveAs},m.prototype.isCreatingNewDocumentEnabled=function(){return!gDesigner.getLicense().isGuest()},m.prototype.isOpenFromCloudEnabled=function(){return!gDesigner.getLicense().isGuest()},m.prototype.isOnlyFileOpenFromCloudEnabled=function(){return!1},m.prototype.isOpenFromRecentFilesEnabled=function(){return!0},m.prototype.isDocumentTabManagementEnabled=function(){return this._state.isDocumentTabManagementEnabled},m.prototype.isOpenFilesFromLocalEnabled=function(){return!gDesigner.getLicense().isGuest()},m.prototype.isReminderManagerEnabled=function(e){return!0},m.prototype.isInAppPurchaseAvailable=function(e){return!0},m.prototype.isLicenseUpgradeable=function(e){return(e=e||gDesigner.getLicense()).canUpgrade()},m.prototype.isImportResourcesEnabled=function(){return this.isOpenFilesFromLocalEnabled()},e.exports=m},function(e,t,n){"use strict";n(26),n(3);const{HAS_ANNOTATIONS:o}=n(9);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this,{isShareEnabled:!1,isSharing:!1,isPrivateSharing:!1,role:void 0,realtimeCollaborators:[],edit:!0,save:!0,export:!0,inspect:!0,comment:!!o,copyPaste:!0,isDocumentTabManagementEnabled:!0},e)}i.prototype.isDocumentTabManagementEnabled=!0,i.prototype.isShareEnabled=!1,i.prototype.isSharing=!1,i.prototype.isPrivateSharing=!1,i.prototype.role=void 0,i.prototype.realtimeCollaborators=[],i.prototype.edit=!0,i.prototype.saveAs=!0,i.prototype.export=!0,i.prototype.inspect=!0,i.prototype.comment=!!o,i.prototype.copyPaste=!0,i.prototype.toString=function(){return"Object [GApplicationState]"},e.exports=i},function(e,t,n){"use strict";n(17),n(22);var o=n(9);const{ANNOTATION_EVENT:i,SHARE_EVENT:a,USER_EVENT:r,REVIEW_STATUS_CHANGED:s,LOCK_REQUEST_EVENT:l,LOCK_UPDATE_EVENT:c,FILE_UPDATE_EVENT:d,FILE_AUTO_SAVE_EVENT:u}=o.gApi.COLLABORATION_EVENTS,p=n(377),g=n(71);function h(){this._documents=new Map,gDesigner.addEventListener(g,this._documentEvent,this)}h.prototype._documents=null,h.prototype._documentEvent=function(e){const t=e.document;switch(e.type){case g.Type.Added:case g.Type.Activated:case g.Type.StorageItemUpdated:(!t.isLockedByVersionHistory()&&t.isCloudFile()||t.getId()&&t.getStorageItem()&&t.getStorageItem().supportsShadowFile())&&this.attachDocument(t);break;case g.Type.Removed:this.detachDocument(t)}},h.prototype.attachDocument=function(e){if(!o.ENABLE_COLLABORATION)return;if(this._documents.has(e))return;const t=new o.gApi.WebSocketClient;t.setToken(e.getToken()),t.connect("/v2/realtime/"+e.getId()),o.ENABLE_COLLABORATION&&(t.on(i,t=>{this._trigger(e,p.Type.AnnotationsUpdate,t.data)}),t.on(r,t=>{this._trigger(e,p.Type.UserUpdate,t.data)}),t.on(s,t=>{this._trigger(e,p.Type.ReviewStatusChanged,t.data)}),t.on(l,t=>{this._trigger(e,p.Type.LockRequest,t.data)}),t.on(c,t=>{const n=t.data&&t.data.lock?new o.Lock(t.data.lock):null;this._trigger(e,p.Type.LockUpdated,n)}),t.on(d,t=>{this._trigger(e,p.Type.FileUpdate,t.data)})),o.SHARE_ENGINE&&t.on(a,t=>{this._trigger(e,p.Type.ShareUpdate,t.data)}),o.AUTO_SAVE_ENABLED&&t.on(u,t=>{this._trigger(e,p.Type.FileAutoSave,t.data)}),this._documents.set(e,{doc:e,ws:t})},h.prototype.detachDocument=function(e){const t=this._documents.get(e);t&&(t.ws.close(),this._documents.delete(e))},h.prototype._trigger=function(e,t,n){const o=new p(t,n);e.hasEventListeners(o)&&e.trigger(o)},e.exports=h},function(e,t,n){"use strict";var o=n(14)(n(1547));e.exports=class{constructor(e,t){this._promiseManager=new o.default}getAnnotations(e,t){return this._fetch({id:e,shareToken:t})}updateAnnotations(e,t,n){return this._fetch({id:e,data:t,shareToken:n})}_fetch(e){let{id:t,data:n,shareToken:o}=e;const i=n?()=>gApi.updateAnnotations(t,n,o):()=>gApi.getAnnotations(t,o);return this._promiseManager.pushPromise(i)}}},function(e,t,n){"use strict";n(7),n(183);e.exports=class{constructor(){this._promiseQueue=[]}pushPromise(e){if(0===this._promiseQueue.length){const t=e();return t.finally(()=>{this._promiseQueue.shift()}),this._promiseQueue.push(t),t}const t=this._promiseQueue.length,n=this._promiseQueue[t-1],o=new Promise(t=>{n.then(()=>{e().then(t)})});return o.finally(()=>{this._promiseQueue.shift()}),this._promiseQueue.push(o),o}}},function(e,t,n){"use strict";n(17),n(89),n(3),n(22),n(117),n(106);var o=n(9),i=n(34);const a=n(1162),r=n(1549);e.exports=class extends a{constructor(){super(),this._url=new URL(o.gApi.url)}setId(e){return this._id=e,this}setTime(e){return this._url.searchParams.set("time",e.getTime()),this}setEndpoint(e){return this._url.pathname=e,this}setLanguage(e){return this._url.searchParams.set("lang",e),this}setCampaign(e){return e&&this._url.searchParams.set("campaign",e),this}setShareFile(e){return e&&this._url.searchParams.set("shareFile",e),this}setDashboard(e){return e&&this._url.searchParams.set("dashboard",e),this}setProduct(e){return e&&this._url.searchParams.set("product",(0,i.stringToBase64String)(JSON.stringify(e))),this}setInAppPurchasesAvailable(e){return this._url.searchParams.set("iap",e),this}setLayout(e){return e=e||0,this._url.searchParams.set("layout",e),this}build(){return new r(this._id,this._url.toString())}}},function(e,t,n){"use strict";const o=n(1228),i=n(1163),{gApi:a}=n(9);e.exports=class extends i{constructor(e,t){super(),this._id=e,this._url=t}open(){if(this._isOpen())return;const e=new o({id:this._id,className:"overlay"});e.open(this._url),e.on("error",()=>{e.close()}),a.isCookieEnabled&&!a.isCookieEnabled()&&e.on("load",()=>{e.postMessage({cmd:"auth",token:a.getAuthorizationToken()},a.url)})}_isOpen(){return!!$("#".concat(this._id)).length}}},function(e,t,n){"use strict";n(26);const o=n(1162);e.exports=class extends o{constructor(e){super(),this._crossViewClass=e,this._dialogOptions={}}setTime(e){return Object.assign(this._dialogOptions,{now:e}),this}setEndpoint(e){return Object.assign(this._dialogOptions,{endpoint:e}),this}setCampaign(e){return Object.assign(this._dialogOptions,{campaign:e}),this}setShareFile(e){return Object.assign(this._dialogOptions,{shareFile:e}),this}setDashboard(e){return Object.assign(this._dialogOptions,{dashboard:e}),this}setProduct(e){return Object.assign(this._dialogOptions,{product:e}),this}setInAppPurchasesAvailable(e){return Object.assign(this._dialogOptions,{inAppPurchasesAvailable:e}),this}setLayout(e){return e=e||0,Object.assign(this._dialogOptions,{layout:e}),this}build(){return new this._crossViewClass(this._dialogOptions)}}},function(e,t,n){"use strict";var o=n(14);n(26),n(7);var i=n(9),a=n(1),r=o(n(1163));function s(){}a.GObject.inherit(s,i.GPaywallDialog.Impl),s.prototype.open=function(e){let{dialog:t}=e;this._dialog=t.getHTMLElement().gDialog({releaseOnClose:!0,nowrap:!0}).gDialog("open")},s.prototype.close=function(){let{licenseHasBeenUpgraded:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._dialog.closest(".g-dialog-container").remove(),e&&gDesigner.requestLicenseUpdate()},s.prototype.openPurchaseFlow=async function(e){let{dialog:t,options:n={}}=e;await gDesigner.openPaymentDialog(null,n).catch(()=>null),t.close()},s.prototype.openExternalLink=function(e){let{link:t}=e;gContainer.openExternalLink(null,t)},s.prototype.getProduct=function(){return Promise.resolve({price:-1,listPrice:-1,locale:navigator.language,currency:"USD"})},s.prototype.getLicense=function(){let e=gDesigner.getLicense();return Promise.resolve({license:e.getLicenseType(),expire:e.getExpirationDate(),created:e.getCreationDate(),legacy:e.isLegacy()})},s.prototype.getUser=function(){return gDesigner.getSyncUser()},s.prototype.getLanguage=function(){return a.GLocale.getLanguage()};class l extends r.default{constructor(e){super(),this._dialogOptions=e}async open(){new i.GPaywallDialog(Object.assign(this._dialogOptions,{impl:new s,gApi:i.gApi})).open()}}e.exports=l},function(e,t,n){"use strict";n(7);var o=n(1);const i=n(1303),a=n(1553);class r{static openTrialExpired(){return r._openReminder("trialexpired")}static openTrialMessage(){return r._openReminder("trialmessage")}static openProExpireSoon(){return r._openReminder("proexpiresoon")}static openProExpired(){return r._openReminder("proexpired")}static openUpgradeScreen(){return r._openReminder("upgrade")}static async _openReminder(e){const t=await this._getProduct();return(await i.newBuilder(a)).setId("reminder-cross-frame").setEndpoint("/pro/reminder/".concat(e)).setTime(gDesigner.now()).setLanguage(o.GLocale.getLanguage()).setProduct(t).build().open()}static _getProduct(){return gInAppPurchase.getProduct().catch(()=>null)}}e.exports=r},function(e,t,n){"use strict";var o=n(14);n(26),n(7);var i=n(9),a=n(1),r=o(n(1163));class s extends i.GReminderDialog.Impl{open(e){let{dialog:t}=e;this._dialog=t.getHTMLElement().gDialog({releaseOnClose:!0,nowrap:!0}).gDialog("open")}async openPurchaseFlow(e){let{dialog:t,options:n={}}=e;await gDesigner.openPaymentDialog(null,n).catch(()=>null)}openExternalLink(e){let{link:t}=e;gContainer.openExternalLink(null,t)}close(){this._dialog.gDialog("close")}getProduct(){return Promise.resolve({price:-1,listPrice:-1,locale:navigator.language,currency:"USD"})}getLicense(){let e=gDesigner.getLicense();return Promise.resolve({license:e._license,expire:e._expire,created:e._created,legacy:e._legacy})}getLanguage(){return a.GLocale.getLanguage()}}class l extends r.default{constructor(e){super(),this._dialogOptions=e}async open(){const e=new s,t=Object.assign(this._dialogOptions,{impl:e});switch(this._dialogOptions.endpoint){case"/pro/reminder/proexpiresoon":(await i.GReminderDialogFactory.newProExpireSoon(t)).open();break;case"/pro/reminder/proexpired":(await i.GReminderDialogFactory.newProExpired(t)).open();break;case"/pro/reminder/trialexpired":(await i.GReminderDialogFactory.newTrialExpired(t)).open();break;case"/pro/reminder/trialmessage":(await i.GReminderDialogFactory.newTrialMessage(t)).open();break;case"/pro/reminder/upgrade":(await i.GReminderDialogFactory.newUpgradeScreen(t)).open()}}}e.exports=l},function(e,t,n){"use strict";function o(){}o.createCDRIntegrationEngine=function(){return null},e.exports=o},function(e,t,n){"use strict";const o=n(857),i=n(858),a=n(1305);e.exports=class extends o{constructor(e){super(e),this.addGesture(new i({doubleTapDetection:i.DetectionMode.Nearby,doubleTapThreshold:200})),this.addGesture(new a),this.setClickSuppressionEnabled(!0)}_touchEnd(e){const t=e.changedTouches[0];!t||$(t.target).data("ginputbox")&&this._touchmoved||$(t.target).is(":focus")||(document.activeElement&&document.activeElement!==t.target&&$(document.activeElement).blur(),$(t.target).focus()),super._touchEnd(e)}_handleEvent(e){const t=e.changedTouches&&e.changedTouches[0];if(!t||!$(t.target).is("select"))try{super._handleEvent(e)}finally{e.cancelable&&(e.preventDefault(),e.stopPropagation())}}}},function(e,t,n){"use strict";const o=n(1557),i=n(1165);e.exports=class{constructor(){this._gestures=[],this._state=new i,this._delayedTouchEventsEnabled=!0,this._suppressClickEnabled=!1,this._swiping=!1}addGesture(e){this._gestures.push(e)}setDelayedTouchEventsEnabled(e){this._delayedTouchEventsEnabled=e}setClickSuppressionEnabled(e){this._suppressClickEnabled=e}touchStart(e){this._swiping=!1,this._state.update(e),this._handleDelayedTouchStartEvent(e);const t=new o(e);this._delayedTouchEventsEnabled&&!t.areThereMultipleTouchPoints()?(this._delayedTouchEvent=e,this._delayedTouchEventTimeout=setTimeout(this._triggerDelayedTouchEvent.bind(this),50)):this._execute("start",e)}touchMove(e){this._swiping=!0,this._state.update(e),this._handleDelayedTouchStartEvent(e),this._execute("move",e)}touchEnd(e){this._state.update(e),this._handleDelayedTouchStartEvent(e),this._execute("end",e)}touchCancel(e){this._state.update(e),this._execute("cancel",e)}gestureStart(e){this._dropDelayedTouchEvent(),this._execute("gesture",e)}scroll(e){this._swiping=!0}_execute(e,t){this._state.setSwiping(this._isSwiping());const n=new o(t),i=this._gestures.length;let a=!1;for(let t=0;t<i;t++){const o=this._gestures[t];try{if(a){o.deactivate(n,this._state);continue}if("start"===e&&(o.canActivate(n,this._state)?o.activate(n,this._state):o.deactivate(n,this._state)),!o.isActive())continue;a=o[e](n,this._state)}catch(e){console.error("GGestureHelper",e);try{o.deactivate(n,this._state)}catch(e){console.warn("GGestureHelper deactivation",e)}}}}_isSwiping(){return!!this._suppressClickEnabled&&this._swiping}_handleDelayedTouchStartEvent(e){this._delayedTouchEventTimeout&&new o(e).areThereMultipleTouchPointsOnTheTarget()?this._dropDelayedTouchEvent():this._triggerDelayedTouchEvent()}_triggerDelayedTouchEvent(){this._delayedTouchEventTimeout&&(clearTimeout(this._delayedTouchEventTimeout),this._delayedTouchEventTimeout=null,this._delayedTouchEvent&&(this._execute("start",this._delayedTouchEvent),this._delayedTouchEvent=null))}_dropDelayedTouchEvent(){this._delayedTouchEventTimeout&&clearTimeout(this._delayedTouchEventTimeout),this._delayedTouchEventTimeout=null,this._delayedTouch=null}hasActiveIdentifiers(){return this._state.hasActiveIdentifiers()}}},function(e,t,n){"use strict";e.exports=class{constructor(e){this._event=e}areThereTwoTouchPoints(){return 2===this._event.touches.length}areThereTwoTouchPointsOnTheTarget(){return 2===this._event.targetTouches.length}areThereMultipleTouchPointsOnTheTarget(){return this._event.targetTouches.length>1}isThereOneTouchPointOnTheTarget(){return 1===this._event.targetTouches.length}areThereMultipleTouchPoints(){return this._event.touches.length>1}getOriginalEvent(){return this._event}iterateChangedTouches(e){const t=this._event.changedTouches,n=t.length;for(let o=0;o<n&&!1!==e(t[o]);o++);}isTrusted(){return this._event.isTrusted}isCancelable(){return this._event.cancelable}}},function(e,t,n){"use strict";var o=n(45);const i=n(857),a=n(1559),r=n(858),s=n(1560),l=n(1305);e.exports=class extends i{constructor(e){super(e),this.addGesture(new a),this.addGesture(new r),this.addGesture(new l),this.addGesture(new s)}_handleEvent(e){e.cancelable&&e.preventDefault(),super._handleEvent(e)}_touchStart(e){this._isSelecting()&&this._gestureHelper.hasActiveIdentifiers()||super._touchStart(e)}_isSelecting(){const e=gDesigner.getToolManager().getActiveTool();return!!(e&&e instanceof o.GSelectTool)&&e.hasSelectedArea()}}},function(e,t,n){"use strict";var o=n(14),i=n(1),a=n(13),r=n(9),s=o(n(859)),l=o(n(1165));let c=!1,d=0,u=0,p=0,g=0,h=0,f=0,m=0,y=0,v=0,_=0,b=i.GPaintCanvas.getScreenDPI()*a.GSceneWidget.options.pinchToZoomFactor,w=2/i.GPaintCanvas.getScreenDPI();class C extends s.default{canActivate(e){return e.areThereTwoTouchPointsOnTheTarget()}start(e){const t=e.getOriginalEvent(),n=t.targetTouches[0];h=d=m=n.clientX,f=u=y=n.clientY,c=e.areThereTwoTouchPointsOnTheTarget();const o=gDesigner.getActiveView();if(!o)return;const i=gDesigner.getContextMenu();i&&i.close(),this._twoFingersState=new l.default,this._twoFingersState.update(t);let a=t.targetTouches[1];p=v=a.clientX,g=_=a.clientY,o.startTouchMode(),this._moved=!1}move(e){if(!this._twoFingersState)return!1;const t=e.getOriginalEvent();this._twoFingersState.update(t),this._moved=!0,t.cancelable&&(t.preventDefault(),t.stopPropagation());const n=gDesigner.getActiveView();if(!n)return!0;const o=t.targetTouches[0],s=t.targetTouches[1];if(!s)return!0;const{clientX:l,clientY:h}=o,{clientX:f,clientY:C}=s;if(d&&(c=i.GMath.isEqualEps(d,l,r.MIN_TWO_FINGERS_TOUCH_MOVE_DISTANCE)&&i.GMath.isEqualEps(u,h,r.MIN_TWO_FINGERS_TOUCH_MOVE_DISTANCE)&&i.GMath.isEqualEps(p,f,r.MIN_TWO_FINGERS_TOUCH_MOVE_DISTANCE)&&i.GMath.isEqualEps(g,C,r.MIN_TWO_FINGERS_TOUCH_MOVE_DISTANCE),!c)){const e=i.GMath.ptDist(m,y,v,_),t=i.GMath.ptDist(l,h,f,C);if(i.GMath.isEqualEps(e,t,r.MIN_TWO_FINGERS_TOUCH_MOVE_DISTANCE)){const e=((0==m?0:l-m)+(0==v?0:f-v))/w,t=((0==y?0:h-y)+(0==_?0:C-_))/w;n.scrollBy(-e,-t)}else{const r=t-e;let l=gDesigner.getWindows().getActiveWindow().getView().getZoom()+r/b;const c=new Touch({identifier:i.GUtil.uuid(),pageX:(o.pageX+s.pageX)/2,pageY:(o.pageY+s.pageY)/2,target:o.target});l=l<a.GSceneWidget.options.minZoomFactor?a.GSceneWidget.options.minZoomFactor:l;var x=n.getViewTransform().mapPoint(n._convertClientPositionFromMousePosition(c));n.zoomAt(x,l)}}return m=l,y=h,v=f,_=C,!0}end(e){if(this._twoFingersState&&this._twoFingersState.update(e.getOriginalEvent()),!this._twoFingersState||!this._twoFingersState.hasActiveIdentifiers()){this._twoFingersState=null;const e=gDesigner.getActiveView();e&&e.endTouchMode()}d=u=p=g=m=y=v=_=0;const t=!!this._moved;return this._moved=!1,t}}e.exports=C},function(e,t,n){"use strict";var o=n(14),i=n(9),a=o(n(859));class r extends a.default{canActivate(e){return e.isThereOneTouchPointOnTheTarget()}start(e){this._startLongPressEvent(e)}move(){this._dropLongPressEvent()}end(){this._dropLongPressEvent()}cancel(){this._dropLongPressEvent()}gesture(){this._dropLongPressEvent()}deactivate(e,t){super.deactivate(e,t),this._dropLongPressEvent()}_startLongPressEvent(e){const t=e.getOriginalEvent();if(this._dropLongPressEvent(),e.areThereMultipleTouchPoints())return;const{clientX:n,clientY:o,target:a}=t.targetTouches[0];this._longPressEventTimeout=setTimeout(()=>{const e=jQuery.Event("contextmenu",{pageX:n,pageY:o,clientX:n,clientY:o});$(a).trigger(e)},i.LONG_PRESS_TIME_OUT)}_dropLongPressEvent(){this._longPressEventTimeout&&clearTimeout(this._longPressEventTimeout)}}e.exports=r},function(e,t,n){"use strict";var o=n(14);n(52),n(17),n(158),n(18),n(62),n(231),n(28),n(22);var i=n(13),a=n(45),r=n(1),s=o(n(71)),l=o(n(1306)),c=o(n(223)),d=o(n(325)),u=o(n(1307)),p=o(n(856)),g=o(n(1159)),h=o(n(1160)),f=o(n(854)),m=o(n(855)),y=o(n(1308)),v=o(n(790)),_=o(n(849)),b=o(n(1309)),w=o(n(1310)),C=o(n(848)),x=o(n(1311)),S=o(n(789)),E=o(n(1312)),A=o(n(1313)),T=o(n(1564)),G=o(n(857)),P=o(n(858));class D extends G.default{constructor(e){super(e),this.addGesture(new P.default),this.setDelayedTouchEventsEnabled(!1)}_handleEvent(e){e.cancelable&&(e.preventDefault(),e.stopPropagation()),super._handleEvent(e)}}const L={[i.GKey.Constant.LEFT]:37,[i.GKey.Constant.UP]:38,[i.GKey.Constant.RIGHT]:39,[i.GKey.Constant.DOWN]:40,[i.GKey.Constant.SHIFT]:16,[i.GKey.Constant.CONTROL]:17,[i.GKey.Constant.ALT_LEFT]:18},I=Object.values(L),k=(e,t)=>{const n=gDesigner.getActiveDocument(),o=n&&n.getActiveWindow(),i=o&&o.getView(),a=i&&i.getHtmlElement();a&&a.dispatchEvent(new KeyboardEvent(e,{keyCode:t}))},O=e=>e===i.GKey.Constant.ALT_LEFT||e===i.GKey.Constant.ALT_RIGHT||e===i.GKey.Constant.SHIFT||e===i.GKey.Constant.CONTROL,F=[i.GKey.Constant.UP,i.GKey.Constant.LEFT,i.GKey.Constant.RIGHT,i.GKey.Constant.DOWN];function R(e){this._htmlElement=e,this._keyState={},this._heldKeys=new Map,this._keyDownInveral={},this._keyDownBound=this._keyDown.bind(this),this._keyUpBound=this._keyUp.bind(this),this._mouseUpBound=this._mouseup.bind(this),this._touchHandler=new T.default,this.init()}R.prototype._touchHandler=null,R.prototype._htmlElement=null,R.prototype._keyState=null,R.prototype._heldKeys=null,R.prototype._keyDownInveral=null,R.prototype._document=null,R.prototype._keyDownBound=null,R.prototype._keyUpBound=null,R.prototype._mouseUpBound=null,R.prototype.init=function(){i.GPlatform.constructor.bypassKeyDownRestrictionByClassName("g-virtual-key"),this._htmlElement.gCollapsible();const e=$("<div/>").addClass("container").appendTo(this._htmlElement),t=e=>{const t=this._keyDownInveral[e];t&&(clearInterval(t),delete this._keyDownInveral[e]),O(e)&&i.GPlatform.releaseKey(e),k("keyup",L[e])},n=e=>{const t=this._keyDownInveral[e];t&&clearInterval(t),(e=>F.includes(e))(e)&&(this._keyDownInveral[e]=setInterval(()=>{k("keydown",L[e])},100)),O(e)&&i.GPlatform.holdKey(e),k("keydown",L[e])},o=e=>{let{key:o,icon:a,dblclick:r,actionClass:l}=e;const c=s({name:a?null:i.GKey.toLocalizedShort(o,!0),icon:a,actionClass:"g-virtual-key"+(l?" "+l:""),mousedown:e=>{e.stopImmediatePropagation(),this._isHoldingKey(o)||n(o)},click:e=>{e.stopImmediatePropagation(),this._isHoldingKey(o)||(t(o),gDesigner.stats("virtualkey_assistantbar_click",o))},dblclick:r,mouseup:e=>{e.stopImmediatePropagation(),this._isHoldingKey(o)||t(o)},touchstart:()=>{this._isHoldingKey(o)||n(o)},touchend:()=>{this._isHoldingKey(o)||t(o)},touchcancel:()=>{this._isHoldingKey(o)||t(o)},active:()=>!!this._keyState[L[o]]||this._isHoldingKey(o)});return new D(c[0]),c},r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.reduce((e,t)=>{let{icon:n,action:o,isEnabled:i}=t;const a=e.createAddItem(o);return n&&a.setIcon(n),i&&a.addEventListener(d.default.UpdateEvent,()=>{a.setEnabled(i())}),e},new c.default(null,"g-assistant-bar-menu"+(t?" "+t:"")))},s=e=>{let{action:t,name:n,menu:o,icon:i,click:a,dblclick:r,mousedown:s,mouseup:l,touchstart:c,touchmove:d,touchend:u,touchcancel:p,split:g=!1,active:h,actionClass:f}=e;const m=$("<div/>").addClass("toolbar-button").toggleClass("split",!!g),y=$("<button/>").addClass("action-button").appendTo(m);if(f&&y.addClass(f),h&&(m.data("active",h),m.toggleClass("g-active",!!h())),t&&(m.data("action",t),i||(i=t.getIcon()),a||(a=()=>gDesigner.executeAction(t.getId(),void 0,"assistantbar"))),n&&$("<span/>").text(n).appendTo(y),i&&$("<span/>").addClass(i).appendTo(y),a&&y.on("click",a),r&&y.on("dblclick",r),s&&m.on("mousedown",s),l&&m.on("mouseup",l),c&&m.on("touchstart",c),d&&m.on("touchmove",d),u&&m.on("touchend",u),p&&m.on("touchcancel",p),o){let e;o.__which="assistantbar",e=g?$("<button/>").addClass("dropdown-button").append($("<span></span>").addClass("gravit-icon-touch-arrow-up")).appendTo(m):y.append($("<span></span>").addClass("gravit-icon-touch-arrow-up")),e.gMenuButton({menu:o,touch:!0})}return m},l=$("<div/>").addClass("left-side").appendTo(e),T=$("<div/>").addClass("right-side").appendTo(e).gCollapsible({orientation:A.default.Orientation.Horizontal}).gCollapsible("collapse").on("visibilitychanged",(e,t)=>{gContainer.setProperty("designer.assistant-bar.left-side.expanded",!!t)});$("<div/>").gPropertyRow({height:"auto",columns:[{width:"86px",content:o({key:i.GKey.Constant.SHIFT,actionClass:"g-virtual-key-".concat(i.GKey.Constant.SHIFT),dblclick:()=>this._toggleModifierKey(i.GKey.Constant.SHIFT)})},{width:"auto",content:s({icon:"gravit-icon-touch-copy",action:gDesigner.getAction(u.default.ID_COPY)})},{width:"68px",content:s({icon:"gravit-icon-touch-paste",action:gDesigner.getAction(p.default.ID),menu:r([{icon:"gravit-icon-touch-paste-in-place",action:gDesigner.getAction(g.default.ID)},{icon:"gravit-icon-touch-paste-inside",action:gDesigner.getAction(h.default.ID)},{icon:"gravit-icon-touch-paste-and-replace",action:gDesigner.getAction(m.default.ID)},{icon:"gravit-icon-touch-paste-style",action:gDesigner.getAction(f.default.ID)}],"paste-menu"),split:!0})},{width:"auto",content:s({icon:"gravit-icon-touch-trash-2",action:gDesigner.getAction(y.default.ID)})},{width:"auto",content:s({icon:"gravit-icon-touch-selection",click:()=>{const e=gDesigner.getActiveDocument(),t=e&&e.getEditor();if(t){t.getSelection()&&t.getSelection().length>0?gDesigner.executeAction(w.default.ID,void 0,"assistantbar"):gDesigner.executeAction(b.default.ID,void 0,"assistantbar")}}})},{width:"62px",content:s({icon:"gravit-icon-touch-arrange-order",menu:r(Object.values(a.GEditor.ArrangeOrderType).map(e=>({icon:"gravit-icon-touch-arrange-"+e,action:gDesigner.getAction(C.default.ID+"."+e),isEnabled:()=>this._isArrangeActionEnabled(e)})),"arrange-menu")})},{width:"auto",content:s({icon:"gravit-icon-touch-fullscreen",action:gDesigner.getAction(x.default.ID),active:()=>gDesigner.getAction(x.default.ID).isFullscreen()})}]}).appendTo(l),$("<div/>").gPropertyRow({height:"auto",columns:[{width:"86px",content:o({key:i.GKey.Constant.CONTROL,actionClass:"g-virtual-key-".concat(i.GKey.Constant.CONTROL),dblclick:()=>this._toggleModifierKey(i.GKey.Constant.CONTROL)})},{width:"114px",content:o({key:i.GKey.Constant.ALT_LEFT,actionClass:"g-virtual-key-".concat(i.GKey.Constant.ALT_LEFT),dblclick:()=>this._toggleModifierKey(i.GKey.Constant.ALT_LEFT)})},{width:"auto",content:s({icon:"gravit-icon-touch-group",action:gDesigner.getAction(v.default.ID)})},{width:"auto",content:s({icon:"gravit-icon-touch-ungroup",action:gDesigner.getAction(_.default.ID)})},{width:"62px",content:s({icon:"gravit-icon-touch-convert-to-path",action:gDesigner.getAction(S.default.ID)})},{width:"auto",content:s({icon:"gravit-icon-touch-help",click:()=>gDesigner.executeAction(E.default.ID,void 0,"assistantbar")})}]}).appendTo(l),$("<div/>").gPropertyRow({height:"auto",columns:[{width:"auto",content:o({key:i.GKey.Constant.UP,icon:"gravit-icon-touch-arrow-key-up"})},{width:"auto",content:o({key:i.GKey.Constant.DOWN,icon:"gravit-icon-touch-arrow-key-down"})}]}).appendTo(T),$("<div/>").gPropertyRow({height:"auto",columns:[{width:"auto",content:o({key:i.GKey.Constant.LEFT,icon:"gravit-icon-touch-arrow-key-left"})},{width:"auto",content:o({key:i.GKey.Constant.RIGHT,icon:"gravit-icon-touch-arrow-key-right"})}]}).appendTo(T),gContainer.getProperty("designer.assistant-bar.left-side.expanded").then(e=>{T.gCollapsible(e?"expand":"collapse")})},R.prototype._toggleModifierKey=function(e){const t=!i.GPlatform.isHoldingKey(e);this._toggleKey(e,t),this._htmlElement.find(".g-virtual-key-".concat(e)).toggleClass("g-held",t),this._updateActions()},R.prototype._toggleKey=function(e,t){t?(i.GPlatform.holdKey(e),this._heldKeys.set(e,!0)):(i.GPlatform.releaseKey(e),this._heldKeys.delete(e))},R.prototype._isHoldingKey=function(e){return!!this._heldKeys&&!!this._heldKeys.get(e)},R.prototype._keyDown=function(e){I.includes(e.which||e.keyCode)&&(this._keyState[e.which||e.keyCode]=!0,this._updateActions())},R.prototype._keyUp=function(e){I.includes(e.which||e.keyCode)&&(delete this._keyState[e.which||e.keyCode],this._updateActions())},R.prototype._mouseup=function(e){e.isTrusted&&(Object.keys(this._keyDownInveral).forEach(e=>{k("keyup",L[e]),clearInterval(this._keyDownInveral[e])}),this._keyDownInveral=[])},R.prototype.activate=function(){document.addEventListener("keydown",this._keyDownBound,!0),document.addEventListener("keyup",this._keyUpBound,!0),document.addEventListener("mouseup",this._mouseUpBound,!0),gDesigner.addEventListener(s.default,this._documentEvent,this),gDesigner.addEventListener(l.default,this._fullScreenEvent,this),i.GPlatform.addEventListener(i.GModifiersChangedEvent,this._modifiersChangedEvent,this),this._activateDocument(gDesigner.getActiveDocument()),this._touchHandler.activate(this._htmlElement[0]),this._heldKeys=new Map,this._updateActions()},R.prototype.deactivate=function(){document.removeEventListener("keydown",this._keyDownBound,!0),document.removeEventListener("keyup",this._keyUpBound,!0),document.removeEventListener("mouseup",this._mouseUpBound,!0),gDesigner.removeEventListener(s.default,this._documentEvent,this),gDesigner.removeEventListener(l.default,this._fullScreenEvent,this),i.GPlatform.removeEventListener(i.GModifiersChangedEvent,this._modifiersChangedEvent,this),this._deactivateDocument(gDesigner.getActiveDocument()),i.GPlatform.releaseKey(i.GKey.Constant.ALT_LEFT),i.GPlatform.releaseKey(i.GKey.Constant.ALT_RIGHT),i.GPlatform.releaseKey(i.GKey.Constant.SHIFT),i.GPlatform.releaseKey(i.GKey.Constant.CONTROL),this._touchHandler.deactivate(this._htmlElement[0]),this._heldKeys=null},R.prototype._activateDocument=function(e){e&&e.getEditor().addEventListener(a.GEditor.SelectionChangedEvent,this._selectionChangedEvent,this),this._document=e},R.prototype._deactivateDocument=function(e){e&&e.getEditor().removeEventListener(a.GEditor.SelectionChangedEvent,this._selectionChangedEvent,this),this._document=null},R.prototype._selectionChangedEvent=function(e){this._updateActions()},R.prototype._fullScreenEvent=function(){this._updateActions()},R.prototype._modifiersChangedEvent=function(){this._updateActions()},R.prototype._documentEvent=function(e){const t=e.document;if(!t.isLockedByVersionHistory())switch(e.type){case s.default.Type.Activated:this._activateDocument(t),this._updateActions();break;case s.default.Type.Deactivated:this._deactivateDocument(t),this._updateActions();break;case s.default.Type.Modified:this._updateActions()}},R.prototype._updateActions=function(){this._htmlElement.find(".toolbar-button").each((function(){const e=$(this),t=e.data("action"),n=e.data("active");if(t){const n=!t.isAvailable()||!t.isEnabled();e.find("button").prop("disabled",n).toggleClass("g-disabled",n)}n&&e.toggleClass("g-active",!!n())}))},R.prototype._isArrangeActionEnabled=function(e){if(!gDesigner.getAction(C.default.ID+"."+e).isEnabled())return!1;const t=this._document?this._document.getEditor().getIndividualSelection():null;if(!t)return!1;if(t.length>1)return!0;const n=t[0],o=n.getParent();switch(e){case a.GEditor.ArrangeOrderType.SendToFront:if(n.getNext()){let e=n.getNext(),t=null;for(;!t&&e;)e instanceof r.GElement&&(t=e),e=e.getNext();return!!t&&a.GEditor.validateBlockInsertion(o,n)}return!1;case a.GEditor.ArrangeOrderType.BringForward:{let e=n.getNext();if(e){let t=null;for(;!t&&e;)e instanceof r.GElement&&(e.hasFlag(r.GNode.Flag.Selected)||(t=e)),e=e.getNext();if(null!==t){const e=t.getNext();return a.GEditor.validateBlockInsertion(o,n,e)}}return!1}case a.GEditor.ArrangeOrderType.SendBackward:{let e=n.getPrevious();if(null!==e){let t=null;for(;!t&&e;)e instanceof r.GElement&&(e.hasFlag(r.GNode.Flag.Selected)||a.GEditor.validateBlockInsertion(o,n,e)&&(t=e)),e=e.getPrevious();return!!t}return!1}case a.GEditor.ArrangeOrderType.SendToBack:if(null!==n.getPrevious()){let e=o.getFirstChild(),t=null;for(;!t&&e&&e!==n;)e instanceof r.GElement&&a.GEditor.validateBlockInsertion(o,n,e)&&(t=e),e=e.getNext();return!!t}return!1}return!0},R.prototype.getHtmlElement=function(){return this._htmlElement},e.exports=R},function(e,t,n){"use strict";n(1);var o=function(){this._timer=0};o.prototype._element=$("<div />").addClass("g-fullscreen-banner"),o.prototype._timeout=5e3,o.prototype.setBannerText=function(e){return this._element.html(e),this},o.prototype.show=function(){var e=this;return $("body").append(this._element),this._element.animate({opacity:1},500),this._timer=setTimeout((function(){e.hide()}),5e3),this},o.prototype.hide=function(){return this._element.animate({opacity:0},{duration:500,complete:function(){$(this).remove()}}),clearTimeout(this._timer),this},e.exports=o},function(e,t,n){"use strict";n(28);var o=n(1);const i=[{selector:"#toolbar > .section > .menubar-toolbar-button",i18n:"text.menu",offsetX:10},{selector:"#toolbar > .section > .open-toolbar-button > .action-button",i18n:"text.open",furtherAway:!0},{selector:"#toolbar > .section > .save-toolbar-button > .action-button",i18n:"text.save"},{selector:"#toolbar > .section > .undo-toolbar-button > .action-button",i18n:"text.undo-redo",furtherAway:!0},{selector:"#toolbar > .section > .zoom-button > .action-button > .caption",i18n:"text.zoom",offsetY:14},{selector:"#toolbar > .section > .snap-button > .action-button",i18n:"text.snapping",furtherAway:!0},{selector:"#toolbar > .section > .select-toolbar-button > .action-button",i18n:"text.select"},{selector:"#toolbar > .section > .shapes-toolbar-button > .action-button",i18n:"text.shapes",furtherAway:!0},{selector:"#toolbar > .section > .path-toolbar-button > .action-button",i18n:"text.path"},{selector:"#toolbar > .section > .knife-toolbar-button > .action-button",i18n:"text.knife",furtherAway:!0},{selector:"#toolbar > .section > .text-toolbar-button > .action-button",i18n:"text.text"},{selector:"#toolbar > .section > .image-toolbar-button > .action-button",i18n:"text.image",furtherAway:!0},{selector:"#toolbar > .section > .window-button  > .action-button",i18n:"text.files"},{selector:"#toolbar > .section > .export-toolbar-button > .action-button",i18n:"text.export"},{selector:'.g-touch-toolbar-button[g-touch-tool="pages"]',i18n:"text.pages"},{selector:'.g-touch-toolbar-button[g-touch-tool="layers"]',i18n:"text.layers",furtherAway:!0},{selector:'.g-touch-toolbar-button[g-touch-tool="libraries"]',i18n:"text.libraries"},{selector:'.g-touch-toolbar-button[g-touch-tool="symbols"]',i18n:"text.symbols",furtherAway:!0},{selector:'.g-touch-toolbar-button[g-touch-tool="dimension.align"]',i18n:"text.align-distribute",className:"align-distribute"},{selector:'.g-touch-toolbar-button[g-touch-tool="dimension.dimension"]',i18n:"text.transform",furtherAway:!0},{selector:'.g-touch-toolbar-button[g-touch-tool="document"]',i18n:"text.document"},{selector:'.g-touch-toolbar-button[g-touch-tool="appearance"]',i18n:"text.appearance",furtherAway:!0},{selector:'.g-touch-toolbar-button[g-touch-tool="fill"]',i18n:"text.fills"},{selector:'.g-touch-toolbar-button[g-touch-tool="border"]',i18n:"text.borders",furtherAway:!0},{selector:'.g-touch-toolbar-button[g-touch-tool="effect"]',i18n:"text.effects"},{selector:'.g-touch-toolbar-button[g-touch-tool="annotation"]',i18n:"text.comments",furtherAway:!0},{selector:"#assistant-bar > .container",side:o.GRect.Side.LEFT_CENTER,i18n:"text.modifier-keys",disconnected:!0,offsetX:-15,className:"assistant-bar"},{selector:"#assistant-bar > .container",side:o.GRect.Side.RIGHT_CENTER,i18n:"text.nudge",disconnected:!0,offsetX:15,className:"assistant-bar"},{selector:"#assistant-bar .gravit-icon-touch-copy",side:o.GRect.Side.TOP_CENTER,i18n:"text.copy",offsetY:-10,className:"assistant-bar"},{selector:"#assistant-bar .gravit-icon-touch-paste",side:o.GRect.Side.TOP_CENTER,i18n:"text.paste",furtherAway:!0,offsetY:-10,className:"assistant-bar"},{selector:"#assistant-bar .gravit-icon-touch-trash-2",side:o.GRect.Side.TOP_CENTER,i18n:"text.delete",offsetY:-10,className:"assistant-bar"},{selector:"#assistant-bar .gravit-icon-touch-selection",side:o.GRect.Side.TOP_CENTER,i18n:"text.select-deselect",furtherAway:!0,offsetY:-10,className:"assistant-bar"},{selector:"#assistant-bar .gravit-icon-touch-arrange-order",side:o.GRect.Side.TOP_CENTER,i18n:"text.arrange",offsetY:-10,className:"assistant-bar"},{selector:"#assistant-bar .gravit-icon-touch-fullscreen",side:o.GRect.Side.TOP_CENTER,i18n:"text.fullscreen",furtherAway:!0,offsetY:-10,className:"assistant-bar"},{selector:"#assistant-bar .gravit-icon-touch-group",i18n:"text.group",offsetY:10,className:"assistant-bar"},{selector:"#assistant-bar .gravit-icon-touch-ungroup",i18n:"text.ungroup",furtherAway:!0,offsetY:10,className:"assistant-bar"},{selector:"#assistant-bar .gravit-icon-touch-convert-to-path",i18n:"text.convert-to-path",offsetY:10,className:"assistant-bar"}];e.exports=new class{constructor(){this._resizeBound=this._resize.bind(this)}open(){this._panel&&this._panel.remove();const e=$("body").addClass("g-quick-help");this._panel=$("<div/>").addClass("g-quick-help-screen").addClass(o.GLocale.getLocaleTagISO6391()).addClass("hidden").on("click",()=>this.close()).appendTo(e),gDesigner.getRightSidebars().disableContextSensitive(),this._update(),this._panel.removeClass("hidden"),$(window).on("resize",this._resizeBound)}close(){$("body").removeClass("g-quick-help"),this._panel&&this._panel.remove(),delete this._panel,gDesigner.getRightSidebars().enableContextSensitive(),$(window).off("resize",this._resizeBound)}_resize(){this._panel&&(this._panel.empty(),this._update())}_update(){this._createStaticTooltips(),i.forEach(e=>this._createDynamicTooltip(e))}_createStaticTooltips(){$("<div/>").addClass("static-tooltips").append($("<div/>").addClass("container").append($("<img/>").attr("src","assets/help/pinch-to-zoom.svg")).append(this._createTooltip({disconnected:!0,i18n:"text.pinch-to-zoom"}))).append($("<div/>").addClass("container").append($("<img/>").attr("src","assets/help/drag-with-2-fingers.svg")).append(this._createTooltip({disconnected:!0,i18n:"text.drag-with-2-fingers"}))).append($("<div/>").addClass("container").append($("<img/>").attr("src","assets/help/tap-and-holder.svg")).append(this._createTooltip({disconnected:!0,i18n:"text.tap-and-hold"}))).appendTo(this._panel)}_createDynamicTooltip(e){const t=$(e.selector),n=t.offset();if(!n||!t.is(":visible"))return;const i=this._createTooltip(e).appendTo(this._panel),a=new o.GRect(n.left,n.top,t.outerWidth(),t.outerHeight()),r=new o.GRect(0,0,i.outerWidth(),i.outerHeight()),s=this._calculatePosition(r,a,e);i.css({top:s.getY(),left:s.getX()})}_calculatePosition(e,t,n){const i=n.side||o.GRect.Side.BOTTOM_CENTER,a=t.getSide(i);switch(i){case o.GRect.Side.TOP_CENTER:{const t=e.getSide(o.GRect.Side.CENTER).getX();return new o.GPoint(a.getX()-t+(n.offsetX||0),a.getY()-e.getHeight()+(n.offsetY||0))}case o.GRect.Side.BOTTOM_CENTER:{const t=e.getSide(o.GRect.Side.CENTER).getX();return new o.GPoint(a.getX()-t+(n.offsetX||0),a.getY()+(n.offsetY||0))}case o.GRect.Side.LEFT_CENTER:{const t=e.getSide(o.GRect.Side.CENTER).getY();return new o.GPoint(a.getX()-e.getWidth()+(n.offsetX||0),a.getY()-t+(n.offsetY||0))}case o.GRect.Side.RIGHT_CENTER:{const t=e.getSide(o.GRect.Side.CENTER).getY();return new o.GPoint(a.getX()+(n.offsetX||0),a.getY()-t+(n.offsetY||0))}default:throw"Unsupported side"}}_createTooltip(e){const t=$("<div>").addClass("content").append($("<span/>").text(o.GLocale.get(new o.GLocaleKey("GQuickHelpScreen",e.i18n))));return $("<div/>").addClass("tooltip"+(e.className?" "+e.className:"")).addClass("side-"+(e.side||o.GRect.Side.BOTTOM_CENTER)).toggleClass("further-away",!!e.furtherAway).append($("<div/>").addClass("container").append($("<div>").addClass("connector").css("display",e.disconnected?"none":"")).append(t))}}},function(e,t,n){"use strict";var o=n(14)(n(858));const i=n(857);e.exports=class extends i{constructor(e){super(e),this.addGesture(new o.default),this.setDelayedTouchEventsEnabled(!1)}_handleEvent(e){e.cancelable&&e.preventDefault(),super._handleEvent(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(17),n(22);class o extends Error{constructor(){super(...arguments),this.constructor=o,this.__proto__=o.prototype,this.name="GMSTeamsModeUserNotFoundError"}toString(){return this.message}}t.default=o},function(e,t,n){"use strict";n(7);const{PasswordlessAuthenticationActions:o,gApi:i}=n(9),a=n(37),r=n(586),s=n(323),{GLocale:l,GLocaleKey:c}=n(1);e.exports=class{async execute(){let{[o.SetPassword]:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{await i.passwordlessAuthentication.authenticateWithSetPasswordToken(e),await s.checkLicense();const t=await gDesigner.getUser();t&&gDesigner.executeWhenReady(()=>{new r(t,r.Tabs.ChangePassword,{token:e,tabs:[r.Tabs.ChangePassword],closeable:!1,changePasswordOptions:{autoClose:!0,title:l.get(new c("GChangePasswordPanel","text.set-password")),info:l.get(new c("GChangePasswordPanel","text.set-password-info"))}}).open()})}catch(e){gDesigner.executeWhenReady(()=>{a.error(e)})}}}},function(e,t,n){"use strict";n(7);const{PasswordlessAuthenticationActions:o,gApi:i}=n(9),a=n(37),r=n(586),s=n(323);e.exports=class{async execute(){let{[o.ResetPassword]:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{await i.passwordlessAuthentication.authenticateWithResetPasswordToken(e),await s.checkLicense();const t=await gDesigner.getUser();t&&gDesigner.executeWhenReady(()=>{new r(t,r.Tabs.ChangePassword,{token:e,tabs:[r.Tabs.ChangePassword]}).open()})}catch(e){gDesigner.executeWhenReady(()=>{a.error(e)})}}}},function(e,t,n){"use strict";n(7);const{PasswordlessAuthenticationActions:o,gApi:i}=n(9),a=n(323),r=n(37);e.exports=class{async execute(){let{[o.PasswordlessToken]:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return await i.passwordlessAuthentication.authenticateWithPasswordlessToken(e),await a.checkLicense(),gDesigner.getUser()}catch(e){gDesigner.executeWhenReady(()=>{r.error(e)})}}}},function(e,t,n){var o;!function(i,a,r){if(i){for(var s,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},c={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},d={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},u={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},p=1;p<20;++p)l[111+p]="f"+p;for(p=0;p<=9;++p)l[p+96]=p.toString();v.prototype.bind=function(e,t,n){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,n),this},v.prototype.unbind=function(e,t){return this.bind.call(this,e,(function(){}),t)},v.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},v.prototype.reset=function(){return this._callbacks={},this._directMap={},this},v.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return!1;if(function e(t,n){return null!==t&&t!==a&&(t===n||e(t.parentNode,n))}(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var n=e.composedPath()[0];n!==e.target&&(t=n)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},v.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},v.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(l[t]=e[t]);s=null},v.init=function(){var e=v(a);for(var t in e)"_"!==t.charAt(0)&&(v[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},v.init(),i.Mousetrap=v,e.exports&&(e.exports=v),void 0===(o=function(){return v}.call(t,n,t,e))||(e.exports=o)}function g(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function h(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return l[e.which]?l[e.which]:c[e.which]?c[e.which]:String.fromCharCode(e.which).toLowerCase()}function f(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function m(e,t,n){return n||(n=function(){if(!s)for(var e in s={},l)e>95&&e<112||l.hasOwnProperty(e)&&(s[l[e]]=e);return s}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function y(e,t){var n,o,i,a=[];for(n=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),i=0;i<n.length;++i)o=n[i],u[o]&&(o=u[o]),t&&"keypress"!=t&&d[o]&&(o=d[o],a.push("shift")),f(o)&&a.push(o);return{key:o,modifiers:a,action:t=m(o,a,t)}}function v(e){var t=this;if(e=e||a,!(t instanceof v))return new v(e);t.target=e,t._callbacks={},t._directMap={};var n,o={},i=!1,r=!1,s=!1;function l(e){e=e||{};var t,n=!1;for(t in o)e[t]?n=!0:o[t]=0;n||(s=!1)}function c(e,n,i,a,r,s){var l,c,d,u,p=[],g=i.type;if(!t._callbacks[e])return[];for("keyup"==g&&f(e)&&(n=[e]),l=0;l<t._callbacks[e].length;++l)if(c=t._callbacks[e][l],(a||!c.seq||o[c.seq]==c.level)&&g==c.action&&("keypress"==g&&!i.metaKey&&!i.ctrlKey||(d=n,u=c.modifiers,d.sort().join(",")===u.sort().join(",")))){var h=!a&&c.combo==r,m=a&&c.seq==a&&c.level==s;(h||m)&&t._callbacks[e].splice(l,1),p.push(c)}return p}function d(e,n,o,i){t.stopCallback(n,n.target||n.srcElement,o,i)||!1===e(n,o)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(n),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(n))}function u(e){"number"!=typeof e.which&&(e.which=e.keyCode);var n=h(e);n&&("keyup"!=e.type||i!==n?t.handleKey(n,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):i=!1)}function p(e,t,a,r){function c(t){return function(){s=t,++o[e],clearTimeout(n),n=setTimeout(l,1e3)}}function u(t){d(a,t,e),"keyup"!==r&&(i=h(t)),setTimeout(l,10)}o[e]=0;for(var p=0;p<t.length;++p){var g=p+1===t.length?u:c(r||y(t[p+1]).action);m(t[p],g,r,e,p)}}function m(e,n,o,i,a){t._directMap[e+":"+o]=n;var r,s=(e=e.replace(/\s+/g," ")).split(" ");s.length>1?p(e,s,n,o):(r=y(e,o),t._callbacks[r.key]=t._callbacks[r.key]||[],c(r.key,r.modifiers,{type:r.action},i,e,a),t._callbacks[r.key][i?"unshift":"push"]({callback:n,modifiers:r.modifiers,action:r.action,seq:i,level:a,combo:e}))}t._handleKey=function(e,t,n){var o,i=c(e,t,n),a={},u=0,p=!1;for(o=0;o<i.length;++o)i[o].seq&&(u=Math.max(u,i[o].level));for(o=0;o<i.length;++o)if(i[o].seq){if(i[o].level!=u)continue;p=!0,a[i[o].seq]=1,d(i[o].callback,n,i[o].combo,i[o].seq)}else p||d(i[o].callback,n,i[o].combo);var g="keypress"==n.type&&r;n.type!=s||f(e)||g||l(a),r=p&&"keydown"==n.type},t._bindMultiple=function(e,t,n){for(var o=0;o<e.length;++o)m(e[o],t,n)},g(e,"keypress",u),g(e,"keydown",u),g(e,"keyup",u)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},function(e,t){!function(e){if(e){var t={},n=e.prototype.stopCallback;e.prototype.stopCallback=function(e,o,i,a){return!!this.paused||!t[i]&&!t[a]&&n.call(this,e,o,i)},e.prototype.bindGlobal=function(e,n,o){if(this.bind(e,n,o),e instanceof Array)for(var i=0;i<e.length;i++)t[e[i]]=!0;else t[e]=!0},e.init()}}("undefined"!=typeof Mousetrap?Mousetrap:void 0)},function(e,t,n){"use strict";n(3);var o=n(1),i=n(34),a=n(16),r=n(97);function s(){}o.GObject.inherit(s,r),s.ID="modify.connect-lines",s.TITLE=new o.GLocaleKey("GConnectLinesAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return a.CATEGORY_MODIFY_PATH},s.prototype.getGroup=function(){return"structure/path"},s.prototype.isEnabled=function(){if(!r.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument()?gDesigner.getActiveDocument().getEditor().getSelection():null;if(e)for(var t=0;t<e.length;++t)if(e[t]instanceof o.GPath)return!0;return!1},s.prototype.execute=function(){var e=gDesigner.getActiveDocument(),t=e?e.getEditor():null,n=t?t.getSelection():null,a=[],r=null;if(n)for(var s=0;s<n.length;++s){var l=n[s];l instanceof o.GPath&&(r?r===l.getParent()&&a.push(l):(r=l.getParent())&&a.push(l))}if(a.length){t.beginTransaction();try{if(1==a.length)a[0].setProperty("closed",!0);else try{(0,i.blockChanges)(t,null,null,r);var c,d=(a=o.GNode.order(a))[a.length-1],u=d.getProperty("trf"),p=u?u.inverted():null,g=d.getNext(),h=[];for(s=0;s<a.length-1;++s)(c=a[s]).removeFlag(o.GNode.Flag.Selected),c.setProperty("closed",!1),r.removeChild(c),u=(u=c.getProperty("trf"))?p?u.multiplied(p):u:p,h=h.concat(c.getAnchorPoints().serialize(u));d.removeFlag(o.GNode.Flag.Selected),r.removeChild(d),h=h.concat(d.getAnchorPoints().serialize());var f=new o.GPath;f.getAnchorPoints().deserialize(h),f.assignFrom(d),r.insertChild(f,g)}finally{(0,i.releaseChanges)(t,null,null,r),t.updateSelection(!1,[f])}}finally{t.commitTransaction(o.GLocale.get(this.getTitle()))}}},s.prototype.toString=function(){return"[Object GConnectLinesAction]"},e.exports=s},function(e,t,n){"use strict";n(3);var o=n(1),i=n(16),a=n(27);function r(){}o.GObject.inherit(r,a),r.ID="view.zoom.fit-current-layer",r.TITLE=new o.GLocaleKey("GFitCurrentLayerAction","title"),r.prototype.getId=function(){return r.ID},r.prototype.getTitle=function(){return r.TITLE},r.prototype.getCategory=function(){return i.CATEGORY_VIEW},r.prototype.getGroup=function(){return"zoom"},r.prototype.isEnabled=function(){var e=gDesigner.getActiveDocument(),t=e?e.getScene().getActiveLayer():null;return t&&t.getPaintBBox()&&!t.getPaintBBox().isEmpty()},r.prototype.execute=function(){var e=gDesigner.getActiveDocument(),t=e.getScene().getActiveLayer();e.getActiveWindow().getView().zoomAll(t.getPaintBBox(),!1,!0)},r.prototype.toString=function(){return"[Object GFitCurrentLayerAction]"},e.exports=r},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(16),r=n(27);function s(){}o.GObject.inherit(s,r),s.ID="edit.invert-selection",s.TITLE=new o.GLocaleKey("GInvertSelectionAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return a.CATEGORY_EDIT},s.prototype.getGroup=function(){return"select"},s.prototype.getShortcut=function(){return[i.GKey.Constant.SHIFT,i.GKey.Constant.META,"I"]},s.prototype.isEnabled=function(){return!!gDesigner.getActiveDocument()},s.prototype.execute=function(){var e=gDesigner.getActiveDocument(),t=e.getScene(),n=t.getActivePage(),i=gDesigner.getActiveDocument().getActiveWindow().getView().getViewConfiguration().multiPageView,a=[];t.accept((function(e){if(e instanceof o.GItem&&!e.hasMixin(o.GAnnotation)&&!(e.getParent()instanceof o.GItem)&&!e.hasFlag(o.GNode.Flag.Selected)&&(e.getPage()===n||i)&&!e.isLocked()){var t=!e.getProperty("vis")||e.findParent((function(e){return e instanceof o.GBlock&&!e.getProperty("vis")})),r=e.getProperty("plkt"),s=r&o.GBlock.ProgramLck.NoEdit&&r&o.GBlock.ProgramLck.NoSizeChanges&&r&o.GBlock.ProgramLck.NoMove&&r&o.GBlock.ProgramLck.NoDelete;t||s||a.push(e)}})),e.getEditor().updateSelection(!1,a)},s.prototype.toString=function(){return"[Object GInvertSelectionAction]"},e.exports=s},function(e,t,n){"use strict";var o=n(14);n(17),n(28),n(22);var i=n(1),a=n(13),r=o(n(16)),s=o(n(1145)),l=n(34),c=n(61),d=o(n(791)),u=n(9);class p extends s.default{constructor(e){super(e),this._title=new i.GLocaleKey("GMergeSubAction","title.".concat(this._type)),this._transactionType=null}_getMainActionId(){return d.default.ID}getFullTitle(){const e=this.getTitle(),t=this.getMainAction().getTitle();return"".concat(i.GLocale.get(t)," (").concat(i.GLocale.get(e),")")}getCategory(){return r.default.CATEGORY_MODIFY_COMBINE}getGroup(){return"structure-boolean/combine"}getIcon(){switch(this._type){case p.Type.Union:return"gravit-icon-merge-union";case p.Type.Subtract:return"gravit-icon-merge-subtract";case p.Type.Intersect:return"gravit-icon-merge-intersect";case p.Type.Difference:return"gravit-icon-merge-difference";default:return null}}isVisible(){return!0}getShortcutSubKey(){switch(this._type){case p.Type.Union:return a.GKey.Constant.U;case p.Type.Subtract:return a.GKey.Constant.S;case p.Type.Intersect:return a.GKey.Constant.I;case p.Type.Difference:return a.GKey.Constant.X;default:return null}}execute(){const e=gDesigner.getActiveDocument().getEditor(),t=e&&i.GNode.order(e.getIndividualSelection().slice());if(!t)return;e.beginTransaction();const n=this._shouldChangeBooleanOperation(t);try{n?(this._setTransactionType(p.TransactionType.Merge),this._changeBooleanOperationType(t[0])):(this._setTransactionType(p.TransactionType.Combine),this._createCompoundShape(e,t))}finally{e.commitTransaction(this._getTransactionName())}}_setTransactionType(e){this._transactionType=e}_getTransactionName(){return i.GLocale.getValue("GMergeSubAction","transaction.".concat(this._transactionType))}_shouldChangeBooleanOperation(e){const[t]=e;return 1===e.length&&(t instanceof i.GCompoundShape||1===d.default.getValidItems(t).length)}_changeBooleanOperationType(e){if(e.getParent()instanceof i.GCompoundShape&&(e instanceof i.GCompoundShape||e.hasMixin(i.GVertexSource)&&!(e instanceof i.GGroup)))return e.setProperty("bool",this._getBooleanOperationType());if(e instanceof i.GCompoundShape&&e.getFirstChild())for(let t=e.getFirstChild().getNext();null!==t;t=t.getNext())t.setProperty("bool",this._getBooleanOperationType())}_createCompoundShape(e,t){const n=new i.GCompoundShape;let o,a=[];if(t.forEach(e=>{a=a.concat(d.default.getValidItems(e))}),a.length>1){const r=t[t.length-1];let s=r.getParent(),c=r.getNext();for(;!n.validateInsertion(s);)c=s.getNext(),s=s.getParent();if(!s)return;s.insertChild(n,c);try{const t=[],r=[];let s=null;o=new Set,a.forEach(e=>{e.getParent()instanceof i.GCompoundShape?(t.push(e),s||(s=e.getParent())):r.push(e),o.add(e.getParent())}),a=t.concat(r);const c=s||a[0];if((0,l.blockChanges)(e,o,null,n),n.assignStyleFrom(c),c instanceof i.GText){const e=c;if(!e.getPaintLayers().getFillLayers(!0).length&&e.getProperty("_fc")){n.getPaintLayers().clearFillLayers();const t="string"==typeof e.getProperty("_fc")?i.GRGBColor.fromCSSColor(e.getProperty("_fc")):e.getProperty("_fc");n.getPaintLayers().appendChild(new i.GStylable.FillPaintLayer(t))}}a.forEach(e=>{let t,o=e.getParent();for(!(o===s||o instanceof i.GCompoundShape&&this._type===p.Type.Union)&&e.setProperty("bool",this._getBooleanOperationType()),o.removeChild(e);(o instanceof i.GGroup||o instanceof i.GCompoundShape)&&!o.getFirstChild();)t=o,o=o.getParent(),o.removeChild(t);n.appendChild(e)})}finally{(0,l.releaseChanges)(e,o,null,n)}e.updateSelection(!1,[n])}}_getBooleanOperationType(){switch(this._type){case p.Type.Union:return i.GVertexPolyBoolean.OR;case p.Type.Subtract:return i.GVertexPolyBoolean.SUB;case p.Type.Intersect:return i.GVertexPolyBoolean.AND;case p.Type.Difference:return i.GVertexPolyBoolean.XOR;default:throw new Error("Type is not valid.")}}getTooltipConfig(e){return e&&p.TOOLTIP_CONFIG[e]?p.TOOLTIP_CONFIG[e][this._type]:null}toString(){return"[Object GMergeSubAction]"}}p.Type={Union:"union",Subtract:"subtract",Intersect:"intersect",Difference:"difference"},p.TransactionType={Merge:"merge",Combine:"combine"},p.TOOLTIP_CONFIG={[c.TOOLTIP_AREA.TOOLBAR]:{[p.Type.Union]:c.GRichTooltipConfig.from({title:i.GLocale.getValue("GMergeSubAction","tooltip.union.title"),description:i.GLocale.getValue("GMergeSubAction","tooltip.union.description"),video:u.gApi.getRichTooltipVideoURL("Boolean_Union.mp4"),middle:!1,learnMore:"https://documentation.corelvector.com/basics/compound-shapes-boolean-operations/"}),[p.Type.Subtract]:c.GRichTooltipConfig.from({title:i.GLocale.getValue("GMergeSubAction","tooltip.substract.title"),description:i.GLocale.getValue("GMergeSubAction","tooltip.substract.description"),video:u.gApi.getRichTooltipVideoURL("Boolean_Subtract.mp4"),middle:!1,learnMore:"https://documentation.corelvector.com/basics/compound-shapes-boolean-operations/"}),[p.Type.Intersect]:c.GRichTooltipConfig.from({title:i.GLocale.getValue("GMergeSubAction","tooltip.intersect.title"),description:i.GLocale.getValue("GMergeSubAction","tooltip.intersect.description"),video:u.gApi.getRichTooltipVideoURL("Boolean_Intersect.mp4"),middle:!1,learnMore:"https://documentation.corelvector.com/basics/compound-shapes-boolean-operations/"}),[p.Type.Difference]:c.GRichTooltipConfig.from({title:i.GLocale.getValue("GMergeSubAction","tooltip.difference.title"),description:i.GLocale.getValue("GMergeSubAction","tooltip.difference.description"),video:u.gApi.getRichTooltipVideoURL("Boolean_Difference.mp4"),middle:!1,learnMore:"https://documentation.corelvector.com/basics/compound-shapes-boolean-operations/"})}},e.exports=p},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(16),r=n(27);function s(){}o.GObject.inherit(s,r),s.ID="file.new",s.TITLE=new o.GLocaleKey("GNewAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.isEnabled=function(){return gDesigner.getApplicationManager().isCreatingNewDocumentEnabled()},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return a.CATEGORY_FILE},s.prototype.getGroup=function(){return"document"},s.prototype.getShortcut=function(){return[i.GKey.Constant.OPTION,"N"]},s.prototype.getAdditionalShortcuts=function(){return[[i.GKey.Constant.META,"N"]]},s.prototype.execute=function(){gContainer.newDocumentActionPerformed(),gDesigner.openNewDocumentDialog({closable:!0,showCloudOptions:!0,defaultOption:"start-option",newOrFromTemplate:!0})},s.prototype.toString=function(){return"[Object GNewAction]"},e.exports=s},function(e,t,n){"use strict";n(3);n(45);var o=n(1),i=n(13),a=n(16),r=n(151),s=(n(434),n(27));function l(){}o.GObject.inherit(l,s),l.ID="file.new.clipboard",l.TITLE=new o.GLocaleKey("GNewClipboardAction","title"),l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){return l.TITLE},l.prototype.getCategory=function(){return a.CATEGORY_FILE},l.prototype.getGroup=function(){return"document"},l.prototype.getShortcut=function(){return[i.GKey.Constant.SHIFT,i.GKey.Constant.CONTROL,i.GKey.Constant.OPTION,"N"]},l.prototype.isEnabled=function(){return!!gDesigner.getApplicationManager().isCopyPasteEnabled()&&(!!gDesigner.getActiveDocument()&&!!gDesigner.getClipboardContent(o.GNode.MIME_TYPE))},l.prototype.execute=function(){var e=o.GNode.deserialize(gDesigner.getClipboardContent(o.GNode.MIME_TYPE));if(e&&e.length>0){var t=e.filter((function(e){return e instanceof o.GItem||e instanceof o.GLayer}));if(t.length>0){var n=gDesigner.createScene();n.getActivePage().setProperties(["bck","w","h"],[o.GRGBColor.WHITE,0,0]),gDesigner.addDocument(new r(n));var i=gDesigner.getActiveDocument().getEditor();i.beginTransaction();try{i.insertElements(t,!0,!0,!0)}finally{i.commitTransaction("Paste"),gDesigner.setClipboardContent(o.GNode.MIME_TYPE,null)}gDesigner.getActiveDocument().getActiveWindow().centerAndZoom()}}},l.prototype._getBBox=function(e){var t=null;return o.GUtil.each(e,(function(e,n){var i=n.getPaintBBox();i&&i.getWidth()+i.getHeight()>0&&(t=t?t.united(i):new o.GRect(i.getX(),i.getY(),i.getWidth(),i.getHeight()))})),t},l.prototype.toString=function(){return"[Object GNewClipboardAction]"},e.exports=l},function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=o(n(1315)),r=o(n(27)),s=o(n(16));function l(){}i.GObject.inherit(l,r.default),l.ID="view.fast-view",l.TITLE=new i.GLocaleKey("GFastViewAction","title"),l.GroupID="view",l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){return i.GLocale.get(l.TITLE)},l.prototype.getCategory=function(){return s.default.CATEGORY_VIEW},l.prototype.getGroup=function(){return l.GroupID},l.prototype.isEnabled=function(){return!!gDesigner.getWindows().getActiveWindow()},l.prototype.isCheckable=function(){return!0},l.prototype.isChecked=function(){const e=gDesigner.getActiveDocument(),t=e&&e.getActiveWindow();if(t){var n=t.getView().getViewConfiguration();return!!n&&n.paintMode===i.GScenePaintConfiguration.PaintMode.Fast}return!1},l.prototype.execute=function(){var e,t=gDesigner.getActiveDocument().getActiveWindow().getView().getViewConfiguration();if(t.paintMode===i.GScenePaintConfiguration.PaintMode.Fast){var n=gDesigner.getActiveDocument().getScene().getActivePage();if(t.defaultEffectDetailLevel=null,n&&!n.isFixedSized())e=i.GScenePaintConfiguration.PaintMode.Full;else e=(n.getProperty(a.default.CLIP_PROPERTY_NAME,!0)||a.default.CLIP_CONTENT_ENABLED)===a.default.CLIP_CONTENT_ENABLED?i.GScenePaintConfiguration.PaintMode.Output:i.GScenePaintConfiguration.PaintMode.Full}else t.defaultEffectDetailLevel=.5/i.GPaintCanvas.getScreenDPI(),e=i.GScenePaintConfiguration.PaintMode.Fast;gDesigner.setPaintMode(e),gDesigner.updateGEditorSceneConfigurationPaintMode(e)},l.prototype.toString=function(){return"[GAction GFastViewAction]"},e.exports=l},function(e,t,n){"use strict";var o=n(1);e.exports={_reInitLayout:function(){this._canvasPropertiesRowInTouch=$("<div></div>").attr("data-property-row","canvas-size").addClass("canvas-properties-touch").gPropertyRow({columns:[{clazz:"canvas-properties-color-column",content:this._createInput("bck")},{clazz:"canvas-properties-type-and-size-column",content:$("<div>").addClass("canvas-properties-type-and-size-wrapper").append($("<div>").addClass("preset-size-wrapper").append(this._createInput("preset-size"))).append($("<div>").addClass("width-wrapper").append(this._createInput("w"))).append($("<div>").addClass("height-wrapper").append(this._createInput("h")))}]}).insertBefore(this._hrAfterbleedRow),this._bleedRowInTouch=$("<div>").addClass("page-size-and-bleed-properties-touch").gPropertyRow({columns:[{content:$("<span>"+o.GLocale.get(new o.GLocaleKey("GPageProperties","text.bleed"))+"</span>")},{clazz:"bleed-selector-column",content:this._createInput("bl")},{clazz:"page-size-and-bleed-separator-column",content:$("<div>").addClass("page-size-and-bleed-separator")},{clazz:"canvas-rotate-btn-column",content:this._createInput("rotate-canvas")},{clazz:"canvas-trim-btn-column",content:this._createInput("trim-canvas")},{clazz:"canvas-clip-btn-column",content:this._createInput("clip-content")}]}).insertBefore(this._hrAfterbleedRow)}}},function(e,t,n){"use strict";var o=n(14),i=n(13),a=n(1),r=n(185),s=o(n(16)),l=o(n(27));class c extends l.default{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];super(),this._isReverse=e,this._title=new a.GLocaleKey("GEnterLayerGroupAction","title".concat(this._isReverse?".reverse":""))}getId(){return this._isReverse?c.ID_REVERSE:c.ID}getTitle(){return this._title}getCategory(){return s.default.CATEGORY_VIEW}getShortcut(){return this._isReverse?[i.GKey.Constant.SHIFT,i.GKey.Constant.ENTER]:[i.GKey.Constant.ENTER]}isVisible(){return!1}execute(){const e=gDesigner.getLeftSidebars().getSidebar(r.SidebarsIds.GOutlineSidebar).getLayerPanel(),{vtree:t,currentFocus:n}=e.data("glayerpanel");if(!n)return;let o;if(!this._isReverse&&n.firstChild?o=n.firstChild:this._isReverse&&n.parent&&n.parent.row&&(o=n.parent),o){const i=e.gLayerPanel("getItem",n),r=e.gLayerPanel("getItem",o);i.removeFlag(a.GNode.Flag.Selected),r.setFlag(a.GNode.Flag.Selected),t.expandAndFocus(r)}}toString(){return"[Object GEnterLayerGroupAction]"}}c.ID="view.enter-layer-group",c.ID_REVERSE="view.enter-layer-group.reverse",e.exports=c},function(e,t,n){"use strict";var o=n(14),i=n(13),a=n(1),r=n(185),s=o(n(16)),l=o(n(27));class c extends l.default{getId(){return c.ID}getTitle(){return c.TITLE}getCategory(){return s.default.CATEGORY_MODIFY}getShortcut(){return[i.GKey.Constant.META,"2"]}isVisible(){return!1}execute(){const e=gDesigner.getLeftSidebars().getActiveSidebar(),t=gDesigner.getLeftSidebars().getSidebar(r.SidebarsIds.GOutlineSidebar),n=t.getLayerPanel(),o=n.gLayerPanel("getCurrentFocusedNode");if(o&&e===t.getId()){const e=n.gLayerPanel("getItem",o);e.hasFlag(a.GNode.Flag.Selected)&&n.gLayerPanel("toggleLockStatusOfLayerOrItem",e)}}toString(){return"[Object GLockLayerAction]"}}c.ID="modify.lock-layer",c.TITLE=new a.GLocaleKey("GLockLayerAction","title"),e.exports=c},function(e,t,n){"use strict";var o=n(14),i=n(13),a=n(1),r=n(185),s=o(n(16)),l=o(n(27));class c extends l.default{getId(){return c.ID}getTitle(){return c.TITLE}getCategory(){return s.default.CATEGORY_VIEW}getShortcut(){return[i.GKey.Constant.META,"3"]}isVisible(){return!1}execute(){const e=gDesigner.getLeftSidebars().getActiveSidebar(),t=gDesigner.getLeftSidebars().getSidebar(r.SidebarsIds.GOutlineSidebar),n=t.getLayerPanel(),o=n.gLayerPanel("getCurrentFocusedNode");if(o&&e===t.getId()){const e=n.gLayerPanel("getItem",o);e.hasFlag(a.GNode.Flag.Selected)&&n.gLayerPanel("toggleHideStatusOfLayerOrItem",e)}}toString(){return"[Object GToggleLayerVisibilityAction]"}}c.ID="view.toggle-layer-visibility",c.TITLE=new a.GLocaleKey("GToggleLayerVisibilityAction","title"),e.exports=c},function(e,t,n){"use strict";n(3);var o=n(1),i=(n(13),n(61)),a=n(16),r=n(27),s=n(1221);function l(){l.TOOLTIP_CONFIG={[i.TOOLTIP_AREA.MAIN_MENU.TRY_PRO_COMMON]:i.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GImportFontsAction","text.try-this-feature-pro-tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GImportFontsAction","text.try-this-feature-pro-tooltip-description")),learnMore:"https://documentation.corelvector.com/import-export/import/#import-fonts",upgradeToProStatsValue:"font.import",middle:!1,side:!0})}}o.GObject.inherit(l,r),l.ID="font.import",l.TITLE=new o.GLocaleKey("GImportFontsAction","title"),l.TOOLTIP_CONFIG=null,l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){return l.TITLE},l.prototype.getCategory=function(){return a.CATEGORY_FILE_IMPORT},l.prototype.getGroup=function(){return"import/import-fonts"},l.prototype.isEnabled=function(e){return e=e||gDesigner.getDefaultStorage(),!!gDesigner.getApplicationManager().isImportResourcesEnabled()&&(e.canPromptOpen()&&"undefined"!=typeof window&&window.indexedDB)},l.prototype.execute=function(e,t){(e=e||new s).import(t)},l.prototype.getTooltipArea=function(){return i.TOOLTIP_AREA.MAIN_MENU.TRY_PRO_COMMON},l.prototype.getTooltipConfig=function(e){return e&&l.TOOLTIP_CONFIG[e]||null},l.prototype.toString=function(){return"[Object GImportFontsAction]"},e.exports=l},function(e,t,n){"use strict";n(17),n(26),n(3),n(22),n(117),n(106);var o=n(1),i=n(13),a=n(776),r=n(34),s=n(16),l=n(27),c=n(431),d=n(205),u=n(1584),p=n(77);const g=n(37);var h=null,f=!1,m=!1;function y(){}o.GObject.inherit(y,l),y.ID="file.print",y.TITLE=new o.GLocaleKey("GPrintAction","title"),y.prototype.getId=function(){return y.ID},y.prototype.getTitle=function(){return y.TITLE},y.prototype.getIcon=function(){return"gravit-icon-print"},y.prototype.getCategory=function(){return s.CATEGORY_FILE},y.prototype.getGroup=function(){return"print"},y.prototype.isEnabled=function(){if(!gDesigner.getApplicationManager().isExportEnabled())return!1;const e=gDesigner.getActiveDocument();return e&&(!e.isNew()||e.isModified())},y.prototype.getShortcut=function(){return[i.GKey.Constant.COMMAND,"P"]},y.prototype.execute=function(){var e=gDesigner.getActiveDocument(),t=e.getScene(),n=new u.Item("PDF"),i={suppressMessages:!0,dpi:gDesigner.isEnabledProFeatures()?300:150,preserveEditingCapabilities:!1,jpegQuality:100,export:!0},s=()=>{console.log("NO DATA :(")};const l=()=>{-1!==navigator.userAgent.indexOf("Firefox")||gContainer.getRuntime()===p.Runtime.Electron&&a.GSVGExport.hasSupportedEffects(t)?g.confirm(o.GLocale.get(new o.GLocaleKey("GPrintAction","printing-warning")),e=>{e&&y()},void 0,void 0,void 0,!0,!0):y()};var y=()=>{Object.assign(i,{convertTextToPath:!0});let n=[];t.iteratePages((function(e){n.push(e)}));let o=[],l=(t,c)=>{if(t||!c)return s();if(o.push(c),n.shift(),n.length)return void a.GSVGExport.export(n[0],i,l);let d="";for(var u=0;u<o.length;u++){let e="data:image/svg+xml;base64,"+(0,r.stringToBase64String)(o[u]);d=d.concat("<img style='height:100%;width:auto;max-width:100%;display:block;' src='"+e+"'/>")}var p=h.contentDocument;p.head.innerHTML="<style type='text/css' media='print'>@page { margin: 0mm; }</style>",p.body.style.margin="0",p.body.style.height="100%",p.body.innerHTML=d,p.title=e.getTitle(),$(h.contentWindow.document).ready((function(){h.contentWindow.focus();try{h.contentWindow.print()}catch(e){m=!0,v()}}))};n.length&&a.GSVGExport.export(n[0],i,l)},v=()=>new d(o.GLocale.get(new o.GLocaleKey("GPrintAction","printing-disabled"))).open(),_=()=>{if(h.src){h.focus();try{h.contentWindow.print()}catch(e){f=!0,h.onload=l,h.src="about:blank"}}},b=()=>{n.read(e=>{let t=new window.Blob([e],{type:"application/pdf"}),n=window.URL.createObjectURL(t);h.setAttribute("src",n)})};h||((h=document.createElement("iframe")).style.visibility="hidden",h.style.position="fixed",h.style.right="0",h.style.bottom="0",h.style.zIndex="-1",document.body.appendChild(h),gContainer.getRuntime()===p.Runtime.Electron&&(f=!0)),new c(()=>{!function(){if(m)v();else if(f)l();else{var o=0,r=[300,150,72,36,null];gDesigner.isEnabledProFeatures()||r.shift();for(var c=!1;!a.GPDFExport.isSupported(t,!0,r[o++]+"dpi");)if(null===r[o]){c=!0;break}c?(h.onload=null,y()):(i.dpi=r[o-1],h.onload=_,e.store(n,b,s,i))}}()},()=>{gDesigner.stats("action-cancelled_anonymous",this.getId())})},y.prototype.toString=function(){return"[Object GPrintAction]"},e.exports=y},function(e,t,n){"use strict";var o=n(1),i=n(222);function a(){}o.GObject.inherit(a,i),a.Item=function(e){i.Item.call(this,new a),this._extension=e},o.GObject.inherit(a.Item,i.Item),a.Item.prototype._extension=null,a.Item.prototype.getExtension=function(){return this._extension},a.Item.prototype.read=function(e,t,n){return e(this._data)},a.Item.prototype.write=function(e,t,n,o){this._data=e,t&&t()},e.exports=a},function(e,t,n){"use strict";n(3);var o=n(1),i=n(16),a=n(97);function r(){}o.GObject.inherit(r,a),r.ID="modify.reverse-order",r.TITLE=new o.GLocaleKey("GReverseOrderAction","title"),r.prototype.getId=function(){return r.ID},r.prototype.getTitle=function(){return r.TITLE},r.prototype.getCategory=function(){return i.CATEGORY_MODIFY_PATH},r.prototype.getGroup=function(){return"structure/path"},r.prototype.isEnabled=function(){if(!a.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument()?gDesigner.getActiveDocument().getEditor().getSelection():null,t=!1;if(e)for(var n=0;!t&&n<e.length;++n)e[n]instanceof o.GPath&&(t=!0);return t},r.prototype.execute=function(){var e=gDesigner.getActiveDocument(),t=e?e.getEditor():null,n=t?t.getSelection():null,i=[];if(n)for(var a=0;a<n.length;++a){var r=n[a];r instanceof o.GPath&&i.push(r)}if(i.length){t.beginTransaction();try{for(a=0;a<i.length;++a)i[a].reverseOrder()}finally{t.commitTransaction(o.GLocale.get(this.getTitle()))}}},r.prototype.toString=function(){return"[Object GReverseOrderAction]"},e.exports=r},function(e,t,n){"use strict";n(3);var o=n(1),i=n(16),a=n(27);function r(){}o.GObject.inherit(r,a),r.ID="file.save-all",r.TITLE=new o.GLocaleKey("GSaveAllAction","title"),r.prototype.getId=function(){return r.ID},r.prototype.getTitle=function(){return r.TITLE},r.prototype.getCategory=function(){return i.CATEGORY_FILE},r.prototype.getGroup=function(){return"file"},r.prototype.isAvailable=function(e){return!1},r.prototype.isEnabled=function(){return!1},r.prototype.execute=function(){for(var e=gDesigner.getDocuments(),t=0;t<e.length;++t)e[t].isModified()&&e[t].save()},r.prototype.toString=function(){return"[Object GSaveAllAction]"},e.exports=r},function(e,t,n){"use strict";n(7),n(3);var o=n(1),i=n(16),a=n(27),r=n(1251),s=n(1253);function l(){}o.GObject.inherit(l,a),l.ID=s.ID,l.TITLE=new o.GLocaleKey("GSettingsAction","title"),l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){return l.TITLE},l.prototype.getCategory=function(){return i.CATEGORY_EDIT},l.prototype.getGroup=function(){return"settings"},l.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-setting-touch":""},l.prototype.execute=async function(){(new r).then(e=>e.open())},l.prototype.toString=function(){return"[Object GSettingsAction]"},e.exports=l},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(16),r=n(27),s=n(1146);function l(){}o.GObject.inherit(l,r),l.ID="view.canvas.show-rulers",l.TITLE=new o.GLocaleKey("GShowRulersAction","title"),l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){return l.TITLE},l.prototype.getCategory=function(){return a.CATEGORY_VIEW_CANVAS},l.prototype.getGroup=function(){return"show/canvas"},l.prototype.getShortcut=function(){return[i.GKey.Constant.META,i.GKey.Constant.OPTION,"R"]},l.prototype.isEnabled=function(){return!(!gDesigner.getWindows().getActiveWindow()||!gDesigner.getWindows().getActiveWindow().getView())},l.prototype.isCheckable=function(){return!0},l.prototype.isChecked=function(){return gDesigner.getWindows().getActiveWindow()&&gDesigner.getWindows().getActiveWindow().getView()&&gDesigner.getWindows().getActiveWindow().getView().hasRulers()},l.prototype.execute=function(){var e=gDesigner.getWindows().getActiveWindow().getView(),t=!e.hasRulers(),n=gDesigner.getAction(s.ID);t&&!n.isChecked()&&gDesigner.executeAction(s.ID,void 0,void 0,!0),e.setRulers(t),$("#mainframe").toggleClass("rulers",t),gDesigner.setSetting("rulers_visible",t)},l.prototype.toString=function(){return"[Object GShowRulersAction]"},e.exports=l},function(e,t,n){"use strict";n(3);var o=n(1),i=n(16),a=n(27);function r(){}o.GObject.inherit(r,a),r.ID="view.canvas.show-slices",r.TITLE=new o.GLocaleKey("GShowSlicesAction","title"),r.prototype.getId=function(){return r.ID},r.prototype.getTitle=function(){return r.TITLE},r.prototype.getCategory=function(){return i.CATEGORY_VIEW_CANVAS},r.prototype.getGroup=function(){return"show/canvas"},r.prototype.isEnabled=function(){return!!gDesigner.getWindows().getActiveWindow()},r.prototype.isCheckable=function(){return!0},r.prototype.isChecked=function(){var e=gDesigner.getWindows().getActiveWindow();if(e){var t=e.getView().getViewConfiguration();return!!t&&!0===t.slices}return!1},r.prototype.execute=function(){var e=gDesigner.getWindows().getActiveWindow().getView();e.getViewConfiguration().slices=!e.getViewConfiguration().slices,e.invalidateAndResetCache(null)},r.prototype.toString=function(){return"[Object GShowSlicesAction]"},e.exports=r},function(e,t,n){"use strict";n(17),n(314),n(3),n(22);var o=n(1),i=n(34),a=n(16),r=n(97);function s(){}o.GObject.inherit(s,r),s.ID="modify.bmp2path",s.TITLE=new o.GLocaleKey("GVectorizeImageAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return a.CATEGORY_MODIFY_PATH},s.prototype.getGroup=function(){return"structure/modify"},s.prototype.isEnabled=function(){if(!r.prototype.isEnabled.call(this))return!1;var e=gDesigner.getActiveDocument()?gDesigner.getActiveDocument().getEditor().getSelection():null;if(e)for(var t=0;t<e.length;++t)if(e[t]instanceof o.GImage&&!e[t].getStatus())return!0;return!1},s.prototype.execute=function(){var e=gDesigner.getActiveDocument(),t=e?e.getEditor():null,n=t?t.getIndividualSelection():null,a=[];if(n)for(var r=0;r<n.length;++r)n[r]instanceof o.GImage&&!n[r].getStatus()&&a.push(n[r]);if(a.length){t.beginTransaction();try{var s,l=[];s=new Set;for(r=0;r<a.length;++r){var c=a[r].getParent();c&&s.add(c)}try{(0,i.blockChanges)(t,s);for(r=0;r<a.length;++r){var d=a[r],u=d.getParent(),p=d.getNext(),g=this._vectorize(d);g&&(u.insertChild(g,p),l.push(g)),u.removeChild(d)}}finally{(0,i.releaseChanges)(t,s),l.length&&t.updateSelection(!1,l)}}finally{t.commitTransaction(o.GLocale.get(this.getTitle()))}}},s.prototype._vectorize=function(e){new o.GVertexContainer;var t,n,i=e.getImageCanvas(),a=new o.GImageTracer,r=a.getImgdata(i),s=r.width,l=r.height,c=a.imagedataToTracedata(r,{ltres:1,qtres:Math.min(s/4,l/4,10),numberofcolors:8,blurradius:2,colorquantcycles:5,pathomit:Math.min(.25*s,.25*l,20)}),d=c.palette,u=[];for(t in c.layers)if(c.layers.hasOwnProperty(t))for(n=0;n<c.layers[t].length;n++)u[c.layers[t][n][0].y1*s+c.layers[t][n][0].x1]={l:""+t,p:""+n};var p,g,h=Object.keys(u);h.sort((function(e,t){return e-t}));var f,m,y=new o.GGroup,v=-1;for(t=0;t<h.length;t++)if(p=u[h[t]].l,f=t+1<h.length?u[h[t+1]].l:-1,g=u[h[t]].p,0!==d[p].a){var _=new o.GRGBColor([d[p].r,d[p].g,d[p].b]),b=c.layers[p];p!==v&&(m=new o.GVertexContainer);var w=b[g];m.addVertex(o.GVertex.Command.Move,w[0].x1,w[0].y1);for(var C=0;C<w.length;C++){var x=w[C];"L"===x.type?m.addVertex(o.GVertex.Command.Line,x.x2,x.y2):(m.addVertex(o.GVertex.Command.Curve,x.x3,x.y3),m.addVertex(o.GVertex.Command.Curve,x.x2,x.y2))}if(p!==f){m=new o.GVertexSimplifier(m).simplify(.4,!1,!0);var S=o.GPathUtil.createPathFromVertexSource(m);S&&(S.getPaintLayers().appendChild(new o.GStylable.FillPaintLayer(_)),S.setProperty("name",_.getClosestCSSName()),y.appendChild(S))}v=p}return y},s.prototype.toString=function(){return"[Object GVectorizeImageAction]"},e.exports=s},function(e,t,n){"use strict";var o=n(14);n(18),n(99),n(29);var i=n(1),a=n(13),r=o(n(1592)),s=o(n(77)),l=o(n(27)),c=o(n(16)),d=o(n(37)),u=o(n(428)),p=o(n(1317));const{isExecutingOnMSTeamsSync:g}=u.default;class h extends l.default{constructor(){super(),this._scene=null,this._isInPlayMode=null,this._shouldExitFullScreen=null,this._isErrorMessageDisplaying=!1,this._timeoutId=null,this._isLoading=!1,this._keyDownHandlerBind=this._keyDownHandler.bind(this),this._fullScreenRequestDeniedHandlerBind=this._fullScreenRequestDeniedHandler.bind(this),this._browserFullScreenModeChangeHandlerBind=this._browserFullScreenModeChangeHandler.bind(this)}getId(){return h.ID}getTitle(){return h.TITLE}getCategory(){return c.default.CATEGORY_VIEW}getShortcut(){return[a.GKey.Constant.META,a.GKey.Constant.OPTION,a.GKey.Constant.ENTER]}isEnabled(){return!!gDesigner.getActiveDocument()&&r.default.enabled&&!this._isErrorMessageDisplaying&&!this._isLoading}isVisible(){return!g()}execute(){if(this._isInPlayMode)return this._exitPlayMode();if(this._scene=this._getScene(),this._scene)if(this._setIsLoading(!0),this._widget=new a.GSceneWidget(this._scene),this._widget.getViewConfiguration().paintMode=i.GScenePaintConfiguration.PaintMode.Output,this._overlay=$("<div></div>").css({position:"absolute",zIndex:9999,left:0,right:0,top:0,bottom:0,background:"black"}),this._overlay.append(this._widget._htmlElement).appendTo($("body")),document.addEventListener("keydown",this._keyDownHandlerBind,!0),window.addEventListener("unhandledrejection",this._fullScreenRequestDeniedHandlerBind),gContainer.getRuntime()===s.default.Runtime.Electron){const e=n(860).remote.getCurrentWindow();e.once("leave-full-screen",this._exitPlayMode.bind(this)),e.isFullScreen()?(this._setShouldExitFullScreen(!1),this._enterPlayMode()):(this._setShouldExitFullScreen(!0),e.once("enter-full-screen",()=>{this._timeoutId=setTimeout(this._enterPlayMode.bind(this),250)}),e.setFullScreen(!0))}else this._setShouldExitFullScreen(!0),document.addEventListener(r.default.raw.fullscreenchange,this._browserFullScreenModeChangeHandlerBind),r.default.request(this._overlay[0])}changeActivePage(e,t){const n=gDesigner.getAction("".concat(p.default.ID,".").concat(t)).getNextPage(e);n?e.setActivePage(n):t===p.default.Type.Next&&r.default.exit()}_getScene(){gDesigner.toggleLoading(!0);try{return this._cloneActiveScene()}catch(e){return null}finally{gDesigner.toggleLoading(!1)}}_cloneActiveScene(){const e=gDesigner.getActiveDocument(),t=e&&e.getScene();return t?t.clone(null,t.getWorkspace()):null}_keyDownHandler(e){let t=!0;switch(a.GKey.translateCode(e.code)){case a.GKey.Constant.DOWN:case a.GKey.Constant.PAGE_DOWN:case a.GKey.Constant.RIGHT:case a.GKey.Constant.SPACE:this.changeActivePage(this._scene,p.default.Type.Next);break;case a.GKey.Constant.UP:case a.GKey.Constant.PAGE_UP:case a.GKey.Constant.LEFT:this.changeActivePage(this._scene,p.default.Type.Previous);break;case a.GKey.Constant.ESC:gContainer.getRuntime()===s.default.Runtime.Electron&&this._exitPlayMode();break;default:t=!1}t&&e.stopPropagation()}_fullScreenRequestDeniedHandler(e){"Fullscreen request denied"===e.reason.message&&(this._exitPlayMode(),d.default.custom({title:i.GLocale.getValue("GCommonNames","text.something-wrong.try-again"),openCallback:()=>this._setIsErrorMessageDisplaying(!0),closeCallback:()=>this._setIsErrorMessageDisplaying(!1)}))}_enterPlayMode(){this._setIsInPlayMode(!0),this._widget.resize(this._overlay.outerWidth(),this._overlay.outerHeight());const e=this._scene.getActivePage().getPaintBBox();if(this._widget.zoomAll(e,!1),gContainer.getRuntime()===s.default.Runtime.Browser||gContainer.getRuntime()===s.default.Runtime.PWA){/^((?!chrome|android)(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))*[s\u017F]afari/i.test(navigator.userAgent)&&this._createExitFullScreenHint().appendTo(this._overlay)}this._setIsLoading(!1)}_createExitFullScreenHint(){return $("<div/>").addClass("g-exit-full-screen").on("webkitAnimationEnd",e=>{$(e.target).closest(".g-exit-full-screen").remove()}).append($("<div/>").html(i.GLocale.getValue("GPlayAction","text.exit-full-screen").replace("%key",()=>$("<span/>").addClass("highlight").text(i.GLocale.getValue("GPlayAction","text.esc")).prop("outerHTML"))))}_exitPlayMode(){this._timeoutId&&clearTimeout(this._timeoutId),this._shouldExitFullScreen&&this._exitFullScreen(),this._overlay.remove(),this._widget.release(),document.removeEventListener("keydown",this._keyDownHandlerBind,!0),document.removeEventListener(r.default.raw.fullscreenchange,this._browserFullScreenModeChangeHandlerBind),window.removeEventListener("unhandledrejection",this._fullScreenRequestDeniedHandlerBind),this._setIsInPlayMode(!1),this._setIsLoading(!1)}_browserFullScreenModeChangeHandler(){r.default.isFullscreen?this._enterPlayMode():this._exitPlayMode()}_exitFullScreen(){if(gContainer.getRuntime()===s.default.Runtime.Electron){n(860).remote.getCurrentWindow().setFullScreen(!1)}else r.default.exit()}_setIsInPlayMode(e){this._isInPlayMode=e}_setIsLoading(e){this._isLoading=e}_setShouldExitFullScreen(e){this._shouldExitFullScreen=e}_setIsErrorMessageDisplaying(e){this._isErrorMessageDisplaying=e}toString(){return"[Object GPlayAction]"}}h.ID="view.play",h.TITLE=new i.GLocaleKey("GPlayAction","title"),e.exports=h},function(e,t,n){!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=e.exports,o="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,i=function(){for(var e,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],o=0,i=n.length,a={};o<i;o++)if((e=n[o])&&e[1]in t){for(o=0;o<e.length;o++)a[n[0][o]]=e[o];return a}return!1}(),a={change:i.fullscreenchange,error:i.fullscreenerror},r={request:function(e){var n=i.requestFullscreen;e=e||t.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?e[n]():e[n](o?Element.ALLOW_KEYBOARD_INPUT:{})},exit:function(){t[i.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,n){var o=a[e];o&&t.addEventListener(o,n,!1)},off:function(e,n){var o=a[e];o&&t.removeEventListener(o,n,!1)},raw:i};i?(Object.defineProperties(r,{isFullscreen:{get:function(){return Boolean(t[i.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[i.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(t[i.fullscreenEnabled])}}}),n?e.exports=r:window.screenfull=r):n?e.exports=!1:window.screenfull=!1}()},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(16),r=n(27);function s(){}o.GObject.inherit(s,r),s.ID="view.canvas.show-effects",s.TITLE=new o.GLocaleKey("GShowEffectsAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return a.CATEGORY_VIEW_CANVAS},s.prototype.getGroup=function(){return"show/canvas"},s.prototype.isEnabled=function(){return!!gDesigner.getWindows().getActiveWindow()},s.prototype.isCheckable=function(){return!0},s.prototype.getShortcut=function(){return[i.GKey.Constant.META,"E"]},s.prototype.isChecked=function(){var e=gDesigner.getWindows().getActiveWindow();return!!e&&!e.getView().getViewConfiguration().ignoreEffects},s.prototype.execute=function(){var e=gDesigner.getWindows().getActiveWindow();if(!e)return!1;var t=e.getView();t.getViewConfiguration().ignoreEffects=!t.getViewConfiguration().ignoreEffects,t.invalidateAndResetCache(null)},s.prototype.toString=function(){return"[Object GShowEffectsAction]"},e.exports=s},function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=o(n(428)),r=n(9),s=n(16),l=n(27),c=n(205),d=n(77),u=n(111);const p=n(37),{isExecutingOnMSTeamsSync:g}=a.default;function h(e,t){this._locale=e,this._title=h.Translations[e]||t}h.Translations=["English","Deutsch","中文","Português","Español","Français"],i.GObject.inherit(h,l),h.ID="language",h.prototype._locale=null,h.prototype._title=null,h.prototype.getId=function(){return h.ID+"."+this._locale},h.prototype.isCheckable=function(){return!0},h.prototype.isChecked=function(){return i.GLocale.getLanguage()===this._locale},h.prototype.getTitle=function(){return this._title},h.prototype.getCategory=function(){return s.CATEGORY_HELP_LANGUAGE},h.prototype.getGroup=function(){return"help/language"},h.prototype.isEnabled=function(){return!0},h.prototype.isVisible=function(){return!g()},h.prototype.execute=function(){if(i.GLocale.getLanguage()!==this._locale){let e=()=>gDesigner.setSetting("language",this._locale),t=()=>r.gApi.updateUser({locale:i.GLocale.lookupLocale(this._locale)}).then(()=>e()).then(()=>this._reloadApp()).catch(e=>p.alert(r.gApi.formatError(e)));gDesigner.getUser().then(n=>{n?gDesigner.isAnonymous()?(e(),this._reloadApp()):t():u.performLogin().then(e=>{e&&t()})})}},h.prototype._reloadApp=function(){gContainer.getRuntime()===d.Runtime.Browser||gContainer.getRuntime()===d.Runtime.PWA?location.reload():new c(i.GLocale.get(new i.GLocaleKey("GNewDocumentDialog","text.restart-app"))).open()},h.prototype.toString=function(){return"[Object GSwitchLanguageAction]"},e.exports=h},function(e,t,n){"use strict";n(3);var o=n(1),i=(n(16),n(27));function a(e){let{name:t,category:n,group:i,link:a,icon:r,builder:s}=e;this._name=t,this._category=n,this._group=i,this._link=a,this._builder=s,this._title=new o.GLocaleKey("GOpenLinkAction","title."+t),this._icon=r}a.Links=n(1596),o.GObject.inherit(a,i),a.ID="open-link",a.prototype._name=null,a.prototype._title=null,a.prototype.getIcon=function(){return this._icon||null},a.prototype.getId=function(){return a.ID+"."+this._name},a.prototype.getTitle=function(){return this._title},a.prototype.getCategory=function(){return this._category},a.prototype.getGroup=function(){return this._group},a.prototype.isEnabled=function(){return!0},a.prototype.execute=function(){if(this._link||this._builder){let e=this._builder&&"function"==typeof this._builder&&this._builder()||this._link;e&&gContainer.openExternalLink(null,e)}},a.prototype.toString=function(){return"[Object GOpenLinkAction]"},e.exports=a},function(e,t,n){"use strict";var o=n(16),i=n(1278);e.exports=[{name:"contact-us",link:gApi.link.getSupportUrl(),category:o.CATEGORY_HELP_SUPPORT,group:"help/support"},{name:"user-guide",link:gApi.link.getDocumentationUrl(),category:o.CATEGORY_HELP_LEARN,group:"help/learn"},{name:"tutorials",link:i.youtubePlaylist,category:o.CATEGORY_HELP_LEARN,group:"help/learn"},{name:"request-new-feature",link:gApi.link.getRequestNewFeatureUrl(),category:o.CATEGORY_HELP,group:"help"},{name:"eula",link:"http://www.corel.com/eula",category:o.CATEGORY_HELP,group:"help"}]},function(e,t,n){"use strict";n(3);var o=n(1),i=n(16),a=n(27),r=n(111);function s(){}o.GObject.inherit(s,a),s.ID="file.open-from-template",s.TITLE=new o.GLocaleKey("GNewFromTemplateAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return i.CATEGORY_FILE},s.prototype.getGroup=function(){return"document"},s.prototype.isEnabled=function(){return r.isOnline()&&!gDesigner.isOffline(6e5)&&gDesigner.getApplicationManager().isCreatingNewDocumentEnabled()},s.prototype.execute=function(){gContainer.newDocumentActionPerformed(),gDesigner.openNewDocumentDialog({closable:!0,showCloudOptions:!0,defaultOption:"templates-option",newOrFromTemplate:!0})},s.prototype.toString=function(){return"[Object GNewFromTemplateAction]"},e.exports=s},function(e,t,n){"use strict";n(3);var o=n(1),i=n(27),a=n(16);function r(){}o.GObject.inherit(r,i),r.ID="open-welcome-screen",r.TITLE=new o.GLocaleKey("GOpenWelcomeScreenAction","title"),r.prototype.getId=function(){return r.ID},r.prototype.getTitle=function(){return r.TITLE},r.prototype.getCategory=function(){return a.CATEGORY_HELP},r.prototype.getGroup=function(){return"help"},r.prototype.isEnabled=function(){return(!gDesigner._newDocumentDialog||!gDesigner._newDocumentDialog.isOpen())&&gDesigner.getApplicationManager().isCreatingNewDocumentEnabled()&&gDesigner.getLicense().canAccessFreemium()},r.prototype.execute=function(){gDesigner.openNewDocumentDialog({closable:!0,showCloudOptions:!0})},r.prototype.toString=function(){return"[Object GOpenWelcomeScreenAction]"},e.exports=r},function(e,t,n){"use strict";n(3);var o=n(1),i=n(27),a=n(16);function r(){}o.GObject.inherit(r,i),r.ID="check-for-updates",r.TITLE=new o.GLocaleKey("GCheckForUpdatesAction","title"),r.prototype.getId=function(){return r.ID},r.prototype.getTitle=function(){return r.TITLE},r.prototype.getCategory=function(){return a.CATEGORY_HELP},r.prototype.getGroup=function(){return"help"},r.prototype.isEnabled=function(){return!0},r.prototype.execute=function(){gDesigner.getSoftwareUpdateManager().checkForUpdates()},r.prototype.toString=function(){return"[Object GCheckForUpdatesAction]"},e.exports=r},function(e,t,n){"use strict";n(3);var o=n(1);const i=n(27);function a(e){this._action=e}o.GObject.inherit(a,i),a.prototype._action=null,a.prototype.getId=function(){return this._action.getId()},a.prototype.getTitle=function(){return this._action.getTitle()},a.prototype.getIcon=function(){return this._action.getIcon()},a.prototype.getCategory=function(){return this._action.getCategory()},a.prototype.getGroup=function(){return this._action.getGroup()},a.prototype.getGroupIcon=function(){return this._action.getGroupIcon()},a.prototype.getShortcut=function(){return this._action.getShortcut()},a.prototype.isShortcutGlobal=function(){return this._action.isShortcutGlobal()},a.prototype.isRegisterShortcut=function(){return this._action.isRegisterShortcut()},a.prototype.getAdditionalShortcuts=function(){return this._action.getAdditionalShortcuts()},a.prototype.isEnabled=function(){return this._action.isEnabled()},a.prototype.isCheckable=function(){return this._action.isCheckable()},a.prototype.isChecked=function(){return this._action.isChecked()},a.prototype.isAvailable=function(e){return this._action.isAvailable(e)},a.prototype.execute=function(){if(gDesigner.isEnabledProFeatures(this._action.getId()))return this._action.execute.apply(this._action,arguments);gDesigner.handlePROFeatureInterruption()},a.prototype.executeFromShortcut=function(){return this.execute.apply(this,arguments)},a.prototype.isPro=function(){return!0},a.prototype.getTooltipArea=function(){return this._action.getTooltipArea()},a.prototype.getTooltipConfig=function(e){return this._action.getTooltipConfig(e)},a.prototype.statsValue=function(){return this._action.statsValue()},a.prototype.toString=function(){return this._action.toString()},e.exports=a},function(e,t,n){"use strict";n(18),n(3),n(29);var o=n(1);const i=n(16),a=n(27),r=n(77),{CLOUD_SYNC_FEATURE:{NEW_LAYOUT:s}={}}=n(9);function l(){}o.GObject.inherit(l,a),l.ID="cloud.sync.info",l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){const e=gDesigner.getActiveDocument();if(e&&e.getScene()){const t=e.getScene().lastModifiedDate();return t?o.GLocale.get(new o.GLocaleKey("GCloudSynchronizationAction","text.last-synced-at")).replace("%date",o.GLocale.toLocaleDate(t,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})):o.GLocale.get(new o.GLocaleKey("GDocumentChooser","text.cloud.unavailable"))}return o.GLocale.get(new o.GLocaleKey("GDocumentChooser","text.cloud.unavailable"))},l.prototype.getCategory=function(){return i.CATEGORY_FILE},l.prototype.getGroup=function(){return"file"},l.prototype.isVisible=function(){const e=gDesigner.getActiveDocument();return e&&e.isCloudSyncOn()&&e.isCloudSynchronismAvailable()},l.prototype.isEnabled=function(){return!1},l.prototype.isAvailable=function(){return!!s&&gContainer.getRuntime()===r.Runtime.Electron&&o.GSystem.operatingSystem===o.GSystem.OperatingSystem.OSX_IOS},l.prototype.toString=function(){return"[Object GCloudSynchronizationInfoAction]"},e.exports=l},function(e,t,n){"use strict";n(3);var o=n(1);const i=n(16),a=n(27);function r(){}o.GObject.inherit(r,a),r.ID="file.share",r.TITLE=new o.GLocaleKey("GShareAction","title"),r.prototype.getId=function(){return r.ID},r.prototype.getTitle=function(){return r.TITLE},r.prototype.getCategory=function(){return i.CATEGORY_FILE_SHARE},r.prototype.getGroup=function(){return"file-share/share"},r.prototype.isEnabled=function(){return gDesigner.getApplicationManager().isShareEnabled()},r.prototype.isVisible=function(){return!0},r.prototype.execute=function(){gDesigner.getShareManager().share()},r.prototype.toString=function(){return"[Object GShareAction]"},e.exports=r},function(e,t,n){"use strict";var o=n(14);n(7),n(3);var i=n(1),a=o(n(428));const{isExecutingOnMSTeamsSync:r}=a.default;var s=n(16),l=n(27);const c=n(1129),d=n(37);function u(){}i.GObject.inherit(u,l),u.ID="file.sharepoint-checkout",u.TITLE=new i.GLocaleKey("GSharePointCheckOutAction","title"),u.prototype.getId=function(){return u.ID},u.prototype.getTitle=function(){return u.TITLE},u.prototype.getCategory=function(){return s.CATEGORY_FILE},u.prototype.getGroup=function(){return"file"},u.prototype.isEnabled=function(){if(!r())return!1;const e=gDesigner.getActiveDocument();if(!e)return!1;const t=e.getStorageItem();return!!t&&t instanceof c.Item},u.prototype.isVisible=function(){return this.isEnabled()},u.prototype.execute=async function(){try{const e=gDesigner.getActiveDocument().getStorageItem();if(await e.refreshCheckOutStatus(),e.isCheckedOutByMe())return d.alert(i.GLocale.get(new i.GLocaleKey("GSharePointCheckOutAction","text.already-checkout")));await e.checkOut(),d.alert(i.GLocale.get(new i.GLocaleKey("GSharePointCheckOutAction","text.successul-checkout")))}catch(e){d.alert(e.message)}},u.prototype.toString=function(){return"[Object GSharePointCheckOutAction]"},e.exports=u},function(e,t,n){"use strict";var o=n(14);n(7),n(18),n(3),n(29);var i=n(1),a=o(n(428));const{isExecutingOnMSTeamsSync:r}=a.default;var s=n(16),l=n(27);const c=n(1129),d=n(37),u=n(1605),p=n(71);function g(){}i.GObject.inherit(g,l),g.ID="file.sharepoint-checkin",g.TITLE=new i.GLocaleKey("GSharePointCheckInAction","title"),g.prototype.getId=function(){return g.ID},g.prototype.getTitle=function(){return g.TITLE},g.prototype.getCategory=function(){return s.CATEGORY_FILE},g.prototype.getGroup=function(){return"file"},g.prototype.isEnabled=function(){return!!this._isSupported()&&gDesigner.getActiveDocument().getStorageItem().isCheckedOutByMe()},g.prototype._isSupported=function(){if(!r())return!1;const e=gDesigner.getActiveDocument();if(!e)return!1;const t=e.getStorageItem();return!!t&&t instanceof c.Item},g.prototype.isVisible=function(){return this._isSupported()},g.prototype.execute=async function(){try{const e=gDesigner.getActiveDocument();if(e.isModified())return void d.alert(i.GLocale.get(new i.GLocaleKey("GSharePointCheckInAction","text.doc-modified-save-before-check-in")).replace("%title",e.getTitle()));const t=e.getStorageItem(),n=t.getCloudClient(),o=await n.getLibrarySettings();await u.openCheckInDialog(o).then(async n=>{let{ok:o,comment:i,type:a}=n;o&&(await t.checkIn(i,a),gDesigner.trigger(new p(p.Type.SynchronismUpdated,e)))})}catch(e){d.alert(e.message)}},g.prototype.toString=function(){return"[Object GSharePointCheckInAction]"},e.exports=g},function(e,t,n){"use strict";var o=n(14);n(7);var i=n(1),a=o(n(1215));const r=[{text:new i.GLocaleKey("GFilesPanelViewSharepoint","text.checkin-type-minor"),value:a.default.CheckinType.MinorCheckIn,selected:!0},{text:new i.GLocaleKey("GFilesPanelViewSharepoint","text.checkin-type-major"),value:a.default.CheckinType.MajorCheckIn},{text:new i.GLocaleKey("GFilesPanelViewSharepoint","text.checkin-type-overwrite"),value:a.default.CheckinType.OverwriteCheckIn}];e.exports=class{static openCheckInDialog(e){return new Promise(async t=>{var n=$("<div></div>").addClass("g-container-sharepoint-check-in-dialog").append($("<div></div>").addClass("minor-related").addClass("row").text(i.GLocale.get(new i.GLocaleKey("GFilesPanelViewSharepoint","text.choose-checkin-type")))).append($("<div></div>").addClass("row").addClass("minor-related").append($("<select/>").addClass("check-in-type").addClass("field").append(r.map(e=>{let{text:t,value:n,selected:o}=e;return $("<option/>").attr("value",n).text(i.GLocale.get(t)).prop("selected",!!o)})))).append($("<div></div>").addClass("row").text(i.GLocale.get(new i.GLocaleKey("GFilesPanelViewSharepoint","text.checkin-comment")))).append($("<div></div>").addClass("row").append($("<textarea/>").addClass("comment").addClass("field").addClass("max-width").attr("type","text")));n.gDialog({releaseOnClose:!0,className:"g-sharepoint-check-in-dialog",buttons:[$("<button></button>").text(i.GLocale.get(new i.GLocaleKey("GLocale","cancel"))).on("click",()=>{n.gDialog("close"),t({ok:!1}),gDesigner.stats("filespanel-view_sharepoint-checkin_cancel")}),$("<button></button>").addClass("primary").text(i.GLocale.get(new i.GLocaleKey("GLocale","ok"))).on("click",()=>{n.gDialog("close");const o=e.enableMinorVersions?n.find(".check-in-type").val():a.default.CheckinType.MajorCheckIn;let i;i=o===a.default.CheckinType.MinorCheckIn?"minor":o===a.default.CheckinType.MajorCheckIn?"major":"overwrite-minor-version",gDesigner.stats("filespanel-view_sharepoint-checkin_confirm",i),t({ok:!0,comment:n.find(".comment").val(),type:o})})]}),n.gDialog("open",!1),e.enableMinorVersions||(n.find(".minor-related").hide(),n.find("textarea").focus())})}}},function(e,t,n){"use strict";n(3);var o=n(1),i=n(13),a=n(27),r=n(16),s=n(77);function l(){}o.GObject.inherit(l,a),l.ID="file.quit",l.TITLE=new o.GLocaleKey("GQuitAction","title"),l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){return l.TITLE},l.prototype.getCategory=function(){return r.CATEGORY_FILE},l.prototype.getGroup=function(){return"file-quit"},l.prototype.isEnabled=function(){return gContainer.getRuntime()!==s.Runtime.Browser&&gContainer.getRuntime()!==s.Runtime.PWA},l.prototype.getShortcut=function(){return[i.GKey.Constant.META,"Q"]},l.prototype.isAvailable=function(){return gContainer.getRuntime()!==s.Runtime.Browser&&gContainer.getRuntime()!==s.Runtime.PWA},l.prototype.execute=function(){gContainer.triggerClose()},l.prototype.toString=function(){return"[Object GQuitAction]"},e.exports=l},function(e,t,n){"use strict";n(3);var o=n(1);const i=n(27),a=n(16),r=n(239);function s(){}o.GObject.inherit(s,i),s.ID="example-files",s.TITLE=new o.GLocaleKey("GExampleFilesAction","title"),s.prototype.getId=function(){return s.ID},s.prototype.getTitle=function(){return s.TITLE},s.prototype.getCategory=function(){return a.CATEGORY_HELP_LEARN},s.prototype.getGroup=function(){return"help/learn"},s.prototype.execute=function(){const e={closable:!0,showCloudOptions:!0,openFromCloud:!0,nativeCloud:!0,showExampleFiles:!0},t=()=>gDesigner.openNewDocumentDialog(e);gDesigner.isOffline()?r.openUnavailableFeature(t):t()},s.prototype.toString=function(){return"[GObject GExampleFilesAction]"},e.exports=s},function(e,t,n){"use strict";n(3);var o=n(1),i=n(61),a=n(16),r=n(27);const{TOUCH_LAYOUT:s}=n(9),l=n(77);function c(){c.TOOLTIP_CONFIG={[i.TOOLTIP_AREA.MAIN_MENU.TRY_PRO_COMMON]:i.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GToggleTouchAction","text.try-this-feature-pro-tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GToggleTouchAction","text.try-this-feature-pro-tooltip-description")),learnMore:"https://documentation.corelvector.com/touch-interface/",upgradeToProStatsValue:"view.toggle-touch",middle:!1,side:!0})}}o.GObject.inherit(c,r),c.ID="view.toggle-touch",c.TITLE=new o.GLocaleKey("GToggleTouchAction","title"),c.TITLE_DISABLE=new o.GLocaleKey("GToggleTouchAction","title-disable"),c.TOOLTIP_CONFIG=null,c.prototype.getId=function(){return c.ID},c.prototype.getTitle=function(){return gDesigner.isTouchEnabled()?c.TITLE_DISABLE:c.TITLE},c.prototype.getGroup=function(){return"touch"},c.prototype.getCategory=function(){return a.CATEGORY_VIEW},c.prototype.isCheckable=function(){return!0},c.prototype.getIcon=function(){return gDesigner.isTouchEnabled()?"gravit-icon-touch-disable":null},c.prototype.execute=function(){gDesigner.setTouchEnabled(!gDesigner.isTouchEnabled())},c.prototype.getTooltipArea=function(){return i.TOOLTIP_AREA.MAIN_MENU.TRY_PRO_COMMON},c.prototype.getTooltipConfig=function(e){return e&&c.TOOLTIP_CONFIG[e]||null},c.prototype.isAvailable=function(){return!!s&&!gDesigner.getLicense().isGuest()&&gContainer.getRuntime()!==l.Runtime.IPad},c.prototype.statsValue=function(){return"".concat(c.ID,".").concat(gDesigner.isTouchEnabled()?"on":"off")},c.prototype.toString=function(){return"[Object GToggleTouchAction]"},e.exports=c},function(e,t,n){"use strict";n(3);var o=n(1);const i=n(16),a=n(27);function r(){}o.GObject.inherit(r,a),r.ID="account.open",r.TITLE=new o.GLocaleKey("GOpenAccountSettingsAction","title"),r.prototype.getId=function(){return r.ID},r.prototype.getTitle=function(){return r.TITLE},r.prototype.getCategory=function(){return i.CATEGORY_ACCOUNT},r.prototype.getGroup=function(){return"account"},r.prototype.execute=function(){gDesigner.runDeepLink("account")},r.prototype.isVisible=function(){const e=gDesigner.getSyncUser();return!(e&&!e.canUpdateSelfAccountData())&&gDesigner.isTouchEnabled()},r.prototype.toString=function(){return"[Object GOpenAccountSettingsAction]"},e.exports=r},function(e,t,n){"use strict";n(3);var o=n(1);const i=n(16),a=n(27);function r(){}o.GObject.inherit(r,a),r.ID="account.logout",r.TITLE=new o.GLocaleKey("GLogoutAction","title"),r.prototype.getId=function(){return r.ID},r.prototype.getTitle=function(){return r.TITLE},r.prototype.getCategory=function(){return i.CATEGORY_ACCOUNT},r.prototype.getGroup=function(){return"account"},r.prototype.execute=function(){return gDesigner.signout()},r.prototype.isVisible=function(){return gDesigner.isTouchEnabled()},r.prototype.toString=function(){return"[Object GLogoutAction]"},e.exports=r},function(e,t,n){"use strict";n(7),n(510),n(3);var o=n(1),i=n(27),a=n(16);const{gApi:r}=n(9);var s=n(323);function l(){}o.GObject.inherit(l,i),l.ID="toggle-pro-beta-license",l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){const e=gDesigner.getLicense();return e.isPro()&&!e.isExpired()?"Switch to Basic License":"Switch to PRO License"},l.prototype.getCategory=function(){return a.CATEGORY_HELP},l.prototype.getGroup=function(){return"help"},l.prototype.isEnabled=function(){return gDesigner.isBeta()},l.prototype.isVisible=function(){return gDesigner.isBeta()},l.prototype.execute=async function(){const e=await r.getUserSettings(),t=e.flags&&e.flags.betaProLicense||!1;r.updateUserSettings({flags:{betaProLicense:!t}}).then(()=>{s.checkLicense()})},l.prototype.toString=function(){return"[Object GToggleProBETALicenseAction]"},e.exports=l},function(e,t,n){"use strict";var o=n(14);n(7),n(3);var i=n(1),a=o(n(16)),r=o(n(151)),s=o(n(77)),l=o(n(97));function c(e){this._source=e}i.GObject.inherit(c,l.default),c.getId=function(e){return"file.import-image-from-ios-".concat(e)},c.Source={FILES:"files",PHOTOS:"photos"},c.prototype._source=null,c.prototype.getId=function(){return c.getId(this._source)},c.prototype.getTitle=function(){return new i.GLocaleKey("GImportImageFromIOSAction","text.ios-".concat(this._source))},c.prototype.getCategory=function(){return a.default.CATEGORY_FILE_IMPORT_IMAGE},c.prototype.getGroup=function(){return"import/image-type/".concat(this._source)},c.prototype.isAvailable=function(){return gContainer.getRuntime()===s.default.Runtime.IPad},c.prototype.isEnabled=function(e){if(!l.default.prototype.isEnabled.call(this))return!1;const t=gDesigner.getActiveDocument();return!!t&&(!!(e=e||t.getStorage()||gDesigner.getDefaultStorage())&&e.canPromptOpen()&&gDesigner.getApplicationManager().isImportResourcesEnabled())},c.prototype.execute=async function(e,t){const n=gDesigner.getActiveDocument();if(!n)return!1;e=e||n.getStorage()||gDesigner.getDefaultStorage();const o=r.default.FileTypes.filter(e=>e.import_image);try{let i;i=this._source===c.Source.FILES?await e.openFromFiles(o):await e.openFromPhotos(o),n.placeOrImport(i),t&&t()}catch(e){console.warn("GImportImageFromIOSAction.prototype.execute",e)}},c.prototype.toString=function(){return"[Object GImportImageFromIOSAction]"},e.exports=c},function(e,t,n){"use strict";n(3);var o=n(1);const i=n(16),a=n(27),r=n(1614),{IS_TRUNK:s,IS_LOCALHOST:l}=n(217);function c(){}o.GObject.inherit(c,a),c.ID="help.translationtool",c.TITLE=new o.GLocaleKey("GTranslationToolAction","title"),c.prototype._translationTool=null,c.prototype.getId=function(){return c.ID},c.prototype.getTitle=function(){return o.GLocale.get(c.TITLE)+" [DEVELOPMENT]"},c.prototype.getCategory=function(){return i.CATEGORY_HELP},c.prototype.getGroup=function(){return"help"},c.prototype.isEnabled=function(){return!0},c.prototype.isVisible=function(){return!(!s&&!l)},c.prototype.execute=function(){this._translationTool||(this._translationTool=new r),this._translationTool.init()},c.prototype.toString=function(){return"[Object GTranslationToolAction]"},e.exports=c},function(e,t,n){"use strict";var o=n(14);n(52),n(17),n(51),n(7),n(62),n(84),n(22),n(117),n(106);var i=n(1),a=o(n(1319)),r=o(n(37)),s=n(34);function l(){}i.GObject.inherit(l,i.GObject),l.prototype._translationManager=null,l.prototype._hasUnappliedChanges=null,l.prototype._shouldDownloadMetaData=!1,l.prototype._currentLanguage=null,l.prototype._dialog=null,l.prototype.init=function(){this._translationManager=gDesigner.getTranslationManager(),this._dialog=$("<div></div>").gDialog({releaseOnClose:!0,className:"g-translation-tool-dialog"}),$("<div></div>").addClass("g-btn-close").append($("<span></span>").addClass("gravit-icon-close")).on("click",this.close.bind(this)).appendTo(this._dialog),this._container=$("<div></div>").addClass("container").appendTo(this._dialog),this._panel=$("<div></div>").addClass("panel").appendTo(this._container),this._header=$("<div></div>").addClass("header").append($("<span/>").addClass("spin").addClass("loading-element").load("assets/icon/gravit-icon-rotate-right-flat.svg")).append($("<span></span>").text("Choose project")).append($("<select></select>").addClass("project-chooser").append(this._translationManager.getProjectsDescription().map(e=>$("<option></option>").text(e).attr("value",e))).on("change",e=>{this._translationManager.getProjectsDescription().includes(e.target.value)&&this._handleProjectChange(e.target.value)})).append($("<span></span>").text("Choose language")).append($("<select></select>").addClass("language-chooser").on("change",e=>{this._handleLanguageChange(e.target.value,e)})).append($("<span></span>").text("Available")).append($("<input></input>").attr("type","checkbox").addClass("check-available").on("change",e=>this._toggleCurrentLanguageAvailability(e.target.checked))).append($("<span></span>").text("Filter by temporary translations")).append($("<input></input>").attr("type","checkbox").addClass("check-temporary").on("change",e=>{const t=$(e.target).closest("input").is(":checked");this._body.find(".translations-container").toggleClass("filter-by-temporary",!!t)})).append($("<span></span>").addClass("only-export-empty-strings").text("Only export empty strings?")).append($("<input></input>").attr("type","checkbox").on("change",e=>this._onlyExportEmptyStrings=e.target.checked)).append($("<button></button>").addClass("button").text("Export CSV").click(this._exportAsCSV.bind(this))).append($("<button></button>").addClass("button").text("Import CSV").click(this._handleCSVImport.bind(this))).append($("<button></button>").addClass("button").text("New language").click(this._handleNewLanguage.bind(this))).appendTo(this._panel),$("<hr></hr>").appendTo(this._panel),this._body=$("<div></div>").addClass("body").appendTo(this._panel),this._footer=$("<div></div>").addClass("footer").append($("<button></button>").addClass("button").text("Apply").on("click",this._applyChanges.bind(this))).append($("<button></button>").addClass("button").text("Download").on("click",this._downloadMetaData.bind(this))).appendTo(this._panel),this._handleProjectChange(i.GTranslation.Projects.Designer),this.open()},l.prototype.open=function(){this._dialog.gDialog("open",!1)},l.prototype._handleProjectChange=function(e){this._translationManager.loadProjectTranslations(e),this._updateUIComponents(),this._handleLanguageChange(i.GLocaleLanguage.Default,!0)},l.prototype._applyChanges=function(){this._translationManager.applyTranslationPatch([this._translation]).then(()=>{this._hasUnappliedChanges=!1,this._shouldDownloadMetaData=!0})},l.prototype._toggleCurrentLanguageAvailability=function(e){this._translation.isAvailable=e,this._hasUnappliedChanges=!0},l.prototype._handleLanguageChange=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t&&parseInt(this._currentLanguage)===parseInt(e))return;const n=()=>{this._setLoadingStatus(!0),this._currentLanguage=parseInt(e),this._hasUnappliedChanges=!1;let t=this._translationManager.isConsideringExtension();this._header.find(".language-chooser").val(this._currentLanguage),this._body.find(".translations-container").remove();var n=$("<div></div>").addClass("translations-container").toggleClass("filter-by-temporary",this._header.find(".check-temporary").is(":checked"));this._translation=this._translationManager.getTranslationCopy(this._currentLanguage),this._header.find(".check-available").prop("checked",this._translation.isAvailable),n.append(Object.keys(this._translation.translations).map(e=>{let n=$("<div></div>").addClass("path");return n.append($("<span></span>").addClass("description").text(e)),n.append(Object.keys(this._translation.translations[e]).map(o=>{let i=$("<div></div>").addClass("row"),a=this._translation.translations[e][o];const r=this._translation.translationsTemporary&&this._translation.translationsTemporary[e]&&this._translation.translationsTemporary[e][o];let s=!(!r||a&&a.trim());if(a=s?r:a,$("<input></input>").addClass("key").attr("disabled",!0).attr("placeholder","Key").val(o).attr("data-title",a).appendTo(i),s&&i.append($("<span/>").addClass("gravit-icon-google-translate").attr("data-title","This is a temporary translation provided by Google Translator")),$("<input></input>").addClass("value").data({language:this._currentLanguage,path:e,key:o,originalValue:this._translation.translations[e][o]}).on("change",t=>{this._translation.translations[e][o]=t.target.value,this._hasUnappliedChanges=!0}).attr("placeholder","Translation").val(a).appendTo(i),t){var l=this._translation.translationsExtended&&this._translation.translationsExtended[e]&&this._translation.translationsExtended[e][o];const t=this._translation.translationsExtendedTemporary&&this._translation.translationsExtendedTemporary[e]&&this._translation.translationsExtendedTemporary[e][o];l=t||l,s=s||!!t,t&&i.append($("<span/>").addClass("gravit-icon-google-translate").attr("data-title","This is a temporary translation provided by Google Translator")),$("<input></input>").addClass("value").data({language:this._currentLanguage,path:e,key:o,extension:!0,originalValue:l}).on("change",t=>{t.target.value.trim()?(this._translation.translationsExtended||(this._translation.translationsExtended={}),this._translation.translationsExtended[e]||(this._translation.translationsExtended[e]={}),this._translation.translationsExtended[e][o]=t.target.value):delete this._translation.translationsExtended[e][o],this._hasUnappliedChanges=!0}).attr("placeholder","Extension").val(l||"").appendTo(i)}return s&&(i.addClass("temporary"),n.addClass("temporary")),i})),n})),n.appendTo(this._body),this._setLoadingStatus(!1)};this._hasUnappliedChanges?r.default.confirm("You have modified strings, you'll lose them if you don't apply them first, are you sure?",e=>{e?n():this._header.find(".language-chooser").val(this._currentLanguage)}):n()},l.prototype.close=function(){this._hasUnappliedChanges||this._shouldDownloadMetaData?this._shouldDownloadMetaData?r.default.confirm("You haven't downloaded the translations after applying changes, are you sure about closing?",e=>{e&&this._close()}):r.default.confirm("You have modified strings, are you sure about closing?",e=>{e&&this._close()}):this._close()},l.prototype._close=function(){this._hasUnappliedChanges=!1,this._currentLanguage=null,this._shouldDownloadMetaData=!1,this._dialog.gDialog("close",!1,0)},l.prototype._downloadMetaData=async function(){var e=async()=>{this._manageDownload("translations_".concat(this._translationManager.getActiveProject(),".json").toLowerCase(),await this._translationManager.getMetaData()),this._shouldDownloadMetaData=!1};this._hasUnappliedChanges?r.default.confirm("You have modified strings, do you want to download before applying your changes?",t=>{t&&e()}):e()},l.prototype._exportAsCSV=async function(){var e=Object.keys(i.GLocaleLanguage)[Object.values(i.GLocaleLanguage).indexOf(this._currentLanguage)];this._manageDownload("translations_".concat(this._translationManager.getActiveProject(),"_").concat(e,".csv").toLocaleLowerCase(),await this._translationManager.export(a.default.FormatTypes.CSV,this._currentLanguage,this._onlyExportEmptyStrings))},l.prototype._handleCSVImport=async function(){try{this._setLoadingStatus(!0),gDesigner.getDefaultStorage().openPrompt([{ext:"csv",mime:"text/csv"}],e=>{e&&e.read(e=>{var t=(0,s.decodeFromUTF8)(e);this._translationManager.import(t).then(()=>this._handleLanguageChange(this._currentLanguage,!0)).catch(e=>this._handleError(e))})},!1)}catch(e){this._handleError(e)}finally{this._setLoadingStatus(!1)}},l.prototype._manageDownload=function(e,t){var n=document.createElement("a");n.setAttribute("href",URL.createObjectURL(new Blob([t],{type:"text/plain"}))),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},l.prototype._handleError=function(e){"string"!=typeof e||r.default.alert(e)},l.prototype._setLoadingStatus=function(e){var t=this._header.find(".loading-element");e?t.addClass("visible"):t.removeClass("visible")},l.prototype._handleNewLanguage=function(){r.default.prompt("Please name the new language (English)!",e=>{e?r.default.prompt("Please inform the real name of the language!",t=>{r.default.prompt("Please inform the ISO Language Code!",n=>{this._translationManager.createNewLanguage(e,t,n).then(e=>{this._shouldDownloadMetaData=!0,this._updateUIComponents(),this._handleLanguageChange(e.keyValue)}).catch(e=>this._handleError(e))})}):r.default.alert("Invalid value ('".concat(e,"') for language!"))})},l.prototype._updateUIComponents=function(){this._header.find(".project-chooser").val(this._translationManager.getActiveProject());var e=this._header.find(".language-chooser");e.find("option").remove(),e.append(Object.keys(i.GLocaleLanguage).filter(e=>"Default"!==e).filter(e=>!!this._translationManager.getTranslationByKey(i.GLocaleLanguage[e])).map(e=>$("<option></option>").text(e).attr("value",i.GLocaleLanguage[e])))},e.exports=l},function(e,t,n){"use strict";n(3);var o=n(1);const i=n(16),a=n(27);var r=n(205),s=n(77);const{IS_TRUNK:l,IS_LOCALHOST:c,IS_BETA:d}=n(217);function u(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._serverName=e,this._isDefault=!!t}o.GObject.inherit(u,a),u.ID="help.switchwebcdr",u.TITLE=new o.GLocaleKey("GSwitchWebcdrAction","title"),u.prototype.getId=function(){return u.ID+"."+this._serverName},u.prototype.isCheckable=function(){return!0},u.prototype.isChecked=function(){let e=gDesigner.getSetting("webcdr_choice");return!!e&&e===this._serverName||!e&&this._isDefault},u.prototype.getTitle=function(){return this._serverName},u.prototype.getCategory=function(){return i.CATEGORY_HELP_SWITCHWEBCDR},u.prototype.getGroup=function(){return"help/switchwebcdr"},u.prototype.isEnabled=function(){return!0},u.prototype.isVisible=function(){return!!(l||d||c)},u.prototype.execute=function(){gDesigner.setSetting("webcdr_choice",this._serverName),this._reloadApp()},u.prototype._reloadApp=function(){gContainer.getRuntime()===s.Runtime.Browser||gContainer.getRuntime()===s.Runtime.PWA?location.reload():new r(o.GLocale.get(new o.GLocaleKey("GNewDocumentDialog","text.restart-app"))).open()},u.prototype.toString=function(){return"[Object GSwitchWebcdrAction]"},e.exports=u},function(e,t,n){"use strict";var o=n(14);n(28);var i=n(1),a=n(45),r=n(13),s=o(n(27)),l=o(n(16));class c extends s.default{constructor(e){super(),this._type=e,this._title=new i.GLocaleKey("GTogglePaintLayersVisibilityAction","title.".concat(this._type))}getId(){return"".concat(c.ID,".").concat(this._type)}getTitle(){return this._title}getCategory(){return l.default.CATEGORY_VIEW}getShortcut(){switch(this._type){case c.Type.Fill:return["F"];case c.Type.Border:return[r.GKey.Constant.SHIFT,"B"]}}isVisible(){return!1}isEnabled(){return!document.activeElement||!$(document.activeElement).is(":input")}_getSingleLevelSelection(e){let t=[];return e.forEach(e=>{if(e){const n=e.getChildren();e instanceof i.GLayer||t.push(e),Array.isArray(n)&&n.length>0&&(t=t.concat(this._getSingleLevelSelection(n)))}}),t}_getPaintLayers(e){const t=e&&e.hasMixin(i.GStylable)&&e.getPaintLayers();if(!t)return null;switch(this._type){case c.Type.Fill:return t.getFillLayers();case c.Type.Border:return t.getBorderLayers();default:return null}}_checkPaintLayersVisibility(e){let t=!1,n=!1;for(let o=0;e.length>o&&(!t||!n);o++){const i=e[o],a=this._getPaintLayers(i);if(Array.isArray(a))for(let e=0;a.length>e&&(!t||!n);e++){a[e].getProperty("_vs")?n=!0:t=!0}}return{hasHiddenPaintLayers:t,hasVisiblePaintLayers:n}}_setVisibilityPaintLayersState(e,t){const n=gDesigner.getActiveDocument(),o=n&&n.getScene();o&&a.GEditor.tryRunTransaction(o,()=>{e.forEach(e=>{e.beginUpdate();const n=this._getPaintLayers(e);Array.isArray(n)&&n.forEach(e=>{e.setProperty("_vs",t)}),e.endUpdate()})},i.GLocale.get(c.TITLE))}execute(){const e=gDesigner.getActiveDocument(),t=e&&e.getScene(),n=e&&e.getEditor(),o=n&&n.getSelection();if(t){t.beginUpdate();try{if(Array.isArray(o)&&o.length>0){const e=this._getSingleLevelSelection(o),{hasHiddenPaintLayers:t,hasVisiblePaintLayers:n}=this._checkPaintLayersVisibility(e);if(!t&&!n)return;t&&n?this._setVisibilityPaintLayersState(e,!1):this._setVisibilityPaintLayersState(e,t)}}finally{t.endUpdate()}}}toString(){return"[Object GTogglePaintLayersVisibilityAction]"}}c.ID="view.toggle-paint-layers-visibility",c.Type={Fill:"fill",Border:"border"},e.exports=c},function(e,t,n){"use strict";n(3);const{GObject:o,GLocaleKey:i}=n(1),a=n(27),r=n(16),s=n(1618);function l(){}o.inherit(l,a),l.ID="help.shortcuts",l.TITLE=new i("GShowShortcutsAction","title"),l.prototype.getId=function(){return l.ID},l.prototype.getTitle=function(){return l.TITLE},l.prototype.getCategory=function(){return r.CATEGORY_HELP_LEARN},l.prototype.getGroup=function(){return"help/learn"},l.prototype.execute=function(){(new s).open()},l.prototype.toString=function(){return"[Object GShowShortcutsAction]"},e.exports=l},function(e,t,n){"use strict";n(28);var o=n(1),i=n(13);e.exports=class{constructor(){this._dialog=this._createDialog(),this._dialog.append(this._createCloseButton(),this._getTitle(),this._getContent())}open(){this._dialog.gDialog("open",!0)}close(){this._dialog.gDialog("close")}_getTitle(){const e=o.GLocale.getValue("GShortcutsDialog","text.title");return $("<div />").addClass("title").text(e)}_getContent(){const e=$("<table/>"),t=$("<tbody/>").appendTo(e);return gDesigner.getActions().forEach(e=>{if(!e.isAvailable())return;const n=e.getShortcutHint({isWordMode:!0});if(n){const i=o.GLocale.get(e.getFullTitle());this._createTableRow(i,n).appendTo(t)}}),gravit.tools.forEach(e=>{if(e.key){const n=i.GKey.shortcutToString(e.key);if(!n)return;const a=o.GLocale.get(e.richTooltipConfig.getConfig().title);this._createTableRow(a,n).appendTo(t)}}),$("<div/>").addClass("wrapper").append(e)}_createDialog(){return $("<div/>").gDialog({releaseOnClose:!0,className:"g-shortcuts-dialog"})}_createCloseButton(){const e=$("<span />").addClass("gravit-icon-close");return $("<div />").addClass("g-btn-close").append(e).on("click",this.close.bind(this))}_createTableRow(e,t){const n=$("<tr/>");return $("<td/>").text(e).appendTo(n),$("<td/>").text(t).appendTo(n),n}}},function(e,t,n){"use strict";var o=n(14),i=n(13),a=n(1),r=o(n(16)),s=n(185);const l=n(27);class c extends l{constructor(e){super(),this._type=e,this._title=new a.GLocaleKey("GEyeDropperAction","title.".concat(e)),this.pageX=0,this.pageY=0}getId(){return"".concat(c.ID,".").concat(this._type)}getTitle(){return this._title}getCategory(){return r.default.CATEGORY_EDIT}getShortcut(){switch(this._type){case c.Type.Fill:return[i.GKey.Constant.META,i.GKey.Constant.OPTION,"C"];case c.Type.Border:return[i.GKey.Constant.SHIFT,i.GKey.Constant.META,i.GKey.Constant.OPTION,"C"];default:return null}}getAdditionalShortcuts(){switch(this._type){case c.Type.Fill:return[["I"]];default:return null}}isVisible(){return!1}execute(){const e=gDesigner.getActiveDocument(),t=e&&e.getEditor(),n=t&&t.getSelection(),o=gDesigner.getRightSidebars().getSidebar(s.SidebarsIds.GInspectorSidebar),i=n&&n.filter(e=>e&&e.hasMixin(a.GStylable));if(!(i&&i.length>0))return;const{pageX:r,pageY:l}=this._getLastCursorPoint();switch(this._type){case c.Type.Fill:i.find(e=>e.hasStyleFill()&&!(e instanceof a.GText))?o.openFillEyeDropper(r,l):i.find(e=>e instanceof a.GText)?o.openTextColorEyeDropper(r,l):i.find(e=>!e.hasStyleBorder())||o.openBorderEyeDropper(r,l);break;case c.Type.Border:i.find(e=>!e.hasStyleBorder())||o.openBorderEyeDropper(r,l)}}_getLastCursorPoint(){const e=gDesigner.getCursorManager().getLastCursorPoint();return{pageX:e&&e.getX()||0,pageY:e&&e.getY()||0}}toString(){return"[Object GEyeDropperAction]"}}c.ID="edit.eyedropper",c.Type={Border:"border",Fill:"fill",Text:"text"},e.exports=c},function(e,t,n){"use strict";var o=n(14),i=n(1),a=n(13),r=n(45),s=o(n(16)),l=o(n(27));class c extends l.default{constructor(){super(),this._lastIsCheckedValue=!0}getId(){return c.ID}getTitle(){return c.TITLE}getCategory(){return s.default.CATEGORY_VIEW_CANVAS}isCheckable(){return!0}isEnabled(){return!!this._getSelection()}isChecked(){const e=this._getSelection();if(!e)return this._lastIsCheckedValue;const t=!!e.find(e=>!r.GElementEditor.getEditor(e).hasFlag(r.GBaseEditor.Flag.HideEditor));return this._lastIsCheckedValue=t,t}getShortcut(){return[a.GKey.Constant.SHIFT,a.GKey.Constant.META,"X"]}execute(){const e=this._getEditor();if(e){this.isChecked()?e.hideSelection():e.resetHideSelection()}}_getEditor(){const e=gDesigner.getActiveDocument();return e&&e.getEditor()}_getSelection(){const e=this._getEditor(),t=e&&e.getSelection();return t&&t.length>0?t:null}toString(){return"[Object GShowSelectionHandlesAction]"}}c.ID="view.canvas.show-selection-handles",c.TITLE=new i.GLocaleKey("GShowSelectionHandlesAction","title"),e.exports=c},function(e,t,n){"use strict";var o=n(14);n(18),n(29),n(28);var i=n(1),a=n(45),r=n(13),s=o(n(27)),l=o(n(16));class c extends s.default{constructor(){super(),this._opacityLevel=null,this._timeoutId=null,this._currentValue=""}getId(){return c.ID}getTitle(){return c.TITLE}getFullTitle(){return i.GLocale.getValue("GChangeOpacityAction","full-title").replace("%value","100% (10%, 20%, 25%, 26%, 30%, 40%, ... 90%)")}getCategory(){return l.default.CATEGORY_EDIT}isVisible(){return!1}getAdditionalShortcuts(){return[r.GKey.Constant.Digit0,r.GKey.Constant.Digit1,r.GKey.Constant.Digit2,r.GKey.Constant.Digit3,r.GKey.Constant.Digit4,r.GKey.Constant.Digit5,r.GKey.Constant.Digit6,r.GKey.Constant.Digit7,r.GKey.Constant.Digit8,r.GKey.Constant.Digit9].map(e=>[r.GKey.Constant.SHIFT,e])}execute(){const e=gDesigner.getActiveDocument(),t=e&&e.getEditor(),n=e&&e.getScene(),o=t&&t.getSelection();n&&o&&(a.GEditor.tryRunTransaction(n,()=>{o.forEach(e=>{e.hasMixin(i.GStylable)&&e.setProperty("_stop",this._opacityLevel)})},i.GLocale.get(c.TITLE)),this._setOpacityLevel())}executeFromShortcut(e){const t=r.GKey.translateCode(e.code),n=this._currentValue;this._setCurrentValue(t),n?this._processDefinedCurrentValue():this._timeoutId=setTimeout(()=>{this._processDefinedCurrentValue()},s.default.SHORTCUT_DELAY)}isKeyBoardEventRequiredToExecute(){return!0}getShortcutHint(e){const t=[r.GKey.Constant.SHIFT,"0 (1, 2, 25, 26, 3, 4, ... 9)"];return s.default.getActionShortcutHint(t,e)}_processDefinedCurrentValue(){this._clearTimeout(),this._currentValue.length>1&&"0"===this._currentValue[0]&&(this._currentValue=this._currentValue.replace("0","."));const e=i.GUtil.parseNumber(this._currentValue);if("number"==typeof e&&!isNaN(e)){const t=this._getOpacityLevel(e);this._setOpacityLevel(t),this.execute.apply(this)}this._setCurrentValue()}_getOpacityLevel(e){return 0===e?1:e<10?e/10:e<100?e/100:1}_setCurrentValue(e){e?this._currentValue+=e:this._currentValue=""}_setOpacityLevel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._opacityLevel=e}_clearTimeout(){this._timeoutId&&clearTimeout(this._timeoutId)}toString(){return"[Object GChangeOpacityAction]"}}c.ID="edit.change-opacity",c.TITLE=new i.GLocaleKey("GChangeOpacityAction","title"),e.exports=c},function(e,t,n){"use strict";var o=n(14),i=n(1),a=n(13),r=o(n(16)),s=o(n(1145)),l=n(185),c=o(n(1321));class d extends s.default{constructor(e){super(e),this._title=new i.GLocaleKey("GChangeAnchorPointsJointTypeSubAction","title.".concat(this._type))}_getMainActionId(){return c.default.ID}getCategory(){return r.default.CATEGORY_MODIFY}getShortcutSubKey(){switch(this._type){case d.Type.Straight:return a.GKey.Constant.S;case d.Type.Mirrored:return a.GKey.Constant.M;case d.Type.Disconnected:return a.GKey.Constant.D;case d.Type.Connector:return a.GKey.Constant.C;case d.Type.Asymmetric:return a.GKey.Constant.A;default:return null}}execute(){const e=gDesigner.getRightSidebars().getSidebar(l.SidebarsIds.GInspectorSidebar),t=this._getNodeType();t&&e.setPathPointsNodeType(t)}_getNodeType(){switch(this._type){case d.Type.Straight:return"-";case d.Type.Mirrored:return i.GPathBase.AnchorPoint.Type.Mirror;case d.Type.Disconnected:return i.GPathBase.AnchorPoint.Type.Asymmetric;case d.Type.Connector:return i.GPathBase.AnchorPoint.Type.Connector;case d.Type.Asymmetric:return i.GPathBase.AnchorPoint.Type.Symmetric;default:return null}}toString(){return"[Object GChangeAnchorPointsJointTypeSubAction]"}}d.Type={Straight:"straight",Mirrored:"mirrored",Disconnected:"disconnected",Connector:"connector",Asymmetric:"asymmetric"},e.exports=d},function(e,t,n){"use strict";var o=n(14),i=n(1),a=n(13),r=o(n(27)),s=o(n(16));class l extends r.default{getId(){return l.ID}getTitle(){return l.TITLE}getCategory(){return s.default.CATEGORY_FILE}isVisible(){return!1}getShortcut(){return[a.GKey.Constant.OPTION,a.GKey.Constant.Q]}isEnabled(){const e=gDesigner.getActiveDocument(),t=e&&e.getActiveWindow(),n=gDesigner.getWindows();return!(!t||!n)}execute(){const e=gDesigner.getActiveDocument(),t=e&&e.getActiveWindow();gDesigner.getWindows().removeWindow(t)}toString(){return"[Object GCloseActiveWindowAction]"}}l.ID="file.close-active-window",l.TITLE=new i.GLocaleKey("GCloseActiveWindowAction","title"),e.exports=l},function(e,t,n){"use strict";var o=n(14),i=n(1),a=n(13),r=o(n(27)),s=o(n(16)),l=n(185);class c extends r.default{getId(){return c.ID}getTitle(){return c.TITLE}getCategory(){return s.default.CATEGORY_VIEW}getShortcut(){return[a.GKey.Constant.F6]}isVisible(){return!1}execute(){const e=gDesigner.getLeftSidebars(),t=e&&e.getSidebar(l.SidebarsIds.GOutlineSidebar);t&&t.toggleMultiPageMode()}toString(){return"[Object GToggleMultiPageModeAction]"}}c.ID="view.toggle-multi-page-mode",c.TITLE=new i.GLocaleKey("GToggleMultiPageModeAction","title"),e.exports=c},function(e,t,n){"use strict";var o=n(14),i=n(1),a=n(13),r=o(n(27)),s=o(n(16));class l extends r.default{constructor(e){super(),this._type=e,this._title=new i.GLocaleKey("GChangeActiveWindowAction","title.".concat(this._type))}getId(){return"".concat(l.ID,".").concat(this._type)}getTitle(){return this._title}getCategory(){return s.default.CATEGORY_VIEW}isVisible(){return!1}getShortcut(){const e=[a.GKey.Constant.OPTION];switch(this._type){case l.Type.Next:return e.concat(a.GKey.Constant.PERIOD);case l.Type.Previous:return e.concat(a.GKey.Constant.COMMA);default:return null}}isEnabled(){const e=gDesigner.getWindows(),t=e&&e.getWindows();return t&&t.length>1}execute(){if(this.isEnabled()){const e=gDesigner.getWindows(),t=this._getNextWindowAccordingToType(e);e.activateWindow(t)}}_getNextWindowAccordingToType(e){const t=e.getWindows(),n=e&&e.getActiveWindow(),o=t.findIndex(e=>e===n);switch(this._type){case l.Type.Next:return o===t.length-1?t[0]:t[o+1];case l.Type.Previous:return 0===o?t[t.length-1]:t[o-1];default:return null}}toString(){return"[Object GChangeActiveWindowAction]"}}l.ID="view.change-active-window",l.Type={Next:"next",Previous:"previous"},e.exports=l},function(e,t,n){"use strict";var o=n(14);n(17),n(28),n(22);var i=n(1),a=n(13),r=o(n(27)),s=o(n(16));class l extends r.default{getId(){return l.ID}getTitle(){return l.TITLE}getCategory(){return s.default.CATEGORY_MODIFY}isVisible(){return!1}getShortcut(){return[a.GKey.Constant.X]}isEnabled(){const e=gDesigner.getActiveDocument(),t=e&&e.getEditor(),n=t&&t.getSelection();return!!(n&&n.find(e=>e.hasMixin(i.GStylable)))}execute(){const e=gDesigner.getActiveDocument(),t=e&&e.getEditor(),n=t&&t.getSelection();if(n){t.beginTransaction();try{n.forEach(e=>{if(e.hasMixin(i.GStylable)){const t=e.getPaintLayers();if(t){const n=this._createPaintLayers(l.Type.Border,t),o=this._createPaintLayers(l.Type.Fill,t);n.forEach(t=>{this._setBorderAlignment(e,t)}),t.clearLayers(),n.concat(o).forEach(e=>{t.appendChild(e)})}}})}finally{t.commitTransaction(i.GLocale.get(this.getTitle()))}}}_createPaintLayers(e,t){const n=["_pt","_op","_vs","_bl"];switch(e){case l.Type.Fill:return t.getBorderLayers().map(e=>{const t=e.getProperties(n);return new i.GStylable.FillPaintLayer(...t)});case l.Type.Border:return t.getFillLayers().map(e=>{const t=e.getProperties(n);return new i.GStylable.BorderPaintLayer(...t)});default:throw Error("Not specified type given")}}_setBorderAlignment(e,t){e instanceof i.GText?t.setProperty("_ba",i.GStylable.BorderAlignment.Outside):e instanceof i.GShape?e instanceof i.GEllipse&&e.$etp===i.GEllipse.Type.Arc?t.setProperty("_ba",i.GStylable.BorderAlignment.Center):t.setProperty("_ba",i.GStylable.BorderAlignment.Inside):e instanceof i.GPath&&!e.$closed&&t.setProperty("_ba",i.GStylable.BorderAlignment.Center)}toString(){return"[Object GSwapPaintLayersAction]"}}l.ID="modify.swap-paint-layers",l.TITLE=new i.GLocaleKey("GSwapPaintLayersAction","title"),l.Type={Fill:"fill",Border:"border"},e.exports=l},function(e,t,n){"use strict";var o=n(14),i=n(1),a=n(13),r=o(n(27)),s=o(n(16)),l=n(185),c=o(n(1147));class d extends r.default{getId(){return d.ID}getTitle(){return d.TITLE}getCategory(){return s.default.CATEGORY_MODIFY}isVisible(){return!1}getShortcut(){return[a.GKey.Constant.META,a.GKey.Constant.M]}isEnabled(){return gDesigner.getApplicationManager().isEditingEnabled()}execute(){this._showOutlineSidebar();const e=gDesigner.getLeftSidebars();(e&&e.getSidebar(l.SidebarsIds.GOutlineSidebar)).insertLayer()}_showOutlineSidebar(){const e=gDesigner.getAction("".concat(c.default.ID,".").concat(l.SidebarsIds.GOutlineSidebar));e.isChecked()||e.execute()}toString(){return"[Object GCreateNewLayerAction]"}}d.ID="modify.create-new-layer",d.TITLE=new i.GLocaleKey("GCreateNewLayerAction","title"),e.exports=d},function(e,t,n){"use strict";n(3);var o=n(1),i=n(115);const a=n(125);function r(){this._items=[]}o.GObject.inherit(r,i),r.prototype._panel=null,r.prototype._document=null,r.prototype._items=null,r.prototype.init=function(e){this._panel=e,this._panel.addClass("frame-property-panel"),$("<div></div>").attr("major-item-only",!0).addClass("item-frame").gPropertyRow({columns:[{width:"auto",content:$("<label></label>").addClass("g-checkbox-label").append($("<input>").addClass("frm-checkbox").attr("type","checkbox").attr("data-item-property","frm").on("change",function(e){var t=$(e.target).is(":checked");gDesigner.stats("frameproperties_toggle_frame",t?"enable":"disable"),this._assignProperty("frm",t,t?o.GLocale.get(new o.GLocaleKey("GFrameProperties","text.switch-frame")):o.GLocale.get(new o.GLocaleKey("GFrameProperties","text.frame-off")))}.bind(this))).append($("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GFrameProperties","text.frame"))))}]}).appendTo(this._panel)},r.prototype.update=function(e,t){if(this._updateUI(),this._document&&(gDesigner.removeEventListener(a,this._settingChanged,this),this._document.getScene().removeEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange),this._document=null),this._items=[],e){gDesigner.addEventListener(a,this._settingChanged,this);for(var n=0;n<t.length;++n){t[n]instanceof o.GLayer&&this._items.push(t[n])}if(this._items.length&&this._items.length===t.length)return this._document=e,this._document.getScene().addEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._updateProperties(),!0}return!1},r.prototype._updateUI=function(){gDesigner.isTouchEnabled()?this._panel.find(".frm-checkbox").gCheckboxSlider():this._panel.find(".frm-checkbox").gCheckboxSlider("unmount")},r.prototype._settingChanged=function(e){"touch"===e.key&&this._updateUI()},r.prototype._afterPropertiesChange=function(e){!e.temporary&&this._items.length>0&&this._items[0]===e.node&&this._updateProperties()},r.prototype._updateProperties=function(){var e=this._items[0];this._panel.find("[major-item-only]").css("display",""),this._panel.find('input[data-item-property="frm"]').prop("disabled",!1).prop("checked",!!e.getProperty("frm"))},r.prototype._assignProperty=function(e,t,n){if("frm"==e){var o=this._document.getEditor();o.beginTransaction();try{for(var i=0;i<this._items.length;++i){var a=this._items[i];a.setFrame&&a.setFrame(t)}}finally{o.commitTransaction(n)}}},r.prototype.toString=function(){return"[Object GFrameProperties]"},e.exports=r},function(e,t,n){"use strict";n(3);var o=n(1),i=n(115);function a(){this._items=[]}o.GObject.inherit(a,i),a.prototype._panel=null,a.prototype._document=null,a.prototype._items=null,a.prototype.init=function(e){this._panel=e,this._panel.addClass("group-frame-property-panel"),$("<div></div>").addClass("group-frame-row").attr("major-item-only",!0).gPropertyRow({columns:[{width:"auto",content:$("<select></select>").attr("data-item-property","frm").on("change",function(e){var t="1"==$(e.target).val();gDesigner.stats("groupframeproperties_toggle_frame",t?"enable":"disable"),this._assignProperty("frm",t,t?o.GLocale.get(new o.GLocaleKey("GGroupFrameProperties","text.switch-frame")):o.GLocale.get(new o.GLocaleKey("GGroupFrameProperties","text.switch-group")))}.bind(this)).append($("<option></option>").attr("value","0").text(o.GLocale.get(new o.GLocaleKey("GGroupFrameProperties","text.group")))).append($("<option></option>").attr("value","1").text(o.GLocale.get(new o.GLocaleKey("GGroupFrameProperties","text.frame"))))}]}).appendTo(this._panel)},a.prototype.update=function(e,t){if(this._document&&(this._document.getScene().removeEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange),this._document=null),this._items=[],e){for(var n=0;n<t.length;++n){t[n]instanceof o.GGroup&&this._items.push(t[n])}if(this._items.length&&this._items.length===t.length)return this._document=e,this._document.getScene().addEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._updateProperties(),!0}return!1},a.prototype._afterPropertiesChange=function(e){!e.temporary&&this._items.length>0&&this._items[0]===e.node&&this._updateProperties()},a.prototype._updateProperties=function(){var e=this._items[0];this._panel.find("[major-item-only]").css("display",""),this._panel.find('[data-item-property="frm"]').prop("disabled",!1).prop("value",e.getProperty("frm")?"1":"0")},a.prototype._assignProperty=function(e,t,n){if("frm"==e){var o=this._document.getEditor();o.beginTransaction();try{for(var i=0;i<this._items.length;++i){var a=this._items[i];a.setFrame&&a.setFrame(t)}}finally{o.commitTransaction(n)}}},a.prototype.toString=function(){return"[Object GGroupFrameProperties]"},e.exports=a},function(e,t,n){"use strict";n(3);var o=n(1),i=n(115);const a=n(125);function r(){this._items=[]}o.GObject.inherit(r,i),r.prototype._panel=null,r.prototype._document=null,r.prototype._items=null,r.prototype.init=function(e){this._panel=e,this._panel.addClass("item-property-panel"),$("<div></div>").attr("major-item-only",!0).gPropertyRow({columns:[{width:"auto",content:$("<label></label>").addClass("g-checkbox-label").append($("<input>").addClass("clk-checkbox").attr("type","checkbox").attr("data-item-property","clk").on("change",function(e){gDesigner.stats("itemproperties_click_through"),this._assignProperty("clk",$(e.target).is(":checked"))}.bind(this))).append($("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GItemProperties","text.click-through"))).addClass("clickElement"))}]}).appendTo(this._panel),$("<div></div>").attr("major-shape-only",!0).gPropertyRow({columns:[{width:"auto",content:$("<label></label>").addClass("g-checkbox-label").append($("<input>").addClass("scc-checkbox").attr("type","checkbox").attr("data-item-property","scc").on("change",function(e){gDesigner.stats("itemproperties_toggle_scale-with-content",$(e.target).is(":checked")?"enable":"disable"),this._assignProperty("scc",$(e.target).is(":checked"))}.bind(this))).append($("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GItemProperties","text.scale-with-content"))))}]}).appendTo(this._panel)},r.prototype.update=function(e,t){if(this._updateUI(),this._document&&(gDesigner.removeEventListener(a,this._settingChanged,this),this._document.getScene().removeEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange),this._document=null),this._items=[],e){gDesigner.addEventListener(a,this._settingChanged,this);for(var n=0;n<t.length;++n)t[n]instanceof o.GItem&&this._items.push(t[n]);if(this._items.length&&this._items.length===t.length&&this._hasChildItem(this._items[0]))return this._document=e,this._document.getScene().addEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),this._updateProperties(),!0}return!1},r.prototype._updateUI=function(){gDesigner.isTouchEnabled()?(this._panel.find(".clk-checkbox").gCheckboxSlider(),this._panel.find(".scc-checkbox").gCheckboxSlider()):(this._panel.find(".clk-checkbox").gCheckboxSlider("unmount"),this._panel.find(".scc-checkbox").gCheckboxSlider("unmount"))},r.prototype._settingChanged=function(e){"touch"===e.key&&this._updateUI()},r.prototype._afterPropertiesChange=function(e){!e.temporary&&this._items.length>0&&this._items[0]===e.node&&this._updateProperties()},r.prototype._updateProperties=function(){var e=this._items[0];this._hasChildItem(e)?(this._panel.find("[major-item-only]").css("display",""),this._panel.find('input[data-item-property="clk"]').prop("disabled",!1).prop("checked",e.getProperty("clk")),e instanceof o.GShape&&!(e instanceof o.GImage&&e.getProperty("dblMode"))?(this._panel.find("[major-shape-only]").css("display",""),this._panel.find("[major-item-only]").addClass("item-click-through"),this._panel.find("[major-shape-only]").addClass("shape-scale-with-content"),this._panel.find('input[data-item-property="scc"]').prop("checked",e.getProperty("scc"))):(this._panel.find("[major-shape-only]").css("display","none"),this._panel.find("[major-item-only]").removeClass("item-click-through"),this._panel.find("[major-shape-only]").removeClass("shape-scale-with-content"))):(this._panel.find("[major-item-only]").css("display","none"),this._panel.find("[major-shape-only]").css("display","none"),this._panel.find("[major-item-only]").removeClass("item-click-through"),this._panel.find("[major-shape-only]").removeClass("shape-scale-with-content"))},r.prototype._assignProperty=function(e,t,n){if("clk"==e||"scc"==e){var i=this._document.getEditor();i.beginTransaction();try{for(var a=0;a<this._items.length;++a){var r=this._items[a];this._hasChildItem(r)&&("clk"==e||r instanceof o.GShape)&&this._items[a].setProperties([e],[t])}}finally{i.commitTransaction(n)}}},r.prototype._hasChildItem=function(e){return!!e.hasMixin(o.GNode.Container)&&!e.acceptChildren((function(e){return!(e instanceof o.GItem)}),!1,!1)},r.prototype.toString=function(){return"[Object GItemProperties]"},e.exports=r},function(e,t,n){"use strict";n(45);var o=n(1),i=(n(13),n(34)),a=(n(61),n(223)),r=(n(1128),n(836),n(162),n(856),n(37)),s=n(1127);function l(){this.initLayout(),this._container.gOverlay({releaseOnClose:!1,padding:!1,clazz:"pattern-chooser-overlay",customRight:-250}),this.initContextMenu()}o.GObject.inheritAndMix(l,s),l.prototype._advancedExpanded=!0,l.prototype._longPressTimer=null,l.prototype._islongPress=!1,l.prototype._contextMenu=null,l.prototype._currentLongPressTarget=null,l.prototype._createChoosers=function(e){return $("<div />").addClass("chooser").append($("<button />").attr("data-palette","colors").append($("<div />").addClass("mini-font").text(o.GLocale.get(new o.GLocaleKey("GCommonNames","text.colors")).toUpperCase())).on("click",e)).append($("<button />").gPro({feature:"swatches"}).attr("data-palette","swatches").append($("<div />").addClass("mini-font").text(o.GLocale.get(new o.GLocaleKey("GPatternChooser","text.swatches")).toUpperCase())).on("click",i.watchDog.trap(e,null,e=>gDesigner.stats("patternchooser_nonprotriespro_palette","swatches"),"swatches"))).append($("<button />").attr("data-palette","used").append($("<div />").addClass("mini-font").text(o.GLocale.get(new o.GLocaleKey("GPatternChooser","text.in-use")).toUpperCase())).on("click",e)).append($("<button />").attr("data-palette","mixer").append($("<div />").addClass("mini-font").text(o.GLocale.get(new o.GLocaleKey("GPatternChooser","text.mixer")).toUpperCase())).on("click",e)).appendTo(this._palettes)},l.prototype.initContextMenu=function(e){this._contextMenu=new a(null,"g-pattern-chooser-context-menu");var t=(e,t,n)=>{gDesigner.stats("patternchooser_add_swatch",e);var i=new o.GSwatch(t,n),a=gDesigner.getSwatches(e);if(a){for(var s=0;s<a.length;++s)if(o.GUtil.equals(i,a[s],!0))return void r.alert(o.GLocale.get(new o.GLocaleKey("GPatternChooser","text.equal-swatch-alert")));a.push(i),gDesigner.setSwatches(e,a)}},n=e=>{var t=this._pattern.clone();return(t instanceof o.GRadialGradient||t instanceof o.GLinearGradient||t instanceof o.GAngularGradient)&&(t._stops[0].color=e),t},i=e=>{var o=$(this._currentLongPressTarget).closest(".swatch").data("swatch");if(o){var i=o.getProperty("_pt"),a=o.getProperty("_op");e=this._getSwatchScope(e,this._pattern);i=n(i),t(e,i,a)}else"INPUT"===this._currentLongPressTarget.nodeName&&t(this._getSwatchScope("document",this._pattern),this._pattern,this._opacity)};this._contextMenu.createAddItem(o.GLocale.get(new o.GLocaleKey("GPatternChooser","action.add-to-document-swatches")),()=>{i("document")}).setIcon("gravit-icon-add-swatches"),this._contextMenu.createAddItem(o.GLocale.get(new o.GLocaleKey("GPatternChooser","action.add-to-global-swatches")),()=>{i("global")}).setIcon("gravit-icon-add-swatches")},l.prototype.__getColorModeParams=function(){return{hexWidth:"25%",isTouchEnabled:!0,rgbWidth:"12%",cymkWidth:"12%"}},l.prototype._createPatternEditorFirstRow=function(e,t){return[{width:"80%",padding:!1,content:$("<button />").prepend($("<span></span>").addClass("gravit-icon-add-image")).append($("<div />").addClass("mini-font").text(o.GLocale.get(new o.GLocaleKey("GPatternChooser","action.choose-image"))+"...")).addClass("pattern-choose-image-button").on("click",e)},{width:"20%",content:$("<button />").addClass("paste-btn").addClass("g-flat").append($("<span></span>").addClass("gravit-icon-paste-color-choose")).on("click",t)}]},l.prototype._createPatternEditorMaskRow=function(e){return[{padding:!1,width:"50px",content:$("<label />").addClass("g-switch").append($("<input>").attr("id","texture-mask-touch").attr("type","checkbox").attr("data-property","texture_mask").prop("disabled",!0).on("change",e)).append($("<div />"))},{padding:!1,width:"auto",content:$("<label></label>").text(o.GLocale.get(new o.GLocaleKey("GPatternChooser","action.set-transparency-mask"))).addClass("set-transparency-mask").attr("for","texture-mask-touch")}]},l.prototype._createPatternEditorScaleRow=function(e,t,n){return[{padding:!1,width:"120px",content:$("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GPatternChooser","text.scale")))},{width:"auto",content:$("<div/>").attr("data-property","texture_tile").gInputSlider({min:10,max:200}).on("input",e).on("change",t)},{width:"50px",content:$("<input>").attr("data-property","texture_tile").attr("type","text").on("change",n).gInputBox({minValue:10,maxValue:200,incrementValue:1,postfix:"%"})}]},l.prototype._createPatternEditorAdvancedRow=function(e){return[{width:"auto",content:$("<div />").addClass("advanced-option").append($("<b>"+o.GLocale.get(new o.GLocaleKey("GPatternChooser","text.advanced"))+" </b>").addClass("title")).append($("<div />").addClass("gravit-icon-right expand-icon").attr("id","expand-icon")).on("click",function(){gDesigner.stats("patternchooser_click_advanced"),e.slideToggle(),this._advancedExpanded=!this._advancedExpanded,$("#expand-icon").removeClass("gravit-icon-right").removeClass("gravit-icon-down"),$("#expand-icon").addClass(this._advancedExpanded?"gravit-icon-right":"gravit-icon-down")}.bind(this))}]},l.prototype.__getCreatePatternEditorParams=function(){return{isTouchEnabled:!0,repeatWidth:"48%",ghostWidth:"4%",postionWith:"48%",sizeWidth:"48%",unitWidth:"8%"}},l.prototype._createMixerPalette=function(e){for(var t=$("<div />").attr("data-container","tints").addClass("tints").append($("<div/>").addClass("title").text(o.GLocale.get(new o.GLocaleKey("GPatternChooser","text.tints")).toUpperCase())).appendTo(e),n=1;n<=8;n+=1)this._createPaletteSwatch(o.GRGBColor.WHITE,t,!1,!1);var i=$("<div />").attr("data-container","shades").addClass("shades").append($("<div/>").addClass("title").text(o.GLocale.get(new o.GLocaleKey("GPatternChooser","text.shades")).toUpperCase())).appendTo(e);for(n=1;n<=8;n+=1)this._createPaletteSwatch(o.GRGBColor.WHITE,i,!1,!1);var a=$("<div />").attr("data-container","tones").addClass("tones").append($("<div/>").addClass("title").text(o.GLocale.get(new o.GLocaleKey("GPatternChooser","text.tones")).toUpperCase())).appendTo(e);for(n=1;n<=8;n+=1)this._createPaletteSwatch(o.GRGBColor.WHITE,a,!1,!1);var r=$("<div />").attr("data-container","mixes").addClass("mixes").append($("<div/>").addClass("title").text(o.GLocale.get(new o.GLocaleKey("GPatternChooser","text.mixes")).toUpperCase())).appendTo(e);for(n=1;n<=8;n+=1)this._createPaletteSwatch(o.GRGBColor.WHITE,r,!1,!1);this._updateMixerPalette()},l.prototype.__getUpdateMixerPaletteParams=function(){return{maxCount:8}},l.prototype.__getCreateUsedPaletteParams=function(){return{isTouchEnabled:!0,maxCount:8}},l.prototype.__getUpdateSwatchesPaletteParams=function(){return{isTouchEnabled:!0}},l.prototype.__getUpdateGradientStopParams=function(){return{isTouchEnabled:!0}},l.prototype.__getCreatePaletteSwatchParamas=function(){return{isTouchEnabled:!0}},l.prototype.__getUpdateOpacityParams=function(){return{isTouchEnabled:!0}},l.prototype.__getUpdateColorParams=function(){return{isTouchEnabled:!0}},s.prototype._relayout=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._container.gOverlay("relayout",{preserveTop:e})},e.exports=l},function(e,t,n){"use strict";n(3),n(28);var o=n(1),i=n(115),a=(n(162),n(853)),r=n(549);const s=n(125);function l(){}o.GObject.inherit(l,i),l.prototype._panel=null,l.prototype._toolbar=null,l.prototype._document=null,l.prototype._symbols=null,l.prototype._disabledSiblingMaps=null,l.prototype.init=function(e,t){this._panel=e,this._toolbar=t,t.addClass("filled"),t.addClass("page-toolbar"),t.addClass("symbol-instance-toolbar"),e.addClass("symbol-instance-panel");var n=$("<select></select>").attr("data-property","symbol-instance").on("change",function(e){gDesigner.stats("symbolproperties_select_swap");var t=this._document.getScene(),n=this._document.getEditor(),i=function(e){var n=e.findParent((function(e){return e instanceof o.GPage}));n&&t.getActivePage()!==n&&t.setActivePage(n)};if(e.target.value&&"0"!==e.target.value&&"-1"!==e.target.value){var s=$(e.target).find('option[value="'+e.target.value+'"]').data("symbol");if(s){(n=this._document.getEditor()).beginTransaction();var l=s,c=this._symbols[0],d=c.getMasterSymbol(),u=c.getDisabledSiblings(),p=c.swapWith(l);if(this._disabledSiblingMaps||(this._disabledSiblingMaps={}),u){var g=d.getMultireferenceId()+"_"+p.getMultireferenceId();this._disabledSiblingMaps[g]=u}var h=this._disabledSiblingMaps[l.getMultireferenceId()+"_"+c.getMultireferenceId()];h&&p.desynchronize(h),p&&(i(p),n.updateSelection(!1,[p])),n.commitTransaction("Swap symbol instance")}}else if(e.target.value&&"0"===e.target.value){var f=this._symbols[0].getMasterSymbol();n.beginTransaction(),i(f),n.clearSelection(),n.updateSelection(!1,[f]),n.hasSelection()&&gDesigner.executeAction(r.ID,void 0,void 0,!0),n.commitTransaction("Select master symbol")}else e.target.value&&"-1"===e.target.value&&(gDesigner.executeAction(a.ID,void 0,void 0,!0),n.updateSelection(!1,n.getSelection().slice()))}.bind(this));$("<label></label>").text(o.GLocale.get(new o.GLocaleKey("GSymbolProperties","title"))).appendTo(t),$("<div></div>").addClass("chooseinstance-row").gPropertyRow({columns:[{clazz:"chooseinstance-title-col",content:$("<span>"+o.GLocale.get(new o.GLocaleKey("GSymbolProperties","text.chooseinstance"))+"</span>")},{clazz:"chooseinstance-select-col",content:n}]}).appendTo(e)},l.prototype.update=function(e,t){return this._updateUI(),this._document&&(gDesigner.removeEventListener(s,this._settingChanged,this),this._document=null),this._symbols=null,!(!e||(gDesigner.addEventListener(s,this._settingChanged,this),!(t=t.filter(e=>e instanceof o.GSymbol&&!e.isMaster()&&!!e.getMasterSymbol())).length))&&(this._symbols=t.slice(),this._document=e,this._updateProperties(),!0)},l.prototype._updateUI=function(){gDesigner.isTouchEnabled()?this._panel.find(".frm-checkbox").gCheckboxSlider():this._panel.find(".frm-checkbox").gCheckboxSlider("unmount")},l.prototype._settingChanged=function(e){"touch"===e.key&&this._updateUI()},l.prototype._updateProperties=function(){var e,t=this._document.getScene(),n=this._symbols[0],i=n.getMasterSymbol(),r=(t.isFixedSized(),t.getSymbols());this._symbols.length>1?e=this._symbols.length+" "+o.GLocale.get(new o.GLocaleKey("GSymbolProperties","text.instances")):(e=n.getProperty("name")||o.GLocale.get(new o.GLocaleKey("GSymbolProperties","title")),i.getProperty("name")?e+=" ("+o.GLocale.get(new o.GLocaleKey("GSymbolProperties","text.instanceof"))+" "+i.getProperty("name"):e+=" ("+o.GLocale.get(new o.GLocaleKey("GSymbolProperties","text.instance")),e+=")"),this._toolbar.find("label:first-child").text(e);var s,l=this._panel.find('select[data-property="symbol-instance"]').empty();gDesigner.canExecuteAction(a.ID)&&(l.append($('<option value="-1">('+o.GLocale.get(a.TITLE)+")</option>")),l.append(s=$('<option value="-2"></option>')));var c=0;!r.length&&i&&(r=[i]),r.length?l.removeClass("g-disabled").attr("disabled",null):l.addClass("g-disabled").attr("disabled","");var d=!1;r.forEach((function(e){var t=$("<option></option>").data("symbol",e).attr("value",++c).text(e.getProperty("name")).appendTo(l);i.getMultireferenceId()===e.getMultireferenceId()&&(t.prop("selected",!0),d=!0)})),d||s.prop("selected",!0),i&&i.getScene()&&l.append($('<option value="0">('+o.GLocale.get(new o.GLocaleKey("GSymbolProperties","text.master"))+")</option>"))},l.prototype.toString=function(){return"[Object GSymbolProperties]"},e.exports=l},function(e,t,n){"use strict";n(181),n(51),n(7),n(3);var o=n(1),i=n(342),a=n(61),r=n(115),s=n(433),l=n(430),c=n(78),d=n(151),u=n(111),p=n(71),g=n(125),h=(n(431),n(37)),f=n(240);const{FILE_FORMATS:m,CLOUD_SYNC_FEATURE:{NEW_LAYOUT:y}={}}=n(9);var v="."+m.find(e=>e.default).ext;function _(){}o.GObject.inherit(_,r),_.prototype._panel=null,_.prototype._document=null,_.prototype._scene=null,_.prototype.init=function(e,t){this._panel=e.addClass("scene-properties-panel"),t.addClass("scene-properties-toolbar"),y||gDesigner.addEventListener(p,this._synchronismUpdated,this);var n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var n=this;if("dpi"===e)return $("<div></div>").append($("<div/>").attr("data-property",e).on("change",(function(){const t=parseInt($(this).gInputSelect("value"))||o.GLength.DPI;gDesigner.stats("sceneproperties_change_canvas-dpi",t),n._assignProperty(e,t,o.GLocale.get(new o.GLocaleKey("GSceneProperties","action.change-canvas-dpi")))})).gInputSelect({list:[72,96,144,300],minValue:72,maxValue:300})).gRichTooltip(t);if("gx"===e||"gy"===e||"gaw"===e)return $("<input>").attr("type","text").attr("data-property",e).on("change",(function(){"gx"===e?gDesigner.stats("sceneproperties_change_rect-grid-settings","width"):"gy"===e?gDesigner.stats("sceneproperties_change_rect-grid-settings","height"):"gaw"===e&&gDesigner.stats("sceneproperties_change_axono-grid-settings","size");var t=n._document.getScene().stringToPoint($(this).gInputBox("value"));null!==t&&"number"==typeof t?n._assignProperty(e,t,o.GLocale.get(new o.GLocaleKey("GSceneProperties","action.change-grid-settings"))):n._updateProperties()})).gInputBox();if("ga1"===e||"ga2"===e)return $("<input>").attr("type","text").attr("data-property",e).on("change",(function(){"ga1"===e?gDesigner.stats("sceneproperties_change_axono-grid-settings","angle1"):gDesigner.stats("sceneproperties_change_axono-grid-settings","angle2");var t=parseFloat($(this).gInputBox("value"));null!==t&&"number"==typeof t?(t=o.GMath.normalizeAngleDegrees(t),"ga1"==e&&(t=(t=t>=180?t-180:t)>=90?89:t),"ga2"==e&&(t=(t=(t=t>0?t-360:t)<=-180?t+180:t)<=-90?-89:t),t=o.GMath.toRadians(t),n._assignProperty(e,t,o.GLocale.get(new o.GLocaleKey("GSceneProperties","action.change-grid-settings")))):n._updateProperties()})).gInputBox({postfix:"°"});if(0===e.indexOf("gm-")){var i="",a=e.substr("gm-".length);switch(a){case o.GScene.GridMode.Boxed:i=o.GLocale.get(new o.GLocaleKey("GSceneProperties","text.on"));break;case o.GScene.GridMode.Axonometric:i=o.GLocale.get(new o.GLocaleKey("GSceneProperties","text.isometric"));break;default:i=o.GLocale.get(new o.GLocaleKey("GSceneProperties","text.off"))}return $("<label></label>").append($("<input>").addClass("grid-mode-radio").attr("type","radio").attr("data-property",e).on("change",(function(){gDesigner.stats("sceneproperties_change_grid-mode","box"===a?"on":"axo"===a?"isometric":"off"),n._assignProperty("gm",a||null,o.GLocale.get(new o.GLocaleKey("GSceneProperties","action.change-grid-settings"))),n._updateUI()})).gRichTooltip(t)).append($("<span></span>").text(i))}if("cm"===e)return $("<select></select>").attr("data-property",e).gRichTooltip(t).on("change",(function(){const t=gDesigner.getActiveDocument(),i=t.getScene();if(!gDesigner.isEnabledProFeatures()&&0!=this.selectedIndex)return $(this).val(i.getProperty("cm")),void gDesigner.handlePROFeatureInterruption();const a=$(this).val();gDesigner.stats("sceneproperties_change_color-mode",a);var r=i.getActivePage().getChildren();!!r&&r.find(e=>!(e instanceof o.GAnnotationsList))&&h.alert(o.GLocale.get(new o.GLocaleKey("GSceneProperties","text.reminder"))),gDesigner.setSetting("color_mode",a),n._assignProperty(e,a,o.GLocale.get(new o.GLocaleKey("GSceneProperties","action.change-color-mode"))),t.setColorModeElms(r)}));if("ut"===e)return $("<select></select>").gUnit().attr("data-property",e).gRichTooltip(t).on("change",(function(){gDesigner.stats("sceneproperties_change_canvas-unit",$(this).val()),n._assignProperty(e,$(this).val(),o.GLocale.get(new o.GLocaleKey("GSceneProperties","action.change-canvas-unit")))}));if(0===e.indexOf("sync-")){i=o.GLocale.get(new o.GLocaleKey("GSceneProperties","text."+e.substring("sync-".length)));return $("<label></label>").append($("<input>").attr("type","radio").attr("data-property",e).on("change",(function(e){var t=-1!==$(e.target).data().property.indexOf("on");gDesigner.stats("sceneproperties_toggle_sync",t?"enable":"disable"),n._assignProperty("cfs",t)}))).append($("<span></span>").text(i))}if(0===e.indexOf("action-")){var r=e.substring("action-".length);return $("<button></button>").append($("<span></span>").text(o.GLocale.get(gDesigner.getAction(r).getTitle()))).on("click",function(e){gDesigner.canExecuteAction(r)&&gDesigner.executeAction(r)}.bind(this))}throw new Error("Unknown input property: "+e)}.bind(this);if($("<label></label>").text(o.GLocale.get(new o.GLocaleKey("GCommonNames","text.document"))).appendTo(t),$("<div></div>").addClass("unit-row").gPropertyRow({columns:[{clazz:"unit-title-column",content:$("<span>"+o.GLocale.get(new o.GLocaleKey("GCommonNames","text.unit"))+"</span>")},{clazz:"unit-selector-column",content:n("ut",a.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GSceneProperties","text.unit-tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GSceneProperties","text.unit-tooltip-description")),middle:!1}))}]}).appendTo(e),$("<hr/>").appendTo(e),$("<div></div>").addClass("color-mode-row").gPropertyRow({columns:[{clazz:"color-mode-title-column",content:$("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GSceneProperties","text.color-mode")))},{clazz:"color-mode-selector-column",content:n("cm",a.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GSceneProperties","text.color-mode-tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GSceneProperties","text.color-mode-tooltip-description")),middle:!1}))}]}).appendTo(e),$("<hr/>").appendTo(e),$("<div></div>").addClass("dpi-row").gPropertyRow({columns:[{clazz:"dpi-title-column",content:$("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GSceneProperties","text.dpi")))},{clazz:"dpi-selector-column",content:n("dpi",a.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GSceneProperties","text.dpi-tooltip-title")),middle:!1}))}]}).appendTo(e),$("<hr/>").appendTo(e),$("<div></div>").addClass("grid-mode").gPropertyRow({columns:[{clazz:"grid-mode-title-column",content:$("<span>"+o.GLocale.get(new o.GLocaleKey("GCommonNames","text.grid"))+"</span>")},{clazz:"grid-mode-off-column",content:n("gm-",a.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GSceneProperties","text.grid-tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GSceneProperties","text.grid-tooltip-description-off")),learnMore:"https://documentation.corelvector.com/design-aids/grid/"}))},{clazz:"grid-mode-box-column",content:n("gm-"+o.GScene.GridMode.Boxed,a.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GSceneProperties","text.grid-tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GSceneProperties","text.grid-tooltip-description-on")),learnMore:"https://documentation.corelvector.com/design-aids/grid/"}))},{clazz:"grid-mode-axo-column",content:n("gm-"+o.GScene.GridMode.Axonometric,a.GRichTooltipConfig.from({title:o.GLocale.get(new o.GLocaleKey("GSceneProperties","text.grid-tooltip-title")),description:o.GLocale.get(new o.GLocaleKey("GSceneProperties","text.grid-tooltip-description-isometric")),learnMore:"https://documentation.corelvector.com/design-aids/grid/"}))}]}).appendTo(e),$("<div></div>").addClass("grid-mode-type").attr("data-grid-mode",o.GScene.GridMode.Boxed).gPropertyRow({label:"",columns:[{width:"33.3%",label:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.width")),content:n("gx")},{width:"33.3%",label:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.height")),content:n("gy")}]}).appendTo(e),$("<div></div>").addClass("grid-mode-type").attr("data-grid-mode",o.GScene.GridMode.Axonometric).gPropertyRow({label:"",columns:[{width:"33.3%",label:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.size")),content:n("gaw")},{width:"33.3%",label:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.angle"))+" 1",content:n("ga1")},{width:"33.3%",label:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.angle"))+" 2",content:n("ga2")}]}).appendTo(e),$("<hr/>").appendTo(e),!y){let t=$("<div></div>").addClass("actions").append($("<button></button>").addClass(f["sync-button"]).text(o.GLocale.get(new o.GLocaleKey("GSceneProperties","cloud.sync.enable"))).on("click",()=>{gDesigner.stats("sceneproperties_enable_cloud-sync"),this._enableCloudSync()}));$("<div></div>").attr("data-property","enable-cloud-sync").append($("<div></div>").addClass("cloud-sync-panel").append($("<div></div>").addClass("svg-cloud-icon svg-background-icon-theme")).append(t)).appendTo(e);const n=this._getWelcomeLink();n&&t.append(n),$("<div></div>").attr("data-property","switch-cloud-sync").addClass("cloud-sync-switch").append($("<div></div>").addClass("svg-cloud-icon svg-background-icon-theme")).append($("<div></div>").addClass("actions").append($("<label></label>").addClass("g-switch").css("width","28px").append($("<input>").attr("type","checkbox").on("change",e=>{gDesigner.stats("sceneproperties_toggle_cloud-sync",$(e.target).is(":checked")?"enable":"disable");var t=this._document.getScene();const n=$(e.target).is(":checked");t.setProperty("cfs",n),n&&this._document.chooseLatestDocument(t,(e,n)=>{if(e!==t||n){var o=new d(this._document.getStorageItem());o.setScene(e),gDesigner.replaceDocument(this._document,o)}else this._document.storeToCloud(e,async()=>{if(gDesigner.getDefaultStorage().canSave()){let e=!1,n=(await this._document.saveAnnotations(e),this._document.updateSaveOptionsLastModifiedDate({},t.getLastSavedTime()));this._document.store(null,this._updateProperties.bind(this),null,n)}else this._updateProperties()})},null,(e,t)=>t.lastModifiedDate().getTime()>e.lastModifiedDate().getTime())})).append($("<div></div>"))).append($("<span></span>").addClass("label").text(o.GLocale.get(new o.GLocaleKey("GSceneProperties","cloud.sync.label")))).append($("<span></span>").addClass("last-modified-date"))).appendTo(e),i.SCENEPROPERTIES.HAS_LOGO_UNDER_SYNC&&e.find(".svg-cloud-icon").load(f["cloud-logo"],()=>{})}},_.prototype._getWelcomeLink=function(){return $("<div></div>").addClass("more").append($("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GSceneProperties","cloud.sync.more")))).on("click",()=>{gDesigner.stats("sceneproperties_click_welcome-to-gravit-cloud-medium-com"),gContainer.openExternalLink(null,"https://medium.com/gravitdesigner/welcome-to-the-gravit-cloud-c30f84a7eb1f")})},_.prototype.update=function(e,t){return this._document&&(this._document.getScene().removeEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),gDesigner.removeEventListener(g,this._settingChanged),this._document=null),this._scene=null,!(!e||(1===t.length&&t[0]instanceof o.GPage&&(this._scene=t[0].getScene()),!this._scene))&&(this._document=e,this._document.getScene().addEventListener(o.GNode.AfterPropertiesChangeEvent,this._afterPropertiesChange,this),gDesigner.addEventListener(g,this._settingChanged,this),this._updateColorMode(),this._updateProperties(),this._updateUI(),!0)},_.prototype._afterPropertiesChange=function(e){e.temporary||this._scene!==e.node||this._updateProperties()},_.prototype._updateUI=function(){let e=this._panel.find(".color-mode-row"),t=this._panel.find(".dpi-row");if(gDesigner.isTouchEnabled()){this._panel.find('input[data-property="gm-"]').is(":checked")?this._panel.find(".grid-mode").removeClass("mode-on"):this._panel.find(".grid-mode").addClass("mode-on"),e.insertAfter(t);let n=t.find(".dpi-selector-column .g-input-select");n.find(".dpi-text").length||$("<span/>").addClass("dpi-text").text(o.GLocale.get(new o.GLocaleKey("GSceneProperties","text.dpi"))).insertAfter(n.find("input")),this._panel.find(".unit-title-column span").text(o.GLocale.get(new o.GLocaleKey("GSceneProperties","text.unit-tooltip-title")))}else t.find(".dpi-selector-column .g-input-select .dpi-text").remove(),e.insertBefore(t.prev()),this._panel.find(".grid-mode").removeClass("mode-on"),this._panel.find(".unit-title-column span").text(o.GLocale.get(new o.GLocaleKey("GCommonNames","text.unit")))},_.prototype._settingChanged=function(e){"decimals_num"===e.key?this._updateProperties():"touch"===e.key&&this._updateUI()},_.prototype._synchronismUpdated=function(e){e.document!==this._document||e.type!==p.Type.SynchronismUpdated||e.document.isSynchronizing()||this._updateProperties()},_.prototype._updateColorMode=function(){var e=this._panel.find('select[data-property="cm"]').empty(),t=[{value:o.GColor.ColorModes.RGB,pro:!1,text:"RGB"},{value:o.GColor.ColorModes.HSB,pro:!0,text:"HSB"},{value:o.GColor.ColorModes.CMYK,pro:!0,text:"CMYK"}];Array.prototype.forEach.call(t,t=>{var n=$("<option></option>").attr("value",t.value).text(t.text).appendTo(e);1!=t.pro||gDesigner.getLicense().isPro()||n.gPro()})},_.prototype._updateProperties=function(){var e=this._document.getScene();this._panel.find('[data-property="dpi"]').gInputSelect("value",this._scene.getProperty("dpi")||o.GLength.DPI);var t=this._document.hasCDR();this._panel.find('[data-property="dpi"]').find('[type="text"]').prop("disabled",t),this._panel.find('[data-property="dpi"]').find("button").prop("disabled",t),this._panel.find('[data-property="dpi"]').attr("data-title",t?o.GLocale.get(new o.GLocaleKey("GCommonNames","text.cant-change-cdr-limitations")):"");const n=gDesigner.getSetting("color_mode",o.GColor.ColorModes.RGB);n&&this._scene.setProperty("cm",n),this._panel.find('select[data-property="cm"]').val(n),this._panel.find('select[data-property="ut"]').val(this._scene.getProperty("ut")),this._panel.find('input[data-property="gx"]').gInputBox("value",e.pointToString(this._scene.getProperty("gx"),this._scene.getOptimalDecimalsCount()));this._panel.find('input[data-property="gy"]').gInputBox("value",e.pointToString(this._scene.getProperty("gy"),this._scene.getOptimalDecimalsCount())),this._panel.find('input[data-property="gaw"]').gInputBox("value",e.pointToString(this._scene.getProperty("gaw"),this._scene.getOptimalDecimalsCount())),this._panel.find('[type="text"][data-property="ga1"]').gInputBox("value",o.GUtil.formatNumber(o.GMath.toDegrees(this._scene.getProperty("ga1")),1)),this._panel.find('[type="text"][data-property="ga2"]').gInputBox("value",o.GUtil.formatNumber(o.GMath.toDegrees(this._scene.getProperty("ga2")),1));var i=this._scene.getProperty("gm");if(this._panel.find('[data-property^="gm"]').each((function(e,t){var n=$(t),o=n.attr("data-property").substr("gm-".length);n.prop("checked",!o&&!i||o===i)})),!y){var a=this._document.isCloudFile()?!this._document.getScene().getProperty("cid"):!this._document.hasCloudReference(),r=!a&&(this._document.isCloudFile()||this._document.hasCloudReference());this._panel.find('[data-property="enable-cloud-sync"]').css("display",a?"":"none").find("button").prop("disabled",this._document.getStatus()===c.Loading),this._panel.find('[data-property="switch-cloud-sync"]').css("display",r?"":"none").find("input").prop("checked",this._document.getScene()&&this._document.getScene().isCloudSynchronization()||this._document.isCloudFile()).prop("disabled",this._document.isCloudFile());var s=function(e){if(0===e.getTime())return null;var t=e.getHours(),n=e.getMinutes(),o=(t=(t%=12)||12)+":"+(n=n<10?"0"+n:n);return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()+"  "+o}(this._document.getScene().lastModifiedDate());this._panel.find('[data-property="switch-cloud-sync"]').find(".last-modified-date").text(s||"").css("display",s?"":"none")}this._panel.find("[data-grid-mode]").each((function(e,t){var n=$(t),o=n.attr("data-grid-mode");n.css("display",!o&&!i||o===i?"":"none")}))},_.prototype._assignProperty=function(e,t,n){this._assignProperties([e],[t],n)},_.prototype._assignProperties=function(e,t,n){var o=this._document.getEditor();o.beginTransaction();try{this._scene.setProperties(e,t)}finally{o.commitTransaction(n)}},_.prototype._enableCloudSync=function(){var e=()=>{var e=this._document;gDesigner.getDefaultStorage().canSave()?this._document.isNew()?u.createFile(e,t=>{e.getScene().setCloudSynchronization(t.id),gDesigner.executeAction(l.ID+v,[null,e,()=>{u.renameFile(t,e.getTitle(),()=>{e.storeToCloud(e.getScene(),this._updateProperties.bind(this))})}],void 0,!0)}):this._document.isCloudFile()?gDesigner.executeAction(l.ID+v,void 0,(void 0).true):this._document.hasCloudReference()?console.warn("Enable Sync for referenced file"):u.createFile(e,t=>{e.getScene().setCloudSynchronization(t.id),e.storeToCloud(e.getScene(),()=>{e.store()})}):this._document.isNew()?gDesigner.executeAction(s.ID+".save-as",[this._document,t=>{t===c.Loaded&&gDesigner.removeDocument(e,null,!0)}],void 0,!0):this._document.isCloudFile()?gDesigner.executeAction(l.ID+v,void 0,void 0,!0):this._document.hasCloudReference()?console.warn("Enable Sync for referenced file"):gDesigner.executeAction(s.ID+".save-as",[this._document,t=>{t===c.Loaded&&gDesigner.removeDocument(e,null,!0)}],void 0,!0)};gDesigner.getUser().then(t=>{t?e():u.performLogin().then(t=>{t&&e()})})},_.prototype.toString=function(){return"[Object GSceneProperties]"},e.exports=_},function(e,t,n){"use strict";n(844),n(181),n(51),n(3);var o=n(45),i=n(1),a=n(61),r=n(115),s=(n(162),n(125));n(1139);function l(){this._elements=[]}i.GObject.inherit(l,r),l.prototype._panel=null,l.prototype._copiesAndApply=null,l.prototype._copiesAndApplyTouch=null,l.prototype._document=null,l.prototype._elements=null,l.prototype.isGroup=function(e){return!1},l.prototype._scaleKeepRatio=!1,l.prototype._preserveScaleX=100,l.prototype._preserveScaleY=100,l.prototype.init=function(e,t){t.addClass("advanced-transform-toolbar"),this._panel=e.addClass("advanced-transform-properties");var n=this;this._advancedTransformPanel=$("<div></div>").css("width","180px").gOverlay({releaseOnClose:!1,clazz:"g-overlay-advanced-transform"}),$("<div></div>").gPropertyRow({columns:[{width:"auto",content:$("<label></label>").append($("<input />").attr("type","checkbox").attr("data-property","_bs").prop("checked",!0).on("change",(function(){gDesigner.stats("transformproperties_toggle_autoscale-borders",$(this).prop("checked")?"enabled":"disabled"),n._setBorderScale($(this).prop("checked"))}))).append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GBorderPaintLayerProperties","text.autoscale-borders"))))}]}).appendTo(this._advancedTransformPanel),$("<div></div>").gPropertyRow({columns:[{width:"auto",content:$("<label></label>").append($("<input />").attr("type","checkbox").attr("data-property","esc").prop("checked",!0).on("change",(function(){gDesigner.stats("transformproperties_toggle_autoscale-corners",$(this).prop("checked")?"enabled":"disabled"),n._setCornersScale($(this).prop("checked"))}))).append($("<span></span>").text(i.GLocale.get(new i.GLocaleKey("GCommonNames","text.autoscale-corners"))))}]}).appendTo(this._advancedTransformPanel),$("<label></label>").text(i.GLocale.get(new i.GLocaleKey("GTransformProperties","title"))).appendTo(t),$("<button></button>").attr("data-action","stroke-settings").attr("data-title",i.GLocale.get(new i.GLocaleKey("GTransformProperties","text.advanced-transform-settings"))).append($("<span></span>").addClass("gravit-icon-settings")).on("click",function(e){gDesigner.stats("transformproperties_open_advanced"),this._advancedTransformPanel.gOverlay("open",$(e.target).closest("button"))}.bind(this)).appendTo(t);const o=a.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GTransformProperties","text.move-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GTransformProperties","text.move-tooltip-description")),middle:!1,learnMore:"https://documentation.corelvector.com/basics/transform-panel/#moving-objects"}),r=a.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GTransformProperties","text.scale-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GTransformProperties","text.scale-tooltip-description")),middle:!1,learnMore:"https://documentation.corelvector.com/basics/transform-panel/#scaling-objects"}),s=a.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GTransformProperties","text.rotate-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GTransformProperties","text.rotate-tooltip-description")),middle:!1,learnMore:"https://documentation.corelvector.com/basics/transform-panel/#rotating-objects"}),l=a.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GTransformProperties","text.rotate-axis-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GTransformProperties","text.rotate-axis-tooltip-description")),middle:!1,learnMore:"https://documentation.corelvector.com/basics/transform-panel/#rotating-objects"}),c=a.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GTransformProperties","text.skew-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GTransformProperties","text.skew-tooltip-description")),middle:!1,learnMore:"https://documentation.corelvector.com/basics/transform-panel/#skewing-objects"}),d=a.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GTransformProperties","text.copies-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GTransformProperties","text.copies-tooltip-description")),middle:!1,learnMore:"https://documentation.corelvector.com/basics/transform-panel/#transform-and-copy-objects"}),u=a.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GTransformProperties","text.transdorm-origin-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GTransformProperties","text.transdorm-origin-tooltip-description")),learnMore:"https://documentation.corelvector.com/basics/transform-panel/#reference-point"});$("<div></div>").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GCommonNames","action.move")),columns:[{width:"44%",content:$("<div/>").append($("<input/>").on("keydown",this._confirmEvent.bind(this)).on("change",e=>gDesigner.stats("transformproperties_change_move-x")).attr({type:"text","data-property":"move-x"}).gInputBox().gInputBox("value","0")).gInputLabel({label:"x"}).gRichTooltip(o)},{width:"12%"},{width:"44%",content:$("<div/>").append($("<input/>").on("keydown",this._confirmEvent.bind(this)).on("change",e=>gDesigner.stats("transformproperties_change_move-y")).attr({type:"text","data-property":"move-y"}).gInputBox().gInputBox("value","0")).gInputLabel({label:"y"}).gRichTooltip(o)}]}).appendTo(this._panel),$("<div></div>").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GTransformProperties","text.scale")),columns:[{width:"44%",content:$("<div/>").append($("<input/>").attr({type:"text","data-property":"scale-x"}).on("change",e=>{gDesigner.stats("transformproperties_change_scale-x");var t=parseFloat($(e.target).gInputBox("value"))||100;if(this._scaleKeepRatio){var n=t/this._preserveScaleX,o=this._panel.find('[data-property="scale-y"]'),i=parseFloat(o.gInputBox("value"))||100;i*=n,o.gInputBox("value",parseFloat(i).toFixed(1))}this._preserveScaleX=t}).gInputBox({postfix:"%"}).gInputBox("value","100")).gInputLabel({label:i.GLocale.get(new i.GLocaleKey("GCommonNames","property-w"),"w")}).gRichTooltip(r)},{width:"12%",content:$("<span></span>").addClass("gravit-icon-unlinked transform-scale-link").css("text-align","center").css("cursor","pointer").on("click",(function(e){var t=$(this);"yes"===t.attr("data-ratio")?(t.attr("data-ratio","no").attr("class","gravit-icon-unlinked transform-scale-link"),n._scaleKeepRatio=!1):(t.attr("data-ratio","yes").attr("class","gravit-icon-linked transform-scale-link"),n._scaleKeepRatio=!0)})).attr("data-title",i.GLocale.get(new i.GLocaleKey("GDimensionProperties","action.keep-ratio"))).attr("data-ratio","no")},{width:"44%",content:$("<div/>").append($("<input/>").attr({type:"text","data-property":"scale-y"}).on("change",e=>{gDesigner.stats("transformproperties_change_scale-y");var t=parseFloat($(e.target).gInputBox("value"))||100;if(this._scaleKeepRatio){var n=t/this._preserveScaleY,o=this._panel.find('[data-property="scale-x"]'),i=parseFloat(o.gInputBox("value"))||100;i*=n,o.gInputBox("value",parseFloat(i).toFixed(1))}this._preserveScaleY=t}).gInputBox({postfix:"%"}).gInputBox("value","100")).gInputLabel({label:i.GLocale.get(new i.GLocaleKey("GCommonNames","property-h"),"h")}).gRichTooltip(r)}]}).appendTo(this._panel),$("<div></div>").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GCommonNames","action.rotate")),columns:[{width:"44%",content:$("<div/>").append($("<input/>").attr({type:"text","data-property":"rotate"}).on("change",e=>gDesigner.stats("transformproperties_change_rotate-up")).gInputBox({postfix:"°"}).gInputBox("value","0")).gInputLabel({label:"&#x2191;"}).gRichTooltip(s)},{width:"12%"},{width:"44%",content:$("<div/>").append($("<input/>").attr({type:"text","data-property":"reflect"}).on("change",e=>gDesigner.stats("transformproperties_change_rotate-down")).gInputBox({postfix:"°"}).gInputBox("value","0")).gInputLabel({label:"&#x2193;"}).gRichTooltip(l)}]}).appendTo(this._panel),$("<div></div>").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GTransformProperties","text.skew")),columns:[{width:"44%",content:$("<div/>").append($("<input/>").attr({type:"text","data-property":"skew-x"}).on("change",e=>gDesigner.stats("transformproperties_change_skew-x")).gInputBox({postfix:"°"}).gInputBox("value","0")).gInputLabel({label:"X"}).gRichTooltip(c)},{width:"12%"},{width:"44%",content:$("<div/>").append($("<input/>").attr({type:"text","data-property":"skew-y"}).on("change",e=>gDesigner.stats("transformproperties_change_skew-y")).gInputBox({postfix:"°"}).gInputBox("value","0")).gInputLabel({label:"Y"}).gRichTooltip(c)}]}).appendTo(this._panel),$("<hr/>").appendTo(this._panel),this._copiesAndApply=$("<div/>").addClass("copies-apply").appendTo(this._panel),this._copiesAndApplyTouch=$("<div/>").addClass("copies-apply-touch").appendTo(this._panel);(e=>{$("<div></div>").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GTransformProperties","text.copies")),columns:[{width:"44%",content:$("<input/>").on("change",e=>gDesigner.stats("transformproperties_change_copies")).attr({type:"text","data-property":"copies"}).gInputBox().gInputBox("value","0").gRichTooltip(d)},{width:"12%"},{width:"44%",html:$("<div/>").css("width","100%").css("display","flex").css("justify-content","center").append($("<div></div>").attr("data-property","pivot").css("align-self","center").gPivot().gPivot("value",i.GRect.Side.CENTER)).gRichTooltip(u)}]}).appendTo(e),$("<div></div>").gPropertyRow({label:"",columns:[{width:"100%",content:$("<button></button>").text(i.GLocale.get(new i.GLocaleKey("GCommonNames","action.apply"))).addClass("transform-button").css("margin-top","5px").on("click",this._applyTransformation.bind(this))}]}).appendTo(e)})(this._copiesAndApply),(e=>{var t=$("<div/>").addClass("left");$("<div></div>").gPropertyRow({label:i.GLocale.get(new i.GLocaleKey("GTransformProperties","text.copies")),columns:[{width:"100px",content:$("<input/>").on("change",e=>gDesigner.stats("transformproperties_change_copies")).attr({type:"text","data-property":"copies"}).gInputBox().gInputBox("value","0").gRichTooltip(d)}]}).appendTo(t),$("<div></div>").addClass("transform-apply").gPropertyRow({columns:[{width:"100%",content:$("<button></button>").text(i.GLocale.get(new i.GLocaleKey("GDimensionProperties","text.transform-apply"))).addClass("transform-button").on("click",this._applyTransformation.bind(this))}]}).appendTo(t),t.appendTo(e),$("<div></div>").addClass("right").append($("<div/>").attr("data-property","pivot").gPivot().gPivot("value",i.GRect.Side.CENTER)).appendTo(e)})(this._copiesAndApplyTouch)},l.prototype.isAvailable=function(e){return!0===e},l.prototype._enableTouchModal=function(e){e?(this._copiesAndApplyTouch.css("display","block"),this._copiesAndApply.css("display","none")):(this._copiesAndApplyTouch.css("display","none"),this._copiesAndApply.css("display","block"))},l.prototype.update=function(e,t){if(this._document&&(gDesigner.removeEventListener(s,this._settingChanged),this._document=null),this._enableTouchModal(gDesigner.isTouchEnabled()),this._elements=[],e){for(var n=0;n<t.length;++n)!t[n].hasMixin(i.GElement.Transform)||t[n]instanceof i.GPage||this._elements.push(t[n]);if(this._elements.length&&this._elements.length===t.length)return this._document=e,gDesigner.addEventListener(s,this._settingChanged,this),this._setBorderScale(this._getOwnBorderScale()),this._setCornersScale(this._getOwnCornersScale()),!0}return!1},l.prototype._confirmEvent=function(e){13===e.keyCode&&this._updateDisplayValues()},l.prototype._settingChanged=function(e){"decimals_num"===e.key&&this._updateDisplayValues()},l.prototype._updateDisplayValues=function(){this._document.getScene();var e=this._panel.find('[data-property="move-x"]'),t=parseFloat(e.gInputBox("value"));t=isNaN(t)||t<=0||!t?0:t,e.gInputBox("value",i.GUtil.formatNumber(t,this._document.getScene().getOptimalDecimalsCount())),e=this._panel.find('[data-property="move-y"]'),t=parseFloat(e.gInputBox("value")),t=isNaN(t)||t<=0||!t?0:t,e.gInputBox("value",i.GUtil.formatNumber(t,this._document.getScene().getOptimalDecimalsCount()))},l.prototype._applyTransformation=function(){gDesigner.stats("transformproperties_apply_transformation");var e=this._document.getScene(),t=gDesigner.isTouchEnabled()?this._copiesAndApplyTouch:this._copiesAndApply,n=parseInt(t.find('[data-property="copies"]').gInputBox("value")),a=t.find('[data-property="pivot"]').gPivot("value"),r=e.stringToPoint(this._panel.find('[data-property="move-x"]').gInputBox("value"))||0,s=e.stringToPoint(this._panel.find('[data-property="move-y"]').gInputBox("value"))||0,l=parseFloat(this._panel.find('[data-property="scale-x"]').gInputBox("value"))/100||1,c=parseFloat(this._panel.find('[data-property="scale-y"]').gInputBox("value"))/100||1,d=i.GMath.toRadians(parseFloat(this._panel.find('[data-property="rotate"]').gInputBox("value")))||0,u=i.GMath.toRadians(parseFloat(this._panel.find('[data-property="skew-x"]').gInputBox("value")))||0,p=i.GMath.toRadians(parseFloat(this._panel.find('[data-property="skew-y"]').gInputBox("value")))||0,g=parseFloat(parseFloat(this._panel.find('[data-property="reflect"]').gInputBox("value")))||0;g=0!==g?i.GMath.toRadians(-g):g;var h=function(e,t){var n=o.GElementEditor.openEditor(e);n?(n._setTransform(t),n.applyTransform(e,!0,null,null)):e.transform(e,!0)};function f(e,t,n){t.beginUpdate();try{if((r||s)&&h(t,new i.GTransform(1,0,0,1,r*e,s*e)),1===l&&1===c||h(t,(new i.GTransform).translated(-n.getX(),-n.getY()).scaled(l+(l-1)*(e-1),c+(c-1)*(e-1)).translated(n.getX(),n.getY())),0!==d&&h(t,(new i.GTransform).translated(-n.getX(),-n.getY()).rotated(d*e).translated(n.getX(),n.getY())),(0!==u||0!==p)&&u>-i.GMath.PIHALF&&p>-i.GMath.PIHALF&&u<i.GMath.PIHALF&&p<i.GMath.PIHALF&&h(t,(new i.GTransform).translated(-n.getX(),-n.getY()).skewed(u*e,p*e).translated(n.getX(),n.getY())),0!==g){var o=Math.cos(g),a=Math.sin(g);e%2&&h(t,(new i.GTransform).translated(-n.getX(),-n.getY()).multiplied(new i.GTransform(o,-a,a,o,0,0)).multiplied(new i.GTransform(1,0,0,-1,0,0)).multiplied(new i.GTransform(o,a,-a,o,0,0)).translated(n.getX(),n.getY()))}}finally{t.endUpdate()}}o.GEditor.tryRunTransaction(e,function(){for(var e=[],t=null,o=null,r=0;r<this._elements.length;++r){var s=this._elements[r];a&&(o=s.getGeometryBBox())&&(t=t?t.united(o):o);var l=[s];if(n>0)for(var c=s.getParent(),d=s.getNext()?s.getNext():null,u=0;u<n;++u){var p=s.clone();c.insertChild(p,d),u==n-1&&(p.setFlag(i.GNode.Flag.Selected),s.removeFlag(i.GNode.Flag.Selected)),l.push(p)}e.push(l)}var g=null;if(t&&!t.isEmpty()&&(g=t.getSide(a)),g)for(r=0;r<e.length;++r){if((l=e[r]).length>1)for(var h=0;h<l.length;++h)f(h,l[h],g);else 1==l.length&&f(1,l[0],g)}}.bind(this),i.GLocale.get(new i.GLocaleKey("GTransformProperties","action.apply-transformation")))},l.prototype._getOwnBorderScale=function(){return this._advancedTransformPanel.find('[data-property="_bs"]').prop("checked")},l.prototype._setBorderScale=function(e){this._document&&this._document.getScene().setBorderScale(e&&(void 0===o.GEditorOptions.scaleBorderWidth||o.GEditorOptions.scaleBorderWidth))},l.prototype._getOwnCornersScale=function(){return this._advancedTransformPanel.find('[data-property="esc"]').prop("checked")},l.prototype._setCornersScale=function(e){this._document&&this._document.getScene().setCornersScale(e&&(void 0===o.GEditorOptions.scaleCorners||o.GEditorOptions.scaleCorners))},l.prototype.toString=function(){return"[Object GTransformProperties]"},e.exports=l},function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=n(45),r=n(61),s=o(n(326)),l=n(71),c=n(590),d=n(549),u=n(785),p=n(379);function g(){u.call(this)}i.GObject.inherit(g,u),g.ID="symbols",g.TITLE=new i.GLocaleKey("GSymbolsSidebar","title"),g.prototype._htmlElement=null,g.prototype._newSymbolButton=null,g.prototype._symbolsToolbar=null,g.prototype._symbolsPanel=null,g.prototype.getId=function(){return g.ID},g.prototype.getTitle=function(){return g.TITLE},g.prototype.isEnabled=function(){return!0},g.prototype.isVisible=function(){return!!gDesigner.getApplicationManager().isEditingEnabled()},g.prototype.getOrientation=function(){return p.Orientation.Left},g.prototype.getMinimumWidth=function(){return 250},g.prototype.getDefaultWidth=function(){return 250},g.prototype.isResizeable=function(){return!0},g.prototype.relayout=function(){this._symbolsPanel.gSymbolsPanel("relayout")},g.prototype.init=function(e){u.prototype.init.call(this,e),this._htmlElement=e,this._symbolsToolbar=$("<div></div>").addClass("toolbar symbols-toolbar").append($("<label></label>").css("flex-grow","1").text(i.GLocale.get(new i.GLocaleKey("GSymbolsSidebar","text.symbols")))).on("dragover",(function(e){e.preventDefault(),e.stopPropagation()})).on("dragenter",(function(e){e.preventDefault(),e.stopPropagation()})).on("drop",function(e){e.preventDefault(),e.stopPropagation()}.bind(this)).appendTo(e),$("<button></button>").attr("data-title",i.GLocale.get(new i.GLocaleKey("GSymbolsSidebar","action.delete-symbol"))).on("click",()=>this._deleteSymbol()).append($("<span></span>").addClass("gravit-icon-trash")).append($("<span></span>").addClass("gravit-icon-touch-trash")).appendTo(this._symbolsToolbar).gRichTooltip(r.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GSymbolsSidebar","text.delete-symbol-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GSymbolsSidebar","text.delete-symbol-tooltip-description")),learnMore:"https://documentation.corelvector.com/organizing-your-designs/symbols/#symbols-panel"})),this._newSymbolButton=$("<button></button>").attr("data-title",i.GLocale.get(new i.GLocaleKey("GSymbolsSidebar","action.create-symbol"))).on("click",function(){gDesigner.stats("symbols_new_symbol"),this._symbolsPanel.gSymbolsPanel("newSymbolClick")&&($(this._symbolsToolbar).gAccordion("toggleOpen",!0),$(this._symbolsToolbar).gAccordion("init",$(this._symbolsPanel)))}.bind(this)).append($("<span></span>").addClass("gravit-icon-plus")).append($("<span></span>").addClass("gravit-icon-touch-plus")).appendTo(this._symbolsToolbar).addClass("g-disabled").gRichTooltip(r.GRichTooltipConfig.from({title:i.GLocale.get(new i.GLocaleKey("GSymbolsSidebar","text.create-symbol-tooltip-title")),description:i.GLocale.get(new i.GLocaleKey("GSymbolsSidebar","text.create-symbol-tooltip-description")),learnMore:"https://documentation.corelvector.com/organizing-your-designs/symbols/#symbols-panel"}));var t=this,n=$("<div></div>").addClass("symbols-container").appendTo(e).on("click",(function(e){gDesigner.stats("symbols_click_symbol"),(e.target===this||$(e.target).hasClass("g-symbols-panel"))&&t._symbolsPanel.gSymbolsPanel("isSelected")&&t._document.getEditor().updateSelection(!1,t._document.getEditor().getSelection().slice().filter((function(e){return!(e instanceof i.GSymbol&&e.isMaster())})))})).on("scroll",(function(){if($("body").hasClass("g-touch")){var e=$(this)[0].scrollTop,t="light"==gDesigner.getSetting("theme")?"DFDFDF":"2E2E2E";e=e>20?20:e,$(".symbols-toolbar").css({"box-shadow":"0 0 25px ".concat(e,"px #").concat(t)})}}));this._symbolsPanel=$("<div></div>").addClass("symbols").on("dragover",(function(e){e.preventDefault(),e.stopPropagation()})).on("dragenter",(function(e){e.preventDefault(),e.stopPropagation()})).on("drop",function(e){e.preventDefault(),e.stopPropagation()}.bind(this)).appendTo(n),this._symbolsPanel.gSymbolsPanel({moveCallback:this._moveSymbolCallback.bind(this),clickCallback:this._clickSymbolCallback.bind(this),dblClickCallback:this._dblClickSymbolCallback.bind(this),startDraggingCallback:this._startSymbolDraggingCallback.bind(this)}),gDesigner.addEventListener(l,this._documentEvent,this)},g.prototype._documentEvent=function(e){if(e.type===l.Type.Activated)this._document=e.document,this._symbolsPanel.gSymbolsPanel("scene",this._document.getScene()),this.trigger(u.UPDATE_EVENT),this._document.getEditor().addEventListener(a.GEditor.SelectionChangedEvent,this._selectionUpdate,this);else if(e.type===l.Type.Deactivated){this._symbolsPanel.gSymbolsPanel("scene",null),this._document.getEditor().removeEventListener(a.GEditor.SelectionChangedEvent,this._selectionUpdate,this),this._document=null,this.trigger(u.UPDATE_EVENT)}},g.prototype._deleteSymbol=function(){gDesigner.stats("symbols_delete_symbol");this._document.getEditor();var e=this._document.getScene(),t=(e.getActivePage(),this._symbolsPanel);t.gSymbolsPanel("isSelected")&&a.GEditor.tryRunTransaction(e,(function(){t.gSymbolsPanel("removeSelected")}),i.GLocale.get(new i.GLocaleKey("GSymbolsSidebar","action.delete-symbol")))},g.prototype._moveSymbolCallback=function(e,t,n){n&&e&&n.length},g.prototype._startSymbolDraggingCallback=function(e){return console.log("start dragging cb"),null},g.prototype._clickSymbolCallback=function(e){if(e&&e.isMaster()){var t=this._document.getEditor();if(t){var n=a.GEditor.getElementPage(e);n&&this._document.getScene().setActivePage(n),t.clearSelection(),t.updateSelection(!1,[e]),t.hasSelection()&&gDesigner.executeAction(d.ID,void 0,void 0,!0)}}},g.prototype._dblClickSymbolCallback=function(e){if(e&&e.isMaster()){var t=this._document.getEditor(),n=this._document.getScene(),o=(n.getActivePage(),[e]);n.visitLinks(e,(function(e){e instanceof i.GSymbol&&o.push(e)})),t&&(t.clearSelection(),t.updateSelection(!1,o))}},g.prototype._selectionUpdate=function(){var e=gDesigner.canExecuteAction(c.ID),t=this._newSymbolButton.hasClass("g-disabled");e&&t?this._newSymbolButton.removeClass("g-disabled"):e||t||this._newSymbolButton.addClass("g-disabled")},g.prototype.getTouchTools=function(){return[new s.default({id:"symbols",sidebar:this.getId(),icon:"gravit-icon-touch-newSymbols",panel:".symbols-container",toolbar:".symbols-toolbar"})]},g.prototype.toString=function(){return"[Object GSymbolsSidebar]"},e.exports=g},function(e,t,n){"use strict";var o=n(14);n(3);var i=n(1),a=o(n(326)),r=n(785),s=n(379),l=n(1637),c=n(111);const d=n(277);function u(){r.call(this)}i.GObject.inherit(u,r),u.ID="library",u.TITLE=new i.GLocaleKey("GLibrarySidebar","title"),u.prototype._initialized=!1,u.prototype._libraryPanel=null,u.prototype._libraryPanelInstance=null,u.prototype._htmlElement=null,u.prototype.getId=function(){return u.ID},u.prototype.getTitle=function(){return u.TITLE},u.prototype.isEnabled=function(){return c.isOnline()},u.prototype.isVisible=function(){return!!gDesigner.getApplicationManager().isEditingEnabled()},u.prototype.getOrientation=function(){return s.Orientation.Left},u.prototype.getMinimumWidth=function(){return 250},u.prototype.getDefaultWidth=function(){return 250},u.prototype.isResizeable=function(){return!0},u.prototype.resize=function(){this._libraryPanelInstance.resize()},u.prototype.relayout=function(){this._libraryPanel&&!this._libraryPanel.hasClass("unavailable")||!this.isEnabled()||this._addLibraryPanel(this._htmlElement)},u.prototype.init=function(e){r.prototype.init.call(this,e),this._htmlElement=e,this._addLibraryPanel(e),$(document).on("networkAvailable",function(){this.relayout();var e=gDesigner.getLeftSidebars(),t=e.getActiveSidebar();t===this.getId()&&e.setSidebarEnabled(t,this.isEnabled())}.bind(this)),gDesigner.addEventListener(d,this._networkAvailabilityChangedEvent,this)},u.prototype._networkAvailabilityChangedEvent=function(e){this._libraryPanel.toggleClass("offline",!e.connected),this._initialized||this._addLibraryPanel(this._htmlElement)},u.prototype._addLibraryPanel=function(e){this._libraryPanel||($("<div></div>").addClass("toolbar library-toolbar g-touch-only").append($("<label/>").text(i.GLocale.get(new i.GLocaleKey("GLibrarySidebar","title")))).appendTo(e),this._libraryPanel=$("<div/>").append($("<div/>").addClass("overlay").append($("<div/>").addClass("box").append($("<span/>").text(i.GLocale.get(new i.GLocaleKey("GOfflineDialog","title.unavailable-feature")))))).addClass("library-container").css("overflow","auto").appendTo(e)),this._libraryPanel.toggleClass("offline",gDesigner.isOffline()),c.isOnline()?(this._libraryPanel.hasClass("unavailable")&&(this._libraryPanel.removeClass("unavailable"),this._libraryPanel.empty()),gDesigner.isOffline()||(this._libraryPanelInstance=new l(this._libraryPanel),this._initialized=!0)):(this._libraryPanel.addClass("unavailable"),$("<span/>").addClass("span-unavailable").text(i.GLocale.get(new i.GLocaleKey("GLibrarySidebar","text.connect"))).appendTo(this._libraryPanel))},u.prototype.getTouchTools=function(){return[new a.default({id:"libraries",sidebar:this.getId(),icon:"gravit-icon-touch-libraries-panel",panel:".library-container"})]},u.prototype.toString=function(){return"[Object GLibrarySidebar]"},e.exports=u},function(e,t,n){"use strict";var o=n(14);n(17),n(158),n(26),n(51),n(7),n(18),n(29),n(124),n(84),n(28),n(22),n(117),n(106);var i=n(1177),a=n(1),r=n(13),s=n(9),l=o(n(1638)),c=n(205),d=n(788),{debounce:u,stringToBase64String:p}=n(34);const g=l.default.getElements();e.exports=class{constructor(e){this._parent=e,this._CURRENT_SKIP_COUNT=0,this._IMAGE_PAGE_COUNT=1,this._CURRENT_CATEGORY=null,this._CURRENT_ROOT_CATEGORY=null,this._IMAGE_ASSET_DRAINED=!1,this._LOADING=!1,this._wrapperWidth=250,this._debouncedResizeHandler=u(function(){var e=Array.from(this._parent.find(".assets-wrapper")).filter(e=>$(e).children().length),t=$(e).css("width")?parseInt($(e).css("width").split("px")[0]):250;Math.abs(t-this._wrapperWidth)>50&&(this._wrapperWidth=t,this._initMasonryLayoutColumns($(e),null,null,!0))}.bind(this),200);var t=$("<div/>").addClass("g-library-panel").appendTo(e);this._libraryPanel=t,this._createSearch(t),this._initElements(t)}_updateUI(e,t,n,o,i){var r=this,s=i?[]:t.children||[],l=e.find(".images");if(s.length>0&&0===e.find("select").length){var c=$("<select/>").addClass("selector").on("change",(function(){var n,o=$(this).find("option:selected").data("category");r._CURRENT_SKIP_COUNT=0,r._IMAGE_PAGE_COUNT=1,e.find(".asset-container").remove(),o?(r._CURRENT_CATEGORY=o,(n=r._CURRENT_ROOT_CATEGORY&&(r._CURRENT_ROOT_CATEGORY.name||r._CURRENT_ROOT_CATEGORY.path)||r._CURRENT_ROOT_CATEGORY||"")&&(n+="-"),n+=r._CURRENT_CATEGORY&&(r._CURRENT_CATEGORY.name||r._CURRENT_CATEGORY.path)||r._CURRENT_CATEGORY||""):(r._CURRENT_CATEGORY=t,r._CURRENT_ROOT_CATEGORY=t,(n=r._CURRENT_CATEGORY&&(r._CURRENT_CATEGORY.name||r._CURRENT_CATEGORY.path)||r._CURRENT_CATEGORY||"")&&(n+="-"),n+="All"),gDesigner.stats("librarypanel_change_category",n),r._loadAssets(e,r._CURRENT_CATEGORY,r._updateUI.bind(r))}));"element.image"===t.path&&c.addClass("full-width");var d=e.parent();d.find(".selector-container").remove();var u=d.find(".indicator");$("<div/>").addClass("selector-container").append(c).insertAfter(u),$("<option/>").text(a.GLocale.get(new a.GLocaleKey("GCommonNames","element.all"))).appendTo(c);for(var p=0;p<s.length;++p){var g="element.child.name."+s[p].name.toLowerCase().trim().replace(/\s+/g,"-");$("<option/>").text(a.GLocale.get(new a.GLocaleKey("GCommonNames",g),s[p].name)).data("category",s[p]).appendTo(c)}}!function(t){var n=[];i||e.find(".asset").remove();for(var o=0;o<t.length;++o){let i=t[o],l=i.path&&i.path.startsWith("element.image");var a=r._getPreviewURI(i);if(l)n.push(i);else{var s=$("<div/>").addClass("asset-container").attr("data-title",i.name||""),c=$("<img/>").on("dragstart",(function(){return!1})).attr("draggable",!1).attr("src",a).on("mousedown",(function(e){r._onItemDragStartHandler(i,e)})).addClass("asset");s.append(c),e.append(s)}}if(n){var d=l.length?l:e;r._initMasonryLayoutColumns(d,n,i)}}(n)}_initMasonryLayoutColumns(e,t,n,o){if(o&&e&&(t=e.find(".column").children()).unwrap(),0===t.length)return;this._wrapperWidth=e.css("width")?parseInt(e.css("width").split("px")[0]):250;var i,a=[],r=2,l=null;if(r=Math.max(Math.ceil(this._wrapperWidth/200),r),i=this._wrapperWidth/r-4*(r-1),l=r>2?i/this._wrapperWidth*100+"%":"calc(50% - 4px)",n)a=e.find(".column").toArray();else for(var c=0;c<r;c++){var d=$("<div/>").addClass("column").css("width",l);c>0&&d.css("margin-left","4px"),a.push(d)}const u=a.map(this._getChildrenHeight.bind(this)),p=[];for(var g=0;g<t.length;g++){var h;if(o)h=t[g];else{let e=t[g];var f=this._getPreviewURI(e),m=$("<img/>").addClass("asset").attr("draggable",!1).attr("src",f).on("dragstart",(function(){return!1}));gDesigner.isTouchDevice()?m.on("click",()=>{this._addAsset(e)}):m.on("mousedown",t=>{this._onItemDragStartHandler(e,t)}),(h=$("<div/>").addClass("asset-container image-asset").css("margin-bottom","4px").data("asset",e).append($("<span/>").text(e.user.name).attr("draggable",!1).on("click",(function(t){t.preventDefault();var n=new URL(e.user.profile);n.searchParams.append("utm_source",encodeURIComponent(s.DESIGNER.TITLE)),n.searchParams.append("utm_medium","referral"),gContainer.openExternalLink(t,n)})))).append(m)}const e=this._getSmallestColumnIndex(u),n=$(h).data("asset"),i=this._getThumbnailSize(n).getHeight();u[e]=(u[e]||0)+i;const a=p[e]||[];a.push(h),p[e]=a}a.forEach((e,t)=>{$(e).append(p[t])}),n||e.append(a)}_addAsset(e,t){var n=this;!async function(){if(e.content)t&&(t.center=!0),gDesigner.getActiveDocument().placeOrImport(new Blob([e.content],{type:e.type||"image/svg+xml"}),t,!1,!0);else if(e.path.startsWith("element.ui."))try{var o=await fetch(e.url).then(e=>{if(!e.ok)throw new Error;return e.text()}),l=$.parseXML(o);l&&"svg"===l.documentElement.nodeName&&gDesigner.getActiveDocument().placeOrImport(new Blob([o],{type:"image/svg+xml"}),t,!1,!0)}catch(e){}else if(e.path.startsWith("element.image.")){var u=e.id;try{var p=r.GPlatform.modifiers.optionKey,g=await s.gApi.getUnsplashPhotoUrl({id:u,size:"regular"}),h=await fetch(g).then(e=>{if(!e.ok)throw new Error;return e.blob()});i.GBitmapImport.import(h,(e,o,i,r)=>{if(e)new c(a.GLocale.get(new a.GLocaleKey("GDocument","text.image-too-big"))).open();else{var s=gDesigner.getActiveDocument(),l=s.getScene(),u=s.getEditor(),g=l.getActivePage(),h=u.hasSelection()&&u.getSelection()[0],f=a.GLocale.get(new a.GLocaleKey("GImage","name.unsplash")),m=a.GLocale.get(new a.GLocaleKey("GEditor","action.insert-image"));u.beginTransaction();try{if(!h||h instanceof a.GImage){let e=new a.GImage;e.setProperties(["name","iw","ih","url"],[f,i,r,o]),n._transformNode(e,t),g.appendChild(e),gDesigner.stats("librarypanel_download_image")}else if(p){var y=u.getSelection()[0].getTransform(),v=y&&y.getTranslation();let e=new a.GImage;e.setProperties(["name","iw","ih","url"],[f,i,r,o]),!t&&v&&(t={x:v.getX(),y:v.getY()}),n._transformNode(e,t),g.appendChild(e),u.updateSelection(!0,[e]),gDesigner.executeAction(d.ID,void 0,void 0,!0),gDesigner.stats("librarypanel_download_image","clip")}else{var _=u.getSelection()[0].getPaintLayers();if(_){var b=new a.GTexturePattern(o);b.setSizeMode(a.GTexturePattern.SizeMode.Cover),b.setScene(l);var w=new a.GStylable.FillPaintLayer(b);_.appendChild(w)}m=a.GLocale.get(new a.GLocaleKey("GFillPaintLayerProperties","action.change-properties")),gDesigner.stats("librarypanel_download_image","fill")}}finally{u.commitTransaction(m)}}})}catch(e){}}else{var f=e.url,m=gDesigner.getActiveDocument(),y=m.getEditor(),v=m.getScene().getActivePage(),_=null,b=null,w=v.getGeometryBBox(),C=w&&v.isFixedSized()?w.getWidth():800,x=w&&v.isFixedSized()?w.getHeight():800;if(e.path.startsWith("element.line.tile"))b=(_=.4*C)/10;else{_=e.width,b=e.height;var S=_/b;if((_=C/3)>300&&(_=300),b=_/S,_=Math.round(_),(b=Math.round(b))>x){var E=b;(b=x/3)>300&&(b=300),_=_/E*b,_=Math.round(_),b=Math.round(b)}}var A=new XMLHttpRequest;A.open("GET",f),A.onload=()=>{i.GSVGImport.import(A.responseText,{baseWidth:_,baseHeight:b,forceBaseSize:!0},gDesigner.getActiveDocument().getScene()._workspace.getFontManager(),(o,i)=>{if(i){y.beginTransaction();try{if(e.path.startsWith("element.line.tile")){var r,s,l=new a.GTexturePattern(i,a.GTexturePattern.RepeatMode.Horizontal);l.setPosition(a.GTexturePattern.PositionMode.Center),t?(r=t.x-_/2,s=t.y-b/2):(r=.3*C,s=(x-b)/2);var c=new a.GRectangle;c.setProperty("trf",new a.GTransform(_/2,0,0,b/2,r+_/2,s+b/2)),c.setProperty("isLine",!0,!0,!1),v.appendChild(c),c.getPaintLayers().insertChild(new a.GStylable.FillPaintLayer(l)),gDesigner.getActiveDocument().getEditor().updateSelection(!1,[c])}else n._transformNode(i,t),m.insertElement(i,!t,!0,!1)}finally{y.commitTransaction("Add Element")}}})},A.send()}}()}_transformNode(e,t){if(t&&e.hasMixin(a.GElement.Transform)){var n=e.getGeometryBBox(),o=n&&n.getX()?n.getX():0,i=n&&n.getY()?n.getY():0;n&&(o+=n.getWidth()/2,i+=n.getHeight()/2),e.transform(new a.GTransform(1,0,0,1,t.x-o,t.y-i),!0)}}_createScrollEvent(){$(".library-container").unbind("scroll"),$($(".library-container")).scroll(function(e){var t=$(e.currentTarget);t.scrollTop()>50?0===$(t).find(".library-scroll-top").length&&$("<div/>").addClass("library-scroll-top").append($("<div/>").addClass("container").append($("<span/>").text(a.GLocale.get(new a.GLocaleKey("GCommonNames","text.back-to-top")))).append($("<span/>").addClass("gravit-icon-back-to-top"))).on("click",(function(){gDesigner.stats("librarypanel_click_backtotop"),$(".library-container").animate({scrollTop:0},"slow")})).appendTo(t):$(t).find(".library-scroll-top").remove()}.bind(this))}_createSearch(e){var t=$("<div/>"),n=$("<div/>"),o=this,i=function(e){o._libraryPanel.find(".category-row").find(".category").removeClass("active"),o._libraryPanel.find(".assets").css("display","none"),o._CURRENT_SKIP_COUNT=0,o._IMAGE_PAGE_COUNT=1,o._CURRENT_CATEGORY=e,o._CURRENT_ROOT_CATEGORY=null,t.find("span").toggleClass("gravit-icon-search",!e||!e.trim()),t.find("span").toggleClass("gravit-icon-close",!!e&&!!e.trim());var i=n.find(".assets-wrapper").first();i.empty(),i.append($("<div></div>").addClass("assets-wrapper images")),e&&e.trim()&&(n.css("display","block"),o._createScrollEvent(null,n,!0),o._loadAssets(i,e,o._updateUI.bind(o),!0))};t.addClass("library-search").append($("<input/>").attr("type","text").addClass("g-input").attr("placeholder",a.GLocale.get(new a.GLocaleKey("GCommonNames","element.search"))+"...").on("keypress",(function(e){13===e.keyCode&&i($(this).val())}))).append($("<span/>").addClass("gravit-icon-search").on("click",(function(){var e=$(this);gDesigner.stats("librarypanel_click_search",e.prev("input").val()),$(n).is(":visible")?(n.find(".assets-wrapper").empty(),n.css("display","none"),e.prev("input").val(""),e.removeClass("gravit-icon-close"),e.addClass("gravit-icon-search")):i(e.prev("input").val())}))).appendTo(e),n.addClass("assets").css("display","none").append($("<div></div>").addClass("assets-content").append([$("<div/>").addClass("indicator"),$("<div/>").addClass("assets-wrapper").append($("<div/>").addClass("assets-wrapper images"))])).append(this._loadMoreButton(n,!0)).appendTo(e)}_loadMoreButton(e,t){return $("<div/>").addClass("button-wrapper").addClass("hidden").append($("<button/>").addClass("load-more").text(a.GLocale.get(new a.GLocaleKey("GCommonNames","text.library-load-more"))).on("click",()=>{this._loadAssets(e.find(".assets-wrapper").first(),this._CURRENT_CATEGORY,this._updateUI.bind(this),t,!0),this._toggleShowMoreButton(!0,!0)}))}_initElements(e){for(var t=this,n=0;n<g.length;++n){let r=g[n];if(n>0&&n%3==0){let t=$("<div/>").addClass("assets").css("display","none").append($("<div/>").addClass("assets-content").append([$("<div/>").addClass("indicator"),$("<div/>").addClass("assets-wrapper")])).appendTo(e);t.append(this._loadMoreButton(t,!1))}var o=this._libraryPanel.find(".category-row:last-child");0!==o.length&&3!==o.children().length||(o=$("<div/>").addClass("category-row")).appendTo(e);let s=$("<div/>").addClass("category").on("click",(function(){var e=r.name||r.path||r||"";e&&(e+="-"),e+="All",gDesigner.stats("librarypanel_search_category",e);var n=$(this),o=n.closest(".category-row"),i=o.children().index(this),a=o.next(".assets"),l=n.hasClass("category")&&n.hasClass("active");o.closest(".g-library-panel").find(".category").removeClass("active"),n.addClass("active");var c=o.closest(".g-library-panel").find(".assets").not(o.next(".assets"));c.removeClass("first second third"),$(".library-search").find("span").removeClass("gravit-icon-close"),$(".library-search").find("span").addClass("gravit-icon-search"),c.css("display","none");var d=a.find(".assets-wrapper");"auto"!==d.css("height")&&d.css("height","auto"),a.find(".selector-container").remove(),d.empty(),c.find(".assets-wrapper").empty();var u=function(e){let t=a.hasClass(e);a.removeClass("first second third"),t?(a.css("display","none"),n.removeClass("active")):(a.addClass(e),a.css("display",""),n.addClass("active"))};u(0===i?"first":1===i?"second":"third");var p=a.find(".assets-content");d=a.find(".assets-wrapper"),p.removeClass(),p.addClass("assets-content"),p.addClass("asset-"+r.path.slice(8).replace(/\./g,"-")),t._createScrollEvent(s,a),t._CURRENT_SKIP_COUNT=0,t._IMAGE_PAGE_COUNT=1,t._CURRENT_CATEGORY=r,t._CURRENT_ROOT_CATEGORY=r,l||t._loadAssets(d,r,t._updateUI)})).appendTo(o);var i=$("<div/>").addClass("content").appendTo(s);$("<img/>").addClass("icon").attr("src",r.url).appendTo(i),$("<span/>").addClass("title").text(a.GLocale.get(new a.GLocaleKey("GCommonNames",r.path.replace(/\.$/,"")),r.name)).appendTo(i)}let r=$("<div/>").addClass("assets").css("display","none").append($("<div/>").addClass("assets-content").append([$("<div/>").addClass("indicator"),$("<div/>").addClass("assets-wrapper")])).appendTo(e);r.append(this._loadMoreButton(r,!1))}_loadAssets(e,t,n,o,i){this._toggleShowMoreButton(!1,!1),this._toggleLoading(!0),this._doLoadAssets(e,t,n,o,i)}async _doLoadAssets(e,t,n,o,i){let a=[],r=0,c=0;try{if(o){let e=[];if(l.default.isUnsplashIntegrationEnabled()){if(!this._IMAGE_ASSET_DRAINED)try{e=await s.gApi.searchUnsplashPhotos({query:t,page:this._IMAGE_PAGE_COUNT})}catch(e){console.warn("Unsplash search failed",e)}c=(e||[]).length,c||(this._IMAGE_ASSET_DRAINED=!0)}a=[],-1!==this._CURRENT_SKIP_COUNT&&(a=await s.gApi.listMarket({q:t,path:"element.",limit:"90",skip:this._CURRENT_SKIP_COUNT+"",sort:"name"})),r=(a||[]).length,a=a.concat(e)}else if(t.path&&t.path.startsWith("element.image"))l.default.isUnsplashIntegrationEnabled()&&(a=t.tag?await s.gApi.searchUnsplashPhotos({query:t.tag,page:this._IMAGE_PAGE_COUNT}):await s.gApi.getUnsplashPhotos({page:this._IMAGE_PAGE_COUNT}),c=(a||[]).length);else{var d=t.path;a=await s.gApi.listMarket({path:"element.line"===d?"element.line.tile":d,tag:t.tag,limit:"90",skip:this._CURRENT_SKIP_COUNT+"",sort:"name"}),r=(a||[]).length}r<90&&0===c?this._toggleShowMoreButton(!1,!1):this._toggleShowMoreButton(!0,!1),a.length<90?(this._CURRENT_SKIP_COUNT=-1,this._IMAGE_PAGE_COUNT++):(this._CURRENT_SKIP_COUNT+=90,this._IMAGE_PAGE_COUNT++)}catch(e){}this._toggleLoading(!1),n.call(this,e,t,a,o,i)}_toggleLoading(e){e?this._libraryPanel.find(".assets").addClass("loading"):this._libraryPanel.find(".assets").removeClass("loading")}_toggleShowMoreButton(e,t){let n=this._libraryPanel.find(".assets").find(".button-wrapper");n.find(".load-more")[t?"addClass":"removeClass"]("hidden"),n[t?"addClass":"removeClass"]("loading"),n[e?"removeClass":"addClass"]("hidden")}_getPreviewURI(e){return e.content&&!e.url_t?"data:".concat(e.type||"image/svg+xml",";base64,").concat(p(e.content)):e.url_t||e.url||e.image.thumb}_onItemDragStartHandler(e,t,n){var o;this._clickCheckTime=Date.now(),o=n?n.get(0).getBoundingClientRect():t.target.getBoundingClientRect();var i=e.width||o.width||50,a=e.height||o.height||50,r=gDesigner.getActiveDocument().getScene().getActivePage();if(e.path.startsWith("element.line.tile"))a=(i=r.getGeometryBBox()&&r.isFixedSized()?.4*r.getGeometryBBox().getWidth():320)/10;else{var s=r.getGeometryBBox(),l=s&&r.isFixedSized()?s.getWidth():800,c=s&&r.isFixedSized()?s.getHeight():800;if(!e.path.startsWith("element.ui")&&!e.path.startsWith("element.icons")){var d=i/a;if((i=l/3)>300&&(i=300),a=i/d,i=Math.round(i),(a=Math.round(a))>c){var u=a;(a=c/3)>300&&(a=300),i=i/e.height*u,i=Math.round(i),a=Math.round(a)}}a*=gDesigner.getWindows().getActiveWindow().getView().getZoom(),i*=gDesigner.getWindows().getActiveWindow().getView().getZoom()}if(!this._dragging){var p=o.left+o.width/2,g=o.top+o.height/2;this._dragOffset={x:p-t.clientX,y:g-t.clientY},this._dragging=!0,this._currentElement=t.target,this._currentItem=e,this._previewSize={w:i,h:a},e.path.startsWith("element.line.tile")?this.dragPreview=$("<div/>").css("background",'url("'+e.url+'")').css("background-repeat","repeat-x").css("background-position",Math.round(a/2)+"px 0px").css("position","absolute").css("height",a/2+"px").css("width",i/2+"px").css("display","none").appendTo("body"):(e.content&&!e.url?this.dragPreview=$(e.content):this.dragPreview=$("<img/>").attr("src",e.url||e.image&&e.image.thumb),this.dragPreview.css("position","absolute").css("height",a+"px").css("width",i+"px").css("display","none").on("dragstart",(function(){return!1})).attr("draggable",!1).appendTo("body"));var h=t.clientX,f=t.clientY;$(this.dragPreview).css("left",h+"px"),$(this.dragPreview).css("top",f+"px"),this._itemDragListener=this._onItemDrag.bind(this),this._itemDragEndListener=this._onItemDragEndHandler.bind(this),document.addEventListener("mousemove",this._itemDragListener),document.addEventListener("touchmove",this._itemDragListener),document.addEventListener("mouseup",this._itemDragEndListener),document.addEventListener("touchend",this._itemDragEndListener)}}_onItemDragEndHandler(e){if($(this.dragPreview).remove(),Date.now()-this._clickCheckTime<=200||!this._dragMoved)return this._dragMoved=!1,document.removeEventListener("mousemove",this._itemDragListener),document.removeEventListener("touchmove",this._itemDragListener),document.removeEventListener("mouseup",this._itemDragEndListener),document.removeEventListener("touchend",this._itemDragEndListener),this._dragging=!1,this._currentElement.style.visibility="visible",void this._addAsset(this._currentItem);if(this._dragMoved=!1,this._dragging){var t=gDesigner.getActiveDocument();document.removeEventListener("mousemove",this._itemDragListener),document.removeEventListener("touchmove",this._itemDragListener),document.removeEventListener("mouseup",this._itemDragEndListener),document.removeEventListener("touchend",this._itemDragEndListener);var n=e.clientX,o=e.clientY;if(gDesigner.positionIsOnCanvas(n,o)){var i=t.getActiveWindow().getView(),a={};Object.assign(a,e),a.clientX=n,a.clientY=o,a.offsetX=e.offsetX+(this._dragOffset&&this._dragOffset.x),a.offsetY=e.offsetY+(this._dragOffset&&this._dragOffset.y),a.pageX=e.pageX+(this._dragOffset&&this._dragOffset.x),a.pageY=e.pageY+(this._dragOffset&&this._dragOffset.y);var r=i._convertClientPositionFromMousePosition(a),s=i.getViewTransform(t.scene).mapPoint(r);r={x:s._x,y:s._y},this._addAsset(this._currentItem,r)}this._dragging=!1,this._currentElement.style.visibility="visible"}}_onItemDrag(e){this._dragMoved=!0,this._currentElement.style.visibility="hidden";var t=e.clientX+(this._dragOffset?this._dragOffset.x:0),n=e.clientY+(this._dragOffset?this._dragOffset.y:0);t-=this._previewSize.w/2,n-=this._previewSize.h/2,$(this.dragPreview).css("left",t+"px"),$(this.dragPreview).css("top",n+"px"),$(this.dragPreview).css("display","")}resize(){this._debouncedResizeHandler()}_getSmallestColumnIndex(e){return e.indexOf(Math.min.apply(null,e))||0}_getThumbnailSize(e){const t=200/e.image.width,n=parseInt(e.image.height*t)+4;return new a.GRect(0,0,200,n)}_getChildrenHeight(e){return $(e).children().toArray().reduce((e,t)=>e+$(t).height(),0)}}},function(e,t,n){"use strict";var o=n(9);class i{static getElements(){return i.isUnsplashIntegrationEnabled()?o.ELEMENTS:o.ELEMENTS.filter(e=>"element.image"!==e.path)}static isUnsplashIntegrationEnabled(){return o.ENABLE_UNSPLASH_INTEGRATION}}e.exports=i},function(e,t,n){"use strict";n(7),n(18),n(3),n(29);var o=n(1);const i=n(588),a=n(378),r=n(1164),s=n(77),l=n(37),{SOFTWARE_UPDATE:c,DateAPI:d}=n(9);function u(){}o.GObject.inherit(u,i),u.ID="software-update-panel",u.prototype._mustBeOpened=null,u.prototype.init=function(e){this._htmlElement=e,this._htmlElement.addClass("software-update-panel"),$("<div></div>").addClass("g-btn-close").append($("<span></span>").addClass("gravit-icon-close")).on("click",()=>this._hide()).appendTo(this._htmlElement),this._updatePanelState(!1)},u.prototype._hide=function(){this._updatePanelState(!1)},u.prototype._changePanelVisibility=function(e){e?this._htmlElement.removeClass("g-hide"):this._htmlElement.addClass("g-hide")},u.prototype._updatePanelState=function(e){e!==this._mustBeOpened&&(this._changePanelVisibility(e),this._mustBeOpened=e,this.trigger(a.UPDATE_EVENT))},u.prototype._updateContent=function(e){this._htmlElement.find(".content").remove(),this._htmlElement.append($("<div></div>").addClass("content").append(e))},u.prototype.activate=function(){this._addEventListeners()},u.prototype.deactivate=function(){this._removeEventListeners()},u.prototype._addEventListeners=function(){gDesigner.addEventListener(r.AfterUpdate,this._handleAfterUpdate,this),gDesigner.addEventListener(r.DownloadComplete,this._handleDownloadComplete,this),gDesigner.addEventListener(r.Downloading,this._handleDownloadInProgress,this),gDesigner.addEventListener(r.UpdateAvailable,this._handleUpdateAvailable,this),gDesigner.addEventListener(r.UpdateError,this._handleUpdateError,this),gDesigner.addEventListener(r.UpdateNotAvailable,this._handleUpdateNotAvailable,this)},u.prototype._handleAfterUpdate=function(e){if(!this._shouldShowMessages(e))return;const t=e.currentVersion,n=o.GLocale.get(new o.GLocaleKey("GSoftwareUpdatePanel","text.after-update")).replace("%currentVersion",t);this._updateContent($("<div></div>").addClass("message").addClass("featured").append(n).append(c.SHOW_CHANGE_LOG?$("<a></a>").text(o.GLocale.get(new o.GLocaleKey("GSoftwareUpdatePanel","text.see-release-notes"))).click(e=>{gContainer.openExternalLink(e,gDesigner.getSoftwareUpdateManager().getReleaseNotesLink())}):"")),this._updatePanelState(!0)},u.prototype._handleUpdateNotAvailable=function(e){if(!this._shouldShowMessages(e))return;const t=e.currentVersion,n=o.GLocale.get(new o.GLocaleKey("GSoftwareUpdatePanel","text.update-not-available")).replace("%currentVersion",t);this._updateContent($("<div></div>").addClass("message").append(n)),this._updatePanelState(!0)},u.prototype._handleDownloadComplete=function(e){if(!this._shouldShowMessages(e))return;const t=e.newVersion,n=e.forceUpdate,i=o.GLocale.get(new o.GLocaleKey("GSoftwareUpdatePanel","text.download-ready")).replace("%newVersion",t);var a=!1;this._updateContent($("<div></div>").addClass("message").addClass("featured").html(i).click(async()=>{a||await gContainer.canUnload(gDesigner.hasModifiedDocuments(),gDesigner.hasSynchronizingDocuments())&&(a=!0,gDesigner.getSoftwareUpdateManager().installUpdate(),this._updateContent($("<div></div>").addClass("message").addClass("featured").append($("<span/>").addClass("gravit-icon-rotate-right-flat").addClass("icon").addClass("spin")).append(o.GLocale.get(new o.GLocaleKey("GSoftwareUpdatePanel","text.updating")))))})),this._updatePanelState(!0),n&&this._createForceUpdateMessageDialog()},u.prototype._handleDownloadInProgress=function(e){if(!this._shouldShowMessages(e))return;const t=e.percent,n=e.newVersion;var i=this._htmlElement.find(".progress-content");const a=o.GLocale.get(new o.GLocaleKey("GSoftwareUpdatePanel","text.download-progress")).replace("%newVersion",n);i.length||(this._updateContent($("<div></div>").addClass("message").text(a).append($("<div></div>").addClass("progress-content").append($("<div></div>").addClass("progress-element").append($("<div></div>").addClass("progress-bar"))).append($("<div></div>").addClass("percent")))),i=this._htmlElement.find(".progress-content"));i.find(".progress-bar").css({width:"".concat(t,"%")}),i.find(".percent").text(t)},u.prototype._shouldShowMessages=function(e){return!e.isSilent},u.prototype._handleUpdateAvailable=function(e){if(!this._shouldShowMessages(e))return;const t=e.currentVersion,n=e.newVersion,i=e.forceUpdate;if(e.isSilent&&!i)return;!i||gContainer.getRuntime()!==s.Runtime.Browser&&gContainer.getRuntime()!==s.Runtime.PWA||this._createForceUpdateMessageDialog();const a=o.GLocale.get(new o.GLocaleKey("GSoftwareUpdatePanel","text.update-available")).replace("%newVersion",n).replace("%currentVersion",t),r=$("<span/>").addClass("gravit-icon-rotate-right-flat").addClass("icon");this._updateContent($("<div></div>").addClass("message").addClass("featured").append(r).append(a).append($("<a></a>").append(o.GLocale.get(new o.GLocaleKey("GSoftwareUpdatePanel","text.update-now"))).click(()=>{r.addClass("spin"),this._installAfterDocumentUnload()}))),this._updatePanelState(!0)},u.prototype._installAfterDocumentUnload=async function(){if(await gContainer.canUnload(gDesigner.hasModifiedDocuments(),gDesigner.hasSynchronizingDocuments()))switch(gContainer.getRuntime()){case s.Runtime.Browser:case s.Runtime.PWA:gDesigner.getSoftwareUpdateManager().installUpdate();break;case s.Runtime.Electron:gDesigner.getSoftwareUpdateManager().downloadUpdate()}else l.alert(o.GLocale.get(new o.GLocaleKey("GSoftwareUpdatePanel","text.dialog-unsaved-documents")))},u.prototype._createForceUpdateMessageDialog=function(){let e,t=!1;const n=d.minutesToMilliseconds(5),i=()=>{t||(t=!0,e.gDialog("close"),gDesigner.createCountdown(()=>{gDesigner.getSoftwareUpdateManager().installUpdate()},n))};e=$("<div></div>").gDialog({releaseOnClose:!0,className:"g-force-update-app-dialog",closeCallback:i}),$("<div></div>").addClass("g-btn-close").append($("<span></span>").addClass("gravit-icon-close")).on("click",()=>i()).appendTo(e),$("<div></div>").addClass("logo").appendTo(e),$("<div></div>").addClass("content").append($("<span></span>").addClass("title").html(o.GLocale.get(new o.GLocaleKey("GSoftwareUpdatePanel","text.force-new-version-available")).replace("%newVersion",gDesigner.getSoftwareUpdateManager().getNewVersion()))).append($("<span></span>").addClass("subtitle").html(o.GLocale.get(new o.GLocaleKey("GSoftwareUpdatePanel","text.force-message-avoid-losing-progress")))).append($("<span></span>").addClass("update-information").html(o.GLocale.get(new o.GLocaleKey("GSoftwareUpdatePanel","text.force-update-information-time")).replace("%minutes",5))).append($("<div></div>").addClass("buttons").append($("<button></button>").append($("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GSoftwareUpdatePanel","text.ok")))).on("click",()=>i()))).appendTo(e),e.gDialog("open",!1)},u.prototype._handleUpdateError=function(e){if(!this._shouldShowMessages(e))return;const t=o.GLocale.get(new o.GLocaleKey("GSoftwareUpdatePanel","text.update-error"));this._updateContent($("<div></div>").addClass("message").append(t)),this._updatePanelState(!0)},u.prototype._removeEventListeners=function(){gDesigner.removeEventListener(r.AfterUpdate,this._handleAfterUpdate),gDesigner.removeEventListener(r.DownloadComplete,this._handleDownloadComplete),gDesigner.removeEventListener(r.Downloading,this._handleDownloadInProgress),gDesigner.removeEventListener(r.UpdateAvailable,this._handleUpdateAvailable),gDesigner.removeEventListener(r.UpdateError,this._handleUpdateError),gDesigner.removeEventListener(r.UpdateNotAvailable,this._handleUpdateNotAvailable)},u.prototype.getTitle=function(){return o.GLocale.get(new o.GLocaleKey("GSoftwareUpdatePanel","title"))},u.prototype.isEnabled=function(){return!!this._mustBeOpened},u.prototype.toString=function(){return"[Object GSoftwareUpdatePanel]"},u.prototype.getId=function(){return u.ID},e.exports=u},function(e,t,n){"use strict";n(7),n(18),n(3),n(29);var o=n(1);const{DESIGNER:{TITLE:i}}=n(9),a=n(588),r=n(378),s=n(1297),l=n(71),c=n(839),d=n(1641);function u(){}o.GObject.inherit(u,a),u.ID="notification-panel",u.prototype._htmlElement=null,u.prototype._lastNotification=null,u.prototype._closeCallback=null,u.prototype.init=function(e){this._htmlElement=e,this._htmlElement.addClass("g-hide").addClass("g-notification-panel").on("click",(function(){$(this).toggleClass("bring-to-front",!0),gDesigner.sendSideBarAndAssistBarToBack()})),$("<div></div>").addClass("g-btn-close").append($("<span></span>").addClass("gravit-icon-close")).on("click",()=>{this._close(!0)}).appendTo(this._htmlElement),gDesigner.addEventListener(s,this._notificationEvent,this),gDesigner.addEventListener(l,this._documentEvent,this)},u.prototype.isEnabled=function(){return!this._htmlElement.hasClass("g-hide")},u.prototype._documentEvent=function(e){if(!e.document.isLockedByVersionHistory()&&this._lastNotification&&this._lastNotification.document)switch(e.type){case l.Type.Activated:{let t=e.document!==this._lastNotification.document;this._htmlElement.toggleClass("g-hide",t),this._htmlElement.toggleClass("bring-to-front",t),t&&gDesigner.sendSideBarAndAssistBarToBack();break}case l.Type.Removed:e.document===this._lastNotification.document&&this._close()}},u.prototype._notificationEvent=async function(e){if(this._lastNotification=e.notification,this._closeCallback=e.notification.closeCallback,this._htmlElement.removeClass("g-hide"),this._htmlElement.toggleClass("bring-to-front",!0),gDesigner.sendSideBarAndAssistBarToBack(),this._htmlElement.toggleClass("popup",!!e.notification.popup&&!e.notification.anonymous),e.notification.anonymous){const t=gDesigner.getActiveDocument(),n=t&&t.isDocumentFromTemplate()&&t.isShared(),a=e=>{e&&!e.isAnonymous()&&(this._lastNotification=null,this._htmlElement.addClass("g-hide"))};let r=n?o.GLocale.get(new o.GLocaleKey("GNotificationPanel","text.create-account-template")):o.GLocale.get(new o.GLocaleKey("GNotificationPanel","text.create-account"));const s=$("<div/>").addClass("anonymous").append($("<div/>").addClass("logo")).append($("<div/>").addClass("content").append($("<span/>").addClass("title").text(o.GLocale.get(new o.GLocaleKey("GNotificationPanel","text.title-welcome")).replace("%app",i))).append($("<span/>").text(e.notification.message).css("display",e.notification.message&&!n?"":"none")).append($("<span/>").html(r.replace("%signup",()=>$("<span/>").attr("id","signup-link").addClass("link").text(o.GLocale.get(new o.GLocaleKey("GNotificationPanel","text.sign-up"))).prop("outerHTML")).replace("%signin",()=>$("<span/>").attr("id","signin-link").addClass("link").text(o.GLocale.get(new o.GLocaleKey("GNotificationPanel","text.sign-in"))).prop("outerHTML")))).append($("<span/>").addClass("footer").html(o.GLocale.get(new o.GLocaleKey("GNotificationPanel","text.footer")).replace("%app",()=>$("<span/>").attr("id","learnmore-link").addClass("link").text(i).prop("outerHTML")))));s.find("#signup-link").on("click",()=>{gDesigner.stats("open-shared_click_create-account"),new c(a).open({anonymous:!0,signup:!0,animate:!0})}),s.find("#signin-link").on("click",()=>{gDesigner.stats("open-shared_click_login"),new c(a).open({anonymous:!0,animate:!0})}),s.find("#learnmore-link").on("click",e=>{gDesigner.stats("open-shared_click_learn-more"),gContainer.openExternalLink(e,"https://corelvector.com/?utm_campaign=gdsharedfile")}),this._updateContent(s)}else if(e.notification.custom){if(this._closeCallback=e.notification.closeCallback,this._htmlElement.addClass([e.notification.class,e.notification.enter]),this._updateContent(e.notification.content),e.notification.timeout){let t=this;new Promise((function(n){setTimeout((function(){t._htmlElement.removeClass(e.notification.enter),t._htmlElement.addClass(e.notification.exit),n(!0)}),e.notification.timeout)})).then((function(){setTimeout((function(){t._htmlElement.removeClass(e.notification.exit),t._close(!1)}),600)}))}}else e.builder instanceof d?(e.builder.addEventListener(d.Event,e=>{e.type===d.Event.Type.Close&&this._close()}),this._updateContent($("<div></div>").addClass("message").append(await e.builder.build()))):this._updateContent($("<div></div>").addClass("message").append(e.notification.message));this.trigger(r.UPDATE_EVENT)},u.prototype._updateContent=function(e){this._htmlElement.find(".content").remove(),this._htmlElement.append($("<div></div>").addClass("content").append(e))},u.prototype._close=function(e){this._lastNotification=null,this._htmlElement.addClass("g-hide"),this._closeCallback&&e&&this._closeCallback(),this.trigger(r.UPDATE_EVENT)},u.prototype.toString=function(){return"[Object GNotificationPanel]"},u.prototype.getId=function(){return u.ID},e.exports=u},function(e,t,n){"use strict";var o=n(1);function i(e,t){this._builder=e,this._onClose=t}o.GObject.inherit(i,o.GEventTarget),i.prototype.build=function(){return this._builder()},i.prototype.close=function(){this.hasEventListeners(i.Event)&&this.trigger(new i.Event(i.Event.Type.Close)),this._onClose&&this._onClose()},i.Event=function(e){this.type=e},o.GObject.inherit(i.Event,o.GEvent),i.Event.Type={Close:0},e.exports=i},function(e,t,n){"use strict";n(7),n(183),n(18),n(3),n(29);var o=n(1);const i=n(588),a=n(378),r=n(376),s=n(377),l=n(71),c=n(277),d=n(1322),u=n(1324),p=n(37),g=n(166),{DateAPI:h,ShareRoles:f}=n(9);function m(){}o.GObject.inherit(m,i),m.ID="collaborative-text-panel",m.prototype._htmlElement=null,m.prototype._requestLockDialog=null,m.prototype._lastRequestLockTime=0,m.prototype._isModified=!1,m.prototype._applicationStateChangedEvent=function(e){e.document===this._document&&this._update()},m.prototype._documentEvent=function(e){if(!e.document.isLockedByVersionHistory())switch(e.type){case l.Type.Activated:this._deactivate(),this._document=e.document,this._document.addEventListener(u.StatusChangedEvent,this._update,this),this._document.addEventListener(u.LockUpdateEvent,this._update,this),this._document.addEventListener(s,this._collaborationEvent,this),gDesigner.addEventListener(c,this._networkAvailabilityChangedEvent,this),this._update();break;case l.Type.Deactivated:e.document===this._document&&(this._deactivate(),this._htmlElement.css("display","none"));break;case l.Type.Modified:if(!this.isEnabled())return;if(e.document===this._document&&this._document.isCollaborativeTextEditing()){const e=this._document.isModified();this._isModified!==e&&(this._isModified=e,this._update())}}},m.prototype._deactivate=function(){this._document&&(this._document.removeEventListener(u.StatusChangedEvent,this._update,this),this._document.removeEventListener(u.LockUpdateEvent,this._update,this),this._document.removeEventListener(s,this._collaborationEvent,this),gDesigner.removeEventListener(c,this._networkAvailabilityChangedEvent,this))},m.prototype._collaborationEvent=function(e){e.type===s.Type.LockRequest&&this._requestLock(e.data.from&&e.data.from.name)},m.prototype._networkAvailabilityChangedEvent=function(e){this._htmlElement.toggleClass("offline",!e.connected)},m.prototype._update=async function(){if(this._htmlElement.css("display",this.isEnabled()?"":"none"),this.isEnabled()){const e=this._document.getCollaborativeTextController();if(e)if(e.getStatus()===u.Status.UpdateAvailable)this._document.lock(),this._showUpdatePanel();else if(e.getStatus()===u.Status.Updating)this._showUpdatingPanel();else if(gDesigner.getApplicationManager().hasRole(f.Owner))this._showOwnerPanel();else if(await e.canLock())switch(e.getStatus()){case u.Status.Initial:case u.Status.Editing:this._showEditPanel();break;case u.Status.Finished:case u.Status.Previewed:this._showFinishedPanel();break;case u.Status.Previewing:this._showPreviewPanel();break;case u.Status.Sending:this._showSendingPanel()}else this._showRequestPanel()}this.trigger(a.UPDATE_EVENT)},m.prototype._showOwnerPanel=function(){this._htmlElement.empty().append($("<div/>").addClass("container").addClass("owner-panel").append($("<span/>").addClass("message").text(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.owner-message")))))},m.prototype._showUpdatePanel=function(){this._htmlElement.empty().append($("<div/>").addClass("container").addClass("update-panel").append($("<span/>").addClass("message").text(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.update-available-message")))).append($("<div/>").addClass("buttons").append($("<button/>").addClass("g-highlight-button").addClass("highlighted").addClass("online-action").text(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.update-now"))).on("click",()=>{gDesigner.stats("collabtextpanel_bottom-bar_file-update"),this._document.getCollaborativeTextController().reloadDocument()}))))},m.prototype._showUpdatingPanel=function(){this._htmlElement.empty().append($("<div/>").addClass("container").addClass("updating-panel").append($("<div>").addClass("g-loading")).append($("<span/>").addClass("message").text(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.updating")))))},m.prototype._showEditPanel=function(){this._htmlElement.empty().append($("<div/>").addClass("container").addClass("edit-panel").append($("<span/>").addClass("message").text(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.finish-editing-message")))).append($("<button/>").addClass("g-highlight-button").addClass("highlighted").addClass("online-action").prop("disabled",!this._document.isModified()).text(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.finish-editing"))).on("click",()=>{gDesigner.stats("collabtextpanel_bottom-bar_finish-editing"),this._document.getCollaborativeTextController().finishTextEditing()})))},m.prototype._showFinishedPanel=function(){this._htmlElement.empty().append($("<div/>").addClass("container").addClass("finish-panel").append($("<button/>").prop("disabled",this._document.getCollaborativeTextController().getStatus()===u.Status.Previewed).addClass("g-highlight-button").addClass("outlined").addClass("online-action").append($("<span/>").addClass("icon").addClass("gravit-icon-co-text-editing-display")).append($("<span/>").text(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.preview-changes")))).on("click",()=>{gDesigner.stats("collabtextpanel_bottom-bar_preview-changes"),this._document.getCollaborativeTextController().previewChanges()})).append($("<span/>").addClass("message").text(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.send-changes-message")))).append($("<div/>").addClass("buttons").append($("<button/>").addClass("g-highlight-button").addClass("secondary").text(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.back-to-editing"))).on("click",()=>{gDesigner.stats("collabtextpanel_bottom-bar_back-to-editing"),this._document.getCollaborativeTextController().backToTextEditing()})).append($("<button/>").addClass("g-highlight-button").addClass("highlighted").addClass("online-action").text(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.send-changes"))).on("click",()=>{gDesigner.stats("collabtextpanel_bottom-bar_send-changes"),p.confirm(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.send-to-owner")),e=>{e&&this._document.getCollaborativeTextController().sendChanges().then(()=>{p.alert(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.your-changes-were-applied")))}).catch(()=>{p.alert(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.send-changes-failed")))})})}))))},m.prototype._showPreviewPanel=function(){this._htmlElement.empty().append($("<div/>").addClass("container").addClass("preview-panel").append($("<div>").addClass("g-loading")).append($("<span/>").addClass("message").text(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.rendering-preview")))))},m.prototype._showSendingPanel=function(){this._htmlElement.empty().append($("<div/>").addClass("container").addClass("sending-panel").append($("<div>").addClass("g-loading")).append($("<span/>").addClass("message").text(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.sending-changes")))))},m.prototype._showRequestPanel=async function(){const e=await this._document.getCollaborativeTextController().getCurrentLock();if(!e)return this._document.getCollaborativeTextController().resetTextEditing();const t=new g(e.user);this._htmlElement.empty().append($("<div/>").addClass("container").addClass("request-access-panel").append($("<span/>").addClass("message").text(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.request-access-message")).replace("%name",t.getFullUserName()))).append($("<button/>").addClass("g-highlight-button").addClass("highlighted").addClass("online-action").prop("disabled",this._document.getCollaborativeTextController().hasAlreadyRequestedAccess()).text(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.request-access"))).on("click",e=>{gDesigner.stats("collabtextpanel_bottom-bar_request-access"),gDesigner.toggleLoading(!0),this._document.getCollaborativeTextController().requestAccess().then(()=>{$(e.target).closest("button").attr("disabled",!0),p.alert(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.request-has-been-sent")).replace("%name",t.getFullUserName()))}).catch(e=>{e.status&&e.status!==gApi.HTTP_STATUS_CODES.NOT_FOUND&&p.error(e)}).finally(()=>{this._update(),gDesigner.toggleLoading(!1)})})))},m.prototype._requestLock=function(e){if(!this.isEnabled())return;if(this._requestLockDialog)return;const t=h.now(),n=h.minutesToMilliseconds(5);this._lastRequestLockTime&&t-this._lastRequestLockTime<n||(this._lastRequestLockTime=t,this._requestLockDialog=p.custom({className:"g-request-lock-dialog",closeCallback:()=>this._requestLockDialog=null,closeable:!1,subtitle:o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.wants-to-take-over")).replace(/%name/g,e||o.GLocale.get(new o.GLocaleKey("GCommonNames","text.unknown-user"))),buttons:[{label:o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.save-my-edits-and-allow")),onclick:e=>{e.gDialog("close"),this._document.getCollaborativeTextController().sendChanges().catch(()=>{p.alert(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.send-changes-failed")))})}},{label:o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.discard-my-edits-and-allow")),onclick:e=>{e.addClass("g-loading"),this._document.getCollaborativeTextController().releaseLock().catch(e=>{p.error(e)}).finally(()=>{e.gDialog("close")})}},{label:o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.decline")),highlighted:!0,onclick:e=>{e.gDialog("close")}}]}))},m.prototype.init=function(e){this._htmlElement=e,this._htmlElement.addClass("g-collaborative-text-panel").css("display","none"),gDesigner.addEventListener(l,this._documentEvent,this),gDesigner.addEventListener(d,this._unloadEvent,this),gDesigner.addEventListener(r,this._applicationStateChangedEvent,this)},m.prototype._unloadEvent=function(e){if(this._document)try{gApi.lock.releaseSync(this._document.getId())}catch(e){}},m.prototype.isEnabled=function(){return!!this._document&&this._document.isCollaborativeTextEditing()},m.prototype.toString=function(){return"[Object GCollaborativeTextPanel]"},m.prototype.getId=function(){return m.ID},e.exports=m},function(e,t,n){"use strict";n(7),n(3);var o=n(1);const i=n(588),a=n(378),r=n(71),s=n(277),l=n(203),c=n(78);n(1324);function d(){}o.GObject.inherit(d,i),d.ID="document-notifications-panel",d.prototype._htmlElement=null,d.prototype._isModified=!1,d.prototype._documentEvent=function(e){if(!e.document.isLockedByVersionHistory())switch(e.type){case r.Type.Activated:this._deactivate(),this._document=e.document,gDesigner.addEventListener(s,this._networkAvailabilityChangedEvent,this),this._document.addEventListener(l,this._handleDocumentStatusEvent,this),this._update(!0);break;case r.Type.Deactivated:e.document===this._document&&(this._deactivate(),this._update(!0));break;case r.Type.UpdateAvailable:this._document===e.document&&this._update(!1)}},d.prototype._deactivate=function(){this._document&&(gDesigner.removeEventListener(s,this._networkAvailabilityChangedEvent,this),this._document.removeEventListener(l,this._handleDocumentStatusEvent,this),this._document=null)},d.prototype._handleDocumentStatusEvent=function(e){e.status===c.Loaded&&this._update(!0)},d.prototype._networkAvailabilityChangedEvent=function(e){this._htmlElement.toggleClass("offline",!e.connected)},d.prototype._update=async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.isEnabled()||!this._document||this._document.isIgnoringCurrentUpdate()||this._document.getStatus()===c.Loading)return void this._close(!0);let t=!e||await this._document.isUpdateAvailable();t?this._showUpdatePanel():this._close(),this.trigger(a.UPDATE_EVENT)},d.prototype._close=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._htmlElement.css("display","none"),e&&this.trigger(a.UPDATE_EVENT)},d.prototype._showUpdatePanel=function(){this._htmlElement.empty().append($("<div/>").addClass("container").addClass("update-panel").append($("<span/>").addClass("message").text(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.update-available-message")))).append($("<div/>").addClass("buttons").append($("<button/>").addClass("g-highlight-button").addClass("secondary").text(o.GLocale.get(new o.GLocaleKey("GCommonNames","text.cancel"))).on("click",()=>{this._document.ignoreCurrentUpdate(),this._close(!0)})).append($("<button/>").addClass("g-highlight-button").addClass("highlighted").addClass("online-action").text(o.GLocale.get(new o.GLocaleKey("GCollaborativeTextPanel","text.update-now"))).on("click",()=>{this._close(!0),this._document.reload()})))),this._htmlElement.css("display","")},d.prototype.init=function(e){this._htmlElement=e,this._htmlElement.addClass("g-document-notification-panel").css("display","none"),gDesigner.addEventListener(r,this._documentEvent,this)},d.prototype.isEnabled=function(){return!!this._document&&!this._document.isCollaborativeTextEditing()},d.prototype.toString=function(){return"[Object GDocumentNotificationsPanel]"},d.prototype.getId=function(){return d.ID},e.exports=d},function(e,t,n){"use strict";n(28);n(1);n(77),n(1645);function o(e){this._storage=e}o.prototype._plugins=null,o.prototype._storage=null,o.prototype.load=function(){try{this._plugins=this._storage.getPlugins(),this._plugins&&this._plugins.forEach(e=>{try{e.load(this._storage)}catch(e){console.error("PluginManager: Could not load plugin",e)}})}catch(e){console.error("PluginManager: Could not load plugins",e)}},o.prototype.init=function(e){if(this._plugins&&this._plugins.length){let t=()=>({actions:[],sidebars:[],panels:[],tools:[],properties:[]}),n=t();this._plugins.forEach(e=>{try{let o=t();e.init(o),Object.keys(o).forEach(e=>{n[e]=n[e].concat(o[e])})}catch(e){console.error("PluginManager: Could not initilize plugin",e)}}),Object.keys(n).forEach(t=>{e[t]=e[t].concat(n[t])})}},o.prototype.start=function(){this._plugins&&this._plugins.length&&this._plugins.forEach(e=>{try{e.start()}catch(e){console.error("PluginManager: Could not start plugin",e)}})},o.prototype.unload=function(e){this._plugins&&this._plugins.length&&this._plugins.forEach(t=>{try{t.unload(this._storage,e)}catch(e){console.error("PluginManager: Could not unload plugin",e)}})},e.exports=o},function(e,t,n){"use strict";function o(e){this.id=e,this._intervals=[],this._timeouts=[]}n(3),n(28),o.prototype.exports=null,o.prototype.id=null,o.prototype._intervals=null,o.prototype._timeouts=null,o.prototype.setTimeout=function(){let e=setTimeout.apply(null,arguments);return this._timeouts.push(e),e},o.prototype.setInterval=function(){let e=setInterval.apply(null,arguments);return this._intervals.push(e),e},o.prototype.unload=function(){this._timeouts.forEach(e=>clearTimeout(e)),this._intervals.forEach(e=>clearInterval(e)),this._timeouts=[],this._intervals=[]},o.prototype.toString=function(){return"[Object GModule]"},e.exports=o},function(e,t,n){"use strict";n(17),n(3),n(22),n(117),n(106);const o=n(1323);e.exports=class{static setupInAppLinkReloadAppForOnce(){gContainer.addEventListener(o,(function e(t){let{type:n,data:i}=t;if(n===o.Type.OpenInAppLink){gContainer.removeEventListener(o,e);const t=i.params,n=new URL(window.location.href);for(let e in t)n.searchParams.set(e,t[e]);window.location.href=n.toString()}}))}}},function(e,t,n){"use strict";n(51);var o,i,a=null,r=null,s=!1;class l{static _getTooltipElement(){return r}static _getBodyWidth(){return $("body").width()}static _getBodyHeight(){return $("body").height()}static showTooltip(e){o=void 0;let t=l._getTooltipElement();if(a||e){var n=$(a||e).closest("[data-title]");if(n.length){var r=n[0].getBoundingClientRect(),c=n.attr("data-title"),d=parseInt(n.attr("data-custom-left-offset")||0),u=!!parseInt(n.attr("data-wrap")||0);if(r&&c){t.addClass("visible").toggleClass("wrap",u).text(c);var p=r.left+r.width/2-t.outerWidth()/2+"px",g=r.top+r.height+"px";t.css({left:p,top:g}),t.offset().top+r.height>l._getBodyHeight()&&t.css("top",r.top-r.height+"px");const e=l._getBodyWidth();if(d+t.offset().left+t.outerWidth()>e){let n=t.offset().left-(t.offset().left+t.outerWidth()-e)+d;t.css("left",n+"px")}l.resetIdle(),s=!0,i=setTimeout(l.resetIdle,500)}}}}static resetIdle(){void 0!==i&&clearTimeout(i),s=!1}static resetTooltip(){void 0!==o&&(clearTimeout(o),o=void 0),r.removeClass("visible").text("").css({left:"",top:""})}static documentOverListener(e){l.resetTooltip();let t=$(e.target).closest("[data-title]"),n=t.data("gRichTooltip")||t.parent().data("gRichTooltip")||t.children().eq(0).data("gRichTooltip");t.length>0&&!n&&(a=e.target,s?l.showTooltip():o=setTimeout(l.showTooltip,500))}static documentOutListener(){l.resetTooltip(),a=null}static init(){r=$("<div></div>").addClass("g-tooltip").appendTo($("body")),document.addEventListener("mouseover",l.documentOverListener),document.addEventListener("mouseout",l.documentOutListener)}}e.exports=l;var c={show:function(){l.showTooltip($(this)),document.addEventListener("click",l.resetTooltip,{once:!0,capture:!0})}};$.fn.gTooltip=function(e){return c[e]?c[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):c.init.apply(this,arguments)}},function(e,t,n){"use strict";n(17),n(22);class o extends Error{constructor(){super(...arguments),Error.captureStackTrace(this,o),this.code=57005}static isPluginError(e){return e&&e.code&&57005===e.code}}e.exports=o},function(e,t,n){"use strict";e.exports=class{constructor(){this._dialog=$("<div></div>").gDialog({relaseOnClose:!0,className:"g-maintenance-dialog"}),$("<iframe></iframe>").attr("src","assets/static/maintenance/index.html").appendTo(this._dialog)}open(){this._dialog.gDialog("open",!0)}close(){this._dialog.gDialog("close")}}},function(e,t,n){"use strict";n(52),n(89),n(844),n(181),n(7),n(3),n(62);var o=n(1),i=n(9),a=n(34);const r=n(77),s=n(1164),l=n(1325);var c;e.exports=class{constructor(){this._intervalPID=null,this._releaseStatus={version:void 0,forceUpdate:!1},this._downloadCompleted=!1}_trigger(e){gDesigner.trigger(e)}getNewVersion(){return this._releaseStatus.version}getCurrentVersion(){return gDesigner.getVersion()}getCurrentFriendlyVersion(){return gDesigner.getVersionFriendlyName()}_isVersionGeneralFormatHigherThan(e,t){var n=e.split("."),o=t.split(".");if(3!==n.length||n.some(e=>isNaN(Number(e))))throw"Incorrect release version argument";if(3!==o.length||o.some(e=>isNaN(Number(e))))throw"Incorrect current version argument";var i=+n[0],a=+n[1],r=+n[2],s=+o[0],l=+o[1],c=+o[2];return i>s||i===s&&a>l||i===s&&a===l&&r>c}_isVersionHigherThan(e,t){return!!e&&this._isVersionGeneralFormatHigherThan(e,t)}async initializeReleaseStatus(){try{this._releaseStatus=await i.gApi.software.getRelease({current:this.getCurrentVersion(),env:gDesigner.getEnv(),runtime:gContainer.getRuntime(),build:gDesigner.getBuildNum(),commit:gDesigner.getCommitSHA(),internalVersion:gDesigner.getVersion()})}catch(e){this._releaseStatus={silent:!0,forceUpdate:!1}}}async initializeReleaseStatusWithNotifications(){await this.initializeReleaseStatus(),this._releaseStatus.silent=!1}async checkForUpdates(e){if(gDesigner.isOffline())return console.warn(this.toString()+" Unable to check for updates - system is offline!");try{const t=this.getCurrentVersion();e?await this.initializeReleaseStatus():await this.initializeReleaseStatusWithNotifications();this._isVersionHigherThan(this._releaseStatus.tagVersion,t)?this._isElectron()?c.checkForUpdates():this._trigger(new s.UpdateAvailable({currentVersion:this.getCurrentFriendlyVersion(),newVersion:this._releaseStatus.version,forceUpdate:this._releaseStatus.forceUpdate,isSilent:this._releaseStatus.silent})):e||this._trigger(new s.UpdateNotAvailable({currentVersion:this.getCurrentFriendlyVersion()}))}catch(e){console.error(this.toString(),"exception",e)}}downloadUpdate(){console.info(this.toString()," - Downloading update"),this._isElectron()&&c.downloadUpdate()}async installElectronUpdate(){o.GSystem.operatingSystem===o.GSystem.OperatingSystem.OSX_IOS&&(console.info(this.toString()," - Waiting install - OSX"),await(0,a.sleep)(5e3)),console.info(this.toString()," - Installing update - Call"),c.installUpdate()}async installUpdate(){switch(console.info(this.toString()," - Installing update - Start"),this._releaseStatus.silent||this._trigger(new s.BeforeInstallUpdate),gContainer.getRuntime()){case r.Runtime.Browser:case r.Runtime.PWA:location.reload();break;case r.Runtime.Electron:console.info(this.toString()," - Checking download"),this._downloadCompleted?this._releaseStatus.silent?gContainer.setProperty("install_update_on_start",!0):this.installElectronUpdate():console.warn(this.toString()+" The download has not been finished yet!")}}_isElectron(){return gContainer.getRuntime()===r.Runtime.Electron}async start(){[r.Runtime.Electron,r.Runtime.Browser,r.Runtime.PWA].includes(gContainer.getRuntime())?(this._isElectron()&&((c=n(1651)).on(l.UpdateDownloaded,this._handleDownloadComplete.bind(this)),c.on(l.DownloadProgress,this._handleDownloadInProgress.bind(this)),c.on(l.UpdateAvailable,this._handleUpdateAvailable.bind(this)),c.on(l.Error,this._handleUpdateError.bind(this)),c.on(l.UpdateNotAvailable,this._handleUpdateNotAvailable.bind(this)),c.on(l.CheckingForUpdate,this._handleCheckingForUpdate.bind(this)),await gContainer.getProperty("install_update_on_start")&&(gContainer.removeProperty("install_update_on_start"),await this.initializeReleaseStatus(),this.installElectronUpdate())),this._intervalPID=setTimeout(function(){let e=(new Date).getTime();gContainer.setProperty("last_update_check",e),this.checkForUpdates(!0)}.bind(this),i.DateAPI.daysToMilliseconds(1)),gContainer.getProperty("last_update_check").then(e=>{let t=(new Date).getTime();if(e){let n=i.DateAPI.diff(i.DateAPI.toDate(e),i.DateAPI.toDate(t),!1),o=i.DateAPI.daysToMilliseconds(1);(n<0||n>=o)&&(gContainer.setProperty("last_update_check",t),this.checkForUpdates(!0))}else gContainer.setProperty("last_update_check",t)}),gContainer.getProperty("old_version").then(e=>{const t=this.getCurrentVersion();e?e!==t&&(gContainer.setProperty("old_version",t),i.gApi.software.getRelease().then(e=>{e&&!e.silent&&this._trigger(new s.AfterUpdate({currentVersion:this.getCurrentFriendlyVersion()}))})):gContainer.setProperty("old_version",t)})):console.warn(this.toString()+" Runtime not available for auto update!")}_handleDownloadComplete(){console.info(this.toString()+" Download complete"),this._downloadCompleted=!0,this._trigger(new s.DownloadComplete({newVersion:this._releaseStatus.version,forceUpdate:this._releaseStatus.forceUpdate,isSilent:this._releaseStatus.silent}))}_handleUpdateNotAvailable(){console.info(this.toString()+" Update not available"),this._trigger(new s.UpdateNotAvailable({currentVersion:this.getCurrentFriendlyVersion(),isSilent:this._releaseStatus.silent}))}_handleCheckingForUpdate(){console.info(this.toString()+" Checking for update"),this._trigger(new s.CheckingForUpdate({isSilent:this._releaseStatus.silent}))}_handleDownloadInProgress(e,t){console.info(this.toString()+" Download in progress:"+JSON.stringify(t));const n=t.percent;this._trigger(new s.Downloading({percent:parseFloat(n).toFixed(2),newVersion:this._releaseStatus.version,isSilent:this._releaseStatus.silent}))}_handleUpdateAvailable(e,t){console.info(this.toString()+" Update available:"+JSON.stringify(t)),this._trigger(new s.UpdateAvailable({currentVersion:this.getCurrentFriendlyVersion(),newVersion:this._releaseStatus.version,forceUpdate:this._releaseStatus.forceUpdate,isSilent:this._releaseStatus.silent})),this._releaseStatus.forceUpdate&&this._isElectron()&&c.downloadUpdate()}_handleUpdateError(e,t){console.info(this.toString()+" Update error:"+JSON.stringify(t)),this._trigger(new s.UpdateError({error:t,isSilent:this._releaseStatus.silent}))}stop(){this._intervalPID&&clearInterval(this._intervalPID)}getReleaseNotesLink(){return i.SOFTWARE_UPDATE.CHANGE_LOG_LINK}toString(){return"[Object GSoftwareUpdateManager]"}}},function(e,t,n){"use strict";n(3);var{ipcRenderer:o}=n(860);const i=n(1325);function a(){}a.prototype.installUpdate=function(){console.info(this.toString()+" Firing install update"),o.send(i.CommandInstallUpdate)},a.prototype.checkForUpdates=function(){console.info(this.toString()+" Firing checking update"),o.send(i.CommandCheckForUpdates)},a.prototype.downloadUpdate=function(){console.info(this.toString()+" Firing download update"),o.send(i.CommandDownloadUpdate)},a.prototype.on=function(e,t){o.on(e,t)},a.prototype.toString=function(){return"[Object GElectronUpdateServiceClient]"},e.exports=new a},function(e,t,n){"use strict";const o=n(1220),i=n(1653),a=n(1656),r=n(1657);e.exports=class{static newInAppPurchase(e){switch(e){case o.Windows:return new a;case o.Apple:return new r;default:return new i}}}},function(e,t,n){"use strict";var o=n(14);n(26),n(7),n(183);var i=o(n(1225)),a=o(n(1132)),r=n(1);const{gApi:s,IN_APP_PURCHASE:{CLEVERBRIDGE:{openCartInAPopup:l=!1}={}}={}}=n(9),c=n(787),d=n(278),u=n(586),p=n(239),g=n(1654),h=n(1655),f=n(1166);e.exports=class extends f{getOptions(){return this._paymentFlow?this._paymentFlow.getOptions():null}async purchase(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return gDesigner.toggleLoading(!0),this._purchase(e,t).finally(()=>{gDesigner.toggleLoading(!1)})}_purchase(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $(".g-payment-dialog").length?Promise.reject(!1):new Promise(async(n,o)=>{try{this._paymentFlow&&this._paymentFlow.abort(),this._paymentFlow=new i.default(t);const l=async()=>{const{immediatePurchase:i=!1,paymentCallback:l=(()=>{}),autoClose:p=!1}=t,g=await gDesigner.getUser();if(!e){if(!g)return this._paymentFlow.step((new a.default).listen(d).when(e=>!!e&&!!e.user).do(()=>{gDesigner.openPaymentDialog(e,t)})),void n();{const n=gDesigner.now().getTime();e=await s.getProduct(Object.assign({time:n,language:r.GLocale.getLocaleLanguageTag().slice(0,2)},t))}}if(!e)return void o(new Error("Product is missing"));const{reinstate:h=!1}=e;if(h)return this._paymentFlow.step(gDesigner.executeWhenReady(()=>{new u(this._user,"purchase").open()})),void n({reinstate:!0});this._paymentFlow.step((new a.default).listen(c).when(()=>gDesigner.isInitialized()).do(async()=>{try{const t=await this._openCart(e,i,p);l(t)}catch(e){l({})}},i)),n()};gDesigner.isOffline()?(p.openRetryConnection(l),gDesigner.toggleLoading(!1)):await l()}catch(e){o(e)}}).then(e=>(e&&e.reinstate||"undefined"!=typeof dataLayer&&dataLayer.push({event:"USER_CART_VIEW_EVENT"}),e))}_openCart(e,t,n){return l&&!t?this._openCartPopup(e):this._openCartDialog(e,n)}_openCartPopup(e){return(new h).open(e.url)}_openCartDialog(e,t){return(new g).open(e.url,t)}}},function(e,t,n){"use strict";n(17),n(7),n(18),n(3),n(29),n(22),n(117),n(106);var o=n(1),i=n(9);const a=n(239),r=n(37),s=n(1326);e.exports=class{async open(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._url=e,this._autoClose=t,this._isPending=!0;return await gDesigner.isOfflineAsync()?new Promise((e,t)=>{a.openRetryConnection(()=>{this._open().then(e).catch(t)})}):this._open()}async _open(){if($(".g-payment-dialog").length)return Promise.reject();const e=s.getInstance();this._dialog=$("<div></div>").gDialog({className:"g-payment-dialog",releaseOnClose:!0,closeCallback:()=>{e.cancelPurchase()}}).append($("<div></div>").addClass("g-btn-close").append($("<span></span>").addClass("gravit-icon-close")).on("click",()=>{this._close()}));const t=$("<div></div>").addClass("content").appendTo(this._dialog);this._dialog.addClass("g-loading"),this._dialog.gDialog("open",!1);const n=this._getURL();$("<iframe/>").attr("src",n).on("load",()=>{this._dialog.removeClass("g-loading")}).on("error",()=>{this._dialog.removeClass("g-loading")}).appendTo(t);try{await e.waitForPurchase()}catch(e){r.alert(o.GLocale.getValue("GPaymentDialog","text.payment-not-confirmed").replace("%link",i.gApi.link.getSupportUrl()))}finally{this._isPending=!1}}_getURL(){let e=this._url;const t=gDesigner.getLinkerParam();if(t){const n=new URL(e);n.searchParams.set.apply(n.searchParams,t.split("=")),e=n.toString()}return e}_close(){if(this._isPending){const e=o.GLocale.get(new o.GLocaleKey("GPaymentDialog","text.dialog-dont-leave")),t=o.GLocale.get(new o.GLocaleKey("GPaymentDialog","text.cancel")),n=o.GLocale.get(new o.GLocaleKey("GPaymentDialog","text.finish-my-order"));r.confirm(e,e=>{e?(this._autoClose=!0,this._isPending||this.close()):this.close()},t,n)}else this.close()}close(){this._dialog.gDialog("close")}}},function(e,t,n){"use strict";n(7);const o=n(37),{gApi:i}=n(9),a=n(1326);e.exports=class{async open(e){try{gContainer.openExternalLink(null,e);return a.getInstance().waitForPurchase()}catch(e){o.alert(i.formatError(e))}}}},function(e,t,n){"use strict";n(7),n(183);const o=n(1166),i=n(278),a=n(277),{gApi:r,MicrosoftB2BKeyType:s,PaymentProviders:l,DateAPI:c,IN_APP_PURCHASE:{WINDOWS:{production:d,trunk:u,rc:p,beta:g,lts:h}={}}={}}=n(9),{IS_PRODUCTION:f,IS_LTS:m,IS_RC:y,IS_BETA:v}=n(217),{ERROR_CODES:{ERR_MICROSOFT_STORE_SERVICES_B2B_KEY_NOT_FOUND:_}}=r;e.exports=class extends o{constructor(){if(super(),!window.napi)return;const{remote:e}=n(860),t=e.getCurrentWindow().getNativeWindowHandle();this._store=new window.napi.windowsStore.StoreContext,this._store.initialize(t),gDesigner.addEventListener(i,this._userLoggedEvent,this),gDesigner.addEventListener(a,this._networkAvailabilityChangedEvent,this),this._intervalId=setInterval(()=>this.syncLicense(),c.daysToMilliseconds(1))}async purchase(e,t){try{if(gDesigner.toggleLoading(!0),e||(e=await this.getProduct()),!e)return}finally{gDesigner.toggleLoading(!1)}return new Promise((t,n)=>{const o=setTimeout(()=>{n()},c.minutesToMilliseconds(3));this._store.requestPurchaseAsync(e.productId,(e,i)=>{clearTimeout(o),e?n(e):(gDesigner.toggleLoading(!0),this.syncLicense().then(t).catch(n).finally(()=>{gDesigner.toggleLoading(!1)}))})})}async getProduct(){return new Promise((e,t)=>{this._store.getAssociatedStoreProductsAsync(["Durable"],(n,o)=>{if(n)return t(n);if(!o)return t();const i=this._getInAppOfferToken();if(!i)return t();const a=Object.values(o).find(e=>e.inAppOfferToken===i);if(!a)return t();e({provider:l.WindowsStore,formattedPrice:a.price.formattedRecurrencePrice,currency:a.price.currencyCode,productId:a.storeId})})})}async syncLicense(){const e=await gDesigner.getUser();if(e)return r.microsoftStoreServices.syncLicense().then(()=>gDesigner.requestLicenseUpdate()).catch(async t=>{if(t.cloud&&t.code===_){const t=await r.microsoftStoreServices.getAccessToken(),n=await this._createB2BKeyForPurchaseAPI(e,t),o=await this._createB2BKeyForCollectionsAPI(e,t);return await r.microsoftStoreServices.updateB2BKeys({accessToken:t,keys:{[s.Purchase]:n,[s.Collections]:o}}),r.microsoftStoreServices.syncLicense().then(()=>gDesigner.requestLicenseUpdate())}throw t})}_getInAppOfferToken(){return f?d:v?g:m?h:y?p:u}_createB2BKeyForPurchaseAPI(e,t){return new Promise(async(n,o)=>{this._store.getCustomerPurchaseIdAsync(t,e.getUID(),(e,t)=>{e?o(e):n(t)})})}_createB2BKeyForCollectionsAPI(e,t){return new Promise(async(n,o)=>{this._store.getCustomerCollectionsIdAsync(t,e.getUID(),(e,t)=>{e?o(e):n(t)})})}_userLoggedEvent(e){this.syncLicense()}_networkAvailabilityChangedEvent(e){e.connected&&this.syncLicense()}}},function(e,t,n){"use strict";const o=n(1166);e.exports=class extends o{canMakePayments(){return!1}}},function(e,t,n){"use strict";n(7),n(510);const o=n(278),i=n(1659),{gApi:a,DateAPI:r}=n(9);e.exports=class{init(){gDesigner.addEventListener(o,this._userLoggedEvent,this)}async _userLoggedEvent(e){const t=e.user;if(t&&t.getUID()){gDesigner.removeEventListener(o,this._userLoggedEvent,this);try{await this._shouldShowWindowsStoreAnnouncement(t)&&this._showWindowsStoreAnnouncement()}finally{this._updateWindowStoreAnnouncementFlag()}}}async _shouldShowWindowsStoreAnnouncement(e){const{flags:{windowsStoreAnnouncement:t=!1}={}}=await a.getUserSettings().catch(()=>({}));return!(t||!r.lt(e.created,Date.now()))}_updateWindowStoreAnnouncementFlag(){a.updateUserSettings({flags:{windowsStoreAnnouncement:!0}})}_showWindowsStoreAnnouncement(){gDesigner.executeWhenReady(()=>{(new i).open()})}}},function(e,t,n){"use strict";var o=n(1);const i={[o.GLocaleLanguage.Portuguese]:"pt-br",[o.GLocaleLanguage.Spanish]:"es",[o.GLocaleLanguage.German]:"de",[o.GLocaleLanguage.Italian]:"it",[o.GLocaleLanguage.French]:"fr"};e.exports=class{constructor(){const e=i[o.GLocale.getLanguage()]||"en",t=$("<iframe>").attr("src","https://www.corelvector.com/".concat(e,"/messages/windows-store")).on("load error",()=>this._dialog.removeClass("g-loading"));this._dialog=$("<div/>").addClass("g-loading").gDialog({releaseOnClose:!0,className:"g-windows-store-announcement-dialog",buttons:[$("<button/>").addClass("primary").text(o.GLocale.get(new o.GLocaleKey("GLocale","ok"))).on("click",()=>this.close())]}).append(t)}open(){this._dialog.gDialog("open",!1)}close(){this._dialog.gDialog("close")}}},function(e,t,n){"use strict";n(7),n(18),n(29);var o=n(1);const i=n(37),{DESIGNER:{TITLE:a}={}}=n(9);e.exports=class{async init(){await this._shouldOpenWarningDialog()&&gDesigner.executeWhenReady(()=>this._openWarningDialog())}_openWarningDialog(){i.custom({icon:"info",closeable:!1,className:"g-beta-warning-dialog",title:o.GLocale.get(new o.GLocaleKey("GBetaFlow","text.title")).replace("%app",a),subtitle:o.GLocale.get(new o.GLocaleKey("GBetaFlow","text.message")),buttons:[{label:o.GLocale.get(new o.GLocaleKey("GBetaFlow","text.i-understand")).toUpperCase(),closeOnClick:!0,highlighted:!0}],dontShowAgainCb:e=>{gContainer.setProperty("designer.betaflow.dismiss-warning-dialog",!!e)}})}async _shouldOpenWarningDialog(){return!await gContainer.getProperty("designer.betaflow.dismiss-warning-dialog",!1)}}},function(e,t,n){"use strict";var o=n(14);n(18),n(29);var i=n(1),a=o(n(37));const{DateAPI:r,DESIGNER:{TITLE:s}={}}=n(9),l=n(71),c=r.minutesToMilliseconds(1),d=.8,u=r.minutesToMilliseconds(30);e.exports=class{constructor(){let{memoryCheckInterval:e=c,memoryUsageThreshold:t=d,autostartTime:n=u}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._memoryCheckInterval=Math.max(e,r.minutesToMilliseconds(1)),this._memoryUsageThreshold=t,this._autostartTime=n}start(){this.stop(),gDesigner.addEventListener(l,this._documentEvent,this),this._memoryUsageThreshold<=0||gContainer.isMemoryInfoAvailable()&&(this._memoryCheckIntervalId=setInterval(this._checkMemory.bind(this),this._memoryCheckInterval))}stop(){this._autostartScheduleId&&(clearTimeout(this._autostartScheduleId),delete this._autostartScheduleId),this._memoryCheckIntervalId&&(clearInterval(this._memoryCheckIntervalId),delete this._memoryCheckIntervalId),gDesigner.removeEventListener(l,this._documentEvent,this)}_checkMemory(){this._calculateThreshold()>=this._memoryUsageThreshold&&(this._openWarningDialog(),this.stop(),this._scheduleStartup())}_calculateThreshold(){const e=gContainer.getMemoryInfo();return e?e.heapSizeInUse/e.heapSizeLimit:0}_scheduleStartup(){this._autostartTime>0&&(this._autostartScheduleId=setTimeout(()=>{this.start()},this._autostartTime))}_openWarningDialog(){this._dialog||(gDesigner.stats("memorywarningdialog_open"),this._dialog=a.default.custom({closeCallback:()=>{delete this._dialog},className:"g-memory-warn-dialog",closeable:!1,icon:"info",title:i.GLocale.get(new i.GLocaleKey("GMemoryManager","text.title")).replace("%app",s),subtitle:i.GLocale.get(new i.GLocaleKey("GMemoryManager","text.subtitle")),buttons:[{label:i.GLocale.get(new i.GLocaleKey("GLocale","ok")),onclick:e=>{e.gDialog("close")},highlighted:!0}]}))}_documentEvent(e){e.type===l.Type.Removed&&(gDesigner.hasDocuments()||i.GRendererCtx.freeMemory())}}},function(e,t,n){"use strict";n(18),n(138);var o=n(1);o.GUtil.image2Canvas=function(e,t){if("string"==typeof e){var n=new Image;return e&&e.match(/^(http|https|\/\/)/)?n.crossOrigin="Anonymous":n.crossOrigin=null,n.src=e,n.onload=function(){this.image2Canvas(n,t)}.bind(this),null}var o=document.createElement("canvas");return o.width=e.naturalWidth,o.height=e.naturalHeight,o.getContext("2d").drawImage(e,0,0),t&&t(o),o},o.GUtil.image2Base64=function(e,t){var n=this.image2Canvas(e,(function(e){t&&t(e.toDataURL("image/png"))}));return n?n.toDataURL("image/png"):null}},function(e,t,n){"use strict";function o(e,t){let n,o,i=this;return function(){return o=Array.prototype.slice.call(arguments,0),n=clearTimeout(n,o),n=setTimeout((function(){e.apply(i,o),n=0}),t),this}}$.expr[":"].editable=function(e){const t=$(e);if("true"===t.attr("contenteditable")||e.isContentEditable)return!0;if(t.is("input")){const e=t.attr("type");return!e||""===e||"text"===e||"password"===e||"email"===e||"number"===e||"month"===e||"search"===e||"tel"===e||"week"===e||"url"===e||"time"===e||"datetime"===e||"datetime-local"===e||"date"===e}return!!t.is("textArea")},$.expr[":"].textSelectable=function(e){return"text"===$(e).css("user-select")},$.extend($.fn,{debounce:function(e,t,n){return this.bind(e,o.apply(this,[t,n])),this}})},function(e,t,n){"use strict";n(1).GUtil.prepareForSaving=function(e,t){}},function(e,t,n){"use strict";"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n},window.CustomEvent.prototype=window.Event.prototype),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},n(1666)},function(e,t,n){"use strict";n(7),function(){function e(){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{e(n.result)},n.onerror=t,n.readAsArrayBuffer(this)})}"File"in self&&(File.prototype.arrayBuffer=File.prototype.arrayBuffer||e),"Blob"in self&&(Blob.prototype.arrayBuffer=Blob.prototype.arrayBuffer||e)}()},function(e,t,n){"use strict";n(51),n(3);var o=n(1),i=n(13),a=n(9),r=n(34);function s(){}o.GObject.inherit(s,o.GEvent),s.prototype._startX=0,s.prototype._startY=0,s.prototype._timerHandle=null,s.prototype._mouseMove=null,s.prototype._mouseUp=null,s.prototype._mouseDown=null,s.prototype._isTouchDevice=!1,s.prototype._event=null,s.prototype._touching=!1,s.prototype._clearRequestTimeout=function(e){e&&(window.cancelAnimationFrame?window.cancelAnimationFrame(e.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(e.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(e.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(e.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(e.value):clearTimeout(e.value))},s.prototype._requestTimeout=function(e,t){if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return{value:window.setTimeout(e,t)};var n=(new Date).getTime(),o={};return o.value=requestAnimFrame((function i(){(new Date).getTime()-n>=t?e.call():o.value=requestAnimFrame(i)})),o},s.prototype._clearLongPressTimer=function(){this._clearRequestTimeout(this._timerHandle),this._timerHandle=null},s.prototype._cancelEvent=function(e){e.stopImmediatePropagation(),e.preventDefault(),e.stopPropagation()},s.prototype._mouseDownHandler=function(e){if(e.defaultPrevented)return void this._clearLongPressTimer();let{clientX:t,clientY:n}=e;"touchstart"===e.type&&e.changedTouches&&e.changedTouches[0]&&({clientX:t,clientY:n}=e.changedTouches[0]),this._startX=t,this._startY=n,this._startLongPressTimer(e)},s.prototype._startLongPressTimer=function(e){this._clearLongPressTimer(),this._event=e;var t=e.target,n=parseInt(t.getAttribute("data-long-press-delay")||a.LONG_PRESS_TIME_OUT,10);this._timerHandle=this._requestTimeout(this._fireLongPressEvent.bind(this),n)},s.prototype._fireLongPressEvent=function(){this._clearLongPressTimer();var e=this._event.target,t=this._isTouchDevice?this._event.touches[0].clientX:this._event.clientX,n=this._isTouchDevice?this._event.touches[0].clientY:this._event.clientY,o=e.dispatchEvent(new CustomEvent("long-press",{bubbles:!0,cancelable:!0,detail:{clientX:t,clientY:n}})),i=this._event.target.parentElement&&this._event.target.parentElement.className&&-1===this._event.target.parentElement.className.indexOf("g-scene-widget");if(o&&i){const e=t=>{t.isTrusted&&(document.removeEventListener("touchend",e,!0),document.removeEventListener("mouseup",e,!0),this._cancelEvent(t))};document.addEventListener("touchend",e,!0),document.addEventListener("mouseup",e,!0)}},s.prototype.startup=function(){if(this._isTouchDevice=i.GPlatform.constructor.isTouchDevice,this._mouseDown=this._isTouchDevice?"touchstart":"mousedown",this._mouseUp=this._isTouchDevice?"touchend":"mouseup",this._mouseMove=this._isTouchDevice?"touchmove":"mousemove",document.addEventListener(this._mouseUp,this._clearLongPressTimer.bind(this),!0),document.addEventListener(this._mouseMove,this._mouseMoveHandler.bind(this),!0),document.addEventListener("wheel",this._clearLongPressTimer.bind(this),!0),document.addEventListener("scroll",this._clearLongPressTimer.bind(this),!0),document.addEventListener(this._mouseDown,this._mouseDownHandler.bind(this)),this._isTouchDevice&&i.GPlatform.webBrowser===i.GPlatform.constructor.WebBrowser.Safari){const e=!(0,r.isPassiveSupported)()||{passive:!0,capture:!0};document.addEventListener("touchstart",this._documentTouchStart.bind(this),e),document.addEventListener("touchend",this.documentTouchEnd.bind(this),e),document.addEventListener("touchcancel",this.documentTouchEnd.bind(this),e),document.addEventListener("mousedown",this._documentMouseDown.bind(this),!0)}},s.prototype._documentTouchStart=function(e){e.isTrusted&&(this._touching=!0)},s.prototype.documentTouchEnd=function(e){e.isTrusted&&(this._touching=!1)},s.prototype._documentMouseDown=function(e){e.isTrusted&&this._touching&&e.cancelable&&e.stopImmediatePropagation()},s.prototype._mouseMoveHandler=function(e){if("touchmove"===e.type){const{clientX:t,clientY:n}=e.changedTouches[0];if(Math.abs(t-this._startX)<a.MIN_TOUCH_MOVE_DISTANCE&&Math.abs(n-this._startY)<a.MIN_TOUCH_MOVE_DISTANCE)return}this._clearLongPressTimer()},s.prototype.toString=function(){return"[Object GLongPressEvent]"},(new s).startup(),e.exports=s},function(e,t,n){n(1669),n(1670),n(1671),n(1672),n(1674),n(1675),n(1676),n(1677),n(1678),n(1679),n(1680),n(1683),n(1684),n(1686),n(1687),n(1688),n(1689),n(1690),n(1691),n(1692),n(1693),n(1694),n(1695),n(1696),n(1697),n(1239),n(1698),n(1699),n(1700),n(836),n(1701),n(1702),n(1703),n(1704),n(1705),n(1313),n(1706),n(1268),n(1707),n(1708),n(1709)},function(e,t,n){"use strict";var o=n(14),i=n(13),a=o(n(1316)),r=o(n(1320)),s={init:function(e){e=$.extend({selector:null,submitCallback:null,noDblClickEdit:!1},e);var t=this;return this.each((function(){if($(t).data("gautoedit",{options:e,input:null}),!e.noDblClickEdit){var n=$(t).data("gautoedit");$(t).on("dblclick",(function(e){s.open.call(t,n)}))}}))},open:function(e){var t=this,n=$(this);e.input&&s.close.call(this,e);var o,l=e.options.containerSelector?n.find(e.options.containerSelector):e.options.getContainer&&"function"==typeof e.options.getContainer?e.options.getContainer():n,c=e.options.textSelector?n.find(e.options.textSelector).text():l.text(),d=l.offset();e.value=c,e.options.textarea?(o=$("<textarea>"),e.options.textareaResizable||o.css({resize:"none"})):o=$("<input>").attr("type","text"),e.options.style&&"object"==typeof e.options.style&&o.css(e.options.style),gDesigner.isTouchEnabled()&&document.addEventListener("click",(function n(o){$(o.target).hasClass("g-auto-edit")||(document.removeEventListener("click",n,!0),s.submit.call(t,e))}),!0),e.input=o.css({position:"absolute",left:d.left+"px",top:d.top+"px",width:l.outerWidth()+"px",height:l.outerHeight()+"px"}).addClass("g-auto-edit").val(e.value).on("blur",()=>{s.submit.call(t,e)}).on("keydown",n=>{if(i.GKey.translateCode(n.code)===i.GKey.Constant.TAB){s.submit.call(t,e);const o=n.shiftKey?r.default.Type.Previous:r.default.Type.Next;return gDesigner.executeAction("".concat(r.default.ID,".").concat(o),[r.default.Mode.Focus]),gDesigner.executeAction(a.default.ID),!1}}).on("keyup",(function(n){switch(i.GKey.translateKey(n.keyCode)){case i.GKey.Constant.ENTER:s.submit.call(t,e);break;case i.GKey.Constant.ESC:s.close.call(t,e)}})).appendTo($("body")).focus().select()},submit:function(e){var t=$(this),n=e.input?e.input.val():null;s.close.call(this,e),n&&e.value!==n&&(e.options.submitCallback?e.options.submitCallback.call(this,n):t.trigger("submitvalue",n))},close:function(e){$(this);e.input&&(e.input.remove(),e.input=null,e.value=null)}};$.fn.gAutoEdit=function(e){return s[e]?s[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):s.init.apply(this,arguments)}},function(e,t,n){"use strict";n(28);var o=n(1);var i={init:function(e){e=$.extend({},e);const t=[{group:null,options:[{type:o.GPaintCanvas.BlendMode.Normal,name:o.GLocale.getValue("GPaintCanvas","blend.normal"),isCompatible:!0}]},{group:o.GLocale.getValue("GAppearanceProperties","text.darken-image"),options:[{type:o.GPaintCanvas.BlendMode.Darken,name:o.GLocale.getValue("GPaintCanvas","blend.darken"),isCompatible:!0},{type:o.GPaintCanvas.BlendMode.Multiply,name:o.GLocale.getValue("GPaintCanvas","blend.multiply"),isCompatible:!0},{type:o.GPaintCanvas.BlendMode.ColorBurn,name:o.GLocale.getValue("GPaintCanvas","blend.colorburn"),isCompatible:!0},{type:o.GPaintCanvas.BlendMode.Subtract,name:o.GLocale.getValue("GPaintCanvas","blend.subtract"),isCompatible:!1},{type:o.GPaintCanvas.BlendMode.LinearBurn,name:o.GLocale.getValue("GPaintCanvas","blend.linearburn"),isCompatible:!1}]},{group:o.GLocale.getValue("GAppearanceProperties","text.lighten-image"),options:[{type:o.GPaintCanvas.BlendMode.Lighten,name:o.GLocale.getValue("GPaintCanvas","blend.lighten"),isCompatible:!0},{type:o.GPaintCanvas.BlendMode.Screen,name:o.GLocale.getValue("GPaintCanvas","blend.screen"),isCompatible:!0},{type:o.GPaintCanvas.BlendMode.ColorDodge,name:o.GLocale.getValue("GPaintCanvas","blend.colordodge"),isCompatible:!0},{type:o.GPaintCanvas.BlendMode.LinearDodge,name:o.GLocale.getValue("GPaintCanvas","blend.lineardodge"),isCompatible:!1},{type:o.GPaintCanvas.BlendMode.Add,name:o.GLocale.getValue("GPaintCanvas","blend.add"),isCompatible:!1}]},{group:o.GLocale.getValue("GAppearanceProperties","text.boost-contrast"),options:[{type:o.GPaintCanvas.BlendMode.Overlay,name:o.GLocale.getValue("GPaintCanvas","blend.overlay"),isCompatible:!0},{type:o.GPaintCanvas.BlendMode.SoftLight,name:o.GLocale.getValue("GPaintCanvas","blend.softlight"),isCompatible:!0},{type:o.GPaintCanvas.BlendMode.HardLight,name:o.GLocale.getValue("GPaintCanvas","blend.hardlight"),isCompatible:!0},{type:o.GPaintCanvas.BlendMode.VividLight,name:o.GLocale.getValue("GPaintCanvas","blend.vividlight"),isCompatible:!1},{type:o.GPaintCanvas.BlendMode.LinearLight,name:o.GLocale.getValue("GPaintCanvas","blend.linearlight"),isCompatible:!1},{type:o.GPaintCanvas.BlendMode.PinLight,name:o.GLocale.getValue("GPaintCanvas","blend.pinlight"),isCompatible:!1},{type:o.GPaintCanvas.BlendMode.HardMix,name:o.GLocale.getValue("GPaintCanvas","blend.hardmix"),isCompatible:!1}]},{group:o.GLocale.getValue("GAppearanceProperties","text.adjust-colors"),options:[{type:o.GPaintCanvas.BlendMode.Hue,name:o.GLocale.getValue("GPaintCanvas","blend.hue"),isCompatible:!0},{type:o.GPaintCanvas.BlendMode.Saturation,name:o.GLocale.getValue("GPaintCanvas","blend.saturation"),isCompatible:!0},{type:o.GPaintCanvas.BlendMode.Color,name:o.GLocale.getValue("GPaintCanvas","blend.color"),isCompatible:!0},{type:o.GPaintCanvas.BlendMode.Luminosity,name:o.GLocale.getValue("GPaintCanvas","blend.luminosity"),isCompatible:!0}]},{group:o.GLocale.getValue("GAppearanceProperties","text.invert-colors"),options:[{type:o.GPaintCanvas.BlendMode.Difference,name:o.GLocale.getValue("GPaintCanvas","blend.difference"),isCompatible:!0},{type:o.GPaintCanvas.BlendMode.Exclusion,name:o.GLocale.getValue("GPaintCanvas","blend.exclusion"),isCompatible:!0},{type:o.GPaintCanvas.BlendMode.Divide,name:o.GLocale.getValue("GPaintCanvas","blend.divide"),isCompatible:!1},{type:o.GPaintCanvas.BlendMode.Power,name:o.GLocale.getValue("GPaintCanvas","blend.power"),isCompatible:!1},{type:o.GPaintCanvas.BlendMode.Harmonic,name:o.GLocale.getValue("GPaintCanvas","blend.harmonic"),isCompatible:!1},{type:o.GPaintCanvas.BlendMode.Sin,name:o.GLocale.getValue("GPaintCanvas","blend.sin"),isCompatible:!1}]}];return this.each((function(){const e=$(this);for(let n=0;n<t.length;++n){let o=e;const{group:i,options:a}=t[n];i&&(o=$('<optgroup label="'+i+'"></optgroup>'),e.append(o)),a.forEach(e=>{let{type:t,name:n,isCompatible:i}=e;o.append($("<option></option>").attr("value",t).text("".concat(n).concat(i?"":" *")))})}}))}};$.fn.gBlendMode=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):i.init.apply(this,arguments)}},function(e,t,n){"use strict";n(17),n(22);var o=n(1),i=null;function a(e){for(var t=0;t<i.length;++t)if(i[t].type===e)return i[t].icon;return null}function r(e){for(var t=0;t<i.length;++t)$('button[data-corner-type="'+i[t].type+'"]').toggleClass("g-active",i[t].type===e)}var s={init:function(e){return e=$.extend({rotate:0},e),i||(i=[{type:o.GPathBase.CornerType.Rounded,title:o.GLocale.get(new o.GLocaleKey("GPathBase","corner.rounded")),icon:"gravit-icon-corner-rounded"},{type:o.GPathBase.CornerType.InverseRounded,title:o.GLocale.get(new o.GLocaleKey("GPathBase","corner.inverse-rounded")),icon:"gravit-icon-corner-inverse-rounded"},{type:o.GPathBase.CornerType.Bevel,title:o.GLocale.get(new o.GLocaleKey("GPathBase","corner.bevel")),icon:"gravit-icon-corner-bevel"},{type:o.GPathBase.CornerType.Inset,title:o.GLocale.get(new o.GLocaleKey("GPathBase","corner.inset")),icon:"gravit-icon-corner-inset"},{type:o.GPathBase.CornerType.Fancy,title:o.GLocale.get(new o.GLocaleKey("GPathBase","corner.fancy")),icon:"gravit-icon-corner-fancy"}]),this.each((function(){var t=this,n=$(this).data("gcornertype",{cornerType:null,notOverlay:e.notOverlay,rotate:e.rotate}),a=function(){for(var a=[],r=100/i.length,l=0;l<i.length;++l)a.push({width:Math.round(r)+"%",content:$("<button></button>").addClass("g-flat").toggleClass("g-active",i[l].type===n.data("gcornertype").cornerType).attr("data-corner-type",i[l].type).attr("data-title",i[l].title).append($("<span></span>").addClass(i[l].icon).css("transform","rotate("+e.rotate+"deg)")).on("click",(function(){var i=$(this).attr("data-corner-type");s.value.call(t,i),n.trigger("cornertypechange",i);var a="unkn",r=Object.keys(o.GPathBase.CornerType);for(var l of r)if(i===o.GPathBase.CornerType[l]){a=l;break}gDesigner.stats("cornertypes_click_change",a),e.notOverlay||c.gOverlay("close")}))});var c=$("<div></div>").css("width",e.notOverlay?"100%":"200px").gPropertyRow({columns:a});e.notOverlay?n.append(c):c.on("open",(function(){n.trigger("open")})).on("close",(function(){n.trigger("close")})).gOverlay({releaseOnClose:!0,clazz:"corner-picker-overlay"}).gOverlay("open",t)};e.notOverlay?a():n.append("<span></span>").on("click",(function(){gDesigner.stats("cornertypes_click_open"),a()}))}))},value:function(e){var t=$(this),n=t.data("gcornertype");return arguments.length?(n.cornerType=e,n.notOverlay?(t.find("."+a(n.cornerType)),r(n.cornerType)):t.find("span").attr("class",a(n.cornerType)).css("transform","rotate("+n.rotate+"deg)"),this):n.cornerType},update:function(e){r(e)}};$.fn.gCornerTypePicker=function(e){return s[e]?s[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):s.init.apply(this,arguments)}},function(e,t,n){"use strict";n(3);var o=n(45),i=n(1),a=n(13);const r=n(1673);function s(){}i.GObject.inheritAndMix(s,i.GObject);var l={init:function(e){return e=$.extend({},e),this.each((function(){var t=this,n=$(this);n.addClass("g-button").data("g-eye-dropper",{picker:null,documentMove:null,documentMouseDown:null,documentKeyDown:null,rgba:null}).attr("data-title",i.GLocale.get(new i.GLocaleKey("GEyeDropper","text.tooltip"))).append($("<span></span>").addClass("gravit-icon-picker")).on("click",(function(o){n.closest(".g-disabled").length||(e.onClick?e.onClick.call(this):gDesigner.stats("eyedropper_click_pick"),o.stopPropagation(),o.preventDefault(),l.setActive.call(t,!l.isActive.call(t),o.pageX,o.pageY))}))}))},isActive:function(){var e=$(this).data("g-eye-dropper");return!!e&&!!e.picker},setValue:function(e){const t=$(this),n="string"==typeof e?e:i.GPattern.asCSSBackground(e);t.find(".g-eye-dropper-preview-color-difference").find(".current").css({background:n});const o=t.data("g-eye-dropper")||{};o.currentColor=n,t.data("g-eye-dropper",o)},setActive:function(e,t,n){if(e!==l.isActive.call(this)){var s=$(this),c=s.data("g-eye-dropper"),d=function(){gDesigner.getToolManager().removeEventListener(o.GToolManager.ToolChangedEvent,d,this),$(".g-eye-dropper-picker").remove()}.bind(this);if(e){var u=gDesigner.getWindows().getActiveWindow();if(!u)return;s.addClass("g-active");for(var p=u.getView().getSceneCanvas().getBitmap().getHTMLElement(!0),g=i.GPaintCanvas.getScreenDPI(),h=$("<canvas></canvas>").attr({width:135,height:135}).addClass("g-cursor-pixel g-eye-dropper-preview"),f=$("<span></span>").addClass("g-eye-dropper-preview-color"),m=$("<span/>").addClass("g-eye-dropper-preview-color-difference").append($("<div/>").addClass("color-preview").addClass("current").css({background:c.currentColor})).append($("<div/>").addClass("color-preview").addClass("new")),y=$("<div/>").addClass("g-eye-dropper-color-pointer"),v=h[0].getContext("2d"),_=["imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled"],b=0;b<_.length;++b){var w=_[b];if(CanvasRenderingContext2D.prototype.hasOwnProperty(w)){v[w]=!1;break}}c.picker=$("<div></div>").addClass("g-eye-dropper-picker g-cursor-pixel").append(h).append(f).append(m).append(y).appendTo($("body"));var C=function(e){return 1==e.length?"0"+e:e};function x(e,t){if(v.setTransform(1,0,0,1,0,0),u.viewContainsMouse(e,t)){var n=e*g,o=t*g;n=Math.max(0,Math.min(n,p.width)),o=Math.max(0,Math.min(o,p.height));var a=p.getContext("2d").getImageData(n,o,1,1).data,r=C(a[0].toString(16))+C(a[1].toString(16))+C(a[2].toString(16));r=r.toUpperCase(),c.rgba=a;const i=gDesigner.isTouchEnabled()?10:5;h.css("box-shadow","0 0 0 ".concat(i,"px rgb(")+a[0]+","+a[1]+","+a[2]+")"),f.text("R:"+a[0]+" G:"+a[1]+" B:"+a[2]+" #"+r),f.css({display:"block",top:t+5+"px",left:e-55+"px"}),m.find(".new").css({background:"#"+r}),y.css({display:"block",top:t-5+"px",left:e-5+"px"}),m.css({display:"block",top:t-76+"px",left:e-78+"px"}),v.clearRect(0,0,135,135),v.drawImage(p,e*g-8,t*g-8,16,16,0,0,135,135)}else c.rgba=null,h.css("box-shadow",""),f.css({display:"none"}),m.css({display:"none"}),y.attr("style","display: none !important"),v.clearRect(0,0,135,135),v.fillStyle="rgba(0,0,0,0.75)",v.scale(.9,.9),v.fillText(i.GLocale.get(new i.GLocaleKey("GEyeDropper","text.preview")),10,72,135)}gDesigner.isTouchEnabled()&&(c.draggablePoint=new r(h.get(0),e=>{const t=h.get(0).getBoundingClientRect();let n=e.pageX,o=e.pageY;n-=t.width-8,o-=t.height-30,n+=8,o+=8,h.css({left:n+"px",top:o+"px"});const i=h.get(0).getBoundingClientRect(),a=i.left+i.width/2,r=i.top+i.height/2;x.call(this,a,r)},()=>{l.setActive.call(this,!1),c.rgba&&s.trigger("colorchange",[c.rgba])})),c.documentMove=function(e){if(gDesigner.isTouchEnabled())return;const t=e.pageX,n=e.pageY,o=h.get(0).getBoundingClientRect(),i=t-o.width/2+8,a=n-o.height/2+8;h.css({left:i+"px",top:a+"px"}),x.call(this,t,n)}.bind(this),c.documentMouseDown=function(e){gDesigner.isTouchEnabled()?l.isActive.call(this)?l.setActive.call(this,!1):l.setActive.call(this,!0):(l.setActive.call(this,!1),c.rgba&&s.trigger("colorchange",[c.rgba]))}.bind(this),c.documentKeyDown=function(e){a.GKey.translateKey(e.keyCode)===a.GKey.Constant.ESC&&l.setActive.call(this,!1)}.bind(this),"number"==typeof t&&"number"==typeof n&&(gDesigner.isTouchEnabled()?c.draggablePoint.moveTo(t,n,!0):c.documentMove({pageX:t,pageY:n})),document.addEventListener("keydown",c.documentKeyDown),document.addEventListener("mousedown",c.documentMouseDown),document.addEventListener("mousemove",c.documentMove),gDesigner.getToolManager().addEventListener(o.GToolManager.ToolChangedEvent,d,this)}else document.removeEventListener("keydown",c.documentKeyDown),document.removeEventListener("mousedown",c.documentMouseDown),document.removeEventListener("mousemove",c.documentMove),gDesigner.getToolManager().removeEventListener(o.GToolManager.ToolChangedEvent,d,this),c.picker.remove(),c.picker=null,c.documentKeyDown=null,c.documentMouseDown=null,c.documentMove=null,c.draggablePoint&&c.draggablePoint.unmount(),s.removeClass("g-active")}}};e.exports=s,$.fn.gEyeDropper=function(e){return l[e]?l[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):l.init.apply(this,arguments)}},function(e,t,n){"use strict";var o=n(34);function i(e,t,n){this.element=e,this.mouseMoveCallback=t||o.fakeFunction,this.mouseUpCallback=n||o.fakeFunction,this.init()}i.prototype.init=function(){this._handleMouseDown=this._handleMouseDown.bind(this),this._onDragStart=this._onDragStart.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.element.addEventListener("mousedown",this._handleMouseDown),this.element.style.position="absolute"},i.prototype._updateElementOffset=function(e,t){const n=this.element.getBoundingClientRect();this._offsetX=e-n.left,this._offsetY=t-n.top},i.prototype._resetElementOffset=function(){this._offsetX=0,this._offsetY=0},i.prototype._hasElementOffset=function(){return!!this._offsetX&&!!this._offsetY},i.prototype._handleMouseDown=function(e){e.preventDefault(),e.stopPropagation(),this._resetElementOffset(),document.addEventListener("mousemove",this._onMouseMove),document.addEventListener("mouseup",this._onMouseUp),this.element.addEventListener("dragstart",this._onDragStart),this.moveTo(e.pageX,e.pageY)},i.prototype.moveTo=function(e,t,n){n?this._resetElementOffset():this._hasElementOffset()||this._updateElementOffset(e,t),this.mouseMoveCallback({elementX:e-this._offsetX,elementY:t-this._offsetY,centerX:e-this._offsetX/2,centerY:t-this._offsetY/2,pageX:e,pageY:t})},i.prototype._onMouseMove=function(e){this.moveTo(e.pageX,e.pageY)},i.prototype._onDragStart=function(){return!1},i.prototype._onMouseUp=function(e){this.unmount(),this.mouseUpCallback(e)},i.prototype.unmount=function(){document.removeEventListener("mousemove",this._onMouseMove),document.removeEventListener("mouseup",this._onMouseUp),this.element.removeEventListener("mousedown",this._handleMouseDown),this.element.removeEventListener("dragstart",this._onDragStart)},e.exports=i},function(e,t,n){"use strict";n(7);var o=n(1),i=n(34),a=n(238),r=n(1095),s=n(1175),l=n(77),c=n(37);const{GPlatform:d}=n(13);function u(){}o.GObject.inheritAndMix(u,o.GObject),u.DISABLE_LOCAL_FONTS_ACCESS_WARING="disable-local-fonts-access-warning",u._showLocalFontsAccessDialog=async function(){if(gDesigner.getSetting(u.DISABLE_LOCAL_FONTS_ACCESS_WARING,!1))return!1;if(!window.queryLocalFonts)return c.alert(o.GLocale.get(new o.GLocaleKey("GLocalFontsProvider","text.current-browser-unsupported"))),!1;if("denied"===(await navigator.permissions.query({name:"local-fonts"})).state){const e=[{label:o.GLocale.get(new o.GLocaleKey("GLocale","close")),highlighted:!0,shortcut:c.Shortcut.Enter,closeOnClick:!0}];let t=o.GLocale.get(new o.GLocaleKey("GLocalFontsProvider","text.permission-required-subtitle-others"));d.webBrowser===d.constructor.WebBrowser.Edge&&(t=o.GLocale.get(new o.GLocaleKey("GLocalFontsProvider","text.permission-required-subtitle-edge"))),c.custom({icon:"error",className:"g-local-fonts-warning-dialog",closeable:!0,title:o.GLocale.get(new o.GLocaleKey("GLocalFontsProvider","text.permission-required-title")),subtitle:t,buttons:e,dontShowAgainCb:e=>{gDesigner.setSetting(u.DISABLE_LOCAL_FONTS_ACCESS_WARING,!!e)}})}return!1};var p=function(){return gContainer.getRuntime()!==l.Runtime.Browser&&gContainer.getRuntime()!==l.Runtime.Chrome&&gContainer.getRuntime()!==l.Runtime.PWA},g=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;var r=$("<a></a>").data("provider",t).addClass("tablinks").append(o.GLocale.get(e)).on("click",i.watchDog.trap((function(t){n?gDesigner.stats("fonts_click_protab",o.GLocale.get(e,void 0,o.GLocaleLanguage.English)):gDesigner.stats("fonts_click_tab",o.GLocale.get(e,void 0,o.GLocaleLanguage.English));var i=$(t.target),r=i.closest(".tab");r.find(".tablinks").removeClass("active"),i.addClass("active");var l=i.data("provider");if(l)l==s&&u._showLocalFontsAccessDialog(),a.enableProviders([l]);else{var c=[];if(r.find(".tablinks:not(.active)").each((function(){var e=$(this).data("provider");e&&c.push(e)})),!p()){var d=gContainer.getSystemFontsProvider();d||c.push(d)}c.length&&a.disableProviders(c)}}),()=>!n,t=>{gDesigner.stats("fonts_nonprotriespro_protab",o.GLocale.get(e))},n)),l=$("<li></li>").addClass("tablink").gPro({pro:!!n,feature:n}).append(r);return l},h=function(e,t){if(e){var n=e.data("gfontsbutton");n&&n.fontList&&n.fontList.gFontsPanel("search",t,e.val())}};const f=function(){const e=$(this).data("gfontsbutton");e&&(e.fontListContainer&&e.fontListContainer.gOverlay("close",this),e.options&&e.options.closeCallback&&e.options.closeCallback.call(this))};var m=function(e){var t=$(e),n=t.data("gfontsbutton");if(!n.fontList){var i=$("<div></div>").addClass("header");n.fontList=$("<div></div>").on("mousedown",(function(e){n.mouseMoved=!1})).on("mousemove",(function(e){n.mouseMoved||(n.mouseMoved=!0)})).on("mouseup",(function(t){"_SPECIAL_"===t.target.name||"g-fonts-panel"===t.target.className||n.mouseMoved?n.mouseMoved=!1:gDesigner.isTouchEnabled()||f.call(e)})).gFontsPanel({preview:i,changeCallback:function(n){t.val(n.displayName||n.family);var o=t.data("gfontsbutton");o.tempFontFamily=n.displayName||n.family,o.options.assignFontCallback(""===n.family?null:n.family,t),setTimeout((function(){e.select()}),1),gDesigner.isTouchEnabled()&&f.call(e)}});var l=$("<div></div>").addClass("g-fonts-panel").addClass("no-overflow").append(function(e){var t=$("<ul></ul>").addClass("tab").append(g(new o.GLocaleKey("GFontsButton","text.web-fonts")));if(t.append(g(new o.GLocaleKey("GFontsButton","text.imported-fonts"),r,"font.import")),gContainer.supportsLocalFonts()&&t.append(g(new o.GLocaleKey("GFontsButton","text.system-fonts"),s)),p()){var n=gContainer.getSystemFontsProvider();n&&t.append(g(new o.GLocaleKey("GFontsButton","text.system-fonts"),n))}return t.find(".tablinks:first").trigger("click"),t}());n.fontListContainer=$("<div></div>"),n.fontListContainer.append(l);n.fontListContainer.append(n.fontList).gOverlay({releaseOnClose:!1,padding:!1,enterCallback:function(e){$(".g-fonts-panel").trigger("keydown",[e.which||e.keyCode])},clazz:"g-font-list-overlay"}).on("close",function(e,t,n){a.getInstance()&&a.getInstance().getLock()&&t()}.bind(e))}},y={getFontList:function(){var e=$(this).data("gfontsbutton");return e?(e.fontList||m(this),e.fontList):null},init:function(e){return this.each((function(){var t=this,n=$(this);e=$.extend({closeCallback:function(){},assignFontCallback:function(){}},e),n.data("gfontsbutton",{options:e,tempFontName:void 0,tempFontFamily:void 0,fontList:void 0,fontContainer:void 0,mouseMoved:!1}).on("focusin",(function(e){n.attr("type","text")})).on("focusout",(function(e){n.attr("type","button");var t=n.data("gfontsbutton").tempFontName;t&&t.length&&!n.val().length&&n.val(t)})).on("input",(function(e){h(n,n.val())})).on("keydown",(function(e){var o=n.data("gfontsbutton");if(o&&o.fontList){var i=o.fontList,a=o.fontListContainer,r=e.which||e.keyCode;40===r?i.gFontsPanel("selectLower"):38===r?i.gFontsPanel("selectUpper"):13===r&&a&&(a.gOverlay("close",t),n.data("gfontsbutton").options.closeCallback.call(t))}})).on("click",(function(e){gDesigner.stats("fonts_expand_textfield"),h(n,""),"text"!==n.attr("type")&&(n.attr("type","text"),t.select()),n.data("gfontsbutton").tempFontFamily=n.val();var o=n.data("gfontsbutton").fontList,i=n.data("gfontsbutton").fontListContainer;o?(i.gOverlay("open",t,t),o.gFontsPanel("refresh",!0)):(m(this),o=n.data("gfontsbutton").fontList,(i=n.data("gfontsbutton").fontListContainer).gOverlay("open",t,t),o.gFontsPanel("refresh"));var a=function(){o.gFontsPanel("selection",n.val()),o.gFontsPanel("focusCurrent"),n.select()};0===o.gFontsPanel("fontsLength")?setTimeout((function(){a()}),100):a()}))})),this}};e.exports=u,$.fn.gFontsButton=function(e){return y[e]?y[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):y.init.apply(this,arguments)}},function(e,t,n){"use strict";n(17),n(7),n(18),n(830),n(22);var o=n(1),i=n(34),a=n(1176),r=n(238);function s(e,t){var n=$(this);n.empty(),n.data("g-fonts-panel").lastPreviewPosition=0,l.call(this,e,t)}function l(e,t){var n=$(this),o=this,a=n.data("g-fonts-panel"),r=e.faces;if(r){var s=function(e,t,n){if(t&&"_SPECIAL_"===t.getAttribute("name"))e.stopPropagation();else{if(t&&!n&&(n=$(t).closest(".fonts-row").data("font")),n.special)return gDesigner.stats("fontspanel_click_deletefont",n.family),void e.stopPropagation();gDesigner.stats("fontspanel_click_setfont",n.family),p.selection.call(o,n.family),a.options.changeCallback&&a.options.changeCallback(n),e.preventDefault()}},l=null;t&&t.length&&(l=t);var u=[],g=[];for(let e=0;e<r.length;++e){const t=r[e];var h=$("<div></div>").addClass("fonts-row").data("font",t).on("mousedown",(function(e){gDesigner.isTouchEnabled()&&!e.originalEvent.isTrusted||s(e,e.target)})).on("click",e=>{gDesigner.isTouchEnabled()&&s(e,e.target)}).append($("<div></div>").addClass("info").text(t.displayname||t.family));u.push(h),t.cachedPreview?($("<div></div>").addClass("preview").append(t.cachedPreview).appendTo(h),a.lastPreviewPosition+=22):t.addPreviewCallback&&(t.row=h,g.push(t))}var f=0;if(l)for(let e=0;e<g.length;e++){const t=g[e];if((t.displayname||t.family).localeCompare(l)>=0){f=e;break}}(0,i.iterateAroundIndex)(g,f,e=>{e.addPreviewCallback.call(e,function(e){this.cachedPreview||(e instanceof Element||e instanceof jQuery)&&(this.cachedPreview=e,a.lastPreviewPosition+=22,function(e,t){null===c&&(c=setTimeout((function(){for(var e of d)e.where.append(e.what);d=[],c=null})));d.push({what:e,where:t})}($("<div></div>").addClass("preview").append(e),this.row))}.bind(e))}),n.append(u),n.on("keydown",(function(e,t){if(13===(t||e.which||e.keyCode)){var n=$(".g-fonts-panel").find(".fonts-row:hover").data("font");n&&n.family&&s(e,null,n)}}))}}var c=null,d=[];function u(e,t){var n=this,o=$(this).data("g-fonts-panel"),i=o.manager;e!==o.previousQuery&&(o.previousQuery=e,i.query(e=>{s.call(n,e,t)},e))}var p={init:function(e){return e=$.extend({search:null,preview:null,changeCallback:null},e),this.each((function(){var t=this,n=gDesigner.getWorkspace().getFontManager().getDefaultFont().getFamily(),o=r.getInstance(),i=$(this).empty().addClass("g-fonts-panel").data("g-fonts-panel",{options:e,lastPreviewPosition:0,search:e.search||null,changeCallback:e.changeCallback||null,manager:o});o.addEventListener(r.ResetEvent,()=>{i.addClass("g-loading"),o.query(e=>{s.call(t,e,n),i.removeClass("g-loading"),n=void 0},"%")}),i.on("scroll",(function(){var e=i.scrollTop(),n=i.data("g-fonts-panel"),o=n.lastPreviewPosition,a=i.height(),r=n.manager;r.isLoading()||e/Math.max(1,o-a)>.7&&r.loadMore(e=>{l.call(t,e,"Open Sans")},n.search)})).on("focusin",(function(e){e.preventDefault()}))}))},selection:function(e){var t=this,n=$(this),o=n.data("g-fonts-panel");if(!arguments.length){var i=n.find(".fonts-row.g-selected");return i.length?i.data("font").family:null}return n.find(".fonts-row").each((function(i,a){var r=$(a),s=r.data("font").family===e;if(r.toggleClass("g-selected",s),s){var c=o.manager;if(!r.data("font").cachedPreview||i>0&&!$(n.find(".fonts-row")[i-1]).data("font").cachedPreview)for(var d=c.loadMore(l.bind(t),o.search);0!==d&&d<i;){if(d>=(d=c.loadMore(l.bind(t),o.search)))break}}})),this},selectUpper:function(){var e=$(this),t=e.data("g-fonts-panel"),n=e.find(".fonts-row.g-selected").prev().data("font");n||(n=e.find(".fonts-row").filter((function(){return $(this).position().top<=$(this).outerHeight()})).data("font")),n&&(p.selection.call(this,n.family),p.focusCurrent.call(this),t.options.changeCallback&&t.options.changeCallback(n))},selectLower:function(){var e=$(this),t=e.data("g-fonts-panel"),n=e.find(".fonts-row.g-selected").next().data("font");n||(n=e.find(".fonts-row").filter((function(){return $(this).position().top<=$(this).outerHeight()})).data("font")),n&&(p.selection.call(this,n.family),p.focusCurrent.call(this),t.options.changeCallback&&t.options.changeCallback(n))},search:function(e,t){var n=$(this),o=n.data("g-fonts-panel");return arguments.length?(e!==o.search&&(o.search=e,p.refresh.call(this,!1,t)),this):o.search},focusCurrent:function(){var e,t=$(this),n=t.find(".fonts-row.g-selected"),o=0;n&&n.position()&&(n.position().top>t.height()-n.outerHeight()?(e=n.index(),t.find(".fonts-row:lt("+e+")").each((function(){o+=$(this).outerHeight(!0)})),t.scrollTop(o-t.height()+n.outerHeight(!0))):n.position().top<0&&(e=n.index(),t.find(".fonts-row:lt("+e+")").each((function(){o+=$(this).outerHeight(!0)})),t.scrollTop(o)))},reload:function(e){$(this).data("g-fonts-panel").previousQuery=null,p.refresh.call(this,!1,e)},refresh:function(e,t){var n=$(this),i=n.data("g-fonts-panel"),a=i.search?i.search+"%":"%";a!==i.previousQuery&&(n.empty(),i.lastPreviewPosition=0,n.text(o.GLocale.get(new o.GLocaleKey("GCommonNames","text.loading"))+"..."),e&&(i.search=null),u.call(this,a,t))},stylesForFont:function(e,t){var n=null,o=$(this).data("g-fonts-panel").manager;if(o.isCacheEmpty())return void(t&&o.query(t,"%",!0));let i=(0,a.getFontFamily)(e,o.searchFamilyInCache.bind(o));if(i&&i.fonts&&i.fonts.length){n=[];for(var r=0;r<i.fonts.length;r++)n.push(i.fonts[r].style)}return n},stylesForWeight:function(e,t,n,o){var i=null,r=$(this).data("g-fonts-panel").manager;if(r.isCacheEmpty())return void(n&&r.query(n,"%",!0));let s=(0,a.getFontFamily)(t,r.searchFamilyInCache.bind(r));if(s&&s.fonts&&s.fonts.length){i=[];for(var l=0;l<s.fonts.length;l++)s.fonts[l].weight===e&&(o&&s.fonts[l].hasOwnProperty("family")?s.fonts[l].family===t&&i.push(s.fonts[l].style):i.push(s.fonts[l].style))}return i},subfamiliesForWeight:function(e,t,n){var o=null,i=$(this).data("g-fonts-panel").manager;if(i.isCacheEmpty())return void(n&&i.query(n,"%",!0));let r=(0,a.getFontFamily)(t,i.searchFamilyInCache.bind(i));if(r&&r.fonts&&r.fonts.length){o=[];for(var s=0;s<r.fonts.length;s++)r.fonts[s].weight===e&&o.push({realName:r.fonts[s].family||r.family,subFamily:r.fonts[s].subfamily})}return o},weightsForFont:async function(e,t,n){var o=null,i=$(this).data("g-fonts-panel").manager;if(i.isCacheEmpty())return void(t&&i.query(t,"%",!0));let r=(0,a.getFontFamily)(e,i.searchFamilyInCache.bind(i));if(r.isLocalFont&&(r.fonts=await(0,a.parseNativeFonts)(r.fonts),delete r.isLocalFont),r&&r.fonts&&r.fonts.length){o=[];for(var s=0;s<r.fonts.length;s++)n&&r.fonts[s].hasOwnProperty("family")&&r.fonts[s].family===e&&o.push(r.fonts[s].weight),o.push(r.fonts[s].weight)}return o},fontDisplayName:function(e,t){var n=$(this).data("g-fonts-panel").manager;if(n.isCacheEmpty())return void(t&&n.query(t,"%",!0));let o=(0,a.getFontFamily)(e,n.searchFamilyInCache.bind(n));return o&&(o.displayname||o.family)||e},fontsLength:function(){return $(this).find(".fonts-row").length}};$.fn.gFontsPanel=function(e){return p[e]?p[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):p.init.apply(this,arguments)}},function(e,t,n){"use strict";var o=n(14);n(181),n(18),n(3),n(29);var i=n(1),a=n(13);n(1235);var r=o(n(1254)),s={value:function(e){var t=$(this),n=t.data("ginputbox");function o(e){if(n){var t=null;"undefined"!=typeof gDesigner&&gDesigner.getActiveDocument()&&(t=gDesigner.getActiveDocument().getScene().getProperty("ut"));var o=n.options&&n.options.postfix!==t?n.options.postfix:null;if(e&&e.length&&n&&o){var i=e.lastIndexOf(o);i>=0&&(e=e.substr(0,i))}}return e}function a(e){if(n){var t=""===(e=o(e)),a=t?null:i.GLength.parseEquationValue(e),r=n.options?n.options.minValue:null,s=n.options?n.options.maxValue:null;"number"!=typeof r&&"number"!=typeof s||("number"==typeof a&&isFinite(a)||t&&n.options.allowEmptyValue?"number"==typeof r&&null!==a&&a<r?e=r.toString():"number"==typeof s&&null!==a&&a>s&&(e=s.toString()):e="number"==typeof r?r.toString():s.toString())}return e}function r(e){if((e||0===e)&&(e=(e=e.toString()).replace(",",".")),n){if(e=a(e),n.options.allowEmptyValue||e||(e="0"),n.options.replace&&null!==n.options.replace.oldValue&&e===n.options.replace.oldValue)return t.val(n.options.replace.newValue);var o=null;"undefined"!=typeof gDesigner&&gDesigner.getActiveDocument()&&(o=gDesigner.getActiveDocument().getScene().getProperty("ut"));var i=n.options&&n.options.postfix!==o?n.options.postfix:null;e&&e.length&&i&&e.substr(e.length-i.length)!==i&&(e+=i)}var r=t[0];return r&&(r.value=e),t}if(arguments.length)return r(e);var s=t.val();s=o(s);var l=""===s,c=l?null:i.GLength.parseEquationValue(s);return s=a(s),n&&(n.options.allowEmptyValue||s&&null!==c&&isFinite(c))||(s="0"),s},increment:function(e,t,n){var o=$(this),a=o.data("ginputbox"),r=parseFloat(i.GUtil.parseNumber(s.value.call(this)));if("number"==typeof r&&!isNaN(r)&&a){var l,c=e?a.options.fastIncrementValue:t&&"%"!==a.options.postfix?a.options.slowIncrementValue:a.options.incrementValue,d=2;"undefined"!=typeof gDesigner&&gDesigner.getActiveDocument()&&(l=gDesigner.getActiveDocument().getScene().getProperty("ut"),d=gDesigner.getActiveDocument().getScene().getOptimalDecimalsCount()),l!==i.GLength.Unit.IN&&l!==i.GLength.Unit.CM||a.options.postfix!==l&&null!==a.options.postfix||a.fixedIncrement||(c*=.1),c<1&&0==d&&(c=1),n?r-=c:r+=c,s.value.call(this,i.GUtil.formatNumber(r,d)),o.change()}},mousemoveIncrement:function(e,t,n,o){var a=$(this),r=a.data("ginputbox");if("number"==typeof n&&!isNaN(n)&&r){var l,c=e?r.options.fastIncrementValue*o:t&&"%"!==r.options.postfix?o*r.options.slowIncrementValue:o,d=2;"undefined"!=typeof gDesigner&&gDesigner.getActiveDocument()&&(l=gDesigner.getActiveDocument().getScene().getProperty("ut"),d=gDesigner.getActiveDocument().getScene().getOptimalDecimalsCount()),l!==i.GLength.Unit.IN&&l!==i.GLength.Unit.CM||r.options.postfix!==l&&null!==r.options.postfix||r.fixedIncrement||(c*=.1),c<1&&0==d&&(c=1);var u=n+c;return s.value.call(this,i.GUtil.formatNumber(u,d)),a.change(),u}},onFocusIn:function(){var e=$(this);e.data("ginputbox").receivingFocus=!0,e.css("border","1px solid rgba(215, 46, 99, 0.3)")},onFocusOut:function(){var e=$(this);e.data("ginputbox").insideClicked=!1,e.data("ginputbox").leftMouseMoved=!1,e.css("border","")},requestFocus:function(){var e=$(this),t=e.data("ginputbox");t.receivingFocus&&(t.options.selectOnFocus&&e.select(),t.receivingFocus=!1)},onMouseEnter:function(){var e=$(this),t=e.data("ginputbox");!t.insideClicked&&t.options.mousemoveIncrement&&(e.css("cursor","url(assets/cursor/cursor-scrub.svg) 16 16, auto"),e.css("border","1px solid rgba(215, 46, 99, 0.3)"))},onMouseLeave:function(){var e=$(this),t=e.data("ginputbox");t.leftMouseMoved||t.insideClicked||!t.options.mousemoveIncrement||(e.css("cursor",""),e.css("border",""))},leftMouseDown:function(e){var t=$(this),n=t.data("ginputbox");if(n.strValue=t.val(),!n.insideClicked&&n.options.mousemoveIncrement){t.css("border","1px solid rgba(215, 46, 99, 0.3)"),n.leftMouseMoved=!1;var o=parseFloat(i.GUtil.parseNumber(s.value.call(this)));""===n.strValue&&isNaN(o)&&(o=0);var r=null,l=t.scrollParent();"undefined"!=typeof gDesigner&&l&&gDesigner.isTouchDevice()&&l.css("overflow-y","hidden");var c=function(e){e.originalEvent.cancelable&&e.preventDefault();var i=0,l=e.pageY||e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&e.originalEvent.changedTouches[0].pageY;null===r?($("html").css("cursor","url(assets/cursor/cursor-scrub.svg) 16 16, auto"),$("html").css("user-select","none"),$("body").css("pointer-events","none"),n.leftMouseMoved=!0,r=l):(i=r-l,r=l),o=s.mousemoveIncrement.call(t[0],a.GPlatform.modifiers.shiftKey||e.shiftKey,a.GPlatform.modifiers.optionKey||e.altKey,o,i)};t.on("touchmove",c),$("html").bind("mousemove",c),$("html").bind("mouseup",(function e(o){$("body").css("pointer-events",""),$("html").css("cursor",""),$("html").css("user-select",""),$("html").unbind("mousemove",c),$("html").unbind("mouseup",e),t.off("touchmove",c),"undefined"!=typeof gDesigner&&!gDesigner.isTouchDevice()&&n.leftMouseMoved&&t.blur(),"undefined"!=typeof gDesigner&&gDesigner.isTouchDevice()&&(l&&l.css("overflow-y","auto"),t.is(":focus")||t.css("border",""))}))}},leftMouseUp:function(){var e=$(this),t=e.data("ginputbox");t.options.mousemoveIncrement&&(t.leftMouseMoved||(t.insideClicked=!0,e.css("cursor","")),"undefined"!=typeof gDesigner&&gDesigner.isTouchDevice()&&t.leftMouseMoved&&t.strValue===e.val()&&e.trigger("focus"))},isInit:function(){return!!$(this).data("ginputbox")},init:function(e){return this.each((function(){var t=this,n=$(this);e=$.extend({selectOnFocus:!0,triggerChangeOnEnter:!0,keyIncrement:!0,wheelIncrement:!0,mousemoveIncrement:!0,incrementValue:1,fastIncrementValue:10,slowIncrementValue:.1,fixedIncrement:!1,minValue:null,maxValue:null,postfix:null},e),n.data("ginputbox",{options:e,receivingFocus:!1,enterKeyValue:void 0,insideClicked:!1,leftMouseMoved:!1,strValue:void 0}).prop("draggable",!1),e.created||n.on("change",(function(e){s.value.call(t,n.val())})).on("focusin",(function(e){s.onFocusIn.call(t)})).on("focusout",(function(e){s.onFocusOut.call(t)})).on("click",(function(e){s.requestFocus.call(t)})).on("wheel",(function(e){if(n.data("ginputbox").options.wheelIncrement&&n.is(":focus")){e.preventDefault();var o=0!=e.originalEvent.deltaX?e.originalEvent.deltaX:e.originalEvent.deltaY;s.increment.call(t,a.GPlatform.modifiers.shiftKey||e.shiftKey,a.GPlatform.modifiers.optionKey||e.altKey,o>0)}})).on("keydown",(function(e){var o=n.data("ginputbox");38!=e.keyCode&&40!==e.keyCode||!o.options.keyIncrement||(e.preventDefault(),s.increment.call(t,a.GPlatform.modifiers.shiftKey||e.shiftKey,a.GPlatform.modifiers.optionKey||e.altKey,40===e.keyCode),n.trigger("focus")),13===e.keyCode&&o.options.triggerChangeOnEnter&&n.blur()})).on("mouseenter",(function(e){r.default.isEnabled()&&(e.preventDefault(),s.onMouseEnter.call(t))})).on("mouseleave",(function(e){r.default.isEnabled()&&s.onMouseLeave.call(t)})).on("mousedown",(function(e){r.default.isEnabled()&&1===e.which&&(s.leftMouseDown.call(t,e),$(this).parents(".properties-panel").addClass("noscroll"))})).on("mouseup",(function(e){r.default.isEnabled()&&1===e.which&&(s.leftMouseUp.call(t),$(this).parents(".properties-panel").removeClass("noscroll"))}))})),this}};$.fn.gInputBox=function(e){return s[e]?s[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):s.init.apply(this,arguments)}},function(e,t,n){"use strict";n(28);var o=n(1);const i=n(223),a=n(429);var r={value:function(e){return arguments.length>0?($(this).find("input").gInputBox("value",e),this):$(this).find("input").gInputBox("value")},init:function(e){return this.each((function(){e=o.GUtil.extend({list:[]},e);const t=new i;e.list.map(e=>"object"!=typeof e?{title:e,data:e}:e).forEach(e=>{let{title:n,data:o}=e;return t.createAddItem(n).setData(o)});const n=$(this);n.addClass("g-input-select").append($("<input/>").attr("type","text").gInputBox(e).on("change",()=>n.trigger("change"))).append($("<button></button>").css("display",e.list.length?"":"none").on("click",e=>{t.open(e.target,a.Position.Right_Bottom,a.Position.Right_Bottom,t=>{$(e.target).closest(".g-input-select").find("input").val(t.getData()).trigger("change")})}))})),this}};$.fn.gInputSelect=function(e){return r[e]?r[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.gInputSelect"):r.init.apply(this,arguments)}},function(e,t,n){"use strict";var o=n(1),i={value:function(e){const t=$(this);return arguments.length>0?(t.prop("checked",!!e),this):i.isChecked.call(this)},unmount(){const e=$(this);return e.removeClass("g-checkbox-slider"),e},isChecked:function(){return $(this).is(":checked")},init:function(e){return this.each((function(){const t=$(this);e=o.GUtil.extend({onChange:function(){}},e);const n=i.isChecked.call(this);t.addClass("g-checkbox-slider").prop("type","checkbox").prop("checked",n).toggleClass("checked",n).on("change",(function(t){const n=i.isChecked.call(this);$(this).toggleClass("checked",n),e.onChange(n)}))})),this}};$.fn.gCheckboxSlider=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.gCheckboxSlider"):i.init.apply(this,arguments)}},function(e,t,n){"use strict";var o=n(1),i={value:function(e){var t=i.options.call(this).unit;if(arguments.length>0){if(e){var n=gDesigner.getActiveDocument(),a=n?n.getScene():null;$(this).gInputBox("value",o.GUtil.formatNumber(e.toUnit(t),a?a.getOptimalDecimalsCount(t):2))}else $(this).val("");return this}var r=o.GLength.parseEquation($(this).val(),t);return r?r.convert(t):new o.GLength(0,t)},list:function(e){i.options.call(this).list=e},options:function(){return $(this).data("ginputbox").options},init:function(e){return(e=$.extend({unit:o.GLength.Unit.PX,created:!1},e)).postfix=e.unit,this.each((function(){var t=$(this),n=this;$(this).hasClass("g-unitbox")?e.created=!0:t.addClass("g-unitbox").attr("type","text"),t.gInputBox("isInit")||t.gInputBox(e);var a=function(){let e=t.gInputBox("value"),n=$(".g-unitbox.option-list").find(".option-item");if(n.removeClass("g-selected"),e)for(let t=0;t<n.length;++t){let o=n[t];$(o).data("value")==e&&$(o).addClass("g-selected")}};t.on("change",(function(){a()})),e.list&&(t.unbind("click"),t.on("click",(function(r){gDesigner.stats("unitbox_"+(e.source||"")+"_button");for(var s=$("<div></div>").addClass("g-unitbox").addClass("option-list"),l=$("<div></div>"),c=0;c<e.list.length;c++)$("<div></div>").addClass("option-item").text(e.list[c]+" "+e.postfix).data("value",e.list[c]).on("mousedown",(function(){i.value.call(n,new o.GLength($(this).data("value"),e.unit)),t.trigger("change"),l.gOverlay("close")})).appendTo(s);l.append(s).gOverlay({releaseOnClose:!0,padding:!1,enterCallback:function(){var a=$(".g-unitbox.option-list").find(".option-item:hover");a.length>0&&(i.value.call(n,new o.GLength($(a).data("value"),e.unit)),t.trigger("change")),l.gOverlay("close")}}),l.css("min-width",t.outerWidth()),l.gOverlay("open",n),a(),t.gInputBox("requestFocus")})))})),this}};$.fn.gUnitBox=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):i.init.apply(this,arguments)}},function(e,t,n){"use strict";var o=n(14);n(17),n(51),n(84),n(22);var i=n(45),a=n(1),r=n(13),s=n(34),l=n(61),c=n(1327),d=o(n(548)),u=o(n(125)),p=n(436).GVirtualTree,g=n(436).GVirtualTreeNodeNamed,{VTREE_FREE_HEIGHT:h,VTREE_FREE_HEIGHT_TOUCH:f}=n(9),m=n(435),y=["name"];function v(){}function _(e,t,n,o,i){var a=!0,r=$(this).data("glayerpanel");if(r.options.canDropCallback){for(var s=e.id?T.call(this,e.id):r.scene?r.scene.getActivePage():null,l=n?T.call(this,n.id):null,c=[],d=0;d<o.length;++d)c.push(T.call(this,o[d].id));var u=[];if(a=r.options.canDropCallback(s,l,c,u))for(d=0;d<u.length;++d){var p=u[d];i.push(o[p])}}return a}function b(e,t,n,o){if(!n||!n.length||!e)return!1;if(!gDesigner.isEnabledProFeatures()){if((0,s.isSymbolInstance)(e))return!1;if(n.some(e=>e instanceof a.GSymbol)&&(0,s.isSymbol)(e))return!1}for(var r=!0,l=0;l<n.length&&r;++l)(r=!e.isLocked()&&n[l].validateInsertion(e,t)&&i.GEditor.validateBlockInsertion(e,n[l],t))&&o.push[l];return r}function w(e,t,n,o){var i=$(this).data("glayerpanel");if(i.options.moveCallback){for(var a=e.id?T.call(this,e.id):i.scene?i.scene.getActivePage():null,r=n?T.call(this,n.id):null,s=[],l=0;l<o.length;++l)s.push(T.call(this,o[l].id));i.options.moveCallback(a,r,s)}}function C(e,t,n,o){var i=$(this).data("glayerpanel");if(i.options.duplicateCallback){for(var a=e.id?T.call(this,e.id):i.scene?i.scene.getActivePage():null,r=n?T.call(this,n.id):null,s=[],l=0;l<o.length;++l)s.push(T.call(this,o[l].id));i.options.duplicateCallback(a,r,s)}}function x(e){var t=$(this).data("glayerpanel");if(t.options.clickCallback){var n=T.call(this,e.id);t.options.clickCallback(n)}}function S(e){var t=T.call(this,e.id);t&&(e.expanded?t.setFlag(a.GNode.Flag.Expanded):t.removeFlag(a.GNode.Flag.Expanded))}function E(e,t){var n=$(this).data("glayerpanel");n&&n.options&&n.options.renderer&&n.options.renderer(e.id,e.expanded,t),Y.call(this)}function A(e){var t=$(this);e.id===p.COLLAPSE_ID?$(e).addClass(t.data("glayerpanel").options.collapseStyle):e.id===p.EXPAND_ID&&$(e).addClass(t.data("glayerpanel").options.expandStyle)}function T(e){var t=$(this).data("glayerpanel").layersTreeNodeMap[e];return t?t.node:null}function G(e){return $(this).data("glayerpanel").layersTreeNodeMap[e]}function P(e){var t=$(this).data("glayerpanel").layersTreeNodeMapByNodes.get(e);return t?t.treeId:null}function D(e){var t=$(this).data("glayerpanel").layersTreeNodeMapByNodes.get(e);return t?t.treeNode:null}function L(e){var t=$(this).data("glayerpanel").layersTreeNodeMap,n=$(this).data("glayerpanel").layersTreeNodeMapByNodes;e.accept(function(e){if(e instanceof a.GLayer||e instanceof a.GItem){var o=n.get(e);o&&(n.delete(e),t[o.treeId]=null)}}.bind(this))}function I(e,t,n){var o=$(this).data("glayerpanel"),r=G.call(this,e),s=r?r.node:null;if(s){var{parentHidden:u,isHidden:p,lockType:g,isOutlined:h,hasSelection:f}=(0,c.getLayerOrItemStatus)(s),{container:y,title:v,titleGroup:_}=(0,c.buildLayerItemContainer)(n,s,f,t);r.element=_;var b=this;if(s.hasFlag(a.GElement.Flag.PartialLocked)||_.attr("draggable",!0).attr("data-drag-mode",d.default.PRESS_AND_HOLD).on("dragstart",(function(e){if(o.options.startDraggingCallback){var t=o.options.startDraggingCallback(s);if(t&&t.length){var n="",i=t[0].getProperty("name");(i=i||t[0].getNodeNameTranslated())&&(n=i);for(var a=1;a<t.length;++a)(i=(i=t[a].getProperty("name"))||t[a].getNodeNameTranslated())&&(n+=", "+i);n.length&&$(v).html(n);var r=o.vtree,l=[];for(a=0;a<t.length;++a){var c=D.call(b,t[a]);c&&l.push(c)}r.setDragNodes(l),setTimeout(function(){$(v).html(i)}.bind(this),0)}else $(this).attr("draggable",!1)}})),!o.blockHighlight){var w=s.hasFlag(a.GNode.Flag.Highlighted);w||t||!s.hasMixin(a.GNode.Container)||(w=s.acceptChildren((function(e){return e.hasFlag(a.GNode.Flag.Highlighted)}),!1,!0)),y.toggleClass("g-highlighted-row",w)}!g&&gDesigner.getActiveDocument()&&gDesigner.getApplicationManager().isEditingEnabled()&&$(_).gAutoEdit({textSelector:"> .layer-title",getContainer:function(){return G.call(b,e).element},submitCallback:function(e){e&&""!==e.trim()&&i.GEditor.tryRunTransaction(s,(function(){s.setProperty("name",e)}),a.GLocale.get(new a.GLocaleKey("GLayerPanel","action.rename-layer")))}});var C=R(s);C&&!C.inSync(s,!0)&&$("<span></span>").addClass("layer-action layer-synchronize gravit-icon-refresh").attr("data-title",a.GLocale.get(new a.GLocaleKey("GLayerPanel","action.reset-instance"))).on("click",(function(e){gDesigner.stats("layers_click_symbol-reset"),e.stopPropagation(),i.GEditor.tryRunTransaction(s,(function(){C.synchronize(s)}),a.GLocale.get(new a.GLocaleKey("GLayerPanel","action.reset-instance")))})).appendTo(y);var x=g?"gravit-icon-lock":"gravit-icon-unlock";x=gDesigner.isTouchEnabled()?x+"-small":x,$("<span></span>").addClass("layer-action layer-lock "+x).toggleClass("g-active",!!g).attr("data-title",a.GLocale.get(new a.GLocaleKey("GCommonNames","action.toggle-lock"))).on("click",(function(e){e.stopPropagation(),J.toggleLockStatusOfLayerOrItem(s)})).appendTo(y).gRichTooltip(l.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.layer-toggle-lock-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.layer-toggle-lock-tooltip-description")),learnMore:"https://documentation.corelvector.com/organizing-your-designs/objects/#locking-objects"})),y.toggleClass("layer-hidden",p);var S=p?"gravit-icon-hide":"gravit-icon-display";if(S=gDesigner.isTouchEnabled()?S+"-small":S,$("<span></span>").addClass("layer-action layer-visibility "+S).toggleClass("g-active",p).attr("data-title",a.GLocale.get(new a.GLocaleKey("GCommonNames","action.toggle-visibility"))).on("click",(function(e){e.stopPropagation(),J.toggleHideStatusOfLayerOrItem(s)})).appendTo(y).gRichTooltip(l.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.layer-toggle-visibility-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.layer-toggle-visibility-tooltip-description")),learnMore:"https://documentation.corelvector.com/organizing-your-designs/objects/#hiding-objects"})),s instanceof a.GLayer){$("<span></span>").addClass("layer-action layer-outline gravit-icon-"+(h?"ellipse":"circle")).toggleClass("g-active",h).attr("data-title",a.GLocale.get(new a.GLocaleKey("GLayerPanel","action.toggle-outline"))).on("click",(function(e){gDesigner.stats("layers_toggle_outline"),e.stopPropagation();var t=$(this);u||i.GEditor.tryRunTransaction(s,(function(){s.setProperty("otl",!s.getProperty("otl")),t.toggleClass("gravit-icon-ellipse",s.getProperty("otl")),t.toggleClass("gravit-icon-circle",!s.getProperty("otl"))}),a.GLocale.get(new a.GLocaleKey("GLayerPanel","action.toggle-outline")))})).gRichTooltip(l.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.layer-toggle-outline-tooltip-title")),learnMore:"https://documentation.corelvector.com/organizing-your-designs/layer-groups/#extra-properties-of-the-layer-groups"})).appendTo(y);$("<span></span>").addClass("layer-color").gPatternChooser({types:[a.GColor],hasOpacity:!1,asButton:!1,simplified:!0}).gPatternChooser("value",s.getProperty("cls")).on("patternchange",(function(e,t,n,o){o||i.GEditor.tryRunTransaction(s,(function(){var e=s.getProperty("cls");s.setProperty("cls",t),s.acceptChildren((function(n){if(n instanceof a.GLayer){var o=n.getProperty("cls");a.GUtil.equals(o,e)&&n.setProperty("cls",t)}}))}),a.GLocale.get(new a.GLocaleKey("GLayerPanel","action.change-layer-color")))})).on("chooseropen",(function(){o.options.patternChooserStatusChangeCallBack(!0)})).on("chooserclose",(function(e,t,n){o.options.patternChooserStatusChangeCallBack(!1)})).appendTo(y)}y.contextmenu({context:m.LayerPanel},function(e){if($.inArray(s,gDesigner.getActiveDocument().getEditor().getSelection())<0){var t=$(this).data("glayerpanel");t.options.clickCallback&&t.options.clickCallback(s)}$(gDesigner.getWindows().getHtmlElement()).trigger("contextmenu",e)}.bind(this))}}function k(e,t,n){var o=new g(e);return n&&(o.expanded=!0),$(this).data("glayerpanel").vtree.insertNodeBefore(t,o),o}function O(e,t,n){var o=new g(e);return n&&(o.expanded=!0),$(this).data("glayerpanel").vtree.appendNode(t,o),o}function F(e){$(this).data("glayerpanel").vtree.removeNode(e)}function R(e){do{if(e instanceof a.GSymbol)return e.isMaster()?null:e;e=e.getParent()}while(e);return null}function M(e,t){var n=a.GUtil.uuid(),o=$(this).data("glayerpanel"),i=o.vtree;if(!t&&e.getParent()&&e.getParent().hasMixin(a.GNode.Container)&&!(e.getParent()instanceof a.GScene)&&!(e.getParent()instanceof a.GPage)&&!P.call(this,e.getParent()))return;i.beginUpdate();const r=function(e){let t=e.getPrevious();for(;t&&!(t instanceof a.GElement);)t=t.getPrevious();return t}(e);var s,l=r?D.call(this,r):null;if(l)s=k.call(this,n,l,e.hasFlag(a.GNode.Flag.Expanded));else{var c=e.getParent(),d=!c||c instanceof a.GScene||c instanceof a.GPage?null:D.call(this,c);s=O.call(this,n,d,e.hasFlag(a.GNode.Flag.Expanded))}if(o.layersTreeNodeMap[n]={element:null,node:e,treeNode:s},o.layersTreeNodeMapByNodes.set(e,{element:null,treeNode:s,treeId:n}),e.hasMixin(a.GNode.Container))for(var u=e.getFirstChild();null!==u;u=u.getNext())(u instanceof a.GLayer||u instanceof a.GItem)&&M.call(this,u,t);i.endUpdate()}function N(e){var t=D.call(this,e);t&&(F.call(this,t),L.call(this,e))}function B(e,t){return!e.blockHandlers||!(!e.ignoreBlock||e.ignoreBlock!==t)}function U(e){$(this).data("glayerpanel");var t=e.targetNode;if(t instanceof a.GLayer||t instanceof a.GItem&&!(t instanceof a.GPathBase&&t.getParent()&&(t.getParent()instanceof a.GPGEdge||t.getParent()instanceof a.GCompoundPath.Paths)))switch(e.type){case a.GSymbol.AfterSiblingUpdate.INSERT:M.call(this,t);break;case a.GSymbol.AfterSiblingUpdate.REMOVE:N.call(this,t)}}function j(e){B($(this).data("glayerpanel"),e.node)&&(e.node instanceof a.GLayer||e.node instanceof a.GItem&&!(e.node instanceof a.GPathBase&&e.node.getParent()&&(e.node.getParent()instanceof a.GPGEdge||e.node.getParent()instanceof a.GCompoundPath.Paths))&&!function(e){var t=e.getScene();if(t){var n=e.getPage(),o=t.getActivePage();if(o&&n&&n!==o)return!0}return!1}(e.node))&&M.call(this,e.node)}function K(e){B($(this).data("glayerpanel"),e.node)&&(e.node instanceof a.GLayer||e.node instanceof a.GItem)&&N.call(this,e.node)}function V(e){e.temporary||!$(this).data("glayerpanel").blockHandlers&&(e.properties.some(e=>y.indexOf(e)>=0)||R(e.node))&&(e.node instanceof a.GLayer||e.node instanceof a.GItem)&&$(this).data("glayerpanel").vtree.requestInvalidation()}function H(){$(this).data("glayerpanel").vtree.requestInvalidation()}function W(e){"touch"===e.key&&J._updateLayout.call(this)}function z(e){var t=$(this).data("glayerpanel"),n=$(this).data("glayerpanel").vtree;let{onlyUpdateStyle:o}=t;if(B(t,e.node)){var i=!1;if(e.node instanceof a.GLayer||e.node instanceof a.GItem)if(e.flag===a.GElement.Flag.Hidden||e.flag===a.GElement.Flag.PartialLocked||e.flag===a.GElement.Flag.FullLocked||e.flag===a.GNode.Flag.Selected||e.flag===a.GNode.Flag.Active){var r=e.node.getPage(),s=e.node.getScene(),l=s&&s.getActivePage();l&&r&&l!==r||(i=!0,o||(o=e.flag===a.GNode.Flag.Active))}else if(!t.blockHighlight&&e.flag===a.GNode.Flag.Highlighted){var c=e.node,d=function(e){var t=D.call(this,e);return t&&t.isVisible()}.bind(this);(d(c)||c.findParent(d))&&(i=!0)}if(gDesigner.getSetting("auto_expand_layers")&&e.flag===a.GNode.Flag.Selected&&e.node&&e.node.hasFlag(a.GNode.Flag.Selected)){var u=D.call(this,e.node);u&&(n.expandAndFocus(u,i)?t.currentFocus=u:i=!0)}e.node instanceof a.GPage&&e.flag===a.GNode.Flag.Active&&(X.call(this),q.call(this),i=!1),i&&(o?setTimeout(t=>{Q.call(this,e.node)}):n.requestInvalidation())}}function q(){var e=$(this).data("glayerpanel");if(e.vtree.beginUpdate(),e.scene&&e.scene.getActivePage())for(var t=e.scene.getActivePage().getFirstChild();null!==t;t=t.getNext())(t instanceof a.GLayer||t instanceof a.GItem)&&M.call(this,t,!0);e.vtree.endUpdate(),Y.call(this)}function Y(){gDesigner.isTouchEnabled()&&$(this).parent().css("height",parseInt($(this).find(".vscroller").css("height"),10)+h+"px")}function X(){var e=$(this).data("glayerpanel");e.vtree.clean(),e.layersTreeNodeMap={},e.layersTreeNodeMapByNodes=new Map}function Q(e){$(this).data("glayerpanel");var t=P.call(this,e);if(!t)return null;var n=G.call(this,t);if(!n)return null;var o=n.element,i=o.parent(),r=!1;if(e.hasMixin(a.GNode.Container))for(var s=e.getFirstChild();null!==s&&!r;s=s.getNext())s instanceof a.GItem&&s.hasFlag(a.GNode.Flag.Selected)&&(r=!0);e.getParent()&&e instanceof a.GItem&&Q.call(this,e.getParent()),i.toggleClass("g-active",e.hasFlag(a.GNode.Flag.Active)).toggleClass("g-selected",e.hasFlag(a.GNode.Flag.Selected)).toggleClass("g-has-selection",r),o.toggleClass("g-selected",e.hasFlag(a.GNode.Flag.Selected))}a.GObject.inheritAndMix(v,a.GObject);var J={init:function(e){return e=$.extend({nodeStyle:"layer-row",expandStyle:"layer-arrow gravit-icon-right",collapseStyle:"layer-arrow gravit-icon-down",freeHeight:h,insertIntoStyle:"g-drop",upSeparatorSpan1Style:"g-up-separator-span1",upSeparatorSpan2Style:"g-up-separator-span2",downSeparatorSpan1Style:"g-down-separator-span1",downSeparatorSpan2Style:"g-down-separator-span2",renderer:I.bind(this),expandRenderer:A.bind(this),separatorRenderer:null,canDropCallback:b.bind(this),moveCallback:null,isDuplicateEffectCallback:null,duplicateCallback:null,clickCallback:null,startDraggingCallback:null,patternChooserStatusChangeCallBack:null},e),this.each((function(){$(this).addClass("g-layer-panel").data("glayerpanel",{vtree:new p(this,E.bind(this),e.nodeStyle,e.expandRenderer?e.expandRenderer:null,e.expandStyle==e.collapseStyle?e.expandStyle:null,e.separatorRenderer?e.separatorRenderer:null,e.freeHeight,e.insertIntoStyle,_.bind(this),w.bind(this),e.isDuplicateEffectCallback,C.bind(this),x.bind(this),S.bind(this),e.upSeparatorSpan1Style,e.upSeparatorSpan2Style,e.downSeparatorSpan1Style,e.downSeparatorSpan2Style,!1,15,21),options:e,layersTreeNodeMap:{},layersTreeNodeMapByNodes:new Map,scene:null,currentFocus:null})}))},refresh:function(){$(this).data("glayerpanel").vtree.refresh()},relayout:function(){var e=$(this).data("glayerpanel"),t=e.vtree,n=e.currentFocus;n&&t.expandAndFocus(n),t.requestInvalidation()},scene:function(e){var t=$(this),n=t.data("glayerpanel");if(!arguments.length)return n.scene;if(e!==n.scene){if(n.scene&&n.scene.hasMixin(a.GEventTarget))n.scene.removeEventListener(a.GNode.AfterInsertEvent,n.afterNodeInsertHandler,this),n.scene.removeEventListener(a.GNode.BeforeRemoveEvent,n.beforeNodeRemoveHandler,this),n.scene.removeEventListener(a.GNode.AfterPropertiesChangeEvent,n.afterPropertiesChangeHandler,this),n.scene.removeEventListener(a.GNode.AfterFlagChangeEvent,n.afterFlagChangeHandler,this),n.scene.removeEventListener(a.GSymbol.AfterSiblingUpdate,n.afterSiblingUpdate,this),gDesigner.removeEventListener(u.default,n.settingChangedEvent,this),(o=n.scene.getWorkspace())&&o.getFontManager().removeEventListener(a.GFontManager.FontAvailableEvent,n.fontAvailableEvent,this);if(X.call(this),n.scene=e,n.scene){var o;if(n.scene.hasMixin(a.GEventTarget))n.afterNodeInsertHandler=j.bind(this),n.beforeNodeRemoveHandler=K.bind(this),n.afterPropertiesChangeHandler=V.bind(this),n.afterFlagChangeHandler=z.bind(this),n.afterSiblingUpdate=U.bind(this),n.fontAvailableEvent=H.bind(this),n.settingChangedEvent=W.bind(this),n.scene.addEventListener(a.GSymbol.AfterSiblingUpdate,n.afterSiblingUpdate,this),n.scene.addEventListener(a.GNode.AfterInsertEvent,n.afterNodeInsertHandler,this),n.scene.addEventListener(a.GNode.BeforeRemoveEvent,n.beforeNodeRemoveHandler,this),n.scene.addEventListener(a.GNode.AfterPropertiesChangeEvent,n.afterPropertiesChangeHandler,this),n.scene.addEventListener(a.GNode.AfterFlagChangeEvent,n.afterFlagChangeHandler,this),gDesigner.addEventListener(u.default,n.settingChangedEvent,this),(o=n.scene.getWorkspace())&&o.getFontManager().addEventListener(a.GFontManager.FontAvailableEvent,n.fontAvailableEvent,this);q.call(this),J._updateLayout.call(this)}}return this},blockHandlers:function(e){$(this).data("glayerpanel").blockHandlers=!!e},onlyUpdateStyle:function(e){$(this).data("glayerpanel").onlyUpdateStyle=!!e},ignoreBlock:function(e){$(this).data("glayerpanel").ignoreBlock=e},setBlockHighlight:function(e){$(this).data("glayerpanel").blockHighlight=!!e},getLastVisitedDroppable:function(){return $(this).data("glayerpanel").vtree.getLastVisitedDroppable()},getTreeNode:function(e){var t=null;return $(this).data("glayerpanel")&&(t=D.call(this,e)),t},getItem:function(e){return T.call(this,e.id)},getTitleOfLayer:function(e){return e.children(".layer-title-group")},getSelected:function(){return $(this).children(".g-selected")},toggleLockStatusOfLayerOrItem:function(e){gDesigner.stats("layers_change_locktype");const{parentLockType:t}=(0,c.getLayerOrItemStatus)(e);if(!t||t===a.GBlock.LockType.Partial){let n=e.getProperty("lkt");const o=e.getProperty("plkt");if(n?o&(a.GBlock.ProgramLck.NoEdit|a.GBlock.ProgramLck.NoMove|a.GBlock.ProgramLck.NoNewChildren|a.GBlock.ProgramLck.NoDelete)||(n=null):n=a.GBlock.LockType.Full,t!==a.GBlock.LockType.Partial||null!==n){const t=[];if(r.GPlatform.modifiers.optionKey){for(let o=e.getParent().getFirstChild();null!=o;o=o.getNext()){const e=o.getProperty("lkt");n===e||e===a.GBlock.LockType.Full&&n===a.GBlock.LockType.Partial||t.push(o)}}else t.push(e);t.length&&i.GEditor.tryRunTransaction(e,(function(){for(let e=0;e<t.length;++e)n===a.GBlock.LockType.Full&&t[e].accept(e=>{e.removeFlag(a.GNode.Flag.Selected)}),t[e].setProperty("lkt",n)}),a.GLocale.get(new a.GLocaleKey("GCommonNames","action.toggle-lock")))}}},toggleHideStatusOfLayerOrItem:function(e){gDesigner.stats("layers_toggle_visibility");const{parentHidden:t}=(0,c.getLayerOrItemStatus)(e);if(!t){const t=!e.getProperty("vis"),n=[];if(r.GPlatform.modifiers.optionKey){for(let o=e.getParent().getFirstChild();null!=o;o=o.getNext()){const e=o.getProperty("vis");null!==e&&e!==t&&n.push(o)}}else n.push(e);i.GEditor.tryRunTransaction(e,(function(){for(let e=0;e<n.length;++e)n[e].removeFlag(a.GNode.Flag.Highlighted),n[e].setProperty("vis",t)}),a.GLocale.get(new a.GLocaleKey("GCommonNames","action.toggle-visibility")))}},resetVTreeRowHeight:function(e){$(this).data("glayerpanel").vtree.resetRowHeight(e)},getCurrentFocusedNode:function(){return $(this).data("glayerpanel").currentFocus},setCurrentFocusedNode:function(e){$(this).data("glayerpanel").currentFocus=e},_updateLayout:function(){const e=$(this).data("glayerpanel"),t=e&&e.vtree;if(t){const e=gDesigner.isTouchEnabled();t.setFreeHeight(e?f:h),t.setAnimatedDragEnabled(e)}}};e.exports=v,$.fn.gLayerPanel=function(e){return J[e]?J[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):J.init.apply(this,arguments)}},function(e,t,n){"use strict";function o(e,t,n,o){n=n||0,o=o||30,this._scroller=document.createElement("div"),this._scroller.classList.add("vscroller"),this._container=e,this._container.style.overflow="auto",this._container.style.position="relative",this._container.classList.add("g-virtual-list"),this._container.appendChild(this._scroller),this._container.addEventListener("scroll",this._onScroll.bind(this)),this.beginUpdate(),t&&this._renderer(t),o&&this.rowHeight(o),n&&this.rowCount(n),this.endUpdate()}n(51),n(3),o.prototype._renderer=null,o.prototype._rowHeight=0,o.prototype._rowCount=0,o.prototype._visibleRows=0,o.prototype._cachedRows=0,o.prototype._scroller=null,o.prototype._updateCounter=0,o.prototype._lastRenderScrollTop=0,o.prototype._lastCleanedTime=0,o.prototype._cleanViewportTimerId=null,o.prototype._renderer=function(e){return arguments.length?(this._renderer=e,this._render(),this):this._renderer},o.prototype.rowHeight=function(e){return arguments.length?(this._rowHeight=e,this._updateVisibleRows(),this._updateScroller(),this._render(),this):this._rowHeight},o.prototype.rowCount=function(e){return arguments.length?(this._rowCount=e,this._updateScroller(),this._render(),this):this._rowCount},o.prototype.beginUpdate=function(){this._updateCounter++},o.prototype.endUpdate=function(){0==--this._updateCounter&&this._render()},o.prototype.refresh=function(){return this._updateVisibleRows(),this._updateScroller(),this._render(),this},o.prototype._render=function(){if(0===this._updateCounter){var e=this._container.scrollTop,t=parseInt(e/this._rowHeight)-this._visibleRows;this._renderViewport(t<0?0:t)}return this},o.prototype._updateVisibleRows=function(){this._visibleRows=Math.floor(this._container.offsetHeight/this._rowHeight),this._cachedRows=3*this._visibleRows,this._scrollCacheSize=this._visibleRows*this._rowHeight},o.prototype._updateScroller=function(){this._scroller.style.height=(this._rowCount*this._rowHeight).toString()+"px"},o.prototype._onScroll=function(e){e.preventDefault(),this._requestViewportClean();var t=this._container.scrollTop;(!this._lastRenderScrollTop||Math.abs(t-this._lastRenderScrollTop)>this._scrollCacheSize)&&(this._updateVisibleRows(),this._render(),this._lastRenderScrollTop=t)},o.prototype._renderViewport=function(e){for(var t=1,n=this._container.childNodes.length;t<n;t++)this._container.childNodes[t].style.display="none",this._container.childNodes[t].setAttribute("data-clean","");if(this._rowCount&&this._renderer&&this._rowHeight){for(var o=Math.min(this._rowCount,e+this._cachedRows),i=document.createDocumentFragment(),a=e;a<o;a++){var r=document.createElement("div");r.classList.add("vrow"),r.style.top=a*this._rowHeight+"px",this._renderer(a,r),i.appendChild(r)}this._container.appendChild(i)}},o.prototype._requestViewportClean=function(){null===this._cleanViewportTimerId&&(this._cleanViewportTimerId=setTimeout(function(){Date.now()-this._lastCleanedTime>100&&(this._cleanViewport(),this._lastCleanedTime=Date.now()),this._cleanViewportTimerId=null}.bind(this),300))},o.prototype._cleanViewport=function(){for(var e=this._container.querySelectorAll("div[data-clean]"),t=0,n=e.length;t<n;t++)this._container.removeChild(e[t]),this._jqueryCleanup(e[t])},o.prototype._jqueryCleanup=function(e){window.hasOwnProperty("jQuery")&&jQuery.hasOwnProperty("cleanData")&&jQuery.hasOwnProperty("merge")&&jQuery.cleanData(jQuery.merge(Array.prototype.slice.call(e.querySelectorAll("*")),e))},e.exports=o},function(e,t,n){"use strict";n(7),n(3),e.exports=e=>{e._DragAndDropHelper=function(e){this._vtree=e},e._DragAndDropHelper.prototype._droppableNodeUpper=null,e._DragAndDropHelper.prototype._droppableNodeLower=null,e._DragAndDropHelper.prototype._droppableNodeInside=null,e._DragAndDropHelper.prototype.setDroppableNodeInside=function(e){e&&e===this._droppableNodeInside||this._droppableNodeInside&&this._droppableNodeInside.row.classList.remove(this._vtree._insertIntoStyle),this._droppableNodeInside=e,e&&this._droppableNodeInside.row.classList.add(this._vtree._insertIntoStyle)},e._DragAndDropHelper.prototype.setDroppableNodeLower=function(e){this._droppableNodeLower=e,this._droppableNodeUpper=null;const t=this._vtree._dragNode;this._vtree.beginUpdate(),this._vtree.removeNode(t),this._vtree.insertNodeAfter(e,t),this._vtree.endUpdate(!0)},e._DragAndDropHelper.prototype.setDroppableNodeUpper=function(e){this._droppableNodeUpper=e,this._droppableNodeLower=null;const t=this._vtree._dragNode;this._vtree.beginUpdate(),this._vtree.removeNode(t),this._vtree.insertNodeBefore(e,t),this._vtree.endUpdate(!0)},e._DragAndDropHelper.prototype.drop=function(){const e=this._vtree._dragNode,t=this._vtree._root;if(this._droppableNodeInside){const t=this._droppableNodeInside;this._vtree.beginUpdate(),this._vtree.removeNode(e),this._vtree.appendNode(t,e),this._vtree.endUpdate(!0),this._vtree._dropCallback&&this._vtree._dropCallback(t,null,null,[e])}else if(this._droppableNodeUpper){const n=this._droppableNodeUpper;this._vtree._dropCallback&&(n!==t?this._vtree._dropCallback(n.parent,e.next,e.previous,[e]):this._vtree._dropCallback(t,null,null,[e]))}else if(this._droppableNodeLower){const t=this._droppableNodeLower;this._vtree._dropCallback&&this._vtree._dropCallback(t.parent,e.next,e.previous,[e])}},e._DragAndDropHelper.prototype.toString=function(){return"[Object GVirtualTree._DragAndDropHelper]"}}},function(e,t,n){"use strict";n(17),n(22);n(45);var o=n(1),i=(n(13),n(34),n(61),n(1327)),a=n(436).GVirtualTree,r=(n(436).GVirtualTreeNode,n(436).GVirtualTreeNodeNamed),{VTREE_FREE_HEIGHT:s}=n(9);n(162),n(435);function l(){}function c(e){var t=$(this).data("gselectedpanel"),n=$(this).data("gselectedpanel").vtree;if(t.options.clickCallback){var o=g.call(this,e.id);t.options.clickCallback(o)}n.requestInvalidation()}function d(e){var t=g.call(this,e.id);t&&(e.expanded?t.setFlag(o.GNode.Flag.Expanded):t.removeFlag(o.GNode.Flag.Expanded))}function u(e,t){var n=$(this).data("gselectedpanel");n.options.renderer&&n.options.renderer(e.id,e.expanded,t)}function p(e){var t=$(this);e.id===a.COLLAPSE_ID?$(e).addClass(t.data("gselectedpanel").options.collapseStyle):e.id===a.EXPAND_ID&&$(e).addClass(t.data("gselectedpanel").options.expandStyle)}function g(e){var t=h.call(this,e);return t?t.node:null}function h(e){return $(this).data("gselectedpanel").layersTreeNodeMap[e]}function f(e,t,n){$(this).data("glayerpanel");var o=h.call(this,e),a=o?o.node:null;if(a){var{hasSelection:r}=(0,i.getLayerOrItemStatus)(a),{titleGroup:s}=(0,i.buildLayerItemContainer)(n,a,r,t);o.element=s}}function m(e,t,n){var{newNode:o,vtree:i}=y.call(this,e,n);return i.appendNode(t,o),o}function y(e,t){return{newNode:new r(e,t),vtree:$(this).data("gselectedpanel").vtree}}function v(){var e=$(this).data("gselectedpanel"),t=e.vtree;t.beginUpdate();for(var{elementHits:n,filteredElementHits:i,submenus:a}=e.selections,r=(t,n,o)=>{e.layersTreeNodeMap[o]={element:null,node:n,treeNode:t},e.layersTreeNodeMapByNodes.set(n,{element:null,treeNode:t,treeId:o})},s=0;s<i.length;s++){var l=o.GUtil.uuid(),c=i[s].element,d=(c instanceof o.GBlock?c.getLabel():c.getNodeNameTranslated(),"temp-"+n.indexOf(i[s]));if(a[d]){r(p=m.call(this,l,null,!0),c,l);for(let e=0;e<a[d].length;e++){var u=o.GUtil.uuid();r(m.call(this,u,p,!1),a[d][e],u)}}else{var p;r(p=m.call(this,l,null,!1),c,l)}}t.endUpdate()}function _(){var e=$(this).data("gselectedpanel");e.vtree.clean(),e.layersTreeNodeMap={},e.layersTreeNodeMapByNodes=new Map}o.GObject.inheritAndMix(l,o.GObject);var b={init:function(e){return e=$.extend({nodeStyle:"selected-row",expandStyle:"selected-arrow gravit-icon-right",collapseStyle:"selected-arrow gravit-icon-down",freeHeight:0,insertIntoStyle:"g-drop",upSeparatorSpan1Style:"g-up-separator-span1",upSeparatorSpan2Style:"g-up-separator-span2",downSeparatorSpan1Style:"g-down-separator-span1",downSeparatorSpan2Style:"g-down-separator-span2",renderer:f.bind(this),toggleRenderer:p.bind(this),separatorRenderer:null,canDropCallback:()=>!1,moveCallback:null,isDuplicateEffectCallback:null,duplicateCallback:null,clickCallback:null,startDraggingCallback:null,patternChooserStatusChangeCallBack:null,bottomHeight:3},e),this.each((function(){$(this).addClass("g-selected-panel").data("gselectedpanel",{vtree:new a(this,u.bind(this),e.nodeStyle,e.toggleRenderer?e.toggleRenderer:null,e.expandStyle==e.collapseStyle?e.expandStyle:null,e.separatorRenderer?e.separatorRenderer:null,e.freeHeight,e.insertIntoStyle,()=>!1,null,e.isDuplicateEffectCallback,null,c.bind(this),d.bind(this),e.upSeparatorSpan1Style,e.upSeparatorSpan2Style,e.downSeparatorSpan1Style,e.downSeparatorSpan2Style,!1,15,21,e.bottomHeight,e.renderFinishCallback),options:e,layersTreeNodeMap:{},layersTreeNodeMapByNodes:new Map,selections:null,currentFocus:null})}))},refresh:function(){$(this).data("gselectedpanel").vtree.refresh()},relayout:function(){$(this).data("gselectedpanel").vtree.requestInvalidation()},setSelections:function(e){var t=$(this),n=t.data("gselectedpanel");return arguments.length?(e!==n.selections&&(_.call(this),n.selections=e,v.call(this)),this):n.selections}};e.exports=l,$.fn.gSelectedPanel=function(e){return b[e]?b[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):b.init.apply(this,arguments)}},function(e,t,n){"use strict";var o=n(14);n(52),n(17),n(7),n(18),n(99),n(62),n(28),n(22);var i=n(45),a=n(1),r=n(861),s=n(9),l=o(n(1329));const c=n(37),d=n(343),u=n(1330),p=n(1685),g=n(1332),h=n(1331),f=n(1255),m=n(166),y=["text"];function v(){}function _(e){var t=$(this).data("gannotationpanel");if(t.options.clickCallback){var n=x.call(this,e.id);t.options.clickCallback(n)}}function b(e){x.call(this,e.id)&&e.expanded}function w(e,t){var n=$(this).data("gannotationpanel");if(n.options.renderer)return n.options.renderer(e.id,e.virtualNode,t)}function C(e){var t=$(this);e.id===u.COLLAPSE_ID?$(e).addClass(t.data("gannotationpanel").options.collapseStyle):e.id===u.EXPAND_ID&&$(e).addClass(t.data("gannotationpanel").options.expandStyle)}function x(e){var t=$(this).data("gannotationpanel").annotTreeNodeMap[e];return t?t.annot:null}function S(e){return $(this).data("gannotationpanel").annotTreeNodeMap[e]}function E(e){var t=$(this).data("gannotationpanel").annotTreeNodeMapByNodes.get(e);return t?t.treeId:null}function A(e){var t=$(this).data("gannotationpanel").annotTreeNodeMapByNodes.get(e);return t?t.treeNode:null}function T(e){var t=$(this).data("gannotationpanel").annotTreeNodeMap,n=$(this).data("gannotationpanel").annotTreeNodeMapByNodes;e.accept(function(e){var o=n.get(e);o&&(n.delete(e),t[o.treeId]=null)}.bind(this))}function G(e){var t=$(this).data("gannotationpanel"),n=[];if(t.annotTreeNodeMap)for(var o in e instanceof a.GComment&&n.push(E.call(this,e.getParent())),t.annotTreeNodeMap)t.annotTreeNodeMap[o]&&t.annotTreeNodeMap[o].annot&&(t.annotTreeNodeMap[o].annot===e||t.annotTreeNodeMap[o].annot instanceof a.GComment&&t.annotTreeNodeMap[o].annot.getParent()===e)&&n.push(o);return n}function P(){return!!gDesigner.getApplicationManager().isCommentingEditingEnabled()||(c.alert(a.GLocale.get(new a.GLocaleKey("GAnnotationPanel","text.document-approved-no-annotations-update"))),!1)}function D(){const e=$(this).data("gannotationpanel");if(e&&e.syncCallback)try{e.syncCallback()}finally{e.syncCallback=null}}function L(e,t,n){const o=gDesigner.getApplicationManager().isCommentingEditingEnabled();var r=$(this).data("gannotationpanel"),s=S.call(this,e),l=s?s.annot:null,u=null;if(l){var p=!1,f=$(n);if(f.attr("draggable",!1),l.hasMixin(a.GAnnotation)?f.addClass("parent"):f.addClass("child"),!r.showResolved&&(l.hasMixin(a.GAnnotation)&&l.getProperty("rsv")||l instanceof a.GComment&&l.getParent().getProperty("rsv")))return void f.css("display","none");if(f.hover(()=>G.call(this,l).forEach(e=>$("#".concat(e)).addClass("on-hover")),()=>G.call(this,l).forEach(e=>$("#".concat(e)).removeClass("on-hover"))),!(l.hasMixin(a.GAnnotation)?l:l.getParent()).hasFlag(a.GNode.Flag.Selected)&&(l.hasMixin(a.GAnnotation)&&!B(l).length||U(l))&&(p=!0),!r.blockHighlight){var m=l.hasFlag(a.GNode.Flag.Highlighted);!m&&l.hasMixin(a.GNode.Container)&&(m=l.acceptChildren((function(e){return e.hasFlag(a.GNode.Flag.Highlighted)}),!1,!0)),$(f).toggleClass("g-highlighted-row",m)}var y=k.call(this,l),v=S.call(this,y);void 0===v.expanded&&(v.expanded=!0);var _=gDesigner.getActiveDocument();_&&l.getId()===_.getFocusAnnotationId()&&!_.isAnnotationFocused()&&(_.getScene().updateActivePageForElem(v.annot),_.getScene().updateActiveLayerForElem(v.annot),_.setAnnotationFocused(),v.expanded=!0,v.annot.setFlag(a.GNode.Flag.Selected));var b=O.call(this,l);l.hasMixin(a.GAnnotation)&&(u=I.call(this,l,r.showResolved));var w=new h({isCommentingEditingEnable:o,container:f,annotation:l,relatedNodesCount:b,sidebarActive:r.sidebarActive,isLastRow:p,hasResolveAccess:r.vtree.hasResolveAccess(),hasReopenAccess:r.vtree.hasReopenAccess(),mentionData:r.vtree.getMentionData(),onMouseEnter:()=>{l.hasMixin(a.GAnnotation)&&!l.hasFlag(a.GAnnotation.Flag.Hidden)&&l.setFlag(a.GNode.Flag.Highlighted)},onMouseLeave:()=>{l.hasMixin(a.GAnnotation)&&!l.hasFlag(a.GAnnotation.Flag.Hidden)&&l.removeFlag(a.GNode.Flag.Highlighted)},onChange:e=>{P()&&(l.getProperty("text")===e?D.call(this):i.GEditor.tryRunTransaction(l,(function(){l.setProperty("text",e)}),a.GLocale.get(new a.GLocaleKey("GAnnotationPanel","text.edit-comment"))))},onToggleState:()=>{P()&&(i.GEditor.tryRunTransaction(l,(function(){r.showResolved||l.getProperty("rsv")||!l.hasFlag(a.GNode.Flag.Selected)||l.removeFlag(a.GNode.Flag.Selected),l.setProperty("rsv",!l.getProperty("rsv"))}),l.getProperty("rsv")?a.GLocale.get(new a.GLocaleKey("GAnnotationPanel","text.reopen")):a.GLocale.get(new a.GLocaleKey("GAnnotationPanel","text.resolve"))),ne.call(this),te.call(this))},onResolve:()=>{P()&&(i.GEditor.tryRunTransaction(l,(function(){!r.showResolved&&l.hasFlag(a.GNode.Flag.Selected)&&l.removeFlag(a.GNode.Flag.Selected),l.setProperty("rsv",!0)}),a.GLocale.get(new a.GLocaleKey("GAnnotationPanel","text.resolve"))),ne.call(this),te.call(this))},onReopen:()=>{P()&&(i.GEditor.tryRunTransaction(l,(function(){l.setProperty("rsv",!1)}),a.GLocale.get(new a.GLocaleKey("GAnnotationPanel","text.reopen"))),ne.call(this),te.call(this))},onDelete:()=>{P()&&c.confirm(a.GLocale.get(new a.GLocaleKey("GAnnotationPanel","text.confirm-remove")),e=>{e&&d.removeAnnotations([l],l.getParent(),a.GLocale.get(new a.GLocaleKey("GAnnotationPanel","text.remove-".concat(l.hasMixin(a.GAnnotation)?"annotation":"comment"))))},null,null,null,!0,!0)},onCancel:()=>{D.call(this)},onExpandClick:t=>{t.stopPropagation(),v.expanded=!v.expanded;var n=S.call(this,e);try{n.component.setCollapseState(v.expanded)}catch(e){"function"==typeof gdb_showScene&&console.error("REPAIR THIS! component is NULL!")}var o=n.annot;G.call(this,o).forEach((e,t)=>{if(t>0){var n=S.call(this,e);try{n.component.setVisiblity(v.expanded)}catch(e){"function"==typeof gdb_showScene&&console.error("REPAIR THIS! component is NULL!")}}})},onCopyPermalinkClick:async e=>{const t=gDesigner.getActiveDocument();if(t){const n=await gDesigner.getShareManager().getPermalink(t,e);n&&gContainer.copyToClipboard(n)}},onAssignTo:e=>{l.hasMixin(a.GAnnotation)?l.setProperty("asgn",e):l.getParent()&&l.getParent().hasMixin(a.GAnnotation)&&l.getParent().setProperty("asgn",e)},mainAnnotObject:v});s.element=f,s.component=w,r.vtree.addChild(w)}else if(s&&s.replyAnnot){let e=$(n);if(e.addClass("last-row"),!o||!s.replyAnnot.hasFlag(a.GNode.Flag.Selected)||s.replyAnnot.getProperty("rsv")||!r.showResolved&&s.replyAnnot.getProperty("rsv"))return void e.hide();const t=!s.replyAnnot.isFillingCompleted(),l=e=>{if(P()&&(e.length||t&&s.replyAnnot.isEmptyTextAllowed())){let c=gDesigner.getSyncUser();if(d.canUpdate(c)){const d=s.replyAnnot.getScene(),u=d&&i.GEditor.getEditor(d);let p,g;p=t?a.GLocale.get(new a.GLocaleKey("GAnnotationPanel","text.set-annotation-text")):a.GLocale.get(new a.GLocaleKey("GAnnotationPanel","text.add-comment")),u&&u.beginTransaction();try{if(t){s.replyAnnot.setProperty("text",e),s.replyAnnot.setProperty("email",c.getAccountName()),V.call(this,s.replyAnnot);var n=a.GUtil.uuid(),o=A.call(this,s.replyAnnot),l={element:null,annot:null,treeNode:M.call(this,n,o,!0,!0),replyAnnot:s.replyAnnot,treeId:n};r.annotTreeNodeMap[n]=l,r.replyNodes.set(s.replyAnnot,l)}else{V.call(this,s.replyAnnot);const t=s.replyAnnot.addComment(e,c.getUID(),i.GEditorOptions.userConfig.userName,c.avatar,c.getAccountName());g=i.GAnnotationEditor.createAddAnnotationTransactionData([t],s.replyAnnot)}ne.call(this),te.call(this)}catch(e){console.log(e)}finally{u&&u.commitTransaction(p,g)}}H(this,s.replyAnnot)}},c=()=>{H(this,s.replyAnnot),D.call(this)},u=e=>{s.replyAnnot.setProperty("asgn",e)};var C=new g({container:e,annotation:s.replyAnnot,onSubmit:l,onCancel:c,onAssignTo:u,mentionData:r.vtree.getMentionData()}),x=r.annotTreeNodeMapByNodes.get(s.replyAnnot);s.reply=C,r.vtree.addChild(C),x&&(x.reply=C)}return u}function I(e,t){let n=e.getProperty("asgn");if(!(n||[]).length)return;var o=e.getProperty("rsv");let s=$("<div/>").addClass("already-assigned-user-row").appendTo($(this)),l=$("<span/>").addClass("assigned-content-group").appendTo(s);return(0,r.getCollabInfo)(n[0]).then(async n=>{let r=new m(n).getFullUserName();$("<span/>").addClass("assign-to-text").html(a.GLocale.get(new a.GLocaleKey("GAnnotationPanel","text.assigned-to"))+(n&&n.name?r:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.unknown-user")))).appendTo(l);const s=!o;(await s?d.canResolveAnnotation(e):d.canReopenAnnotation(e))&&$("<span/>").addClass("assigned-action-group").append($("<span/>").addClass("icon "+(s?"gravit-icon-resolve":"gravit-icon-resolved")).addClass("assigned-icon-resolve").addClass("assigned-resolve-action").attr("data-title",s?a.GLocale.get(new a.GLocaleKey("GAnnotationPanel","text.assign-resolve")):a.GLocale.get(new a.GLocaleKey("GAnnotationPanel","text.reopen"))).on("click",()=>{P()&&(s?i.GEditor.tryRunTransaction(e,(function(){!t&&e.hasFlag(a.GNode.Flag.Selected)&&e.removeFlag(a.GNode.Flag.Selected),e.setProperty("rsv",!0)}),a.GLocale.get(new a.GLocaleKey("GAnnotationPanel","text.resolve"))):i.GEditor.tryRunTransaction(e,(function(){e.setProperty("rsv",!1)}),a.GLocale.get(new a.GLocaleKey("GAnnotationPanel","text.reopen"))),ne.call(this),te.call(this))})).appendTo(l)}),s}function k(e){return G.call($(this),e)[0]}function O(e){return G.call($(this),e).length}function F(e,t,n){var o=new u.GSimpleTreeNodeNamed(e);return n&&(o.virtualNode=!0),$(this).data("gannotationpanel").vtree.insertNodeAfter(t,o),o}function R(e,t,n){var o=new u.GSimpleTreeNodeNamed(e);return n&&(o.virtualNode=!0),$(this).data("gannotationpanel").vtree.insertNodeBefore(t,o),o}function M(e,t,n,o){var i=new u.GSimpleTreeNodeNamed(e);return n&&(i.virtualNode=!0),$(this).data("gannotationpanel").vtree.appendNode(t,i,o),i}function N(e){$(this).data("gannotationpanel").vtree.removeNode(e)}function B(e){return e.getChildren().filter(e=>e instanceof a.GComment&&!e.getProperty("rmd"))}function U(e){if(!(e instanceof a.GComment))return!1;for(var t=!0,n=e.getNext();n;){if(n instanceof a.GComment&&!n.getProperty("rmd")){t=!1;break}n=n.getNext()}return t}function j(e){var t=gDesigner.getSyncUser();t&&e.getProperty("uid")&&d.isOwner(t,e)?e.$plkt=null:e.$plkt=a.GBlock.ProgramLck.NoSizeChanges|a.GBlock.ProgramLck.NoMove|a.GBlock.ProgramLck.NoDelete}function K(e,t,n){var o=a.GUtil.uuid(),i=$(this).data("gannotationpanel"),r=i.vtree;if(t||!e.getParent()||e.getParent()instanceof a.GAnnotationsList||E.call(this,e.getParent())){var s;if(r.beginUpdate(),e.hasMixin(a.GAnnotation)){V.call(this,e);var l=function(e){for(var t=null,n=e;!t&&n.getPrevious();)n.getPrevious().getProperty("rmd")?n=n.getPrevious():t=n.getPrevious();return t}(e),c=l?A.call(this,l):null;s=c?R.call(this,o,c,!1):M.call(this,o,null,!1)}else{var d=e.getParent();V.call(this,d);var u=A.call(this,d);s=M.call(this,o,u,!1,!0)}var p={element:null,annot:e,treeNode:s,treeId:o};if(i.annotTreeNodeMap[o]=p,i.annotTreeNodeMapByNodes.set(e,p),e.hasMixin(a.GAnnotation)){for(var g=e.getFirstChild();null!==g;g=g.getNext())g instanceof a.GComment&&!g.getProperty("rmd")&&K.call(this,g,t);if(!B(e).length){var h=a.GUtil.uuid(),f={element:null,annot:null,treeNode:e.isFillingCompleted()?M.call(this,h,s,!0,!0):F.call(this,h,s,!0),replyAnnot:e,treeId:h};i.annotTreeNodeMap[h]=f,i.replyNodes.set(e,f)}j(e)}else if(e instanceof a.GComment&&U(e)){let t,n=a.GUtil.uuid();t=F.call(this,n,s,!0);var m=e.getParent();let o={element:null,annot:null,treeNode:t,replyAnnot:m,treeId:n};i.annotTreeNodeMap[n]=o,i.replyNodes.set(m,o)}r.endUpdate(n)}}function V(e){var t=$(this).data("gannotationpanel").replyNodes,n=t.get(e);return n&&(N.call(this,n.treeNode),t.delete(e),$(this).data("gannotationpanel").annotTreeNodeMap[n.treeNode.id]=null),n}function H(e,t){if(t)!t.getParent()||t.getProperty("rmd")||t.isFillingCompleted()||d.removeAnnotations([t],t.getParent(),a.GLocale.get(new a.GLocaleKey("GAnnotationPanel","text.remove-empty-annotation")));else{var n=gDesigner.getActiveDocument();if(n){var o=n.getEditor().getSelection();o&&o.map(t=>{t.hasMixin(a.GAnnotation)&&H(e,t)})}}}function W(e,t){var n=e.data("gannotationpanel").annotTreeNodeMapByNodes.get(t);n&&n.component&&(n.component.cancelEditMode(),n.reply&&n.reply.hide())}function z(e){var t=A.call(this,e);t&&(N.call(this,t),T.call(this,e),V.call(this,e),oe.requestInvalidation.call(this))}function q(e,t){return!e.blockHandlers||!(!e.ignoreBlock||e.ignoreBlock!==t)}function Y(){return!(!$(this).find(".annotations-buttonrow").toArray().some(e=>"none"!==$(e).css("display"))&&!$(this).find(".g-edit-mode").length)}function X(e,t){let n=$(this).data("gannotationpanel"),o=!1;const i={};if(!n)return;if(n.blockAnnotationsUpdate)return;if(null!==n.scheduledUpdate)return void(n.updateInProgress&&(n.scheduleNextUpdate=!0));if(e&&e.node&&e.node.recordedTransaction&&(o=!0,e.properties&&e.values&&e.properties.length===e.values.length))for(var r=0,s=e.values.length;r<s;r++)i[e.properties[r]]=e.values[r];if(e&&e.node){if(e.custom)return;if(e.node.hasMixin(a.GAnnotation)&&e.node.isPropertiesIgnorable(e.properties))return}let l=gDesigner.getActiveDocument();l&&l.getAnnotationsId()&&(n.scheduledUpdate=setTimeout(()=>{let e=$(this).data("gannotationpanel");if(!e)return;if(Y.call(this)||e.vtree.isPendingInvalidation())return e.scheduledUpdate=null,void X.call(this);console.log("updating annotations"),e.updateInProgress=!0;let n=e.page.getAnnotations();d.updateAndReturnCloudAnnotationsForDocument(l,a.GNode.store(n,{recordedTransaction:o,recordedProperties:i})).then(e=>{let n=e.annotationsCollection,r=!1,s=$(this).data("gannotationpanel");if(!s)return r;if(!s.updateInProgress)return r;if(Y.call(this)&&(s.scheduleNextUpdate=!0),s.updateInProgress=!1,!s.scheduleNextUpdate){let e=d.findAnnotationsListForPage(s.page,n);if(e){let n=a.GNode.restore(e),l=n.getChildren();n.clearChildren(),s.vtree.beginUpdate();let c=d.mergeAnnotations(s.page.getAnnotations(),s.page.getAnnotations().getChildren(),n,l,o?i:void 0);r=r||c,s.vtree.endUpdate(t),ne.call(this),te.call(this)}e||(s.vtree.beginUpdate(),s.page.getAnnotations().clearChildren(),s.vtree.endUpdate(t),ne.call(this)),s.options.updateAnnotationCache(n)}if(s.scheduledUpdate=null,s.scheduleNextUpdate&&(s.scheduleNextUpdate=!1,X.call(this)),r){let t=s.page.getScene();t&&t.getLastTimeAnnotationsFromCloudModified()<e.lastUpdateTime&&t.setLastTimeAnnotationsFromCloudModified(e.lastUpdateTime),gDesigner.notifyDocumentModified(l)}return r}).catch(t=>{console.warn("error during annotations list update: "+t),e.scheduledUpdate=null,e.updateInProgress=!1,e.scheduleNextUpdate&&(e.scheduleNextUpdate=!1,X.call(this))})},500))}function Q(e){var t=$(this).data("gannotationpanel");if(q(t,e.node)){const n=e.node.findParent(e=>e instanceof a.GAnnotationsList),o=()=>{const t=new l.default;if(e.node instanceof a.GComment){const n=e.node.getProperty("text");n&&s.NOTIFICATION_USER_MENTION_REGEX.test(n)||(t.collaboratorsCache=!1)}return t};let i=!1;const r=()=>{if(!e.node.getProperty("rmd")){const t=n?l.default.NO_CACHE_INVALIDATION:o();K.call(this,e.node,null,t)}},c=()=>{n&&X.call(this,null,o())};(e.node.hasMixin(a.GAnnotation)||e.node instanceof a.GComment||e.node instanceof a.GAnnotationsList)&&(e.node.getProperty("rmd")?i=!0:r()),i?"number"!=typeof t.delayedUpdate&&(t.delayedUpdate=setTimeout(()=>{r(),c(),t.delayedUpdate=null})):c()}}function J(e){q($(this).data("gannotationpanel"),e.node)&&(z.call(this,e.node),e.node.findParent(e=>e instanceof a.GAnnotationsList)&&X.call(this))}function Z(e){if(!e.temporary&&!$(this).data("gannotationpanel").blockHandlers){e.properties.some(e=>y.indexOf(e)>=0)&&oe.requestInvalidation.call(this);let t=gDesigner.getSyncUser();d.canUpdate(t)&&e.node.hasMixin(a.GAnnotation)&&e.properties.includes("rsv")&&setTimeout(()=>{let n=e.values[e.properties.indexOf("rsv")];(void 0!==n&&!1!==n)!==e.node.getProperty("rsv")&&(V.call(this,e.node),e.node.addComment("",t.getUID(),i.GEditorOptions.userConfig.userName,t.avatar,t.getAccountName(),e.node.getProperty("rsv")?a.GComment.Type.Close:a.GComment.Type.Open))}),(e.node instanceof a.GAnnotationsList||e.node.findParent(e=>e instanceof a.GAnnotationsList))&&(e.node.hasMixin(a.GAnnotation)&&e.properties.indexOf("uid")>=0&&j(e.node),X.call(this,e)),e.properties.includes("rmd")&&e.node.getProperty("rmd")?(e.node.hasMixin(a.GAnnotation)&&W(this,e.node),ne.call(this),te.call(this)):e.properties.includes("text")&&e.node.isFillingCompleted()&&e.node.hasMixin(a.GAnnotation)&&W(this,e.node)}}function ee(e){var t,n=$(this).data("gannotationpanel");if(q(n,e.node)){var o=!1;if(e.node instanceof a.GComment||e.node.hasMixin(a.GAnnotation))if(e.flag===a.GAnnotation.Flag.Hidden||e.flag===a.GNode.Flag.Selected||e.flag===a.GNode.Flag.Active){var r=e.node.getPage(),s=e.node.getScene(),d=s&&s.getActivePage();if(d&&r&&d!==r||(o=!0),e.node.hasMixin(a.GAnnotation)&&e.flag===a.GNode.Flag.Selected&&!1===e.set&&!e.node.isFillingCompleted()&&!(t=e.node).getProperty("rmd")&&t.getParent())if(e.node.isEmptyTextAllowed()){let t=n.annotTreeNodeMapByNodes.get(e.node);t&&t.reply&&t.reply.isVisible()&&setTimeout(()=>t.reply.forceSubmit())}else c.confirm(a.GLocale.get(new a.GLocaleKey("GAnnotationPanel","text.confirm-discard-annotation")),t=>{if(t)setTimeout(()=>{H(this,e.node)});else{gDesigner.getActiveDocument().getEditor().updateSelection(!1,[e.node]),gDesigner.getToolManager().activateTool(i.GPointerTool,null,!0);var o=n.annotTreeNodeMapByNodes.get(e.node);o&&o.reply&&setTimeout(()=>{o.reply.requestFocus()})}})}else if(!n.blockHighlight&&e.flag===a.GNode.Flag.Highlighted){var u=e.node,p=function(e){var t=A.call(this,e);return t&&t.isVisible()}.bind(this);if(p(u)||u.findParent(p)){var g=n.annotTreeNodeMapByNodes.get(u).component;g?g.toggleHighlight(e.set):console.warn("element parent was null")}}o&&oe.requestInvalidation.call(this,l.default.NO_CACHE_INVALIDATION)}}function te(){var e=$(this).data("gannotationpanel");if(e.vtree.beginUpdate(),e.page)for(var t=e.page.getAnnotations().getFirstChild();null!==t;t=t.getNext())t.getProperty("rmd")||K.call(this,t,!0);e.vtree.endUpdate()}function ne(e){var t=$(this).data("gannotationpanel");t.vtree.clean(),t.annotTreeNodeMap={},t.replyNodes=new Map,t.annotTreeNodeMapByNodes=new Map,void 0!==e&&(t.page=e),"number"==typeof t.delayedUpdate&&(clearTimeout(t.delayedUpdate),t.delayedUpdate=null)}a.GObject.inheritAndMix(v,a.GObject);var oe={init:function(e){return e=$.extend({nodeStyle:"annotation-row",expandStyle:"annotation-arrow gravit-icon-right",collapseStyle:"annotation-arrow gravit-icon-down",freeHeight:7,insertIntoStyle:"g-drop",upSeparatorSpan1Style:"g-up-separator-span1",upSeparatorSpan2Style:"g-up-separator-span2",downSeparatorSpan1Style:"g-down-separator-span1",downSeparatorSpan2Style:"g-down-separator-span2",renderer:L.bind(this),expandRenderer:C.bind(this),separatorRenderer:null,moveCallback:null,clickCallback:null,startDraggingCallback:null,updateCommentCount:null},e),this.each((function(){$(this).addClass("g-annotation-panel").data("gannotationpanel",{vtree:new p(this,w.bind(this),e.nodeStyle,e.expandStyle===e.collapseStyle?e.expandStyle:null,_.bind(this),b.bind(this),e.upSeparatorSpan1Style,e.upSeparatorSpan2Style,e.downSeparatorSpan1Style,e.downSeparatorSpan2Style),options:e,annotTreeNodeMap:{},annotTreeNodeMapByNodes:new Map,replyNodes:new Map,page:null,scheduledUpdate:null,scheduleNextUpdate:!1,blockAnnotationsUpdate:!1,updateInProgress:!1,showResolved:"boolean"==typeof e.showResolved&&e.showResolved,currentFocus:null,sidebarActive:e.sidebarActive,syncCallback:null,delayedUpdate:null})}))},requestInvalidation:function(e){$(this).data("gannotationpanel").vtree.requestInvalidation(0,e)},refresh:function(){$(this).data("gannotationpanel").vtree.refresh()},relayout:function(e){var t=$(this).data("gannotationpanel"),n=t.vtree,o=t.currentFocus;o&&n.expandAndFocus(o),e?(ne.call(this),te.call(this)):oe.requestInvalidation.call(this,l.default.NO_CACHE_INVALIDATION)},cleanEmptyAnnotations:function(){H(this)},isEditingOrAddingContent:function(){return $(this).data("gannotationpanel").vtree.isEditingOrAddingContent()},showResolved:function(e){var t=$(this).data("gannotationpanel");t.showResolved!==e&&(t.showResolved=e,ne.call(this),te.call(this))},page:function(e){var t=$(this),n=t.data("gannotationpanel")||{};return arguments.length?(e!==n.page&&(n.page&&n.page.hasMixin(a.GEventTarget)&&(n.page.removeEventListener(a.GNode.AfterInsertEvent,n.afterNodeInsertHandler,this),n.page.removeEventListener(a.GNode.BeforeRemoveEvent,n.beforeNodeRemoveHandler,this),n.page.removeEventListener(a.GNode.AfterPropertiesChangeEvent,n.afterPropertiesChangeHandler,this),n.page.removeEventListener(a.GNode.AfterFlagChangeEvent,n.afterFlagChangeHandler,this),null!==n.scheduledUpdate&&(clearTimeout(n.scheduledUpdate),n.scheduledUpdate=null),n.updateInProgress=!1),ne.call(this,e),n.page=e,n.page&&(n.page.hasMixin(a.GEventTarget)&&(n.beforeNodeRemoveHandler=J.bind(this),n.afterPropertiesChangeHandler=Z.bind(this),n.afterFlagChangeHandler=ee.bind(this),n.afterNodeInsertHandler=Q.bind(this),n.page.addEventListener(a.GNode.AfterInsertEvent,n.afterNodeInsertHandler,this),n.page.addEventListener(a.GNode.BeforeRemoveEvent,n.beforeNodeRemoveHandler,this),n.page.addEventListener(a.GNode.AfterPropertiesChangeEvent,n.afterPropertiesChangeHandler,this),n.page.addEventListener(a.GNode.AfterFlagChangeEvent,n.afterFlagChangeHandler,this)),te.call(this))),this):n.page},setDelayedSyncCallback:function(e){$(this).data("gannotationpanel").syncCallback=e},annotations:function(e){let t=!1;if(Y.call(this))return f.DELAYED;let n=$(this).data("gannotationpanel"),o=a.GNode.restore(e),i=o.getChildren();return o.clearChildren(),n.blockAnnotationsUpdate=!0,n.vtree.beginUpdate(),t=d.mergeAnnotations(n.page.getAnnotations(),n.page.getAnnotations().getChildren(),o,i),n.vtree.endUpdate(),n.blockAnnotationsUpdate=!1,ne.call(this),te.call(this),t?f.UPDATED:f.SKIPPED},blockHandlers:function(e){$(this).data("gannotationpanel").blockHandlers=!!e},ignoreBlock:function(e){$(this).data("gannotationpanel").ignoreBlock=e},setBlockHighlight:function(e){$(this).data("gannotationpanel").blockHighlight=!!e},getTreeNode:function(e){var t=null;return $(this).data("gannotationpanel")&&(t=A.call(this,e)),t},scrollIntoView:function(){const e=$(this).find(".annotation-row.g-selected").attr("id");if(e){const t=S.call(this,e);t&&(t.reply?t.reply.scrollIntoView():t.component&&t.component.scrollIntoView())}},getItem:function(e){return x.call(this,e.id)}};e.exports=v,$.fn.gAnnotationPanel=function(e){return oe[e]?oe[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):oe.init.apply(this,arguments)}},function(e,t,n){"use strict";n(17),n(7),n(28),n(22);const{GObject:o}=n(1),{GPlatform:i}=n(13),a=n(1330),r=n(1167),s=n(1331),l=n(1332),{handleCollabsData:c}=(n(519),n(861)),d=n(1329),u=n(419);function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.call(this,...t),r.call(this)}o.inheritAndMix(p,a,[r]),p.prototype._checkTreeSanity=function(){return!!$(this._container).data("gannotationpanel")},p.prototype.clean=function(){a.prototype.clean.call(this),this.clearChildren()},p.prototype._isInvalidationBlocked=function(){return!!this.isEditingOrAddingContent()},p.prototype.isEditingOrAddingContent=function(){return!!this.getChildren().filter(e=>e instanceof l).some(e=>e.isVisible())||!!this.getChildren().filter(e=>e instanceof s).some(e=>e.isEditMode())},p.prototype._hasResolveAccess=!1,p.prototype._hasReopenAccess=!1,p.prototype._mentionData={},p.prototype.hasResolveAccess=function(){return this._hasResolveAccess},p.prototype.hasReopenAccess=function(){return this._hasReopenAccess},p.prototype.getMentionData=function(){return this._mentionData||{}},p.prototype.getCollaboratorsCache=function(){return this._collaboratorsCache},p.prototype._beforeInvalidationStart=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new d;this.clearChildren();var t=gDesigner.getApplicationManager();this._hasResolveAccess=await t.hasAccess(u.RESOLVE_COMMENT_ANNOTATION),this._hasReopenAccess=await t.hasAccess(u.REOPEN_COMMENT_ANNOTATION);const n=gDesigner.getActiveDocument(),o=gDesigner.getShareManager();e.collaboratorsCache&&o.resetCollaboratorsCached(n),this._collaboratorsCache=o.getCollaboratorsCached(n),this._mentionData=await c(this._collaboratorsCache)},p.prototype._afterInvalidationEnd=function(){this.scrollIntoView(),this._updateCommentStats()},p.prototype.scrollIntoView=function(){$(this._container).gAnnotationPanel("scrollIntoView")},p.prototype._updateCommentStats=function(){let e=0,t=0,n=this.getChildren(),o=$(this._container).data("gannotationpanel"),i=o&&o.options;n&&n.forEach(n=>{n instanceof s&&!n.isParentAnnotationResolved()&&(n.isRead()||t++,e++)}),i&&i.updateCommentCount&&i.updateCommentCount(e,t)},p.prototype.getCommentStats=function(){return this._commentStats},e.exports=p},function(e,t,n){"use strict";!function(e){e.event.special.input={setup:function(t,n){var o,i=this,a=i.value,r=document.createElement(this.tagName),s="oninput"in r||function(e){if(e.setAttribute("oninput","return"),"function"==typeof e.oninput)return!0;try{document.createEvent("KeyboardEvent");var t=!1,n=function(e){t=!0,e.preventDefault(),e.stopPropagation()};return document.body.appendChild(e),e.addEventListener("input",n,!1),e.removeEventListener("input",n,!1),document.body.removeChild(e),t}catch(e){}}(r),l="inputEventNS"+~~(1e7*Math.random()),c=["focus","blur","paste","cut","keydown","drop",""].join("."+l+" ");function d(){var t=e(i);i.value==a||t.data("triggering.inputEvent")||(a=i.value,t.data("triggering.inputEvent",!0).trigger("input"),window.setTimeout((function(){t.data("triggering.inputEvent",!1)}),0))}if(s)return!1;e(this).find("input, textarea").andSelf().filter("input, textarea").bind(c,(function(e){"focus"==e.type?(d(),clearInterval(o),o=window.setInterval(d,250)):"blur"==e.type?window.clearInterval(o):window.setTimeout(d,0)})),e(this).data("inputEventHandlerNS",l)},teardown:function(){var t=e(this);t.find("input, textarea").unbind(t.data("inputEventHandlerNS")),t.data("inputEventHandlerNS","")}},e.fn.input=function(e){return e?this.bind("input",e):this.trigger("input")}}(jQuery)},function(e,t,n){"use strict";n(51),n(18),n(3),n(29),function(e){jQuery.fn.extend({elastic:function(){var t=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight","border-top-width","border-right-width","border-bottom-width","border-left-width","borderTopStyle","borderTopColor","borderRightStyle","borderRightColor","borderBottomStyle","borderBottomColor","borderLeftStyle","borderLeftColor"];return this.each((function(){if("textarea"!==this.type)return!1;var n=jQuery(this),o=jQuery("<div />").css({position:"absolute",display:"none","word-wrap":"break-word","white-space":"pre-wrap"}),i=parseInt(n.css("line-height"),10)||parseInt(n.css("font-size"),"10"),a=parseInt(n.css("height"),10)||3*i,r=parseInt(n.css("max-height"),10)||Number.MAX_VALUE;r<0&&(r=Number.MAX_VALUE),o.appendTo(n.parent());for(var s=t.length;s--;)o.css(t[s].toString(),n.css(t[s].toString()));function l(){var e=Math.floor(parseInt(n.width(),10));o.width()!==e&&(o.css({width:e+"px"}),d(!0))}function c(e,t){var o=Math.floor(parseInt(e,10));n.height()!==o&&n.css({height:o+"px",overflow:t})}function d(e){var t=n.val().replace(/&/g,"&amp;").replace(/ {2}/g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),s=o.html().replace(/<br>/gi,"<br />");if((e||t+"&nbsp;"!==s)&&(o.html(t+"&nbsp;"),Math.abs(o.height()+i-n.height())>3)){var l=o.height()+i;l>=r?c(r,"auto"):c(l<=a?a:l,"hidden")}}n.css({overflow:"hidden"}),n.bind("keyup change cut paste",(function(){d()})),e(window).bind("resize",l),n.bind("resize",l),n.bind("update",d),n.bind("blur",(function(){o.height()<r&&(o.height()>a?n.height(o.height()):n.height(a))})),n.bind("input paste",(function(e){setTimeout(d,250)})),d()}))}})}(jQuery)},function(e,t,n){"use strict";var o=n(14);n(52),n(51),n(341),n(18),n(3),n(62),n(29),n(84),n(28);var i=o(n(862)),a=n(247),r=8,s=9,l=13,c=37,d=38,u=39,p=40,g=36,h=35,f={triggerChar:"@",onDataRequest:$.noop,minChars:1,allowRepeat:!1,showAvatars:!0,elastic:!0,defaultValue:"",onCaret:!0,classes:{autoCompleteItemActive:"active"},templates:{wrapper:'<div class="mentions-input-box"></div>',autocompleteList:'<div class="mentions-autocomplete-list"></div>',autocompleteListItem:'<li data-ref-id="<%=id%>" data-ref-type="<%=type%>" data-display="<%=display%>" data-style="<%=fontWeight%>"><%=content%></li>',autocompleteListItemAvatar:'<img src="<%=avatar%>"/>',autocompleteListItemLetterAvatar:'<div class="avatar g-user-commit-avatar"><%=letterAvatarsValue%></div>',autocompleteListItemIcon:'<div class="icon <%=icon%>"></div>',mentionsOverlay:'<div class="mentions"><div></div></div>',mentionItemSyntax:"@[<%=value%>](<%=type%>:<%=id%>)",mentionItemHighlight:'<strong><span id="<%=id%>"><%=value%></span></strong>'}},m=0,y=function(e){return $("<div>").text(e).html()},v=function(e){return e.replace(a.GRegex.String.MentionInputRegexpEncode,"\\$1")},_=function(e,t,n){return!t||t instanceof Array&&!t.length||!n?e:e.replace(new RegExp(a.GRegex.String.MentionInputHighlightRegString.replace("<%=term%>",t),"gi"),"<b>$1</b>")},b=function(e,t){if(e.createTextRange){var n=e.createTextRange();n.move("character",t),n.select()}else e.selectionStart?(e.focus(),e.setSelectionRange(t,t)):e.focus()},w=function(e){return e.replace(a.GRegex.String.MentionInputRtrim,"")},C=function(e){let t=++m+"";return e?e+t:t},x=function(e,t){return t.forEach(t=>{e=e.replace(t.key,t.value)}),e},S=function(e){var t,n,o,a,m,S,E=[],A={},T=[],G="";function P(){var n=I(),o=[];E.forEach(e=>{o.some(t=>t.name===e.name)||o.push(e)}),o.forEach(t=>{let o=x(e.templates.mentionItemSyntax,[{key:"<%=value%>",value:t.value},{key:"<%=type%>",value:t.type},{key:"<%=id%>",value:t.getUID()}]);n=n.replace(new RegExp(v(t.value),"g"),o)});var i=y(n);o.forEach(t=>{let n=y(t.value),o=x(e.templates.mentionItemSyntax,[{key:"<%=value%>",value:t.value},{key:"<%=type%>",value:t.type},{key:"<%=id%>",value:t.getUID()}]),a=x(e.templates.mentionItemHighlight,[{key:"<%=value%>",value:n},{key:"<%=id%>",value:t.getUID()}]);i=i.replace(new RegExp(v(o),"g"),a)}),i=(i=i.replace(/\n/g,"<br />")).replace(/ {2}/g,"&nbsp; "),t.data("messageText",n),t.trigger("updated"),m.find("div").html(i)}function D(){T=[]}function L(n){for(var o=I(),i=t[0].selectionStart,a=!1,r=!1,s=new RegExp("\\"+e.triggerChar+G,"gi");s.exec(o);)(!1===a||Math.abs(s.lastIndex-i)<a)&&(a=Math.abs(s.lastIndex-i),r=s.lastIndex);var l=r-G.length-1,c=r,d=o.substr(0,l),u=o.substr(c,o.length),p=(d+n.value).length+1;E.find(e=>e.id===n.id)||E.push(n),D(),G="",B();var g=d+n.value+" "+u;t.val(g),t.trigger("mention"),P(),t.focus(),b(t[0],p)}function I(){return $.trim(t.val())}function k(){var e,n,o=$(this);return L(A[o.attr("data-uid")]),e=$(t).offset().top,n=$("body").offset().top,$(window).scrollTop()>e&&$(window).scrollTop(e-n),!1}function O(){D()}function F(){B()}function R(){var t;P(),t=I(),E=(E=E.filter(e=>e.value&&t.includes(e.value))).filter(e=>e);var n=T.lastIndexOf(e.triggerChar);n>-1&&(G=T.slice(n+1).join(""),G=w(G),setTimeout(()=>{K.call(this,G)},1))}function M(e){if(e.keyCode!==r){var t=String.fromCharCode(e.which||e.keyCode);T.push(t)}}function N(e){if(o.data("assign",o.find("li").length),e.keyCode===c||e.keyCode===u||e.keyCode===g||e.keyCode===h)return setTimeout(D,1),void(navigator.userAgent.indexOf("MSIE 9")>-1&&setTimeout(P,1));if(e.keyCode!==r){if(!o.is(":visible"))return!0;switch(e.keyCode){case d:case p:var t=null;return(t=e.keyCode===p?S&&S.length?S.next():o.find("li").first():$(S).prev()).length&&U(t),!1;case l:case s:if(e.stopPropagation(),S&&S.length)return S.trigger("mousedown"),!1}return!0}T=T.slice(0,-1+T.length)}function B(){S=null,o.empty().hide()}function U(t){t.addClass(e.classes.autoCompleteItemActive),t.siblings().removeClass(e.classes.autoCompleteItemActive),S=t}function j(n,i){if(o.show(),!e.allowRepeat){let e=E.map(e=>e.value);i=i.filter(t=>!e.includes(t.showText))}if(i.length){o.empty();var a=$("<ul>").appendTo(o).css("visibility","hidden");i.forEach((t,o)=>{let i=C("mention_");t.setValue(t.showText),A[i]=t;let r=$(x(e.templates.autocompleteListItem,[{key:"<%=id%>",value:y(t.getUID())},{key:"<%=display%>",value:y(t.getFullUserName())},{key:"<%=type%>",value:y(t.type)},{key:"<%=content%>",value:_(y(t.display?t.display:"".concat(t.getFullUserName()).concat(t.getEmail()?"\n ".concat(t.getEmail()):"")),n,!1)},{key:"<%=fontWeight%>",value:y(t.fontWeight)}])).attr("data-uid",i);if(0===o&&U(r),e.showAvatars){var s,l;if(l=t.getUserNameInitials(),t.avatar)if("assets/icon/notification-icon.svg"===t.avatar){let t;t="light"===gDesigner.getSetting("theme","light")?"assets/icon/notification-icon-light.svg":"assets/icon/notification-icon-dark.svg",s=$(x(e.templates.autocompleteListItemAvatar,[{key:"<%=avatar%>",value:t}]))}else t.hasOwnPictureAvatar()?s=$(x(e.templates.autocompleteListItemAvatar,[{key:"<%=avatar%>",value:t.avatar}])):(s=$(x(e.templates.autocompleteListItemLetterAvatar,[{key:"<%=letterAvatarsValue%>",value:l}]))).css({"background-color":t.getUserColor()});else(s=$(x(e.templates.autocompleteListItemLetterAvatar,[{key:"<%=letterAvatarsValue%>",value:l}]))).css({"background-color":t.getUserColor()});s.prependTo(r)}r=r.appendTo(a)}),o.show(),e.onCaret&&function(e,t){var n,o=e.css("position");if("absolute"===o){var i=function(e){var t,n,o,i,a,r,s,l,c,d,u;if((c=e[0])&&$(c).is("textarea")&&null!==c.selectionEnd){for(s={position:"absolute",overflow:"auto",whiteSpace:"pre-wrap",wordWrap:"break-word",boxSizing:"content-box",top:0,left:-9999},d=0,u=(l=["boxSizing","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","textDecoration","textIndent","textTransform","width","word-spacing"]).length;d<u;d++)s[a=l[d]]=$(c).css(a);return o=document.createElement("div"),$(o).css(s),$(c).after(o),n=document.createTextNode(c.value.substring(0,c.selectionEnd)),t=document.createTextNode(c.value.substring(c.selectionEnd)),(i=document.createElement("span")).innerHTML="&nbsp;",o.appendChild(n),o.appendChild(i),o.appendChild(t),o.scrollTop=c.scrollTop,r=$(i).position(),$(o).remove(),r}}(t);n=parseInt(t.css("line-height"),10)||18,e.css("width","15em"),e.css("left",i.left),e.css("top",n+i.top);var a=t.offset().left+t.width(),r=e.offset().left+e.width();a<=r&&e.css("left",Math.abs(e.position().left-(r-a)))}else if("fixed"===o){var s=function(e){var t,n,o,i,a,r,s,l,c,d,u;if((c=e[0])&&$(c).is("textarea")&&null!==c.selectionEnd){for(s={position:"absolute",overflow:"auto",whiteSpace:"pre-wrap",wordWrap:"break-word",boxSizing:"content-box",top:0,left:-9999},d=0,u=(l=["boxSizing","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","textDecoration","textIndent","textTransform","width","word-spacing"]).length;d<u;d++)s[a=l[d]]=$(c).css(a);return o=document.createElement("div"),$(o).css(s),$(c).after(o),n=document.createTextNode(c.value.substring(0,c.selectionEnd)),t=document.createTextNode(c.value.substring(c.selectionEnd)),(i=document.createElement("span")).innerHTML="&nbsp;",o.appendChild(n),o.appendChild(i),o.appendChild(t),o.scrollTop=c.scrollTop,r=$(i).offset(),$(o).remove(),r}}(t);n=parseInt(t.css("line-height"),10)||18,e.css("width","15em"),e.css("left",s.left+1e4),e.css("top",n+s.top)}}(o,t),a.css("visibility","visible")}else B()}function K(t){t&&t.length&&t.length>=e.minChars?e.onDataRequest.call(this,"search",t,(function(e){j(t,e)})):B()}function V(n){E=[];for(var o,a=y(n),r=new RegExp("("+e.triggerChar+")\\[(.*?)\\]\\((.*?):(.*?)\\)","gi"),s=a;null!==(o=r.exec(a));)s=s.replace(o[0],o[1]+o[2]),E.push(new i.default({id:o[4],type:o[3],value:o[2],trigger:o[1]}));t.val(s),P()}return e=$.extend(!0,{},f,e),{init:function(i){"true"!==(t=$(i)).attr("data-mentions-input")&&(n=t.parent(),a=$(e.templates.wrapper),t.wrapAll(a),a=n.find("> div.mentions-input-box"),t.attr("data-mentions-input","true"),t.bind("keydown",N),t.bind("keypress",M),t.bind("click",O),t.bind("blur",F),t.bind("input",R),e.elastic&&t.elastic()),(o=$(e.templates.autocompleteList)).appendTo(a),o.delegate("li","mousedown",k),(m=$(e.templates.mentionsOverlay)).prependTo(a),V(e.defaultValue),e.prefillMention&&L(e.prefillMention)},val:function(e){$.isFunction(e)&&e.call(this,E.length?t.data("messageText"):I())},reset:function(){V()},reinit:function(){V(!1)},getMentions:function(e){$.isFunction(e)&&e.call(this,E)},setMentions:function(e){e&&e.length&&(E=e)}}};$.fn.mentionsInput=function(e,t){var n=arguments;return"object"!=typeof e&&e||(t=e),this.each((function(){var o=$.data(this,"mentionsInput")||$.data(this,"mentionsInput",new S(t));return $.isFunction(o[e])?o[e].apply(this,Array.prototype.slice.call(n,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist"):o.init.call(this,this)}))}},function(e,t,n){"use strict";var o=n(14);n(17),n(51),n(84),n(22);var i=n(45),a=n(1),r=(n(13),o(n(548))),s=n(61),l=o(n(125)),c=n(436).GVirtualTree,d=(n(436).GVirtualTreeNode,n(436).GVirtualTreeNodeNamed),{VTREE_FREE_HEIGHT:u,VTREE_FREE_HEIGHT_TOUCH:p}=n(9),g=(n(162),n(435));function h(){}function f(e,t,n,o,i){var a=!0,r=$(this).data("gpagepanel");if(r.options.canDropCallback){for(var s=e.id?b.call(this,e.id):$(this).data("gpagepanel").scene,l=t?b.call(this,t.id):null,c=[],d=0;d<o.length;++d)c.push(b.call(this,o[d].id));var u=[];if(a=r.options.canDropCallback(s,l,c,u))for(d=0;d<u.length;++d){var p=u[d];i.push(o[p])}}return a}function m(e,t,n,o){if(!n||!n.length||!e)return!1;var i=!0;if(gDesigner.getApplicationManager().isEditingEnabled()){for(var a=0;a<n.length&&i;++a)(i=!e.isLocked()&&n[a]&&n[a].validateInsertion(e,t))&&o.push[a];return i}}function y(e,t,n,o){var i=$(this).data("gpagepanel");if(i.options.moveCallback){for(var a=e.id?b.call(this,e.id):$(this).data("gpagepanel").scene,r=t?b.call(this,t.id):null,s=[],l=0;l<o.length;++l)s.push(b.call(this,o[l].id));i.options.moveCallback(a,r,s)}}function v(e){var t=$(this).data("gpagepanel");if(t.options.clickCallback){var n=b.call(this,e.id);t.options.clickCallback(n)}}function _(e,t){var n=$(this).data("gpagepanel");n.options.renderer&&n.options.renderer(e.id,t),R.call(this)}function b(e){var t=$(this).data("gpagepanel").pagesTreeNodeMap[e];return t?t.node:null}function w(e){return $(this).data("gpagepanel").pagesTreeNodeMap[e]}function C(e){var t=$(this).data("gpagepanel").pagesTreeNodeMapByNodes.get(e);return t?t.treeNode:null}function x(e){var t=$(this).data("gpagepanel").pagesTreeNodeMap,n=$(this).data("gpagepanel").pagesTreeNodeMapByNodes;e.accept(function(e){if(e instanceof a.GPage){var o=n.get(e);o&&(n.delete(e),t[o.treeId]=null)}}.bind(this))}function S(e,t){var n=$(this).data("gpagepanel"),o=w.call(this,e),l=o.node;if(l){if(!(l instanceof a.GPage))throw new Error("item not page");var c=l.getProperty("lkt"),d=!!l.getSlavePages().length,u=0===l.getProperty("w")&&0===l.getProperty("h"),p=$(t);p.attr("draggable",!1).on("mouseenter",(function(){l.getProperty("w")&&!l.hasFlag(a.GElement.Flag.Hidden)&&l.setFlag(a.GNode.Flag.Highlighted)})).on("mouseleave",(function(){l.getProperty("w")&&!l.hasFlag(a.GElement.Flag.Hidden)&&l.removeFlag(a.GNode.Flag.Highlighted)}));var h=$("<span></span>").addClass("page-title-group");h.appendTo(p),o.element=h;var f=l.getProperty("name");f=f||l.getNodeNameTranslated(),d&&!gDesigner.isTouchEnabled()&&(f+=" (master)");var m=$("<span></span>").html(f);m.addClass("page-title").appendTo(h);var y=this;l.hasFlag(a.GElement.Flag.PartialLocked)||h.attr("draggable",!0).attr("data-drag-mode",r.default.PRESS_AND_HOLD).on("dragstart",(function(e){if(n.options.startDraggingCallback){var t=n.options.startDraggingCallback(l);if(t&&t.length){$(this).addClass("g-dragging");var o="",i=t[0].getProperty("name");(i=i||t[0].getNodeNameTranslated())&&(o=i);for(var a=1;a<t.length;++a)(i=(i=t[a].getProperty("name"))||t[a].getNodeNameTranslated())&&(o+=", "+i);o.length&&$(m).html(o);var r=n.vtree,s=[];for(a=0;a<t.length;++a){var c=C.call(y,t[a]);c&&s.push(c)}r.setDragNodes(s),setTimeout(function(){$(this).removeClass("g-dragging"),$(m).html(f)}.bind(this),0)}else $(this).attr("draggable",!1)}})),p.toggleClass("g-active",l.hasFlag(a.GNode.Flag.Active)),n.blockHighlight||p.toggleClass("g-highlighted-row",l.hasFlag(a.GNode.Flag.Highlighted)),!c&&gDesigner.getApplicationManager().isEditingEnabled()&&$(h).gAutoEdit({textSelector:"> .page-title",getContainer:function(){return w.call(y,e).element},submitCallback:function(e){e&&""!==e.trim()&&i.GEditor.tryRunTransaction(l,(function(){l.setProperty("name",e)}),a.GLocale.get(new a.GLocaleKey("GPagePanel","action.rename-page")))}});var v=$("<span></span>").addClass("page-icon gravit-icon-page").insertBefore(m);gDesigner.isTouchEnabled()&&(u?(v.toggleClass("gravit-icon-page-infinity",!0),v.toggleClass("gravit-icon-page",!1)):d&&(v.toggleClass("gravit-icon-page-master",!0),v.toggleClass("gravit-icon-page",!1)));var _=c?"gravit-icon-lock":"gravit-icon-unlock";_=gDesigner.isTouchEnabled()?_+"-small":_,$("<span></span>").addClass("page-action page-lock "+_).toggleClass("g-active",!!c).attr("data-title",a.GLocale.get(new a.GLocaleKey("GCommonNames","action.toggle-lock"))).on("click",(function(e){gDesigner.stats("pages_change_lock"),e.stopPropagation();var t=l.getProperty("lkt");t=t?null:a.GBlock.LockType.Full,i.GEditor.tryRunTransaction(l,(function(){if(l.setProperty("lkt",t),t===a.GBlock.LockType.Full){n.scene.setProperty("edit",!1);var e=gDesigner.getActiveDocument();e&&e.getEditor().clearSelection()}else n.scene.setProperty("edit",!0)}),a.GLocale.get(new a.GLocaleKey("GCommonNames","action.toggle-lock")))})).appendTo(p).gRichTooltip(s.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.page-toggle-lock-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.page-toggle-lock-tooltip-description")),learnMore:"https://documentation.corelvector.com/organizing-your-designs/pages/#page-panel"}));var b=!1===l.getProperty("vis");p.toggleClass("page-hiden",b);var x=b?"gravit-icon-hide":"gravit-icon-display";x=gDesigner.isTouchEnabled()?x+"-small":x,$("<span></span>").addClass("page-action page-visibility "+x).toggleClass("g-active",b).attr("data-title",a.GLocale.get(new a.GLocaleKey("GCommonNames","action.toggle-visibility"))).on("click",(function(e){gDesigner.stats("pages_change_visibility"),e.stopPropagation();var t=!l.getProperty("vis");i.GEditor.tryRunTransaction(l,(function(){l.setProperty("vis",t)}),a.GLocale.get(new a.GLocaleKey("GCommonNames","action.toggle-visibility")))})).appendTo(p).gRichTooltip(s.GRichTooltipConfig.from({title:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.page-toggle-visibility-tooltip-title")),description:a.GLocale.get(new a.GLocaleKey("GCommonNames","text.page-toggle-visibility-tooltip-description")),learnMore:"https://documentation.corelvector.com/organizing-your-designs/pages/#page-panel"})),p.contextmenu({context:g.PagePanel},function(e){$(this).data("gpagepanel").scene.setActivePage(l),$(gDesigner.getWindows().getHtmlElement()).trigger("contextmenu",e)}.bind(this))}}function E(e,t){var n=new d(e);return $(this).data("gpagepanel").vtree.insertNodeBefore(t,n),n}function A(e,t){var n=new d(e);return $(this).data("gpagepanel").vtree.appendNode(t,n),n}function T(e){$(this).data("gpagepanel").vtree.removeNode(e)}function G(e){var t,n,o=a.GUtil.uuid(),i=$(this).data("gpagepanel"),r=i.vtree;for(r.beginUpdate(),t=e.getNext();t&&!(t instanceof a.GPage);t=t.getNext());var s=t?C.call(this,t):null;n=s?E.call(this,o,s):A.call(this,o,null),i.pagesTreeNodeMap[o]={node:e,treeNode:n,element:null},i.pagesTreeNodeMapByNodes.set(e,{element:null,treeNode:n,treeId:o}),r.endUpdate()}function P(e){var t=C.call(this,e);t&&(T.call(this,t),x.call(this,e))}function D(e){!$(this).data("gpagepanel").blockHandlers&&e.node instanceof a.GPage&&G.call(this,e.node)}function L(e){!$(this).data("gpagepanel").blockHandlers&&e.node instanceof a.GPage&&P.call(this,e.node)}function I(e){if(!e.temporary&&(!$(this).data("gpagepanel").blockHandlers&&(e.node instanceof a.GPage||e.node instanceof a.GScene))){if(e.node instanceof a.GScene&&1===e.properties.length&&"pi"===e.properties[0])return;$(this).data("gpagepanel").vtree.requestInvalidation()}}function k(e){if(!e)return;$(this).find(".page-row.g-active").removeClass("g-active");const t=w.call(this,e.id),n=t&&t.element;n&&$(n).closest(".page-row").addClass("g-active")}function O(e){var t=$(this).data("gpagepanel"),n=$(this).data("gpagepanel").vtree;if(!t.blockHandlers&&e.node instanceof a.GPage)if(e.flag===a.GElement.Flag.Hidden||e.flag===a.GElement.Flag.PartialLocked||e.flag===a.GElement.Flag.FullLocked||e.flag===a.GNode.Flag.Active){var o=e.node.getScene(),i=o&&o.getActivePage();if(i&&i==e.node&&e.set){var r=C.call(this,e.node);n.expandAndFocus(r,!0),e.flag===a.GNode.Flag.Active?k.call(this,r):n.requestInvalidation()}}else t.blockHighlight||e.flag!==a.GNode.Flag.Highlighted||n.requestInvalidation()}function F(e){"touch"===e.key&&N._updateLayout.call(this)}function R(){gDesigner.isTouchEnabled()&&$(this).parent().css("height",parseInt($(this).find(".vscroller").css("height"),10)+u+"px")}function M(){var e=$(this).data("gpagepanel");e.vtree.clean(),e.pagesTreeNodeMap={},e.pagesTreeNodeMapByNodes=new Map,e.scene=null}a.GObject.inheritAndMix(h,a.GObject);var N={init:function(e){return e=$.extend({nodeStyle:"page-row",collapseStyle:"page-arrow gravit-icon-down",freeHeight:u,insertIntoStyle:"g-drop",upSeparatorSpan1Style:"g-up-separator-span1",upSeparatorSpan2Style:"g-up-separator-span2",downSeparatorSpan1Style:"g-down-separator-span1",downSeparatorSpan2Style:"g-down-separator-span2",renderer:S.bind(this),separatorRenderer:null,canDropCallback:m.bind(this),moveCallback:null,clickCallback:null,startDraggingCallback:null},e),this.each((function(){$(this).addClass("g-page-panel").data("gpagepanel",{vtree:new c(this,_.bind(this),e.nodeStyle,null,null,e.separatorRenderer?e.separatorRenderer:null,e.freeHeight,e.insertIntoStyle,f.bind(this),y.bind(this),null,null,v.bind(this),null,e.upSeparatorSpan1Style,e.upSeparatorSpan2Style,e.downSeparatorSpan1Style,e.downSeparatorSpan2Style,!1,0,21),options:e,pagesTreeNodeMap:{},pagesTreeNodeMapByNodes:new Map,scene:null,currentFocus:null})}))},refresh:function(){$(this).data("gpagepanel").vtree.refresh()},relayout:function(){var e=$(this).data("gpagepanel"),t=e.vtree,n=e.currentFocus;n&&t.expandAndFocus(n),t.requestInvalidation()},scene:function(e){var t=$(this),n=t.data("gpagepanel");if(!arguments.length)return n.scene;if(e!==n.scene&&(n.scene&&n.scene.hasMixin(a.GEventTarget)&&(n.scene.removeEventListener(a.GNode.AfterInsertEvent,n.afterNodeInsertHandler,this),n.scene.removeEventListener(a.GNode.BeforeRemoveEvent,n.beforeNodeRemoveHandler,this),n.scene.removeEventListener(a.GNode.AfterPropertiesChangeEvent,n.afterPropertiesChangeHandler,this),n.scene.removeEventListener(a.GNode.AfterFlagChangeEvent,n.afterFlagChangeHandler,this),gDesigner.removeEventListener(l.default,n.settingChangedEvent,this)),M.call(this),n.scene=e,n.scene)){n.scene.hasMixin(a.GEventTarget)&&(n.afterNodeInsertHandler=D.bind(this),n.beforeNodeRemoveHandler=L.bind(this),n.afterPropertiesChangeHandler=I.bind(this),n.afterFlagChangeHandler=O.bind(this),n.settingChangedEvent=F.bind(this),gDesigner.addEventListener(l.default,n.settingChangedEvent,this),n.scene.addEventListener(a.GNode.AfterInsertEvent,n.afterNodeInsertHandler,this),n.scene.addEventListener(a.GNode.BeforeRemoveEvent,n.beforeNodeRemoveHandler,this),n.scene.addEventListener(a.GNode.AfterPropertiesChangeEvent,n.afterPropertiesChangeHandler,this),n.scene.addEventListener(a.GNode.AfterFlagChangeEvent,n.afterFlagChangeHandler,this));for(var o=n.scene.getLastChild();null!==o;o=o.getPrevious())o instanceof a.GPage&&G.call(this,o);N._updateLayout.call(this)}return this},blockHandlers:function(e){$(this).data("gpagepanel").blockHandlers=!!e},getLastVisitedDroppable:function(){return $(this).data("gpagepanel").vtree.getLastVisitedDroppable()},setBlockHighlight:function(e){$(this).data("gpagepanel").blockHighlight=!!e},resetVTreeRowHeight:function(e){$(this).data("gpagepanel").vtree.resetRowHeight(e)},_updateLayout:function(){const e=$(this).data("gpagepanel"),t=e&&e.vtree;if(t){const e=gDesigner.isTouchEnabled();t.setFreeHeight(e?p:u),t.setAnimatedDragEnabled(e)}}};e.exports=h,$.fn.gPagePanel=function(e){return N[e]?N[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):N.init.apply(this,arguments)}},function(e,t,n){"use strict";n(28);var o=n(1),i=n(61),a=n(590);function r(e){var t=$(this).data("gsymbolspanel"),n=e.getMultireferenceId();if(t.symbolNodes[n])e.isMaster()&&!e.hasEventListeners(o.GSymbol.AfterThumbnailUpdate)&&e.addEventListener(o.GSymbol.AfterThumbnailUpdate,l.bind(this));else{var i=c.call(this,e);i&&(i.appendTo($(this)),t.symbolNodes[n]=e)}}function s(e,t){if(e.isMaster()){var n=$(this).data("gsymbolspanel"),i=e.getMultireferenceId(),a=$(this).find("#symbol_"+i);if(a.length){if(n.scene){var r=d.call(this,e);if(r&&(r.removeEventListener(o.GSymbol.AfterThumbnailUpdate,l),!t)){var s=n.blockHandlers;n.blockHandlers=!0,n.scene.removeSymbol(r),n.blockHandlers=s}}delete n.symbolNodes[i],a.remove(),0===Object.keys(n.symbolNodes).length&&y.call(this)}}}function l(e){var t=e.symbol,n=t.getFrame();if(n&&t.getPaintBBox()){$(this).data("gsymbolspanel");var i=t.getMultireferenceId(),a=$(this).find("#symbol_"+i),r=a.find(".symbol-image");r.empty();var s=n.getWidth(),l=n.getHeight()/s,c=85,d=c*l;d>85&&(c=(d=85)/l),h(r,c,d);var u=e.image.getBitmap().getHTMLElement(!0);if($(u).css({width:c,height:d,margin:"5px"}),t.hasFlag(o.GNode.Flag.Selected))a.find(".symbol-title-group").addClass("g-highlighted");$(u).appendTo(r)}}function c(e){var t=$(this).data("gsymbolspanel");if(e.isMaster()){if(!(e instanceof o.GSymbol))throw new Error("item not symbol");var n=$(this).find(".symbol-panel-info").parent();n.length&&n.remove();var a=$("<div />").attr("draggable",!1).attr("id","symbol_"+e.getMultireferenceId()).css({display:"inline"}).gRichTooltip(i.GRichTooltipConfig.from({title:e.getProperty("name"),description:o.GLocale.get(new o.GLocaleKey("GCommonNames","text.symbol-panel-symbol-tooltip-description")),middle:!1,learnMore:"https://documentation.corelvector.com/organizing-your-designs/symbols/#symbols-panel"})),r=$("<span></span>").addClass("symbol-title-group");r.appendTo(a);var s=e.getProperty("name");s=s||e.getNodeNameTranslated();var c=$("<span></span>");e.addEventListener(o.GSymbol.AfterThumbnailUpdate,l.bind(this)),c.addClass("symbol-image").appendTo(r);var u=this;return r.attr("draggable",!0).css({display:"inline-block",backgroundColor:"#eee",margin:"5px",height:"95px",width:"45%",textAlign:"center",lineHeight:"180px"}).on("dragstart",(function(n){$(this).addClass("g-dragging"),n.originalEvent.dataTransfer.effectAllowed="move",n.originalEvent.dataTransfer.setData(o.GNode.MIME_TYPE,o.GNode.serialize(e)),t.dragNode=e,setTimeout(function(){$(this).removeClass("g-dragging")}.bind(this),0)})).on("drop",(function(e){$(this).parent().parent().data("gsymbolspanel").dragNode=null})).on("click",(function(n){gDesigner.stats("symbol_click_select");var o=d.call(u,e);o&&(o.getScene()?t.options.clickCallback(o):r.toggleClass("g-highlighted"))})).on("dblclick",(function(n){gDesigner.stats("symbol_click_focus");var o=d.call(u,e);o&&t.options.dblClickCallback(o)})),a}}function d(e){if(e.getScene())return e;var t=$(this).data("gsymbolspanel");if(!t.scene)return null;for(var n=t.scene.getSymbols(),o=0;o<n.length;o++)if(n[o].getMultireferenceId()===e.getMultireferenceId())return n[o]}function u(e){var t=$(this).data("gsymbolspanel");if(!t.blockHandlers&&e.node instanceof o.GSymbol)if(e.data.created){r.call(this,e.node);var n=t.scene.getSymbolImage(e.node);n?l.call(this,{symbol:e.node,image:n}):e.node.toBitmap()}else s.call(this,e.node,!0)}function p(e){!$(this).data("gsymbolspanel").blockHandlers&&(e.node,o.GSymbol)}function g(e){for(var t=$(this).data("gsymbolspanel"),n=e.node;n&&!(n instanceof o.GSymbol&&n.isMaster());)n=n.getParent();if(!t.blockHandlers&&n){var i=n.getMultireferenceId(),a=$(this).find("#symbol_"+i).find(".symbol-title-group");e.flag===o.GNode.Flag.Selected&&(e.set?a.addClass("g-highlighted"):a.removeClass("g-highlighted"))}}function h(e,t,n){e.css({position:"relative",top:n/2-42.5+"px"})}function f(){$(this).data("gsymbolspanel"),$(this).data("gsymbolspanel");for(var e=$(this).find(".symbol-image"),t=0;t<e.length;t++){var n=$(e[t]),o=n.find("canvas");(o.css("width")||"0px").split("px")[0];h(n,0,(o.css("height")||"0px").split("px")[0])}}function m(){var e=$(this).data("gsymbolspanel");e.symbolNodes={},e.scene=null,$(this).empty(),y.call(this)}function y(){$("<div>").append($("<div>").addClass("symbol-panel-info").append($("<div></div>").addClass("symbol-panel-infotitle").text(o.GLocale.get(new o.GLocaleKey("GCreateSymbolAction","common.nosymbolsdefined")))).append($("<span></span>").text(o.GLocale.get(new o.GLocaleKey("GCreateSymbolAction","common.nosymbolsdefined-info"))))).appendTo($(this))}var v={init:function(e){return e=$.extend({moveCallback:null,clickCallback:null,dblClickCallback:null,startDraggingCallback:null},e),this.each((function(){$(this).addClass("g-symbols-panel").data("gsymbolspanel",{options:e,symbolNodes:{},scene:null,currentFocus:null})}))},relayout:function(){f.call(this)},newSymbolClick:function(){return gDesigner.canExecuteAction(a.ID)&&(gDesigner.stats("symbol_click_createnewsymbol"),gDesigner.executeAction(a.ID,void 0,void 0,!0)),!1},isSelected:function(){$(this).data("gsymbolspanel");return $(this).find(".g-highlighted").length>0},removeSelected:function(){var e=$(this).data("gsymbolspanel"),t=$(this).find(".g-highlighted").parent().attr("id");if(t){var n=t.split("_")[1],o=e.symbolNodes[n];o&&s.call(this,o)}},scene:function(e){var t=$(this),n=t.data("gsymbolspanel");if(!arguments.length)return n.scene;if(e!==n.scene&&(n.scene&&n.scene.hasMixin(o.GEventTarget)&&(n.scene.removeEventListener(o.GNode.AfterSpecialChangeEvent,n.afterSpecialChangeHandler,this),n.scene.removeEventListener(o.GNode.AfterPropertiesChangeEvent,n.afterPropertiesChangeHandler,this),n.scene.removeEventListener(o.GNode.AfterFlagChangeEvent,n.afterFlagChangeHandler,this)),m.call(this),n.scene=e,n.scene)){n.scene.hasMixin(o.GEventTarget)&&(n.afterSpecialChangeHandler=u.bind(this),n.afterPropertiesChangeHandler=p.bind(this),n.afterFlagChangeHandler=g.bind(this),n.scene.addEventListener(o.GNode.AfterSpecialChangeEvent,n.afterSpecialChangeHandler,this),n.scene.addEventListener(o.GNode.AfterPropertiesChangeEvent,n.afterPropertiesChangeHandler,this),n.scene.addEventListener(o.GNode.AfterFlagChangeEvent,n.afterFlagChangeHandler,this));var i=n.scene.getSymbols();i&&i.forEach(function(e){r.call(this,e);var t=n.scene.getSymbolImage(e);t?l.call(this,{symbol:e,image:t}):e.toBitmap()}.bind(this))}return this}};$.fn.gSymbolsPanel=function(e){return v[e]?v[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):v.init.apply(this,arguments)}},function(e,t,n){"use strict";var o=n(1);const i={init:function(e){e=$.extend({clazz:null,defaultText:o.GLocale.get(new o.GLocaleKey("GToolbar","text.share")),stats:"toolbar_click_share",restrictedStats:"toolbar_nonprotriespro_share",closeCallback:null},e);let t=$(this);return t.data("gsharebutton",{options:e}),this.addClass("share-button").addClass("g-highlight-button").addClass("highlighted").addClass(e.clazz||"").append($("<span/>").addClass("icon")).append($("<span/>").addClass("label").text(e.defaultText)).on("click",()=>{if(t.hasClass("g-disabled"))return;const n=gDesigner.getShareManager();n.isShareProRestricted()?(gDesigner.stats(e.restrictedStats),gDesigner.handleShareFilePROFeatureInterruption()):(gDesigner.stats(e.stats),n.share(t.data("gsharebutton").storeItem,e.closeCallback))}),this},update:function(e){const{isPrivate:t,isSharing:n,disabled:i}=e,a=$(this);i?a.addClass("g-disabled"):a.removeClass("g-disabled");gDesigner.getShareManager().isShareProRestricted()&&a.gPro();const r=a.data("gsharebutton");a.find(".icon").css("display",n?"":"none").toggleClass("gravit-icon-private-share",t).toggleClass("gravit-icon-public-share",!t);const s=n?new o.GLocaleKey("GToolbar","text.shared"):r.options.defaultText?r.options.defaultText:new o.GLocaleKey("GToolbar","text.share");return a.find(".label").text(o.GLocale.get(s)),r.storeItem=e.storeItem,e.closeCallback&&(r.options.closeCallback=e.closeCallback),this}};$.fn.gShareButton=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.gShareButton"):i.init.apply(this,arguments)}},function(e,t,n){"use strict";n(7);var o=n(1),i=n(9);const a={init:function(e){e=$.extend({clazz:null,defaultText:o.GLocale.get(new o.GLocaleKey("GUnshareButton","text.unshare-with-me")),stats:"filespanel-view_infoPanel_unshare",restrictedStats:"filespanel-view_infoPanel_nonprotriespro-unshare",unshareCallback:null},e);let t=$(this);return t.data("gunsharebutton",{options:e}),this.addClass("unshare-button").addClass("g-highlight-button").addClass("highlighted").addClass(e.clazz||"").append($("<span/>").addClass("icon")).append($("<span/>").addClass("label").text(e.defaultText)).on("click",()=>{if(t.hasClass("g-disabled"))return;gDesigner.getShareManager().isShareProRestricted()?(gDesigner.stats(e.restrictedStats),gDesigner.handleShareFilePROFeatureInterruption()):(gDesigner.stats(e.stats),gDesigner.getUser().then(async n=>{if(!n)return;const o=t.data("gunsharebutton").storeItem.getId(),a=n.getUID();console.log("About to call unshare with item id: %s and user id: %s",o,a),await i.gApi.unshareWithUser(o,a),"function"==typeof e.unshareCallback&&e.unshareCallback()}))}),this},update:function(e){const{disabled:t,hidden:n}=e,o=$(this);t?o.addClass("g-disabled"):o.removeClass("g-disabled"),n?o.hide():o.show();gDesigner.getShareManager().isShareProRestricted()&&o.gPro();const i=o.data("gunsharebutton");return i.storeItem=e.storeItem,e.unshareCallback&&(i.options.unshareCallback=e.unshareCallback),this}};$.fn.gUnshareButton=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.gUnshareButton"):a.init.apply(this,arguments)}},function(e,t,n){"use strict";n(51);var o=n(1133),i=n(429),a={init:function(e){return e=$.extend({menu:null,defaultAction:null,dblclick:null,touch:!1,reference:null},e),this.each((function(){var t=this,n=null;"function"==typeof e.menu&&(e.menuFactory=e.menu,e.menu=e.menuFactory()),e.menu.setTouchMode(!!e.touch);$(this).addClass("g-menu-button").data("gmenubutton",{options:e}).on("mousedown",(function(o){if(o.stopPropagation(),e.menuFactory){const t=e.menuFactory();if(t!==e.menu){e.menu.clearItems();for(let n=0;n<t.getItemCount();++n)e.menu.addItem(t.getItem(n))}}e.dblclick?setTimeout(()=>{parseInt($(t).data("dblclicked"),10)?e.menu.isOpen()&&a.close.call(t):e.defaultAction?n=setTimeout(function(){a.open.call(t),n=null}.bind(this),250):e.menu.isOpen()?a.close.call(t):a.open.call(t)},500):e.defaultAction?n=setTimeout(function(){a.open.call(t),n=null}.bind(this),250):e.menu.isOpen()?a.close.call(t):a.open.call(t)})).on("mouseup",(function(o){o.stopPropagation(),e.dblclick?setTimeout(()=>{var o=parseInt($(t).data("dblclicked"),10);o?$(t).data("dblclicked",o-1):(null!==n&&(clearTimeout(n),n=null),!e.menu.isOpen()&&e.defaultAction&&e.defaultAction())},500):(null!==n&&(clearTimeout(n),n=null),!e.menu.isOpen()&&e.defaultAction&&e.defaultAction())})).on("dblclick",(function(n){n.stopPropagation(),e.dblclick&&($(t).data("dblclicked",2),e.dblclick.call(t))}))}))},open:function(){var e=$(this),t=e.data("gmenubutton").options,n=t.menu;if(!n.isOpen()){e.addClass("g-active");var a;if(n.addEventListener(o,(function t(){e.removeClass("g-active"),n.removeEventListener(o,t)})),t.reference&&(t.reference instanceof jQuery||t.reference instanceof HTMLElement?a=t.reference:"function"==typeof t.reference&&(a=t.reference())),a instanceof HTMLElement&&(a=$(a)),a||(a=e),n.open(a,i.Position.Center,i.Position.Right_Bottom,(function(t){e.trigger("menuitemactivate",t)})),t.getActiveItem&&"function"==typeof t.getActiveItem){const e=t.getActiveItem();e&&n.setActiveItem(e)}}},close:function(){var e=$(this).data("gmenubutton").options.menu;e.isOpen()&&e.close()}};$.fn.gMenuButton=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):a.init.apply(this,arguments)}},function(e,t,n){"use strict";n(51);var o=n(13),i=[],a=function(e){var t=!1;if(i.length>0)for(var n=i.length-1;n>=0;--n){var o=$(i[n]),a=o.closest(".g-overlay"),r=$(e.target).closest("body > *"),s=!1;a.parent().length>0&&a.parent().hasClass("g-dialog-container")&&0===$(e.target).closest(".g-overlay").length&&(s=!0),($(r).index()<a.index()||s)&&(t=!0,o.gOverlay("close",e,n))}return t};document.addEventListener("mousedown",(function(e){a(e)}),!0),document.addEventListener("keydown",(function(e){var t=e.which||e.keyCode;if(27===t)a(e)&&e.stopPropagation();else if(13===t&&i.length>0)for(var n=i.length-1;n>=0;--n){var o=$(i[n]).data("goverlay"),r=o&&o.options;r.enterCallback&&r.enterCallback(e)}}),!0),window.addEventListener("resize",(function(){for(var e=0;e<i.length;++e){$(i[e]).gOverlay("relayout")}}));var r=function(e){e.changed.escapeKey&&(e.isImmediatePropagationStopped=!0)},s={init:function(e){return e=$.extend({modal:!1,padding:!0,releaseOnClose:!1,clazz:"",enterCallback:null,offsetX:0,offsetY:0,bottomOffsetY:0,customRight:null,bottomClazz:null,rightClazz:null,closeCallback:null,disableDarkShadow:!1,middle:!1,side:!1,sideClazz:"g-overlay-side",flipHorizontal:!1},e),this.each((function(){$(this).data("goverlay",{options:e,target:null}).wrap($("<div></div>").addClass("g-overlay").addClass(e.clazz).toggleClass("no-padding",!e.padding).css("position","absolute"))}))},relayout:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=$.extend({preserveTop:!1},e);var t=$(this),n=t.data("goverlay");if(!n||!n.target&&!n.isPoint)return;let o;var i=t.closest(".g-overlay"),a=$(window),r=a.width(),s=a.height(),l=i.outerWidth(),c=i.outerHeight(),d={};n.yTop&&n.xLeft?(d.top=n.yTop,d.left=n.xLeft):(o=$(n.target),d=o.offset());var u,p,g=d.top,h=n.isPoint?0:o.outerWidth()/2,f=d.left+h,m=n.options.middle?f:d.left,y=n.isPoint?0:o.outerWidth(),v=n.options.middle?f:d.left+y,_=n.isPoint?0:o.outerHeight(),b=d.top+_;n.options.side?(t.addClass(n.options.sideClazz),(u=v+n.options.offsetX)+l>r&&(u=m-l-n.options.offsetX,t.addClass("g-overlay-left-side")),(p=g+n.options.offsetY)+c>s&&(p=b-c-n.options.offsetY,t.addClass("g-overlay-valign-bottom"))):((u=null!==n.options.customRight?r-v+n.options.customRight:m+n.options.offsetX)+l>r?(u=v-l-n.options.offsetX,n.options.rightClazz&&t.addClass(n.options.rightClazz)):n.options.flipHorizontal&&(u=m-l-n.options.offsetX),u+l>r&&(u=r-l),(p=b+n.options.offsetY)+c>s&&(p=g-c-parseInt(n.options.bottomOffsetY),n.options.bottomClazz&&t.addClass(n.options.bottomClazz)),p+c>s&&(p=s-c-parseInt(n.options.bottomOffsetY))),u<0&&(u=0),p<0&&(p=0);let w=!1;if(e.preserveTop){const e=i.offset(),t=e&&e.top;w="number"==typeof t&&t+c<s}w||i.css("top",p+"px"),null===n.options.customRight?i.css("left",u+"px"):i.css("right",u+"px")},open:function(e,t,n){var a=$(this);const l=e&&"number"==typeof e.x&&"number"==typeof e.y;var c=a.data("goverlay"),d=c&&c.options;e&&!d.disableDarkShadow&&($(e).closest(".sidebar-inspector").addClass("sidebar-overlay"),$(".g-touch-toolbar").addClass("sidebar-overlay"),$(e).is(":input")&&$(e).closest(".content").addClass("overlay")),c&&(c.target=e,c.isPoint=l,c.xLeft=e.x,c.yTop=e.y);var u,p=a.closest(".g-overlay");if(t&&(u=$(t).closest(".g-dialog-container.visible")),!u||!u.length){var g=$(".g-dialog-container.visible");u=g.length>0?g[g.length-1]:$("body")}return d&&d.modal?$("<div></div>").addClass("g-overlay-modal").append(p).appendTo(u):p.appendTo(u),o.GPlatform.addEventListener(o.GModifiersChangedEvent,r,this[0],null,!0),s.relayout.call(this),i.push(this[0]),a.trigger("open"),n&&n(),this},close:function(e,t){var n=$(this),a=n.data("goverlay");if(i.length&&i[t>=0?t:i.length-1]===this[0]){var s=!1;const t=function(){s=!0};if(n.trigger("close",[t,e]),s)return;var l;o.GPlatform.removeEventListener(o.GModifiersChangedEvent,r,this[0]),a&&(a.target&&($(".sidebar-inspector").removeClass("sidebar-overlay"),$(".g-touch-toolbar").removeClass("sidebar-overlay"),$(".content.overlay").removeClass("overlay")),a.target=null,l=a.options);var c=n.closest(".g-overlay-modal");!l||l.releaseOnClose?n.closest(".g-overlay").remove():n.closest(".g-overlay").detach(),c.remove(),i.pop(),l&&l.closeCallback&&l.closeCallback()}return this},isOpenned:function(e){var t=$(this).data("goverlay");return e?t&&t.target&&t.target.get(0)===e.get(0):t&&t.target}};$.fn.gOverlay=function(e){return s[e]?s[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):s.init.apply(this,arguments)}},function(e,t,n){"use strict";var o=n(14),i=n(1),a=o(n(548)),r={init:function(e){return e=$.extend({allowDrag:!0,allowDrop:!0},e),this.each((function(){var t=this,n=$(this);n.data("gpatterntarget",{options:e,pattern:null,types:null}),e.allowDrag&&n.attr("draggable","true").attr("data-drag-mode",a.default.PRESS_AND_HOLD).on("dragstart",(function(e){var t=e.originalEvent,o=n.data("gpatterntarget").pattern;if(o){t.stopPropagation(),n.trigger("patterndrag",o);var a=gDragImage().css({background:i.GPattern.asCSSBackground(o),width:"20px",height:"20px"});t.dataTransfer.setDragImage(a[0],10,10),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData(i.GPattern.MIME_TYPE,i.GPattern.serialize(o)),t.dataTransfer.sourceElement=this}else t.preventDefault()})).on("dragend",(function(e){e.stopPropagation()})),e.allowDrop&&n.on("dragover",(function(e){e.stopPropagation();var t=e.originalEvent;t.preventDefault(),t.stopPropagation(),e.originalEvent.dataTransfer.dropEffect="move"})).on("drop",(function(e){e.stopPropagation();var o=n.data("gpatterntarget"),a=e.originalEvent,s=a.dataTransfer.getData(i.GPattern.MIME_TYPE);if(s&&(s=i.GPattern.deserialize(s))){var l=!0;if(o.types&&o.types.length>0){l=!1;for(var c=0;c<o.types.length;++c)if(o.types[c]&&s instanceof o.types[c]){l=!0;break}}if(l){var d=n.data("gpatterntarget").pattern;i.GUtil.equals(s,d)||(r.value.call(t,s),n.trigger("patternchange",s)),n.trigger("patterndrop",[s,a])}}return!1}))}))},value:function(e){var t=$(this),n=t.data("gpatterntarget")||{};return arguments.length?(e="string"==typeof e?i.GPattern.deserialize(e):e,n.pattern=e,this):n.pattern||null},types:function(e){var t=$(this),n=t.data("gpatterntarget");return arguments.length?(n.types=e,this):n.types}};$.fn.gPatternTarget=function(e){return r[e]?r[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):r.init.apply(this,arguments)}},function(e,t,n){"use strict";var o=n(1),i={init:function(e){return this.each((function(){var e=this,t=$(this).data("gpivot",{value:null}).addClass("g-pivot"),n=function(n){$("<div></div>").addClass("side").attr("data-side",n).on("click",(function(o){gDesigner.stats("pivot_click_change-button"),i.value.call(e,n),t.trigger("pivotchange",n)})).appendTo(t)};for(var a in $("<div></div>").addClass("borderline").appendTo(t),o.GRect.Side)if(o.GRect.Side.hasOwnProperty(a)){var r=o.GRect.Side[a];"string"==typeof r&&n(r)}}))},value:function(e){var t=$(this),n=t.data("gpivot");return arguments.length?(n.value=e,t.find("div[data-side]").each((function(t,n){var o=$(n);o.toggleClass("g-active",o.attr("data-side")===e)})),this):n.value}};$.fn.gPivot=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):i.init.apply(this,arguments)}},function(e,t,n){"use strict";n(28);var o={init:function(e){return e=$.extend({},e),this.each((function(){var t=$(this);if(t.addClass("g-property-row"),e.hasOwnProperty("clazz")&&t.addClass(e.clazz),e.hasOwnProperty("label")||e.hasOwnProperty("icon")){var n=$('<label class="property-label"></label>').appendTo(t);if(e.hasOwnProperty("icon"))t.addClass("icon-label"),n.addClass("strict-line-height"),"string"==typeof e.icon?$("<span></span>").addClass(e.icon).appendTo(n):n.append(e.icon);else{var o=$("<span />").addClass("vertical-align").appendTo(n);"string"==typeof e.label?o.text(e.label):o.append(e.label)}e.click&&n.addClass("clickable").find("span").append($("<span></span>").addClass("gravit-icon-down click-arrow")).on("click",e.click)}else t.addClass("no-label");e.hasOwnProperty("justified")&&!0===e.justified&&t.addClass("justified");var i=$("<div></div>").addClass("columns").appendTo(t);e.hasOwnProperty("clickable")&&e.clickable&&i.addClass("clickable"),e.hasOwnProperty("hoverable")&&e.hoverable&&i.addClass("hoverable"),e.hasOwnProperty("height")&&i.css("height",e.height);var a=!1;if(e.columns.forEach((function(t){var n="<div></div>";t.content&&$(t.content).is(":input")&&(n="<label></label>");var o=$(n).addClass("column");if(t.hasOwnProperty("clazz")&&o.addClass(t.clazz),"auto"===t.width?o.addClass("auto-grow"):t.width&&o.css("width",t.width),t.prefix){var r="",s=null;"string"==typeof t.prefix?r=t.prefix+"&nbsp;":(r=t.prefix.label,s=t.prefix.width||null),$("<div></div>").addClass("prefix").css("width",s).html(r).appendTo(o)}t.content?$("<div></div>").addClass("content").append(t.content).appendTo(o):t.html?$(t.html).appendTo(o):o.html("&nbsp;"),(!t.content||t.hasOwnProperty("padding")&&!1===t.padding)&&o.addClass("no-padding"),t.label&&(a=!0),e.isMenu&&($("<div/>").addClass("gravit-icon-right").click(()=>{t.content.click()}).appendTo(o),i.addClass("no-padding-left")),e.hasOwnProperty("rawClick")&&e.rawClick&&o.on("click",e.rawClick),e.noPaddingRight&&i.addClass("no-padding-right"),o.appendTo(i)})),a){var r=$("<div></div>").addClass("labels").appendTo(t);e.columns.forEach((function(e){var t=$("<label></label>");e.label?"string"==typeof e.label?$("<span></span>").text(e.label).addClass(e.labelClass?e.labelClass:"").appendTo(t):t.append(e.label):t.html("&nbsp;"),"auto"===e.width?t.addClass("auto-grow"):e.width&&t.css("width",e.width),(!e.content||e.hasOwnProperty("padding")&&!1===e.padding)&&t.addClass("no-padding"),t.appendTo(r)}))}}))}};$.fn.gPropertyRow=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):o.init.apply(this,arguments)}},function(e,t,n){"use strict";var o=n(1),i={init:function(e){var t=[{unit:o.GLength.Unit.PX,name:o.GLocale.get(new o.GLocaleKey("GLength","unit.px")),short:o.GLocale.get(new o.GLocaleKey("GLength","unit.px.short"),void 0,o.GLocaleLanguage.English)},{unit:o.GLength.Unit.MM,name:o.GLocale.get(new o.GLocaleKey("GLength","unit.mm")),short:o.GLocale.get(new o.GLocaleKey("GLength","unit.mm.short"),void 0,o.GLocaleLanguage.English)},{unit:o.GLength.Unit.CM,name:o.GLocale.get(new o.GLocaleKey("GLength","unit.cm")),short:o.GLocale.get(new o.GLocaleKey("GLength","unit.cm.short"),void 0,o.GLocaleLanguage.English)},{unit:o.GLength.Unit.IN,name:o.GLocale.get(new o.GLocaleKey("GLength","unit.in")),short:o.GLocale.get(new o.GLocaleKey("GLength","unit.in.short"),void 0,o.GLocaleLanguage.English)},{unit:o.GLength.Unit.PC,name:o.GLocale.get(new o.GLocaleKey("GLength","unit.pc")),short:o.GLocale.get(new o.GLocaleKey("GLength","unit.pc.short"),void 0,o.GLocaleLanguage.English)},{unit:o.GLength.Unit.PT,name:o.GLocale.get(new o.GLocaleKey("GLength","unit.pt")),short:o.GLocale.get(new o.GLocaleKey("GLength","unit.pt.short"),void 0,o.GLocaleLanguage.English)}];return e=$.extend({short:!1},e),this.each((function(){var n=$(this);if(n.is("select"))for(var o=0;o<t.length;++o)n.append($("<option></option>").attr("value",t[o].unit).text(e.short?t[o].short:t[o].name))}))}};$.fn.gUnit=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):i.init.apply(this,arguments)}},function(e,t,n){"use strict";n(51);var o=[];function i(){if(o.length>0){var e=$(o[o.length-1]);$(e).data("gdialog").closable&&e.gDialog("close",!0)}}document.addEventListener("keydown",(function(e){27===e.keyCode&&i()}));var a={init:function(e){return e=$.extend({releaseOnClose:!0,className:"",buttons:null,openCallback:null,closeCallback:null,nowrap:!1,closeTimeout:null,alwaysCloseable:!1},e),this.each((function(){var t=$(this).data("gdialog",{options:e,closable:!1});if(e.nowrap||t.addClass("g-dialog-content").wrap($("<div></div>").addClass("g-dialog").addClass(e.className||"")),e.buttons&&e.buttons.length)for(var n=$("<div></div>").addClass("g-dialog-footer").appendTo(t.closest(".g-dialog")),o=$("<div/>").addClass("buttons").appendTo(n),i=0;i<e.buttons.length;++i)$(e.buttons[i]).appendTo(o)}))},open:function(e){var t=$(this),n=t.data("gdialog"),a=n.options||{};n&&(n.closable=e||!1);var r=t.closest(".g-dialog"),s=$("<div></div>").addClass("g-dialog-container").on("mousedown",e=>$(e.target).hasClass("g-dialog-container")&&0===$(e.target).find(".g-overlay").length?i():void 0).append(r).appendTo($("body"));if(n){const{options:{className:e}={}}=n;e&&s.addClass("".concat(e,"-container"))}return o.push(this[0]),t.trigger("open"),s.addClass("visible"),a&&a.openCallback&&a.openCallback.call(this),this},isOpen:function(){return o.length&&o[o.length-1]===this[0]},close:function(e,t){var n=$(this),i=n.data("gdialog").options||{};if(i.alwaysCloseable&&o.indexOf(this[0])>=0||o.length&&o[o.length-1]===this[0]){var a=n.closest(".g-dialog-container");if(a.removeClass("visible"),setTimeout(()=>{i.releaseOnClose?n.closest(".g-dialog").remove():n.parents(".g-dialog").detach(),a.remove()},parseInt(isNaN(t)?isNaN(i.closeTimeout)?250:i.closeTimeout:t)),i.alwaysCloseable){var r=o.indexOf(this[0]);o.splice(r,1)}else o.pop();i&&i.closeCallback&&i.closeCallback(e)}return this}};$.fn.gDialog=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):a.init.apply(this,arguments)}},function(e,t,n){"use strict";var o=n(14);n(276),n(51);var i,a,r,s=n(13),l=n(1),c=o(n(10)),d=n(9),u=n(61),p=o(n(1318)),g={init:function(e){if(e){if(!(e instanceof u.GRichTooltipConfig))throw new Error("Not a Tooltip Config");return e=$.extend({title:"No title",isPro:!1,shortcut:null,video:null,pic:null,description:null,videoTimeout:2e3,middle:!0,marginLeft:0,side:!1,learnMore:null,upgradeToProStatsValue:null,forceShow:!1,flipHorizontal:!1},e.getConfig()),d.IS_COREL&&!e.forceShow?this:this.each((function(){const t=$(this);e._id=c.default.uuid(7),t.data("g-rich-tooltip",e),t.on("mouseover",(function(e){i&&(clearTimeout(i),i=null),a&&(clearTimeout(a),a=null);var n=function(){t.data("g-rich-tooltip-container-hovered",!0),g.showTooltip.call(t,e)};r?n():a=setTimeout(n,500)})),t.on("mouseout",(function(e){a&&(clearTimeout(a),a=null),t.data("g-rich-tooltip-container-hovered",!1),g.hideTooltip.call(t,e)})),t.on("mousedown",(function(){a&&(clearTimeout(a),a=null)}))}))}},showTooltip:function(){const e=$(this),t=e.data("g-rich-tooltip");if(r){if(r.data("g-rich-tooltip-id")===t._id)return;g.close.call(e)}gContainer.getProperty(p.default.StoragePropertyName).then(n=>{t.enhanced="boolean"!=typeof n||n,(r=g.createTooltip(t)).on("mouseover",(function(){i&&(clearTimeout(i),i=null),e.data("g-rich-tooltip-self-tooltip-hovered",!0)})),r.on("mouseout",(function(){e.data("g-rich-tooltip-self-tooltip-hovered",!1),g.hideTooltip.call(e)})),r.on("click",(function(){g.close.call(e)})),r.gOverlay("open",e)})},hideTooltip:function(){const e=$(this);i=setTimeout(()=>{e.data("g-rich-tooltip-container-hovered")||e.data("g-rich-tooltip-self-tooltip-hovered")||g.close.call(e)},100)},createTooltip:function(e){var t=0,n=4;return e.side?(t=0,n=-6):e.middle&&(t=-13),e.marginLeft&&(t+=parseInt(e.marginLeft)),e.flipHorizontal&&(t=0-t),$("<div />").addClass("g-rich-tooltip-container").data("g-rich-tooltip-id",e._id).append(g.createTooltipContent(e)).gOverlay({padding:!0,releaseOnClose:!0,bottomClazz:"from-bottom",rightClazz:"from-right",offsetY:n,offsetX:t,bottomOffsetY:6,clazz:"g-tooltip-content-overlay "+(e.flipHorizontal?"flip-horizontal":""),disableDarkShadow:!0,middle:e.middle,side:e.side,flipHorizontal:e.flipHorizontal})},createTooltipContent:function(e){const{title:t,isPro:n,shortcut:o,video:i,pic:a,description:r,videoTimeout:c,enhanced:d,learnMore:u,upgradeToProStatsValue:p}=e;let g=r;const h=gDesigner.getLicense(),f=(h.isPro()||h.isTrial())&&h.isExpired(),m=u?'<a href="'.concat(u,'" target="_blank">').concat(l.GLocale.get(new l.GLocaleKey("GCommonNames","text.learn-more")),"</a>"):"";g=g?"".concat(g," ").concat(m):m;const y=$("<div />").addClass("g-tooltip-content-wrapper").toggleClass("g-pro",n).append($("<div />").addClass("g-tooltip-content-header").toggleClass("simple",!d).append(o&&o.length?$("<div />").addClass("g-tooltip-content-shortcut").text(s.GKey.shortcutToString(o)):"").append($("<div />").toggleClass("limit-width",!(!o||!o.length)).addClass("g-tooltip-content-title").text(t))).append(d&&g?$("<div />").addClass("g-tooltip-content-description").html(g):"").append(d&&i&&i.length?$("<div />").addClass("g-tooltip-content-video loading"):"").append(d&&a&&a.length?$("<div />").addClass("g-tooltip-content-picture").append($("<img />").attr("width",298).attr("height",160).attr("src",a)):"").append(d&&n&&f?$("<div />").addClass("g-tooltip-content-footer").append($("<div />").addClass("g-tooltip-footer-pro-badge").append($("<div />").addClass("g-tooltip-pro-text").text(l.GLocale.get(new l.GLocaleKey("GCommonNames","text.try-this-feature-pro-tooltip-text"))))).on("click",()=>{gDesigner.openPaymentDialog(),gDesigner.stats("action_tooltips_upgradetopro",p)}):"");return d&&i&&setTimeout(()=>{const e=y.find(".g-tooltip-content-video");if(e.length){const t=$("<video />").attr("width",298).attr("height",160).attr("src",i).attr("autoplay",!0).attr("loop",!0);t.on("loadeddata",(function(){e.removeClass("loading")})),e.append(t)}},c),y},close:function(){r&&(r.gOverlay("close"),r=void 0)}};$.fn.gRichTooltip=function(e){return g[e]?g[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):g.init.apply(this,arguments)}},function(e,t,n){"use strict";var o=function(e,t){var n=$(e);n.addClass(t?"collapsed":"expanded"),n.removeClass(t?"expanded":"collapsed");var o=$(n.find(".gravit-icon-down,.gravit-icon-right")[0]);o.removeClass(t?"gravit-icon-down":"gravit-icon-right"),o.addClass(t?"gravit-icon-right":"gravit-icon-down")},i={init:function(e,t,n,i){return this.each((function(){var a=$(this).next(e);if(!$(this).hasClass("accordion")){var r=$("<span></span>").addClass($(this).hasClass("collapsed")?"gravit-icon-right":"gravit-icon-down"),s=$("<button></button>").addClass("g-accordion").on("click",function(){a.toggle();var e="none"===a.css("display");o(this,e),i&&gDesigner.stats("".concat(i,"_toggle_page"),e?"Collapse":"Expand"),$(this).trigger("change")}.bind(this)).append(r),l=$("<div/>").addClass("g-accordion-ghost");if(t){var c=$(this).find(t+":first");n?$(s).insertBefore(c):($(s).insertAfter(c),$(l).insertAfter(s)),c.on("click",(function(){s.trigger("click")})).on("mouseover",(function(){s.toggleClass("hovered")})).on("mouseout",(function(){s.toggleClass("hovered")}))}else $(this).append(s),$(this).append(l);$(this).addClass("accordion")}a.css("display",$(this).hasClass("collapsed")?"none":"")}))},toggleOpen:function(e){o(this,!e)}};$.fn.gAccordion=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):i.init.apply(this,arguments)}},function(e,t,n){"use strict";var o={init:function(e){return this.each((function(){var t=$(this),n=e.autoPadding,o=$("<span/>").addClass("g-input-label");e.label?o.html(e.label):e.class&&o.addClass(e.class),t.find("input").css("padding-left","20px").css("width","100%"),n&&t.find("input").css("padding-left","".concat(21+e.label.length,"px")),t.prepend(o)}))}};$.fn.gInputLabel=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):o.init.apply(this,arguments)}},function(e,t,n){"use strict";var o=n(1),i=n(34),a=(n(162),!1),r=null,s=null;function l(){}function c(e,t){var n=gDesigner.getActiveDocument().getEditor(),i=n.getSelection();if(i&&i.length>0){var a=o.GLocale.get(new o.GLocaleKey("GDesignerStyleEditor","text.style-attribution"));n.beginTransaction();try{for(var r=0;r<i.length;++r)t?i[r].removeStyle(e.getReferenceId()):i[r].addStyle(e.getReferenceId())}finally{n.commitTransaction(a)}n.updateSelection(!1,i)}}function d(e,t,n,i){var a=gDesigner.getActiveDocument();t||((n=new o.GStyle).setProperty("name",o.GLocale.get(new o.GLocaleKey("GDesignerStyleEditor","text.new-style"))),n.setProperty("defaultStyle",!1));var r=n.clone(),s=null;a.getEditor().getSelection()&&a.getEditor().getSelection().length>0&&(s=a.getEditor().getSelection()[0]),!t&&s&&r.assignStyleFrom(s);var l=t?o.GLocale.get(new o.GLocaleKey("GDesignerStyleEditor","text.style-editor")):o.GLocale.get(new o.GLocaleKey("GDesignerStyleEditor","text.style-creator")),d=$("<div/>").append($("<span/>").text(l)).addClass("creator-toolbar"),u=$("<input/>").css("align-self","center").css("width","100%").attr("type","text").val(n.getProperty("name")),g=$("<div/>").addClass("style").append($("<img/>").css("align-self","center").css("margin-left","10px").attr("src",gDesigner.getStylePreview(r,s instanceof o.GText))).append(u),f=$("<div/>").addClass("checkboxes").append($("<div/>").append($("<input/>").attr("data-property","style").attr("type","checkbox").prop("checked",!t||$.inArray(o.GStylable.PropertySet.Style,n.getProperty("ps"))>=0)).append($("<span/>").text(o.GLocale.get(new o.GLocaleKey("GDesignerStyleEditor","text.style")))).addClass("checkbox")).append($("<div/>").append($("<input/>").attr("data-property","fill").attr("type","checkbox").prop("checked",!t||$.inArray(o.GStylable.PropertySet.FillPaintLayers,n.getProperty("ps"))>=0)).append($("<span/>").text(o.GLocale.get(new o.GLocaleKey("GDesignerStyleEditor","text.fill")))).addClass("checkbox")).append($("<div/>").append($("<input/>").attr("data-property","border").attr("type","checkbox").prop("checked",!t||$.inArray(o.GStylable.PropertySet.BorderPaintLayers,n.getProperty("ps"))>=0)).append($("<span/>").text(o.GLocale.get(new o.GLocaleKey("GDesignerStyleEditor","text.border")))).addClass("checkbox")).append($("<div/>").append($("<input/>").attr("data-property","effects").attr("type","checkbox").prop("checked",!t||$.inArray(o.GStylable.PropertySet.Effects,n.getProperty("ps"))>=0)).append($("<span/>").text(o.GLocale.get(new o.GLocaleKey("GDesignerStyleEditor","text.effects")))).addClass("checkbox")).append($("<div/>").append($("<input/>").attr("data-property","text").attr("type","checkbox").prop("checked",t?$.inArray(o.GStylable.PropertySet.Text,n.getProperty("ps"))>=0:s instanceof o.GText)).append($("<span/>").text(o.GLocale.get(new o.GLocaleKey("GDesignerStyleEditor","text.text")))).addClass("checkbox")),m=$("<div/>"),y=$("<div/>").append($("<button/>").html(t?o.GLocale.get(new o.GLocaleKey("GCommonNames","action.apply")):o.GLocale.get(new o.GLocaleKey("GDesignerStyleEditor","action.create"))).on("click",(function(){gDesigner.stats("designerstyle_click_create");var r=[];if(f.find('input[data-property="style"]').is(":checked")&&r.push(o.GStylable.PropertySet.Style),f.find('input[data-property="fill"]').is(":checked")&&r.push(o.GStylable.PropertySet.FillPaintLayers),f.find('input[data-property="border"]').is(":checked")&&r.push(o.GStylable.PropertySet.BorderPaintLayers),f.find('input[data-property="effects"]').is(":checked")&&r.push(o.GStylable.PropertySet.Effects),f.find('input[data-property="text"]').is(":checked")&&(r.push(o.GStylable.PropertySet.Text),r.push(o.GStylable.PropertySet.Paragraph)),n.setProperties(["name","ps"],[g.find("input").val(),r]),!t){if(s&&n.assignStyleFrom(s),a.getScene().getStyles().appendChild(n),h(n,e,!1,i),i.parent()){var l=i.parent();l.offset().top+l.height()>document.body.clientHeight&&l.offset({top:l.offset().top-34,left:l.offset().left})}c(n)}gDesigner.createNewStylePreview(n,!0,s instanceof o.GText),m.gOverlay("close",e),!t&&i&&i.gOverlay("close"),p(t?$(".g-style-creator").find(".styles"):$(".g-style-editor").find(".styles:not(.no-style)"),t)}))).addClass("creator-toolbar bottom");m.addClass("g-style-creator").append(d).append($("<div/>").addClass("styles").append(g)).append(f).append(y).gOverlay({padding:!1,releaseOnClose:!0}).gOverlay("open",e);var v=m.parent().offset().top,_=m.parent().offset().left;m.parent().offset({top:v,left:_-100}),u.focus()}function u(e){if(r){var t=$(e).data("style");return t&&t.getReferenceId()!==r.getReferenceId()}return!1}function p(e,t){if(e.empty(),gDesigner.getActiveDocument().getScene().getStyles()){var n=gDesigner.getActiveDocument().getScene().getStyles();t||($(".g-style-editor").find(".no-style").empty(),f($(".g-style-editor").find(".no-style")));for(var o=n.getFirstChild();null!==o;o=o.getNext())!1===o.getProperty("defaultStyle")&&h(o,e,t)}}function g(e){var t=gDesigner.getActiveDocument().getEditor().getSelection();return!!(t&&t.length>0)&&t[0].getProperty("sref")===e.getReferenceId()}function h(e,t,n,i){var l=function(e){if(!a)return e.preventDefault(),void e.stopPropagation();var n=(s=$(e.target).closest(".style")).offset(),o=e.originalEvent;o.stopPropagation(),r=s.data("style"),!1,o.pageX-n.left,o.pageY-n.top,o.dataTransfer.effectAllowed="move",o.dataTransfer.setData("text/plain","dummy_data"),t.find(".style").each((function(e,n){$(n).on("dragenter",(function(e){u(this)&&($(this).parent().find(".style").removeClass("g-drop"),$(this).addClass("g-drop"))})).on("dragleave",(function(e){u(this)&&$(e.target).parent()!==this&&e.target!==this&&$(this).removeClass("g-drop")})).on("dragover",(function(e){var t=e.originalEvent;u(this)&&(t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect="move")})).on("drop",(function(){var e=$(this);e.removeClass("g-drop"),!0;var n=e.data("style");if(r&&n&&r.getParent()===n.getParent()){var o=r.getParent(),i=o.getIndexOfChild(r),a=o.getIndexOfChild(n);o.removeChild(r),o.insertChild(r,i<a?n.getNext():n),p(t,!0)}}))}))}.bind(this),h=function(){!1}.bind(this),f=$("<div/>").addClass("style").data("style",e).appendTo(t);$("<div/>").addClass("style-selector").appendTo(f),n&&f.attr("draggable",!0).on("mousedown",(function(e){a=$(e.target).hasClass("style")||$(e.target).parent().hasClass("style")})).on("dragstart",l).on("dragend",h),n||f.attr("data-selected",g(e)?"yes":"no").addClass(g(e)?"g-selected":"").on("click",(function(){var t=$(this);gDesigner.stats("designerstyle_click_assign",e&&e.getReferenceId()),"no"===t.attr("data-selected")&&($(".g-style-editor").find(".style").removeClass("g-selected"),$(".g-style-editor").find(".style").attr("data-selected","no"),t.attr("data-selected","yes").addClass("g-selected"),c(e)),i&&i.gOverlay("close")}));var m=null,y=gDesigner.getActiveDocument().getEditor().getSelection();if(y&&y.length>0&&(m=y[0]),f.append($("<img/>").css("align-self","center").attr("src",gDesigner.getStylePreview(e,m instanceof o.GText))),$("<span/>").css({alignSelf:"center",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",width:"200px"}).text(e.getProperty("name")).appendTo(f),n)$("<div/>").addClass("styles-buttons").css("display","none").append($("<button/>").addClass("g-flat").css("align-self","center").append($("<span/>").addClass("gravit-icon-trash")).on("click",(function(){gDesigner.stats("designerstyle_click_disconnect",e&&e.getReferenceId()),e.disconnectStyle(),gDesigner.getActiveDocument().getScene().getStyles().removeChild(e),f.remove()}))).append($("<button/>").addClass("g-flat").css("align-self","center").append($("<span/>").addClass("gravit-icon-settings")).on("click",(function(){gDesigner.stats("designerstyle_click_open",e&&e.getReferenceId()),d(f,!0,e)}))).appendTo(f);t.hasClass("styles")||t.addClass("styles")}function f(e,t){var n=gDesigner.getActiveDocument().getEditor().getSelection();if(n&&n.length>0){var i=$("<div/>").addClass("style").appendTo(e),a=n[0],r=!a.getProperty("sref");$("<div/>").addClass("style-selector").appendTo(i),i.attr("data-selected",r?"yes":"no").addClass(r?"g-selected":"").on("click",(function(){var e=$(this);"no"===e.attr("data-selected")&&(e.parent().find(".style").attr("data-selected","no").removeClass("g-selected"),e.attr("data-selected","yes").addClass("g-selected"),c(a.getReferencedStyle(),!0)),t&&t.gOverlay("close")})),$("<span/>").css("align-self","center").text(o.GLocale.get(new o.GLocaleKey("GDesignerStyleEditor","text.no-style"))).css("width","165px").css("margin-left","10px").appendTo(i),e.hasClass("styles")||(e.addClass("styles"),e.addClass("no-style"))}}o.GObject.inheritAndMix(l,o.GObject);var m={init:function(){return this.each((function(){var e=this,t=$(this),n=function(){var n=$("<div/>"),i=$("<div/>"),a=$("<div></div>").addClass("g-style-editor").css("width","250px");if(f(n,a),gDesigner.getActiveDocument().getScene().getStyles())for(var r=gDesigner.getActiveDocument().getScene().getStyles().getFirstChild();null!==r;r=r.getNext())!1===r.getProperty("defaultStyle")&&h(r,i,!1,a);var s=$("<div/>").addClass("style-toolbar").append($("<div/>").append($("<button/>").addClass("g-flat").html(o.GLocale.get(new o.GLocaleKey("GDesignerStyleEditor","action.create-new-style")))).on("click",(function(){gDesigner.stats("designerstyle_click_createnewstyle"),d(i,!1,null,a)}))).append($("<div/>").append($("<button/>").addClass("g-flat").html(o.GLocale.get(new o.GLocaleKey("GDesignerStyleEditor","action.organize-styles"))+"...")).on("click",(function(){gDesigner.stats("designerstyle_click_organize"),function(e){var t=$("<div/>").append($("<span/>").text(o.GLocale.get(new o.GLocaleKey("GDesignerStyleEditor","text.style-organizer")))).addClass("creator-toolbar"),n=$("<div/>"),i=gDesigner.getActiveDocument().getScene().getStyles(),a=!1;if(i)for(var r=i.getFirstChild();null!==r;r=r.getNext())!1===r.getProperty("defaultStyle")&&(a=!0,h(r,n,!0));a||f(n);var s=$("<div/>"),l=$("<div/>").append($("<button/>").html(o.GLocale.get(new o.GLocaleKey("GCommonNames","text.finish"))).on("click",(function(){gDesigner.stats("designerstyle_click_finish");var t=$(".g-style-editor").find(".styles:not(.no-style)");if(t.empty(),i)for(var n=i.getFirstChild();null!==n;n=n.getNext())!1===n.getProperty("defaultStyle")&&h(n,t,!1,e);s.gDialog("close")}))).addClass("creator-toolbar bottom");s.append(t).append(n).append(l).gDialog({releaseOnClose:!0,className:"g-style-creator organizer"}),s.gDialog("open",!1)}(a)})));a.append(n).append(i).append(s).on("open",(function(){t.trigger("open")})).on("close",(function(){t.trigger("close")})).gOverlay({padding:!1,releaseOnClose:!0}).gOverlay("open",e)};t.gPro().on("click",i.watchDog.trap((function(){gDesigner.stats("designerstyle_click_openpanel"),t.find(".g-styles-field").hasClass("g-disabled")||n()}),null,()=>{gDesigner.stats("designerstyle_nonprotriespro_openpanel")}))}))},value:function(e){}};e.exports=l,$.fn.gDesignerStyleEditor=function(e){return m[e]?m[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):m.init.apply(this,arguments)}},function(e,t,n){"use strict";n(7);var o=n(1),i=n(9),a=n(342),r=n(586),s=n(1135),l=null,c=null;var d={init:function(){return this.each((function(){c=$("<div/>").addClass("overlay-fade").on("click",(function(){this.remove(),l.gOverlay("close")})).appendTo($("body"));var e=a.USERLOGIN.loadLogo();l=$("<div></div>").addClass("loading").addClass("g-user-details").addClass(a.USERLOGIN.OVERLAY_CLASS).append(e).gOverlay({clazz:"g-user-login-dialog"+(a.USERLOGIN.OVERLAY_CLASS?" "+a.USERLOGIN.OVERLAY_CLASS:""),padding:!1,releaseOnClose:!0,closeCallback:function(){c.remove()}}).gOverlay("open",this),gDesigner.getUser().then(async e=>{let t=!i.PROFILE_DIALOG_URL;i.PROFILE_DIALOG_URL&&(t=await i.gApi.hasPurchases().catch(()=>!1)),l.removeClass("loading"),l.append(function(e,t){const n=gDesigner.getLicense(),a=()=>{l.gOverlay("close")},c=e.canUpdateSelfAccountData();var d=$("<div/>"),u=$("<div/>").addClass("footer").append($("<div/>").addClass("top-section").append([$("<button/>").html(o.GLocale.get(new o.GLocaleKey("GCommonNames","action.settings"))).addClass("highlight").css("display",c?"":"none").on("click",async n=>{gDesigner.stats("profile_click_open-button"),i.ALWAYS_SHOW_ACCOUNT_SETTING_DIALOG||t?new r(e).open():i.PROFILE_DIALOG_URL?gContainer.openExternalLink(n,i.PROFILE_DIALOG_URL):gContainer.openExternalLink(n,i.gApi.url+"/profile"),a()}),$("<button/>").html(o.GLocale.get(new o.GLocaleKey("GCommonNames","action.sign-out"))).addClass("signout").on("click",(function(){gDesigner.stats("profile_click_signout-button"),gDesigner.signout(),a()}))]));if(i.USER_LOGIN.SHOW_PURCHASE_PRO&&!gDesigner.isAnonymous()&&(!n.isPro()||n.isExpired())){const e=gDesigner.getAction(s.ID);e&&e.isVisible()&&e.isAvailable()&&u.append($("<div/>").addClass("bottom-section").append($("<button/>").addClass("highlight full-width").html(o.GLocale.get(new o.GLocaleKey("GPurchaseProAction","title"))).on("click",(function(){gDesigner.stats("profile_click_purchase-pro"),gDesigner.executeAction(s.ID,null,null,!0)}))))}return e.hasOwnPictureAvatar()?d.append($("<div/>").append($("<div/>").addClass("avatar").css("background-image",'url("'+e.avatar+'")')).append($("<div/>").addClass("username-div").append($("<div/>").addClass("username").append($("<span/>").addClass("name").text(e.getFullUserName())).append($("<span/>").addClass("email").text(e.getAccountName()))))).append(u):d.append($("<div/>").append($("<div/>").addClass("avatar").addClass("g-user-login-avatar").css({"background-color":e.getUserColor()}).text(e.getUserNameInitials())).append($("<div/>").addClass("username-div").append($("<div/>").addClass("username").append($("<span/>").addClass("name").text(e.getFullUserName())).append($("<span/>").addClass("email").text(e.getAccountName()))))).append(u),d}(e,t))})}))}};$.fn.gUserLogin=function(e){return d[e]?d[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):d.init.apply(this,arguments)}},function(e,t,n){"use strict";const o={init:function(){let{feature:e,pro:t=!0,badgeAlwaysVisible:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.each((function(){var o=$(this);if(o.toggleClass("pro",!!t),o.toggleClass("badge-always-visible",!!n),t){const t=gDesigner.getLicense(),n=t.isLegacy()&&gDesigner.isLegacyFeature(e),i=t.isTrial()&&!n;if(o.toggleClass("trial",i),"option"===o.prop("tagName").toLowerCase()){const e=o.closest("select");e.hasClass("has-pro-option")||e.addClass("has-pro-option"),i&&!e.hasClass("has-trial-option")&&e.addClass("has-trial-option")}}o.toggleClass("legacy-feature",gDesigner.isLegacyFeature(e))}))}};$.fn.gPro=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.gPro"):o.init.apply(this,arguments)}},function(e,t,n){"use strict";n(276);const{watchDog:o}=n(34),i=n(418),a={init:function(e){return e=$.extend({defaultRole:null,buttons:[]},e),this.each((function(){const t=i.ROLES.ALL.filter(e=>e.isAssignable()),n=$("<div/>").gOverlay({padding:!1,clazz:"g-role-selector-overlay",releaseOnClose:!1}).addClass("g-role-selector-container").append($("<div/>").addClass("g-role-selector-roles").append(t.map(e=>$("<div/>").attr("role-id",e.id).addClass("g-role-selector-role").append($("<span/>").addClass("icon").addClass("gravit-icon-role-checked")).append($("<div/>").addClass("g-role-selector-role-container").append($("<span/>").addClass("name").text(e.name).gPro({pro:!!e.pro,badgeAlwaysVisible:!0})).append($("<span/>").addClass("text").text(e.description))).on("click",o.trap(()=>{a.role.call(this,e),$(this).trigger("rolechange",e),n.gOverlay("close")},()=>!e.pro)))));e.buttons&&e.buttons.length&&(n.append($("<hr/>")),n.append($("<div/>").addClass("g-role-selector-buttons").append(e.buttons.map(e=>{let{icon:t,label:o,click:i,closeOnClick:a}=e;return $("<div/>").addClass("g-role-selector-button").append($("<span/>").addClass("icon").addClass(t||"")).append($("<span/>").addClass("label").text(o)).on("click",()=>{i(),a&&n.gOverlay("close")})}))));const r=$(this).data("options",e).data("overlay",n).addClass("g-role-selector").append($("<label/>")).append($("<span/>").addClass("gravit-icon-down")).on("click",e=>{n.gOverlay("open",$(e.target).closest(".g-role-selector"))}),s=e.defaultRole||t[0];return a.role.call(this,s),r}))},role:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(arguments.length>0){const n=$(this);let o=t&&n.data("options")?n.data("options").role:null;n.data("options").previousRole=o,n.data("options").role=e,n.find("label").text(e.name);const i=n.data("overlay");return i.find(".g-role-selector-role.g-selected").removeClass("g-selected"),i.find('[role-id="'.concat(e.id,'"]')).addClass("g-selected"),this}return $(this).data("options").role},restoreRole:function(){const e=$(this);e.data("options").previousRole&&a.role.call(this,e.data("options").previousRole,!1)}};$.fn.gRoleSelector=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.gRoleSelector"):a.init.apply(this,arguments)}},function(e,t,n){"use strict";n(158);var o=n(1);const i=n(223),a=e=>{e.empty().append($("<div/>").addClass("container").append($("<span/>").addClass("gravit-icon-pages")).append($("<span/>").addClass("caption")).append($("<span/>").addClass("gravit-icon-down")))},r=(e,t)=>{e.empty().append($("<div />").addClass("action-button").append($("<span />").addClass("gravit-icon-touch-pages-panel")).append($("<span />").addClass("caption"))).append(t)},s={init:function(){return this.each((function(){const e=$(this),t=$("<button />").addClass("dropdown-button").append($("<span></span>").addClass("gravit-icon-down"));e.data("g-page-button-dropdownbutton",t);let n=new i(void 0,"g-page-menu");e.addClass("g-page-button").gMenuButton({menu:()=>{const t=e.data("options")&&e.data("options").scene;return t&&(n.clearItems(),t.getChildren().filter(e=>e instanceof o.GPage&&e.isVisible()).reduce((e,t)=>(e.createAddItem(t.getLabel(),()=>{t.setFlag(o.GNode.Flag.Active)}),e),n)),n},getActiveItem:()=>{const t=e.data("options")&&e.data("options").scene;if(t){const e=t.getActivePage();if(e)return n.findItem(e.getLabel())}return null},reference:()=>gDesigner.isTouchEnabled()?t:null}),gDesigner.isTouchEnabled()?r(e):a(e)}))},scene:function(e){const t=$(this),n=t.data("options")||{};return n.scene!==e&&(n.scene&&n.scene.removeEventListener(o.GNode.AfterFlagChangeEvent,s._afterFlagChangeEvent,this),n.scene=e,e&&(s._activatePage.call(this,e.getActivePage()),e.addEventListener(o.GNode.AfterFlagChangeEvent,s._afterFlagChangeEvent,this))),t.data("options",n),this},reinit:function(){const e=$(this);gDesigner.isTouchEnabled()?r(e,e.data("g-page-button-dropdownbutton")):a(e);const t=(e.data("options")||{}).scene;t&&(s._activatePage.call(this,t.getActivePage()),t.hasEventListeners(o.GNode.AfterFlagChangeEvent,s._afterFlagChangeEvent,this)||t.addEventListener(o.GNode.AfterFlagChangeEvent,s._afterFlagChangeEvent,this))},release:function(){const e=$(this),t=e.data("options");return t&&t.scene&&t.scene.removeEventListener(o.GNode.AfterFlagChangeEvent,s._afterFlagChangeEvent,this),e.remove(),this},_afterFlagChangeEvent:function(e){e.node instanceof o.GPage&&e.flag===o.GNode.Flag.Active&&s._activatePage.call(this,e.node)},_activatePage:function(e){$(this).find(".caption").text(e?e.getLabel():"")}};$.fn.gPageButton=function(e){return s[e]?s[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.gPageButton"):s.init.apply(this,arguments)}},function(e,t,n){"use strict";n(84);const o={init:function(){return this.each((function(){const e=$(this).addClass("g-share-user-input");$("<input>").attr("type","email").keypress(e=>{const t=e.keyCode?e.keyCode:e.which;if(32!=t&&13!=t||(e.stopPropagation(),e.preventDefault()),13==t){const t=$(e.target).closest("input"),n=t.val();return n&&n.trim().length&&($("<div/>").addClass("email").append($("<span/>").text(n.trim())).append($("<span/>").addClass("gravit-icon-close").on("click",e=>{$(e.target).closest(".email").remove()})).insertBefore(t),t.val("").focus()),!1}}).appendTo(e)})),this},users:function(){return this}};$.fn.gShareUserInput=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.gShareUserInput"):o.init.apply(this,arguments)}},function(e,t,n){"use strict";var o={init:function(e){return this.each((function(){$(this).on("scroll",(function(){if(gDesigner.isTouchEnabled()){var t=$(this)[0].scrollTop,n="light"==gDesigner.getSetting("theme")?"DFDFDF":"2E2E2E";t=t>20?20:t,$(e).css({"box-shadow":"0 ".concat(t,"px 20px -5px #").concat(n)})}}))}))}};$.fn.gToolbarShadow=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.myPlugin"):o.init.apply(this,arguments)}},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"createInstance",(function(){return Le})),n.d(t,"add",(function(){return ke})),n.d(t,"flush",(function(){return Oe})),n.d(t,"getDeviceId",(function(){return Fe})),n.d(t,"getSessionId",(function(){return Re})),n.d(t,"getUserId",(function(){return Me})),n.d(t,"groupIdentify",(function(){return Ne})),n.d(t,"identify",(function(){return Be})),n.d(t,"init",(function(){return Ue})),n.d(t,"logEvent",(function(){return $e})),n.d(t,"remove",(function(){return je})),n.d(t,"reset",(function(){return Ke})),n.d(t,"revenue",(function(){return Ve})),n.d(t,"setDeviceId",(function(){return He})),n.d(t,"setGroup",(function(){return We})),n.d(t,"setOptOut",(function(){return ze})),n.d(t,"setSessionId",(function(){return qe})),n.d(t,"setTransport",(function(){return Ye})),n.d(t,"setUserId",(function(){return Xe})),n.d(t,"track",(function(){return Qe})),n.d(t,"runQueuedFunctions",(function(){return ne})),n.d(t,"Revenue",(function(){return O})),n.d(t,"Identify",(function(){return k})),n.d(t,"Types",(function(){return o}));var o={};n.r(o),n.d(o,"ServerZone",(function(){return m})),n.d(o,"SpecialEventType",(function(){return w})),n.d(o,"IdentifyOperation",(function(){return _})),n.d(o,"RevenueProperty",(function(){return b})),n.d(o,"LogLevel",(function(){return f})),n.d(o,"PluginType",(function(){return g})),n.d(o,"Status",(function(){return h})),n.d(o,"TransportType",(function(){return V}));var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var r=function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n}function l(e,t,n,o){return new(n||(n=Promise))((function(i,a){function r(e){try{l(o.next(e))}catch(e){a(e)}}function s(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}l((o=o.apply(e,t||[])).next())}))}function c(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=r.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}Object.create;function d(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,a=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=a.next()).done;)r.push(o.value)}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return r}function p(e,t,n){if(n||2===arguments.length)for(var o,i=0,a=t.length;i<a;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))}Object.create;"function"==typeof SuppressedError&&SuppressedError;var g,h;!function(e){e.BEFORE="before",e.ENRICHMENT="enrichment",e.DESTINATION="destination"}(g||(g={})),function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.PayloadTooLarge="payload_too_large",e.Invalid="invalid",e.Failed="failed",e.Timeout="Timeout",e.SystemError="SystemError"}(h||(h={}));var f,m,y="".concat("AMP","_unsent"),v=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=h.Unknown),{event:e,code:t,message:n}};!function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Warn=2]="Warn",e[e.Verbose=3]="Verbose"}(f||(f={})),function(e){e.US="US",e.EU="EU"}(m||(m={}));var _,b,w,C="Amplitude Logger ",x=function(){function e(){this.logLevel=f.None}return e.prototype.disable=function(){this.logLevel=f.None},e.prototype.enable=function(e){void 0===e&&(e=f.Warn),this.logLevel=e},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<f.Verbose||console.log("".concat(C,"[Log]: ").concat(e.join(" ")))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<f.Warn||console.warn("".concat(C,"[Warn]: ").concat(e.join(" ")))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<f.Error||console.error("".concat(C,"[Error]: ").concat(e.join(" ")))},e}(),S=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,logLevel:f.Warn,loggerProvider:new x,optOut:!1,serverUrl:"https://api2.amplitude.com/2/httpapi",serverZone:m.US,useBatch:!1}},E=function(){function e(e){var t,n,o;this._optOut=!1;var i=S();this.apiKey=e.apiKey,this.flushIntervalMillis=e.flushIntervalMillis||i.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||i.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||i.flushQueueSize,this.loggerProvider=e.loggerProvider||i.loggerProvider,this.logLevel=null!==(t=e.logLevel)&&void 0!==t?t:i.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.optOut=null!==(n=e.optOut)&&void 0!==n?n:i.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||i.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=null!==(o=e.useBatch)&&void 0!==o?o:i.useBatch,this.loggerProvider.enable(this.logLevel);var a=T(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=a.serverZone,this.serverUrl=a.serverUrl}return Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),e}(),A=function(e,t){return e===m.EU?t?"https://api.eu.amplitude.com/batch":"https://api.eu.amplitude.com/2/httpapi":t?"https://api2.amplitude.com/batch":"https://api2.amplitude.com/2/httpapi"},T=function(e,t,n){if(void 0===e&&(e=""),void 0===t&&(t=S().serverZone),void 0===n&&(n=S().useBatch),e)return{serverUrl:e,serverZone:void 0};var o=[m.US,m.EU].includes(t)?t:S().serverZone;return{serverZone:o,serverUrl:A(o,n)}},G=function(){function e(){this.name="amplitude",this.type=g.DESTINATION,this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduled=!1,this.queue=[]}return e.prototype.setup=function(e){var t;return l(this,void 0,void 0,(function(){var n,o=this;return c(this,(function(i){switch(i.label){case 0:return this.config=e,this.storageKey="".concat(y,"_").concat(this.config.apiKey.substring(0,10)),[4,null===(t=this.config.storageProvider)||void 0===t?void 0:t.get(this.storageKey)];case 1:return n=i.sent(),this.saveEvents(),n&&n.length>0&&Promise.all(n.map((function(e){return o.execute(e)}))).catch(),[2,Promise.resolve(void 0)]}}))}))},e.prototype.execute=function(e){var t=this;return new Promise((function(n){var o={event:e,attempts:0,callback:function(e){return n(e)},timeout:0};t.addToQueue(o)}))},e.prototype.addToQueue=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=t.filter((function(t){return t.attempts<e.config.flushMaxRetries?(t.attempts+=1,!0):(e.fulfillRequest([t],500,"Event rejected due to exceeded retry count"),!1)}));o.forEach((function(t){e.queue=e.queue.concat(t),0!==t.timeout?setTimeout((function(){t.timeout=0,e.schedule(0)}),t.timeout):e.schedule(e.config.flushIntervalMillis)})),this.saveEvents()},e.prototype.schedule=function(e){var t=this;this.scheduled||(this.scheduled=!0,setTimeout((function(){t.flush(!0).then((function(){t.scheduled=!1,t.queue.length>0&&t.schedule(e)}))}),e))},e.prototype.flush=function(e){return void 0===e&&(e=!1),l(this,void 0,void 0,(function(){var t,n,o,i=this;return c(this,(function(a){switch(a.label){case 0:return t=[],n=[],this.queue.forEach((function(e){return 0===e.timeout?t.push(e):n.push(e)})),this.queue=n,r=t,s=this.config.flushQueueSize,l=Math.max(s,1),o=r.reduce((function(e,t,n){var o=Math.floor(n/l);return e[o]||(e[o]=[]),e[o].push(t),e}),[]),[4,Promise.all(o.map((function(t){return i.send(t,e)})))];case 1:return a.sent(),[2]}var r,s,l}))}))},e.prototype.send=function(e,t){return void 0===t&&(t=!0),l(this,void 0,void 0,(function(){var n,o,i,a;return c(this,(function(r){switch(r.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(e,400,"Event rejected due to missing API key")];n={api_key:this.config.apiKey,events:e.map((function(e){var t=e.event;t.extra;return s(t,["extra"])})),options:{min_id_length:this.config.minIdLength}},r.label=1;case 1:return r.trys.push([1,3,,4]),o=T(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(o,n)];case 2:return null===(i=r.sent())?(this.fulfillRequest(e,0,"Unexpected error occurred"),[2]):t?(this.handleReponse(i,e),[3,4]):(this.fulfillRequest(e,i.statusCode,i.status),[2]);case 3:return a=r.sent(),this.fulfillRequest(e,0,String(a)),[3,4];case 4:return[2]}}))}))},e.prototype.handleReponse=function(e,t){switch(e.status){case h.Success:this.handleSuccessResponse(e,t);break;case h.Invalid:this.handleInvalidResponse(e,t);break;case h.PayloadTooLarge:this.handlePayloadTooLargeResponse(e,t);break;case h.RateLimit:this.handleRateLimitResponse(e,t);break;default:this.handleOtherReponse(t)}},e.prototype.handleSuccessResponse=function(e,t){this.fulfillRequest(t,e.statusCode,"Event tracked successfully")},e.prototype.handleInvalidResponse=function(e,t){var n=this;if(e.body.missingField||e.body.error.startsWith("Invalid API key"))this.fulfillRequest(t,e.statusCode,e.body.error);else{var o=p(p(p(p([],u(Object.values(e.body.eventsWithInvalidFields)),!1),u(Object.values(e.body.eventsWithMissingFields)),!1),u(Object.values(e.body.eventsWithInvalidIdLengths)),!1),u(e.body.silencedEvents),!1).flat(),i=new Set(o),a=t.filter((function(t,o){if(!i.has(o))return!0;n.fulfillRequest([t],e.statusCode,e.body.error)}));this.addToQueue.apply(this,p([],u(a),!1))}},e.prototype.handlePayloadTooLargeResponse=function(e,t){1!==t.length?(this.config.flushQueueSize/=2,this.addToQueue.apply(this,p([],u(t),!1))):this.fulfillRequest(t,e.statusCode,e.body.error)},e.prototype.handleRateLimitResponse=function(e,t){var n=this,o=Object.keys(e.body.exceededDailyQuotaUsers),i=Object.keys(e.body.exceededDailyQuotaDevices),a=e.body.throttledEvents,r=new Set(o),s=new Set(i),l=new Set(a),c=t.filter((function(t,o){if(!(t.event.user_id&&r.has(t.event.user_id)||t.event.device_id&&s.has(t.event.device_id)))return l.has(o)&&(t.timeout=n.throttleTimeout),!0;n.fulfillRequest([t],e.statusCode,e.body.error)}));this.addToQueue.apply(this,p([],u(c),!1))},e.prototype.handleOtherReponse=function(e){var t=this;this.addToQueue.apply(this,p([],u(e.map((function(e){return e.timeout=e.attempts*t.retryTimeout,e}))),!1))},e.prototype.fulfillRequest=function(e,t,n){this.saveEvents(),e.forEach((function(e){return e.callback(v(e.event,t,n))}))},e.prototype.saveEvents=function(){if(this.config.storageProvider){var e=Array.from(this.queue.map((function(e){return e.event})));this.config.storageProvider.set(this.storageKey,e)}},e}(),P=function(e){return e?(e^16*Math.random()>>e/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,P)};!function(e){e.SET="$set",e.SET_ONCE="$setOnce",e.ADD="$add",e.APPEND="$append",e.PREPEND="$prepend",e.REMOVE="$remove",e.PREINSERT="$preInsert",e.POSTINSERT="$postInsert",e.UNSET="$unset",e.CLEAR_ALL="$clearAll"}(_||(_={})),function(e){e.REVENUE_PRODUCT_ID="$productId",e.REVENUE_QUANTITY="$quantity",e.REVENUE_PRICE="$price",e.REVENUE_TYPE="$revenueType",e.REVENUE="$revenue"}(b||(b={})),function(e){e.IDENTIFY="$identify",e.GROUP_IDENTIFY="$groupidentify",e.REVENUE="revenue_amount"}(w||(w={}));var D,L=function(e){if(Object.keys(e).length>1e3)return!1;for(var t in e){var n=e[t];if(!I(t,n))return!1}return!0},I=function(e,t){var n,o;if("string"!=typeof e)return!1;if(Array.isArray(t)){var i=!0;try{for(var a=d(t),r=a.next();!r.done;r=a.next()){var s=r.value;if(Array.isArray(s))return!1;if("object"==typeof s)i=i&&L(s);else if(!["number","string"].includes(typeof s))return!1;if(!i)return!1}}catch(e){n={error:e}}finally{try{r&&!r.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}}else{if(null==t)return!1;if("object"==typeof t)return L(t);if(!["number","string","boolean"].includes(typeof t))return!1}return!0},k=function(){function e(){this._propertySet=new Set,this._properties={}}return e.prototype.getUserProperties=function(){return r({},this._properties)},e.prototype.set=function(e,t){return this._safeSet(_.SET,e,t),this},e.prototype.setOnce=function(e,t){return this._safeSet(_.SET_ONCE,e,t),this},e.prototype.append=function(e,t){return this._safeSet(_.APPEND,e,t),this},e.prototype.prepend=function(e,t){return this._safeSet(_.PREPEND,e,t),this},e.prototype.postInsert=function(e,t){return this._safeSet(_.POSTINSERT,e,t),this},e.prototype.preInsert=function(e,t){return this._safeSet(_.PREINSERT,e,t),this},e.prototype.remove=function(e,t){return this._safeSet(_.REMOVE,e,t),this},e.prototype.add=function(e,t){return this._safeSet(_.ADD,e,t),this},e.prototype.unset=function(e){return this._safeSet(_.UNSET,e,"-"),this},e.prototype.clearAll=function(){return this._properties={},this._properties[_.CLEAR_ALL]="-",this},e.prototype._safeSet=function(e,t,n){if(this._validate(e,t,n)){var o=this._properties[e];return void 0===o&&(o={},this._properties[e]=o),o[t]=n,this._propertySet.add(t),!0}return!1},e.prototype._validate=function(e,t,n){return void 0===this._properties[_.CLEAR_ALL]&&(!this._propertySet.has(t)&&(e===_.ADD?"number"==typeof n:e===_.UNSET||e===_.REMOVE||I(t,n)))},e}(),O=function(){function e(){this.productId="",this.quantity=1,this.price=0}return e.prototype.setProductId=function(e){return this.productId=e,this},e.prototype.setQuantity=function(e){return e>0&&(this.quantity=e),this},e.prototype.setPrice=function(e){return this.price=e,this},e.prototype.setRevenueType=function(e){return this.revenueType=e,this},e.prototype.setRevenue=function(e){return this.revenue=e,this},e.prototype.setEventProperties=function(e){return L(e)&&(this.properties=e),this},e.prototype.getEventProperties=function(){var e=this.properties?r({},this.properties):{};return e[b.REVENUE_PRODUCT_ID]=this.productId,e[b.REVENUE_QUANTITY]=this.quantity,e[b.REVENUE_PRICE]=this.price,e[b.REVENUE_TYPE]=this.revenueType,e[b.REVENUE]=this.revenue,e},e}(),F=function(){function e(){this.queue=[],this.applying=!1,this.plugins=[]}return e.prototype.register=function(e,t){return l(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,e.setup(t)];case 1:return n.sent(),this.plugins.push(e),[2]}}))}))},e.prototype.deregister=function(e){return this.plugins.splice(this.plugins.findIndex((function(t){return t.name===e})),1),Promise.resolve()},e.prototype.reset=function(){this.applying=!1,this.plugins=[]},e.prototype.push=function(e){var t=this;return new Promise((function(n){t.queue.push([e,n]),t.scheduleApply(0)}))},e.prototype.scheduleApply=function(e){var t=this;this.applying||(this.applying=!0,setTimeout((function(){t.apply(t.queue.shift()).then((function(){t.applying=!1,t.queue.length>0&&t.scheduleApply(0)}))}),e))},e.prototype.apply=function(e){return l(this,void 0,void 0,(function(){var t,n,o,i,a,s,l,p,h,f,m,y,_,b,w,C,x,S;return c(this,(function(c){switch(c.label){case 0:if(!e)return[2];t=u(e,1),n=t[0],o=u(e,2),i=o[1],a=this.plugins.filter((function(e){return e.type===g.BEFORE})),c.label=1;case 1:c.trys.push([1,6,7,8]),s=d(a),l=s.next(),c.label=2;case 2:return l.done?[3,5]:[4,l.value.execute(r({},n))];case 3:n=c.sent(),c.label=4;case 4:return l=s.next(),[3,2];case 5:return[3,8];case 6:return p=c.sent(),w={error:p},[3,8];case 7:try{l&&!l.done&&(C=s.return)&&C.call(s)}finally{if(w)throw w.error}return[7];case 8:h=this.plugins.filter((function(e){return e.type===g.ENRICHMENT})),c.label=9;case 9:c.trys.push([9,14,15,16]),f=d(h),m=f.next(),c.label=10;case 10:return m.done?[3,13]:[4,m.value.execute(r({},n))];case 11:n=c.sent(),c.label=12;case 12:return m=f.next(),[3,10];case 13:return[3,16];case 14:return y=c.sent(),x={error:y},[3,16];case 15:try{m&&!m.done&&(S=f.return)&&S.call(f)}finally{if(x)throw x.error}return[7];case 16:return _=this.plugins.filter((function(e){return e.type===g.DESTINATION})),b=_.map((function(e){var t=r({},n);return e.execute(t).catch((function(e){return v(t,0,String(e))}))})),Promise.all(b).then((function(e){var t=u(e,1)[0];i(t)})),[2]}}))}))},e.prototype.flush=function(){return l(this,void 0,void 0,(function(){var e,t,n,o=this;return c(this,(function(i){switch(i.label){case 0:return e=this.queue,this.queue=[],[4,Promise.all(e.map((function(e){return o.apply(e)})))];case 1:return i.sent(),t=this.plugins.filter((function(e){return e.type===g.DESTINATION})),n=t.map((function(e){return e.flush&&e.flush()})),[4,Promise.all(n)];case 2:return i.sent(),[2]}}))}))},e}(),R=function(){function e(e){void 0===e&&(e="$default"),this.initializing=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new F,this.name=e}return e.prototype._init=function(e){return l(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return this.config=e,this.timeline.reset(),[4,this.runQueuedFunctions("q")];case 1:return t.sent(),[2]}}))}))},e.prototype.runQueuedFunctions=function(e){return l(this,void 0,void 0,(function(){var t,n,o,i,a,r;return c(this,(function(s){switch(s.label){case 0:t=this[e],this[e]=[],s.label=1;case 1:s.trys.push([1,6,7,8]),n=d(t),o=n.next(),s.label=2;case 2:return o.done?[3,5]:[4,(0,o.value)()];case 3:s.sent(),s.label=4;case 4:return o=n.next(),[3,2];case 5:return[3,8];case 6:return i=s.sent(),a={error:i},[3,8];case 7:try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}return[7];case 8:return[2]}}))}))},e.prototype.track=function(e,t,n){var o=function(e,t,n){return r(r(r({},"string"==typeof e?{event_type:e}:e),n),t&&{event_properties:t})}(e,t,n);return this.dispatch(o)},e.prototype.identify=function(e,t){var n=function(e,t){return r(r({},t),{event_type:w.IDENTIFY,user_properties:e.getUserProperties()})}(e,t);return this.dispatch(n)},e.prototype.groupIdentify=function(e,t,n,o){var i=function(e,t,n,o){var i;return r(r({},o),{event_type:w.GROUP_IDENTIFY,group_properties:n.getUserProperties(),groups:(i={},i[e]=t,i)})}(e,t,n,o);return this.dispatch(i)},e.prototype.setGroup=function(e,t,n){var o=function(e,t,n){var o,i=new k;return i.set(e,t),r(r({},n),{event_type:w.IDENTIFY,user_properties:i.getUserProperties(),groups:(o={},o[e]=t,o)})}(e,t,n);return this.dispatch(o)},e.prototype.revenue=function(e,t){var n=function(e,t){return r(r({},t),{event_type:w.REVENUE,event_properties:e.getEventProperties()})}(e,t);return this.dispatch(n)},e.prototype.add=function(e){return l(this,void 0,void 0,(function(){return c(this,(function(t){return this.config?[2,this.timeline.register(e,this.config)]:(this.q.push(this.add.bind(this,e)),[2])}))}))},e.prototype.remove=function(e){return l(this,void 0,void 0,(function(){return c(this,(function(t){return this.config?[2,this.timeline.deregister(e)]:(this.q.push(this.remove.bind(this,e)),[2])}))}))},e.prototype.dispatchWithCallback=function(e,t){if(!this.config)return t(v(e,0,"Client not initialized"));this.process(e).then(t)},e.prototype.dispatch=function(e){return l(this,void 0,void 0,(function(){var t=this;return c(this,(function(n){return this.config?[2,this.process(e)]:[2,new Promise((function(n){t.dispatchQ.push(t.dispatchWithCallback.bind(t,e,n))}))]}))}))},e.prototype.process=function(e){return l(this,void 0,void 0,(function(){var t,n,o;return c(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.config.optOut?[2,v(e,0,"Event skipped due to optOut config")]:[4,this.timeline.push(e)];case 1:return 200===(o=i.sent()).code?this.config.loggerProvider.log(o.message):this.config.loggerProvider.error(o.message),[2,o];case 2:return t=i.sent(),n=String(t),this.config.loggerProvider.error(n),[2,o=v(e,0,n)];case 3:return[2]}}))}))},e.prototype.setOptOut=function(e){this.config?this.config.optOut=Boolean(e):this.q.push(this.setOptOut.bind(this,Boolean(e)))},e.prototype.flush=function(){return this.timeline.flush()},e}(),M=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return{promise:e.apply(void 0,p([],u(t),!1))}}},N=n(1333),B=function(){return N.a.getInstance("$default_instance")};!function(e){e.BEFORE="before",e.ENRICHMENT="enrichment",e.DESTINATION="destination"}(D||(D={}));var U,$,j,K=function(){function e(){this.name="identity",this.type=D.BEFORE,this.identityStore=B().identityStore}return e.prototype.execute=function(e){return l(this,void 0,void 0,(function(){var t;return c(this,(function(n){return(t=e.user_properties)&&this.identityStore.editIdentity().updateUserProperties(t).commit(),[2,e]}))}))},e.prototype.setup=function(e){return Promise.resolve(void 0)},e}();!function(e){e.SET="$set",e.SET_ONCE="$setOnce",e.ADD="$add",e.APPEND="$append",e.PREPEND="$prepend",e.REMOVE="$remove",e.PREINSERT="$preInsert",e.POSTINSERT="$postInsert",e.UNSET="$unset",e.CLEAR_ALL="$clearAll"}(U||(U={})),function(e){e.REVENUE_PRODUCT_ID="$productId",e.REVENUE_QUANTITY="$quantity",e.REVENUE_PRICE="$price",e.REVENUE_TYPE="$revenueType",e.REVENUE="$revenue"}($||($={})),function(e){e.IDENTIFY="$identify",e.GROUP_IDENTIFY="$groupidentify",e.REVENUE="revenue_amount"}(j||(j={}));var V,H="AMP",W=("".concat(H,"_unsent"),function(e){if(Object.keys(e).length>1e3)return!1;for(var t in e){var n=e[t];if(!z(t,n))return!1}return!0}),z=function(e,t){var n,o;if("string"!=typeof e)return!1;if(Array.isArray(t)){var i=!0;try{for(var a=d(t),r=a.next();!r.done;r=a.next()){var s=r.value;if(Array.isArray(s))return!1;if("object"==typeof s)i=i&&W(s);else if(!["number","string"].includes(typeof s))return!1;if(!i)return!1}}catch(e){n={error:e}}finally{try{r&&!r.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}}else{if(null==t)return!1;if("object"==typeof t)return W(t);if(!["number","string","boolean"].includes(typeof t))return!1}return!0},q=function(){function e(){this._propertySet=new Set,this._properties={}}return e.prototype.getUserProperties=function(){return r({},this._properties)},e.prototype.set=function(e,t){return this._safeSet(U.SET,e,t),this},e.prototype.setOnce=function(e,t){return this._safeSet(U.SET_ONCE,e,t),this},e.prototype.append=function(e,t){return this._safeSet(U.APPEND,e,t),this},e.prototype.prepend=function(e,t){return this._safeSet(U.PREPEND,e,t),this},e.prototype.postInsert=function(e,t){return this._safeSet(U.POSTINSERT,e,t),this},e.prototype.preInsert=function(e,t){return this._safeSet(U.PREINSERT,e,t),this},e.prototype.remove=function(e,t){return this._safeSet(U.REMOVE,e,t),this},e.prototype.add=function(e,t){return this._safeSet(U.ADD,e,t),this},e.prototype.unset=function(e){return this._safeSet(U.UNSET,e,"-"),this},e.prototype.clearAll=function(){return this._properties={},this._properties[U.CLEAR_ALL]="-",this},e.prototype._safeSet=function(e,t,n){if(this._validate(e,t,n)){var o=this._properties[e];return void 0===o&&(o={},this._properties[e]=o),o[t]=n,this._propertySet.add(t),!0}return!1},e.prototype._validate=function(e,t,n){return void 0===this._properties[U.CLEAR_ALL]&&(!this._propertySet.has(t)&&(e===U.ADD?"number"==typeof n:e===U.UNSET||e===U.REMOVE||z(t,n)))},e}(),Y=function(e,t,n){return void 0===t&&(t=""),void 0===n&&(n=10),[H,t,e.substring(0,n)].filter(Boolean).join("_")},X=n(593),Q=function(){var e,t=Object(X.a)();return(null===(e=null==t?void 0:t.location)||void 0===e?void 0:e.search)?t.location.search.substring(1).split("&").filter(Boolean).reduce((function(e,t){var n=t.split("=",2),o=J(n[0]),i=J(n[1]);return i?(e[o]=i,e):e}),{}):{}},J=function(e){void 0===e&&(e="");try{return decodeURIComponent(e)}catch(e){return""}},Z={utm_source:void 0,utm_medium:void 0,utm_campaign:void 0,utm_term:void 0,utm_content:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,msclkid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},ee=function(){function e(){}return e.prototype.parse=function(){return l(this,void 0,void 0,(function(){return c(this,(function(e){return[2,r(r(r(r({},Z),this.getUtmParam()),this.getReferrer()),this.getClickIds())]}))}))},e.prototype.getUtmParam=function(){var e=Q();return{utm_source:e.utm_source,utm_medium:e.utm_medium,utm_campaign:e.utm_campaign,utm_term:e.utm_term,utm_content:e.utm_content}},e.prototype.getReferrer=function(){var e,t,n={referrer:void 0,referring_domain:void 0};try{n.referrer=document.referrer||void 0,n.referring_domain=null!==(t=null===(e=n.referrer)||void 0===e?void 0:e.split("/")[2])&&void 0!==t?t:void 0}catch(e){}return n},e.prototype.getClickIds=function(){var e,t=Q();return(e={}).dclid=t.dclid,e.fbclid=t.fbclid,e.gbraid=t.gbraid,e.gclid=t.gclid,e.ko_click_id=t.ko_click_id,e.msclkid=t.msclkid,e.ttclid=t.ttclid,e.twclid=t.twclid,e.wbraid=t.wbraid,e},e}(),te=function(){function e(e,t){var n,o;this.storage=t.storage,this.storageKey=Y(e,"MKTG"),this.parser=new ee,this.track=t.track,this.onNewCampaign=t.onNewCampaign,this.disabled=Boolean(t.disabled),this.trackNewCampaigns=Boolean(t.trackNewCampaigns),this.trackPageViews=Boolean(t.trackPageViews),this.excludeReferrers=null!==(n=t.excludeReferrers)&&void 0!==n?n:[],"undefined"!=typeof location&&this.excludeReferrers.unshift(location.hostname),this.initialEmptyValue=null!==(o=t.initialEmptyValue)&&void 0!==o?o:"EMPTY"}return e.prototype.isNewCampaign=function(e,t){e.referrer;var n=s(e,["referrer"]),o=t||{},i=(o.referrer,s(o,["referrer"])),a=Boolean(n.referring_domain&&this.excludeReferrers.includes(n.referring_domain)),r=JSON.stringify(n)!==JSON.stringify(i);return!a&&(!t||r)},e.prototype.saveCampaignToStorage=function(e){return l(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.storage.set(this.storageKey,e)];case 1:return t.sent(),[2]}}))}))},e.prototype.getCampaignFromStorage=function(){return l(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.storage.get(this.storageKey)];case 1:return[2,e.sent()]}}))}))},e.prototype.createCampaignEvent=function(e){var t,n,o=this,i=r(r({},Z),e),a=Object.entries(i).reduce((function(e,t){var n=u(t,2),i=n[0],a=n[1];return e.setOnce("initial_".concat(i),a||o.initialEmptyValue),a?e.set(i,a):e.unset(i)}),new q),s={event_type:"Page View",event_properties:{page_title:"undefined"!=typeof document&&document.title||"",page_location:"undefined"!=typeof location&&location.href||"",page_path:"undefined"!=typeof location&&location.pathname||""}};return r(r({},(t=a,r(r({},n),{event_type:j.IDENTIFY,user_properties:t.getUserProperties()}))),this.trackPageViews&&s)},e.prototype.send=function(e){return l(this,void 0,void 0,(function(){var t,n;return c(this,(function(o){switch(o.label){case 0:return this.disabled?[2]:[4,this.parser.parse()];case 1:return t=o.sent(),[4,this.getCampaignFromStorage()];case 2:if(n=o.sent(),!e){if(!this.trackNewCampaigns||!this.isNewCampaign(t,n))return[2];this.onNewCampaign(t)}return[4,this.track(this.createCampaignEvent(t))];case 3:return o.sent(),[4,this.saveCampaignToStorage(t)];case 4:return o.sent(),[2]}}))}))},e}(),ne=function(e,t){oe(e,t)},oe=function(e,t){for(var n=0;n<t.length;n++){var o=t[n],i=o.name,a=o.args,r=o.resolve,s=e&&e[i];if("function"==typeof s){var l=s.apply(e,a);"function"==typeof r&&r(null==l?void 0:l.promise)}}return e},ie=function(e){return e&&void 0!==e._q},ae=n(592),re=n.n(ae),se=function(){var e,t,n,o;if("undefined"==typeof navigator)return"";var i=navigator.userLanguage;return null!==(o=null!==(n=null!==(t=null===(e=navigator.languages)||void 0===e?void 0:e[0])&&void 0!==t?t:navigator.language)&&void 0!==n?n:i)&&void 0!==o?o:""},le=function(){function e(){var e;this.name="context",this.type=g.BEFORE,this.eventId=0,this.library="amplitude-ts/".concat("1.5.8"),"undefined"!=typeof navigator&&(e=navigator.userAgent),this.uaResult=new re.a(e).getResult()}return e.prototype.setup=function(e){return this.config=e,Promise.resolve(void 0)},e.prototype.execute=function(e){return l(this,void 0,void 0,(function(){var t,n,o,i,a;return c(this,(function(s){return this.isSessionValid()||(this.config.sessionId=Date.now()),this.config.lastEventTime=Date.now(),t=(new Date).getTime(),n=this.uaResult.browser.name,o=this.uaResult.browser.version,i=this.uaResult.device.model||this.uaResult.os.name,a=this.uaResult.device.vendor,[2,r(r(r(r(r(r(r(r(r(r(r(r({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:t},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:"Web"}),this.config.trackingOptions.osName&&{os_name:n}),this.config.trackingOptions.osVersion&&{os_version:o}),this.config.trackingOptions.deviceManufacturer&&{device_manufacturer:a}),this.config.trackingOptions.deviceModel&&{device_model:i}),this.config.trackingOptions.language&&{language:se()}),this.config.trackingOptions.ipAddress&&{ip:"$remote"}),{insert_id:P(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),e),{event_id:this.eventId++,library:this.library})]}))}))},e.prototype.isSessionValid=function(){var e=this.config.lastEventTime||Date.now();return Date.now()-e<this.config.sessionTimeout},e}();!function(e){e.XHR="xhr",e.SendBeacon="beacon",e.Fetch="fetch"}(V||(V={}));var ce,de=function(){function e(){this.memoryStorage=new Map}return e.prototype.isEnabled=function(){return l(this,void 0,void 0,(function(){return c(this,(function(e){return[2,!0]}))}))},e.prototype.get=function(e){return l(this,void 0,void 0,(function(){return c(this,(function(t){return[2,this.memoryStorage.get(e)]}))}))},e.prototype.getRaw=function(e){return l(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return[4,this.get(e)];case 1:return[2,(t=n.sent())?JSON.stringify(t):void 0]}}))}))},e.prototype.set=function(e,t){return l(this,void 0,void 0,(function(){return c(this,(function(n){return this.memoryStorage.set(e,t),[2]}))}))},e.prototype.remove=function(e){return l(this,void 0,void 0,(function(){return c(this,(function(t){return this.memoryStorage.delete(e),[2]}))}))},e.prototype.reset=function(){return l(this,void 0,void 0,(function(){return c(this,(function(e){return this.memoryStorage.clear(),[2]}))}))},e}(),ue=function(){function e(e,t){this.storage=e,this.isSessionCacheValid=!0,this.storageKey=Y(t),this.cache={optOut:!1}}return e.prototype.load=function(){var e;return l(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return t=this,[4,this.storage.get(this.storageKey)];case 1:return t.cache=null!==(e=n.sent())&&void 0!==e?e:{optOut:!1},[2,this]}}))}))},e.prototype.setSession=function(e){this.cache=r(r({},this.cache),e),this.storage.set(this.storageKey,this.cache)},e.prototype.getSessionId=function(){var e=this;return this.isSessionCacheValid=!0,this.storage.get(this.storageKey).then((function(t){e.isSessionCacheValid&&(e.cache.sessionId=null==t?void 0:t.sessionId)})),this.cache.sessionId},e.prototype.setSessionId=function(e){this.isSessionCacheValid=!1,this.setSession({sessionId:e})},e.prototype.getDeviceId=function(){return this.cache.deviceId},e.prototype.setDeviceId=function(e){this.setSession({deviceId:e})},e.prototype.getUserId=function(){return this.cache.userId},e.prototype.setUserId=function(e){this.setSession({userId:e})},e.prototype.getLastEventTime=function(){return this.cache.lastEventTime},e.prototype.setLastEventTime=function(e){this.setSession({lastEventTime:e})},e.prototype.getOptOut=function(){return this.cache.optOut},e.prototype.setOptOut=function(e){this.setSession({optOut:e})},e}();!function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.PayloadTooLarge="payload_too_large",e.Invalid="invalid",e.Failed="failed",e.Timeout="Timeout",e.SystemError="SystemError"}(ce||(ce={}));var pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.send=function(e,t){return l(this,void 0,void 0,(function(){var n,o;return c(this,(function(i){switch(i.label){case 0:if("undefined"==typeof fetch)throw new Error("FetchTransport is not supported");return n={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(t),method:"POST"},[4,fetch(e,n)];case 1:return[4,i.sent().json()];case 2:return o=i.sent(),[2,this.buildResponse(o)]}}))}))},t}(function(){function e(){}return e.prototype.send=function(e,t){return Promise.resolve(null)},e.prototype.buildResponse=function(e){var t,n,o,i,a,r,s,l,c,d,u,p,g,h,f,m,y,v,_,b,w,C;if("object"!=typeof e)return null;var x=e.code||0,S=this.buildStatus(x);switch(S){case ce.Success:return{status:S,statusCode:x,body:{eventsIngested:null!==(t=e.events_ingested)&&void 0!==t?t:0,payloadSizeBytes:null!==(n=e.payload_size_bytes)&&void 0!==n?n:0,serverUploadTime:null!==(o=e.server_upload_time)&&void 0!==o?o:0}};case ce.Invalid:return{status:S,statusCode:x,body:{error:null!==(i=e.error)&&void 0!==i?i:"",missingField:null!==(a=e.missing_field)&&void 0!==a?a:"",eventsWithInvalidFields:null!==(r=e.events_with_invalid_fields)&&void 0!==r?r:{},eventsWithMissingFields:null!==(s=e.events_with_missing_fields)&&void 0!==s?s:{},eventsWithInvalidIdLengths:null!==(l=e.events_with_invalid_id_lengths)&&void 0!==l?l:{},epsThreshold:null!==(c=e.eps_threshold)&&void 0!==c?c:0,exceededDailyQuotaDevices:null!==(d=e.exceeded_daily_quota_devices)&&void 0!==d?d:{},silencedDevices:null!==(u=e.silenced_devices)&&void 0!==u?u:[],silencedEvents:null!==(p=e.silenced_events)&&void 0!==p?p:[],throttledDevices:null!==(g=e.throttled_devices)&&void 0!==g?g:{},throttledEvents:null!==(h=e.throttled_events)&&void 0!==h?h:[]}};case ce.PayloadTooLarge:return{status:S,statusCode:x,body:{error:null!==(f=e.error)&&void 0!==f?f:""}};case ce.RateLimit:return{status:S,statusCode:x,body:{error:null!==(m=e.error)&&void 0!==m?m:"",epsThreshold:null!==(y=e.eps_threshold)&&void 0!==y?y:0,throttledDevices:null!==(v=e.throttled_devices)&&void 0!==v?v:{},throttledUsers:null!==(_=e.throttled_users)&&void 0!==_?_:{},exceededDailyQuotaDevices:null!==(b=e.exceeded_daily_quota_devices)&&void 0!==b?b:{},exceededDailyQuotaUsers:null!==(w=e.exceeded_daily_quota_users)&&void 0!==w?w:{},throttledEvents:null!==(C=e.throttled_events)&&void 0!==C?C:[]}};case ce.Timeout:default:return{status:S,statusCode:x}}},e.prototype.buildStatus=function(e){return e>=200&&e<300?ce.Success:429===e?ce.RateLimit:413===e?ce.PayloadTooLarge:408===e?ce.Timeout:e>=400&&e<500?ce.Invalid:e>=500?ce.Failed:ce.Unknown},e}()),ge=function(){function e(e){this.options=r({},e)}return e.prototype.isEnabled=function(){return l(this,void 0,void 0,(function(){var t,n,o;return c(this,(function(i){switch(i.label){case 0:if(!Object(X.a)())return[2,!1];t=String(Date.now()),n=new e(this.options),o="AMP_TEST",i.label=1;case 1:return i.trys.push([1,4,5,7]),[4,n.set(o,t)];case 2:return i.sent(),[4,n.get(o)];case 3:return[2,i.sent()===t];case 4:return i.sent(),[2,!1];case 5:return[4,n.remove(o)];case 6:return i.sent(),[7];case 7:return[2]}}))}))},e.prototype.get=function(e){return l(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return[4,this.getRaw(e)];case 1:if(!(t=n.sent()))return[2,void 0];try{try{t=decodeURIComponent(atob(t))}catch(e){}return[2,JSON.parse(t)]}catch(e){return[2,void 0]}return[2]}}))}))},e.prototype.getRaw=function(e){var t;return l(this,void 0,void 0,(function(){var n,o,i;return c(this,(function(a){return n=Object(X.a)(),o=null!==(t=null==n?void 0:n.document.cookie.split("; "))&&void 0!==t?t:[],(i=o.find((function(t){return 0===t.indexOf(e+"=")})))?[2,i.substring(e.length+1)]:[2,void 0]}))}))},e.prototype.set=function(e,t){var n;return l(this,void 0,void 0,(function(){var o,i,a,r,s,l;return c(this,(function(c){try{o=null!==(n=this.options.expirationDays)&&void 0!==n?n:0,a=void 0,(i=null!==t?o:-1)&&((r=new Date).setTime(r.getTime()+24*i*60*60*1e3),a=r),s="".concat(e,"=").concat(btoa(encodeURIComponent(JSON.stringify(t)))),a&&(s+="; expires=".concat(a.toUTCString())),s+="; path=/",this.options.domain&&(s+="; domain=".concat(this.options.domain)),this.options.secure&&(s+="; Secure"),this.options.sameSite&&(s+="; SameSite=".concat(this.options.sameSite)),(l=Object(X.a)())&&(l.document.cookie=s)}catch(e){}return[2]}))}))},e.prototype.remove=function(e){return l(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.set(e,null)];case 1:return t.sent(),[2]}}))}))},e.prototype.reset=function(){return l(this,void 0,void 0,(function(){return c(this,(function(e){return[2]}))}))},e}(),he=function(){function e(){}return e.prototype.isEnabled=function(){return l(this,void 0,void 0,(function(){var t,n,o;return c(this,(function(i){switch(i.label){case 0:if(!Object(X.a)())return[2,!1];t=String(Date.now()),n=new e,o="AMP_TEST",i.label=1;case 1:return i.trys.push([1,4,5,7]),[4,n.set(o,t)];case 2:return i.sent(),[4,n.get(o)];case 3:return[2,i.sent()===t];case 4:return i.sent(),[2,!1];case 5:return[4,n.remove(o)];case 6:return i.sent(),[7];case 7:return[2]}}))}))},e.prototype.get=function(e){return l(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.getRaw(e)];case 1:return(t=n.sent())?[2,JSON.parse(t)]:[2,void 0];case 2:return n.sent(),[2,void 0];case 3:return[2]}}))}))},e.prototype.getRaw=function(e){var t;return l(this,void 0,void 0,(function(){return c(this,(function(n){return[2,(null===(t=Object(X.a)())||void 0===t?void 0:t.localStorage.getItem(e))||void 0]}))}))},e.prototype.set=function(e,t){var n;return l(this,void 0,void 0,(function(){return c(this,(function(o){try{null===(n=Object(X.a)())||void 0===n||n.localStorage.setItem(e,JSON.stringify(t))}catch(e){}return[2]}))}))},e.prototype.remove=function(e){var t;return l(this,void 0,void 0,(function(){return c(this,(function(n){try{null===(t=Object(X.a)())||void 0===t||t.localStorage.removeItem(e)}catch(e){}return[2]}))}))},e.prototype.reset=function(){var e;return l(this,void 0,void 0,(function(){return c(this,(function(t){try{null===(e=Object(X.a)())||void 0===e||e.localStorage.clear()}catch(e){}return[2]}))}))},e}(),fe=function(){function e(){}return e.prototype.send=function(e,t){return Promise.resolve(null)},e.prototype.buildResponse=function(e){var t,n,o,i,a,r,s,l,c,d,u,p,g,f,m,y,v,_,b,w,C,x;if("object"!=typeof e)return null;var S=e.code||0,E=this.buildStatus(S);switch(E){case h.Success:return{status:E,statusCode:S,body:{eventsIngested:null!==(t=e.events_ingested)&&void 0!==t?t:0,payloadSizeBytes:null!==(n=e.payload_size_bytes)&&void 0!==n?n:0,serverUploadTime:null!==(o=e.server_upload_time)&&void 0!==o?o:0}};case h.Invalid:return{status:E,statusCode:S,body:{error:null!==(i=e.error)&&void 0!==i?i:"",missingField:null!==(a=e.missing_field)&&void 0!==a?a:"",eventsWithInvalidFields:null!==(r=e.events_with_invalid_fields)&&void 0!==r?r:{},eventsWithMissingFields:null!==(s=e.events_with_missing_fields)&&void 0!==s?s:{},eventsWithInvalidIdLengths:null!==(l=e.events_with_invalid_id_lengths)&&void 0!==l?l:{},epsThreshold:null!==(c=e.eps_threshold)&&void 0!==c?c:0,exceededDailyQuotaDevices:null!==(d=e.exceeded_daily_quota_devices)&&void 0!==d?d:{},silencedDevices:null!==(u=e.silenced_devices)&&void 0!==u?u:[],silencedEvents:null!==(p=e.silenced_events)&&void 0!==p?p:[],throttledDevices:null!==(g=e.throttled_devices)&&void 0!==g?g:{},throttledEvents:null!==(f=e.throttled_events)&&void 0!==f?f:[]}};case h.PayloadTooLarge:return{status:E,statusCode:S,body:{error:null!==(m=e.error)&&void 0!==m?m:""}};case h.RateLimit:return{status:E,statusCode:S,body:{error:null!==(y=e.error)&&void 0!==y?y:"",epsThreshold:null!==(v=e.eps_threshold)&&void 0!==v?v:0,throttledDevices:null!==(_=e.throttled_devices)&&void 0!==_?_:{},throttledUsers:null!==(b=e.throttled_users)&&void 0!==b?b:{},exceededDailyQuotaDevices:null!==(w=e.exceeded_daily_quota_devices)&&void 0!==w?w:{},exceededDailyQuotaUsers:null!==(C=e.exceeded_daily_quota_users)&&void 0!==C?C:{},throttledEvents:null!==(x=e.throttled_events)&&void 0!==x?x:[]}};case h.Timeout:default:return{status:E,statusCode:S}}},e.prototype.buildStatus=function(e){return e>=200&&e<300?h.Success:429===e?h.RateLimit:413===e?h.PayloadTooLarge:408===e?h.Timeout:e>=400&&e<500?h.Invalid:e>=500?h.Failed:h.Unknown},e}(),me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={done:4},t}return a(t,e),t.prototype.send=function(e,t){return l(this,void 0,void 0,(function(){var n=this;return c(this,(function(o){return[2,new Promise((function(o,i){"undefined"==typeof XMLHttpRequest&&i(new Error("XHRTransport is not supported."));var a=new XMLHttpRequest;a.open("POST",e,!0),a.onreadystatechange=function(){if(a.readyState===n.state.done)try{var e=a.responseText,t=JSON.parse(e),r=n.buildResponse(t);o(r)}catch(e){i(e)}},a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Accept","*/*"),a.send(JSON.stringify(t))}))]}))}))},t}(fe),ye=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.send=function(e,t){return l(this,void 0,void 0,(function(){var n=this;return c(this,(function(o){return[2,new Promise((function(o,i){var a=Object(X.a)();if(!(null==a?void 0:a.navigator.sendBeacon))throw new Error("SendBeaconTransport is not supported");try{var r=JSON.stringify(t);return o(a.navigator.sendBeacon(e,JSON.stringify(t))?n.buildResponse({code:200,events_ingested:t.events.length,payload_size_bytes:r.length,server_upload_time:Date.now()}):n.buildResponse({code:500}))}catch(e){i(e)}}))]}))}))},t}(fe),ve=function(){var e=new de;return{cookieExpiration:365,cookieSameSite:"Lax",cookieSecure:!1,cookieStorage:e,disableCookies:!1,domain:"",sessionManager:new ue(e,""),sessionTimeout:18e5,storageProvider:new de,trackingOptions:{deviceManufacturer:!0,deviceModel:!0,ipAddress:!0,language:!0,osName:!0,osVersion:!0,platform:!0},transportProvider:new pe}},_e=function(e){function t(t,n,o){var i,a,s,l,c,d,u,p,g,h,f,m,y=this,v=ve();return(y=e.call(this,r(r({flushIntervalMillis:1e3,flushMaxRetries:5,flushQueueSize:30},o),{apiKey:t,storageProvider:null!==(i=null==o?void 0:o.storageProvider)&&void 0!==i?i:v.storageProvider,transportProvider:null!==(a=null==o?void 0:o.transportProvider)&&void 0!==a?a:v.transportProvider}))||this).cookieStorage=null!==(s=null==o?void 0:o.cookieStorage)&&void 0!==s?s:v.cookieStorage,y.sessionManager=null!==(l=null==o?void 0:o.sessionManager)&&void 0!==l?l:v.sessionManager,y.sessionTimeout=null!==(c=null==o?void 0:o.sessionTimeout)&&void 0!==c?c:v.sessionTimeout,y.appVersion=null==o?void 0:o.appVersion,y.attribution=null==o?void 0:o.attribution,y.cookieExpiration=null!==(d=null==o?void 0:o.cookieExpiration)&&void 0!==d?d:v.cookieExpiration,y.cookieSameSite=null!==(u=null==o?void 0:o.cookieSameSite)&&void 0!==u?u:v.cookieSameSite,y.cookieSecure=null!==(p=null==o?void 0:o.cookieSecure)&&void 0!==p?p:v.cookieSecure,y.deviceId=null==o?void 0:o.deviceId,y.disableCookies=null!==(g=null==o?void 0:o.disableCookies)&&void 0!==g?g:v.disableCookies,y.domain=null!==(h=null==o?void 0:o.domain)&&void 0!==h?h:v.domain,y.lastEventTime=null!==(f=y.lastEventTime)&&void 0!==f?f:null==o?void 0:o.lastEventTime,y.optOut=Boolean(null==o?void 0:o.optOut),y.partnerId=null==o?void 0:o.partnerId,y.sessionId=null==o?void 0:o.sessionId,y.trackingOptions=null!==(m=null==o?void 0:o.trackingOptions)&&void 0!==m?m:v.trackingOptions,y.userId=n,y}return a(t,e),Object.defineProperty(t.prototype,"deviceId",{get:function(){return this.sessionManager.getDeviceId()},set:function(e){this.sessionManager.setDeviceId(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userId",{get:function(){return this.sessionManager.getUserId()},set:function(e){this.sessionManager.setUserId(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sessionId",{get:function(){return this.sessionManager.getSessionId()},set:function(e){this.sessionManager.setSessionId(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"optOut",{get:function(){return this.sessionManager.getOptOut()},set:function(e){var t;null===(t=this.sessionManager)||void 0===t||t.setOptOut(Boolean(e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastEventTime",{get:function(){return this.sessionManager.getLastEventTime()},set:function(e){this.sessionManager.setLastEventTime(e)},enumerable:!1,configurable:!0}),t}(E),be=function(e,t,n){return l(void 0,void 0,void 0,(function(){var o,i,a,s,l,d,u,p,g,h,f,m,y,v,_,b,w;return c(this,(function(c){switch(c.label){case 0:return o=ve(),null===(y=null==n?void 0:n.domain)||void 0===y?[3,1]:(a=y,[3,3]);case 1:return[4,Ae()];case 2:a=c.sent(),c.label=3;case 3:return i=a,[4,we(r(r({},n),{domain:i}))];case 4:return s=c.sent(),l=Y(e),[4,s.get(l)];case 5:return d=c.sent(),u=Q(),[4,new ue(s,e).load()];case 6:return p=c.sent(),g=_e.bind,h=[void 0,e,null!=t?t:null==d?void 0:d.userId],f=[r({},n)],m={cookieStorage:s,sessionManager:p,deviceId:Se(null==d?void 0:d.deviceId,null==n?void 0:n.deviceId,u.deviceId),domain:i,optOut:null!==(v=null==n?void 0:n.optOut)&&void 0!==v?v:Boolean(null==d?void 0:d.optOut)},[4,s.get(l)];case 7:return m.sessionId=null!==(b=null===(_=c.sent())||void 0===_?void 0:_.sessionId)&&void 0!==b?b:null==n?void 0:n.sessionId,[4,xe(n)];case 8:return[2,new(g.apply(_e,h.concat([r.apply(void 0,f.concat([(m.storageProvider=c.sent(),m.trackingOptions=r(r({},o.trackingOptions),null==n?void 0:n.trackingOptions),m.transportProvider=null!==(w=null==n?void 0:n.transportProvider)&&void 0!==w?w:Ee(null==n?void 0:n.transport),m)]))])))]}}))}))},we=function(e,t){return void 0===t&&(t=ve()),l(void 0,void 0,void 0,(function(){var n,o,i;return c(this,(function(a){switch(a.label){case 0:return n=r(r({},t),e),o=null==e?void 0:e.cookieStorage,(i=!o)?[3,2]:[4,o.isEnabled()];case 1:i=!a.sent(),a.label=2;case 2:return i?[2,Ce(n)]:[2,o]}}))}))},Ce=function(e){return l(void 0,void 0,void 0,(function(){var t,n;return c(this,(function(o){switch(o.label){case 0:return t=new ge({domain:e.domain,expirationDays:e.cookieExpiration,sameSite:e.cookieSameSite,secure:e.cookieSecure}),(n=e.disableCookies)?[3,2]:[4,t.isEnabled()];case 1:n=!o.sent(),o.label=2;case 2:return n?[4,(t=new he).isEnabled()]:[3,4];case 3:o.sent()||(t=new de),o.label=4;case 4:return[2,t]}}))}))},xe=function(e){return l(void 0,void 0,void 0,(function(){var t,n,o,i,a,r,s;return c(this,(function(l){switch(l.label){case 0:if(e&&Object.prototype.hasOwnProperty.call(e,"storageProvider")&&!e.storageProvider)return[3,9];l.label=1;case 1:l.trys.push([1,7,8,9]),t=d([null==e?void 0:e.storageProvider,new he]),n=t.next(),l.label=2;case 2:return n.done?[3,6]:(o=n.value,(i=o)?[4,o.isEnabled()]:[3,4]);case 3:i=l.sent(),l.label=4;case 4:if(i)return[2,o];l.label=5;case 5:return n=t.next(),[3,2];case 6:return[3,9];case 7:return a=l.sent(),r={error:a},[3,9];case 8:try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(r)throw r.error}return[7];case 9:return[2,void 0]}}))}))},Se=function(e,t,n){return t||n||e||P()},Ee=function(e){return e===V.XHR?new me:e===V.SendBeacon?new ye:ve().transportProvider},Ae=function(e){return l(void 0,void 0,void 0,(function(){var t,n,o,i,a,r,s;return c(this,(function(l){switch(l.label){case 0:return[4,(new ge).isEnabled()];case 1:if(!l.sent()||!e&&"undefined"==typeof location)return[2,""];for(t=null!=e?e:location.hostname,n=t.split("."),o=[],i="AMP_TLDTEST",a=n.length-2;a>=0;--a)o.push(n.slice(a).join("."));a=0,l.label=2;case 2:return a<o.length?(r=o[a],[4,(s=new ge({domain:"."+r})).set(i,1)]):[3,7];case 3:return l.sent(),[4,s.get(i)];case 4:return l.sent()?[4,s.remove(i)]:[3,6];case 5:return l.sent(),[2,"."+r];case 6:return a++,[3,2];case 7:return[2,""]}}))}))},Te=function(e,t){return l(void 0,void 0,void 0,(function(){var n,o,i,a,r,s,l,d,p;return c(this,(function(c){switch(c.label){case 0:return[4,(n=new ge).isEnabled()];case 1:return c.sent()&&!(null==t?void 0:t.disableCookies)||(n=new he),[4,n.isEnabled()];case 2:return c.sent()?(o=function(e){return"".concat(H.toLowerCase(),"_").concat(e.substring(0,6))}(e),[4,n.getRaw(o)]):[2,{optOut:!1}];case 3:return(i=c.sent())?[4,n.remove(o)]:[2,{optOut:!1}];case 4:return c.sent(),a=u(i.split("."),5),r=a[0],s=a[1],l=a[2],d=a[3],p=a[4],[2,{deviceId:r,userId:Pe(s),sessionId:Ge(d),lastEventTime:Ge(p),optOut:Boolean(l)}]}}))}))},Ge=function(e){var t=parseInt(e,32);if(!isNaN(t))return t},Pe=function(e){if(atob&&escape&&e)try{return decodeURIComponent(escape(atob(e)))}catch(e){return}},De=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.init=function(t,n,o){var i,a,s;return void 0===t&&(t=""),l(this,void 0,void 0,(function(){var l,d,u,p,g=this;return c(this,(function(c){switch(c.label){case 0:return this.initializing?[2]:(this.initializing=!0,[4,Te(t,o)]);case 1:return l=c.sent(),[4,be(t,n||l.userId,r(r({},o),{deviceId:null!==(i=l.deviceId)&&void 0!==i?i:null==o?void 0:o.deviceId,sessionId:null!==(a=l.sessionId)&&void 0!==a?a:null==o?void 0:o.sessionId,optOut:null!==(s=null==o?void 0:o.optOut)&&void 0!==s?s:l.optOut,lastEventTime:l.lastEventTime}))];case 2:return d=c.sent(),[4,e.prototype._init.call(this,d)];case 3:return c.sent(),u=!this.config.lastEventTime,(!this.config.sessionId||this.config.lastEventTime&&Date.now()-this.config.lastEventTime>this.config.sessionTimeout)&&(this.setSessionId(Date.now()),u=!0),(p=B()).eventBridge.setEventReceiver((function(e){g.track(e.eventType,e.eventProperties)})),p.identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),[4,this.add(new le)];case 4:return c.sent(),[4,this.add(new K)];case 5:return c.sent(),[4,this.add(new G)];case 6:return c.sent(),this.initializing=!1,[4,this.runAttributionStrategy(d.attribution,u)];case 7:return c.sent(),[4,this.runQueuedFunctions("dispatchQ")];case 8:return c.sent(),[2]}}))}))},t.prototype.runAttributionStrategy=function(e,t){return void 0===t&&(t=!1),l(this,void 0,void 0,(function(){var n,o,i;return c(this,(function(a){switch(a.label){case 0:return n=this.track.bind(this),o=this.setSessionId.bind(this,Date.now()),[4,Ce(this.config)];case 1:return i=a.sent(),[4,new te(this.config.apiKey,r(r({},e),{storage:i,track:n,onNewCampaign:o})).send(t)];case 2:return a.sent(),[2]}}))}))},t.prototype.getUserId=function(){var e;return null===(e=this.config)||void 0===e?void 0:e.userId},t.prototype.setUserId=function(e){this.config?this.config.userId=e:this.q.push(this.setUserId.bind(this,e))},t.prototype.getDeviceId=function(){var e;return null===(e=this.config)||void 0===e?void 0:e.deviceId},t.prototype.setDeviceId=function(e){this.config?this.config.deviceId=e:this.q.push(this.setDeviceId.bind(this,e))},t.prototype.reset=function(){this.setUserId(void 0),this.setDeviceId(P())},t.prototype.getSessionId=function(){var e;return null===(e=this.config)||void 0===e?void 0:e.sessionId},t.prototype.setSessionId=function(e){this.config?(this.config.sessionId=e,this.config.lastEventTime=void 0):this.q.push(this.setSessionId.bind(this,e))},t.prototype.setTransport=function(e){this.config?this.config.transportProvider=Ee(e):this.q.push(this.setTransport.bind(this,e))},t.prototype.identify=function(t,n){if(ie(t)){var o=t._q;t._q=[],t=oe(new k,o)}return(null==n?void 0:n.user_id)&&this.setUserId(n.user_id),(null==n?void 0:n.device_id)&&this.setDeviceId(n.device_id),e.prototype.identify.call(this,t,n)},t.prototype.groupIdentify=function(t,n,o,i){if(ie(o)){var a=o._q;o._q=[],o=oe(new k,a)}return e.prototype.groupIdentify.call(this,t,n,o,i)},t.prototype.revenue=function(t,n){if(ie(t)){var o=t._q;t._q=[],t=oe(new O,o)}return e.prototype.revenue.call(this,t,n)},t}(R),Le=function(){var e=new De;return{init:M(e.init.bind(e)),add:M(e.add.bind(e)),remove:M(e.remove.bind(e)),track:M(e.track.bind(e)),logEvent:M(e.logEvent.bind(e)),identify:M(e.identify.bind(e)),groupIdentify:M(e.groupIdentify.bind(e)),setGroup:M(e.setGroup.bind(e)),revenue:M(e.revenue.bind(e)),flush:M(e.flush.bind(e)),getUserId:e.getUserId.bind(e),setUserId:e.setUserId.bind(e),getDeviceId:e.getDeviceId.bind(e),setDeviceId:e.setDeviceId.bind(e),reset:e.reset.bind(e),getSessionId:e.getSessionId.bind(e),setSessionId:e.setSessionId.bind(e),setOptOut:e.setOptOut.bind(e),setTransport:e.setTransport.bind(e)}},Ie=Le(),ke=Ie.add,Oe=Ie.flush,Fe=Ie.getDeviceId,Re=Ie.getSessionId,Me=Ie.getUserId,Ne=Ie.groupIdentify,Be=Ie.identify,Ue=Ie.init,$e=Ie.logEvent,je=Ie.remove,Ke=Ie.reset,Ve=Ie.revenue,He=Ie.setDeviceId,We=Ie.setGroup,ze=Ie.setOptOut,qe=Ie.setSessionId,Ye=Ie.setTransport,Xe=Ie.setUserId,Qe=Ie.track}]);